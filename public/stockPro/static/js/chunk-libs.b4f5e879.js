(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-libs"],{"+3vN":function(t,e,a){(function(e){var a;a="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=a}).call(this,a("yLpj"))},"+JPL":function(t,e,a){t.exports={default:a("gRli"),__esModule:!0}},"+TT/":function(t,e,a){var i=a("bYtY"),r=a("mFDi"),n=a("OELB").parsePercent,o=a("7aKB"),s=i.each,h=["left","right","top","bottom","width","height"],l=[["width","left","right"],["height","top","bottom"]];function u(t,e,a,i,r){var n=0,o=0;null==i&&(i=1/0),null==r&&(r=1/0);var s=0;e.eachChild(function(h,l){var u,c,f=h.position,d=h.getBoundingRect(),C=e.childAt(l+1),p=C&&C.getBoundingRect();if("horizontal"===t){var m=d.width+(p?-p.x+d.x:0);(u=n+m)>i||h.newline?(n=0,u=m,o+=s+a,s=d.height):s=Math.max(s,d.height)}else{var D=d.height+(p?-p.y+d.y:0);(c=o+D)>r||h.newline?(n+=s+a,o=0,c=D,s=d.width):s=Math.max(s,d.width)}h.newline||(f[0]=n,f[1]=o,"horizontal"===t?n=u+a:o=c+a)})}var c=u,f=i.curry(u,"vertical"),d=i.curry(u,"horizontal");function C(t,e,a){a=o.normalizeCssArray(a||0);var i=e.width,s=e.height,h=n(t.left,i),l=n(t.top,s),u=n(t.right,i),c=n(t.bottom,s),f=n(t.width,i),d=n(t.height,s),C=a[2]+a[0],p=a[1]+a[3],m=t.aspect;switch(isNaN(f)&&(f=i-u-p-h),isNaN(d)&&(d=s-c-C-l),null!=m&&(isNaN(f)&&isNaN(d)&&(m>i/s?f=.8*i:d=.8*s),isNaN(f)&&(f=m*d),isNaN(d)&&(d=f/m)),isNaN(h)&&(h=i-u-f-p),isNaN(l)&&(l=s-c-d-C),t.left||t.right){case"center":h=i/2-f/2-a[3];break;case"right":h=i-f-p}switch(t.top||t.bottom){case"middle":case"center":l=s/2-d/2-a[0];break;case"bottom":l=s-d-C}h=h||0,l=l||0,isNaN(f)&&(f=i-p-h-(u||0)),isNaN(d)&&(d=s-C-l-(c||0));var D=new r(h+a[3],l+a[0],f,d);return D.margin=a,D}function p(t,e){return e&&t&&s(h,function(a){e.hasOwnProperty(a)&&(t[a]=e[a])}),t}e.LOCATION_PARAMS=h,e.HV_NAMES=l,e.box=c,e.vbox=f,e.hbox=d,e.getAvailableSize=function(t,e,a){var i=e.width,r=e.height,s=n(t.x,i),h=n(t.y,r),l=n(t.x2,i),u=n(t.y2,r);return(isNaN(s)||isNaN(parseFloat(t.x)))&&(s=0),(isNaN(l)||isNaN(parseFloat(t.x2)))&&(l=i),(isNaN(h)||isNaN(parseFloat(t.y)))&&(h=0),(isNaN(u)||isNaN(parseFloat(t.y2)))&&(u=r),a=o.normalizeCssArray(a||0),{width:Math.max(l-s-a[1]-a[3],0),height:Math.max(u-h-a[0]-a[2],0)}},e.getLayoutRect=C,e.positionElement=function(t,e,a,n,o){var s=!o||!o.hv||o.hv[0],h=!o||!o.hv||o.hv[1],l=o&&o.boundingMode||"all";if(s||h){var u;if("raw"===l)u="group"===t.type?new r(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(u=t.getBoundingRect(),t.needLocalTransform()){var c=t.getLocalTransform();(u=u.clone()).applyTransform(c)}e=C(i.defaults({width:u.width,height:u.height},e),a,n);var f=t.position,d=s?e.x-u.x:0,p=h?e.y-u.y:0;t.attr("position","raw"===l?[d,p]:[f[0]+d,f[1]+p])}},e.sizeCalculable=function(t,e){return null!=t[l[e][0]]||null!=t[l[e][1]]&&null!=t[l[e][2]]},e.mergeLayoutParam=function(t,e,a){!i.isObject(a)&&(a={});var r=a.ignoreSize;!i.isArray(r)&&(r=[r,r]);var n=h(l[0],0),o=h(l[1],1);function h(a,i){var n={},o=0,h={},l=0;if(s(a,function(e){h[e]=t[e]}),s(a,function(t){u(e,t)&&(n[t]=h[t]=e[t]),c(n,t)&&o++,c(h,t)&&l++}),r[i])return c(e,a[1])?h[a[2]]=null:c(e,a[2])&&(h[a[1]]=null),h;if(2!==l&&o){if(o>=2)return n;for(var f=0;f<a.length;f++){var d=a[f];if(!u(n,d)&&u(t,d)){n[d]=t[d];break}}return n}return h}function u(t,e){return t.hasOwnProperty(e)}function c(t,e){return null!=t[e]&&"auto"!==t[e]}function f(t,e,a){s(t,function(t){e[t]=a[t]})}f(l[0],t,n),f(l[1],t,o)},e.getLayoutParams=function(t){return p({},t)},e.copyLayoutParams=p},"+WSI":function(t,e,a){var i=a("/r8T");t.exports=function(t,e){return new(i(t))(e)}},"+rIm":function(t,e,a){var i=a("bYtY"),r=i.retrieve,n=i.defaults,o=i.extend,s=i.each,h=a("7aKB"),l=a("IwbS"),u=a("Qxkt"),c=a("OELB"),f=c.isRadianAroundZero,d=c.remRadian,C=a("oVpE").createSymbol,p=a("Fofx"),m=a("QBsz").applyTransform,D=a("aX7z").shouldShowAllLabels,v=Math.PI,g=function(t,e){this.opt=e,this.axisModel=t,n(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new l.Group;var a=new l.Group({position:e.position.slice(),rotation:e.rotation});a.updateTransform(),this._transform=a.transform,this._dumbGroup=a};g.prototype={constructor:g,hasBuilder:function(t){return!!S[t]},add:function(t){S[t].call(this)},getGroup:function(){return this.group}};var S={axisLine:function(){var t=this.opt,e=this.axisModel;if(e.get("axisLine.show")){var a=this.axisModel.axis.getExtent(),i=this._transform,r=[a[0],0],n=[a[1],0];i&&(m(r,r,i),m(n,n,i));var h=o({lineCap:"round"},e.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new l.Line({anid:"line",subPixelOptimize:!0,shape:{x1:r[0],y1:r[1],x2:n[0],y2:n[1]},style:h,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1}));var u=e.get("axisLine.symbol"),c=e.get("axisLine.symbolSize"),f=e.get("axisLine.symbolOffset")||0;if("number"==typeof f&&(f=[f,f]),null!=u){"string"==typeof u&&(u=[u,u]),"string"!=typeof c&&"number"!=typeof c||(c=[c,c]);var d=c[0],p=c[1];s([{rotate:t.rotation+Math.PI/2,offset:f[0],r:0},{rotate:t.rotation-Math.PI/2,offset:f[1],r:Math.sqrt((r[0]-n[0])*(r[0]-n[0])+(r[1]-n[1])*(r[1]-n[1]))}],function(e,a){if("none"!==u[a]&&null!=u[a]){var i=C(u[a],-d/2,-p/2,d,p,h.stroke,!0),n=e.r+e.offset,o=[r[0]+n*Math.cos(t.rotation),r[1]-n*Math.sin(t.rotation)];i.attr({rotation:e.rotate,position:o,silent:!0,z2:11}),this.group.add(i)}},this)}}},axisTickLabel:function(){var t=this.axisModel,e=this.opt,a=function(t,e,a){var i=e.axis,r=e.getModel("axisTick");if(!r.get("show")||i.scale.isBlank())return;for(var o=r.getModel("lineStyle"),s=a.tickDirection*r.get("length"),h=E(i.getTicksCoords(),t._transform,s,n(o.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}),"ticks"),l=0;l<h.length;l++)t.group.add(h[l]);return h}(this,t,e);!function(t,e,a){if(D(t.axis))return;var i=t.get("axisLabel.showMinLabel"),r=t.get("axisLabel.showMaxLabel");e=e||[],a=a||[];var n=e[0],o=e[1],s=e[e.length-1],h=e[e.length-2],l=a[0],u=a[1],c=a[a.length-1],f=a[a.length-2];!1===i?(x(n),x(l)):w(n,o)&&(i?(x(o),x(u)):(x(n),x(l)));!1===r?(x(s),x(c)):w(h,s)&&(r?(x(h),x(f)):(x(s),x(c)))}(t,function(t,e,a){var i=e.axis;if(!r(a.axisLabelShow,e.get("axisLabel.show"))||i.scale.isBlank())return;var n=e.getModel("axisLabel"),o=n.get("margin"),h=i.getViewLabels(),c=(r(a.labelRotate,n.get("rotate"))||0)*v/180,f=I(a.rotation,c,a.labelDirection),d=e.getCategories&&e.getCategories(!0),C=[],p=y(e),m=e.get("triggerEvent");return s(h,function(r,s){var h=r.tickValue,c=r.formattedLabel,D=r.rawLabel,v=n;d&&d[h]&&d[h].textStyle&&(v=new u(d[h].textStyle,n,e.ecModel));var g=v.getTextColor()||e.get("axisLine.lineStyle.color"),S=[i.dataToCoord(h),a.labelOffset+a.labelDirection*o],I=new l.Text({anid:"label_"+h,position:S,rotation:f.rotation,silent:p,z2:10});l.setTextStyle(I.style,v,{text:c,textAlign:v.getShallow("align",!0)||f.textAlign,textVerticalAlign:v.getShallow("verticalAlign",!0)||v.getShallow("baseline",!0)||f.textVerticalAlign,textFill:"function"==typeof g?g("category"===i.type?D:"value"===i.type?h+"":h,s):g}),m&&(I.eventData=T(e),I.eventData.targetType="axisLabel",I.eventData.value=D),t._dumbGroup.add(I),I.updateTransform(),C.push(I),t.group.add(I),I.decomposeTransform()}),C}(this,t,e),a),function(t,e,a){var i=e.axis,r=e.getModel("minorTick");if(!r.get("show")||i.scale.isBlank())return;var o=i.getMinorTicksCoords();if(!o.length)return;for(var s=r.getModel("lineStyle"),h=a.tickDirection*r.get("length"),l=n(s.getLineStyle(),n(e.getModel("axisTick").getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")})),u=0;u<o.length;u++)for(var c=E(o[u],t._transform,h,l,"minorticks_"+u),f=0;f<c.length;f++)t.group.add(c[f])}(this,t,e)},axisName:function(){var t=this.opt,e=this.axisModel,a=r(t.axisName,e.get("name"));if(a){var i,n,s=e.get("nameLocation"),u=t.nameDirection,c=e.getModel("nameTextStyle"),C=e.get("nameGap")||0,p=this.axisModel.axis.getExtent(),m=p[0]>p[1]?-1:1,D=["start"===s?p[0]-m*C:"end"===s?p[1]+m*C:(p[0]+p[1])/2,F(s)?t.labelOffset+u*C:0],g=e.get("nameRotate");null!=g&&(g=g*v/180),F(s)?i=I(t.rotation,null!=g?g:t.rotation,u):(i=function(t,e,a,i){var r,n,o=d(a-t.rotation),s=i[0]>i[1],h="start"===e&&!s||"start"!==e&&s;f(o-v/2)?(n=h?"bottom":"top",r="center"):f(o-1.5*v)?(n=h?"top":"bottom",r="center"):(n="middle",r=o<1.5*v&&o>v/2?h?"left":"right":h?"right":"left");return{rotation:o,textAlign:r,textVerticalAlign:n}}(t,s,g||0,p),null!=(n=t.axisNameAvailableWidth)&&(n=Math.abs(n/Math.sin(i.rotation)),!isFinite(n)&&(n=null)));var S=c.getFont(),x=e.get("nameTruncate",!0)||{},w=x.ellipsis,E=r(t.nameTruncateMaxWidth,x.maxWidth,n),b=null!=w&&null!=E?h.truncateText(a,E,S,w,{minChar:2,placeholder:x.placeholder}):a,L=e.get("tooltip",!0),M=e.mainType,A={componentType:M,name:a,$vars:["name"]};A[M+"Index"]=e.componentIndex;var O=new l.Text({anid:"name",__fullText:a,__truncatedText:b,position:D,rotation:i.rotation,silent:y(e),z2:1,tooltip:L&&L.show?o({content:a,formatter:function(){return a},formatterParams:A},L):null});l.setTextStyle(O.style,c,{text:b,textFont:S,textFill:c.getTextColor()||e.get("axisLine.lineStyle.color"),textAlign:c.get("align")||i.textAlign,textVerticalAlign:c.get("verticalAlign")||i.textVerticalAlign}),e.get("triggerEvent")&&(O.eventData=T(e),O.eventData.targetType="axisName",O.eventData.name=a),this._dumbGroup.add(O),O.updateTransform(),this.group.add(O),O.decomposeTransform()}}},T=g.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},I=g.innerTextLayout=function(t,e,a){var i,r,n=d(e-t);return f(n)?(r=a>0?"top":"bottom",i="center"):f(n-v)?(r=a>0?"bottom":"top",i="center"):(r="middle",i=n>0&&n<v?a>0?"right":"left":a>0?"left":"right"),{rotation:n,textAlign:i,textVerticalAlign:r}};var y=g.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)};function x(t){t&&(t.ignore=!0)}function w(t,e,a){var i=t&&t.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(i&&r){var n=p.identity([]);return p.rotate(n,n,-t.rotation),i.applyTransform(p.mul([],n,t.getLocalTransform())),r.applyTransform(p.mul([],n,e.getLocalTransform())),i.intersect(r)}}function F(t){return"middle"===t||"center"===t}function E(t,e,a,i,r){for(var n=[],o=[],s=[],h=0;h<t.length;h++){var u=t[h].coord;o[0]=u,o[1]=0,s[0]=u,s[1]=a,e&&(m(o,o,e),m(s,s,e));var c=new l.Line({anid:r+"_"+t[h].tickValue,subPixelOptimize:!0,shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:i,z2:2,silent:!0});n.push(c)}return n}var b=g;t.exports=b},"+vXQ":function(t,e,a){t.exports=!a("C61u")&&!a("S4vA")(function(){return 7!=Object.defineProperty(a("BfU5")("div"),"a",{get:function(){return 7}}).a})},"+wW9":function(t,e,a){var i=a("bYtY"),r=i.each,n=i.isArray,o=i.isObject,s=a("JuEJ"),h=a("4NO4").normalizeToArray;function l(t){r(u,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}var u=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],c=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"];t.exports=function(t,e){s(t,e),t.series=h(t.series),r(t.series,function(t){if(o(t)){var e=t.type;if("line"===e)null!=t.clipOverflow&&(t.clip=t.clipOverflow);else if("pie"===e||"gauge"===e)null!=t.clockWise&&(t.clockwise=t.clockWise);else if("gauge"===e){var a=function(t,e){e=e.split(",");for(var a=t,i=0;i<e.length&&null!=(a=a&&a[e[i]]);i++);return a}(t,"pointer.color");null!=a&&function(t,e,a,i){e=e.split(",");for(var r,n=t,o=0;o<e.length-1;o++)null==n[r=e[o]]&&(n[r]={}),n=n[r];(i||null==n[e[o]])&&(n[e[o]]=a)}(t,"itemStyle.color",a)}l(t)}}),t.dataRange&&(t.visualMap=t.dataRange),r(c,function(e){var a=t[e];a&&(n(a)||(a=[a]),r(a,function(t){l(t)}))})}},"/F7N":function(t,e){var a=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:a)(t)}},"/JZe":function(t,e,a){var i=a("USwo");i(i.S+i.F*!a("C61u"),"Object",{defineProperties:a("heda")})},"/NTb":function(t,e,a){e.f=a("zBWt")},"/WM3":function(t,e,a){var i=a("QuXc"),r=a("bYtY").isFunction,n={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var a=t.getData(),n=(t.visualColorAccessPath||"itemStyle.color").split("."),o=t.get(n),s=!r(o)||o instanceof i?null:o;o&&!s||(o=t.getColorFromPalette(t.name,null,e.getSeriesCount())),a.setVisual("color",o);var h=(t.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),l=t.get(h);if(a.setVisual("borderColor",l),!e.isSeriesFiltered(t)){s&&a.each(function(e){a.setItemVisual(e,"color",s(t.getDataParams(e)))});return{dataEach:a.hasItemOption?function(t,e){var a=t.getItemModel(e),i=a.get(n,!0),r=a.get(h,!0);null!=i&&t.setItemVisual(e,"color",i),null!=r&&t.setItemVisual(e,"borderColor",r)}:null}}}};t.exports=n},"/aIJ":function(t,e,a){},"/d5a":function(t,e){var a={average:function(t){for(var e=0,a=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],a++);return 0===a?NaN:e/a},sum:function(t){for(var e=0,a=0;a<t.length;a++)e+=t[a]||0;return e},max:function(t){for(var e=-1/0,a=0;a<t.length;a++)t[a]>e&&(e=t[a]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,a=0;a<t.length;a++)t[a]<e&&(e=t[a]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},i=function(t,e){return Math.round(t.length/2)};t.exports=function(t){return{seriesType:t,modifyOutputEnd:!0,reset:function(t,e,r){var n=t.getData(),o=t.get("sampling"),s=t.coordinateSystem;if("cartesian2d"===s.type&&o){var h,l=s.getBaseAxis(),u=s.getOtherAxis(l),c=l.getExtent(),f=Math.abs(c[1]-c[0]),d=Math.round(n.count()/f);d>1&&("string"==typeof o?h=a[o]:"function"==typeof o&&(h=o),h&&t.setData(n.downSample(n.mapDimension(u.dim),1/d,h,i)))}}}}},"/iHx":function(t,e,a){var i=a("6GrX"),r=a("IwbS"),n=["textStyle","color"],o={getTextColor:function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(n):null)},getFont:function(){return r.getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(t){return i.getBoundingRect(t,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}};t.exports=o},"/r8T":function(t,e,a){var i=a("ekG2"),r=a("Trx6"),n=a("zBWt")("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&null===(e=e[n])&&(e=void 0)),void 0===e?Array:e}},"/tXR":function(t,e){e.f=Object.getOwnPropertySymbols},"/y7N":function(t,e,a){var i=a("bYtY"),r=a("IwbS"),n=a("6GrX"),o=a("7aKB"),s=a("Fofx"),h=a("aX7z"),l=a("+rIm");function u(t,e,a,i,r){var s=c(a.get("value"),e.axis,e.ecModel,a.get("seriesDataIndices"),{precision:a.get("label.precision"),formatter:a.get("label.formatter")}),h=a.getModel("label"),l=o.normalizeCssArray(h.get("padding")||0),u=h.getFont(),f=n.getBoundingRect(s,u),d=r.position,C=f.width+l[1]+l[3],p=f.height+l[0]+l[2],m=r.align;"right"===m&&(d[0]-=C),"center"===m&&(d[0]-=C/2);var D=r.verticalAlign;"bottom"===D&&(d[1]-=p),"middle"===D&&(d[1]-=p/2),function(t,e,a,i){var r=i.getWidth(),n=i.getHeight();t[0]=Math.min(t[0]+e,r)-e,t[1]=Math.min(t[1]+a,n)-a,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}(d,C,p,i);var v=h.get("backgroundColor");v&&"auto"!==v||(v=e.get("axisLine.lineStyle.color")),t.label={shape:{x:0,y:0,width:C,height:p,r:h.get("borderRadius")},position:d.slice(),style:{text:s,textFont:u,textFill:h.getTextColor(),textPosition:"inside",textPadding:l,fill:v,stroke:h.get("borderColor")||"transparent",lineWidth:h.get("borderWidth")||0,shadowBlur:h.get("shadowBlur"),shadowColor:h.get("shadowColor"),shadowOffsetX:h.get("shadowOffsetX"),shadowOffsetY:h.get("shadowOffsetY")},z2:10}}function c(t,e,a,r,n){t=e.scale.parse(t);var o=e.scale.getLabel(t,{precision:n.precision}),s=n.formatter;if(s){var l={value:h.getAxisRawValue(e,t),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};i.each(r,function(t){var e=a.getSeriesByIndex(t.seriesIndex),i=t.dataIndexInside,r=e&&e.getDataParams(i);r&&l.seriesData.push(r)}),i.isString(s)?o=s.replace("{value}",o):i.isFunction(s)&&(o=s(l))}return o}function f(t,e,a){var i=s.create();return s.rotate(i,i,a.rotation),s.translate(i,i,a.position),r.applyTransform([t.dataToCoord(e),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],i)}e.buildElStyle=function(t){var e,a=t.get("type"),i=t.getModel(a+"Style");return"line"===a?(e=i.getLineStyle()).fill=null:"shadow"===a&&((e=i.getAreaStyle()).stroke=null),e},e.buildLabelElOption=u,e.getValueLabel=c,e.getTransformedPosition=f,e.buildCartesianSingleLabelElOption=function(t,e,a,i,r,n){var o=l.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=r.get("label.margin"),u(e,i,r,n,{position:f(i.axis,t,a),align:o.textAlign,verticalAlign:o.textVerticalAlign})},e.makeLineShape=function(t,e,a){return{x1:t[a=a||0],y1:t[1-a],x2:e[a],y2:e[1-a]}},e.makeRectShape=function(t,e,a){return{x:t[a=a||0],y:t[1-a],width:e[a],height:e[1-a]}},e.makeSectorShape=function(t,e,a,i,r,n){return{cx:t,cy:e,r0:a,r:i,startAngle:r,endAngle:n,clockwise:!0}}},"0V0F":function(t,e,a){var i=a("bYtY"),r=i.createHashMap,n=i.each;function o(t){n(t,function(e,a){var i=[],r=[NaN,NaN],n=[e.stackResultDimension,e.stackedOverDimension],o=e.data,s=e.isStackedByIndex,h=o.map(n,function(n,h,l){var u,c,f=o.get(e.stackedDimension,l);if(isNaN(f))return r;s?c=o.getRawIndex(l):u=o.get(e.stackedByDimension,l);for(var d=NaN,C=a-1;C>=0;C--){var p=t[C];if(s||(c=p.data.rawIndexOf(p.stackedByDimension,u)),c>=0){var m=p.data.getByRawIndex(p.stackResultDimension,c);if(f>=0&&m>0||f<=0&&m<0){f+=m,d=m;break}}}return i[0]=f,i[1]=d,i});o.hostModel.setData(h),e.data=h})}t.exports=function(t){var e=r();t.eachSeries(function(t){var a=t.get("stack");if(a){var i=e.get(a)||e.set(a,[]),r=t.getData(),n={stackResultDimension:r.getCalculationInfo("stackResultDimension"),stackedOverDimension:r.getCalculationInfo("stackedOverDimension"),stackedDimension:r.getCalculationInfo("stackedDimension"),stackedByDimension:r.getCalculationInfo("stackedByDimension"),isStackedByIndex:r.getCalculationInfo("isStackedByIndex"),data:r,seriesModel:t};if(!n.stackedDimension||!n.isStackedByIndex&&!n.stackedByDimension)return;i.length&&r.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(n)}}),e.each(o)}},"0WpP":function(t,e,a){var i=a("/F7N"),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},"0o9m":function(t,e,a){var i=a("ProS");a("hNWo"),a("RlCK"),a("XpcN");var r=a("kDyi"),n=a("bLfw");i.registerProcessor(i.PRIORITY.PROCESSOR.SERIES_FILTER,r),n.registerSubTypeDefaulter("legend",function(){return"plain"})},"0s+r":function(t,e,a){var i=a("bYtY"),r=a("QBsz"),n=a("y23F"),o=a("H6uX"),s=a("YH21"),h=a("C0SR"),l="silent";function u(){s.stop(this.event)}function c(){}c.prototype.dispose=function(){};var f=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],d=function(t,e,a,i){o.call(this),this.storage=t,this.painter=e,this.painterRoot=i,a=a||new c,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,this._gestureMgr,n.call(this),this.setHandlerProxy(a)};function C(t,e,a){if(t[t.rectHover?"rectContain":"contain"](e,a)){for(var i,r=t;r;){if(r.clipPath&&!r.clipPath.contain(e,a))return!1;r.silent&&(i=!0),r=r.parent}return!i||l}return!1}function p(t,e,a){var i=t.painter;return e<0||e>i.getWidth()||a<0||a>i.getHeight()}d.prototype={constructor:d,setHandlerProxy:function(t){this.proxy&&this.proxy.dispose(),t&&(i.each(f,function(e){t.on&&t.on(e,this[e],this)},this),t.handler=this),this.proxy=t},mousemove:function(t){var e=t.zrX,a=t.zrY,i=p(this,e,a),r=this._hovered,n=r.target;n&&!n.__zr&&(n=(r=this.findHover(r.x,r.y)).target);var o=this._hovered=i?{x:e,y:a}:this.findHover(e,a),s=o.target,h=this.proxy;h.setCursor&&h.setCursor(s?s.cursor:"default"),n&&s!==n&&this.dispatchToElement(r,"mouseout",t),this.dispatchToElement(o,"mousemove",t),s&&s!==n&&this.dispatchToElement(o,"mouseover",t)},mouseout:function(t){var e=t.zrEventControl,a=t.zrIsToLocalDOM;"only_globalout"!==e&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==e&&!a&&this.trigger("globalout",{type:"globalout",event:t})},resize:function(t){this._hovered={}},dispatch:function(t,e){var a=this[t];a&&a.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,a){var i=(t=t||{}).target;if(!i||!i.silent){for(var r="on"+e,n=function(t,e,a){return{type:t,event:a,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:a.zrX,offsetY:a.zrY,gestureEvent:a.gestureEvent,pinchX:a.pinchX,pinchY:a.pinchY,pinchScale:a.pinchScale,wheelDelta:a.zrDelta,zrByTouch:a.zrByTouch,which:a.which,stop:u}}(e,t,a);i&&(i[r]&&(n.cancelBubble=i[r].call(i,n)),i.trigger(e,n),i=i.parent,!n.cancelBubble););n.cancelBubble||(this.trigger(e,n),this.painter&&this.painter.eachOtherLayer(function(t){"function"==typeof t[r]&&t[r].call(t,n),t.trigger&&t.trigger(e,n)}))}},findHover:function(t,e,a){for(var i=this.storage.getDisplayList(),r={x:t,y:e},n=i.length-1;n>=0;n--){var o;if(i[n]!==a&&!i[n].ignore&&(o=C(i[n],t,e))&&(!r.topTarget&&(r.topTarget=i[n]),o!==l)){r.target=i[n];break}}return r},processGesture:function(t,e){this._gestureMgr||(this._gestureMgr=new h);var a=this._gestureMgr;"start"===e&&a.clear();var i=a.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&a.clear(),i){var r=i.type;t.gestureEvent=r,this.dispatchToElement({target:i.target},r,i.event)}}},i.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){d.prototype[t]=function(e){var a,i,n=e.zrX,o=e.zrY,s=p(this,n,o);if("mouseup"===t&&s||(i=(a=this.findHover(n,o)).target),"mousedown"===t)this._downEl=i,this._downPoint=[e.zrX,e.zrY],this._upEl=i;else if("mouseup"===t)this._upEl=i;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||r.dist(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,t,e)}}),i.mixin(d,o),i.mixin(d,n);var m=d;t.exports=m},"14Xm":function(t,e,a){t.exports=a("cSMa")},"1GvH":function(t,e,a){a("5w6Y"),t.exports=a("VSTI").Object.keys},"1Jh7":function(t,e,a){var i=a("y+Vt"),r=a("T6xi"),n=i.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){r.buildPath(t,e,!1)}});t.exports=n},"1K8p":function(t,e,a){"use strict";var i=a("jrfk"),r=a("ez49"),n=10,o=40,s=800;function h(t){var e=0,a=0,i=0,r=0;return"detail"in t&&(a=t.detail),"wheelDelta"in t&&(a=-t.wheelDelta/120),"wheelDeltaY"in t&&(a=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=a,a=0),i=e*n,r=a*n,"deltaY"in t&&(r=t.deltaY),"deltaX"in t&&(i=t.deltaX),(i||r)&&t.deltaMode&&(1==t.deltaMode?(i*=o,r*=o):(i*=s,r*=s)),i&&!e&&(e=i<1?-1:1),r&&!a&&(a=r<1?-1:1),{spinX:e,spinY:a,pixelX:i,pixelY:r}}h.getEventType=function(){return i.firefox()?"DOMMouseScroll":r("wheel")?"wheel":"mousewheel"},t.exports=h},"1LEl":function(t,e,a){var i=a("ProS"),r=a("F9bG"),n=i.extendComponentView({type:"axisPointer",render:function(t,e,a){var i=e.getComponent("tooltip"),n=t.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";r.register("axisPointer",a,function(t,e,a){"none"!==n&&("leave"===t||n.indexOf(t)>=0)&&a({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})})},remove:function(t,e){r.unregister(e.getZr(),"axisPointer"),n.superApply(this._model,"remove",arguments)},dispose:function(t,e){r.unregister("axisPointer",e),n.superApply(this._model,"dispose",arguments)}}),o=n;t.exports=o},"1MYJ":function(t,e,a){var i=a("y+Vt"),r=i.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var t=this.__dirtyPath,e=this.shape.paths,a=0;a<e.length;a++)t=t||e[a].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),a=0;a<t.length;a++)t[a].path||t[a].createPathProxy(),t[a].path.setScale(e[0],e[1],t[a].segmentIgnoreThreshold)},buildPath:function(t,e){for(var a=e.paths||[],i=0;i<a.length;i++)a[i].buildPath(t,a[i].shape,!0)},afterBrush:function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),i.prototype.getBoundingRect.call(this)}});t.exports=r},"1NG9":function(t,e,a){var i=a("y+Vt"),r=a("QBsz"),n=a("iXp4"),o=r.min,s=r.max,h=r.scaleAndAdd,l=r.copy,u=[],c=[],f=[];function d(t){return isNaN(t[0])||isNaN(t[1])}function C(t,e,a,i,n,C,p,m,D,v,g){return"none"!==v&&v?function(t,e,a,i,r,n,o,s,h,u,C){for(var p=0,m=a,D=0;D<i;D++){var v=e[m];if(m>=r||m<0)break;if(d(v)){if(C){m+=n;continue}break}if(m===a)t[n>0?"moveTo":"lineTo"](v[0],v[1]);else if(h>0){var g=e[p],S="y"===u?1:0,T=(v[S]-g[S])*h;l(c,g),c[S]=g[S]+T,l(f,v),f[S]=v[S]-T,t.bezierCurveTo(c[0],c[1],f[0],f[1],v[0],v[1])}else t.lineTo(v[0],v[1]);p=m,m+=n}return D}.apply(this,arguments):function(t,e,a,i,n,C,p,m,D,v,g){for(var S=0,T=a,I=0;I<i;I++){var y=e[T];if(T>=n||T<0)break;if(d(y)){if(g){T+=C;continue}break}if(T===a)t[C>0?"moveTo":"lineTo"](y[0],y[1]),l(c,y);else if(D>0){var x=T+C,w=e[x];if(g)for(;w&&d(e[x]);)w=e[x+=C];var F=.5,E=e[S],w=e[x];if(!w||d(w))l(f,y);else{var b,L;if(d(w)&&!g&&(w=y),r.sub(u,w,E),"x"===v||"y"===v){var M="x"===v?0:1;b=Math.abs(y[M]-E[M]),L=Math.abs(y[M]-w[M])}else b=r.dist(y,E),L=r.dist(y,w);h(f,y,u,-D*(1-(F=L/(L+b))))}o(c,c,m),s(c,c,p),o(f,f,m),s(f,f,p),t.bezierCurveTo(c[0],c[1],f[0],f[1],y[0],y[1]),h(c,y,u,D*F)}else t.lineTo(y[0],y[1]);S=T,T+=C}return I}.apply(this,arguments)}function p(t,e){var a=[1/0,1/0],i=[-1/0,-1/0];if(e)for(var r=0;r<t.length;r++){var n=t[r];n[0]<a[0]&&(a[0]=n[0]),n[1]<a[1]&&(a[1]=n[1]),n[0]>i[0]&&(i[0]=n[0]),n[1]>i[1]&&(i[1]=n[1])}return{min:e?a:i,max:e?i:a}}var m=i.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:n(i.prototype.brush),buildPath:function(t,e){var a=e.points,i=0,r=a.length,n=p(a,e.smoothConstraint);if(e.connectNulls){for(;r>0&&d(a[r-1]);r--);for(;i<r&&d(a[i]);i++);}for(;i<r;)i+=C(t,a,i,r,r,1,n.min,n.max,e.smooth,e.smoothMonotone,e.connectNulls)+1}}),D=i.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:n(i.prototype.brush),buildPath:function(t,e){var a=e.points,i=e.stackedOnPoints,r=0,n=a.length,o=e.smoothMonotone,s=p(a,e.smoothConstraint),h=p(i,e.smoothConstraint);if(e.connectNulls){for(;n>0&&d(a[n-1]);n--);for(;r<n&&d(a[r]);r++);}for(;r<n;){var l=C(t,a,r,n,n,1,s.min,s.max,e.smooth,o,e.connectNulls);C(t,i,r+l-1,l,n,-1,h.min,h.max,e.stackedOnSmooth,o,e.connectNulls),r+=l+1,t.closePath()}}});e.Polyline=m,e.Polygon=D},"1RvN":function(t,e){var a=function(){this.head=null,this.tail=null,this._len=0},i=a.prototype;i.insert=function(t){var e=new r(t);return this.insertEntry(e),e},i.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},i.remove=function(t){var e=t.prev,a=t.next;e?e.next=a:this.head=a,a?a.prev=e:this.tail=e,t.next=t.prev=null,this._len--},i.len=function(){return this._len},i.clear=function(){this.head=this.tail=null,this._len=0};var r=function(t){this.value=t,this.next,this.prev},n=function(t){this._list=new a,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null},o=n.prototype;o.put=function(t,e){var a=this._list,i=this._map,n=null;if(null==i[t]){var o=a.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var h=a.head;a.remove(h),delete i[h.key],n=h.value,this._lastRemovedEntry=h}s?s.value=e:s=new r(e),s.key=t,a.insertEntry(s),i[t]=s}return n},o.get=function(t){var e=this._map[t],a=this._list;if(null!=e)return e!==a.tail&&(a.remove(e),a.insertEntry(e)),e.value},o.clear=function(){this._list.clear(),this._map={}};var s=n;t.exports=s},"1bdT":function(t,e,a){var i=a("3gBT"),r=a("H6uX"),n=a("DN4a"),o=a("vWvF"),s=a("bYtY"),h=function(t){n.call(this,t),r.call(this,t),o.call(this,t),this.id=t.id||i()};h.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var a=this.transform;a||(a=this.transform=[1,0,0,1,0,0]),a[4]+=t,a[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var a=this[t];a||(a=this[t]=[]),a[0]=e[0],a[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(s.isObject(t))for(var a in t)t.hasOwnProperty(a)&&this.attrKV(a,t[a]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),this.clipPath=t,t.__zr=e,t.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var a=0;a<e.length;a++)t.animation.addAnimator(e[a]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var a=0;a<e.length;a++)t.animation.removeAnimator(e[a]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},s.mixin(h,o),s.mixin(h,n),s.mixin(h,r);var l=h;t.exports=l},"1i29":function(t,e,a){"use strict";var i=a("USwo"),r=a("FgkJ"),n=a("nAx8"),o=a("wlNh");t.exports=function(t){i(i.S,t,{from:function(t){var e,a,i,s,h=arguments[1];return r(this),(e=void 0!==h)&&r(h),void 0==t?new this:(a=[],e?(i=0,s=n(h,arguments[2],2),o(t,!1,function(t){a.push(s(t,i++))})):o(t,!1,a.push,a),new this(a))}})}},"1tPa":function(t,e,a){t.exports=function(t){return function(t){function e(i){if(a[i])return a[i].exports;var r=a[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,i){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=3)}([function(e,a){e.exports=t},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(0),r=function(t){return t&&t.__esModule?t:{default:t}}(i),n=window.videojs||r.default;"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n])}return a},writable:!0,configurable:!0});var o=["loadeddata","canplay","canplaythrough","play","pause","waiting","playing","ended","error"];e.default={name:"video-player",props:{start:{type:Number,default:0},crossOrigin:{type:String,default:""},playsinline:{type:Boolean,default:!1},customEventName:{type:String,default:"statechanged"},options:{type:Object,required:!0},events:{type:Array,default:function(){return[]}},globalOptions:{type:Object,default:function(){return{controls:!0,controlBar:{remainingTimeDisplay:!1,playToggle:{},progressControl:{},fullscreenToggle:{},volumeMenuButton:{inline:!1,vertical:!0}},techOrder:["html5"],plugins:{}}}},globalEvents:{type:Array,default:function(){return[]}}},data:function(){return{player:null,reseted:!0}},mounted:function(){this.player||this.initialize()},beforeDestroy:function(){this.player&&this.dispose()},methods:{initialize:function(){var t=this,e=Object.assign({},this.globalOptions,this.options);this.playsinline&&(this.$refs.video.setAttribute("playsinline",this.playsinline),this.$refs.video.setAttribute("webkit-playsinline",this.playsinline),this.$refs.video.setAttribute("x5-playsinline",this.playsinline),this.$refs.video.setAttribute("x5-video-player-type","h5"),this.$refs.video.setAttribute("x5-video-player-fullscreen",!1)),""!==this.crossOrigin&&(this.$refs.video.crossOrigin=this.crossOrigin,this.$refs.video.setAttribute("crossOrigin",this.crossOrigin));var a=function(e,a){e&&t.$emit(e,t.player),a&&t.$emit(t.customEventName,function(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}({},e,a))};e.plugins&&delete e.plugins.__ob__;var i=this;this.player=n(this.$refs.video,e,function(){for(var t=this,e=o.concat(i.events).concat(i.globalEvents),r={},n=0;n<e.length;n++)"string"==typeof e[n]&&void 0===r[e[n]]&&function(e){r[e]=null,t.on(e,function(){a(e,!0)})}(e[n]);this.on("timeupdate",function(){a("timeupdate",this.currentTime())}),i.$emit("ready",this)})},dispose:function(t){var e=this;this.player&&this.player.dispose&&("Flash"!==this.player.techName_&&this.player.pause&&this.player.pause(),this.player.dispose(),this.player=null,this.$nextTick(function(){e.reseted=!1,e.$nextTick(function(){e.reseted=!0,e.$nextTick(function(){t&&t()})})}))}},watch:{options:{deep:!0,handler:function(t,e){var a=this;this.dispose(function(){t&&t.sources&&t.sources.length&&a.initialize()})}}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(1),r=a.n(i);for(var n in i)["default","default"].indexOf(n)<0&&function(t){a.d(e,t,function(){return i[t]})}(n);var o=a(5),s=a(4),h=s(r.a,o.a,!1,null,null,null);e.default=h.exports},function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.install=e.videoPlayer=e.videojs=void 0;var r=a(0),n=i(r),o=a(2),s=i(o),h=window.videojs||n.default,l=function(t,e){e&&(e.options&&(s.default.props.globalOptions.default=function(){return e.options}),e.events&&(s.default.props.globalEvents.default=function(){return e.events})),t.component(s.default.name,s.default)},u={videojs:h,videoPlayer:s.default,install:l};e.default=u,e.videojs=h,e.videoPlayer=s.default,e.install=l},function(t,e){t.exports=function(t,e,a,i,r,n){var o,s=t=t||{},h=typeof t.default;"object"!==h&&"function"!==h||(o=t,s=t.default);var l,u="function"==typeof s?s.options:s;if(e&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0),a&&(u.functional=!0),r&&(u._scopeId=r),n?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},u._ssrRegister=l):i&&(l=i),l){var c=u.functional,f=c?u.render:u.beforeCreate;c?(u._injectStyles=l,u.render=function(t,e){return l.call(e),f(t,e)}):u.beforeCreate=f?[].concat(f,l):[l]}return{esModule:o,exports:s,options:u}}},function(t,e,a){"use strict";var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.reseted?a("div",{staticClass:"video-player"},[a("video",{ref:"video",staticClass:"video-js"})]):t._e()},staticRenderFns:[]};e.a=i}])}(a("rC42"))},"2DNl":function(t,e,a){var i=a("IMiH"),r=a("loD1"),n=a("59Ip"),o=a("aKvl"),s=a("n1HI"),h=a("hX1E").normalizeRadian,l=a("Sj9i"),u=a("hyiK"),c=i.CMD,f=2*Math.PI,d=1e-4;var C=[-1,-1,-1],p=[-1,-1];function m(){var t=p[0];p[0]=p[1],p[1]=t}function D(t,e,a,i,r,n,o,s,h,u){if(u>e&&u>i&&u>n&&u>s||u<e&&u<i&&u<n&&u<s)return 0;var c=l.cubicRootAt(e,i,n,s,u,C);if(0===c)return 0;for(var f,d,D=0,v=-1,g=0;g<c;g++){var S=C[g],T=0===S||1===S?.5:1;l.cubicAt(t,a,r,o,S)<h||(v<0&&(v=l.cubicExtrema(e,i,n,s,p),p[1]<p[0]&&v>1&&m(),f=l.cubicAt(e,i,n,s,p[0]),v>1&&(d=l.cubicAt(e,i,n,s,p[1]))),2===v?S<p[0]?D+=f<e?T:-T:S<p[1]?D+=d<f?T:-T:D+=s<d?T:-T:S<p[0]?D+=f<e?T:-T:D+=s<f?T:-T)}return D}function v(t,e,a,i,r,n,o,s){if(s>e&&s>i&&s>n||s<e&&s<i&&s<n)return 0;var h=l.quadraticRootAt(e,i,n,s,C);if(0===h)return 0;var u=l.quadraticExtremum(e,i,n);if(u>=0&&u<=1){for(var c=0,f=l.quadraticAt(e,i,n,u),d=0;d<h;d++){var p=0===C[d]||1===C[d]?.5:1;l.quadraticAt(t,a,r,C[d])<o||(C[d]<u?c+=f<e?p:-p:c+=n<f?p:-p)}return c}p=0===C[0]||1===C[0]?.5:1;return l.quadraticAt(t,a,r,C[0])<o?0:n<e?p:-p}function g(t,e,a,i,r,n,o,s){if((s-=e)>a||s<-a)return 0;var l=Math.sqrt(a*a-s*s);C[0]=-l,C[1]=l;var u=Math.abs(i-r);if(u<1e-4)return 0;if(u%f<1e-4){i=0,r=f;var c=n?1:-1;return o>=C[0]+t&&o<=C[1]+t?c:0}if(n){l=i;i=h(r),r=h(l)}else i=h(i),r=h(r);i>r&&(r+=f);for(var d=0,p=0;p<2;p++){var m=C[p];if(m+t>o){var D=Math.atan2(s,m);c=n?1:-1;D<0&&(D=f+D),(D>=i&&D<=r||D+f>=i&&D+f<=r)&&(D>Math.PI/2&&D<1.5*Math.PI&&(c=-c),d+=c)}}return d}function S(t,e,a,i,h){for(var l=0,f=0,C=0,p=0,m=0,S=0;S<t.length;){var T=t[S++];switch(T===c.M&&S>1&&(a||(l+=u(f,C,p,m,i,h))),1===S&&(p=f=t[S],m=C=t[S+1]),T){case c.M:f=p=t[S++],C=m=t[S++];break;case c.L:if(a){if(r.containStroke(f,C,t[S],t[S+1],e,i,h))return!0}else l+=u(f,C,t[S],t[S+1],i,h)||0;f=t[S++],C=t[S++];break;case c.C:if(a){if(n.containStroke(f,C,t[S++],t[S++],t[S++],t[S++],t[S],t[S+1],e,i,h))return!0}else l+=D(f,C,t[S++],t[S++],t[S++],t[S++],t[S],t[S+1],i,h)||0;f=t[S++],C=t[S++];break;case c.Q:if(a){if(o.containStroke(f,C,t[S++],t[S++],t[S],t[S+1],e,i,h))return!0}else l+=v(f,C,t[S++],t[S++],t[S],t[S+1],i,h)||0;f=t[S++],C=t[S++];break;case c.A:var I=t[S++],y=t[S++],x=t[S++],w=t[S++],F=t[S++],E=t[S++];S+=1;var b=1-t[S++],L=Math.cos(F)*x+I,M=Math.sin(F)*w+y;S>1?l+=u(f,C,L,M,i,h):(p=L,m=M);var A=(i-I)*w/x+I;if(a){if(s.containStroke(I,y,w,F,F+E,b,e,A,h))return!0}else l+=g(I,y,w,F,F+E,b,A,h);f=Math.cos(F+E)*x+I,C=Math.sin(F+E)*w+y;break;case c.R:p=f=t[S++],m=C=t[S++];L=p+t[S++],M=m+t[S++];if(a){if(r.containStroke(p,m,L,m,e,i,h)||r.containStroke(L,m,L,M,e,i,h)||r.containStroke(L,M,p,M,e,i,h)||r.containStroke(p,M,p,m,e,i,h))return!0}else l+=u(L,m,L,M,i,h),l+=u(p,M,p,m,i,h);break;case c.Z:if(a){if(r.containStroke(f,C,p,m,e,i,h))return!0}else l+=u(f,C,p,m,i,h);f=p,C=m}}return a||function(t,e){return Math.abs(t-e)<d}(C,m)||(l+=u(f,C,p,m,i,h)||0),0!==l}e.contain=function(t,e,a){return S(t,0,!1,e,a)},e.containStroke=function(t,e,a,i){return S(t,e,!0,a,i)}},"2SVd":function(t,e,a){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},"2fw6":function(t,e,a){var i=a("y+Vt").extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,a){a&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}});t.exports=i},"2zfi":function(t,e,a){var i=a("d+lc"),r=a("FgkJ"),n=a("zBWt")("species");t.exports=function(t,e){var a,o=i(t).constructor;return void 0===o||void 0==(a=i(o)[n])?e:r(a)}},"3+Ww":function(t,e){},"30RK":function(t,e,a){},"33yf":function(t,e,a){(function(t){function a(t,e){for(var a=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),a++):a&&(t.splice(i,1),a--)}if(e)for(;a--;a)t.unshift("..");return t}function i(t,e){if(t.filter)return t.filter(e);for(var a=[],i=0;i<t.length;i++)e(t[i],i,t)&&a.push(t[i]);return a}e.resolve=function(){for(var e="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var o=n>=0?arguments[n]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,r="/"===o.charAt(0))}return e=a(i(e.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var n=e.isAbsolute(t),o="/"===r(t,-1);return(t=a(i(t.split("/"),function(t){return!!t}),!n).join("/"))||n||(t="."),t&&o&&(t+="/"),(n?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,a){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var a=t.length-1;a>=0&&""===t[a];a--);return e>a?[]:t.slice(e,a-e+1)}t=e.resolve(t).substr(1),a=e.resolve(a).substr(1);for(var r=i(t.split("/")),n=i(a.split("/")),o=Math.min(r.length,n.length),s=o,h=0;h<o;h++)if(r[h]!==n[h]){s=h;break}var l=[];for(h=s;h<r.length;h++)l.push("..");return(l=l.concat(n.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),a=47===e,i=-1,r=!0,n=t.length-1;n>=1;--n)if(47===(e=t.charCodeAt(n))){if(!r){i=n;break}}else r=!1;return-1===i?a?"/":".":a&&1===i?"/":t.slice(0,i)},e.basename=function(t,e){var a=function(t){"string"!=typeof t&&(t+="");var e,a=0,i=-1,r=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!r){a=e+1;break}}else-1===i&&(r=!1,i=e+1);return-1===i?"":t.slice(a,i)}(t);return e&&a.substr(-1*e.length)===e&&(a=a.substr(0,a.length-e.length)),a},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,a=0,i=-1,r=!0,n=0,o=t.length-1;o>=0;--o){var s=t.charCodeAt(o);if(47!==s)-1===i&&(r=!1,i=o+1),46===s?-1===e?e=o:1!==n&&(n=1):-1!==e&&(n=-1);else if(!r){a=o+1;break}}return-1===e||-1===i||0===n||1===n&&e===i-1&&e===a+1?"":t.slice(e,i)};var r="b"==="ab".substr(-1)?function(t,e,a){return t.substr(e,a)}:function(t,e,a){return e<0&&(e=t.length+e),t.substr(e,a)}}).call(this,a("8oxB"))},"3C/r":function(t,e){var a=function(t,e){this.image=t,this.repeat=e,this.type="pattern"};a.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")};var i=a;t.exports=i},"3LNs":function(t,e,a){var i=a("bYtY"),r=a("Yl7c"),n=a("IwbS"),o=a("zTMp"),s=a("YH21"),h=a("iLNv"),l=(0,a("4NO4").makeInner)(),u=i.clone,c=i.bind;function f(){}function d(t,e,a,r){(function t(e,a){if(i.isObject(e)&&i.isObject(a)){var r=!0;return i.each(a,function(a,i){r=r&&t(e[i],a)}),!!r}return e===a})(l(a).lastProp,r)||(l(a).lastProp=r,e?n.updateProps(a,r,t):(a.stopAnimation(),a.attr(r)))}function C(t,e){t[e.get("label.show")?"show":"hide"]()}function p(t){return{position:t.position.slice(),rotation:t.rotation||0}}function m(t,e,a){var i=e.get("z"),r=e.get("zlevel");t&&t.traverse(function(t){"group"!==t.type&&(null!=i&&(t.z=i),null!=r&&(t.zlevel=r),t.silent=a)})}f.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(t,e,a,r){var o=e.get("value"),s=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=a,r||this._lastValue!==o||this._lastStatus!==s){this._lastValue=o,this._lastStatus=s;var h=this._group,l=this._handle;if(!s||"hide"===s)return h&&h.hide(),void(l&&l.hide());h&&h.show(),l&&l.show();var u={};this.makeElOption(u,o,t,e,a);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(a),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(t,e);if(h){var C=i.curry(d,e,f);this.updatePointerEl(h,u,C,e),this.updateLabelEl(h,u,C,e)}else h=this._group=new n.Group,this.createPointerEl(h,u,t,e),this.createLabelEl(h,u,t,e),a.getZr().add(h);m(h,e,!0),this._renderHandle(o)}},remove:function(t){this.clear(t)},dispose:function(t){this.clear(t)},determineAnimation:function(t,e){var a=e.get("animation"),i=t.axis,r="category"===i.type,n=e.get("snap");if(!n&&!r)return!1;if("auto"===a||null==a){var s=this.animationThreshold;if(r&&i.getBandWidth()>s)return!0;if(n){var h=o.getAxisInfo(t).seriesDataCount,l=i.getExtent();return Math.abs(l[0]-l[1])/h>s}return!1}return!0===a},makeElOption:function(t,e,a,i,r){},createPointerEl:function(t,e,a,i){var r=e.pointer;if(r){var o=l(t).pointerEl=new n[r.type](u(e.pointer));t.add(o)}},createLabelEl:function(t,e,a,i){if(e.label){var r=l(t).labelEl=new n.Rect(u(e.label));t.add(r),C(r,i)}},updatePointerEl:function(t,e,a){var i=l(t).pointerEl;i&&e.pointer&&(i.setStyle(e.pointer.style),a(i,{shape:e.pointer.shape}))},updateLabelEl:function(t,e,a,i){var r=l(t).labelEl;r&&(r.setStyle(e.label.style),a(r,{shape:e.label.shape,position:e.label.position}),C(r,i))},_renderHandle:function(t){if(!this._dragging&&this.updateHandleTransform){var e,a=this._axisPointerModel,r=this._api.getZr(),o=this._handle,l=a.getModel("handle"),u=a.get("status");if(!l.get("show")||!u||"hide"===u)return o&&r.remove(o),void(this._handle=null);this._handle||(e=!0,o=this._handle=n.createIcon(l.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){s.stop(t.event)},onmousedown:c(this._onHandleDragMove,this,0,0),drift:c(this._onHandleDragMove,this),ondragend:c(this._onHandleDragEnd,this)}),r.add(o)),m(o,a,!1);o.setStyle(l.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var f=l.get("size");i.isArray(f)||(f=[f,f]),o.attr("scale",[f[0]/2,f[1]/2]),h.createOrUpdate(this,"_doDispatchAxisPointer",l.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},_moveHandleToValue:function(t,e){d(this._axisPointerModel,!e&&this._moveAnimation,this._handle,p(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(t,e){var a=this._handle;if(a){this._dragging=!0;var i=this.updateHandleTransform(p(a),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=i,a.stopAnimation(),a.attr(p(i)),l(a).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},_onHandleDragEnd:function(t){if(this._dragging=!1,this._handle){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),a=this._group,i=this._handle;e&&a&&(this._lastGraphicKey=null,a&&e.remove(a),i&&e.remove(i),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(t,e,a){return{x:t[a=a||0],y:t[1-a],width:e[a],height:e[1-a]}}},f.prototype.constructor=f,r.enableClassExtend(f);var D=f;t.exports=D},"3P3t":function(t,e,a){var i=a("USwo");i(i.P+i.R,"Map",{toJSON:a("KtlF")("Map")})},"3e3G":function(t,e,a){var i=a("bYtY"),r=a("QuXc"),n=function(t,e,a,i,n){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==a?.5:a,this.type="radial",this.global=n||!1,r.call(this,i)};n.prototype={constructor:n},i.inherits(n,r);var o=n;t.exports=o},"3gBT":function(t,e){var a=2311;t.exports=function(){return a++}},"3hzK":function(t,e){t.exports={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}}},"40oJ":function(t,e,a){var i=a("ixoo")("meta"),r=a("ekG2"),n=a("nA4W"),o=a("GhSp").f,s=0,h=Object.isExtensible||function(){return!0},l=!a("S4vA")(function(){return h(Object.preventExtensions({}))}),u=function(t){o(t,i,{value:{i:"O"+ ++s,w:{}}})},c=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!n(t,i)){if(!h(t))return"F";if(!e)return"E";u(t)}return t[i].i},getWeak:function(t,e){if(!n(t,i)){if(!h(t))return!0;if(!e)return!1;u(t)}return t[i].w},onFreeze:function(t){return l&&c.NEED&&h(t)&&!n(t,i)&&u(t),t}}},"4BeY":function(t,e,a){(function(e){!function(e,a){t.exports=a()}(0,function(){"use strict";var t=function(t){var e=t.id,a=t.viewBox,i=t.content;this.id=e,this.viewBox=a,this.content=i};t.prototype.stringify=function(){return this.content},t.prototype.toString=function(){return this.stringify()},t.prototype.destroy=function(){var t=this;["id","viewBox","content"].forEach(function(e){return delete t[e]})};"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self;function a(t,e){return t(e={exports:{}},e.exports),e.exports}var i=a(function(t,e){t.exports=function(){function t(t){var e=t&&"object"==typeof t;return e&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function e(e,a){var r=a&&!0===a.clone;return r&&t(e)?i(function(t){return Array.isArray(t)?[]:{}}(e),e,a):e}function a(a,r,n){var o=a.slice();return r.forEach(function(r,s){void 0===o[s]?o[s]=e(r,n):t(r)?o[s]=i(a[s],r,n):-1===a.indexOf(r)&&o.push(e(r,n))}),o}function i(r,n,o){var s=Array.isArray(n),h=o||{arrayMerge:a},l=h.arrayMerge||a;return s?Array.isArray(r)?l(r,n,o):e(n,o):function(a,r,n){var o={};return t(a)&&Object.keys(a).forEach(function(t){o[t]=e(a[t],n)}),Object.keys(r).forEach(function(s){t(r[s])&&a[s]?o[s]=i(a[s],r[s],n):o[s]=e(r[s],n)}),o}(r,n,o)}return i.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce(function(t,a){return i(t,a,e)})},i}()}),r=a(function(t,e){e.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},t.exports=e.default}),n=r.svg,o=r.xlink,s={};s[n.name]=n.uri,s[o.name]=o.uri;var h=function(t,e){return void 0===t&&(t=""),"<svg "+function(t){return Object.keys(t).map(function(e){return e+'="'+t[e].toString().replace(/"/g,"&quot;")+'"'}).join(" ")}(i(s,e||{}))+">"+t+"</svg>"};return function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var a={isMounted:{}};return a.isMounted.get=function(){return!!this.node},e.createFromExistingNode=function(t){return new e({id:t.getAttribute("id"),viewBox:t.getAttribute("viewBox"),content:t.outerHTML})},e.prototype.destroy=function(){this.isMounted&&this.unmount(),t.prototype.destroy.call(this)},e.prototype.mount=function(t){if(this.isMounted)return this.node;var e="string"==typeof t?document.querySelector(t):t,a=this.render();return this.node=a,e.appendChild(a),a},e.prototype.render=function(){var t=this.stringify();return function(t){var e=!!document.importNode,a=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement;return e?document.importNode(a,!0):a}(h(t)).childNodes[0]},e.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(e.prototype,a),e}(t)})}).call(this,a("yLpj"))},"4HMb":function(t,e,a){var i=a("bYtY"),r=a("6GrX"),n=a("4NO4").makeInner,o=a("aX7z"),s=o.makeLabelFormatter,h=o.getOptionCategoryInterval,l=o.shouldShowAllLabels,u=n();function c(t,e){var a,r=f(t,"labels"),n=h(e),o=d(r,n);return o||C(r,n,{labels:i.isFunction(n)?m(t,n):p(t,a="auto"===n?function(t){var e=u(t).autoInterval;return null!=e?e:u(t).autoInterval=t.calculateCategoryInterval()}(t):n),labelCategoryInterval:a})}function f(t,e){return u(t)[e]||(u(t)[e]=[])}function d(t,e){for(var a=0;a<t.length;a++)if(t[a].key===e)return t[a].value}function C(t,e,a){return t.push({key:e,value:a}),a}function p(t,e,a){var i=s(t),r=t.scale,n=r.getExtent(),o=t.getLabelModel(),h=[],u=Math.max((e||0)+1,1),c=n[0],f=r.count();0!==c&&u>1&&f/u>2&&(c=Math.round(Math.ceil(c/u)*u));var d=l(t),C=o.get("showMinLabel")||d,p=o.get("showMaxLabel")||d;C&&c!==n[0]&&D(n[0]);for(var m=c;m<=n[1];m+=u)D(m);function D(t){h.push(a?t:{formattedLabel:i(t),rawLabel:r.getLabel(t),tickValue:t})}return p&&m-u!==n[1]&&D(n[1]),h}function m(t,e,a){var r=t.scale,n=s(t),o=[];return i.each(r.getTicks(),function(t){var i=r.getLabel(t);e(t,i)&&o.push(a?t:{formattedLabel:n(t),rawLabel:i,tickValue:t})}),o}e.createAxisLabels=function(t){return"category"===t.type?function(t){var e=t.getLabelModel(),a=c(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:a.labelCategoryInterval}:a}(t):function(t){var e=t.scale.getTicks(),a=s(t);return{labels:i.map(e,function(e,i){return{formattedLabel:a(e,i),rawLabel:t.scale.getLabel(e),tickValue:e}})}}(t)},e.createAxisTicks=function(t,e){return"category"===t.type?function(t,e){var a,r,n=f(t,"ticks"),o=h(e),s=d(n,o);if(s)return s;if(e.get("show")&&!t.scale.isBlank()||(a=[]),i.isFunction(o))a=m(t,o,!0);else if("auto"===o){var l=c(t,t.getLabelModel());r=l.labelCategoryInterval,a=i.map(l.labels,function(t){return t.tickValue})}else a=p(t,r=o,!0);return C(n,o,{ticks:a,tickCategoryInterval:r})}(t,e):{ticks:t.scale.getTicks()}},e.calculateCategoryInterval=function(t){var e=function(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}(t),a=s(t),i=(e.axisRotate-e.labelRotate)/180*Math.PI,n=t.scale,o=n.getExtent(),h=n.count();if(o[1]-o[0]<1)return 0;var l=1;h>40&&(l=Math.max(1,Math.floor(h/40)));for(var c=o[0],f=t.dataToCoord(c+1)-t.dataToCoord(c),d=Math.abs(f*Math.cos(i)),C=Math.abs(f*Math.sin(i)),p=0,m=0;c<=o[1];c+=l){var D,v,g=r.getBoundingRect(a(c),e.font,"center","top");D=1.3*g.width,v=1.3*g.height,p=Math.max(p,D,7),m=Math.max(m,v,7)}var S=p/d,T=m/C;isNaN(S)&&(S=1/0),isNaN(T)&&(T=1/0);var I=Math.max(0,Math.floor(Math.min(S,T))),y=u(t.model),x=t.getExtent(),w=y.lastAutoInterval,F=y.lastTickCount;return null!=w&&null!=F&&Math.abs(w-I)<=1&&Math.abs(F-h)<=1&&w>I&&y.axisExtend0===x[0]&&y.axisExtend1===x[1]?I=w:(y.lastTickCount=h,y.lastAutoInterval=I,y.axisExtend0=x[0],y.axisExtend1=x[1]),I}},"4NO4":function(t,e,a){var i=a("bYtY"),r=a("ItGF"),n=i.each,o=i.isObject,s=i.isArray,h="series\0";function l(t){return t instanceof Array?t:null==t?[]:[t]}function u(t){return o(t)&&t.id&&0===(t.id+"").indexOf("\0_ec_\0")}var c=0;function f(t,e){return t&&t.hasOwnProperty(e)}e.normalizeToArray=l,e.defaultEmphasis=function(t,e,a){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var i=0,r=a.length;i<r;i++){var n=a[i];!t.emphasis[e].hasOwnProperty(n)&&t[e].hasOwnProperty(n)&&(t.emphasis[e][n]=t[e][n])}}},e.TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"],e.getDataItemValue=function(t){return!o(t)||s(t)||t instanceof Date?t:t.value},e.isDataItemOption=function(t){return o(t)&&!(t instanceof Array)},e.mappingToExists=function(t,e){e=(e||[]).slice();var a=i.map(t||[],function(t,e){return{exist:t}});return n(e,function(t,i){if(o(t)){for(var r=0;r<a.length;r++)if(!a[r].option&&null!=t.id&&a[r].exist.id===t.id+"")return a[r].option=t,void(e[i]=null);for(r=0;r<a.length;r++){var n=a[r].exist;if(!(a[r].option||null!=n.id&&null!=t.id||null==t.name||u(t)||u(n)||n.name!==t.name+""))return a[r].option=t,void(e[i]=null)}}}),n(e,function(t,e){if(o(t)){for(var i=0;i<a.length;i++){var r=a[i].exist;if(!a[i].option&&!u(r)&&null==t.id){a[i].option=t;break}}i>=a.length&&a.push({option:t})}}),a},e.makeIdAndName=function(t){var e=i.createHashMap();n(t,function(t,a){var i=t.exist;i&&e.set(i.id,t)}),n(t,function(t,a){var r=t.option;i.assert(!r||null==r.id||!e.get(r.id)||e.get(r.id)===t,"id duplicates: "+(r&&r.id)),r&&null!=r.id&&e.set(r.id,t),!t.keyInfo&&(t.keyInfo={})}),n(t,function(t,a){var i=t.exist,r=t.option,n=t.keyInfo;if(o(r)){if(n.name=null!=r.name?r.name+"":i?i.name:h+a,i)n.id=i.id;else if(null!=r.id)n.id=r.id+"";else{var s=0;do{n.id="\0"+n.name+"\0"+s++}while(e.get(n.id))}e.set(n.id,t)}})},e.isNameSpecified=function(t){var e=t.name;return!(!e||!e.indexOf(h))},e.isIdInner=u,e.compressBatches=function(t,e){var a={},i={};return r(t||[],a),r(e||[],i,a),[n(a),n(i)];function r(t,e,a){for(var i=0,r=t.length;i<r;i++)for(var n=t[i].seriesId,o=l(t[i].dataIndex),s=a&&a[n],h=0,u=o.length;h<u;h++){var c=o[h];s&&s[c]?s[c]=null:(e[n]||(e[n]={}))[c]=1}}function n(t,e){var a=[];for(var i in t)if(t.hasOwnProperty(i)&&null!=t[i])if(e)a.push(+i);else{var r=n(t[i],!0);r.length&&a.push({seriesId:i,dataIndex:r})}return a}},e.queryDataIndex=function(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?i.isArray(e.dataIndex)?i.map(e.dataIndex,function(e){return t.indexOfRawIndex(e)}):t.indexOfRawIndex(e.dataIndex):null!=e.name?i.isArray(e.name)?i.map(e.name,function(e){return t.indexOfName(e)}):t.indexOfName(e.name):void 0},e.makeInner=function(){var t="__\0ec_inner_"+c+++"_"+Math.random().toFixed(5);return function(e){return e[t]||(e[t]={})}},e.parseFinder=function(t,e,a){if(i.isString(e)){var r={};r[e+"Index"]=0,e=r}var o=a&&a.defaultMainType;!o||f(e,o+"Index")||f(e,o+"Id")||f(e,o+"Name")||(e[o+"Index"]=0);var s={};return n(e,function(r,n){if(r=e[n],"dataIndex"!==n&&"dataIndexInside"!==n){var o=n.match(/^(\w+)(Index|Id|Name)$/)||[],h=o[1],l=(o[2]||"").toLowerCase();if(!(!h||!l||null==r||"index"===l&&"none"===r||a&&a.includeMainTypes&&i.indexOf(a.includeMainTypes,h)<0)){var u={mainType:h};"index"===l&&"all"===r||(u[l]=r);var c=t.queryComponents(u);s[h+"Models"]=c,s[h+"Model"]=c[0]}}else s[n]=r}),s},e.setAttribute=function(t,e,a){t.setAttribute?t.setAttribute(e,a):t[e]=a},e.getAttribute=function(t,e){return t.getAttribute?t.getAttribute(e):t[e]},e.getTooltipRenderMode=function(t){return"auto"===t?r.domSupported?"html":"richText":t||"html"},e.groupData=function(t,e){var a=i.createHashMap(),r=[];return i.each(t,function(t){var i=e(t);(a.get(i)||(r.push(i),a.set(i,[]))).push(t)}),{keys:r,buckets:a}}},"4NgU":function(t,e,a){var i=a("Yl7c");function r(t){this._setting=t||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}r.prototype.parse=function(t){return t},r.prototype.getSetting=function(t){return this._setting[t]},r.prototype.contain=function(t){var e=this._extent;return t>=e[0]&&t<=e[1]},r.prototype.normalize=function(t){var e=this._extent;return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])},r.prototype.scale=function(t){var e=this._extent;return t*(e[1]-e[0])+e[0]},r.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},r.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.setExtent=function(t,e){var a=this._extent;isNaN(t)||(a[0]=t),isNaN(e)||(a[1]=e)},r.prototype.isBlank=function(){return this._isBlank},r.prototype.setBlank=function(t){this._isBlank=t},r.prototype.getLabel=null,i.enableClassExtend(r),i.enableClassManagement(r,{registerWhenExtend:!0});var n=r;t.exports=n},"4Zg2":function(t,e,a){var i=a("7whZ"),r=a("VSTI"),n=a("5ETA"),o=a("/NTb"),s=a("GhSp").f;t.exports=function(t){var e=r.Symbol||(r.Symbol=n?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},"4d7F":function(t,e,a){t.exports={default:a("Ir+t"),__esModule:!0}},"4fz+":function(t,e,a){var i=a("bYtY"),r=a("1bdT"),n=a("mFDi"),o=function(t){for(var e in t=t||{},r.call(this,t),t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};o.prototype={constructor:o,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,a=0;a<e.length;a++)if(e[a].name===t)return e[a]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var a=this._children,i=a.indexOf(e);i>=0&&(a.splice(i,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__storage,a=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof o&&t.addChildrenToStorage(e)),a&&a.refresh()},remove:function(t){var e=this.__zr,a=this.__storage,r=this._children,n=i.indexOf(r,t);return n<0?this:(r.splice(n,1),t.parent=null,a&&(a.delFromStorage(t),t instanceof o&&t.delChildrenFromStorage(a)),e&&e.refresh(),this)},removeAll:function(){var t,e,a=this._children,i=this.__storage;for(e=0;e<a.length;e++)t=a[e],i&&(i.delFromStorage(t),t instanceof o&&t.delChildrenFromStorage(i)),t.parent=null;return a.length=0,this},eachChild:function(t,e){for(var a=this._children,i=0;i<a.length;i++){var r=a[i];t.call(e,r,i)}return this},traverse:function(t,e){for(var a=0;a<this._children.length;a++){var i=this._children[a];t.call(e,i),"group"===i.type&&i.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var a=this._children[e];t.addToStorage(a),a instanceof o&&a.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var a=this._children[e];t.delFromStorage(a),a instanceof o&&a.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,a=new n(0,0,0,0),i=t||this._children,r=[],o=0;o<i.length;o++){var s=i[o];if(!s.ignore&&!s.invisible){var h=s.getBoundingRect(),l=s.getLocalTransform(r);l?(a.copy(h),a.applyTransform(l),(e=e||a.clone()).union(a)):(e=e||h.clone()).union(h)}}return e||a}},i.inherits(o,r);var s=o;t.exports=s},"4mN7":function(t,e,a){var i=a("QBsz"),r=a("Sj9i"),n=Math.min,o=Math.max,s=Math.sin,h=Math.cos,l=2*Math.PI,u=i.create(),c=i.create(),f=i.create();var d=[],C=[];e.fromPoints=function(t,e,a){if(0!==t.length){var i,r=t[0],s=r[0],h=r[0],l=r[1],u=r[1];for(i=1;i<t.length;i++)r=t[i],s=n(s,r[0]),h=o(h,r[0]),l=n(l,r[1]),u=o(u,r[1]);e[0]=s,e[1]=l,a[0]=h,a[1]=u}},e.fromLine=function(t,e,a,i,r,s){r[0]=n(t,a),r[1]=n(e,i),s[0]=o(t,a),s[1]=o(e,i)},e.fromCubic=function(t,e,a,i,s,h,l,u,c,f){var p,m=r.cubicExtrema,D=r.cubicAt,v=m(t,a,s,l,d);for(c[0]=1/0,c[1]=1/0,f[0]=-1/0,f[1]=-1/0,p=0;p<v;p++){var g=D(t,a,s,l,d[p]);c[0]=n(g,c[0]),f[0]=o(g,f[0])}for(v=m(e,i,h,u,C),p=0;p<v;p++){var S=D(e,i,h,u,C[p]);c[1]=n(S,c[1]),f[1]=o(S,f[1])}c[0]=n(t,c[0]),f[0]=o(t,f[0]),c[0]=n(l,c[0]),f[0]=o(l,f[0]),c[1]=n(e,c[1]),f[1]=o(e,f[1]),c[1]=n(u,c[1]),f[1]=o(u,f[1])},e.fromQuadratic=function(t,e,a,i,s,h,l,u){var c=r.quadraticExtremum,f=r.quadraticAt,d=o(n(c(t,a,s),1),0),C=o(n(c(e,i,h),1),0),p=f(t,a,s,d),m=f(e,i,h,C);l[0]=n(t,s,p),l[1]=n(e,h,m),u[0]=o(t,s,p),u[1]=o(e,h,m)},e.fromArc=function(t,e,a,r,n,o,d,C,p){var m=i.min,D=i.max,v=Math.abs(n-o);if(v%l<1e-4&&v>1e-4)return C[0]=t-a,C[1]=e-r,p[0]=t+a,void(p[1]=e+r);if(u[0]=h(n)*a+t,u[1]=s(n)*r+e,c[0]=h(o)*a+t,c[1]=s(o)*r+e,m(C,u,c),D(p,u,c),(n%=l)<0&&(n+=l),(o%=l)<0&&(o+=l),n>o&&!d?o+=l:n<o&&d&&(n+=l),d){var g=o;o=n,n=g}for(var S=0;S<o;S+=Math.PI/2)S>n&&(f[0]=h(S)*a+t,f[1]=s(S)*r+e,m(C,f,C),D(p,f,p))}},"56rv":function(t,e,a){var i=a("IwbS"),r=a("x3X8").getDefaultLabel;function n(t,e){"outside"===t.textPosition&&(t.textPosition=e)}e.setLabel=function(t,e,a,o,s,h,l){var u=a.getModel("label"),c=a.getModel("emphasis.label");i.setLabelStyle(t,e,u,c,{labelFetcher:s,labelDataIndex:h,defaultText:r(s.getData(),h),isRectText:!0,autoColor:o}),n(t),n(e)}},"59Ip":function(t,e,a){var i=a("Sj9i");e.containStroke=function(t,e,a,r,n,o,s,h,l,u,c){if(0===l)return!1;var f=l;return!(c>e+f&&c>r+f&&c>o+f&&c>h+f||c<e-f&&c<r-f&&c<o-f&&c<h-f||u>t+f&&u>a+f&&u>n+f&&u>s+f||u<t-f&&u<a-f&&u<n-f&&u<s-f)&&i.cubicProjectPoint(t,e,a,r,n,o,s,h,u,c,null)<=f/2}},"5ETA":function(t,e){t.exports=!0},"5GhG":function(t,e,a){var i=a("5GtS"),r=a("bYtY"),n=a("L0Ub").getDimensionTypeByAxis,o=a("D5nY").makeSeriesEncodeForAxisCoordSys,s={_baseAxisDim:null,getInitialData:function(t,e){var a,s,h=e.getComponent("xAxis",this.get("xAxisIndex")),l=e.getComponent("yAxis",this.get("yAxisIndex")),u=h.get("type"),c=l.get("type");"category"===u?(t.layout="horizontal",a=h.getOrdinalMeta(),s=!0):"category"===c?(t.layout="vertical",a=l.getOrdinalMeta(),s=!0):t.layout=t.layout||"horizontal";var f=["x","y"],d="horizontal"===t.layout?0:1,C=this._baseAxisDim=f[d],p=f[1-d],m=[h,l],D=m[d].get("type"),v=m[1-d].get("type"),g=t.data;if(g&&s){var S=[];r.each(g,function(t,e){var a;t.value&&r.isArray(t.value)?(a=t.value.slice(),t.value.unshift(e)):r.isArray(t)?(a=t.slice(),t.unshift(e)):a=t,S.push(a)}),t.data=S}var T=this.defaultValueDimensions,I=[{name:C,type:n(D),ordinalMeta:a,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:p,type:n(v),dimsDef:T.slice()}];return i(this,{coordDimensions:I,dimensionsCount:T.length+1,encodeDefaulter:r.curry(o,I,this)})},getBaseAxis:function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis}};e.seriesModelMixin=s},"5GtS":function(t,e,a){var i=a("sdST"),r=a("YXkt"),n=a("bYtY"),o=n.extend,s=n.isArray;t.exports=function(t,e,a){e=s(e)&&{coordDimensions:e}||o({},e);var n=t.getSource(),h=i(n,e),l=new r(h,t);return l.initData(n,a),l}},"5Hur":function(t,e,a){var i=a("4NO4"),r=i.makeInner,n=i.normalizeToArray,o=r();var s={clearColorPalette:function(){o(this).colorIdx=0,o(this).colorNameMap={}},getColorFromPalette:function(t,e,a){var i=o(e=e||this),r=i.colorIdx||0,s=i.colorNameMap=i.colorNameMap||{};if(s.hasOwnProperty(t))return s[t];var h=n(this.get("color",!0)),l=this.get("colorLayer",!0),u=null!=a&&l?function(t,e){for(var a=t.length,i=0;i<a;i++)if(t[i].length>e)return t[i];return t[a-1]}(l,a):h;if((u=u||h)&&u.length){var c=u[r];return t&&(s[t]=c),i.colorIdx=(r+1)%u.length,c}}};t.exports=s},"5Qd4":function(t,e,a){var i=a("USwo");i(i.S+i.F,"Object",{assign:a("By1P")})},"5aK+":function(t,e,a){t.exports=a("/NTb").f("species")},"5oMp":function(t,e,a){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},"5w6Y":function(t,e,a){var i=a("CYMq"),r=a("mHY4");a("czaS")("keys",function(){return function(t){return r(i(t))}})},"62sa":function(t,e,a){var i=a("bYtY"),r=a("4NO4").makeInner,n=a("zTMp"),o=a("Ez2D"),s=i.each,h=i.curry,l=r();function u(t,e,a,r,n){var o=t.axis;if(!o.scale.isBlank()&&o.containData(e))if(t.involveSeries){var h=function(t,e){var a=e.axis,i=a.dim,r=t,n=[],o=Number.MAX_VALUE,h=-1;return s(e.seriesModels,function(e,l){var u,c,f=e.getData().mapDimension(i,!0);if(e.getAxisTooltipData){var d=e.getAxisTooltipData(f,t,a);c=d.dataIndices,u=d.nestestValue}else{if(!(c=e.getData().indicesOfNearest(f[0],t,"category"===a.type?.5:null)).length)return;u=e.getData().get(f[0],c[0])}if(null!=u&&isFinite(u)){var C=t-u,p=Math.abs(C);p<=o&&((p<o||C>=0&&h<0)&&(o=p,h=C,r=u,n.length=0),s(c,function(t){n.push({seriesIndex:e.seriesIndex,dataIndexInside:t,dataIndex:e.getData().getRawIndex(t)})}))}}),{payloadBatch:n,snapToValue:r}}(e,t),l=h.payloadBatch,u=h.snapToValue;l[0]&&null==n.seriesIndex&&i.extend(n,l[0]),!r&&t.snap&&o.containData(u)&&null!=u&&(e=u),a.showPointer(t,e,l,n),a.showTooltip(t,h,u)}else a.showPointer(t,e)}function c(t,e,a,i){t[e.key]={value:a,payloadBatch:i}}function f(t,e,a,i){var r=a.payloadBatch,o=e.axis,s=o.model,h=e.axisPointerModel;if(e.triggerTooltip&&r.length){var l=e.coordSys.model,u=n.makeKey(l),c=t.map[u];c||(c=t.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:i,valueLabelOpt:{precision:h.get("label.precision"),formatter:h.get("label.formatter")},seriesDataIndices:r.slice()})}}function d(t){var e=t.axis.model,a={},i=a.axisDim=t.axis.dim;return a.axisIndex=a[i+"AxisIndex"]=e.componentIndex,a.axisName=a[i+"AxisName"]=e.name,a.axisId=a[i+"AxisId"]=e.id,a}function C(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}t.exports=function(t,e,a){var r=t.currTrigger,n=[t.x,t.y],p=t,m=t.dispatchAction||i.bind(a.dispatchAction,a),D=e.getComponent("axisPointer").coordSysAxesInfo;if(D){C(n)&&(n=o({seriesIndex:p.seriesIndex,dataIndex:p.dataIndex},e).point);var v=C(n),g=p.axesInfo,S=D.axesInfo,T="leave"===r||C(n),I={},y={},x={list:[],map:{}},w={showPointer:h(c,y),showTooltip:h(f,x)};s(D.coordSysMap,function(t,e){var a=v||t.containPoint(n);s(D.coordSysAxesInfo[e],function(t,e){var i=t.axis,r=function(t,e){for(var a=0;a<(t||[]).length;a++){var i=t[a];if(e.axis.dim===i.axisDim&&e.axis.model.componentIndex===i.axisIndex)return i}}(g,t);if(!T&&a&&(!g||r)){var o=r&&r.value;null!=o||v||(o=i.pointToData(n)),null!=o&&u(t,o,w,!1,I)}})});var F={};return s(S,function(t,e){var a=t.linkGroup;a&&!y[e]&&s(a.axesInfo,function(e,i){var r=y[i];if(e!==t&&r){var n=r.value;a.mapper&&(n=t.axis.scale.parse(a.mapper(n,d(e),d(t)))),F[t.key]=n}})}),s(F,function(t,e){u(S[e],t,w,!0,I)}),function(t,e,a){var i=a.axesInfo=[];s(e,function(e,a){var r=e.axisPointerModel.option,n=t[a];n?(!e.useHandle&&(r.status="show"),r.value=n.value,r.seriesDataIndices=(n.payloadBatch||[]).slice()):!e.useHandle&&(r.status="hide"),"show"===r.status&&i.push({axisDim:e.axis.dim,axisIndex:e.axis.model.componentIndex,value:r.value})})}(y,S,I),function(t,e,a,i){if(!C(e)&&t.list.length){var r=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:a.tooltipOption,position:a.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:t.list})}else i({type:"hideTip"})}(x,n,t,m),function(t,e,a){var r=a.getZr(),n=l(r).axisPointerLastHighlights||{},o=l(r).axisPointerLastHighlights={};s(t,function(t,e){var a=t.axisPointerModel.option;"show"===a.status&&s(a.seriesDataIndices,function(t){var e=t.seriesIndex+" | "+t.dataIndex;o[e]=t})});var h=[],u=[];i.each(n,function(t,e){!o[e]&&u.push(t)}),i.each(o,function(t,e){!n[e]&&h.push(t)}),u.length&&a.dispatchAction({type:"downplay",escapeConnect:!0,batch:u}),h.length&&a.dispatchAction({type:"highlight",escapeConnect:!0,batch:h})}(S,0,a),I}}},"6GrX":function(t,e,a){var i=a("mFDi"),r=a("Xnb7"),n=a("bYtY"),o=n.getContext,s=n.extend,h=n.retrieve2,l=n.retrieve3,u=n.trim,c={},f=0,d=5e3,C=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,p="12px sans-serif",m={};function D(t,e){var a=t+":"+(e=e||p);if(c[a])return c[a];for(var i=(t+"").split("\n"),r=0,n=0,o=i.length;n<o;n++)r=Math.max(F(i[n],e).width,r);return f>d&&(f=0,c={}),f++,c[a]=r,r}function v(t,e,a){return"right"===a?t-=e:"center"===a&&(t-=e/2),t}function g(t,e,a){return"middle"===a?t-=e/2:"bottom"===a&&(t-=e),t}function S(t,e,a){var i=e.textPosition,r=e.textDistance,n=a.x,o=a.y;r=r||0;var s=a.height,h=a.width,l=s/2,u="left",c="top";switch(i){case"left":n-=r,o+=l,u="right",c="middle";break;case"right":n+=r+h,o+=l,c="middle";break;case"top":n+=h/2,o-=r,u="center",c="bottom";break;case"bottom":n+=h/2,o+=s+r,u="center";break;case"inside":n+=h/2,o+=l,u="center",c="middle";break;case"insideLeft":n+=r,o+=l,c="middle";break;case"insideRight":n+=h-r,o+=l,u="right",c="middle";break;case"insideTop":n+=h/2,o+=r,u="center";break;case"insideBottom":n+=h/2,o+=s-r,u="center",c="bottom";break;case"insideTopLeft":n+=r,o+=r;break;case"insideTopRight":n+=h-r,o+=r,u="right";break;case"insideBottomLeft":n+=r,o+=s-r,c="bottom";break;case"insideBottomRight":n+=h-r,o+=s-r,u="right",c="bottom"}return(t=t||{}).x=n,t.y=o,t.textAlign=u,t.textVerticalAlign=c,t}function T(t,e,a,i,r){if(!e)return"";var n=(t+"").split("\n");r=I(e,a,i,r);for(var o=0,s=n.length;o<s;o++)n[o]=y(n[o],r);return n.join("\n")}function I(t,e,a,i){(i=s({},i)).font=e;a=h(a,"...");i.maxIterations=h(i.maxIterations,2);var r=i.minChar=h(i.minChar,0);i.cnCharWidth=D("国",e);var n=i.ascCharWidth=D("a",e);i.placeholder=h(i.placeholder,"");for(var o=t=Math.max(0,t-1),l=0;l<r&&o>=n;l++)o-=n;var u=D(a,e);return u>o&&(a="",u=0),o=t-u,i.ellipsis=a,i.ellipsisWidth=u,i.contentWidth=o,i.containerWidth=t,i}function y(t,e){var a=e.containerWidth,i=e.font,r=e.contentWidth;if(!a)return"";var n=D(t,i);if(n<=a)return t;for(var o=0;;o++){if(n<=r||o>=e.maxIterations){t+=e.ellipsis;break}var s=0===o?x(t,r,e.ascCharWidth,e.cnCharWidth):n>0?Math.floor(t.length*r/n):0;n=D(t=t.substr(0,s),i)}return""===t&&(t=e.placeholder),t}function x(t,e,a,i){for(var r=0,n=0,o=t.length;n<o&&r<e;n++){var s=t.charCodeAt(n);r+=0<=s&&s<=127?a:i}return n}function w(t){return D("国",t)}function F(t,e){return m.measureText(t,e)}function E(t,e,a,i,r){null!=t&&(t+="");var n=h(i,w(e)),o=t?t.split("\n"):[],s=o.length*n,l=s,u=!0;if(a&&(l+=a[0]+a[2]),t&&r){u=!1;var c=r.outerHeight,f=r.outerWidth;if(null!=c&&l>c)t="",o=[];else if(null!=f)for(var d=I(f-(a?a[1]+a[3]:0),e,r.ellipsis,{minChar:r.minChar,placeholder:r.placeholder}),C=0,p=o.length;C<p;C++)o[C]=y(o[C],d)}return{lines:o,height:s,outerHeight:l,lineHeight:n,canCacheByTextString:u}}function b(t,e){var a={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return a;for(var i,n=C.lastIndex=0;null!=(i=C.exec(t));){var o=i.index;o>n&&L(a,t.substring(n,o)),L(a,i[2],i[1]),n=C.lastIndex}n<t.length&&L(a,t.substring(n,t.length));var s=a.lines,u=0,c=0,f=[],d=e.textPadding,p=e.truncate,m=p&&p.outerWidth,v=p&&p.outerHeight;d&&(null!=m&&(m-=d[1]+d[3]),null!=v&&(v-=d[0]+d[2]));for(var g=0;g<s.length;g++){for(var S=s[g],I=0,y=0,x=0;x<S.tokens.length;x++){var F=(B=S.tokens[x]).styleName&&e.rich[B.styleName]||{},E=B.textPadding=F.textPadding,b=B.font=F.font||e.font,M=B.textHeight=h(F.textHeight,w(b));if(E&&(M+=E[0]+E[2]),B.height=M,B.lineHeight=l(F.textLineHeight,e.textLineHeight,M),B.textAlign=F&&F.textAlign||e.textAlign,B.textVerticalAlign=F&&F.textVerticalAlign||"middle",null!=v&&u+B.lineHeight>v)return{lines:[],width:0,height:0};B.textWidth=D(B.text,b);var A=F.textWidth,O=null==A||"auto"===A;if("string"==typeof A&&"%"===A.charAt(A.length-1))B.percentWidth=A,f.push(B),A=0;else{if(O){A=B.textWidth;var N=F.textBackgroundColor,P=N&&N.image;P&&(P=r.findExistImage(P),r.isImageReady(P)&&(A=Math.max(A,P.width*M/P.height)))}var R=E?E[1]+E[3]:0;A+=R;var _=null!=m?m-y:null;null!=_&&_<A&&(!O||_<R?(B.text="",B.textWidth=A=0):(B.text=T(B.text,_-R,b,p.ellipsis,{minChar:p.minChar}),B.textWidth=D(B.text,b),A=B.textWidth+R))}y+=B.width=A,F&&(I=Math.max(I,B.lineHeight))}S.width=y,S.lineHeight=I,u+=I,c=Math.max(c,y)}a.outerWidth=a.width=h(e.textWidth,c),a.outerHeight=a.height=h(e.textHeight,u),d&&(a.outerWidth+=d[1]+d[3],a.outerHeight+=d[0]+d[2]);for(g=0;g<f.length;g++){var B,k=(B=f[g]).percentWidth;B.width=parseInt(k,10)/100*c}return a}function L(t,e,a){for(var i=""===e,r=e.split("\n"),n=t.lines,o=0;o<r.length;o++){var s=r[o],h={styleName:a,text:s,isLineHolder:!s&&!i};if(o)n.push({tokens:[h]});else{var l=(n[n.length-1]||(n[0]={tokens:[]})).tokens,u=l.length;1===u&&l[0].isLineHolder?l[0]=h:(s||!u||i)&&l.push(h)}}}m.measureText=function(t,e){var a=o();return a.font=e||p,a.measureText(t)},e.DEFAULT_FONT=p,e.$override=function(t,e){m[t]=e},e.getWidth=D,e.getBoundingRect=function(t,e,a,r,n,o,s,h){return s?function(t,e,a,r,n,o,s,h){var l=b(t,{rich:s,truncate:h,font:e,textAlign:a,textPadding:n,textLineHeight:o}),u=l.outerWidth,c=l.outerHeight,f=v(0,u,a),d=g(0,c,r);return new i(f,d,u,c)}(t,e,a,r,n,o,s,h):function(t,e,a,r,n,o,s){var h=E(t,e,n,o,s),l=D(t,e);n&&(l+=n[1]+n[3]);var u=h.outerHeight,c=v(0,l,a),f=g(0,u,r),d=new i(c,f,l,u);return d.lineHeight=h.lineHeight,d}(t,e,a,r,n,o,h)},e.adjustTextX=v,e.adjustTextY=g,e.calculateTextPosition=S,e.adjustTextPositionOnRect=function(t,e,a){return S({},{textPosition:t,textDistance:a},e)},e.truncateText=T,e.getLineHeight=w,e.measureText=F,e.parsePlainText=E,e.parseRichText=b,e.makeFont=function(t){var e=(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ");return e&&u(e)||t.textFont||t.font}},"6Ic6":function(t,e,a){var i=a("bYtY").each,r=a("4fz+"),n=a("iRjW"),o=a("Yl7c"),s=a("4NO4"),h=a("IwbS"),l=a("9H2F").createTask,u=a("zM3Q"),c=s.makeInner(),f=u();function d(){this.group=new r,this.uid=n.getUID("viewChart"),this.renderTask=l({plan:D,reset:v}),this.renderTask.context={view:this}}d.prototype={type:"chart",init:function(t,e){},render:function(t,e,a,i){},highlight:function(t,e,a,i){m(t.getData(),i,"emphasis")},downplay:function(t,e,a,i){m(t.getData(),i,"normal")},remove:function(t,e){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};var C=d.prototype;function p(t,e,a){if(t&&(t.trigger(e,a),t.isGroup&&!h.isHighDownDispatcher(t)))for(var i=0,r=t.childCount();i<r;i++)p(t.childAt(i),e,a)}function m(t,e,a){var r=s.queryDataIndex(t,e),n=e&&null!=e.highlightKey?h.getHighlightDigit(e.highlightKey):null;null!=r?i(s.normalizeToArray(r),function(e){p(t.getItemGraphicEl(e),a,n)}):t.eachItemGraphicEl(function(t){p(t,a,n)})}function D(t){return f(t.model)}function v(t){var e=t.model,a=t.ecModel,i=t.api,r=t.payload,n=e.pipelineContext.progressiveRender,o=t.view,s=r&&c(r).updateMethod,h=n?"incrementalPrepareRender":s&&o[s]?s:"render";return"render"!==h&&o[h](e,a,i,r),g[h]}C.updateView=C.updateLayout=C.updateVisual=function(t,e,a,i){this.render(t,e,a,i)},o.enableClassExtend(d,["dispose"]),o.enableClassManagement(d,{registerWhenExtend:!0}),d.markUpdateMethod=function(t,e){c(t).updateMethod=e};var g={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},S=d;t.exports=S},"6bNy":function(t,e,a){(function(e){var a;a="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=a}).call(this,a("yLpj"))},"6dzq":function(t,e,a){var i=a("USwo");i(i.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},"6jRP":function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},"6r85":function(t,e,a){var i=a("bYtY");t.exports=function(t){t&&i.isArray(t.series)&&i.each(t.series,function(t){i.isObject(t)&&"k"===t.type&&(t.type="candlestick")})}},"75ce":function(t,e,a){var i=a("ProS");a("IXuL"),a("8X+K");var r=a("f5Yq"),n=a("h8O9"),o=a("/d5a");a("Ae16"),i.registerVisual(r("line","circle","line")),i.registerLayout(n("line")),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,o("line"))},"7AJT":function(t,e,a){var i=a("bYtY"),r=a("hM6l"),n=function(t,e,a,i,n){r.call(this,t,e,a),this.type=i||"value",this.position=n||"bottom"};n.prototype={constructor:n,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},getGlobalExtent:function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},toLocalCoord:null,toGlobalCoord:null},i.inherits(n,r);var o=n;t.exports=o},"7DRL":function(t,e,a){a("Tghj").__DEV__;var i=a("bYtY"),r=i.createHashMap,n=i.isString,o=i.isArray,s=i.each,h=(i.assert,a("MEGo").parseXML),l=r(),u={registerMap:function(t,e,a){var i;return o(e)?i=e:e.svg?i=[{type:"svg",source:e.svg,specialAreas:e.specialAreas}]:(e.geoJson&&!e.features&&(a=e.specialAreas,e=e.geoJson),i=[{type:"geoJSON",source:e,specialAreas:a}]),s(i,function(t){var e=t.type;"geoJson"===e&&(e=t.type="geoJSON"),(0,c[e])(t)}),l.set(t,i)},retrieveMap:function(t){return l.get(t)}},c={geoJSON:function(t){var e=t.source;t.geoJSON=n(e)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")():e},svg:function(t){t.svgXML=h(t.source)}};t.exports=u},"7G+c":function(t,e,a){var i=a("bYtY"),r=i.createHashMap,n=i.isTypedArray,o=a("Yl7c").enableClassCheck,s=a("k9D9"),h=s.SOURCE_FORMAT_ORIGINAL,l=s.SERIES_LAYOUT_BY_COLUMN,u=s.SOURCE_FORMAT_UNKNOWN,c=s.SOURCE_FORMAT_TYPED_ARRAY,f=s.SOURCE_FORMAT_KEYED_COLUMNS;function d(t){this.fromDataset=t.fromDataset,this.data=t.data||(t.sourceFormat===f?{}:[]),this.sourceFormat=t.sourceFormat||u,this.seriesLayoutBy=t.seriesLayoutBy||l,this.dimensionsDefine=t.dimensionsDefine,this.encodeDefine=t.encodeDefine&&r(t.encodeDefine),this.startIndex=t.startIndex||0,this.dimensionsDetectCount=t.dimensionsDetectCount}d.seriesDataToSource=function(t){return new d({data:t,sourceFormat:n(t)?c:h,fromDataset:!1})},o(d);var C=d;t.exports=C},"7SHv":function(t,e,a){var i=a("LPTA").devicePixelRatio,r=a("bYtY"),n=a("SUKs"),o=a("mFDi"),s=a("BPZU"),h=a("Xmg4"),l=a("mLcG"),u=a("Dagg"),c=a("ItGF");function f(t){return parseInt(t,10)}var d=new o(0,0,0,0),C=new o(0,0,0,0);var p=function(t,e,a){this.type="canvas";var n=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=a=r.extend({},a||{}),this.dpr=a.devicePixelRatio||i,this._singleCanvas=n,this.root=t;var o=t.style;o&&(o["-webkit-tap-highlight-color"]="transparent",o["-webkit-user-select"]=o["user-select"]=o["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var s=this._zlevelList=[],l=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,n){var u=t.width,c=t.height;null!=a.width&&(u=a.width),null!=a.height&&(c=a.height),this.dpr=a.devicePixelRatio||1,t.width=u*this.dpr,t.height=c*this.dpr,this._width=u,this._height=c;var f=new h(t,this,this.dpr);f.__builtin__=!0,f.initContext(),l[314159]=f,f.zlevel=314159,s.push(314159),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var d=this._domRoot=function(t,e){var a=document.createElement("div");return a.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",a}(this._width,this._height);t.appendChild(d)}this._hoverlayer=null,this._hoverElements=[]};p.prototype={constructor:p,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){var e=this.storage.getDisplayList(!0),a=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,t,this._redrawId);for(var i=0;i<a.length;i++){var r=a[i],n=this._layers[r];if(!n.__builtin__&&n.refresh){var o=0===i?this._backgroundColor:null;n.refresh(o)}}return this.refreshHover(),this},addHover:function(t,e){if(!t.__hoverMir){var a=new t.constructor({style:t.style,shape:t.shape,z:t.z,z2:t.z2,silent:t.silent});return a.__from=t,t.__hoverMir=a,e&&a.setStyle(e),this._hoverElements.push(a),a}},removeHover:function(t){var e=t.__hoverMir,a=this._hoverElements,i=r.indexOf(a,e);i>=0&&a.splice(i,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,a=0;a<e.length;a++){var i=e[a].__from;i&&(i.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,a=this._hoverlayer;if(a&&a.clear(),e){s(t,this.storage.displayableSortFunc),a||(a=this._hoverlayer=this.getLayer(1e5));var i={};a.ctx.save();for(var r=0;r<e;){var n=t[r],o=n.__from;o&&o.__zr?(r++,o.invisible||(n.transform=o.transform,n.invTransform=o.invTransform,n.__clipPaths=o.__clipPaths,this._doPaintEl(n,a,!0,i))):(t.splice(r,1),o.__hoverMir=null,e--)}a.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(t,e,a){if(this._redrawId===a){e=e||!1,this._updateLayerStatus(t);var i=this._doPaintList(t,e);if(this._needsManuallyCompositing&&this._compositeManually(),!i){var r=this;l(function(){r._paintList(t,e,a)})}}},_compositeManually:function(){var t=this.getLayer(314159).ctx,e=this._domRoot.width,a=this._domRoot.height;t.clearRect(0,0,e,a),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,e,a)})},_doPaintList:function(t,e){for(var a=[],i=0;i<this._zlevelList.length;i++){var n=this._zlevelList[i];(h=this._layers[n]).__builtin__&&h!==this._hoverlayer&&(h.__dirty||e)&&a.push(h)}for(var o=!0,s=0;s<a.length;s++){var h,l=(h=a[s]).ctx,u={};l.save();var f=e?h.__startIndex:h.__drawIndex,d=!e&&h.incremental&&Date.now,C=d&&Date.now(),p=h.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(h.__startIndex===h.__endIndex)h.clear(!1,p);else if(f===h.__startIndex){var m=t[f];m.incremental&&m.notClear&&!e||h.clear(!1,p)}-1===f&&(console.error("For some unknown reason. drawIndex is -1"),f=h.__startIndex);for(var D=f;D<h.__endIndex;D++){var v=t[D];if(this._doPaintEl(v,h,e,u),v.__dirty=v.__dirtyText=!1,d)if(Date.now()-C>15)break}h.__drawIndex=D,h.__drawIndex<h.__endIndex&&(o=!1),u.prevElClipPaths&&l.restore(),l.restore()}return c.wxa&&r.each(this._layers,function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()}),o},_doPaintEl:function(t,e,a,i){var r=e.ctx,n=t.transform;if((e.__dirty||a)&&!t.invisible&&0!==t.style.opacity&&(!n||n[0]||n[3])&&(!t.culling||!function(t,e,a){return d.copy(t.getBoundingRect()),t.transform&&d.applyTransform(t.transform),C.width=e,C.height=a,!d.intersect(C)}(t,this._width,this._height))){var o=t.__clipPaths,s=i.prevElClipPaths;s&&!function(t,e){if(t===e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var a=0;a<t.length;a++)if(t[a]!==e[a])return!0;return!1}(o,s)||(s&&(r.restore(),i.prevElClipPaths=null,i.prevEl=null),o&&(r.save(),function(t,e){for(var a=0;a<t.length;a++){var i=t[a];i.setTransform(e),e.beginPath(),i.buildPath(e,i.shape),e.clip(),i.restoreTransform(e)}}(o,r),i.prevElClipPaths=o)),t.beforeBrush&&t.beforeBrush(r),t.brush(r,i.prevEl||null),i.prevEl=t,t.afterBrush&&t.afterBrush(r)}},getLayer:function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=314159);var a=this._layers[t];return a||((a=new h("zr_"+t,this,this.dpr)).zlevel=t,a.__builtin__=!0,this._layerConfig[t]?r.merge(a,this._layerConfig[t],!0):this._layerConfig[t-.01]&&r.merge(a,this._layerConfig[t-.01],!0),e&&(a.virtual=e),this.insertLayer(t,a),a.initContext()),a},insertLayer:function(t,e){var a=this._layers,i=this._zlevelList,r=i.length,o=null,s=-1,h=this._domRoot;if(a[t])n("ZLevel "+t+" has been used already");else if(function(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}(e)){if(r>0&&t>i[0]){for(s=0;s<r-1&&!(i[s]<t&&i[s+1]>t);s++);o=a[i[s]]}if(i.splice(s+1,0,t),a[t]=e,!e.virtual)if(o){var l=o.dom;l.nextSibling?h.insertBefore(e.dom,l.nextSibling):h.appendChild(e.dom)}else h.firstChild?h.insertBefore(e.dom,h.firstChild):h.appendChild(e.dom)}else n("Layer of zlevel "+t+" is not valid")},eachLayer:function(t,e){var a,i,r=this._zlevelList;for(i=0;i<r.length;i++)a=r[i],t.call(e,this._layers[a],a)},eachBuiltinLayer:function(t,e){var a,i,r,n=this._zlevelList;for(r=0;r<n.length;r++)i=n[r],(a=this._layers[i]).__builtin__&&t.call(e,a,i)},eachOtherLayer:function(t,e){var a,i,r,n=this._zlevelList;for(r=0;r<n.length;r++)i=n[r],(a=this._layers[i]).__builtin__||t.call(e,a,i)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){function e(t){r&&(r.__endIndex!==t&&(r.__dirty=!0),r.__endIndex=t)}if(this.eachBuiltinLayer(function(t,e){t.__dirty=t.__used=!1}),this._singleCanvas)for(var a=1;a<t.length;a++){if((s=t[a]).zlevel!==t[a-1].zlevel||s.incremental){this._needsManuallyCompositing=!0;break}}var i,r=null,o=0;for(a=0;a<t.length;a++){var s,h,l=(s=t[a]).zlevel;i!==l&&(i=l,o=0),s.incremental?((h=this.getLayer(l+.001,this._needsManuallyCompositing)).incremental=!0,o=1):h=this.getLayer(l+(o>0?.01:0),this._needsManuallyCompositing),h.__builtin__||n("ZLevel "+l+" has been used by unkown layer "+h.id),h!==r&&(h.__used=!0,h.__startIndex!==a&&(h.__dirty=!0),h.__startIndex=a,h.incremental?h.__drawIndex=-1:h.__drawIndex=a,e(a),r=h),s.__dirty&&(h.__dirty=!0,h.incremental&&h.__drawIndex<0&&(h.__drawIndex=a))}e(a),this.eachBuiltinLayer(function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},setBackgroundColor:function(t){this._backgroundColor=t},configLayer:function(t,e){if(e){var a=this._layerConfig;a[t]?r.merge(a[t],e,!0):a[t]=e;for(var i=0;i<this._zlevelList.length;i++){var n=this._zlevelList[i];if(n===t||n===t+.01){var o=this._layers[n];r.merge(o,a[t],!0)}}}},delLayer:function(t){var e=this._layers,a=this._zlevelList,i=e[t];i&&(i.dom.parentNode.removeChild(i.dom),delete e[t],a.splice(r.indexOf(a,t),1))},resize:function(t,e){if(this._domRoot.style){var a=this._domRoot;a.style.display="none";var i=this._opts;if(null!=t&&(i.width=t),null!=e&&(i.height=e),t=this._getSize(0),e=this._getSize(1),a.style.display="",this._width!==t||e!==this._height){for(var n in a.style.width=t+"px",a.style.height=e+"px",this._layers)this._layers.hasOwnProperty(n)&&this._layers[n].resize(t,e);r.each(this._progressiveLayers,function(a){a.resize(t,e)}),this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(314159).resize(t,e)}return this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var e=new h("image",this,t.pixelRatio||this.dpr);if(e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor),t.pixelRatio<=this.dpr){this.refresh();var a=e.dom.width,i=e.dom.height,r=e.ctx;this.eachLayer(function(t){t.__builtin__?r.drawImage(t.dom,0,0,a,i):t.renderToCanvas&&(e.ctx.save(),t.renderToCanvas(e.ctx),e.ctx.restore())})}else for(var n={},o=this.storage.getDisplayList(!0),s=0;s<o.length;s++){var l=o[s];this._doPaintEl(l,e,!0,n)}return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,a=["width","height"][t],i=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],n=["paddingRight","paddingBottom"][t];if(null!=e[a]&&"auto"!==e[a])return parseFloat(e[a]);var o=this.root,s=document.defaultView.getComputedStyle(o);return(o[i]||f(s[a])||f(o.style[a]))-(f(s[r])||0)-(f(s[n])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var a=document.createElement("canvas"),i=a.getContext("2d"),r=t.getBoundingRect(),n=t.style,o=n.shadowBlur*e,s=n.shadowOffsetX*e,h=n.shadowOffsetY*e,l=n.hasStroke()?n.lineWidth:0,c=Math.max(l/2,-s+o),f=Math.max(l/2,s+o),d=Math.max(l/2,-h+o),C=Math.max(l/2,h+o),p=r.width+c+f,m=r.height+d+C;a.width=p*e,a.height=m*e,i.scale(e,e),i.clearRect(0,0,p,m),i.dpr=e;var D={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[c-r.x,d-r.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(i);var v=new u({style:{x:0,y:0,image:a}});return null!=D.position&&(v.position=t.position=D.position),null!=D.rotation&&(v.rotation=t.rotation=D.rotation),null!=D.scale&&(v.scale=t.scale=D.scale),v}};var m=p;t.exports=m},"7aKB":function(t,e,a){var i=a("bYtY"),r=a("6GrX"),n=a("OELB");var o=i.normalizeCssArray,s=/([&<>"'])/g,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function l(t){return null==t?"":(t+"").replace(s,function(t,e){return h[e]})}var u=["a","b","c","d","e","f","g"],c=function(t,e){return"{"+t+(null==e?"":e)+"}"};function f(t,e){return"0000".substr(0,e-(t+="").length)+t}var d=r.truncateText;e.addCommas=function(t){return isNaN(t)?"-":(t=(t+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")},e.toCamelCase=function(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t},e.normalizeCssArray=o,e.encodeHTML=l,e.formatTpl=function(t,e,a){i.isArray(e)||(e=[e]);var r=e.length;if(!r)return"";for(var n=e[0].$vars||[],o=0;o<n.length;o++){var s=u[o];t=t.replace(c(s),c(s,0))}for(var h=0;h<r;h++)for(var f=0;f<n.length;f++){var d=e[h][n[f]];t=t.replace(c(u[f],h),a?l(d):d)}return t},e.formatTplSimple=function(t,e,a){return i.each(e,function(e,i){t=t.replace("{"+i+"}",a?l(e):e)}),t},e.getTooltipMarker=function(t,e){var a=(t=i.isString(t)?{color:t,extraCssText:e}:t||{}).color,r=t.type,n=(e=t.extraCssText,t.renderMode||"html"),o=t.markerId||"X";return a?"html"===n?"subItem"===r?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+l(a)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+l(a)+";"+(e||"")+'"></span>':{renderMode:n,content:"{marker"+o+"|}  ",style:{color:a}}:""},e.formatTime=function(t,e,a){"week"!==t&&"month"!==t&&"quarter"!==t&&"half-year"!==t&&"year"!==t||(t="MM-dd\nyyyy");var i=n.parseDate(e),r=a?"UTC":"",o=i["get"+r+"FullYear"](),s=i["get"+r+"Month"]()+1,h=i["get"+r+"Date"](),l=i["get"+r+"Hours"](),u=i["get"+r+"Minutes"](),c=i["get"+r+"Seconds"](),d=i["get"+r+"Milliseconds"]();return t=t.replace("MM",f(s,2)).replace("M",s).replace("yyyy",o).replace("yy",o%100).replace("dd",f(h,2)).replace("d",h).replace("hh",f(l,2)).replace("h",l).replace("mm",f(u,2)).replace("m",u).replace("ss",f(c,2)).replace("s",c).replace("SSS",f(d,3))},e.capitalFirst=function(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t},e.truncateText=d,e.getTextBoundingRect=function(t){return r.getBoundingRect(t.text,t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich,t.truncate)},e.getTextRect=function(t,e,a,i,n,o,s,h){return r.getBoundingRect(t,e,a,i,n,h,o,s)},e.windowOpen=function(t,e){if("_blank"===e||"blank"===e){var a=window.open();a.opener=null,a.location=t}else window.open(t,e)}},"7hqr":function(t,e,a){var i=a("bYtY"),r=i.each,n=i.isString;function o(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}e.enableDataStack=function(t,e,a){var i,o,s,h,l=(a=a||{}).byIndex,u=a.stackedCoordDimension,c=!(!t||!t.get("stack"));if(r(e,function(t,a){n(t)&&(e[a]=t={name:t}),c&&!t.isExtraCoord&&(l||i||!t.ordinalMeta||(i=t),o||"ordinal"===t.type||"time"===t.type||u&&u!==t.coordDim||(o=t))}),!o||l||i||(l=!0),o){s="__\0ecstackresult",h="__\0ecstackedover",i&&(i.createInvertedIndices=!0);var f=o.coordDim,d=o.type,C=0;r(e,function(t){t.coordDim===f&&C++}),e.push({name:s,coordDim:f,coordDimIndex:C,type:d,isExtraCoord:!0,isCalculationCoord:!0}),C++,e.push({name:h,coordDim:h,coordDimIndex:C,type:d,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:o&&o.name,stackedByDimension:i&&i.name,isStackedByIndex:l,stackedOverDimension:h,stackResultDimension:s}},e.isDimensionStacked=o,e.getStackedDimension=function(t,e){return o(t,e)?t.getCalculationInfo("stackResultDimension"):e}},"7oTu":function(t,e,a){var i=a("IMiH"),r=a("QBsz").applyTransform,n=i.CMD,o=[[],[],[]],s=Math.sqrt,h=Math.atan2;t.exports=function(t,e){var a,i,l,u,c,f=t.data,d=n.M,C=n.C,p=n.L,m=n.R,D=n.A,v=n.Q;for(l=0,u=0;l<f.length;){switch(a=f[l++],u=l,i=0,a){case d:case p:i=1;break;case C:i=3;break;case v:i=2;break;case D:var g=e[4],S=e[5],T=s(e[0]*e[0]+e[1]*e[1]),I=s(e[2]*e[2]+e[3]*e[3]),y=h(-e[1]/I,e[0]/T);f[l]*=T,f[l++]+=g,f[l]*=I,f[l++]+=S,f[l++]*=T,f[l++]*=I,f[l++]+=y,f[l++]+=y,u=l+=2;break;case m:x[0]=f[l++],x[1]=f[l++],r(x,x,e),f[u++]=x[0],f[u++]=x[1],x[0]+=f[l++],x[1]+=f[l++],r(x,x,e),f[u++]=x[0],f[u++]=x[1]}for(c=0;c<i;c++){var x;(x=o[c])[0]=f[l++],x[1]=f[l++],r(x,x,e),f[u++]=x[0],f[u++]=x[1]}}}},"7sdD":function(t,e,a){"use strict";var i=a("6bNy"),r=a("g2LC"),n=a("ZESv"),o=a("U6jy");function s(t,e,a){var i=t;return r(e)?(a=e,"string"==typeof t&&(i={uri:t})):i=o(e,{uri:t}),i.callback=a,i}function h(t,e,a){return l(e=s(t,e,a))}function l(t){if(void 0===t.callback)throw new Error("callback argument missing");var e=!1,a=function(a,i,r){e||(e=!0,t.callback(a,i,r))};function i(t){return clearTimeout(u),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,a(t,D)}function r(){if(!s){var e;clearTimeout(u),e=t.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var i=D,r=null;return 0!==e?(i={body:function(){var t=void 0;if(t=l.response?l.response:l.responseText||function(t){if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;return""!==t.responseType||e?null:t.responseXML}(l),m)try{t=JSON.parse(t)}catch(t){}return t}(),statusCode:e,method:f,headers:{},url:c,rawRequest:l},l.getAllResponseHeaders&&(i.headers=n(l.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),a(r,i,i.body)}}var o,s,l=t.xhr||null;l||(l=t.cors||t.useXDR?new h.XDomainRequest:new h.XMLHttpRequest);var u,c=l.url=t.uri||t.url,f=l.method=t.method||"GET",d=t.body||t.data,C=l.headers=t.headers||{},p=!!t.sync,m=!1,D={body:void 0,headers:{},statusCode:0,method:f,url:c,rawRequest:l};if("json"in t&&!1!==t.json&&(m=!0,C.accept||C.Accept||(C.Accept="application/json"),"GET"!==f&&"HEAD"!==f&&(C["content-type"]||C["Content-Type"]||(C["Content-Type"]="application/json"),d=JSON.stringify(!0===t.json?d:t.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(r,0)},l.onload=r,l.onerror=i,l.onprogress=function(){},l.onabort=function(){s=!0},l.ontimeout=i,l.open(f,c,!p,t.username,t.password),p||(l.withCredentials=!!t.withCredentials),!p&&t.timeout>0&&(u=setTimeout(function(){if(!s){s=!0,l.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",i(t)}},t.timeout)),l.setRequestHeader)for(o in C)C.hasOwnProperty(o)&&l.setRequestHeader(o,C[o]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(l.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(l),l.send(d||null),l}t.exports=h,h.XMLHttpRequest=i.XMLHttpRequest||function(){},h.XDomainRequest="withCredentials"in new h.XMLHttpRequest?h.XMLHttpRequest:i.XDomainRequest,function(t,e){for(var a=0;a<t.length;a++)e(t[a])}(["get","put","post","patch","head","delete"],function(t){h["delete"===t?"del":t]=function(e,a,i){return(a=s(e,a,i)).method=t.toUpperCase(),l(a)}})},"7whZ":function(t,e){var a=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},"81Jv":function(t,e,a){t.exports={default:a("h2Jp"),__esModule:!0}},"8SMY":function(t,e,a){var i=a("n4Lv"),r=i.prepareDataCoordInfo,n=i.getStackedOnPoint;t.exports=function(t,e,a,i,o,s,h,l){for(var u=function(t,e){var a=[];return e.diff(t).add(function(t){a.push({cmd:"+",idx:t})}).update(function(t,e){a.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){a.push({cmd:"-",idx:t})}).execute(),a}(t,e),c=[],f=[],d=[],C=[],p=[],m=[],D=[],v=r(o,e,h),g=r(s,t,l),S=0;S<u.length;S++){var T=u[S],I=!0;switch(T.cmd){case"=":var y=t.getItemLayout(T.idx),x=e.getItemLayout(T.idx1);(isNaN(y[0])||isNaN(y[1]))&&(y=x.slice()),c.push(y),f.push(x),d.push(a[T.idx]),C.push(i[T.idx1]),D.push(e.getRawIndex(T.idx1));break;case"+":var w=T.idx;c.push(o.dataToPoint([e.get(v.dataDimsForPoint[0],w),e.get(v.dataDimsForPoint[1],w)])),f.push(e.getItemLayout(w).slice()),d.push(n(v,o,e,w)),C.push(i[w]),D.push(e.getRawIndex(w));break;case"-":w=T.idx;var F=t.getRawIndex(w);F!==w?(c.push(t.getItemLayout(w)),f.push(s.dataToPoint([t.get(g.dataDimsForPoint[0],w),t.get(g.dataDimsForPoint[1],w)])),d.push(a[w]),C.push(n(g,s,t,w)),D.push(F)):I=!1}I&&(p.push(T),m.push(m.length))}m.sort(function(t,e){return D[t]-D[e]});var E=[],b=[],L=[],M=[],A=[];for(S=0;S<m.length;S++)w=m[S],E[S]=c[w],b[S]=f[w],L[S]=d[w],M[S]=C[w],A[S]=p[w];return{current:E,next:b,stackedOnCurrent:L,stackedOnNext:M,status:A}}},"8X+K":function(t,e,a){a("Tghj").__DEV__;var i=a("bYtY"),r=a("4mN7").fromPoints,n=a("9wZj"),o=a("FBjb"),s=a("8SMY"),h=a("IwbS"),l=a("4NO4"),u=a("1NG9"),c=u.Polyline,f=u.Polygon,d=a("6Ic6"),C=a("n4Lv"),p=C.prepareDataCoordInfo,m=C.getStackedOnPoint,D=a("sK/D"),v=D.createGridClipPath,g=D.createPolarClipPath;function S(t,e){if(t.length===e.length){for(var a=0;a<t.length;a++){var i=t[a],r=e[a];if(i[0]!==r[0]||i[1]!==r[1])return}return!0}}function T(t,e){var a=[],i=[],n=[],o=[];return r(t,a,i),r(e,n,o),Math.max(Math.abs(a[0]-n[0]),Math.abs(a[1]-n[1]),Math.abs(i[0]-o[0]),Math.abs(i[1]-o[1]))}function I(t){return"number"==typeof t?t:t?.5:0}function y(t,e,a){for(var i=e.getBaseAxis(),r="x"===i.dim||"radius"===i.dim?0:1,n=[],o=0;o<t.length-1;o++){var s=t[o+1],h=t[o];n.push(h);var l=[];switch(a){case"end":l[r]=s[r],l[1-r]=h[1-r],n.push(l);break;case"middle":var u=(h[r]+s[r])/2,c=[];l[r]=c[r]=u,l[1-r]=h[1-r],c[1-r]=s[1-r],n.push(l),n.push(c);break;default:l[r]=h[r],l[1-r]=s[1-r],n.push(l)}}return t[o]&&n.push(t[o]),n}function x(t,e,a){var r=t.get("showAllSymbol"),n="auto"===r;if(!r||n){var s=a.getAxesByScale("ordinal")[0];if(s&&(!n||!function(t,e){var a=t.getExtent(),i=Math.abs(a[1]-a[0])/t.scale.count();isNaN(i)&&(i=0);for(var r=e.count(),n=Math.max(1,Math.round(r/5)),s=0;s<r;s+=n)if(1.5*o.getSymbolSize(e,s)[t.isHorizontal()?1:0]>i)return!1;return!0}(s,e))){var h=e.mapDimension(s.dim),l={};return i.each(s.getViewLabels(),function(t){l[t.tickValue]=1}),function(t){return!l.hasOwnProperty(e.get(h,t))}}}}function w(t,e,a){if("cartesian2d"===t.type){var i=t.getBaseAxis().isHorizontal(),r=v(t,e,a);if(!a.get("clip",!0)){var n=r.shape,o=Math.max(n.width,n.height);i?(n.y-=o,n.height+=2*o):(n.x-=o,n.width+=2*o)}return r}return g(t,e,a)}var F=d.extend({type:"line",init:function(){var t=new h.Group,e=new n;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},render:function(t,e,a){var r=t.coordinateSystem,n=this.group,o=t.getData(),s=t.getModel("lineStyle"),l=t.getModel("areaStyle"),u=o.mapArray(o.getItemLayout),c="polar"===r.type,f=this._coordSys,d=this._symbolDraw,C=this._polyline,D=this._polygon,v=this._lineGroup,g=t.get("animation"),T=!l.isEmpty(),F=l.get("origin"),E=function(t,e,a){if(!a.valueDim)return[];for(var i=[],r=0,n=e.count();r<n;r++)i.push(m(a,t,e,r));return i}(r,o,p(r,o,F)),b=t.get("showSymbol"),L=b&&!c&&x(t,o,r),M=this._data;M&&M.eachItemGraphicEl(function(t,e){t.__temp&&(n.remove(t),M.setItemGraphicEl(e,null))}),b||d.remove(),n.add(v);var A,O=!c&&t.get("step");r&&r.getArea&&t.get("clip",!0)&&(null!=(A=r.getArea()).width?(A.x-=.1,A.y-=.1,A.width+=.2,A.height+=.2):A.r0&&(A.r0-=.5,A.r1+=.5)),this._clipShapeForSymbol=A,C&&f.type===r.type&&O===this._step?(T&&!D?D=this._newPolygon(u,E,r,g):D&&!T&&(v.remove(D),D=this._polygon=null),v.setClipPath(w(r,!1,t)),b&&d.updateData(o,{isIgnore:L,clipShape:A}),o.eachItemGraphicEl(function(t){t.stopAnimation(!0)}),S(this._stackedOnPoints,E)&&S(this._points,u)||(g?this._updateAnimation(o,E,r,a,O,F):(O&&(u=y(u,r,O),E=y(E,r,O)),C.setShape({points:u}),D&&D.setShape({points:u,stackedOnPoints:E})))):(b&&d.updateData(o,{isIgnore:L,clipShape:A}),O&&(u=y(u,r,O),E=y(E,r,O)),C=this._newPolyline(u,r,g),T&&(D=this._newPolygon(u,E,r,g)),v.setClipPath(w(r,!0,t)));var N=function(t,e){var a=t.getVisual("visualMeta");if(a&&a.length&&t.count()&&"cartesian2d"===e.type){for(var r,n,o=a.length-1;o>=0;o--){var s=a[o].dimension,l=t.dimensions[s],u=t.getDimensionInfo(l);if("x"===(r=u&&u.coordDim)||"y"===r){n=a[o];break}}if(n){var c=e.getAxis(r),f=i.map(n.stops,function(t){return{coord:c.toGlobalCoord(c.dataToCoord(t.value)),color:t.color}}),d=f.length,C=n.outerColors.slice();d&&f[0].coord>f[d-1].coord&&(f.reverse(),C.reverse());var p=f[0].coord-10,m=f[d-1].coord+10,D=m-p;if(D<.001)return"transparent";i.each(f,function(t){t.offset=(t.coord-p)/D}),f.push({offset:d?f[d-1].offset:.5,color:C[1]||"transparent"}),f.unshift({offset:d?f[0].offset:.5,color:C[0]||"transparent"});var v=new h.LinearGradient(0,0,0,0,f,!0);return v[r]=p,v[r+"2"]=m,v}}}(o,r)||o.getVisual("color");C.useStyle(i.defaults(s.getLineStyle(),{fill:"none",stroke:N,lineJoin:"bevel"}));var P=t.get("smooth");if(P=I(t.get("smooth")),C.setShape({smooth:P,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")}),D){var R=o.getCalculationInfo("stackedOnSeries"),_=0;D.useStyle(i.defaults(l.getAreaStyle(),{fill:N,opacity:.7,lineJoin:"bevel"})),R&&(_=I(R.get("smooth"))),D.setShape({smooth:P,stackedOnSmooth:_,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")})}this._data=o,this._coordSys=r,this._stackedOnPoints=E,this._points=u,this._step=O,this._valueOrigin=F},dispose:function(){},highlight:function(t,e,a,i){var r=t.getData(),n=l.queryDataIndex(r,i);if(!(n instanceof Array)&&null!=n&&n>=0){var s=r.getItemGraphicEl(n);if(!s){var h=r.getItemLayout(n);if(!h)return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(h[0],h[1]))return;(s=new o(r,n)).position=h,s.setZ(t.get("zlevel"),t.get("z")),s.ignore=isNaN(h[0])||isNaN(h[1]),s.__temp=!0,r.setItemGraphicEl(n,s),s.stopSymbolAnimation(!0),this.group.add(s)}s.highlight()}else d.prototype.highlight.call(this,t,e,a,i)},downplay:function(t,e,a,i){var r=t.getData(),n=l.queryDataIndex(r,i);if(null!=n&&n>=0){var o=r.getItemGraphicEl(n);o&&(o.__temp?(r.setItemGraphicEl(n,null),this.group.remove(o)):o.downplay())}else d.prototype.downplay.call(this,t,e,a,i)},_newPolyline:function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new c({shape:{points:t},silent:!0,z2:10}),this._lineGroup.add(e),this._polyline=e,e},_newPolygon:function(t,e){var a=this._polygon;return a&&this._lineGroup.remove(a),a=new f({shape:{points:t,stackedOnPoints:e},silent:!0}),this._lineGroup.add(a),this._polygon=a,a},_updateAnimation:function(t,e,a,i,r,n){var o=this._polyline,l=this._polygon,u=t.hostModel,c=s(this._data,t,this._stackedOnPoints,e,this._coordSys,a,this._valueOrigin,n),f=c.current,d=c.stackedOnCurrent,C=c.next,p=c.stackedOnNext;if(r&&(f=y(c.current,a,r),d=y(c.stackedOnCurrent,a,r),C=y(c.next,a,r),p=y(c.stackedOnNext,a,r)),T(f,C)>3e3||l&&T(d,p)>3e3)return o.setShape({points:C}),void(l&&l.setShape({points:C,stackedOnPoints:p}));o.shape.__points=c.current,o.shape.points=f,h.updateProps(o,{shape:{points:C}},u),l&&(l.setShape({points:f,stackedOnPoints:d}),h.updateProps(l,{shape:{points:C,stackedOnPoints:p}},u));for(var m=[],D=c.status,v=0;v<D.length;v++){if("="===D[v].cmd){var g=t.getItemGraphicEl(D[v].idx1);g&&m.push({el:g,ptIdx:v})}}o.animators&&o.animators.length&&o.animators[0].during(function(){for(var t=0;t<m.length;t++){m[t].el.attr("position",o.shape.__points[m[t].ptIdx])}})},remove:function(t){var e=this.group,a=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),a&&a.eachItemGraphicEl(function(t,i){t.__temp&&(e.remove(t),a.setItemGraphicEl(i,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});t.exports=F},"8hn6":function(t,e){var a=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],i={color:a,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:"#eee"},crossStyle:{color:"#eee"},label:{color:"#000"}}},legend:{textStyle:{color:"#eee"}},textStyle:{color:"#eee"},title:{textStyle:{color:"#eee"}},toolbox:{iconStyle:{normal:{borderColor:"#eee"}}},dataZoom:{textStyle:{color:"#eee"}},visualMap:{textStyle:{color:"#eee"}},timeline:{lineStyle:{color:"#eee"},itemStyle:{normal:{color:a[1]}},label:{normal:{textStyle:{color:"#eee"}}},controlStyle:{normal:{color:"#eee",borderColor:"#eee"}}},timeAxis:{axisLine:{lineStyle:{color:"#eee"}},axisTick:{lineStyle:{color:"#eee"}},axisLabel:{textStyle:{color:"#eee"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#eee"}}},logAxis:{axisLine:{lineStyle:{color:"#eee"}},axisTick:{lineStyle:{color:"#eee"}},axisLabel:{textStyle:{color:"#eee"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#eee"}}},valueAxis:{axisLine:{lineStyle:{color:"#eee"}},axisTick:{lineStyle:{color:"#eee"}},axisLabel:{textStyle:{color:"#eee"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#eee"}}},categoryAxis:{axisLine:{lineStyle:{color:"#eee"}},axisTick:{lineStyle:{color:"#eee"}},axisLabel:{textStyle:{color:"#eee"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#eee"}}},line:{symbol:"circle"},graph:{color:a},gauge:{title:{textStyle:{color:"#eee"}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};i.categoryAxis.splitLine.show=!1;var r=i;t.exports=r},"8hsP":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});m(a("4d7F"));var r,n=m(a("pzx0")),o=m(a("io0T")),s=m(a("AyUB")),h=m(a("rfXi")),l=m(a("EJiy")),u=m(a("YEIV")),c=m(a("jWXv")),f=m(a("FyfS")),d=m(a("gDS+")),C=m(a("ODRq")),p=m(a("EVdn"));function m(t){return t&&t.__esModule?t:{default:t}}var D={Chart:{Log:console.log,Warn:console.warn},Complier:{Log:console.log,Warn:console.warn},JSTable:{Log:console.log,Warn:console.warn}};function v(){}v.HttpRequest=function(t){p.default.ajax({url:t.url,data:t.data,type:t.type,dataType:t.dataType,async:t.async,success:t.success,error:t.error})};var g={MINUTE_ID:101,MULTIDAY_MINUTE_ID:102,HISTORY_MINUTE_ID:103,KLINE_DAY_ID:0,KLINE_WEEK_ID:1,KLINE_TWOWEEK_ID:21,KLINE_MONTH_ID:2,KLINE_QUARTER_ID:9,KLINE_YEAR_ID:3,KLINE_MINUTE_ID:4,KLINE_5_MINUTE_ID:5,KLINE_15_MINUTE_ID:6,KLINE_30_MINUTE_ID:7,KLINE_60_MINUTE_ID:8};var S=new function(){this.DataMap=new C.default,this.Get=function(t){return this.DataMap.has(t)?this.DataMap.get(t):null},this.Add=function(t){this.DataMap.set(t.ID,t)}};function T(){this.DataMap=new C.default([["MA",this.MA],["均线",this.MA],["MA4",this.MA4],["MA5",this.MA5],["MA6",this.MA6],["MA7",this.MA7],["MA8",this.MA8],["BOLL",this.BOLL],["BOLL副图",this.BOLL2],["BBI",this.BBI],["DKX",this.DKX],["MIKE",this.MIKE],["PBX",this.PBX],["ENE",this.ENE],["MACD",this.MACD],["KDJ",this.KDJ],["MACD2",this.MACD2],["VOL",this.VOL],["VOL_OVERLAY",this.VOL_OVERLAY],["RSI",this.RSI],["BRAR",this.BRAR],["WR",this.WR],["BIAS",this.BIAS],["OBV",this.OBV],["DMI",this.DMI],["CR",this.CR],["PSY",this.PSY],["CCI",this.CCI],["DMA",this.DMA],["TRIX",this.TRIX],["VR",this.VR],["EMV",this.EMV],["ROC",this.ROC],["MTM",this.MTM],["FSL",this.FSL],["CYR",this.CYR],["MASS",this.MASS],["WAD",this.WAD],["CHO",this.CHO],["ADTM",this.ADTM],["HSL",this.HSL],["BIAS36",this.BIAS36],["BIAS_QL",this.BIAS_QL],["DPO",this.DPO],["OSC",this.OSC],["ATR",this.ATR],["NVI",this.NVI],["PVI",this.PVI],["UOS",this.UOS],["CYW",this.CYW],["LON",this.LON],["NDB",this.NDB],["SKDJ",this.SKDJ],["KD",this.KD],["FKX",this.FKX],["DKCOL",this.DKCOL],["UDL",this.UDL],["MFI",this.MFI],["LWR",this.LWR],["MARSI",this.MARSI],["CYD",this.CYD],["CYF",this.CYF],["TAPI",this.TAPI],["VMACD",this.VMACD],["QACD",this.QACD],["VPT",this.VPT],["WVAD",this.WVAD],["DBQR",this.DBQR],["JS",this.JS],["CYE",this.CYE],["QR",this.QR],["GDX",this.GDX],["JLHB",this.JLHB],["PCNT",this.PCNT],["BTX",this.BTX],["AMO",this.AMO],["VRSI",this.VRSI],["HSCOL",this.HSCOL],["DBQRV",this.DBQRV],["DBLB",this.DBLB],["ACD",this.ACD],["EXPMA",this.EXPMA],["EXPMA_S",this.EXPMA_S],["HMA",this.HMA],["LMA",this.LMA],["VMA",this.VMA],["AMV",this.AMV],["BBIBOLL",this.BBIBOLL],["ALLIGAT",this.ALLIGAT],["ZX",this.ZX],["XS",this.XS],["XS2",this.XS2],["SG-XDT",this.SG_XDT],["SG-SMX",this.SG_SMX],["SG-LB",this.SG_LB],["SG-PF",this.SG_PF],["RAD",this.RAD],["SHT",this.SHT],["ZLJC",this.ZLJC],["ZLMM",this.ZLMM],["SLZT",this.SLZT],["ADVOL",this.ADVOL],["CYC",this.CYC],["CYS",this.CYS],["CYQKL",this.CYQKL],["SCR",this.SCR],["ASR",this.ASR],["SAR",this.SAR],["TJCJL",this.TJCJL],["量比",this.VOLRate],["平均K线",this.HeikinAshi],["ADL",this.ADL],["SQJZ",this.SQJZ],["XT",this.XT],["CFJT",this.CFJT],["CYX",this.CYX],["WAVE",this.WAVE],["VOL-TDX",this.VOL_TDX],["EMPTY",this.EMPTY],["神奇九转",this.NineTurns],["EMA",this.EMA3],["EMA4",this.EMA4],["EMA5",this.EMA5],["EMA6",this.EMA6],["散户线",this.ShareholderCount],["NXTS",this.NXTS],["FKX",this.FKX],["两融资金",this.Margin4],["ZSDB",this.ZSDB],["CJL2",this.CJL],["ASI",this.ASI],["DC",this.DC],["DEMA",this.DEMA],["VWAP",this.VWAP],["飞龙四式",this.Dragon4_Main],["飞龙四式-附图",this.Dragon4_Fig],["资金分析",this.FundsAnalysis],["融资占比",this.MarginProportion],["负面新闻",this.NewsNegative],["涨跌趋势",this.UpDownAnalyze],["北上资金",this.HK2SHSZ],["股东人数",this.ShareHolder],["两融余额",this.Margin2],["两融余额2",this.Margin3],["Zealink-资金吸筹",this.Zealink_Index1],["Zealink-牛熊区间",this.Zealink_Index2],["Zealink-持仓信号",this.Zealink_Index3],["Zealink-增减持",this.Zealink_Index4],["Zealink-大宗交易",this.Zealink_Index5],["Zealink-信托持股",this.Zealink_Index6],["Zealink-官网新闻",this.Zealink_Index7],["Zealink-高管要闻",this.Zealink_Index8],["Zealink-股权质押",this.Zealink_Index9],["Zealink-操盘BS点",this.Zealink_Index10],["Zealink-操盘BS点2",this.Zealink_Index11],["放心股-操盘BS点",this.FXG_BSPoint],["放心股-涨停多空线",this.FXG_INDEX],["放心股-涨停吸筹区",this.FXG_INDEX2],["放心股-量能黄金点",this.FXG_INDEX3],["五彩K线-十字星",this.COLOR_KSTAR1],["五彩K线-早晨之星",this.COLOR_KSTAR2],["五彩K线-黄昏之星",this.COLOR_KSTAR3],["五彩K线-长十字",this.COLOR_SHI1],["五彩K线-身怀六甲",this.COLOR_K220],["五彩K线-三个白武士",this.COLOR_K300],["五彩K线-三只乌鸦",this.COLOR_K310],["五彩K线-光头阳线",this.COLOR_K380],["五彩K线-光脚阴线",this.COLOR_K390],["五彩K线-垂死十字",this.COLOR_K134],["五彩K线-早晨十字星",this.COLOR_K140],["五彩K线-黄昏十字星",this.COLOR_K150],["五彩K线-射击之星",this.COLOR_K160],["五彩K线-倒转锤头",this.COLOR_K165],["五彩K线-锤头",this.COLOR_K170],["五彩K线-吊颈",this.COLOR_K180],["五彩K线-穿头破脚",this.COLOR_K190],["五彩K线-出水芙蓉",this.COLOR_CSFR],["五彩K线-乌云盖顶",this.COLOR_WYGD],["五彩K线-曙光初现",this.COLOR_SGCJ],["五彩K线-十字胎",this.COLOR_SZTAI],["五彩K线-剑",this.COLOR_SWORD],["五彩K线-平顶",this.COLOR_PINGDING],["五彩K线-平底",this.COLOR_PINGDI],["五彩K线-大阳烛",this.COLOR_DAYANZHU],["五彩K线-大阴烛",this.COLOR_DAYINGZHU],["五彩K线-好友反攻",this.COLOR_HYFG],["五彩K线-跳空缺口",this.COLOR_TKQK],["五彩K线-双飞乌鸦",this.COLOR_SFWY],["五彩K线-上升三部曲",this.COLOR_SSSBQ],["五彩K线-下跌三部曲",this.COLOR_XDSBQ],["五彩K线-长下影",this.COLOR_CHXY],["五彩K线-长上影",this.COLOR_CHSY],["五彩K线-分离",this.COLOR_FENLI],["交易系统-BIAS",this.TRADE_BIAS],["交易系统-CCI",this.TRADE_CCI],["交易系统-DMI",this.TRADE_DMI],["交易系统-KD",this.TRADE_KD],["交易系统-BOLL",this.TRADE_BOLL],["交易系统-KDJ",this.TRADE_KDJ],["交易系统-MA",this.TRADE_MA],["交易系统-MACD",this.TRADE_MACD],["交易系统-MTM",this.TRADE_MTM],["交易系统-PSY",this.TRADE_PSY],["交易系统-ROC",this.TRADE_ROC],["交易系统-RSI",this.TRADE_RSI],["交易系统-VR",this.TRADE_VR],["交易系统-DPSJ",this.TRADE_DPSJ],["TEST",this.TEST]])}if(T.AddIndex=function(t){for(var e in t)S.Add(t[e])},T.prototype.Get=function(t){var e=S.Get(t);if(e)return e;var a=this.DataMap.get(t);return a?a():null},T.prototype.Search=function(t){var e=[],a=new RegExp(t,"i");return this.DataMap.forEach(function(t,i){0!=i.indexOf("交易系统-")&&0!=i.indexOf("五彩K线-")&&i.search(a)>=0&&e.push(i)}),e},T.prototype.MA=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);"}},T.prototype.MA4=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);"}},T.prototype.MA5=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);\nMA5:MA(CLOSE,M5);"}},T.prototype.MA6=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0},{Name:"M6",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"},{Name:"MA6",DynamicName:"MA{M6}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);\nMA5:MA(CLOSE,M5);\nMA6:MA(CLOSE,M6);"}},T.prototype.MA7=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0},{Name:"M6",Value:0},{Name:"M7",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"},{Name:"MA6",DynamicName:"MA{M6}"},{Name:"MA7",DynamicName:"MA{M7}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);\nMA5:MA(CLOSE,M5);\nMA6:MA(CLOSE,M6);\nMA7:MA(CLOSE,M7);"}},T.prototype.MA8=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0},{Name:"M6",Value:0},{Name:"M7",Value:0},{Name:"M8",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"},{Name:"MA6",DynamicName:"MA{M6}"},{Name:"MA7",DynamicName:"MA{M7}"},{Name:"MA8",DynamicName:"MA{M8}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);\nMA5:MA(CLOSE,M5);\nMA6:MA(CLOSE,M6);\nMA7:MA(CLOSE,M7);\nMA8:MA(CLOSE,M8);"}},T.prototype.EMA3=function(){return{Name:"EMA",Description:"指数移动平均值",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"}],Script:"MA1:EMA(CLOSE,M1);\nMA2:EMA(CLOSE,M2);\nMA3:EMA(CLOSE,M3);"}},T.prototype.EMA4=function(){return{Name:"EMA",Description:"指数移动平均值",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"}],Script:"MA1:EMA(CLOSE,M1);\nMA2:EMA(CLOSE,M2);\nMA3:EMA(CLOSE,M3);\nMA4:EMA(CLOSE,M4);"}},T.prototype.EMA5=function(){return{Name:"EMA",Description:"指数移动平均值",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"}],Script:"MA1:EMA(CLOSE,M1);\nMA2:EMA(CLOSE,M2);\nMA3:EMA(CLOSE,M3);\nMA4:EMA(CLOSE,M4);\nMA5:EMA(CLOSE,M5);"}},T.prototype.EMA6=function(){return{Name:"EMA",Description:"指数移动平均值",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0},{Name:"M6",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"},{Name:"MA6",DynamicName:"MA{M6}"}],Script:"MA1:EMA(CLOSE,M1);\nMA2:EMA(CLOSE,M2);\nMA3:EMA(CLOSE,M3);\nMA4:EMA(CLOSE,M4);\nMA5:EMA(CLOSE,M5);\nMA6:EMA(CLOSE,M6);"}},T.prototype.BOLL=function(){return{Name:"BOLL",Description:"布林线",IsMainIndex:!0,Args:[{Name:"M",Value:20}],Script:"BOLL:MA(CLOSE,M);\nUB:BOLL+2*STD(CLOSE,M);\nLB:BOLL-2*STD(CLOSE,M);"}},T.prototype.BOLL2=function(){return{Name:"BOLL2",Description:"布林线",IsMainIndex:!1,KLineType:0,Args:[{Name:"M",Value:20}],Script:"BOLL:MA(CLOSE,M);\nUB:BOLL+2*STD(CLOSE,M);\nLB:BOLL-2*STD(CLOSE,M);"}},T.prototype.BBI=function(){return{Name:"BBI",Description:"多空均线",IsMainIndex:!0,Args:[{Name:"M1",Value:3},{Name:"M2",Value:6},{Name:"M3",Value:12},{Name:"M4",Value:24}],Script:"BBI:(MA(CLOSE,M1)+MA(CLOSE,M2)+MA(CLOSE,M3)+MA(CLOSE,M4))/4;"}},T.prototype.DKX=function(){return{Name:"DKX",Description:"多空线",IsMainIndex:!1,Args:[{Name:"M",Value:10}],Script:"MID:=(3*CLOSE+LOW+OPEN+HIGH)/6;\nDKX:(20*MID+19*REF(MID,1)+18*REF(MID,2)+17*REF(MID,3)+\n16*REF(MID,4)+15*REF(MID,5)+14*REF(MID,6)+\n13*REF(MID,7)+12*REF(MID,8)+11*REF(MID,9)+\n10*REF(MID,10)+9*REF(MID,11)+8*REF(MID,12)+\n7*REF(MID,13)+6*REF(MID,14)+5*REF(MID,15)+\n4*REF(MID,16)+3*REF(MID,17)+2*REF(MID,18)+REF(MID,20))/210;\nMADKX:MA(DKX,M);"}},T.prototype.MIKE=function(){return{Name:"MIKE",Description:"麦克支撑压力",IsMainIndex:!0,Args:[{Name:"N",Value:10}],Script:"HLC:=REF(MA((HIGH+LOW+CLOSE)/3,N),1);\nHV:=EMA(HHV(HIGH,N),3);\nLV:=EMA(LLV(LOW,N),3);\nSTOR:EMA(2*HV-LV,3);\nMIDR:EMA(HLC+HV-LV,3);\nWEKR:EMA(HLC*2-LV,3);\nWEKS:EMA(HLC*2-HV,3);\nMIDS:EMA(HLC-HV+LV,3);\nSTOS:EMA(2*LV-HV,3);"}},T.prototype.PBX=function(){return{Name:"PBX",Description:"瀑布线",IsMainIndex:!0,Args:[{Name:"M1",Value:4},{Name:"M2",Value:6},{Name:"M3",Value:9},{Name:"M4",Value:13},{Name:"M5",Value:18},{Name:"M6",Value:24}],Script:"PBX1:(EMA(CLOSE,M1)+MA(CLOSE,M1*2)+MA(CLOSE,M1*4))/3;\nPBX2:(EMA(CLOSE,M2)+MA(CLOSE,M2*2)+MA(CLOSE,M2*4))/3;\nPBX3:(EMA(CLOSE,M3)+MA(CLOSE,M3*2)+MA(CLOSE,M3*4))/3;\nPBX4:(EMA(CLOSE,M4)+MA(CLOSE,M4*2)+MA(CLOSE,M4*4))/3;\nPBX5:(EMA(CLOSE,M5)+MA(CLOSE,M5*2)+MA(CLOSE,M5*4))/3;\nPBX6:(EMA(CLOSE,M6)+MA(CLOSE,M6*2)+MA(CLOSE,M6*4))/3;"}},T.prototype.ENE=function(){return{Name:"ENE",Description:"轨道线",IsMainIndex:!0,Args:[{Name:"N",Value:25},{Name:"M1",Value:6},{Name:"M2",Value:6}],Script:"UPPER:(1+M1/100)*MA(CLOSE,N);\nLOWER:(1-M2/100)*MA(CLOSE,N);\nENE:(UPPER+LOWER)/2;"}},T.prototype.MACD=function(){return{Name:"MACD",Description:"平滑异同平均",IsMainIndex:!1,Args:[{Name:"SHORT",Value:12},{Name:"LONG",Value:26},{Name:"MID",Value:9}],Script:"DIF:EMA(CLOSE,SHORT)-EMA(CLOSE,LONG);\nDEA:EMA(DIF,MID);\nMACD:(DIF-DEA)*2,COLORSTICK;"}},T.prototype.MACD2=function(){return{Name:"MACD",Description:"平滑异同平均",IsMainIndex:!1,Args:[{Name:"SHORT",Value:12},{Name:"LONG",Value:26},{Name:"MID",Value:9}],Script:"DIF2:=EMA(CLOSE,SHORT)-EMA(CLOSE,LONG);\nDEA2:=EMA(DIF2,MID);\nMACD:(DIF2-DEA2)*2,COLORSTICK,LINETHICK50;\nDIF:DIF2;\nDEA:DEA2;"}},T.prototype.KDJ=function(){return{Name:"KDJ",Description:"随机指标",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:SMA(RSV,M1,1);\nD:SMA(K,M2,1);\nJ:3*K-2*D;"}},T.prototype.VOL=function(){return{Name:"VOL",Description:"成交量",IsMainIndex:!1,FloatPrecision:0,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"}],Script:"VOL:VOL,VOLSTICK;\nMA1:MA(VOL,M1);\nMA2:MA(VOL,M2);"}},T.prototype.VOL_OVERLAY=function(){return{Name:"VOL",Description:"成交量",IsMainIndex:!1,FloatPrecision:0,Script:"VOL:VOL,VOLSTICK,UPCOLOR(RGBA(255,0,0,0.3)),DOWNCOLOR(RGBA(0,255,0,0.3));"}},T.prototype.VOL_TDX=function(){return{Name:"VOL-TDX",Description:"成交量(虚拟)",IsMainIndex:!1,FloatPrecision:0,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10}],Script:"TOTAL:=IF(PERIOD=1,5,IF(PERIOD=2,15,IF(PERIOD=3,30,IF(PERIOD=4,60,IF(PERIOD=5,TOTALFZNUM,1)))));\nMTIME:=MOD(FROMOPEN,TOTAL);\nCTIME:=IF(MTIME<0.5,TOTAL,MTIME);\nVVOL:IF((CURRBARSCOUNT=1 AND DYNAINFO(8)>1),VOL*(TOTAL+3)/(CTIME+3),DRAWNULL),NODRAW;\nSTICKLINE((CURRBARSCOUNT=1 AND DYNAINFO(8)>1),VVOL,0,-1,-1),COLORYELLOW;\nVOLUME:VOL,VOLSTICK;\nMAVOL1:MA(VOLUME,M1);\nMAVOL2:MA(VOLUME,M2);"}},T.prototype.RSI=function(){return{Name:"RSI",Description:"相对强弱指标",IsMainIndex:!1,Args:[{Name:"N1",Value:6},{Name:"N2",Value:12},{Name:"N3",Value:24}],Script:"LC:=REF(CLOSE,1);\nRSI1:SMA(MAX(CLOSE-LC,0),N1,1)/SMA(ABS(CLOSE-LC),N1,1)*100;\nRSI2:SMA(MAX(CLOSE-LC,0),N2,1)/SMA(ABS(CLOSE-LC),N2,1)*100;\nRSI3:SMA(MAX(CLOSE-LC,0),N3,1)/SMA(ABS(CLOSE-LC),N3,1)*100;"}},T.prototype.BRAR=function(){return{Name:"BRAR",Description:"情绪指标",IsMainIndex:!1,Args:[{Name:"N",Value:26}],Script:"BR:SUM(MAX(0,HIGH-REF(CLOSE,1)),N)/SUM(MAX(0,REF(CLOSE,1)-LOW),N)*100;\nAR:SUM(HIGH-OPEN,N)/SUM(OPEN-LOW,N)*100;"}},T.prototype.WR=function(){return{Name:"WR",Description:"威廉指标",IsMainIndex:!1,Args:[{Name:"N",Value:10},{Name:"N1",Value:6}],Script:"WR1:100*(HHV(HIGH,N)-CLOSE)/(HHV(HIGH,N)-LLV(LOW,N));\nWR2:100*(HHV(HIGH,N1)-CLOSE)/(HHV(HIGH,N1)-LLV(LOW,N1));"}},T.prototype.BIAS=function(){return{Name:"BIAS",Description:"乖离率",IsMainIndex:!1,Args:[{Name:"N1",Value:6},{Name:"N2",Value:12},{Name:"N3",Value:24}],Script:"BIAS1 :(CLOSE-MA(CLOSE,N1))/MA(CLOSE,N1)*100;\nBIAS2 :(CLOSE-MA(CLOSE,N2))/MA(CLOSE,N2)*100;\nBIAS3 :(CLOSE-MA(CLOSE,N3))/MA(CLOSE,N3)*100;"}},T.prototype.OBV=function(){return{Name:"OBV",Description:"累积能量线",IsMainIndex:!1,Args:[{Name:"M",Value:30}],Script:"VA:=IF(CLOSE>REF(CLOSE,1),VOL,-VOL);\nOBV:SUM(IF(CLOSE==REF(CLOSE,1),0,VA),0);\nMAOBV:MA(OBV,M);"}},T.prototype.DMI=function(){return{Name:"DMI",Description:"趋向指标",IsMainIndex:!1,Args:[{Name:"N",Value:14},{Name:"MM",Value:6}],Script:"MTR:=EXPMEMA(MAX(MAX(HIGH-LOW,ABS(HIGH-REF(CLOSE,1))),ABS(REF(CLOSE,1)-LOW)),N);\nHD :=HIGH-REF(HIGH,1);\nLD :=REF(LOW,1)-LOW;\nDMP:=EXPMEMA(IF(HD>0&&HD>LD,HD,0),N);\nDMM:=EXPMEMA(IF(LD>0&&LD>HD,LD,0),N);\nPDI: DMP*100/MTR;\nMDI: DMM*100/MTR;\nADX: EXPMEMA(ABS(MDI-PDI)/(MDI+PDI)*100,MM);\nADXR:EXPMEMA(ADX,MM);"}},T.prototype.CR=function(){return{Name:"CR",Description:"带状能量线",IsMainIndex:!1,Args:[{Name:"N",Value:26},{Name:"M1",Value:10},{Name:"M2",Value:20},{Name:"M3",Value:40},{Name:"M4",Value:62}],Script:"MID:=REF(HIGH+LOW,1)/2;\nCR:SUM(MAX(0,HIGH-MID),N)/SUM(MAX(0,MID-LOW),N)*100;\nMA1:REF(MA(CR,M1),M1/2.5+1);\nMA2:REF(MA(CR,M2),M2/2.5+1);\nMA3:REF(MA(CR,M3),M3/2.5+1);\nMA4:REF(MA(CR,M4),M4/2.5+1);"}},T.prototype.PSY=function(){return{Name:"PSY",Description:"心理线",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"PSY:COUNT(CLOSE>REF(CLOSE,1),N)/N*100;\rPSYMA:MA(PSY,M);"}},T.prototype.CCI=function(){return{Name:"CCI",Description:"商品路径指标",IsMainIndex:!1,Args:[{Name:"N",Value:14}],Script:"TYP:=(HIGH+LOW+CLOSE)/3;\nCCI:(TYP-MA(TYP,N))/(0.015*AVEDEV(TYP,N));"}},T.prototype.DMA=function(){return{Name:"DMA",Description:"平均差",IsMainIndex:!1,Args:[{Name:"N1",Value:10},{Name:"N2",Value:50},{Name:"M",Value:10}],Script:"DIF:MA(CLOSE,N1)-MA(CLOSE,N2);\nDIFMA:MA(DIF,M);"}},T.prototype.TRIX=function(){return{Name:"TRIX",Description:"三重指数平均线",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:9}],Script:"MTR:=EMA(EMA(EMA(CLOSE,N),N),N);\nTRIX:(MTR-REF(MTR,1))/REF(MTR,1)*100;\nMATRIX:MA(TRIX,M) ;"}},T.prototype.VR=function(){return{Name:"VR",Description:"成交量变异率",IsMainIndex:!1,Args:[{Name:"N",Value:26},{Name:"M",Value:6}],Script:"TH:=SUM(IF(CLOSE>REF(CLOSE,1),VOL,0),N);\nTL:=SUM(IF(CLOSE<REF(CLOSE,1),VOL,0),N);\nTQ:=SUM(IF(CLOSE==REF(CLOSE,1),VOL,0),N);\nVR:100*(TH*2+TQ)/(TL*2+TQ);\nMAVR:MA(VR,M);"}},T.prototype.EMV=function(){return{Name:"EMV",Description:"简易波动指标",IsMainIndex:!1,Args:[{Name:"N",Value:14},{Name:"M",Value:9}],Script:"VOLUME:=MA(VOL,N)/VOL;\nMID:=100*(HIGH+LOW-REF(HIGH+LOW,1))/(HIGH+LOW);\nEMV:MA(MID*VOLUME*(HIGH-LOW)/MA(HIGH-LOW,N),N);\nMAEMV:MA(EMV,M);"}},T.prototype.ROC=function(){return{Name:"ROC",Description:"变动率指标",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"ROC:100*(CLOSE-REF(CLOSE,N))/REF(CLOSE,N);\nMAROC:MA(ROC,M);"}},T.prototype.MTM=function(){return{Name:"MTM",Description:"动量线",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"MTM:CLOSE-REF(CLOSE,N);\nMAMTM:MA(MTM,M);"}},T.prototype.FSL=function(){return{Name:"FSL",Description:"分水岭",IsMainIndex:!1,Args:[],Script:"SWL:(EMA(CLOSE,5)*7+EMA(CLOSE,10)*3)/10;\nSWS:DMA(EMA(CLOSE,12),MAX(1,100*(SUM(VOL,5)/(3*CAPITAL))));"}},T.prototype.CYR=function(){return{Name:"CYR",Description:"市场强弱",IsMainIndex:!1,Args:[{Name:"N",Value:13},{Name:"M",Value:5}],Script:"DIVE:=0.01*EMA(AMOUNT,N)/EMA(VOL,N);\nCYR:(DIVE/REF(DIVE,1)-1)*100;\nMACYR:MA(CYR,M);"}},T.prototype.MASS=function(){return{Name:"MASS",Description:"市场强弱",IsMainIndex:!1,Args:[{Name:"N1",Value:9},{Name:"N2",Value:25},{Name:"M",Value:6}],Script:"MASS:SUM(MA(HIGH-LOW,N1)/MA(MA(HIGH-LOW,N1),N1),N2);\nMAMASS:MA(MASS,M);"}},T.prototype.WAD=function(){return{Name:"WAD",Description:"威廉多空力度线",IsMainIndex:!1,Args:[{Name:"M",Value:30}],Script:"MIDA:=CLOSE-MIN(REF(CLOSE,1),LOW);\nMIDB:=IF(CLOSE<REF(CLOSE,1),CLOSE-MAX(REF(CLOSE,1),HIGH),0);\nWAD:SUM(IF(CLOSE>REF(CLOSE,1),MIDA,MIDB),0);\nMAWAD:MA(WAD,M);"}},T.prototype.CHO=function(){return{Name:"CHO",Description:"佳庆指标",IsMainIndex:!1,Args:[{Name:"N1",Value:10},{Name:"N2",Value:20},{Name:"M",Value:6}],Script:"MID:=SUM(VOL*(2*CLOSE-HIGH-LOW)/(HIGH+LOW),0);\nCHO:MA(MID,N1)-MA(MID,N2);\nMACHO:MA(CHO,M);"}},T.prototype.ADTM=function(){return{Name:"ADTM",Description:"动态买卖气指标",IsMainIndex:!1,Args:[{Name:"N",Value:23},{Name:"M",Value:8}],Script:"DTM:=IF(OPEN<=REF(OPEN,1),0,MAX((HIGH-OPEN),(OPEN-REF(OPEN,1))));\nDBM:=IF(OPEN>=REF(OPEN,1),0,MAX((OPEN-LOW),(OPEN-REF(OPEN,1))));\nSTM:=SUM(DTM,N);\nSBM:=SUM(DBM,N);\nADTM:IF(STM>SBM,(STM-SBM)/STM,IF(STM==SBM,0,(STM-SBM)/SBM));\nMAADTM:MA(ADTM,M);"}},T.prototype.HSL=function(){return{Name:"HSL",Description:"换手线",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"HSL:IF((SETCODE==0||SETCODE==1),100*VOL,VOL)/(FINANCE(7)/100);\nMAHSL:MA(HSL,N);"}},T.prototype.BIAS36=function(){return{Name:"BIAS36",Description:"三六乖离",IsMainIndex:!1,Args:[{Name:"M",Value:6}],Script:"BIAS36:MA(CLOSE,3)-MA(CLOSE,6);\nBIAS612:MA(CLOSE,6)-MA(CLOSE,12);\nMABIAS:MA(BIAS36,M);"}},T.prototype.BIAS_QL=function(){return{Name:"BIAS_QL",Description:"乖离率-传统版",IsMainIndex:!1,Args:[{Name:"N",Value:6},{Name:"M",Value:6}],Script:"BIAS :(CLOSE-MA(CLOSE,N))/MA(CLOSE,N)*100;\nBIASMA :MA(BIAS,M);"}},T.prototype.DPO=function(){return{Name:"DPO",Description:"区间震荡线",IsMainIndex:!1,Args:[{Name:"N",Value:20},{Name:"M",Value:6}],Script:"DPO:CLOSE-REF(MA(CLOSE,N),N/2+1);\nMADPO:MA(DPO,M);"}},T.prototype.OSC=function(){return{Name:"OSC",Description:"变动速率线",IsMainIndex:!1,Args:[{Name:"N",Value:20},{Name:"M",Value:6}],Script:"OSC:100*(CLOSE-MA(CLOSE,N));\nMAOSC:EXPMEMA(OSC,M);"}},T.prototype.ATR=function(){return{Name:"ATR",Description:"真实波幅",IsMainIndex:!1,Args:[{Name:"N",Value:14}],Script:"MTR:MAX(MAX((HIGH-LOW),ABS(REF(CLOSE,1)-HIGH)),ABS(REF(CLOSE,1)-LOW));\nATR:MA(MTR,N);"}},T.prototype.NVI=function(){return{Name:"ATR",Description:"负成交量",IsMainIndex:!1,Args:[{Name:"N",Value:72}],Script:"NVI:100*MULAR(IF(V<REF(V,1),C/REF(C,1),1),0);\nMANVI:MA(NVI,N);"}},T.prototype.PVI=function(){return{Name:"PVI",Description:"正成交量",IsMainIndex:!1,Args:[{Name:"N",Value:72}],Script:"NVI:100*MULAR(IF(V>REF(V,1),C/REF(C,1),1),0);\nMANVI:MA(NVI,N);"}},T.prototype.UOS=function(){return{Name:"UOS",Description:"终极指标",IsMainIndex:!1,Args:[{Name:"N1",Value:7},{Name:"N2",Value:14},{Name:"N3",Value:28},{Name:"M",Value:6}],Script:"TH:=MAX(HIGH,REF(CLOSE,1));\nTL:=MIN(LOW,REF(CLOSE,1));\nACC1:=SUM(CLOSE-TL,N1)/SUM(TH-TL,N1);\nACC2:=SUM(CLOSE-TL,N2)/SUM(TH-TL,N2);\nACC3:=SUM(CLOSE-TL,N3)/SUM(TH-TL,N3);\nUOS:(ACC1*N2*N3+ACC2*N1*N3+ACC3*N1*N2)*100/(N1*N2+N1*N3+N2*N3);\nMAUOS:EXPMEMA(UOS,M);"}},T.prototype.CYW=function(){return{Name:"CYW",Description:"主力控盘",IsMainIndex:!1,Args:[],Script:"VAR1:=CLOSE-LOW;\nVAR2:=HIGH-LOW;\nVAR3:=CLOSE-HIGH;\nVAR4:=IF(HIGH>LOW,(VAR1/VAR2+VAR3/VAR2)*VOL,0);\nCYW: SUM(VAR4,10)/10000, COLORSTICK;"}},T.prototype.LON=function(){return{Name:"LON",Description:"龙系长线",IsMainIndex:!1,Args:[{Name:"N",Value:10}],Script:"LC := REF(CLOSE,1);\nVID := SUM(VOL,2)/(((HHV(HIGH,2)-LLV(LOW,2)))*100);\nRC := (CLOSE-LC)*VID;\nLONG := SUM(RC,0);\nDIFF := SMA(LONG,10,1);\nDEA := SMA(LONG,20,1);\nLON : DIFF-DEA;\nLONMA : MA(LON,10);\nLONT : LON, COLORSTICK;"}},T.prototype.NDB=function(){return{Name:"NDB",Description:"脑电波",IsMainIndex:!1,Args:[{Name:"P1",Value:5},{Name:"P2",Value:10}],Script:"HH:=IF(C/REF(C,1)>1.098 AND L>REF(H,1),2*C-REF(C,1)-H,2*C-H-L);\nV1:= BARSCOUNT(C) - 1;\nV2:= 2 * REF(C, V1) - REF(H, V1) - REF(L, V1);\nDK: SUM(HH, 0) + V2;\nMDK5: MA(DK, P1);\nMDK10: MA(DK, P2);"}},T.prototype.SKDJ=function(){return{Name:"SKDJ",Description:"慢速随机指标",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M",Value:3}],Script:"LOWV:=LLV(LOW,N);\nHIGHV:=HHV(HIGH,N);\nRSV:=EMA((CLOSE-LOWV)/(HIGHV-LOWV)*100,M);\nK:EMA(RSV,M);\nD:MA(K,M);"}},T.prototype.KD=function(){return{Name:"KD",Description:"随机指标KD",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:SMA(RSV,M1,1);\nD:SMA(K,M2,1);"}},T.prototype.FKX=function(){return{Name:"FKX",Description:"反K线",IsMainIndex:!0,Args:[],Script:"DRAWKLINE(-LOW, -OPEN, -HIGH, -CLOSE);"}},T.prototype.DKCOL=function(){return{Name:"DKCOL",Description:"多空能量柱(适用于分时主图)",IsMainIndex:!0,Args:[{Name:"N",Value:5}],Script:"FF:=(C-REF(C,N))/REF(C,N);\nSTICKLINE(FF>0,DYNAINFO(3),DYNAINFO(3)*(1+FF),0.5,0),COLORRED;\nSTICKLINE(FF<0,DYNAINFO(3),DYNAINFO(3)*(1+FF),0.5,0),COLORGREEN;"}},T.prototype.UDL=function(){return{Name:"UDL",Description:"引力线",IsMainIndex:!1,Args:[{Name:"N1",Value:3},{Name:"N2",Value:5},{Name:"N3",Value:10},{Name:"N4",Value:20},{Name:"M",Value:6}],Script:"UDL:(MA(CLOSE,N1)+MA(CLOSE,N2)+MA(CLOSE,N3)+MA(CLOSE,N4))/4;\nMAUDL:MA(UDL,M);"}},T.prototype.MFI=function(){return{Name:"MFI",Description:"资金流量指标",IsMainIndex:!1,Args:[{Name:"N",Value:14},{Name:"N2",Value:6}],Script:"TYP := (HIGH + LOW + CLOSE)/3;\nV1:=SUM(IF(TYP>REF(TYP,1),TYP*VOL,0),N)/SUM(IF(TYP<REF(TYP,1),TYP*VOL,0),N);\nMFI:100-(100/(1+V1));"}},T.prototype.LWR=function(){return{Name:"LWR",Description:"LWR威廉指标",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"RSV:= (HHV(HIGH,N)-CLOSE)/(HHV(HIGH,N)-LLV(LOW,N))*100;\nLWR1:SMA(RSV,M1,1);\nLWR2:SMA(LWR1,M2,1);"}},T.prototype.MARSI=function(){return{Name:"MARSI",Description:"相对强弱平均线",IsMainIndex:!1,Args:[{Name:"M1",Value:10},{Name:"M2",Value:6}],Script:"DIF:=CLOSE-REF(CLOSE,1);\nVU:=IF(DIF>=0,DIF,0);\nVD:=IF(DIF<0,-DIF,0);\nMAU1:=MEMA(VU,M1);\nMAD1:=MEMA(VD,M1);\nMAU2:=MEMA(VU,M2);\nMAD2:=MEMA(VD,M2);\nRSI10:MA(100*MAU1/(MAU1+MAD1),M1);\nRSI6:MA(100*MAU2/(MAU2+MAD2),M2);"}},T.prototype.CYD=function(){return{Name:"CYD",Description:"承接因子",IsMainIndex:!1,Args:[{Name:"N",Value:21}],Script:"CYDS:WINNER(CLOSE)/(VOL/CAPITAL);\nCYDN:WINNER(CLOSE)/MA(VOL/CAPITAL,N);"}},T.prototype.CYF=function(){return{Name:"CYF",Description:"市场能量",IsMainIndex:!1,Args:[{Name:"N",Value:21}],Script:"CYF:100-100/(1+EMA(HSL,N));"}},T.prototype.TAPI=function(){return{Name:"TAPI",Description:"加权指数成交值",IsMainIndex:!1,Args:[{Name:"M",Value:6}],Script:"TAPI:AMOUNT/INDEXC;\nMATAIP:MA(TAPI,M);"}},T.prototype.VMACD=function(){return{Name:"VMACD",Description:"量平滑异同平均",IsMainIndex:!1,Args:[{Name:"SHORT",Value:12},{Name:"LONG",Value:26},{Name:"MID",Value:9}],Script:"DIF:EMA(VOL,SHORT)-EMA(VOL,LONG);\nDEA:EMA(DIF,MID);\nMACD:DIF-DEA,COLORSTICK;"}},T.prototype.QACD=function(){return{Name:"QACD",Description:"快速异同平均",IsMainIndex:!1,Args:[{Name:"N1",Value:12},{Name:"N2",Value:26},{Name:"M",Value:9}],Script:"DIF:EMA(CLOSE,N1)-EMA(CLOSE,N2);\nMACD:EMA(DIF,M);\nDDIF:DIF-MACD;"}},T.prototype.VPT=function(){return{Name:"VPT",Description:"量价曲线",IsMainIndex:!1,Args:[{Name:"N",Value:51},{Name:"M",Value:6}],Script:"VPT:SUM(VOL*(CLOSE-REF(CLOSE,1))/REF(CLOSE,1),N);\nMAVPT:MA(VPT,M);"}},T.prototype.WVAD=function(){return{Name:"WVAD",Description:"威廉变异离散量",IsMainIndex:!1,Args:[{Name:"N",Value:24},{Name:"M",Value:6}],Script:"WVAD:SUM((CLOSE-OPEN)/(HIGH-LOW)*VOL,N)/10000;\nMAWVAD:MA(WVAD,M);"}},T.prototype.DBQR=function(){return{Name:"WVAD",Description:"对比强弱",IsMainIndex:!1,Args:[{Name:"N",Value:5},{Name:"M1",Value:10},{Name:"M2",Value:20},{Name:"M3",Value:60}],Script:"ZS:(INDEXC-REF(INDEXC,N))/REF(INDEXC,N);\nGG:(CLOSE-REF(CLOSE,N))/REF(CLOSE,N);\nMADBQR1:MA(GG,M1);\nMADBQR2:MA(GG,M2);\nMADBQR3:MA(GG,M3);"}},T.prototype.JS=function(){return{Name:"JS",Description:"加速线",IsMainIndex:!1,Args:[{Name:"N",Value:5},{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20}],Script:"JS:100*(CLOSE-REF(CLOSE,N))/(N*REF(CLOSE,N));\nMAJS1:MA(JS,M1);\nMAJS2:MA(JS,M2);\nMAJS3:MA(JS,M3);"}},T.prototype.CYE=function(){return{Name:"CYE",Description:"市场趋势",IsMainIndex:!1,Args:[],Script:"MAL:=MA(CLOSE,5);\nMAS:=MA(MA(CLOSE,20),5);\nCYEL:(MAL-REF(MAL,1))/REF(MAL,1)*100;\nCYES:(MAS-REF(MAS,1))/REF(MAS,1)*100;"}},T.prototype.QR=function(){return{Name:"QR",Description:"强弱指标",IsMainIndex:!1,Args:[{Name:"N",Value:21}],Script:"个股: (CLOSE-REF(CLOSE,N))/REF(CLOSE,N)*100; \n大盘: (INDEXC-REF(INDEXC,N))/REF(INDEXC,N)*100; \n强弱值:EMA(个股-大盘,2),COLORSTICK;"}},T.prototype.GDX=function(){return{Name:"GDX",Description:"轨道线",IsMainIndex:!1,Args:[{Name:"N",Value:30},{Name:"M",Value:9}],Script:"AA:=ABS((2*CLOSE+HIGH+LOW)/4-MA(CLOSE,N))/MA(CLOSE,N); \n轨道:DMA(CLOSE,AA);\n压力线:(1+M/100)*轨道; \n支撑线:(1-M/100)*轨道;"}},T.prototype.JLHB=function(){return{Name:"JLHB",Description:"绝路航标",IsMainIndex:!1,Args:[{Name:"N",Value:7},{Name:"M",Value:5}],Script:"VAR1:=(CLOSE-LLV(LOW,60))/(HHV(HIGH,60)-LLV(LOW,60))*80; \nB:SMA(VAR1,N,1); \nVAR2:SMA(B,M,1); \n绝路航标:IF(CROSS(B,VAR2) AND B<40,50,0);"}},T.prototype.PCNT=function(){return{Name:"PCNT",Description:"幅度比",IsMainIndex:!1,Args:[{Name:"M",Value:5}],Script:"PCNT:(CLOSE-REF(CLOSE,1))/CLOSE*100;\nMAPCNT:EXPMEMA(PCNT,M);"}},T.prototype.BTX=function(){return{Name:"BTX",Description:"宝塔线",IsMainIndex:!1,Args:[],Script:"B1:=REF(C,1);\nB2:= REF(C, 2);\nSS:= IF(C > REF(C, 1) AND REF(C, 1) >= REF(C, 2), 1, IF(C < REF(C, 1) AND REF(C, 1) <= REF(C, 2), -1, IF(C > REF(C, 2) AND REF(C, 2) > REF(C, 1), 2, IF(C < REF(C, 2) AND REF(C, 2) < REF(C, 1), -2, 0))));\nSM:= IF(REF(SS, 1) <> 0, REF(SS, 1), IF(REF(SS, 2) <> 0, REF(SS, 2), IF(REF(SS, 3) <> 0, REF(SS, 3), IF(REF(SS, 5) <> 0, REF(SS, 5), IF(REF(SS, 6) <> 0, REF(SS, 6), IF(REF(SS, 7) <> 0, REF(SS, 7), 0))))));\nMC:= IF(REF(SS, 1) <> 0, B2, IF(SM > 0, MIN(B1, B2), MAX(B1, B2)));\nTOW1:= IF(C > REF(C, 1), C, REF(C, 1));\nTOW2:= IF((SS == -1 OR SS == -2) AND SM > 0, B2, TOW1);\nTOWER:= IF(TOW1 > TOW2, TOW1, TOW2);\nSTICKLINE(SS == 1 OR SM >= 1 AND SS == 0, B1, C, 10, 1), COLORRED;\nSTICKLINE(SS == -1 OR SM <= -1 AND SS == 0, B1, C, 10, 0), COLORCYAN;\nSTICKLINE(SS == 2, B2, C, 10, 1), COLORRED;\nSTICKLINE(SS == -2, B2, C, 10, 0), COLORCYAN;\nSTICKLINE((SS == -1 OR SS == -2) AND SM > 0, B2, B1, 10, 1), COLORRED;\nSTICKLINE((SS == 1 OR SS == 2) AND SM < 0, B2, B1, 10, 0), COLORCYAN;"}},T.prototype.AMO=function(){return{Name:"AMO",Description:"成交金额",IsMainIndex:!1,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10}],Script:"AMOW:AMOUNT/10000.0,VOLSTICK;\nAMO1:MA(AMOW,M1);\nAMO2:MA(AMOW,M2);"}},T.prototype.VRSI=function(){return{Name:"VRSI",Description:"相对强弱量",IsMainIndex:!1,Args:[{Name:"N1",Value:6},{Name:"N2",Value:12},{Name:"N3",Value:24}],Script:"LC:=REF(VOL,1);\nRSI1:SMA(MAX(VOL-LC,0),N1,1)/SMA(ABS(VOL-LC),N1,1)*100;\nRSI2:SMA(MAX(VOL-LC,0),N2,1)/SMA(ABS(VOL-LC),N2,1)*100;\nRSI3:SMA(MAX(VOL-LC,0),N3,1)/SMA(ABS(VOL-LC),N3,1)*100;"}},T.prototype.HSCOL=function(){return{Name:"HSCOL",Description:"换手柱",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"HSCOL:IF((SETCODE==0||SETCODE==1),100*VOL,VOL)/(FINANCE(7)/100),VOLSTICK;\nMAHSL:MA(HSCOL,N);"}},T.prototype.DBQRV=function(){return{Name:"DBQRV",Description:"对比强弱量(需下载日线)",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"ZS:(INDEXV-REF(INDEXV,N))/REF(INDEXV,N);\nGG:(VOL-REF(VOL,N))/REF(VOL,N);"}},T.prototype.DBLB=function(){return{Name:"DBLB",Description:"对比量比(需下载日线)",IsMainIndex:!1,Args:[{Name:"N",Value:5},{Name:"M",Value:5}],Script:"GG:=VOL/SUM(REF(VOL,1),N);\nZS:=INDEXV/SUM(REF(INDEXV,1),N);\nDBLB:GG/ZS;\nMADBLB:MA(DBLB,M);"}},T.prototype.ACD=function(){return{Name:"ACD",Description:"升降线",IsMainIndex:!1,Args:[{Name:"M",Value:20}],Script:"LC:=REF(CLOSE,1);\nDIF:=CLOSE-IF(CLOSE>LC,MIN(LOW,LC),MAX(HIGH,LC));\nACD:SUM(IF(CLOSE==LC,0,DIF),0);\nMAACD:EXPMEMA(ACD,M);"}},T.prototype.EXPMA=function(){return{Name:"EXPMA",Description:"指数平均线",IsMainIndex:!0,Args:[{Name:"M1",Value:12},{Name:"M2",Value:50}],Script:"EXP1:EMA(CLOSE,M1);\nEXP2:EMA(CLOSE,M2);"}},T.prototype.EXPMA_S=function(){return{Name:"EXPMA_S",Description:"指数平均线-副图",IsMainIndex:!1,Args:[{Name:"M1",Value:12},{Name:"M2",Value:50}],Script:"EXP1:EMA(CLOSE,M1);\nEXP2:EMA(CLOSE,M2);"}},T.prototype.HMA=function(){return{Name:"HMA",Description:"高价平均线",IsMainIndex:!0,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"HMA1:MA(HIGH,M1);\nHMA2:MA(HIGH,M2);\nHMA3:MA(HIGH,M3);\nHMA4:MA(HIGH,M4);\nHMA5:MA(HIGH,M5);"}},T.prototype.LMA=function(){return{Name:"LMA",Description:"低价平均线",IsMainIndex:!0,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"LMA1:MA(LOW,M1);\nLMA2:MA(LOW,M2);\nLMA3:MA(LOW,M3);\nLMA4:MA(LOW,M4);\nLMA5:MA(LOW,M5);"}},T.prototype.VMA=function(){return{Name:"VMA",Description:"变异平均线",IsMainIndex:!0,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"VV:=(HIGH+OPEN+LOW+CLOSE)/4;\nVMA1:MA(VV,M1);\nVMA2:MA(VV,M2);\nVMA3:MA(VV,M3);\nVMA4:MA(VV,M4);\nVMA5:MA(VV,M5);"}},T.prototype.AMV=function(){return{Name:"AMV",Description:"成本价均线",IsMainIndex:!1,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"AMOV:=VOL*(OPEN+CLOSE)/2;\nAMV1:SUM(AMOV,M1)/SUM(VOL,M1);\nAMV2:SUM(AMOV,M2)/SUM(VOL,M2);\nAMV3:SUM(AMOV,M3)/SUM(VOL,M3);\nAMV4:SUM(AMOV,M4)/SUM(VOL,M4);"}},T.prototype.BBIBOLL=function(){return{Name:"BBIBOLL",Description:"多空布林线",IsMainIndex:!0,Args:[{Name:"N",Value:11},{Name:"M",Value:6}],Script:"CV:=CLOSE;\nBBIBOLL:(MA(CV,3)+MA(CV,6)+MA(CV,12)+MA(CV,24))/4;\nUPR:BBIBOLL+M*STD(BBIBOLL,N);\nDWN:BBIBOLL-M*STD(BBIBOLL,N);"}},T.prototype.ALLIGAT=function(){return{Name:"ALLIGAT",Description:"鳄鱼线",IsMainIndex:!0,Args:[],Script:"NN:=(H+L)/2;\n上唇:REF(MA(NN,5),3),COLOR40FF40;\n牙齿:REF(MA(NN,8),5),COLOR0000C0;\n下颚:REF(MA(NN,13),8),COLORFF4040;"}},T.prototype.ZX=function(){return{Name:"ZX",Description:"重心线",IsMainIndex:!1,Args:[],Script:"AV:0.01*AMOUNT/VOL;"}},T.prototype.XS=function(){return{Name:"XS",Description:"薛斯通道",IsMainIndex:!0,Args:[{Name:"N",Value:13}],Script:"VAR2:=CLOSE*VOL;\nVAR3:=EMA((EMA(VAR2,3)/EMA(VOL,3)+EMA(VAR2,6)/EMA(VOL,6)+EMA(VAR2,12)/EMA(VOL,12)+EMA(VAR2,24)/EMA(VOL,24))/4,N);\nSUP:1.06*VAR3;\nSDN:VAR3*0.94;\nVAR4:=EMA(CLOSE,9);\nLUP:EMA(VAR4*1.14,5);\nLDN:EMA(VAR4*0.86,5);"}},T.prototype.XS2=function(){return{Name:"XS2",Description:"薛斯通道II",IsMainIndex:!0,Args:[{Name:"N",Value:102},{Name:"M",Value:7}],Script:"AA:=MA((2*CLOSE+HIGH+LOW)/4,5); \n通道1:AA*N/100; \n通道2:AA*(200-N)/100; \nCC:=ABS((2*CLOSE+HIGH+LOW)/4-MA(CLOSE,20))/MA(CLOSE,20); \nDD:=DMA(CLOSE,CC); \n通道3:(1+M/100)*DD; \n通道4:(1-M/100)*DD;"}},T.prototype.SG_XDT=function(){return{Name:"SG-XDT",Description:"心电图(需下载日线)",IsMainIndex:!1,Args:[{Name:"P1",Value:5},{Name:"P2",Value:10}],Script:"QR:CLOSE/INDEXC*1000;\nMQR1:MA(QR,5);\nMQR2:MA(QR,10);"}},T.prototype.SG_SMX=function(){return{Name:"SG-SMX",Description:"生命线(需下载日线)",IsMainIndex:!1,Args:[{Name:"N",Value:50}],Script:"H1:=HHV(HIGH,N);\nL1:=LLV(LOW,N);\nH2:=HHV(INDEXH,N);\nL2:=LLV(INDEXL,N);\nZY:=CLOSE/INDEXC*2000;\nZY1:EMA(ZY,3);\nZY2:EMA(ZY,17);\nZY3:EMA(ZY,34);"}},T.prototype.SG_LB=function(){return{Name:"SG-LB",Description:"量比(需下载日线)",IsMainIndex:!1,Args:[],Script:"ZY2:=VOL/INDEXV*1000;\n量比:ZY2;\nMA5:MA(ZY2,5);\nMA10:MA(ZY2,10);"}},T.prototype.SG_PF=function(){return{Name:"SG-PF",Description:"强势股评分(需下载日线)",IsMainIndex:!1,Args:[],Script:"ZY1:=CLOSE/INDEXC*1000;\nA1:=IF(ZY1>HHV(ZY1,3),10,0);\nA2:=IF(ZY1>HHV(ZY1,5),15,0);\nA3:=IF(ZY1>HHV(ZY1,10),20,0);\nA4:=IF(ZY1>HHV(ZY1,2),10,0);\nA5:=COUNT(ZY1>REF(ZY1,1) ,9)*5;\n强势股评分:A1+A2+A3+A4+A5;"}},T.prototype.RAD=function(){return{Name:"RAD",Description:"威力雷达(需下载日线)",IsMainIndex:!1,Args:[{Name:"D",Value:3},{Name:"S",Value:30},{Name:"M",Value:30}],Script:"SM:=(OPEN+HIGH+CLOSE+LOW)/4;\nSMID:=MA(SM,D);\nIM:=(INDEXO+INDEXH+INDEXL+INDEXC)/4;\nIMID:=MA(IM,D);\nSI1:=(SMID-REF(SMID,1))/SMID;\nII:=(IMID-REF(IMID,1))/IMID;\nRADER1:SUM((SI1-II)*2,S)*1000;\nRADERMA:SMA(RADER1,M,1);"}},T.prototype.SHT=function(){return{Name:"SHT",Description:"龙系短线",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"VAR1:=MA((VOL-REF(VOL,1))/REF(VOL,1),5);\nVAR2:=(CLOSE-MA(CLOSE,24))/MA(CLOSE,24)*100;\nMY: VAR2*(1+VAR1);\nSHT: MY, COLORSTICK;\nSHTMA: MA(SHT,N);"}},T.prototype.ZLJC=function(){return{Name:"ZLJC",Description:"主力进出",IsMainIndex:!1,Args:[],Script:"VAR1:=(CLOSE+LOW+HIGH)/3; \nVAR2:=SUM(((VAR1-REF(LOW,1))-(HIGH-VAR1))*VOL/100000/(HIGH-LOW),0); \nVAR3:=EMA(VAR2,1); \nJCS:VAR3; \nJCM:MA(VAR3,12); \nJCL:MA(VAR3,26);"}},T.prototype.ZLMM=function(){return{Name:"ZLMM",Description:"主力买卖",IsMainIndex:!1,Args:[],Script:"LC :=REF(CLOSE,1);\nRSI2:=SMA(MAX(CLOSE-LC,0),12,1)/SMA(ABS(CLOSE-LC),12,1)*100;\nRSI3:=SMA(MAX(CLOSE-LC,0),18,1)/SMA(ABS(CLOSE-LC),18,1)*100;\nMMS:MA(3*RSI2-2*SMA(MAX(CLOSE-LC,0),16,1)/SMA(ABS(CLOSE-LC),16,1)*100,3);\nMMM:EMA(MMS,8);\nMML:MA(3*RSI3-2*SMA(MAX(CLOSE-LC,0),12,1)/SMA(ABS(CLOSE-LC),12,1)*100,5);"}},T.prototype.SLZT=function(){return{Name:"SLZT",Description:"神龙在天",IsMainIndex:!1,Args:[],Script:"白龙: MA(CLOSE,125);\n黄龙: 白龙+2*STD(CLOSE,170);\n紫龙: 白龙-2*STD(CLOSE,145);\n青龙: SAR(125,1,7), LINESTICK;\nVAR2:=HHV(HIGH,70);\nVAR3:=HHV(HIGH,20);\n红龙: VAR2*0.83;\n蓝龙: VAR3*0.91;"}},T.prototype.ADVOL=function(){return{Name:"ADVOL",Description:"龙系离散量",IsMainIndex:!1,Args:[],Script:"A:=SUM(((CLOSE-LOW)-(HIGH-CLOSE))*VOL/10000/(HIGH-LOW),0);\nADVOL:A;\nMA1:MA(A,30);\nMA2:MA(MA1,100);"}},T.prototype.CYC=function(){return{Name:"CYC",Description:"成本均线",IsMainIndex:!0,Args:[{Name:"P1",Value:5},{Name:"P2",Value:13},{Name:"P3",Value:34}],Script:"JJJ:=IF(DYNAINFO(8)>0.01,0.01*DYNAINFO(10)/DYNAINFO(8),DYNAINFO(3));\nDDD:=(DYNAINFO(5)<0.01 || DYNAINFO(6)<0.01);\nJJJT:=IF(DDD,1,(JJJ<(DYNAINFO(5)+0.01) && JJJ>(DYNAINFO(6)-0.01)));\nCYC1:IF(JJJT,0.01*EMA(AMOUNT,P1)/EMA(VOL,P1),EMA((HIGH+LOW+CLOSE)/3,P1));\nCYC2:IF(JJJT,0.01*EMA(AMOUNT,P2)/EMA(VOL,P2),EMA((HIGH+LOW+CLOSE)/3,P2));\nCYC3:IF(JJJT,0.01*EMA(AMOUNT,P3)/EMA(VOL,P3),EMA((HIGH+LOW+CLOSE)/3,P3));\nCYC4:IF(JJJT,DMA(AMOUNT/(100*VOL),100*VOL/FINANCE(7)),EMA((HIGH+LOW+CLOSE)/3,120));"}},T.prototype.CYS=function(){return{Name:"CYS",Description:"市场盈亏",IsMainIndex:!1,Args:[],Script:"CYC13:EMA(AMOUNT,13)/EMA(VOL,13);\nCYS:(CLOSE-CYC13)/CYC13*100;"}},T.prototype.CYQKL=function(){return{Name:"CYQKL",Description:"博弈K线长度",IsMainIndex:!1,Args:[],Script:"KL:100*(WINNER(CLOSE)-WINNER(OPEN));"}},T.prototype.SCR=function(){return{Name:"SCR",Description:"筹码集中度",IsMainIndex:!1,Args:[{Name:"P1",Value:90}],Script:"A:=P1+(100-P1)/2;\nB:=(100-P1)/2;\nCC:=COST(A);\nDD:=COST(B);\nSCR:(CC-DD)/(CC+DD)*100/2;"}},T.prototype.ASR=function(){return{Name:"ASR",Description:"浮筹比例",IsMainIndex:!1,Args:[],Script:"ASR:(WINNER(C*1.1)-WINNER(C*0.9))/WINNER(HHV(H,0))*100;"}},T.prototype.SAR=function(){return{Name:"SAR",Description:"抛物转向",IsMainIndex:!0,Args:[{Name:"P",Value:10},{Name:"STEP",Value:2},{Name:"MAXP",Value:20}],Script:"S:SAR(P,STEP,MAXP),UPDOWNDOT;"}},T.prototype.TJCJL=function(){return{Name:"太极成交量",Description:"太极成交量",IsMainIndex:!0,Args:[],Script:'总手:VOL,NODRAW;\nDRAWTEXT_FIX(ISLASTBAR,0,0,0,"说明: 红色柱为吸货量,绿色为出货量,黄色为天量,蓝色为地量"),COLORGRAY;\nZZ:=IF(REF(C,1)>REF(O,1) AND O>REF(C,1)*1.014 AND C<O*1.02,1,3);\nV5:=MA(V,5);\nV12:=MA(V,12);\nV34:=MA(V,34);\nC6:=MA(C,6);\nSTICKLINE(VOL,0,VOL,3,0),COLORLIGRAY;\nSTICKLINE(CROSS(C,C6) AND V>V5*1.2 AND V>V12*1.2 AND ZZ>2 AND C>H*0.975,0,VOL,3,0),COLORRED;\nSTICKLINE(CROSS(C6,C) AND V>V5*1.2 AND V>V12*1.2,0,VOL,3,0),COLORGREEN;\nSTICKLINE(VOL>MA(VOL,5)*2 AND V>V34*3 AND C<REF(C,1)*1.05,0,VOL,3,0),COLORYELLOW;\nSTICKLINE(VOL<MA(VOL,5)/2 AND V<V12/2,0,VOL,3,0),COLORBLUE;\nSTICKLINE(VOL>MA(VOL,5)*2 AND V>V34*3 AND C<REF(C,1)*1.05 AND CROSS(C,C6) AND V>V5*1.2 AND V>V12*1.2 AND ZZ>2 AND C>H*0.975,VOL*0.5,0,3,0),COLORRED;\nSTICKLINE(VOL>MA(VOL,5)*2 AND V>V34*3 AND C<REF(C,1)*1.05 AND CROSS(C6,C) AND V>V5*1.2 AND V>V12*1.2,VOL*0.5,0,3,0),COLORRED;'}},T.prototype.Dragon4_Main=function(){return{Name:"飞龙四式",Description:"飞龙四式",IsMainIndex:!0,Args:[{Name:"N1",Value:5},{Name:"N2",Value:10},{Name:"N3",Value:50},{Name:"N4",Value:60}],Script:"蜻蜓点水:=EMA(CLOSE,N1),COLORGRAY;\n魔界:=EMA(CLOSE,N2),COLORGREEN;\n水:=EMA(CLOSE,N3),COLORRED;\nDRAWKLINE(HIGH,OPEN,LOW,CLOSE);\n生命线:MA(CLOSE,N4),COLORBLUE,LINETHICK2;\nDRAWBAND(魔界,'RGB(186,225,250)',水,'RGB(253,194,124)');\nDRAWBAND(蜻蜓点水,'RGB(128,138,135)',魔界,'RGB(0,0,255)');"}},T.prototype.Dragon4_Fig=function(){return{Name:"飞龙四式",Description:"飞龙四式",IsMainIndex:!1,Args:[],Script:"倍:VOL>=REF(V,1)*1.90 AND C>REF(C,1),COLORYELLOW;\n低:VOL<REF(LLV(VOL,13),1),COLORGREEN;\n地:VOL<REF(LLV(VOL,100),1),COLORMAGENTA; \n平:=ABS(VOL-HHV(REF(VOL,1),5))/HHV(REF(VOL,1),5)<=0.03 OR ABS(VOL-REF(VOL,1))/REF(VOL,1)<=0.03,NODRAW,COLORWHITE;\n倍缩:VOL<=REF(V,1)*0.5,COLORFF8000;\n梯量:COUNT(V>REF(V,1),3)==3 AND COUNT(C>O,3)==3,COLORBROWN;\n缩量涨:COUNT(C>REF(C,1),2)==2 AND COUNT(V<REF(V,1),2)==2,COLORBLUE;\nSTICKLINE(C>=REF(C,1),V,0,2,0),COLORRED;\nSTICKLINE(C<REF(C,1),V,0,2,0),COLORGREEN;\nSTICKLINE(倍,0,V,2,0),COLORYELLOW;\nSTICKLINE(低,0,V,2,0),COLORGREEN;\nSTICKLINE(地,0,V,2,0),COLORLIMAGENTA;\nSTICKLINE(平,0,V,2,0),COLORGRAY;\nSTICKLINE(倍缩,0,V,2,0),COLORFF8000;\nSTICKLINE(梯量,0,V,2,0),COLORBROWN;\nSTICKLINE(缩量涨,0,V,2,0),COLORBLUE;"}},T.prototype.FundsAnalysis=function(){return{Name:"资金分析",Description:"资金分析",IsMainIndex:!1,Args:[{Name:"M",Value:55},{Name:"N",Value:34}],Script:"LC:=REF(CLOSE,1);\nRSI:=((SMA(MAX((CLOSE - LC),0),3,1) / SMA(ABS((CLOSE - LC)),3,1)) * 100);\nFF:=EMA(CLOSE,3);\nMA15:=EMA(CLOSE,21); DRAWTEXT(CROSS(85,RSI),75,'▼'),COLORGREEN;\nVAR1:=IF(YEAR>=2038 AND MONTH>=1,0,1);\nVAR2:=REF(LOW,1)*VAR1;\nVAR3:=SMA(ABS(LOW-VAR2),3,1)/SMA(MAX(LOW-VAR2,0),3,1)*100*VAR1;\nVAR4:=EMA(IF(CLOSE*1.3,VAR3*10,VAR3/10),3)*VAR1;\nVAR5:=LLV(LOW,30)*VAR1;\nVAR6:=HHV(VAR4,30)*VAR1;\nVAR7:=IF(MA(CLOSE,58),1,0)*VAR1;\nVAR8:=EMA(IF(LOW<=VAR5,(VAR4+VAR6*2)/2,0),3)/618*VAR7*VAR1;\n吸筹A:IF(VAR8>100,100,VAR8)*VAR1,COLORFB2F3B;\n{吸筹B}STICKLINE(吸筹A>-150,0,吸筹A,8,0),COLORFB2F3B;\n\n散户线: 100*(HHV(HIGH,M)-CLOSE)/(HHV(HIGH,M)-LLV(LOW,M)),COLORAA89BD,LINETHICK2;\nRSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:=SMA(RSV,3,1);\nD:=SMA(K,3,1);\nJ:=3*K-2*D;\n主力线:EMA(J,5),COLORF39800,LINETHICK2;\nDRAWICON(CROSS(主力线,散户线),主力线,1);\nDRAWICON(CROSS(散户线,主力线),主力线,2);"}},T.prototype.MarginProportion=function(){return{Name:"融资占比(%)",Description:"融资占比",IsMainIndex:!1,Condition:{Period:[g.KLINE_DAY_ID]},Args:[],Script:"占比:MARGIN(2);"}},T.prototype.Margin2=function(){return{Name:"两融余额",Description:"融资融券余额",IsMainIndex:!1,Condition:{Period:[g.KLINE_DAY_ID]},Args:[{Name:"N",Value:5}],Script:"T1:MARGIN(1);\n        T2:MA(MARGIN(1),N);"}},T.prototype.Margin3=function(){return{Name:"两融余额",Description:"融资融券余额",IsMainIndex:!1,Condition:{Period:[g.KLINE_DAY_ID]},Args:[{Name:"N",Value:5}],Script:"T1:=MARGIN(1);\n        T2:=MA(MARGIN(1),N);\n        STICKLINE(T1-T2>=0,0,T1-T2,50,T1>T2),COLORRED;\n        STICKLINE(T1-T2<0,T1-T2,0,50,T1>T2),COLORGREEN;"}},T.prototype.FXG_BSPoint=function(){return{Name:"操盘BS点",Description:"操盘BS点",IsMainIndex:!0,Args:[],Script:"MA5:MA(CLOSE,5);\n        MA13:MA(CLOSE,13);\n        MA21:MA(CLOSE,21);\n        MA34:MA(CLOSE,34);\n        {MA55:MA(CLOSE,55),COLOR0000FF;}\n        {MA120:=MA(CLOSE,120),COLORFFFF00;}\n        天使:=EMA(C,2),COLOR000000;\n        魔鬼:=EMA(SLOPE(C,21)*20+C,42),COLOR000000;\n        买:=CROSS(天使,魔鬼);\n        卖:=CROSS(魔鬼,天使);\n        DRAWICON(买,L*0.97,13);\n        DRAWICON(卖,H*1.03,14);\n        DRAWKLINE_IF(天使>=魔鬼,HIGH,CLOSE,LOW,OPEN),COLORRED;\n        DRAWKLINE_IF(天使<魔鬼,HIGH,CLOSE,LOW,OPEN),COLORBLUE;\n        DRAWKLINE_IF(CROSS(天使,魔鬼),HIGH,CLOSE,LOW,OPEN),COLORYELLOW;\n        DRAWKLINE_IF(CROSS(魔鬼,天使),HIGH,CLOSE,LOW,OPEN),COLORBLACK;"}},T.prototype.FXG_INDEX=function(){return{Name:"涨停多空线",Description:"涨停多空线",IsMainIndex:!1,Args:[],Script:"做多能量线: SMA((CLOSE-LLV(LOW,9))/(HHV(HIGH,9)-LLV(LOW,9))*100,5,1)-8,COLORRED,LINETHICK3;\n做空能量线: SMA((HHV(HIGH,36)-CLOSE)/(HHV(HIGH,36)-LLV(LOW,36))*100,2,1),COLORGREEN,LINETHICK3;\n20,POINTDOT,COLORF00FF0;\n50,POINTDOT,COLORGREEN;\n80,POINTDOT,COLORLIBLUE;"}},T.prototype.FXG_INDEX2=function(){return{Name:"涨停吸筹区",Description:"涨停吸筹区",IsMainIndex:!1,Args:[],Script:"VAR0:=EMA(HHV(HIGH,500),21); \nVAR1:=EMA(HHV(HIGH,250),21);\nVAR2:=EMA(HHV(HIGH,90),21); \nVAR3:=EMA(LLV(LOW,500),21); \nVAR4:=EMA(LLV(LOW,250),21); \nVAR5:=EMA(LLV(LOW,90),21);\n\nVAR6:=EMA((VAR3*0.96+VAR4*0.96+VAR5*0.96+VAR0*0.558+VAR1*0.558+VAR2*0.558)/6,21); \nVAR7:=EMA((VAR3*1.25+VAR4*1.23+VAR5*1.2+VAR0*0.55+VAR1*0.55+VAR2*0.65)/6,21); \nVAR8:=EMA((VAR3*1.3+VAR4*1.3+VAR5*1.3+VAR0*0.68+VAR1*0.68+VAR2*0.68)/6,21); \nVAR9:=EMA((VAR6*3+VAR7*2+VAR8)/6*1.738,21); \nVAR10:=REF(LOW,1); \nVAR11:=SMA(ABS(LOW-VAR10),3,1)/SMA(MAX(LOW-VAR10,0),3,1)*100; \nVAR12:=EMA(IFF(CLOSE*1.35<=VAR9,VAR11*10,VAR11/10),3); \nVAR13:=LLV(LOW,30); \nVAR14:=HHV(VAR12,30); \nVAR15:=IFF(MA(CLOSE,58),1,0); \nVAR16:=EMA(IFF(LOW<=VAR13,(VAR12+VAR14*2)/2,0),3)/618*VAR15;\n\n资金入场:IFF(VAR16>0,VAR16,0),LINETHICK,LINETHICK2, COLORFF0000; \n\nA1:IFF(资金入场>0,资金入场*1.2,0),STICK,LINETHICK5, COLORFF0000;\nA2:IFF(资金入场>0,资金入场*0.8,0),STICK,LINETHICK5, COLORFF6600;\nA3:IFF(资金入场>0,资金入场*0.6,0),STICK,LINETHICK5, COLORFF9900;\nA4:IFF(资金入场>0,资金入场*0.4,0) ,STICK,LINETHICK5,COLORFFCC00;\nA5:IFF(资金入场>0,资金入场*0.2,0) ,STICK,LINETHICK5,COLORFFFF00;"}},T.prototype.FXG_INDEX3=function(){return{Name:"量能黄金点",Description:"量能黄金点",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"A:=IFF((CLOSE>126.32),VOL,VOL); \n主力:=MA(A,4),COLORRED;\n游资:=MA(A,8),COLORYELLOW;\n大户:=MA(A,16),COLORF0F000;\n散户:=MA(A,32),COLOR00FF00;\n主比:=ABS(((主力)/(主力 + 游资 + 大户 + 散户))*(100)),LINESTICK,COLORRED;\n游比:=ABS(((游资)/(主力 + 游资 + 大户 + 散户))*(100)),LINESTICK,COLORYELLOW;\n大比:=ABS(((大户)/(主力 + 游资 + 大户 + 散户))*(100)),LINESTICK,COLORF0F000;\n散比:=ABS(((散户)/(主力 + 游资 + 大户 + 散户))*(100)),LINESTICK,COLOR00FF00;\n警戒线:MA(A,180),COLORFF66FF;\nSTICKLINE((主力 > 0),0,主力,2.5,0),COLOR1020BB;\nSTICKLINE((主力 > 0),0,主力,0.7,0),COLORRED;\nSTICKLINE((游资 > 0),0,游资,2.5,0),COLOR009CFF;\nSTICKLINE((游资 > 0),0,游资,0.7,0),COLORYELLOW;\nSTICKLINE((大户 > 0),0,大户,2.5,0),COLORFF8800;\nSTICKLINE((大户 > 0),0,大户,0.7,0),COLORLIBLUE;\nSTICKLINE((散户 > 0),0,散户,2.5,0),COLOR00CA00;\nSTICKLINE((散户 > 0),0,散户,0.7,0),COLORGREEN;"}},T.prototype.NewsNegative=function(){return{Name:"负面新闻",Description:"负面新闻统计",IsMainIndex:!1,FloatPrecision:0,Args:[{Name:"N",Value:5},{Name:"N2",Value:10}],Script:"负面:NEWS(1);\nMA1:MA(负面,N);\nMA2:MA(负面,N2);"}},T.prototype.UpDownAnalyze=function(){return{Name:"涨跌趋势",Description:"涨跌趋势",IsMainIndex:!1,FloatPrecision:0,Condition:{Period:[g.MINUTE_ID,g.MULTIDAY_MINUTE_ID,g.KLINE_DAY_ID]},Args:[],Script:"上涨家数:UPCOUNT('CNA.CI'),COLORRED;\n下跌家数:DOWNCOUNT('CNA.CI'),COLORGREEN;"}},T.prototype.HK2SHSZ=function(){return{Name:"北上资金",Description:"北上资金",IsMainIndex:!1,FloatPrecision:0,Condition:{Period:[g.MINUTE_ID,g.MULTIDAY_MINUTE_ID,g.KLINE_DAY_ID]},Args:[],Script:"净流入:HK2SHSZ(1),COLORSTICK;"}},T.prototype.ShareHolder=function(){return{Name:"股东人数",Description:"股东人数",IsMainIndex:!1,FloatPrecision:0,Condition:{Period:[g.KLINE_DAY_ID,g.KLINE_MONTH_ID,g.KLINE_WEEK_ID,g.KLINE_YEAR_ID]},Args:[],Script:"人数:FINANCE(100);"}},T.prototype.VOLRate=function(){return{Name:"量比",Description:"量比",IsMainIndex:!1,Condition:{Period:[g.MINUTE_ID,g.MULTIDAY_MINUTE_ID]},Args:[],Script:"LIANGBI:VOLR;"}},T.prototype.COLOR_KSTAR1=function(){return{Name:"十字星",Description:"十字星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:CLOSE==OPEN&&HIGH>LOW;"}},T.prototype.COLOR_KSTAR2=function(){return{Name:"早晨之星",Description:"早晨之星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:(REF(CLOSE,2)/REF(OPEN,2)<0.95) && (REF(OPEN,1) < REF(CLOSE,2)) && (ABS(REF(OPEN,1)-REF(CLOSE,1))/REF(CLOSE,1)<0.03) && CLOSE/OPEN>1.05 && CLOSE>REF(CLOSE,2);"}},T.prototype.COLOR_KSTAR3=function(){return{Name:"黄昏之星",Description:"黄昏之星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:REF(CLOSE,2)/REF(OPEN,2)>1.05 && REF(OPEN,1)>REF(CLOSE,2) && ABS(REF(OPEN,1)-REF(CLOSE,1))/REF(CLOSE,1)<0.03 && CLOSE/OPEN<0.95 && CLOSE<REF(CLOSE,2);"}},T.prototype.COLOR_SHI1=function(){return{Name:"长十字",Description:"长十字",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:CLOSE==OPEN&&HIGH/LOW>1.03;"}},T.prototype.COLOR_K220=function(){return{Name:"身怀六甲",Description:"身怀六甲",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:ABS(REF(CLOSE,1)-REF(OPEN,1))/REF(CLOSE,1)>0.04&&\n            ABS(CLOSE-OPEN)/CLOSE<0.005&&\n            MAX(CLOSE,OPEN)<MAX(REF(CLOSE,1),REF(OPEN,1))&&\n            MIN(CLOSE,OPEN)>MIN(REF(CLOSE,1),REF(OPEN,1));"}},T.prototype.COLOR_K300=function(){return{Name:"三个白武士",Description:"三个白武士",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:UPNDAY(CLOSE,3)&&NDAY(CLOSE,OPEN,3);"}},T.prototype.COLOR_K310=function(){return{Name:"三只乌鸦",Description:"三只乌鸦",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:DOWNNDAY(CLOSE,3)&&NDAY(OPEN,CLOSE,3);"}},T.prototype.COLOR_K380=function(){return{Name:"光头阳线",Description:"光头阳线",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:HIGH==CLOSE&&HIGH>LOW;"}},T.prototype.COLOR_K390=function(){return{Name:"光脚阴线",Description:"光脚阴线",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:LOW==CLOSE&&HIGH>LOW;"}},T.prototype.COLOR_K134=function(){return{Name:"垂死十字",Description:"垂死十字",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:CLOSE==OPEN&&CLOSE==LOW&&CLOSE<HIGH;"}},T.prototype.COLOR_K140=function(){return{Name:"早晨十字星",Description:"早晨十字星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:REF(CLOSE,2)/REF(OPEN,2)<0.95&&\nREF(OPEN,1)<REF(CLOSE,2)&&\nREF(OPEN,1)==REF(CLOSE,1)&&\nCLOSE/OPEN>1.05&&CLOSE>REF(CLOSE,2);"}},T.prototype.COLOR_K150=function(){return{Name:"黄昏十字星",Description:"黄昏十字星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:REF(CLOSE,2)/REF(OPEN,2)>1.05&&\nREF(OPEN,1)>REF(CLOSE,2)&&\nREF(OPEN,1)=REF(CLOSE,1)&&\nCLOSE/OPEN<0.95&&CLOSE<REF(CLOSE,2);"}},T.prototype.COLOR_K160=function(){return{Name:"射击之星",Description:"射击之星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:MIN(OPEN,CLOSE)==LOW&&\nHIGH-LOW>3*(MAX(OPEN,CLOSE)-LOW)&&\nCLOSE>MA(CLOSE,5);"}},T.prototype.COLOR_K165=function(){return{Name:"倒转锤头",Description:"倒转锤头",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:MIN(OPEN,CLOSE)==LOW&&\nHIGH-LOW>3*(MAX(OPEN,CLOSE)-LOW)&&\nCLOSE<MA(CLOSE,5);"}},T.prototype.COLOR_K170=function(){return{Name:"锤头",Description:"锤头",IsMainIndex:!0,InstructionType:2,Script:"OUT:HIGH==MAX(OPEN,CLOSE)&&\nHIGH-LOW>3*(HIGH-MIN(OPEN,CLOSE))&&\nCLOSE<MA(CLOSE,5);"}},T.prototype.COLOR_K180=function(){return{Name:"吊颈",Description:"吊颈",IsMainIndex:!0,InstructionType:2,Script:"OUT:HIGH==MAX(OPEN,CLOSE)&&\nHIGH-LOW>3*(HIGH-MIN(OPEN,CLOSE))&&\nCLOSE>MA(CLOSE,5);"}},T.prototype.COLOR_K190=function(){return{Name:"穿头破脚",Description:"穿头破脚",IsMainIndex:!0,InstructionType:2,Script:"OUT:(REF(CLOSE,1)/REF(OPEN,1)>1.03&&\nCLOSE/OPEN<0.96&&\nCLOSE<REF(OPEN,1)&&OPEN>REF(CLOSE,1))||\n(REF(CLOSE,1)/REF(OPEN,1)<0.97&&\nCLOSE/OPEN>1.04&&\nCLOSE>REF(OPEN,1)&&OPEN<REF(CLOSE,1));"}},T.prototype.COLOR_SWORD=function(){return{Name:"剑",Description:"剑",IsMainIndex:!0,InstructionType:2,Script:"AA:=VOL>REF(VOL,1)||VOL>(CAPITAL*0.1);\nBB:=OPEN>=(REF(HIGH,1))&&REF(HIGH,1)>(REF(HIGH,2)*1.06);\nCC:=CLOSE>(REF(CLOSE,1))-(REF(CLOSE,1)*0.01);\nDD:=CLOSE<(HIGH*0.965) && HIGH>(OPEN*1.05);\nEE:=LOW<OPEN && LOW<CLOSE&&HIGH>(REF(CLOSE,1)*1.06);\nFF:=(HIGH-(MAX(OPEN,CLOSE)))/2>(MIN(OPEN,CLOSE))-LOW;\nGG:=(ABS(OPEN-CLOSE))/2<(MIN(OPEN,CLOSE)-LOW);\nSWORDO:AA&&BB&&CC&&DD&&EE&&FF&&GG;"}},T.prototype.COLOR_CSFR=function(){return{Name:"出水芙蓉",Description:"出水芙蓉",IsMainIndex:!0,InstructionType:2,Script:"A:=CLOSE>OPEN;\nB:=A&&CLOSE>MA(CLOSE,S)&&CLOSE>MA(CLOSE,M)&&CLOSE>MA(CLOSE,LL);\nCC:=B&&OPEN<MA(CLOSE,M)&&OPEN<MA(CLOSE,LL);\nCSFRO:CC&&(CLOSE-OPEN)>0.0618*CLOSE;"}},T.prototype.COLOR_WYGD=function(){return{Name:"乌云盖顶",Description:"乌云盖顶",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,1)/REF(OPEN,1)>1.03 AND \nCLOSE/OPEN<0.97 AND \nOPEN>REF(CLOSE,1) AND CLOSE<REF(CLOSE,1), 3);"}},T.prototype.COLOR_SGCJ=function(){return{Name:"曙光初现",Description:"曙光初现",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,1)/REF(OPEN,1)<0.97 AND \nCLOSE/OPEN>1.03 AND \nOPEN<REF(CLOSE,1) AND CLOSE>REF(CLOSE,1), 3);"}},T.prototype.COLOR_SZTAI=function(){return{Name:"十字胎",Description:"十字胎",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( ABS(REF(CLOSE,1)-REF(OPEN,1))/REF(CLOSE,1) > 0.04 AND \nCLOSE==OPEN AND CLOSE < MAX(REF(CLOSE,1),REF(OPEN,1)) AND \nCLOSE > MIN(REF(CLOSE,1),REF(OPEN,1)), 2);"}},T.prototype.COLOR_PINGDING=function(){return{Name:"平顶",Description:"平顶",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET(ABS(HIGH-REF(HIGH,1))/HIGH<0.001,2);"}},T.prototype.COLOR_PINGDI=function(){return{Name:"平底",Description:"平底",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET((ABS(LOW-REF(LOW,1))/LOW<0.001 AND \nABS(REF(LOW,1)-REF(LOW,2))/REF(LOW,1)<=0.001),2);"}},T.prototype.COLOR_DAYANZHU=function(){return{Name:"大阳烛",Description:"大阳烛",IsMainIndex:!0,InstructionType:2,Script:"VAR1:CLOSE/OPEN>1.05 AND HIGH/LOW < CLOSE/OPEN+0.018;"}},T.prototype.COLOR_DAYINGZHU=function(){return{Name:"大阴烛",Description:"大阴烛",IsMainIndex:!0,InstructionType:2,Script:"VAR1:OPEN/CLOSE > 1.05 AND HIGH/LOW < OPEN/CLOSE+0.018;"}},T.prototype.COLOR_HYFG=function(){return{Name:"好友反攻",Description:"好友反攻",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( (REF(CLOSE,1)<REF(OPEN,1) AND \nCLOSE>OPEN AND ABS(CLOSE-REF(CLOSE,1))/CLOSE<0.002),2);"}},T.prototype.COLOR_TKQK=function(){return{Name:"跳空缺口",Description:"跳空缺口",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( HIGH<REF(LOW,1) OR LOW>REF(HIGH,1),2);"}},T.prototype.COLOR_SFWY=function(){return{Name:"双飞乌鸦",Description:"双飞乌鸦",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( REF(CLOSE,1)<REF(OPEN,1) AND CLOSE<OPEN AND CLOSE/OPEN<0.98,1);"}},T.prototype.COLOR_SSSBQ=function(){return{Name:"上升三部曲",Description:"上升三部曲",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,4)/REF(OPEN,4)>1.03 AND \nREF(CLOSE,3)<REF(OPEN,3) AND \nREF(CLOSE,2)<REF(OPEN,2) AND \nREF(CLOSE,1)<REF(OPEN,1) AND \nREF(LOW,4)<REF(LOW,3) AND \nREF(LOW,4)<REF(LOW,2) AND \nREF(LOW,4)<REF(LOW,1) AND \nREF(HIGH,4)>REF(HIGH,3) AND \nREF(HIGH,4)>REF(HIGH,2) AND \nREF(HIGH,4)>REF(HIGH,1) AND \nCLOSE/OPEN>1.03 AND \nCLOSE>REF(CLOSE,4), 5);"}},T.prototype.COLOR_XDSBQ=function(){return{Name:"下跌三部曲",Description:"下跌三部曲",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,4)/REF(OPEN,4)<0.97 AND \nREF(CLOSE,3)>REF(OPEN,3) AND \nREF(CLOSE,2)>REF(OPEN,2) AND \nREF(CLOSE,1)>REF(OPEN,1) AND \nREF(LOW,4)<REF(LOW,3) AND \nREF(LOW,4)<REF(LOW,2) AND \nREF(LOW,4)<REF(LOW,1) AND \nREF(HIGH,4)>REF(HIGH,3) AND \nREF(HIGH,4)>REF(HIGH,2) AND \nREF(HIGH,4)>REF(HIGH,1) AND \nCLOSE/OPEN<0.97 AND \nCLOSE<REF(CLOSE,4), 5);"}},T.prototype.COLOR_CHXY=function(){return{Name:"长下影",Description:"长下影",IsMainIndex:!0,InstructionType:2,Script:"VAR2:(MIN(CLOSE,OPEN)-LOW)/(HIGH-LOW)>0.667;"}},T.prototype.COLOR_CHSY=function(){return{Name:"长上影",Description:"长上影",IsMainIndex:!0,InstructionType:2,Script:"VAR2:(HIGH-MAX(CLOSE,OPEN))/(HIGH-LOW)>0.667,COLORBLUE;"}},T.prototype.COLOR_FENLI=function(){return{Name:"分离",Description:"分离",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( OPEN==REF(OPEN,1) AND (CLOSE-OPEN)*(REF(CLOSE,1)-REF(OPEN,1))<0,2);"}},T.prototype.TRADE_BIAS=function(){return{Name:"BIAS",Description:"乖离率专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:12},{Name:"LL",Value:6},{Name:"LH",Value:6}],Script:"BIAS:=(CLOSE-MA(CLOSE,N))/MA(CLOSE,N)*100;\nENTERLONG:CROSS(-LL,BIAS);\nEXITLONG:CROSS(BIAS,LH);"}},T.prototype.TRADE_CCI=function(){return{Name:"CCI",Description:"CCI专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:14}],Script:"TYP:=(HIGH+LOW+CLOSE)/3;\nCCI:=(TYP-MA(TYP,N))/(0.015*AVEDEV(TYP,N));\nINDEX:=CCI;\nENTERLONG:CROSS(INDEX,-100);\nEXITLONG:CROSS(100,INDEX);"}},T.prototype.TRADE_DMI=function(){return{Name:"DMI",Description:"趋向专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:14}],Script:"MTR:=SUM(MAX(MAX(HIGH-LOW,ABS(HIGH-REF(CLOSE,1))),ABS(LOW-REF(CLOSE,1))),N);\nHD :=HIGH-REF(HIGH,1);\nLD :=REF(LOW,1)-LOW;\nPDM:=SUM(IF(HD>0&&HD>LD,HD,0),N);\nMDM:=SUM(IF(LD>0&&LD>HD,LD,0),N);\nPDI:=PDM*100/MTR;\nMDI:=MDM*100/MTR;\nENTERLONG:CROSS(PDI,MDI);\nEXITLONG:CROSS(MDI,PDI);"}},T.prototype.TRADE_KD=function(){return{Name:"KD",Description:"KD指标专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"WRSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nWK:=SMA(WRSV,M1,1);\nD:=SMA(WK,M2,1);\nENTERLONG:CROSS(WK,D)&&WK<20;\nEXITLONG:CROSS(D,WK)&&WK>80;"}},T.prototype.TRADE_BOLL=function(){return{Name:"BOLL",Description:"布林带专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:20}],Script:"MID :=MA(CLOSE,N);\nUPPER:=MID+2*STD(CLOSE,N);\nLOWER:=MID-2*STD(CLOSE,N);\nENTERLONG:CROSS(CLOSE,LOWER);\nEXITLONG:CROSS(CLOSE,UPPER);"}},T.prototype.TRADE_KDJ=function(){return{Name:"KDJ",Description:"KDJ专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3}],Script:"RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:=SMA(RSV,M1,1);\nD:=SMA(K,M1,1);\nJ:=3*K-2*D;\nENTERLONG:CROSS(J,0);\nEXITLONG:CROSS(100,J);"}},T.prototype.TRADE_MA=function(){return{Name:"MA",Description:"均线专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"SHORT",Value:5},{Name:"LONG",Value:20}],Script:"ENTERLONG:CROSS(MA(CLOSE,SHORT),MA(CLOSE,LONG));\nEXITLONG:CROSS(MA(CLOSE,LONG),MA(CLOSE,SHORT));"}},T.prototype.TRADE_MACD=function(){return{Name:"MACD",Description:"MACD专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"LONG",Value:26},{Name:"SHORT",Value:12},{Name:"M",Value:9}],Script:"DIFF:=EMA(CLOSE,SHORT) - EMA(CLOSE,LONG);\nDEA  := EMA(DIFF,M);\nMACD := 2*(DIFF-DEA);\nENTERLONG:CROSS(MACD,0);\nEXITLONG:CROSS(0,MACD);"}},T.prototype.TRADE_MTM=function(){return{Name:"MTM",Description:"动力指标专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:6}],Script:"WMTM:=C-REF(C,N);\nENTERLONG:CROSS(WMTM,0);\nEXITLONG:CROSS(0,WMTM);"}},T.prototype.TRADE_PSY=function(){return{Name:"PSY",Description:"PSY心理线专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:12},{Name:"LL",Value:10},{Name:"LH",Value:85}],Script:"MYPSY:=COUNT(CLOSE>REF(CLOSE,1),N)/N*100;\nENTERLONG:CROSS(LL,MYPSY);\nEXITLONG:CROSS(MYPSY,LH);"}},T.prototype.TRADE_ROC=function(){return{Name:"ROC",Description:"变动速率专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"WROC:=MA(100*(CLOSE-REF(CLOSE,N))/REF(CLOSE,N),M);\nENTERLONG:CROSS(WROC,0);\nEXITLONG:CROSS(0,WROC);"}},T.prototype.TRADE_RSI=function(){return{Name:"RSI",Description:"相对强弱专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:6},{Name:"LL",Value:20},{Name:"LH",Value:80}],Script:"LC:=REF(CLOSE,1);\nWRSI:=SMA(MAX(CLOSE-LC,0),N,1)/SMA(ABS(CLOSE-LC),N,1)*100;\nENTERLONG:CROSS(WRSI,LL);\nEXITLONG:CROSS(LH,WRSI);"}},T.prototype.TRADE_VR=function(){return{Name:"VR",Description:"VR容量比率专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:26},{Name:"LL",Value:70},{Name:"LH",Value:250}],Script:"WVR := SUM((IF(CLOSE>OPEN,VOL,0)+IF(CLOSE=OPEN,VOL/2,0)),N)/SUM((IF(CLOSE<OPEN,VOL,0)+IF(CLOSE=OPEN,VOL/2,0)),N)*100;\nENTERLONG:CROSS(LL,WVR);\nEXITLONG:CROSS(WVR,LH);"}},T.prototype.TRADE_DPSJ=function(){return{Name:"DPSJ",Description:"大盘随机专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N1",Value:18},{Name:"N2",Value:12}],Script:"RSV:=(INDEXC-LLV(INDEXL,N1))/(HHV(INDEXH,N1)-LLV(INDEXL,N1))*100;\nK:=SMA(RSV,N2,1);\nHSL:VOL/100/(FINANCE(7));\nENTERLONG: CROSS(K,20);\nEXITLONG: (CROSS(HSL,5) OR CROSS(K,80));"}},T.prototype.Zealink_Index1=function(){return{Name:"资金吸筹",Description:"资金吸筹",IsMainIndex:!1,Args:[],Script:"VAR1:=REF((LOW+OPEN+CLOSE+HIGH)/4,1);  \nVAR2:= SMA(ABS(LOW - VAR1), 13, 1) / SMA(MAX(LOW - VAR1, 0), 10, 1);\nVAR3:= EMA(VAR2, 10);\nVAR4:= LLV(LOW, 33);\nVAR5:= EMA(IF(LOW <= VAR4, VAR3, 0), 3) * 0.2;\n主力进场: IF(VAR5 > REF(VAR5, 1), VAR5,0), COLORRED, NODRAW;\n洗盘: IF(VAR5 < REF(VAR5, 1),  VAR5,0), COLORYELLOW, NODRAW;\nSTICKLINE(VAR5> REF(VAR5, 1),0, VAR5, 20, 0), COLORRED;\nSTICKLINE(VAR5 < REF(VAR5, 1), 0, VAR5, 20, 0), COLORYELLOW;"}},T.prototype.Zealink_Index2=function(){return{Name:"牛熊区间",Description:"牛熊区间",IsMainIndex:!1,YSpecificMaxMin:{Max:100,Min:1,Count:4},YSplitScale:[1,50,100],Args:[],Script:"短高H:=(20*H+19*REF(H,1)+18*REF(H,2)+17*REF(H,3)+16*REF(H,4)+15*REF(H,5)+14*REF(H,6)\n+ 13 * REF(H, 7) + 12 * REF(H, 8) + 11 * REF(H, 9) + 10 * REF(H, 10) + 9 * REF(H, 11) + 8 * REF(H, 12)\n+ 7 * REF(H, 13) + 6 * REF(H, 14) + 5 * REF(H, 15) + 4 * REF(H, 16) + 3 * REF(H, 17) + 2 * REF(H, 18) +\nREF(H, 20))/ 210, COLORBLUE, LINETHICK1;\n短低L:= (20 * L + 19 * REF(L, 1) + 18 * REF(L, 2) + 17 * REF(L, 3) + 16 * REF(L, 4) + 15 * REF(L, 5) + 14 * REF(L, 6)\n+ 13 * REF(L, 7) + 12 * REF(L, 8) + 11 * REF(L, 9) + 10 * REF(L, 10) + 9 * REF(L, 11) + 8 * REF(L, 12)\n+ 7 * REF(L, 13) + 6 * REF(L, 14) + 5 * REF(L, 15) + 4 * REF(L, 16) + 3 * REF(L, 17) + 2 * REF(L, 18) +\nREF(L, 20)) / 210, COLORBLUE, LINETHICK1;\nD90H:= EMA(短高H, 90), COLORRED, LINETHICK1;\nD90L:= EMA(短低L, 90), COLORRED, LINETHICK1;\nD90差:= D90H - D90L;\nD90顶:= D90H + D90差 * 2, COLORRED, LINETHICK1;\nD90底:= D90L - D90差 * 2, COLORRED, LINETHICK1;\n高0:= (EMA(EMA(H, 25), 25) - EMA(EMA(L, 25), 25)) * 1 + EMA(EMA(H, 25), 25), LINETHICK1, COLORWHITE;\n低0:= EMA(EMA(L, 25), 25) - (EMA(EMA(H, 25), 25) - EMA(EMA(L, 25), 25)) * 1, LINETHICK1, COLORWHITE;\n多头定位:= 低0 >= D90底 AND 高0 >= D90顶;\n空头定位:= 高0 <= D90顶 AND 低0 <= D90底;\n震荡定位:= 低0 >= D90底 AND 高0 <= D90顶;\n牛市: IF(多头定位 == 1, 100, 1), COLORRED, NODRAW;\n熊市: IF(空头定位 == 1, 100, 1), COLORGREEN, NODRAW;\n震荡: IF(震荡定位 == 1, 100, 1), COLORGRAY, NODRAW;\nSTICKLINE(多头定位 == 1, 100, 1, 100, 0), COLORRED;\nSTICKLINE(空头定位 == 1, 100, 1, 100, 0), COLORGREEN;\nSTICKLINE(震荡定位 == 1, 100, 1, 100, 0), COLORGRAY;"}},T.prototype.Zealink_Index3=function(){return{Name:"持仓信号",Description:"持仓信号",IsMainIndex:!0,Args:[],Script:'买线:=EMA(C,2);\n卖线:=EMA(SLOPE(C,30)*5+C,20); \nBU:=CROSS(买线,卖线);\nSEL:=CROSS(卖线,买线);\n\nSTICKLINE(买线>=卖线 AND CLOSE>OPEN,LOW,HIGH,0,1),COLORRED;\nSTICKLINE(买线>=卖线 AND CLOSE<OPEN,LOW,HIGH,0,1),COLORRED;\nSTICKLINE(买线>=卖线 AND CLOSE>OPEN,CLOSE,OPEN,50,1),COLORRED;\nSTICKLINE(买线>=卖线 AND CLOSE<OPEN,CLOSE,OPEN,50,0),COLORRED;\nSTICKLINE(买线<卖线 AND CLOSE<OPEN,LOW,HIGH,0,1),COLORGREEN;\nSTICKLINE(买线<卖线 AND CLOSE>OPEN,LOW,HIGH,0,1),COLORGREEN;\nSTICKLINE(买线<卖线 AND CLOSE<OPEN,CLOSE,OPEN,50,0),COLORGREEN;\nSTICKLINE(买线<卖线 AND CLOSE>OPEN,CLOSE,OPEN,50,1),COLORGREEN;\n\nHHJSJDA:=(3*CLOSE+OPEN+LOW+HIGH)/6;\nHHJSJDB:(19*HHJSJDA+19*REF(HHJSJDA,1)+18*REF(HHJSJDA,2)+17*REF(HHJSJDA,3)+16*REF(HHJSJDA,4)+15*REF(HHJSJDA,5)+14*REF(HHJSJDA,6)\n+13*REF(HHJSJDA,7)+12*REF(HHJSJDA,8)+11*REF(HHJSJDA,9)+10*REF(HHJSJDA,10)+9*REF(HHJSJDA,11)+8*REF(HHJSJDA,12)+7*REF(HHJSJDA,13)+6*REF(HHJSJDA,14)+5*REF(HHJSJDA,15)+4*REF(HHJSJDA,16)+3*REF(HHJSJDA,17)+2*REF\n(HHJSJDA,20)+REF(HHJSJDA,19))/210,COLORYELLOW;\nHHJSJDC:MA(HHJSJDB,5),COLORRED;\n\nSVAR11:=HHV(HIGH,34);\nSVAR14:=CLOSE-REF(CLOSE,1);\nSVAR15:=MAX(SVAR14,0);\nSVAR16:=ABS(SVAR14);\nSVAR17:=SMA(SVAR15,7,1)/SMA(SVAR16,7,1)*100;\nSVAR18:=SMA(SVAR15,13,1)/SMA(SVAR16,13,1)*100;\nSVAR19:=BARSCOUNT(CLOSE);\nSVAR20:=SMA(MAX(SVAR14,0),6,1)/SMA(ABS(SVAR14),6,1)*100;\nSVAR21:=(-200)*(HHV(HIGH,60)-CLOSE)/(HHV(HIGH,60)-LLV(LOW,60))+100;\nSVAR1A:=(CLOSE-LLV(LOW,15))/(HHV(HIGH,15)-LLV(LOW,15))*100;\nSVAR1B:=SMA((SMA(SVAR1A,4,1)-50)*2,3,1);\nSVAR1C:=(INDEXC-LLV(INDEXL,14))/(HHV(INDEXH,14)-LLV(INDEXL,14))*100;\nSVAR1D:=SMA(SVAR1C,4,1);\nSVAR1E:=SMA(SVAR1D,3,1);\nSVAR1F:=(HHV(HIGH,30)-CLOSE)/CLOSE*100;\nSVAR22:=SVAR20<=25 AND SVAR21<-95 AND SVAR1F>20 AND SVAR1B<-30 AND SVAR1E<30 AND SVAR11-CLOSE>=-0.25 AND SVAR17<22 AND SVAR18<28 AND SVAR19>50;\nBUY3:=CROSS(SVAR22,0.5) AND COUNT(SVAR22==1,10)==1;\n\nSVARF:=LOW*0.9;\nSVAR10X:=100-3*SMA((OPEN-LLV(LOW,75))/(HHV(HIGH,75)-LLV(LOW,75))*100,20,1)+2*SMA(SMA((OPEN-LLV(LOW,75))/(HHV(HIGH,75)-LLV(LOW,75))*100,20,1),15,1);\nSVAR11X:=SVARF<REF(SVAR10X,1) AND VOL>REF(VOL,1) AND CLOSE>REF(CLOSE,1);\nBUY2:=SVAR11X AND COUNT(SVAR11X,30)==1;\n\nVAR1:=(CLOSE+HIGH+LOW+OPEN)/4;\nVAR2:=SUMBARS(VOL,CAPITAL);\nVAR3:=HHV(VAR1,VAR2);\nVAR4:=LLV(VAR1,VAR2);\nVAR5:=(2*VAR1-VAR4-REF(VAR4,1))/(VAR3-VAR4);\nVAR6:=(VAR1-VAR4)/(VAR3-VAR4);\nVAR7:=IF(VAR1<=VAR4,VAR5*60,VAR6*60);\nVAR8:=600*(EMA(CLOSE,3)-EMA(LOW,30))/EMA(LOW,30);\nVAR9:=EMA(VAR8,7);\nVARC:=HHV(HIGH,9)-LLV(LOW,9);\nVARD:=HHV(HIGH,9)-CLOSE;\nVARE:=CLOSE-LLV(LOW,9);\nVARF:=VARD/VARC*100-70;\nVAR10:=(CLOSE-LLV(LOW,60))/(HHV(HIGH,60)-LLV(LOW,60))*100;\nVAR11:=(2*CLOSE+HIGH+LOW)/4;\nVAR12:=SMA(VARE/VARC*100,3,1);\nVAR13:=LLV(LOW,34);\nVAR14:=SMA(VAR12,3,1)-SMA(VARF,9,1);\nVAR15:=IF(VAR14>100,VAR14-100,0);\nVAR16:=HHV(HIGH,34);\nVAR17:=EMA((VAR11-VAR13)/(VAR16-VAR13)*100,8);\nVAR18:=EMA(VAR17,5);\nBUY:=STICKLINE(VAR17-VAR18>0,VAR17,VAR18,8,1),COLORRED;\nSELL:=STICKLINE(VAR17-VAR18<0,VAR17,VAR18,8,1),COLORGREEN;\nBUY1:=VAR17>VAR18 AND REF(VAR17,1)<REF(VAR18,1);\nSELL1:=VAR17<VAR18 AND REF(VAR17,1)>REF(VAR18,1);\n\n短高H:=(20*H+19*REF(H,1)+18*REF(H,2)+17*REF(H,3)+16*REF(H,4)+15*REF(H,5)+14*REF(H,6)\n+13*REF(H,7)+12*REF(H,8)+11*REF(H,9)+10*REF(H,10)+9*REF(H,11)+8*REF(H,12)\n+7*REF(H,13)+6*REF(H,14)+5*REF(H,15)+4*REF(H,16)+3*REF(H,17)+2*REF(H,18)+\nREF(H,20))/210,COLORBLUE,LINETHICK1;\n短低L:=(20*L+19*REF(L,1)+18*REF(L,2)+17*REF(L,3)+16*REF(L,4)+15*REF(L,5)+14*REF(L,6)\n+13*REF(L,7)+12*REF(L,8)+11*REF(L,9)+10*REF(L,10)+9*REF(L,11)+8*REF(L,12)\n+7*REF(L,13)+6*REF(L,14)+5*REF(L,15)+4*REF(L,16)+3*REF(L,17)+2*REF(L,18)+\nREF(L,20))/210,COLORBLUE,LINETHICK1;\nD90H:=EMA(短高H,90),COLORRED,LINETHICK1;\nD90L:=EMA(短低L,90),COLORRED,LINETHICK1;\nD90差:=D90H-D90L;\nD90顶:=D90H+D90差*2,COLORRED,LINETHICK1;\nD90底:=D90L-D90差*2,COLORRED,LINETHICK1;\n高0:=(EMA(EMA(H,25),25)-EMA(EMA(L,25),25))*1+EMA(EMA(H,25),25),LINETHICK1,COLORWHITE;\n低0:=EMA(EMA(L,25),25)-(EMA(EMA(H,25),25)-EMA(EMA(L,25),25))*1,LINETHICK1,COLORWHITE;\n多头定位:=低0>=D90底 AND 高0>=D90顶;\n空头定位:=高0<=D90顶 AND 低0<=D90底;\n震荡定位:=低0>=D90底 AND 高0<=D90顶;\n\n牛市:=多头定位==1;\n熊市:=空头定位==1;\n震荡:=震荡定位==1;\n\n非牛市:=熊市 OR 震荡;\n非熊市:=牛市 OR 震荡;\n\nBUY11:=BUY1 AND 非熊市;\nSELL11:=SELL1 AND 震荡定位==0;\n\nBUY111:=BUY11 AND COUNT(BUY11,10)<2;\nBUY0:=BUY111 AND COUNT(BUY111,21)==1;\nSELL111:=SELL11 AND COUNT(SELL11,10)<2;\nSELL0:=SELL111 AND COUNT(SELL111,10)==1;\n\nXK1:=EMA(100*(CLOSE-LLV(LOW,34))/(HHV(HIGH,34)-LLV(LOW,34)),3)/4;\n上穿:=REF(XK1,1)<5 AND XK1>=5;\nBUY4:=上穿 AND COUNT(XK1<2,12)<1;\n\nSELL2:=REF(XK1,1)<=22.5 AND XK1>22.5 AND COUNT(REF(XK1,1)>=22.5 AND XK1<22.5,5)>0;\nSELL3:=REF(XK1,1)>=21.5 AND XK1<21.5 AND COUNT(REF(XK1,1)>=22.5 AND XK1<22.5,12)>1;\nSELL4:=SELL2 OR SELL3 AND COUNT((SELL2 OR SELL3)==1,5)==1;\n\nSUPERDRAWTEXT(BUY0,L,"机会",2,10),COLORRED;\nSUPERDRAWTEXT(SELL0,H,"风险",1,10),COLORGREEN;\nSUPERDRAWTEXT(BUY2,L,"机会",2,10),COLORRED;\nSUPERDRAWTEXT(BUY4,L,"机会",2,10),COLORRED;\nSUPERDRAWTEXT(SELL4,H,"风险",1,10),COLORGREEN;'}},T.prototype.Zealink_Index4=function(){return{Name:"股东实际增减持",Description:"股东实际增减持",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"增持:NEWS(4),NODRAW,COLORRED;\n减持:NEWS(5),NODRAW,COLORGREEN;\nSTICKLINE(增持>0,0,增持,1,0),COLORRED;\nSTICKLINE(减持<0,0,减持,1,0),COLORGREEN;"}},T.prototype.Zealink_Index5=function(){return{Name:"大宗交易",Description:"大宗交易",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"交易次数:NEWS(7);"}},T.prototype.Zealink_Index6=function(){return{Name:"信托持股",Description:"信托持股",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"家数:NEWS(6);"}},T.prototype.Zealink_Index7=function(){return{Name:"官网新闻",Description:"官网新闻",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"个数:NEWS(8);"}},T.prototype.Zealink_Index8=function(){return{Name:"高管要闻",Description:"高管要闻",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"个数:NEWS(9);"}},T.prototype.Zealink_Index9=function(){return{Name:"股权质押",Description:"股权质押",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"次数:NEWS(10);"}},T.prototype.Zealink_Index10=function(){return{Name:"操盘BS点",Description:"操盘BS点",IsMainIndex:!0,FloatPrecision:0,Args:[],Script:"JJ:=(CLOSE+HIGH+LOW)/3; \nA:=EMA(JJ,10); \nB:=REF(A,1);\nM1:=EMA(CLOSE,3);\nM2:=EMA(CLOSE,8); \nM3:=EMA(M2,13); \nM4:=EMA(M2,55); \nB1:=A>B AND REF(A,1)<REF(B,1);\nS1:=A<B AND REF(A,1)>REF(B,1);\nINDEXCLOSE:INDEXC,EXDATA;\nINDEXOPEN:INDEXO,EXDATA;\nDRAWICON(REF(B1,1),L*0.97,13);\nDRAWICON(REF(S1,1),H*1.03,14);"}},T.prototype.Zealink_Index11=function(){return{Name:"操盘BS点",Description:"操盘BS点",IsMainIndex:!0,FloatPrecision:0,Args:[],Script:"JJ:=(CLOSE+HIGH+LOW)/3;\nA:=EMA(JJ,10);\nB:=REF(A,1);\nM1:=EMA(CLOSE,3);\nM2:=EMA(CLOSE,8); \nM3:=EMA(M2,13);\nM4:=EMA(M2,55);\n持股区域:=STICKLINE(A>B,A,B,2,0),COLORYELLOW; \n持币区域:=STICKLINE(A<B,A,B,2,0),COLORBLUE;\n\nVR1:=(C+O+REF(C,1))/3;\nVR3:=HHV(VR1,21);\nVR4:=LLV(VR1,21);\nVR5:=(2*VR1-VR4-REF(VR4,1))/(VR3-VR4);\nVR6:=(VR1-VR4)/(VR3-VR4);\nVR7:=IF(VR1<=VR4,VR5*60,VR6*60);\nVR8:=600*(EMA(C,3)-EMA(L,30))/EMA(L,30);\nVR9:=EMA(VR8,7);\nVRA:=(WINNER(120*C/100)-WINNER(100*C/100))*100;\nVRB:=(-100)*(WINNER(120*C/100)-WINNER(100*C/100))+5;\nVRC:=HHV(H,9)-LLV(L,9);\nVRD:=HHV(H,9)-C;\nVRE:=C-LLV(L,9);\nVRF:=VRD/VRC*100-70;\nVR10:=(C-LLV(L,60))/(HHV(H,60)-LLV(L,60))*100;\nVR11:=(2*C+H+L)/4;\nVR12:=SMA(VRE/VRC*100,3,1);\nVR13:=LLV(L,34);\nVR14:=SMA(VR12,3,1)-SMA(VRF,9,1);\nVR15:=IF(VR14>100,VR14-100,0);\nVR16:=HHV(H,34);\nVR17:=EMA((VR11-VR13)/(VR16-VR13)*100,8);\nVR18:=EMA(VR17,5);\n\nB1:=A>B AND REF(A,1)<REF(B,1);\nS1:=A<B AND REF(A,1)>REF(B,1);\n\nB9:=BARSLAST(REF(B1,1) AND (REF(VR17>VR18,1) OR MIN(VR17,VR18)>REF(MAX(VR17,VR18),1)));\nS9:=BARSLAST(REF(S1,1) AND (REF(VR17<VR18,1) OR MAX(VR17,VR18)<REF(MIN(VR17,VR18),1)));\n\nDRAWICON(REF(B1,1) AND (REF(VR17>VR18,1) OR MIN(VR17,VR18)>REF(MAX(VR17,VR18),1)) AND REF(B9,2)>=S9,L*0.97,13);\nDRAWICON(REF(S1,1) AND (REF(VR17<VR18,1) OR MAX(VR17,VR18)<REF(MIN(VR17,VR18),1)) AND REF(S9,1)>=B9,H*1.03,14);\n\nDRAWKLINE_IF(VR17>VR18,HIGH,CLOSE,LOW,OPEN),COLORRED;\nDRAWKLINE_IF(VR17<VR18,HIGH,CLOSE,LOW,OPEN),COLORBLUE;\n\nINDEXCLOSE:INDEXC,EXDATA;\t\t//取指数的收盘价 回测的时候计算BATE系数用 "}},T.prototype.HeikinAshi=function(){return{Name:"平均K线",Description:"Heikin-Ashi 平均K线",IsMainIndex:!0,KLineType:-1,Args:[],Script:"HCLOSE:(OPEN+HIGH+LOW+CLOSE)/4, NODRAW;\nHOPEN:(REF(OPEN,1)+REF(CLOSE,1))/2,NODRAW;\nHHIGH:MAX(HIGH,MAX(HOPEN,HCLOSE)),NODRAW;\nHLOW:MIN(LOW,MIN(HOPEN,HCLOSE)),NODRAW;\nDRAWKLINE(HHIGH,HOPEN,HLOW,HCLOSE);"}},T.prototype.ADL=function(){return{Name:"腾落指标",Description:"腾落指标",IsMainIndex:!1,StringFormat:2,Condition:{Period:[g.KLINE_DAY_ID,g.KLINE_WEEK_ID,g.KLINE_TWOWEEK_ID,g.KLINE_MONTH_ID,g.KLINE_QUARTER_ID,g.KLINE_YEAR_ID],Include:["000001.SH","000003.SH","000016.SH","000300.SH","000905.SH","399001.SZ"," 399005.SZ","399006.SZ"]},Args:[{Name:"M",Value:7}],Script:"ADL:SUM(ADVANCE-DECLINE,0);\nMAADL:MA(ADL,M);"}},T.prototype.EMPTY=function(){return{Name:"",Description:"空指标",IsMainIndex:!0,Args:[],Script:"VAR2:=C;"}},T.prototype.CJL=function(){return{Name:"CJL",Description:"期货持仓量",IsMainIndex:!1,Args:[],Script:"成交量:VOL,VOLSTICK;\n持仓量:VOLINSTK,LINEOVERLAY;"}},T.prototype.ASI=function(){return{Name:"ASI",Description:"振动升降指标",IsMainIndex:!1,Args:[{Name:"N1",Value:6}],Script:"X_1:=REF(CLOSE,1);\nX_2:=ABS(HIGH-X_1);\nX_3:=ABS(LOW-X_1);\nX_4:=ABS(HIGH-REF(LOW,1));\nX_5:=ABS(X_1-REF(OPEN,1));\nX_6:=IF(X_2>X_3 AND X_2>X_4,X_2+X_3/2+X_5/4,IF(X_3>X_4 AND X_3>X_2,X_3+X_2/2+X_5/4,X_4+X_5/4));\nX_7:=CLOSE-X_1+(CLOSE-OPEN)/2+X_1-REF(OPEN,1);\nX_8:=8*X_7/X_6*MAX(X_2,X_3);\nASI:SUM(X_8,0),LINETHICK2;\nMASI:MA(ASI,N1),LINETHICK2;"}},T.prototype.DC=function(){return{Name:"DC",Description:"唐奇安通道",IsMainIndex:!0,Args:[{Name:"N1",Value:20}],Script:"UPPER:HHV(H,N1),COLORBLUE,LINETHICK2;\nLOWER:LLV(L,N1),COLORBLUE,LINETHICK2;\nMIDDLE:(UPPER+LOWER)/2,COLORRED,LINETHICK3;"}},T.prototype.DEMA=function(){return{Name:"DEMA",Description:"双重指数移动均线",IsMainIndex:!0,Args:[{Name:"N1",Value:10}],Script:"ERR:=C-EMA(C,N1);\nDEMA:EMA(C,10)+EMA(ERR,N1);"}},T.prototype.VWAP=function(){return{Name:"VWAP",Description:"成交量加权平均价",IsMainIndex:!0,Args:[{Name:"N1",Value:10}],Script:"PRICE:=(H+L+C)/3;\nT2:=VOL*PRICE;\nVWAP:SUM(T2,0)/SUM(VOL,0);"}},T.prototype.SQJZ=function(){return{Name:"SQJZ",Description:"神奇九转",IsMainIndex:!0,Script:"B:=C<REF(C,4);\nN:=CURRBARSCOUNT;\nB1:=(N=6 AND REFXV(COUNT(B,6),5)=6) OR (N=7 AND REFXV(COUNT(B,7),6)=7) OR (N=8 AND REFXV(COUNT(B,8),7)=8) OR (N>=9 AND REFXV(COUNT(B,9),8)=9);\nDRAWNUMBER(B1 AND REF(B,1)=0,L,1),COLORMAGENTA;\nB2:=(N=5 AND REFXV(COUNT(B,6),4)=6) OR (N=6 AND REFXV(COUNT(B,7),5)=7) OR (N=7 AND REFXV(COUNT(B,8),6)=8) OR (N>=8 AND REFXV(COUNT(B,9),7)=9);\nDRAWNUMBER(B2 AND REF(B,2)=0,L,2),COLORMAGENTA;\nB8:=(N=1 AND COUNT(B,8)=8) OR (N>=2 AND REFXV(COUNT(B,9),1)=9);\nDRAWNUMBER(B8 AND REF(B,8)=0,L,8),COLORMAGENTA;\nB9:=(N>=1 AND COUNT(B,9)=9);\nDRAWNUMBER(B9 AND REF(B,9)=0,L,9),COLORBROWN;\nS:=C>REF(C,4);\nS1:=(N=6 AND REFXV(COUNT(S,6),5)=6) OR (N=7 AND REFXV(COUNT(S,7),6)=7) OR (N=8 AND REFXV(COUNT(S,8),7)=8) OR (N>=9 AND REFXV(COUNT(S,9),8)=9);\nDRAWNUMBER(S1 AND REF(S,1)=0,H,1),COLORMAGENTA,DRAWABOVE;\nS2:=(N=5 AND REFXV(COUNT(S,6),4)=6) OR (N=6 AND REFXV(COUNT(S,7),5)=7) OR (N=7 AND REFXV(COUNT(S,8),6)=8) OR (N>=8 AND REFXV(COUNT(S,9),7)=9);\nDRAWNUMBER(S2 AND REF(S,2)=0,H,2),COLORMAGENTA,DRAWABOVE;\nS8:=(N=1 AND COUNT(S,8)=8) OR (N>=2 AND REFXV(COUNT(S,9),1)=9);\nDRAWNUMBER(S8 AND REF(S,8)=0,H,8),COLORMAGENTA,DRAWABOVE;\nS9:=(N>=1 AND COUNT(S,9)=9);\nDRAWNUMBER(S9 AND REF(S,9)=0,H,9),COLORGREEN,DRAWABOVE;"}},T.prototype.XT=function(){return{Name:"XT",Description:"箱体",IsMainIndex:!0,Args:[{Name:"N",Value:10}],Script:"【箱顶】:PEAK(CLOSE,N,1)*0.98;\n【箱底】:TROUGH(CLOSE,N,1)*1.02;\n【箱高】:100*(【箱顶】-【箱底】)/【箱底】,NODRAW;"}},T.prototype.CFJT=function(){return{Name:"CFJT",Description:"财富阶梯",IsMainIndex:!0,Script:"突破:=REF(EMA(C,14),1);\nA1X:=(EMA(C,10)-突破)/突破*100;\n多方:=IF(A1X>=0,REF(EMA(C,10),BARSLAST(CROSS(A1X,0))+1),DRAWNULL);\n空方:=IF(A1X<0,REF(EMA(C,10),BARSLAST(CROSS(0,A1X))+1),DRAWNULL);\nSTICKLINE(A1X>=0,多方,突破,110,0),COLORRED;\nSTICKLINE(A1X<0,空方,突破,110,0),COLORGREEN;"}},T.prototype.CYX=function(){return{Name:"CYX",Description:"撑压线",IsMainIndex:!0,Args:[{Name:"N",Value:7}],Script:"Z1:=STRCAT(HYBLOCK,' ');\nZ2:=STRCAT(Z1,DYBLOCK);\nZ3:=STRCAT(Z2,' ');\nDRAWTEXT_FIX(ISLASTBAR,0,0,0,STRCAT(Z3,GNBLOCK)),COLOR00C0C0;\nA1:=REF(H,N)=HHV(H,2*N+1);\nB1:=FILTER(A1,N);\nC1:=BACKSET(B1,N+1);\nD1:=FILTER(C1,N);\nA2:=REF(L,N)=LLV(L,2*N+1);\nB2:=FILTER(A2,N);\nC2:=BACKSET(B2,N+1);\nD2:=FILTER(C2,N);\nE1:=(REF(LLV(L,2*N),1)+REF(HHV(H,2*N),1))/2;\nE2:=(H+L)/2;\nH1:=(D1 AND NOT(D2 AND E1>=E2)) OR ISLASTBAR OR BARSCOUNT(C)=1;\nL1:=(D2 AND NOT(D1 AND E1<E2));\nH2:=D1 AND NOT(D2 AND E1>=E2);\nX1:=REF(BARSLAST(H1),1)+1;\nF1:=BACKSET(H1 AND COUNT(L1,X1)>0,LLVBARS(IF(L1,L,10000),X1));\nG1:=F1>REF(F1,1);\nI1:=BACKSET(G1,2);\nLD:=I1>REF(I1,1);\nL2:=LD OR ISLASTBAR OR BARSCOUNT(C)=1;\nX2:=REF(BARSLAST(L2),1)+1;\nF2:=BACKSET(L2 AND COUNT(H2,X2)>0,HHVBARS(IF(H2,H,0),X2));\nG2:=F2>REF(F2,1);\nI2:=BACKSET(G2,2);\nHD:=I2>REF(I2,1);\nR1:=BACKSET(ISLASTBAR,BARSLAST(HD)+1);\nS1:=R1>REF(R1,1);\nT1:=BACKSET(ISLASTBAR,BARSLAST(LD)+1);\nU1:=T1>REF(T1,1);\nR2:=BACKSET(S1,REF(BARSLAST(HD),1)+2);\nS2:=R2>REF(R2,1);\nT2:=BACKSET(U1,REF(BARSLAST(LD),1)+2);\nU2:=T2>REF(T2,1);\nDRAWLINE(S2,H,S1,H,1),LINETHICK2,COLORRED;\nDRAWLINE(U2,L,U1,L,1),LINETHICK2,COLORGREEN;"}},T.prototype.WAVE=function(){return{Name:"WAVE",Description:"波浪分析",IsMainIndex:!0,Args:[{Name:"N",Value:5}],Script:"ZIG(3,N);"}},T.prototype.ShareholderCount=function(){return{Name:"散户线",Description:"散户线",IsMainIndex:!1,Script:"GPJYVALUE(1,1,1);"}},T.prototype.NXTS=function(){return{Name:"NXTS",Description:"牛熊天数",IsMainIndex:!1,Args:[{Name:"N",Value:20}],Script:"Z:=ZIG(C,N);\n高点:=Z>REF(Z,1) AND Z>REFX(Z,1);\n低点:=Z<REF(Z,1) AND Z<REFX(Z,1);\nNG:=BARSLAST(高点);\nND:=BARSLAST(低点);\nD0:=DATETODAY(DATE)-DATETODAY(REF(DATE,BARSSINCE(C)));\nDG:=DATETODAY(DATE)-DATETODAY(REF(DATE,NG));\nDD:=DATETODAY(DATE)-DATETODAY(REF(DATE,ND));\nN1:=(NG>ND OR COUNT(高点,0)=0) AND ND>0 AND (HHV(C,ND)-REF(C,ND))/REF(C,ND)>(N/100);\nN2:=NG<ND AND NG>0 AND (LLV(C,NG)-REF(C,NG))/REF(C,NG)>=-(N/100);\nN3:=NG<ND AND NG=0;\nN4:=COUNT(低点 OR 高点,0)=0 AND (HHV(C,0)-REF(C,BARSSINCE(C)))/REF(C,BARSSINCE(C))>(N/100);\nN5:=COUNT(低点,0)=0 AND NG>0 AND (LLV(C,NG)-REF(C,NG))/REF(C,NG)>=-(N/100);\nN6:=COUNT(低点,0)=0 AND NG=0;\nX1:=(NG<ND OR COUNT(低点,0)=0) AND NG>0 AND (LLV(C,NG)-REF(C,NG))/REF(C,NG)<-(N/100);\nX2:=NG>ND AND ND>0 AND (HHV(C,ND)-REF(C,ND))/REF(C,ND)<=(N/100);\nX3:=NG>ND AND ND=0;\nX4:=COUNT(高点 OR 低点,0)=0 AND (LLV(C,0)-REF(C,BARSSINCE(C)))/REF(C,BARSSINCE(C))<-(N/100);\nX5:=COUNT(高点,0)=0 AND ND>0 AND (HHV(C,ND)-REF(C,ND))/REF(C,ND)<=(N/100);\nX6:=COUNT(高点,0)=0 AND ND=0;\n牛市天数:IF(N4 OR N5 OR N6,D0,IF(N1 OR N2 OR N3,DD,0)),COLORRED;\n熊市天数:IF(X4 OR X5 OR X6,D0,IF(X1 OR X2 OR X3,DG,0)),COLORGREEN;"}},T.prototype.FKX=function(){return{Name:"FKX",Description:"反K线",IsMainIndex:!1,Script:"DRAWKLINE(-LOW, -OPEN, -HIGH, -CLOSE);"}},T.prototype.Margin4=function(){return{Name:"两融资金",Description:"两融资金",IsMainIndex:!1,Script:"TMPV:=IF(FINANCE(3)==0,REF(SCJYVALUE(1,1,1),1),REF(GPJYVALUE(3,1,1),1));\nTMPV1:=IF(FINANCE(3)==0,SCJYVALUE(1,1,0),GPJYVALUE(3,1,0));\n两融:IF(TMPV==0 OR TMPV1==0,DRAWNULL,IF(FINANCE(3)==0,(SCJYVALUE(1,1,1)-REF(SCJYVALUE(1,1,1),1))/10000-(SCJYVALUE(1,2,1)-REF(SCJYVALUE(1,2,1),1))/10000,((GPJYVALUE(3,1,1)-REF(GPJYVALUE(3,1,1),1))-((GPJYVALUE(3,2,1)*C/10000-(REF(GPJYVALUE(3,2,1),1)*REF(C,1)/10000)))))),NODRAW;\nSTICKLINE(两融>0,0,两融,2,0),COLORRED;\nSTICKLINE(两融<0,0,两融,2,0),COLORCYAN;"}},T.prototype.ZSDB=function(){return{Name:"ZSDB",Description:"指数对比(副图,需下载日线)",IsMainIndex:!1,Script:"A:=REF(INDEXC,1);\n指数涨幅:IF(A>0,(INDEXC-A)*100/A,0),NODRAW;\nDRAWKLINE(INDEXH,INDEXO,INDEXL,INDEXC);"}},T.prototype.NineTurns=function(){return{Name:"神奇九转",Description:"九转指标",IsMainIndex:!0,Script:"A1:=C>REF(C,4);\nA2:=C<REF(C,4);\nT1:=A2 AND REF(A1,1);\nT2:=A2 AND REF(T1,1);\nT3:=A2 AND REF(T2,1);\nT4:=A2 AND REF(T3,1);\nT5:=A2 AND REF(T4,1);\nT6:=A2 AND REF(T5,1);\nT7:=A2 AND REF(T6,1);\nT8:=A2 AND REF(T7,1);\nT9:=A2 AND REF(T8,1);\nT10:=A2 AND REF(T9,1);\nT11:=A2 AND REF(T10,1);\nT12:=A2 AND REF(T11,1);\nT13:=A2 AND REF(T12,1);\nT14:=A2 AND REF(T13,1);\nDRAWTEXT(T1,L*0.98,'1'),COLORGREEN;\nDRAWTEXT(T2,L*0.98,'2'),COLORGREEN;\nDRAWTEXT(T3,L*0.98,'3'),COLORGREEN;\nDRAWTEXT(T4,L*0.98,'4'),COLORGREEN;\nDRAWTEXT(T5,L*0.98,'5'),COLORGREEN;\nDRAWTEXT(T6,L*0.98,'6'),COLORGREEN;\nDRAWTEXT(T7,L*0.98,'7'),COLORGREEN;\nDRAWTEXT(T8,L*0.98,'8'),COLORGREEN;\nDRAWTEXT(T9,L*0.98,'9'),COLORBLUE;\nB1:=C<REF(C,4);\nB2:=C>REF(C,4);\nD1:=B2 AND REF(B1,1);\nD2:=B2 AND REF(D1,1);\nD3:=B2 AND REF(D2,1);\nD4:=B2 AND REF(D3,1);\nD5:=B2 AND REF(D4,1);\nD6:=B2 AND REF(D5,1);\nD7:=B2 AND REF(D6,1);\nD8:=B2 AND REF(D7,1);\nD9:=B2 AND REF(D8,1);\nD10:=B2 AND REF(D9,1);\nD11:=B2 AND REF(D10,1);\nD12:=B2 AND REF(D11,1);\nD13:=B2 AND REF(D12,1);\nD14:=B2 AND REF(D13,1);\nDRAWTEXT(D1,H*1.010,'1'),COLORBLUE;\nDRAWTEXT(D2,H*1.010,'2'),COLORBLUE;\nDRAWTEXT(D3,H*1.010,'3'),COLORBLUE;\nDRAWTEXT(D4,H*1.010,'4'),COLORBLUE;\nDRAWTEXT(D5,H*1.010,'5'),COLORBLUE;\nDRAWTEXT(D6,H*1.010,'6'),COLORBLUE;\nDRAWTEXT(D7,H*1.010,'7'),COLORBLUE;\nDRAWTEXT(D8,H*1.010,'8'),COLORBLUE;\nDRAWTEXT(D9,H*1.010,'9'),COLORGREEN;"}},T.prototype.TEST=function(){return{Name:"TEST",Description:"测试脚本",IsMainIndex:!1,Args:[{Name:"N",Value:10}],Script:"DRAWCHANNEL(OPEN>C,H,L, 'RGB(255,94,102)', 2 ,'5,5','RGBA(58,20,62,0.3)' );"}},!D)D={Chart:{Log:console.log,Warn:console.warn},Complier:{Log:console.log,Warn:console.warn}};function I(t,e){this.DivElement=t,this.DivToolElement=null,this.JSChartContainer,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jschart-drawing",this.CanvasElement.id=P(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&D.Chart.Log("[JSChart::JSChart] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.OffscreenCanvasElement,1==e&&(this.OffscreenCanvasElement=document.createElement("canvas")),this.ModifyIndexDialog=new function(t){this.newMethod=xa,this.newMethod(t),delete this.newMethod,this.Title={ID:P()},this.ParamList={ID:P()},this.ParamData=[],this.Identify,this.HQChart,this.IsOverlay=!1,this.IndexScript,this.Create=function(){this.ID=P();var t=document.createElement("div");t.className="jchart-modifyindex-box",t.id=this.ID,t.innerHTML="<div class='parameter'>            <div class='parameter-header'>                <span></span>                <strong id='close' class='icon iconfont icon-close'></strong>            </div>            <div class='parameter-content'><input/>MA</div>            <div class='parameter-footer'>                <button class='submit' >确定</button>                <button class='cancel' >取消</button>            </div>        </div>",this.DivElement.appendChild(t),(0,p.default)("#"+this.ID+" .submit").click({divBox:this},function(t){t.data.divBox.Hide()});var e=t.getElementsByTagName("span")[0];e.id=this.Title.ID;var a=t.getElementsByClassName("parameter-content")[0];a.id=this.ParamList.ID},this.SetTitle=function(t){(0,p.default)("#"+this.Title.ID).html(t)},this.ClearParamList=function(){(0,p.default)("#"+this.ParamList.ID).empty(),this.ParamData=[]},this.BindParam=function(){for(var t=0;t<this.IndexScript.Arguments.length;++t){var e=this.IndexScript.Arguments[t];if(null==e.Name||isNaN(e.Value))break;var a=P(),i='<input class="row-line" id="'+a+'" value="'+e.Value+'" type="number" step="1"/>'+e.Name+"<br>";(0,p.default)("#"+this.ParamList.ID).append(i),this.ParamData.push({ID:a,Value:e.Value})}for(var r=this,t=0;t<this.ParamData.length;++t){var e=this.ParamData[t];(0,p.default)("#"+e.ID).mouseup({ParamIndex:t},function(t){var e=parseInt((0,p.default)(this).val());if(Te.IsNumber(e)){var a=r.HQChart,i=r.Identify,n=t.data.ParamIndex,o=r.IndexScript,s=r.IsOverlay;o.Arguments[n].Value=e,s?a.UpdateOverlayIndex(i):a.UpdateWindowIndex(i)}else alert("参数不能为空")}),(0,p.default)("#"+e.ID).keyup({ParamIndex:t},function(t){var e=parseInt((0,p.default)(this).val());if(Te.IsNumber(e)){var a=r.HQChart,i=r.Identify,n=t.data.ParamIndex,o=r.IndexScript,s=r.IsOverlay;o.Arguments[n].Value=e,s?a.UpdateOverlayIndex(i):a.UpdateWindowIndex(i)}else alert("参数不能为空")})}},this.BindCancel=function(){var t=this;(0,p.default)("#"+this.ID+" .cancel");(0,p.default)("#"+this.ID+" .cancel").unbind("click").click(function(e){var a=t.HQChart,i=t.Identify;t.RestoreParam();var r=t.IsOverlay;r?a.UpdateOverlayIndex(i):a.UpdateWindowIndex(i),t.IndexScript=null,t.Hide()}),(0,p.default)("#"+this.ID+" #close").unbind("click").click(function(e){var a=t.HQChart,i=t.Identify,r=t.IsOverlay;t.RestoreParam(),r?a.UpdateOverlayIndex(i):a.UpdateWindowIndex(i),t.IndexScript=null,t.Hide()})},this.RestoreParam=function(){if(this.IndexScript)for(var t=0;t<this.ParamData.length;++t){var e=this.ParamData[t];this.IndexScript.Arguments[t].Value=e.Value}},this.DoModal=function(t){var e=t.data.Chart,a=t.data.Identify,i=e.ModifyIndexDialog,r=!0===t.data.IsOverlay;if(i){if(null==i.ID&&i.Create(),i.Identify=a,i.HQChart=e,i.IsOverlay=r,r){var n=e.GetOverlayIndexByIdentify(a);if(!n||!n.OverlayItem.Script)return;i.IndexScript=n.OverlayItem.Script,i.SetTitle(i.IndexScript.Name+" 叠加指标参数设置")}else i.IndexScript=e.WindowIndex[a],i.SetTitle(i.IndexScript.Name+" 指标参数设置");i.ClearParamList(),i.BindParam(e,a),i.BindCancel(),i.Show()}}}(t),this.ChangeIndexDialog=new function(t){this.newMethod=xa,this.newMethod(t),delete this.newMethod,this.DivElement=t,this.IndexTreeApiUrl="https://opensourcecache.zealink.com/cache/hqh5/index/commonindextree.json",this.OverlayIndexTreeApiUrl="https://opensourcecache.zealink.com/cache/hqh5/index/commonindextree.json",this.IsOverlayIndex=!1,this.Create=function(){var t=document.createElement("div");t.className="jchart-changeindex-box",t.id=this.ID=P(),t.innerHTML='<div class="target-panel">\n            <div class="target-header">\n                <span>换指标</span>\n                <strong class="close-tar icon iconfont icon-close"></strong>\n            </div>\n            <div class="target-content">\n                <div class="target-left">\n                    <input type="text">\n                    <ul></ul>\n                </div>\n                <div class="target-right">\n                    <ul></ul>\n                </div>\n            </div>\n        </div>',this.DivElement.appendChild(t)},this.ReqeustData=function(){if((0,p.default)("#"+this.ID+" .target-left ul li").length>0)return!1;var t=this.IndexTreeApiUrl;1==this.IsOverlayIndex&&(t=this.OverlayIndexTreeApiUrl),v.HttpRequest({url:t,type:"get",success:function(t){var e=t.list;!function(t){(0,p.default)(".target-left ul").html(""),p.default.each(t,function(t,e){var a;a="<li>"+e.node+"</li>",(0,p.default)(".target-left ul").append(a)}),(0,p.default)(".target-left ul li:first-child").addClass("active-list")}(e),function(t){var e,a=[];p.default.each(t,function(t,e){a.push(e.list)}),p.default.each(a[0],function(t,a){e="<li id="+a.id+">"+a.name+"</li>",(0,p.default)(".target-right ul").append(e)}),(0,p.default)(".target-left ul").delegate("li","click",function(){(0,p.default)(this).addClass("active-list").siblings().removeClass("active-list");var t=(0,p.default)(this).index();(0,p.default)(".target-right ul").html(""),p.default.each(a[t],function(t,a){e="<li id="+a.id+">"+a.name+"</li>",(0,p.default)(".target-right ul").append(e)})})}(e)}})},this.BindClose=function(t){(0,p.default)("#"+this.ID+" .close-tar").click({Chart:t},function(t){var e=t.data.Chart;e.ChangeIndexDialog.Hide()})},this.BindSearch=function(t){(0,p.default)(".target-left input").on("input",{Chart:t},function(t){var e=new T,a=e.Search(t.target.value);for(var i in(0,p.default)(".target-right ul").html(""),a){var r=a[i],n="<li id="+r+">"+r+"</li>";(0,p.default)(".target-right ul").append(n)}})},this.DoModal=function(t){var e=t.data.Chart,a=t.data.Identify,i=e.ChangeIndexDialog,r=t.data.IsOverlay;i&&(null==i.ID&&i.Create(),i.IsOverlayIndex=r,i.ReqeustData(),(0,p.default)(".target-right ul").undelegate().delegate("li","click",function(){var t=(0,p.default)(this).attr("id");r?e.AddOverlayIndex({WindowIndex:a,IndexName:t}):e.ChangeIndex(a,t),(0,p.default)(this).addClass("active-list").siblings().removeClass("active-list")}),i.BindSearch(e),i.BindClose(e),i.Show())}}(t),this.MinuteDialog=new function(t){this.newMethod=xa,this.newMethod(t),delete this.newMethod,this.JSChart=null,this.Height=500,this.Width=600,this.Symbol,this.TradeDate,this.HistoryData,this.Show=function(t,e,a,i){var r=document.getElementById(this.ID);if(!r)return!1;var n=r.getElementsByClassName("minute-hqchart");if(!n||1!=n.length)return!1;var o=n[0];Te.IsNumber(a)&&(r.style.width=a+"px"),Te.IsNumber(i)&&(r.style.height=i+"px"),Te.IsNumber(t)&&(r.style.left=t+"px"),Te.IsNumber(e)&&(r.style.top=e+"px"),r.style.display="block";var s=o.offsetWidth,h=o.offsetTop;o.style.width=s+"px",o.style.height=i-h-5+"px"},this.Create=function(){this.ID=P();var t=document.createElement("div");t.className="jchart-kline-minute-box",t.id=this.ID;var e=P();t.innerHTML="<div><div class='minute-dialog-title'><span></span><strong class='close-munite icon iconfont icon-close'></strong></div><div class='minute-hqchart' id='"+e+"' ></div></div>",t.style.width=this.Height+"px",t.style.height=this.Width+"px",this.DivElement.appendChild(t),this.JSChart=I.Init(document.getElementById(e));var a={Type:"历史分钟走势图",Symbol:this.Symbol,IsAutoUpdate:!1,IsShowRightMenu:!1,HistoryMinute:{TradeDate:this.TradeDate,IsShowName:!1,IsShowDate:!1}};this.JSChart.SetOption(a)},this.BindClose=function(t){(0,p.default)("#"+this.ID+" .close-munite").click({Chart:t},function(t){var e=t.data.Chart;e.MinuteDialog.Hide()})},this.DoModal=function(t){this.UpColor=ia.UpTextColor,this.DownColor=ia.DownTextColor,this.UnchagneColor=ia.UnchagneTextColor;var e=t.data.Chart,a=t.data.Tooltip,i=e.MinuteDialog;if(i.Symbol=e.Symbol,i.TradeDate=a.Data.Date,i){null==i.ID?i.Create():(i.JSChart.JSChartContainer.TradeDate=i.TradeDate,i.JSChart.ChangeSymbol(this.Symbol));t.clientX,t.clientY;var r=A();i.Show(500/r,100/r,600,500),i.JSChart.OnSize(),this.BindClose(e),this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor};var n=t.data.Chart.Name,o=t.data.Tooltip.Data,s=(new Date(parseInt(o.Date/1e4),o.Date/100%100-1,o.Date%100),o.Date.toString()),h=s.substring(0,4)+"-"+s.substring(4,6)+"-"+s.substring(6,8),l="<span>"+n+"</span><span>"+h+"</span>&nbsp;<span style='color:"+this.GetColor(o.Open,o.YClose)+";'>开:"+o.Open.toFixed(2)+"</span><span style='color:"+this.GetColor(o.High,o.YClose)+";'>高:"+o.High.toFixed(2)+"</span><span style='color:"+this.GetColor(o.Low,o.YClose)+";'>低:"+o.Low.toFixed(2)+"</span><span style='color:"+this.GetColor(o.Close,o.YClose)+";'>收:"+o.Close.toFixed(2)+"</span><span style='color:"+this.VolColor+";'>量:"+Te.FormatValueString(o.Vol,2)+"</span><span style='color:"+this.AmountColor+";'>额:"+Te.FormatValueString(o.Amount,2)+"</span>";(0,p.default)(".minute-dialog-title span").html(l)}}}(t),this.OnSize=function(t){var e=parseInt(this.DivElement.style.height.replace("px",""));this.ToolElement&&(e-=this.ToolElement.style.height.replace("px","")),this.CanvasElement.height=e,this.CanvasElement.width=parseInt(this.DivElement.style.width.replace("px","")),this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var a=A();this.CanvasElement.height*=a,this.CanvasElement.width*=a,this.OffscreenCanvasElement&&(this.OffscreenCanvasElement.height=this.CanvasElement.height,this.OffscreenCanvasElement.width=this.CanvasElement.width),D.Chart.Log("[JSChart::OnSize] devicePixelRatio="+window.devicePixelRatio+", height="+this.CanvasElement.height+", width="+this.CanvasElement.width),t&&0==t.Redraw||this.JSChartContainer&&(t&&!0===t.XYSplit&&this.JSChartContainer.ResetFrameXYSplit(),this.JSChartContainer.OnSize&&t&&1==t.Type?this.JSChartContainer.OnSize():(this.JSChartContainer.Frame&&this.JSChartContainer.Frame.SetSizeChage(!0),this.JSChartContainer.Draw()))},this.AdjustChartBorder=function(t){var e=A();if(t.Frame.ChartBorder.Left*=e,t.Frame.ChartBorder.Right*=e,t.Frame.ChartBorder.Top*=e,t.Frame.ChartBorder.Bottom*=e,t.Frame.AutoLeftBorder){var a=t.Frame.AutoLeftBorder;Te.IsNumber(a.MinWidth)&&(a.MinWidth*=e),Te.IsNumber(a.Blank)&&(a.Blank*=e)}if(t.Frame.AutoRightBorder){a=t.Frame.AutoRightBorder;Te.IsNumber(a.MinWidth)&&(a.MinWidth*=e),Te.IsNumber(a.Blank)&&(a.Blank*=e)}},this.AdjustTitleHeight=function(t){for(var e=A(),a=0;a<t.Frame.SubFrame.length;++a)t.Frame.SubFrame[a].Frame.ChartBorder.TitleHeight*=e;t.ChartCorssCursor.TextHeight*=e},this.SetChartBorder=function(t,e){if(e.Border){var a=e.Border;Te.IsNumber(e.Border.Left)?t.Frame.ChartBorder.Left=e.Border.Left:e.Border.Left=t.Frame.ChartBorder.Left,Te.IsNumber(e.Border.Right)?t.Frame.ChartBorder.Right=e.Border.Right:e.Border.Right=t.Frame.ChartBorder.Right,Te.IsNumber(e.Border.Top)?t.Frame.ChartBorder.Top=e.Border.Top:e.Border.Top=t.Frame.ChartBorder.Top,Te.IsNumber(e.Border.Bottom)?t.Frame.ChartBorder.Bottom=e.Border.Bottom:e.Border.Bottom=t.Frame.ChartBorder.Bottom,a.AutoLeft&&(t.Frame.AutoLeftBorder={},Te.IsNumber(a.AutoLeft.Blank)&&(t.Frame.AutoLeftBorder.Blank=a.AutoLeft.Blank),Te.IsNumber(a.AutoLeft.MinWidth)&&(t.Frame.AutoLeftBorder.MinWidth=a.AutoLeft.MinWidth)),a.AutoRight&&(t.Frame.AutoRightBorder={},Te.IsNumber(a.AutoRight.Blank)&&(t.Frame.AutoRightBorder.Blank=a.AutoRight.Blank),Te.IsNumber(a.AutoRight.MinWidth)&&(t.Frame.AutoRightBorder.MinWidth=a.AutoRight.MinWidth))}},this.CreateKLineChartContainer=function(t){var e=null;if(e="历史K线图横屏"===t.Type?new da(this.CanvasElement):new la(this.CanvasElement,this.OffscreenCanvasElement),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),e.ModifyIndexDialog=this.ModifyIndexDialog,e.ChangeIndexDialog=this.ChangeIndexDialog,e.MinuteDialog=this.MinuteDialog,1==t.IsShowRightMenu&&(e.RightMenu=new wa(this.DivElement)),t.ScriptError&&(e.ScriptErrorCallback=t.ScriptError),e.SelectRectRightMenu=new function(t){this.newMethod=wa,this.newMethod(t),delete this.newMethod,this.DoModal=function(e){var a=e.data.Chart,i=this,r=e.data.X,n=e.data.Y,o=[{text:"区间统计",click:function(){D.Chart.Log("[KLineSelectRightMenu::click] 区间统计"),i.Hide();var a=new function(t){this.newMethod=xa,this.newMethod(t),delete this.newMethod,this.SelectData,this.Dialog,this.HQChart,this.RectSelectPaint,this.Close=function(){this.Dialog&&(this.DivElement.removeChild(this.Dialog),this.Dialog=null),this.RectSelectPaint&&(this.RectSelectPaint.PreventClose=!1)},this.Create=function(){this.ID=P();var t=document.createElement("div");t.className="jchart-select-statistics-box",t.id=this.ID,t.innerHTML="<div class='parameter jchart-select-section'>            <div class='parameter-header'>                <span>区间统计</span>                <strong id='close' class='icon iconfont icon-close'></strong>            </div>            <div class='parameter-content'>统计数据</div>        <div class='parameter-footer'>            <button id='close' class='submit' >确定</button>            <button id='match' class='submit' >形态匹配</button>        </div>        </div>",this.DivElement.appendChild(t),this.Dialog=t,(0,p.default)("#"+this.ID+" #close").click({divBox:this},function(t){t.data.divBox.Close()}),(0,p.default)("#"+this.ID+" #match").click({divBox:this},function(t){t.data.divBox.KLineMatch()})},this.BindData=function(){var t=this.SelectData.Data,e=this.SelectData.Start,a=this.SelectData.End;this.HQChart.UpdateSelectRect(e,a),this.RectSelectPaint&&(this.RectSelectPaint.PreventClose=!0);for(var i={Open:0,Close:0,High:0,Low:0,YClose:0,Vol:0,Amount:0,Date:{Start:{Time:null,Date:null},End:{Time:null,Date:null}},Count:0,KLine:{Up:0,Down:0,Unchanged:0}},r=e;r<=a&&r<t.Data.length;++r){var n=t.Data[r];r==e&&(i.Date.Start.Date=n.Date,i.Date.Start.Time=n.Time,i.Open=n.Open,i.High=n.High,i.Low=n.Low,i.YClose=n.YClose),i.Date.End.Date=n.Date,i.Date.End.Time=n.Time,i.Close=n.Close,i.Vol+=n.Vol,i.Amount+=n.Amount,++i.Count,i.High<n.High&&(i.High=n.High),i.Low>n.Low&&(i.Low=n.Low),n.Close>n.Open?++i.KLine.Up:n.Close<n.Open?++i.KLine.Down:++i.KLine.Unchanged}i.Vol>0&&(i.AvPrice=i.Amount/i.Vol),n.YClose>0&&(i.Increase=(i.Close-i.YClose)/i.YClose*100,i.Amplitude=(i.High-i.Low)/i.YClose*100);var o=Ga(this.SelectData.Symbol),s=Te.FormatDateString(i.Date.Start.Date),h=Te.FormatDateString(i.Date.End.Date);pt.IsMinutePeriod(this.HQChart.Period)?(s+=" "+Te.FormatTimeString(i.Date.Start.Time,"HH:MM"),h+=" "+Te.FormatTimeString(i.Date.End.Time,"HH:MM")):(pt.IsSecondPeriod(this.HQChart.Period)||pt.IsTickPeriod(this.HQChart.Period))&&(s+=" "+Te.FormatTimeString(i.Date.Start.Time,"HH:MM:SS"),h+=" "+Te.FormatTimeString(i.Date.End.Time,"HH:MM:SS"));var l="",u="",c="",f="";e<=0&&(l="BtnBackground"),e>=a&&(u="BtnBackground",c="BtnBackground"),a>=t.Data.length-1&&(f="BtnBackground");var d=document.createElement("div");d.className="jchart-select-table-right",d.innerHTML='<div class="jchart-select-date">\n            <span>开始: '+s+'<i class="start-date-left '+l+'"><</i><i class="start-date-right '+u+'">></i></span>\n            <span>结束: '+h+'<i class="end-date-left '+c+'"><</i><i class="end-date-right '+f+'">></i></span>\n            <span>总个数: '+i.Count+"</span>\n        </div>\n        <table>\n            <tr><td><strong>起始价: </strong><span>"+i.YClose.toFixed(o)+"</span></td>               <td><strong>最终价: </strong><span>"+i.Close.toFixed(o)+"</span></td>               <td><strong>均价: </strong><span>"+(Te.IsNumber(i.AvPrice)?i.AvPrice.toFixed(o):"--.--")+"</span></td></tr>\n            <tr><td><strong>最低价: </strong><span>"+i.Low.toFixed(o)+"</span></td>               <td><strong>最高价: </strong><span>"+i.High.toFixed(o)+'</span></td>               <td><strong>涨跌幅: </strong><span class="'+Te.FormatValueColor(i.Increase)+'">'+i.Increase.toFixed(2)+"%</span></td></tr>\n            <tr><td><strong>振幅: </strong><span>"+i.Amplitude.toFixed(2)+"%</span></td>               <td><strong>成交量: </strong><span>"+Te.FormatValueString(i.Vol,2)+"股</span></td>               <td><strong>金额: </strong><span>"+Te.FormatValueString(i.Amount,2)+"元</span></td></tr>\n            <tr><td><strong>阴线: </strong><span>"+i.KLine.Up+"</span></td>               <td><strong>阳线: </strong><span>"+i.KLine.Down+"</span></td>               <td><strong>平线: </strong><span>"+i.KLine.Unchanged+"</span></td></tr>\n        </table>",(0,p.default)(".parameter-content").html(d),this.BindEvent()},this.BindEvent=function(){var t=this;t.SelectData.Start>0&&(0,p.default)(".jchart-select-date .start-date-left").click(function(){t.SelectData.Start--,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)}),t.SelectData.Start<t.SelectData.End&&((0,p.default)(".jchart-select-date .start-date-right").click(function(){t.SelectData.Start++,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)}),(0,p.default)(".jchart-select-date .end-date-left").click(function(){t.SelectData.End--,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)})),t.SelectData.End<t.SelectData.Data.Data.length-1&&(0,p.default)(".jchart-select-date .end-date-right").click(function(){t.SelectData.End++,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)})},this.DoModal=function(t){var e=t.data.Chart;null==this.ID&&this.Create(),this.SelectData=t.data.SelectData,this.RectSelectPaint=t.data.RectSelectPaint,this.HQChart=e,this.HQChart.HideSelectRect(),this.BindData(),this.Show()},this.KLineMatch=function(t){var e=new function(t){this.newMethod=xa,this.newMethod(t),delete this.newMethod,this.Title="加载中......",this.Dialog,this.Close=function(){this.Dialog&&(this.DivElement.removeChild(this.Dialog),this.Dialog=null)},this.SetTitle=function(t){this.Title=t,this.Dialog},this.Create=function(){this.ID=P();var t=document.createElement("div");t.className="jchart-wait-box",t.id=this.ID,t.innerHTML=("<div class='parameter jchart-kline-match-box'>\n            <div class='parameter-header'>\n                <span>"+this.Title+"</span>\n            </div>\n        </div>").trim(),this.DivElement.appendChild(t),this.Dialog=t},this.DoModal=function(t){this.Title=t.data.Title;var e=t.data.Chart;null==this.ID&&this.Create();var a=e.Frame.ChartBorder,i=(R(),a.GetWidth()/2),r=a.GetHeight()/2;this.Show(i,r,200,40)}}(this.DivElement);e.DoModal({data:{Title:"计算中......",Chart:this.HQChart}}),this.Close();var a=this.HQChart,i={Scope:{Plate:["CNA.ci"],Minsimilar:.9},WaitDialog:e};a.RequestKLineMatch(this.SelectData,i)}}(t);a.DoModal(e)}},{text:"区间放大",click:function(){D.Chart.Log("[KLineSelectRightMenu::click] 区间放大");var t=e.data.Chart;t.ShowSelectData(e.data.SelectData)}}];i.Show({x:r,y:n,position:a.Frame.Position,data:o})},this.Show=function(t){p.default.extend(this.option,t),this.ID||this.Create();var e="topMenu_"+this.ID,a=document.getElementById(e);a||this.Create();var i=(0,p.default)("#topMenu_"+this.ID),r=i.outerWidth(),n=i.outerHeight();i.contextmenu(function(){return!1});var o=this.option.x,s=this.option.y;r>this.option.position.X+this.option.position.W-o&&(o-=r),n>this.option.position.Y+this.option.position.H-s&&(s-=n),i.hide(),i.css({position:"absolute",left:o+"px",top:s+"px"}).show(),(0,p.default)("#topMenu_"+this.ID).find("tr").show(),this.isInit=!0}}(this.DivElement),1==t.EnableScrollUpDown&&(e.EnableScrollUpDown=t.EnableScrollUpDown),1==t.DisableMouse&&(e.DisableMouse=t.DisableMouse),t.TouchMoveMinAngle&&(e.TouchMoveMinAngle=t.TouchMoveMinAngle),t.EnableZoomUpDown&&(e.EnableZoomUpDown=t.EnableZoomUpDown),Te.IsString(t.SplashTitle)&&(e.LoadDataSplashTitle=t.SplashTitle),Te.IsBool(t.EnableZoomIndexWindow)&&(e.EnableZoomIndexWindow=t.EnableZoomIndexWindow),Te.IsBool(t.IsDrawPictureXY)&&(e.IsDrawPictureXY=t.IsDrawPictureXY),Te.IsNumber(t.CtrlMoveStep)&&(e.CtrlMoveStep=t.CtrlMoveStep),Te.IsBool(t.EnableIndexChartDrag)&&(e.EnableIndexChartDrag=t.EnableIndexChartDrag),Te.IsBool(t.EnableVerifyRecvData)&&(e.EnableVerifyRecvData=t.EnableVerifyRecvData),t.EnableYDrag){var a=t.EnableYDrag;Te.IsBool(a.Left)&&(e.EnableYDrag.Left=a.Left),Te.IsBool(a.Right)&&(e.EnableYDrag.Right=a.Right)}(t.KLine&&(t.KLine.DragMode>=0&&(e.DragMode=t.KLine.DragMode),t.KLine.Right>=0&&(e.Right=t.KLine.Right),t.KLine.Period>=0&&(e.Period=t.KLine.Period),t.KLine.MaxReqeustDataCount>0&&(e.MaxRequestDataCount=t.KLine.MaxReqeustDataCount),t.KLine.MaxRequestDataCount>0&&(e.MaxRequestDataCount=t.KLine.MaxRequestDataCount),t.KLine.Info&&t.KLine.Info.length>0&&e.SetKLineInfo(t.KLine.Info,!1),t.KLine.IndexTreeApiUrl&&(e.ChangeIndexDialog.IndexTreeApiUrl=t.KLine.IndexTreeApiUrl),0==t.KLine.KLineDoubleClick&&(e.MinuteDialog=this.MinuteDialog=null),null!=t.KLine.IndexTreeApiUrl&&(e.ChangeIndexDialog.IndexTreeApiUrl=t.KLine.IndexTreeApiUrl),0==t.KLine.IsShowTooltip&&(e.IsShowTooltip=!1),t.KLine.MaxRequestMinuteDayCount>0&&(e.MaxRequestMinuteDayCount=t.KLine.MaxRequestMinuteDayCount),t.KLine.DrawType&&(e.KLineDrawType=t.KLine.DrawType),t.KLine.FirstShowDate>19910101&&(e.CustomShow={Date:t.KLine.FirstShowDate,PageSize:t.KLine.PageSize}),t.KLine.RightSpaceCount>0&&(e.RightSpaceCount=t.KLine.RightSpaceCount),t.KLine.ZoomType>0&&(e.ZoomType=t.KLine.ZoomType),t.KLine.DataWidth>=1&&(e.KLineSize={DataWidth:t.KLine.DataWidth}),Te.IsNumber(t.KLine.RightFormula)&&(e.RightFormula=t.KLine.RightFormula)),t.EnableFlowCapital)&&(1==(a=t.EnableFlowCapital).BIT&&(e.EnableFlowCapital.BIT=a.BIT));if(Te.IsBool(t.EnableBorderDrag)&&(e.EnableBorderDrag=t.EnableBorderDrag),t.Page&&(t.Page.Day&&1==t.Page.Day.Enable&&(e.Page.Day.Enable=!0),t.Page.Minute&&1==t.Page.Minute.Enable&&(e.Page.Minute.Enable=!0)),t.DragDownload&&(t.DragDownload.Day&&1==t.DragDownload.Day.Enable&&(e.DragDownload.Day.Enable=!0),t.DragDownload.Minute&&1==t.DragDownload.Minute.Enable&&(e.DragDownload.Minute.Enable=!0)),t.Language){var i=na.GetLanguageID(t.Language);Te.IsNumber(i)&&(e.LanguageID=i)}if(t.SourceDatatLimit&&e.SetSourceDatatLimit(t.SourceDatatLimit),t.DrawPicture&&t.DrawPicture.StorageKey&&e.ChartDrawStorage&&e.ChartDrawStorage.Load(t.DrawPicture.StorageKey),t.DrawTool&&t.DrawTool.StorageKey&&e.ChartDrawStorage&&e.ChartDrawStorage.Load(t.DrawTool.StorageKey),Te.IsNumber(t.StepPixel)&&(e.StepPixel=t.StepPixel),t.ZoomStepPixel>0&&(e.ZoomStepPixel=t.ZoomStepPixel),1==t.IsApiPeriod&&(e.IsApiPeriod=t.IsApiPeriod),t.SelectedChart){a=t.SelectedChart;Te.IsBool(a.EnableSelected)&&(e.SelectedChart.EnableSelected=a.EnableSelected),Te.IsBool(a.EnableMoveOn)&&(e.SelectedChart.EnableMoveOn=a.EnableMoveOn)}if(!t.Windows||t.Windows.length<=0)return null;if(Te.IsNonEmptyArray(t.KLineCalcOption))for(var r=0;r<t.KLineCalcOption.length;++r){(a=t.KLineCalcOption[r]).ClassName&&a.Option&&e.SetKLineCalcOption(a.ClassName,a.Option)}if(e.Create(t.Windows.length,t),this.SetChartBorder(e,t),this.AdjustChartBorder(e),t.KLine&&t.KLine.PageSize>0){var n=e.GetMaxMinPageSize();n.Max>10&&n.Max<t.KLine.PageSize?e.PageSize=n.Max:n.Min>10&&n.Min>t.KLine.PageSize?e.PageSize=n.Min:e.PageSize=t.KLine.PageSize}if(!0===t.IsCorssOnlyDrawKLine&&(e.ChartCorssCursor.IsOnlyDrawKLine=t.IsCorssOnlyDrawKLine),!0===t.CorssCursorTouchEnd&&(e.CorssCursorTouchEnd=t.CorssCursorTouchEnd),1==t.IsClickShowCorssCursor&&(e.IsClickShowCorssCursor=t.IsClickShowCorssCursor),t.CorssCursorInfo){a=t.CorssCursorInfo;isNaN(t.CorssCursorInfo.Left)||(e.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),isNaN(t.CorssCursorInfo.Right)||(e.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),isNaN(t.CorssCursorInfo.Bottom)||(e.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(e.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss),1==t.CorssCursorInfo.IsShowClose&&(e.ChartCorssCursor.IsShowClose=t.CorssCursorInfo.IsShowClose),t.CorssCursorInfo.PressTime&&(e.PressTime=t.CorssCursorInfo.PressTime),Te.IsNumber(t.CorssCursorInfo.HPenType)&&(e.ChartCorssCursor.HPenType=t.CorssCursorInfo.HPenType),t.CorssCursorInfo.VPenType>0&&(e.ChartCorssCursor.VPenType=t.CorssCursorInfo.VPenType),Te.IsNumber(a.VLineType)&&(e.ChartCorssCursor.VLineType=a.VLineType),t.CorssCursorInfo.DateFormatType>0&&(e.ChartCorssCursor.StringFormatX.DateFormatType=t.CorssCursorInfo.DateFormatType),Te.IsBool(a.IsDrawXRangeBG)&&(e.ChartCorssCursor.IsDrawXRangeBG=a.IsDrawXRangeBG),Te.IsBool(t.CorssCursorInfo.IsFixXLastTime)&&(e.ChartCorssCursor.IsFixXLastTime=t.CorssCursorInfo.IsFixXLastTime),Te.IsNumber(a.TextHeight)&&(e.ChartCorssCursor.TextHeight=a.TextHeight),a.RightButton&&Te.IsBool(a.RightButton.Enable)&&(e.ChartCorssCursor.RightButton.Enable=a.RightButton.Enable),Te.IsNumber(a.PriceFormatType)&&(e.ChartCorssCursor.StringFormatY.PriceFormatType=a.PriceFormatType),Te.IsNumber(a.DataFormatType)&&(e.ChartCorssCursor.StringFormatY.DataFormatType=a.DataFormatType)}if(t.CorssCursor={},t.CorssCursor.TitleHeight=e.ChartCorssCursor.TextHeight,Te.IsNumber(t.SplashTitlePosition)&&e.ChartSplashPaint&&(e.ChartSplashPaint.Position=t.SplashTitlePosition),t.Frame)for(r=0;r<t.Frame.length;++r){a=t.Frame[r];if(e.Frame.SubFrame[r]){var o=e.Frame.SubFrame[r].Frame;Te.IsNumber(a.SplitCount)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.SplitCount=a.SplitCount),a.StringFormat&&(e.Frame.SubFrame[r].Frame.YSplitOperator.StringFormat=a.StringFormat),Te.IsNumber(a.FloatPrecision)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.FloatPrecision=a.FloatPrecision),a.Custom&&(e.Frame.SubFrame[r].Frame.YSplitOperator.Custom=a.Custom),Te.IsNumber(a.SplitType)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.SplitType=a.SplitType,e.Frame.SubFrame[r].Frame.YSplitOperator.DefaultSplitType=a.SplitType),isNaN(a.Height)||(e.Frame.SubFrame[r].Height=a.Height),!1!==a.IsShowLeftText&&!0!==a.IsShowLeftText||(e.Frame.SubFrame[r].Frame.IsShowYText[0]=a.IsShowLeftText,e.Frame.SubFrame[r].Frame.YSplitOperator.IsShowLeftText=a.IsShowLeftText),!1!==a.IsShowRightText&&!0!==a.IsShowRightText||(e.Frame.SubFrame[r].Frame.IsShowYText[1]=a.IsShowRightText,e.Frame.SubFrame[r].Frame.YSplitOperator.IsShowRightText=a.IsShowRightText),a.TopSpace>=0&&(e.Frame.SubFrame[r].Frame.ChartBorder.TopSpace=a.TopSpace),a.BottomSpace>=0&&(e.Frame.SubFrame[r].Frame.ChartBorder.BottomSpace=a.BottomSpace),a.RightTextPosition>0&&(e.Frame.SubFrame[r].Frame.YTextPosition[1]=a.RightTextPosition),a.LeftTextPosition>0&&(e.Frame.SubFrame[r].Frame.YTextPosition[0]=a.LeftTextPosition),0==a.IsShowXLine&&(e.Frame.SubFrame[r].Frame.IsShowXLine=a.IsShowXLine),0==a.IsShowYLine&&(e.Frame.SubFrame[r].Frame.IsShowYLine=a.IsShowYLine),Te.IsNumber(a.YTextBaseline)&&(e.Frame.SubFrame[r].Frame.YTextBaseline=a.YTextBaseline),a.YCoordinateType>0&&(e.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=a.YCoordinateType),1==a.IsYReverse&&(e.Frame.SubFrame[0].Frame.CoordinateType=1),Te.IsNumber(a.PercentageTextFormat)&&(o.YSplitOperator.PercentageTextFormat=a.PercentageTextFormat),a.DefaultYMaxMin&&(e.Frame.SubFrame[r].Frame.YSplitOperator.DefaultYMaxMin=a.DefaultYMaxMin),Te.IsBool(a.EnableRemoveZero)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.EnableRemoveZero=a.EnableRemoveZero),Te.IsPlusNumber(a.MinYDistance)&&(e.Frame.SubFrame[r].Frame.MinYDistance=a.MinYDistance),Te.IsNumber(a.BorderLine)&&(e.Frame.SubFrame[r].Frame.BorderLine=a.BorderLine),Te.IsBool(a.IsShowIndexTitle)&&(e.Frame.SubFrame[r].Frame.IsShowIndexTitle=a.IsShowIndexTitle),Te.IsBool(a.IsDrawTitleBottomLine)&&(o.IsDrawTitleBottomLine=a.IsDrawTitleBottomLine),Te.IsBool(a.IsShowNameArrow)&&(e.Frame.SubFrame[r].Frame.IsShowNameArrow=a.IsShowNameArrow)}}if(t.KLine&&(0==t.KLine.ShowKLine&&(e.ChartPaint[0].IsShow=!1),t.KLine.InfoPosition>0&&(e.ChartPaint[0].InfoPosition=t.KLine.InfoPosition),0==t.KLine.IsShowMaxMinPrice&&(e.ChartPaint[0].IsShowMaxMinPrice=t.KLine.IsShowMaxMinPrice)),t.KLineTitle&&(0==t.KLineTitle.IsShowName&&(e.TitlePaint[0].IsShowName=!1),0==t.KLineTitle.IsShowSettingInfo&&(e.TitlePaint[0].IsShowSettingInfo=!1),0==t.KLineTitle.IsShow&&(e.TitlePaint[0].IsShow=!1)),t.Overlay)for(r=0;r<t.Overlay.length;++r){a=t.Overlay[r];e.OverlaySymbol(a.Symbol,a)}if(t.ExtendChart)for(r=0;r<t.ExtendChart.length;++r){a=t.ExtendChart[r];e.CreateExtendChart(a.Name,a)}var s=new T;if(t.ColorIndex){a=t.ColorIndex;var h=s.Get(a.Index);h&&(h.ID=a.Index,e.ColorIndex=new si(h.Name,h.Script,h.Args,h))}if(t.TradeIndex){a=t.TradeIndex;var l=s.Get(a.Index);l&&(l.ID=a.Index,e.TradeIndex=new si(l.Name,l.Script,l.Args,l))}for(r=0;r<t.Windows.length;++r){if((a=t.Windows[r]).Script)e.WindowIndex[r]=new si(a.Name,a.Script,a.Args,a);else if(a.JsonData)e.WindowIndex[r]=new va(a.Name,a.Script,a.Args,a);else if(a.Local&&a.Local.Data)e.WindowIndex[r]=new ui(a.Local.Name,a.Local.Args,{JsonData:a.Local.Data});else if(a.API){var u=a.API;e.WindowIndex[r]=new li(u.Name,u.Script,u.Args,a)}else{var c=oa.Get(a.Index);if(c)e.WindowIndex[r]=c.Create(a.Option),e.WindowIndex[r].SetArgs&&e.WindowIndex[r].SetArgs(a.Args),e.CreateWindowIndex(r);else{var f=s.Get(a.Index);if(!f)continue;a.Lock&&(f.Lock=a.Lock),f.ID=a.Index;var C=f.Args;a.Args&&(C=a.Args),a.IsShortTitle&&(f.IsShortTitle=a.IsShortTitle),a.TitleFont&&(f.TitleFont=a.TitleFont),e.WindowIndex[r]=new si(f.Name,f.Script,C,f),a.StringFormat>0&&(e.WindowIndex[r].StringFormat=a.StringFormat),a.FloatPrecision>=0&&(e.WindowIndex[r].FloatPrecision=a.FloatPrecision)}}var m=e.Frame.SubFrame[r].Frame;null!=a.Modify&&(m.ModifyIndex=a.Modify),null!=a.Change&&(m.ChangeIndex=a.Change),null!=a.Close&&(m.CloseIndex=a.Close),null!=a.Overlay&&(m.OverlayIndex=a.Overlay),Te.IsBool(a.Export)&&(m.ExportData=a.Export),Te.IsBool(a.MaxMin)&&(e.Frame.SubFrame[r].Frame.MaxMinWindow=a.MaxMin),Te.IsBool(a.TitleWindow)&&(e.Frame.SubFrame[r].Frame.TitleWindow=a.TitleWindow),1==a.IsDrawTitleBG&&(e.Frame.SubFrame[r].Frame.IsDrawTitleBG=a.IsDrawTitleBG),Te.IsBool(a.IsShowNameArrow)&&(e.Frame.SubFrame[r].Frame.IsShowNameArrow=a.IsShowNameArrow),Te.IsNumber(a.TitleHeight)?e.Frame.SubFrame[r].Frame.ChartBorder.TitleHeight=a.TitleHeight:a.TitleHeight=e.Frame.SubFrame[r].Frame.ChartBorder.TitleHeight,0==a.IsShowTitleArraw&&(e.Frame.SubFrame[r].Frame.IsShowTitleArraw=!1),0==a.IsShowIndexName&&(e.Frame.SubFrame[r].Frame.IsShowIndexName=!1),0==a.IsShowOverlayIndexName&&(e.Frame.SubFrame[r].Frame.IsShowOverlayIndexName=!1),Te.IsNumber(a.IndexParamSpace)&&(e.Frame.SubFrame[r].Frame.IndexParamSpace=a.IndexParamSpace),Te.IsNumber(a.IndexTitleSpace)&&(e.Frame.SubFrame[r].Frame.IndexTitleSpace=a.IndexTitleSpace),a.OverlayIndexType&&(Te.IsNumber(a.OverlayIndexType.Position)&&(e.Frame.SubFrame[r].Frame.OverlayIndexType.Position=a.OverlayIndexType.Position),Te.IsNumber(a.OverlayIndexType.LineSpace)&&(e.Frame.SubFrame[r].Frame.OverlayIndexType.LineSpace=a.OverlayIndexType.LineSpace))}if(t.OverlayIndexFrameWidth>40&&(e.OverlayIndexFrameWidth=t.OverlayIndexFrameWidth),Te.IsNonEmptyArray(t.OverlayIndex))for(r=0;r<t.OverlayIndex.length;++r){if(!((a=t.OverlayIndex[r]).Windows>=e.Frame.SubFrame.length)){var v=(0,d.default)(a),g=JSON.parse(v);a.Index&&(g.IndexName=a.Index),a.Windows>=0&&(g.WindowIndex=a.Windows),e.CreateOverlayWindowsIndex(g)}}return this.AdjustTitleHeight(e),e},this.CreateCustomKLineChartContainer=function(t){var e=new function(t){this.newMethod=la,this.newMethod(t),delete this.newMethod,this.ClassName="CustomKLineChartContainer",this.CustomKLineApiUrl=ia.Domain+"/API/IndexCalculate",this.CustomStock,this.QueryDate={Start:20180101,End:20180627},this.RequestHistoryData=function(){var t=this;this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw(),v.HttpRequest({url:this.CustomKLineApiUrl,data:{stock:t.CustomStock,Name:t.Symbol,date:{startdate:t.QueryDate.Start,enddate:t.QueryDate.End}},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryData(e)}})},this.RecvHistoryData=function(t){var e=la.JsonDataToHistoryData(t),a=new pt;a.Data=e,a.DataType=0;var i=new pt;if(i.Data=e,i.Right=this.Right,i.Period=this.Period,i.DataType=0,i.Right>0){var r=i.GetRightData(i.Right,{AlgorithmType:this.RightFormula});i.Data=r}if(pt.IsDayPeriod(this.Period,!1)){var n=a.GetPeriodData(i.Period);i.Data=n}this.SourceData=a,this.Name=t.name,this.BindMainData(i,this.PageSize);for(var o=0;o<this.Frame.SubFrame.length;++o)this.BindIndexData(o,i);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}(this.CanvasElement);if(e.ModifyIndexDialog=this.ModifyIndexDialog,e.ChangeIndexDialog=this.ChangeIndexDialog,e.MinuteDialog=this.MinuteDialog,1==t.IsShowRightMenu&&(e.RightMenu=new wa(this.DivElement)),t.KLine&&(t.KLine.DragMode>=0&&(e.DragMode=t.KLine.DragMode),t.KLine.Right>=0&&(e.Right=t.KLine.Right),t.KLine.Period>=0&&(e.Period=t.KLine.Period),t.KLine.MaxRequestDataCount>0&&(e.MaxRequestDataCount=t.KLine.MaxRequestDataCount),t.KLine.Info&&t.KLine.Info.length>0&&e.SetKLineInfo(t.KLine.Info,!1),t.KLine.IndexTreeApiUrl&&(e.ChangeIndexDialog.IndexTreeApiUrl=t.KLine.IndexTreeApiUrl),0==t.KLine.KLineDoubleClick&&(e.MinuteDialog=this.MinuteDialog=null),null!=t.KLine.IndexTreeApiUrl&&(e.ChangeIndexDialog.IndexTreeApiUrl=t.KLine.IndexTreeApiUrl),t.KLine.PageSize>0&&(e.PageSize=t.KLine.PageSize),0==t.KLine.IsShowTooltip&&(e.IsShowTooltip=!1)),t.CustomStock&&(e.CustomStock=t.CustomStock),t.QueryDate&&(e.QueryDate=t.QueryDate),!t.Windows||t.Windows.length<=0)return null;if(e.Create(t.Windows.length),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),0==t.IsShowCorssCursorInfo&&(e.ChartCorssCursor.IsShowText=t.IsShowCorssCursorInfo),t.Frame)for(var a=0;a<t.Frame.length;++a){(r=t.Frame[a]).SplitCount&&(e.Frame.SubFrame[a].Frame.YSplitOperator.SplitCount=r.SplitCount),r.StringFormat&&(e.Frame.SubFrame[a].Frame.YSplitOperator.StringFormat=r.StringFormat)}t.KLineTitle&&(0==t.KLineTitle.IsShowName&&(e.TitlePaint[0].IsShowName=!1),0==t.KLineTitle.IsShowSettingInfo&&(e.TitlePaint[0].IsShowSettingInfo=!1));var i=new T;for(a=0;a<t.Windows.length;++a){var r;if((r=t.Windows[a]).Script)e.WindowIndex[a]=new si(r.Name,r.Script,r.Args,r);else{var n=oa.Get(r.Index);if(n)e.WindowIndex[a]=n.Create(),e.CreateWindowIndex(a);else{var o=i.Get(r.Index);if(!o)continue;r.Lock&&(o.Lock=r.Lock),e.WindowIndex[a]=new si(o.Name,o.Script,o.Args,o)}}null!=r.Modify&&(e.Frame.SubFrame[a].Frame.ModifyIndex=r.Modify),null!=r.Change&&(e.Frame.SubFrame[a].Frame.ChangeIndex=r.Change),isNaN(r.TitleHeight)||(e.Frame.SubFrame[a].Frame.ChartBorder.TitleHeight=r.TitleHeight)}return e},this.CreateMinuteChartContainer=function(t){var e=null;e="分钟走势图横屏"===t.Type?new Ca(this.CanvasElement):new ua(this.CanvasElement),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),e.ModifyIndexDialog=this.ModifyIndexDialog,e.ChangeIndexDialog=this.ChangeIndexDialog;var a=2;if(t.Windows&&t.Windows.length>0&&(a+=t.Windows.length),1==t.EnableScrollUpDown&&(e.EnableScrollUpDown=t.EnableScrollUpDown),1==t.DisableMouse&&(e.DisableMouse=t.DisableMouse),t.ScriptError&&(e.ScriptErrorCallback=t.ScriptError),Te.IsString(t.SplashTitle)&&(e.LoadDataSplashTitle=t.SplashTitle),Te.IsBool(t.EnableSelectRect)&&(e.EnableSelectRect=t.EnableSelectRect),Te.IsBool(t.EnableZoomIndexWindow)&&(e.EnableZoomIndexWindow=t.EnableZoomIndexWindow),Te.IsBool(t.IsDrawPictureXY)&&(e.IsDrawPictureXY=t.IsDrawPictureXY),Te.IsBool(t.EnableNewIndex)&&(e.EnableNewIndex=t.EnableNewIndex),Te.IsBool(t.EnableIndexChartDrag)&&(e.EnableIndexChartDrag=t.EnableIndexChartDrag),Te.IsBool(t.EnableVerifyRecvData)&&(e.EnableVerifyRecvData=t.EnableVerifyRecvData),t.GlobalOption){var i=t.GlobalOption;Te.IsBool(i.IsValueFullRange)&&(e.GlobalOption.IsValueFullRange=i.IsValueFullRange),Te.IsNumber(i.XDateFormat)&&(e.GlobalOption.XDateFormat=i.XDateFormat)}if(t.DisplayLatest){i=t.DisplayLatest;Te.IsBool(i.Enable)&&(e.DisplayLatestOption.Enable=i.Enable),Te.IsNumber(i.DelayTime)&&(e.DisplayLatestOption.DelayTime=i.DelayTime)}if(e.SelectRectDialog=new function(t){this.newMethod=xa,this.newMethod(t),delete this.newMethod,this.SelectData,this.Dialog,this.HQChart,this.RectSelectPaint,this.Close=function(){this.Dialog&&(this.DivElement.removeChild(this.Dialog),this.Dialog=null,this.ID=null),this.RectSelectPaint&&(this.RectSelectPaint.PreventClose=!1)},this.Create=function(){this.ID=P();var t=document.createElement("div");t.className="jchart-select-statistics-box",t.id=this.ID,t.innerHTML="<div class='parameter jchart-select-section'>            <div class='parameter-header'>                <span>分时图区间统计</span>                <strong id='close' class='icon iconfont icon-close'></strong>            </div>            <div class='parameter-content'>统计数据</div>        <div class='parameter-footer'>            <button id='close' class='submit' >确定</button>        </div>        </div>",this.DivElement.appendChild(t),this.Dialog=t,(0,p.default)("#"+this.ID+" #close").click({divBox:this},function(t){t.data.divBox.Close()})},this.BindData=function(){var t=this.SelectData.Data,e=this.SelectData.Start,a=this.SelectData.End;this.HQChart.UpdateSelectRect(e,a),this.RectSelectPaint&&(this.RectSelectPaint.PreventClose=!0);for(var i={Open:0,Close:0,High:0,Low:0,Vol:0,Amount:0,Date:{Start:{Time:null,Date:null},End:{Time:null,Date:null}},Count:0},r=e;r<=a&&r<t.Data.length;++r){var n=t.Data[r];r==e&&(i.Date.Start.Date=n.Date,i.Date.Start.Time=n.Time,i.Open=n.Close,i.High=n.High,i.Low=n.Low),i.Date.End.Date=n.Date,i.Date.End.Time=n.Time,i.Close=n.Close,i.Vol+=n.Vol,i.Amount+=n.Amount,++i.Count,i.High<n.High&&(i.High=n.High),i.Low>n.Low&&(i.Low=n.Low)}i.Vol>0&&(i.AvPrice=i.Amount/i.Vol),n.Open>0&&(i.Increase=(i.Close-i.Open)/i.Open*100,i.Amplitude=(i.High-i.Low)/i.Open*100);var o=Ga(this.SelectData.Symbol),s=Te.FormatDateString(i.Date.Start.Date),h=Te.FormatDateString(i.Date.End.Date);s+=" "+Te.FormatTimeString(i.Date.Start.Time,"HH:MM"),h+=" "+Te.FormatTimeString(i.Date.End.Time,"HH:MM");var l="",u="",c="",f="";e<=0&&(l="BtnBackground"),e>=a&&(u="BtnBackground",c="BtnBackground"),a>=t.Data.length-1&&(f="BtnBackground");var d=document.createElement("div");d.className="jchart-select-table-right",d.innerHTML='<div class="jchart-select-date">\n            <span>开始: '+s+'<i class="start-date-left '+l+'"><</i><i class="start-date-right '+u+'">></i></span>\n            <span>结束: '+h+'<i class="end-date-left '+c+'"><</i><i class="end-date-right '+f+'">></i></span>\n            <span>总个数: '+i.Count+"</span>\n        </div>\n        <table>\n            <tr><td><strong>起始价: </strong><span>"+i.Open.toFixed(o)+"</span></td>               <td><strong>终止价: </strong><span>"+i.Close.toFixed(o)+"</span></td>               <td><strong>均价: </strong><span>"+(Te.IsNumber(i.AvPrice)?i.AvPrice.toFixed(o):"--.--")+"</span></td></tr>\n            <tr><td><strong>最低价: </strong><span>"+i.Low.toFixed(o)+"</span></td>               <td><strong>最高价: </strong><span>"+i.High.toFixed(o)+'</span></td>               <td><strong>涨跌幅: </strong><span class="'+Te.FormatValueColor(i.Increase)+'">'+i.Increase.toFixed(2)+"%</span></td></tr>\n            <tr><td><strong>振幅: </strong><span>"+i.Amplitude.toFixed(2)+"%</span></td>               <td><strong>成交量: </strong><span>"+Te.FormatValueString(i.Vol,2)+"股</span></td>               <td><strong>金额: </strong><span>"+Te.FormatValueString(i.Amount,2)+"元</span></td></tr>\n        </table>",(0,p.default)(".parameter-content").html(d),this.BindEvent()},this.BindEvent=function(){var t=this;t.SelectData.Start>0&&(0,p.default)(".jchart-select-date .start-date-left").click(function(){t.SelectData.Start--,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)}),t.SelectData.Start<t.SelectData.End&&((0,p.default)(".jchart-select-date .start-date-right").click(function(){t.SelectData.Start++,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)}),(0,p.default)(".jchart-select-date .end-date-left").click(function(){t.SelectData.End--,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)})),t.SelectData.End<t.SelectData.Data.Data.length-1&&(0,p.default)(".jchart-select-date .end-date-right").click(function(){t.SelectData.End++,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)})},this.DoModal=function(t){var e=t.data.Chart;null==this.ID&&this.Create(),this.SelectData=t.data.SelectData,this.RectSelectPaint=t.data.RectSelectPaint,this.HQChart=e,this.HQChart.HideSelectRect(),this.BindData(),this.Show()}}(this.DivElement),t.Minute&&(0==t.Minute.IsShowTooltip&&(e.IsShowTooltip=!1),t.Minute.DragMode>=0&&(e.DragMode=t.Minute.DragMode)),t.Language){var r=na.GetLanguageID(t.Language);Te.IsNumber(r)&&(e.LanguageID=r)}if(t.Info&&t.Info.length>0&&e.SetMinuteInfo(t.Info,!1),t.DrawTool&&t.DrawTool.StorageKey&&e.ChartDrawStorage&&e.ChartDrawStorage.Load(t.DrawTool.StorageKey),t.BeforeOpen){i=t.BeforeOpen;Te.IsBool(i.IsShow)&&(e.IsShowBeforeData=i.IsShow),Te.IsNumber(i.Width)&&(e.ExtendWidth.Left=i.Width),Te.IsBool(i.IsShowMultiDay)&&(e.IsShowMultiDayBeforeData=i.IsShowMultiDay),Te.IsNumber(i.MulitiDayWidth)&&(e.MultiDayExtendWidth.Left=i.MulitiDayWidth)}if(t.AfterClose){i=t.AfterClose;Te.IsBool(i.IsShow)&&(e.IsShowAfterData=i.IsShow),Te.IsNumber(i.ShareVol)&&(e.ShareAfterVol=i.ShareVol),Te.IsNumber(i.Width)&&(e.ExtendWidth.Right=i.Width),Te.IsBool(i.IsShowMultiDay)&&(e.IsShowMultiDayAfterData=i.IsShowMultiDay),Te.IsNumber(i.MulitiDayWidth)&&(e.MultiDayExtendWidth.Right=i.MulitiDayWidth)}if(t.SelectedChart){i=t.SelectedChart;Te.IsBool(i.EnableSelected)&&(e.SelectedChart.EnableSelected=i.EnableSelected),Te.IsBool(i.EnableMoveOn)&&(e.SelectedChart.EnableMoveOn=i.EnableMoveOn)}if(t.PageInfo&&e.SetPageInfo(t.PageInfo),e.Create(a,t),t.CorssCursorInfo){i=t.CorssCursorInfo;isNaN(t.CorssCursorInfo.Left)||(e.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),isNaN(t.CorssCursorInfo.Right)||(e.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),isNaN(t.CorssCursorInfo.Bottom)||(e.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(e.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss),t.CorssCursorInfo.RightTextFormat>0&&(e.ChartCorssCursor.TextFormat.Right=t.CorssCursorInfo.RightTextFormat),1==t.CorssCursorInfo.IsOnlyDrawMinute&&(e.ChartCorssCursor.IsOnlyDrawMinute=t.CorssCursorInfo.IsOnlyDrawMinute),Te.IsBool(t.CorssCursorInfo.IsFixXLastTime)&&(e.ChartCorssCursor.IsFixXLastTime=t.CorssCursorInfo.IsFixXLastTime),i.RightButton&&Te.IsBool(i.RightButton.Enable)&&(e.ChartCorssCursor.RightButton.Enable=i.RightButton.Enable),Te.IsNumber(i.PriceFormatType)&&(e.ChartCorssCursor.StringFormatY.PriceFormatType=i.PriceFormatType),Te.IsNumber(i.DataFormatType)&&(e.ChartCorssCursor.StringFormatY.DataFormatType=i.DataFormatType),Te.IsNumber(i.HPenType)&&(e.ChartCorssCursor.HPenType=i.HPenType),Te.IsNumber(i.VPenType)&&(e.ChartCorssCursor.VPenType=i.VPenType)}if(t.MinuteInfo&&e.CreateMinuteInfo(t.MinuteInfo),1==t.IsShowRightMenu&&(e.RightMenu=new function(t){this.newMethod=wa,this.newMethod(t),delete this.newMethod,this.DoModal=function(t){var e=t.data.Chart,a=e.RightMenu,i=t.offsetX,r=t.offsetY,n=[{text:"叠加品种",children:this.GetOverlay(e)},{text:"多日分时图",children:this.GetDayCount(e)},{text:"指标窗口个数",children:this.GetIndexWindowCount(e)},{text:"副图指标切换",children:this.GetIndex(e)},{text:"区间选择",children:this.GetSelectRect(e)}],o=e.Symbol;Ea.IsSHSZStockA(o)&&n.push({text:"集合竞价",children:this.GetShowBeforeData(e)}),n.push({text:"工具",children:this.GetTools(e)});var s=t.data.FrameID,h=this.GetOverlayIndex(e,s);if(h&&h.length>0){var l={text:"删除叠加指标",children:this.GetDeleteOverlayIndex(e,h)};n.splice(3,0,l)}var s=t.data.FrameID;D.Chart.Log("[MinuteRightMenu::DoModal]",s),a.Show({windowIndex:s,x:i+e.UIElement.offsetLeft,y:r+e.UIElement.offsetTop,position:e.Frame.Position,data:n}),(0,p.default)(document).click(function(){a.Hide()})},this.GetDayCount=function(t){var e=[{text:"当日分时图",click:function(){t.ChangeDayCount(1)},isBorder:!0},{text:"最近2日",click:function(){t.ChangeDayCount(2)}},{text:"最近3日",click:function(){t.ChangeDayCount(3)}},{text:"最近4日",click:function(){t.ChangeDayCount(4)}},{text:"最近5日",click:function(){t.ChangeDayCount(5)}},{text:"最近6日",click:function(){t.ChangeDayCount(6)}}];return t.DayCount-1>=0&&t.DayCount-1<e.length&&(e[t.DayCount-1].selected=!0),e},this.GetIndex=function(t){var e=[{text:"MACD",click:function(e){t.ChangeIndex(e,"MACD")}},{text:"DMI",click:function(e){t.ChangeIndex(e,"DMI")}},{text:"DMA",click:function(e){t.ChangeIndex(e,"DMA")}},{text:"BRAR",click:function(e){t.ChangeIndex(e,"BRAR")}},{text:"KDJ",click:function(e){t.ChangeIndex(e,"KDJ")}},{text:"RSI",click:function(e){t.ChangeIndex(e,"RSI")}},{text:"WR",click:function(e){t.ChangeIndex(e,"WR")}},{text:"CCI",click:function(e){t.ChangeIndex(e,"CCI")}},{text:"TRIX",click:function(e){t.ChangeIndex(e,"TRIX")}}];return e},this.GetShowBeforeData=function(t){if(t.IsShowBeforeData){var e=[{text:"隐藏",click:function(){t.ShowCallAuctionData({Left:!1,MultiDay:{Left:!1}})}}];return e}var e=[{text:"显示",click:function(){t.ShowCallAuctionData({Left:!0,MultiDay:{Left:!0}})}}];return e},this.GetSelectRect=function(t){if(t.EnableSelectRect){var e=[{text:"禁用区间选择",click:function(){t.EnableSelectRect=!1}}];return e}var e=[{text:"启动区间选择",click:function(){t.EnableSelectRect=!0}}];return e},this.GetIndexWindowCount=function(t){var e=[{text:"1个窗口",click:function(){t.ChangeIndexWindowCount(2)}},{text:"2个窗口",click:function(){t.ChangeIndexWindowCount(3)}},{text:"3个窗口",click:function(){t.ChangeIndexWindowCount(4)}},{text:"4个窗口",click:function(){t.ChangeIndexWindowCount(5)}},{text:"5个窗口",click:function(){t.ChangeIndexWindowCount(6)}}],a=t.Frame.SubFrame.length-1;return a-1>=0&&a-1<e.length&&(e[a-1].selected=!0),e},this.GetTools=function(t){var e=[],a=t.GetExtendChartByClassName("DrawToolsButton");return a?e.push({text:"关闭画图工具",click:function(){var e=a.Chart.Width;parseInt(a.Index);t.DeleteExtendChart(a),t.Frame.ChartBorder.Right-=e,t.SetSizeChange(!0),t.Draw()}}):e.push({text:"画图工具",click:function(){var e={Name:"画图工具",Top:t.Frame.ChartBorder.Top};t.CreateExtendChart(e.Name,e);t.SetSizeChange(!0),t.Draw()}}),e}}(this.DivElement)),Te.IsNumber(t.DayCount)&&(e.DayCount=t.DayCount),this.SetChartBorder(e,t),t.SplashTitle&&(e.ChartSplashPaint.SplashTitle=t.SplashTitle),Te.IsBool(t.EnableBorderDrag)&&(e.EnableBorderDrag=t.EnableBorderDrag),this.AdjustChartBorder(e),t.Frame){for(var n=0;n<t.Frame.length;++n){i=t.Frame[n];e.Frame.SubFrame[n]&&(Te.IsNumber(i.SplitCount)&&(e.Frame.SubFrame[n].Frame.YSplitOperator.SplitCount=i.SplitCount),i.StringFormat&&(e.Frame.SubFrame[n].Frame.YSplitOperator.StringFormat=i.StringFormat),Te.IsNumber(i.SplitType)&&(e.Frame.SubFrame[n].Frame.YSplitOperator.SplitType=i.SplitType,e.Frame.SubFrame[n].Frame.YSplitOperator.DefaultSplitType=i.SplitType),0==i.IsShowLeftText&&(e.Frame.SubFrame[n].Frame.IsShowYText[0]=i.IsShowLeftText,e.Frame.SubFrame[n].Frame.YSplitOperator.IsShowLeftText=i.IsShowLeftText),0==i.IsShowRightText&&(e.Frame.SubFrame[n].Frame.IsShowYText[1]=i.IsShowRightText,e.Frame.SubFrame[n].Frame.YSplitOperator.IsShowRightText=i.IsShowRightText),i.Height>=0&&(e.Frame.SubFrame[n].Height=i.Height),i.Custom&&(e.Frame.SubFrame[n].Frame.YSplitOperator.Custom=i.Custom),i.RightTextFormat>0&&(e.Frame.SubFrame[n].Frame.YSplitOperator.RightTextFormat=i.RightTextFormat),Te.IsNumber(i.TitleHeight)&&(e.Frame.SubFrame[n].Frame.ChartBorder.TitleHeight=i.TitleHeight),Te.IsNumber(i.BorderLine)&&(e.Frame.SubFrame[n].Frame.BorderLine=i.BorderLine),Te.IsBool(i.EnableRemoveZero)&&(e.Frame.SubFrame[n].Frame.YSplitOperator.EnableRemoveZero=i.EnableRemoveZero),Te.IsNumber(i.FloatPrecision)&&(e.Frame.SubFrame[n].Frame.YSplitOperator.FloatPrecision=i.FloatPrecision),Te.IsBool(i.IsShowXLine)&&(e.Frame.SubFrame[n].Frame.IsShowXLine=i.IsShowXLine),Te.IsBool(i.IsShowYLine)&&(e.Frame.SubFrame[n].Frame.IsShowYLine=i.IsShowYLine),Te.IsNumber(i.YTextBaseline)&&(e.Frame.SubFrame[n].Frame.YTextBaseline=i.YTextBaseline),i.TopSpace>=0&&(e.Frame.SubFrame[n].Frame.ChartBorder.TopSpace=i.TopSpace),i.BottomSpace>=0&&(e.Frame.SubFrame[n].Frame.ChartBorder.BottomSpace=i.BottomSpace))}e.UpdateXShowText()}if(t.ExtendChart)for(n=0;n<t.ExtendChart.length;++n){i=t.ExtendChart[n];e.CreateExtendChart(i.Name,i)}if(t.Overlay)for(n=0;n<t.Overlay.length;++n){i=t.Overlay[n];e.OverlaySymbol(i.Symbol,i)}if(t.MinuteLine){if(0==t.MinuteLine.IsDrawAreaPrice&&(e.ChartPaint[0].IsDrawArea=!1),0==t.MinuteLine.IsShowLead&&(e.IsShowLead=!1),0==t.MinuteLine.IsShowAveragePrice){e.ChartPaint[1].IsShow=!1,e.TitlePaint[0].IsShowAveragePrice=!1;for(n=0;n<e.ExtendChartPaint.length;++n){"MinuteTooltipPaint"==(i=e.ExtendChartPaint[n]).ClassName&&(i.IsShowAveragePrice=!1)}}t.MinuteLine.SplitType>0&&(e.Frame.SubFrame[0].Frame.YSplitOperator.SplitType=t.MinuteLine.SplitType)}if(t.MinuteTitle){i=t.MinuteTitle;Te.IsBool(i.IsShowName)&&(e.TitlePaint[0].IsShowName=i.IsShowName),Te.IsBool(i.IsShowDate)&&(e.TitlePaint[0].IsShowDate=i.IsShowDate),Te.IsBool(i.IsShowTime)&&(e.TitlePaint[0].IsShowTime=i.IsShowTime),Te.IsBool(i.IsTitleShowLatestData)&&(e.IsTitleShowLatestData=i.IsTitleShowLatestData),Te.IsBool(i.IsAlwaysShowLastData)&&(e.TitlePaint[0].IsAlwaysShowLastData=i.IsAlwaysShowLastData),Te.IsNumber(i.ShowLastDataFormat)&&(e.TitlePaint[0].ShowLastDataFormat=i.ShowLastDataFormat),i.TimeFormat&&(e.TitlePaint[0].TimeFormat=i.TimeFormat)}if(!0===t.CorssCursorTouchEnd&&(e.CorssCursorTouchEnd=t.CorssCursorTouchEnd),!0===t.IsShowBeforeData&&(e.IsShowBeforeData=t.IsShowBeforeData),Te.IsNonEmptyArray(t.Windows)){var o=new T;for(n=0;n<t.Windows.length;++n){var s=2+n;if((i=t.Windows[n]).Script)e.WindowIndex[s]=new si(i.Name,i.Script,i.Args,i);else if(i.API){var h=i.API;e.WindowIndex[s]=new li(h.Name,h.Script,h.Args,i)}else{var l=oa.Get(i.Index);if(l)e.WindowIndex[s]=l.Create(),e.CreateWindowIndex(s);else{var u=o.Get(i.Index);if(!u)continue;u.ID=i.Index;var c=u.Args;i.Args&&(c=i.Args),i.IsShortTitle&&(u.IsShortTitle=i.IsShortTitle),i.TitleFont&&(u.TitleFont=i.TitleFont),e.WindowIndex[s]=new si(u.Name,u.Script,c,u),i.StringFormat>0&&(e.WindowIndex[s].StringFormat=i.StringFormat),i.FloatPrecision>=0&&(e.WindowIndex[s].FloatPrecision=i.FloatPrecision)}}var f=e.Frame.SubFrame[s].Frame;null!=i.Modify&&(f.ModifyIndex=i.Modify),null!=i.Change&&(f.ChangeIndex=i.Change),null!=i.Close&&(f.CloseIndex=i.Close),null!=i.Overlay&&(f.OverlayIndex=i.Overlay),Te.IsBool(i.Export)&&(f.ExportData=i.Export),Te.IsBool(i.MaxMin)&&(f.MaxMinWindow=i.MaxMin),Te.IsBool(i.TitleWindow)&&(f.TitleWindow=i.TitleWindow),Te.IsNumber(i.YSplitType)&&(e.Frame.SubFrame[s].Frame.YSplitOperator.SplitType=i.YSplitType),isNaN(i.TitleHeight)||(e.Frame.SubFrame[s].Frame.ChartBorder.TitleHeight=i.TitleHeight),Te.IsBool(i.IsDrawTitleBG)&&(e.Frame.SubFrame[s].Frame.IsDrawTitleBG=i.IsDrawTitleBG),Te.IsBool(i.IsShowNameArrow)&&(e.Frame.SubFrame[n].Frame.IsShowNameArrow=i.IsShowNameArrow),0==i.IsShowTitleArraw&&(e.Frame.SubFrame[s].Frame.IsShowTitleArraw=!1),0==i.IsShowIndexName&&(e.Frame.SubFrame[s].Frame.IsShowIndexName=!1),0==i.IsShowOverlayIndexName&&(e.Frame.SubFrame[s].Frame.IsShowOverlayIndexName=!1)}}if(this.AdjustTitleHeight(e),Te.IsNonEmptyArray(t.OverlayIndex))for(n=0;n<t.OverlayIndex.length;++n){if(!((i=t.OverlayIndex[n]).Windows>=e.Frame.SubFrame.length)){var C=(0,d.default)(i),m=JSON.parse(C);i.Index&&(m.IndexName=i.Index),i.Windows>=0&&(m.WindowIndex=i.Windows),e.CreateOverlayWindowsIndex(m)}}return e},this.CreateMinMinuteChartContainer=function(t){var e=null;e="迷你分钟走势图横屏"===t.Type?new Ca(this.CanvasElement):new ua(this.CanvasElement),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter);if(t.BeforeOpen){var a=t.BeforeOpen;Te.IsBool(a.IsShow)&&(e.IsShowBeforeData=a.IsShow),Te.IsNumber(a.Width)&&(e.ExtendWidth.Left=a.Width),Te.IsBool(a.IsShowMultiDay)&&(e.IsShowMultiDayBeforeData=a.IsShowMultiDay),Te.IsNumber(a.MulitiDayWidth)&&(e.MultiDayExtendWidth.Left=a.MulitiDayWidth)}if(t.AfterClose){a=t.AfterClose;Te.IsBool(a.IsShow)&&(e.IsShowAfterData=a.IsShow),Te.IsNumber(a.ShareVol)&&(e.ShareAfterVol=a.ShareVol),Te.IsNumber(a.Width)&&(e.ExtendWidth.Right=a.Width),Te.IsBool(a.IsShowMultiDay)&&(e.IsShowMultiDayAfterData=a.IsShowMultiDay),Te.IsNumber(a.MulitiDayWidth)&&(e.MultiDayExtendWidth.Right=a.MulitiDayWidth)}if(t.Listener||(t.Listener={KeyDown:!1,Wheel:!1}),e.Create(2,t.Listener),t.CorssCursorInfo){a=t.CorssCursorInfo;Te.IsNumber(t.CorssCursorInfo.Left)&&(e.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),Te.IsNumber(t.CorssCursorInfo.Right)&&(e.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),Te.IsNumber(t.CorssCursorInfo.Bottom)&&(e.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(e.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss),t.CorssCursorInfo.RightTextFormat>0&&(e.ChartCorssCursor.TextFormat.Right=t.CorssCursorInfo.RightTextFormat),1==t.CorssCursorInfo.IsOnlyDrawMinute&&(e.ChartCorssCursor.IsOnlyDrawMinute=t.CorssCursorInfo.IsOnlyDrawMinute),Te.IsBool(t.CorssCursorInfo.IsFixXLastTime)&&(e.ChartCorssCursor.IsFixXLastTime=t.CorssCursorInfo.IsFixXLastTime),a.RightButton&&Te.IsBool(a.RightButton.Enable)&&(e.ChartCorssCursor.RightButton.Enable=a.RightButton.Enable),Te.IsNumber(a.PriceFormatType)&&(e.ChartCorssCursor.StringFormatY.PriceFormatType=a.PriceFormatType),Te.IsNumber(a.DataFormatType)&&(e.ChartCorssCursor.StringFormatY.DataFormatType=a.DataFormatType),Te.IsNumber(t.CorssCursorInfo.HPenType)&&(e.ChartCorssCursor.HPenType=t.CorssCursorInfo.HPenType),Te.IsNumber(t.CorssCursorInfo.VPenType)&&(e.ChartCorssCursor.VPenType=t.CorssCursorInfo.VPenType)}Te.IsNumber(t.DayCount)&&(e.DayCount=t.DayCount),this.SetChartBorder(e,t),t.SplashTitle&&(e.ChartSplashPaint.SplashTitle=t.SplashTitle),Te.IsBool(t.EnableVerifyRecvData)&&(e.EnableVerifyRecvData=t.EnableVerifyRecvData),e.TitlePaint[0].IsShow=!1;var i=e.Frame.SubFrame[0];if(i.Frame.IsShowYText[0]=!1,i.Frame.IsShowYText[1]=!1,i.Frame.IsShowXLine=!1,i.Frame.IsShowYLine=!1,i.Frame.BorderLine=0,e.Frame.SubFrame[1].Height=0,e.EnableBorderDrag=!1,t.Frame)for(var r=0;r<t.Frame.length;++r){a=t.Frame[r];e.Frame.SubFrame[r]&&(a.SplitCount&&(e.Frame.SubFrame[r].Frame.YSplitOperator.SplitCount=a.SplitCount),a.StringFormat&&(e.Frame.SubFrame[r].Frame.YSplitOperator.StringFormat=a.StringFormat),Te.IsNumber(a.SplitType)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.SplitType=a.SplitType,e.Frame.SubFrame[r].Frame.YSplitOperator.DefaultSplitType=a.SplitType),Te.IsBool(a.IsShowLeftText)&&(e.Frame.SubFrame[r].Frame.IsShowYText[0]=a.IsShowLeftText,e.Frame.SubFrame[r].Frame.YSplitOperator.IsShowLeftText=a.IsShowLeftText),Te.IsBool(a.IsShowRightText)&&(e.Frame.SubFrame[r].Frame.IsShowYText[1]=a.IsShowRightText,e.Frame.SubFrame[r].Frame.YSplitOperator.IsShowRightText=a.IsShowRightText),a.Height>=0&&(e.Frame.SubFrame[r].Height=a.Height),a.Custom&&(e.Frame.SubFrame[r].Frame.YSplitOperator.Custom=a.Custom),a.RightTextFormat>0&&(e.Frame.SubFrame[r].Frame.YSplitOperator.RightTextFormat=a.RightTextFormat),Te.IsNumber(a.TitleHeight)&&(e.Frame.SubFrame[r].Frame.ChartBorder.TitleHeight=a.TitleHeight),Te.IsNumber(a.BorderLine)&&(e.Frame.SubFrame[r].Frame.BorderLine=a.BorderLine),Te.IsBool(a.EnableRemoveZero)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.EnableRemoveZero=a.EnableRemoveZero),Te.IsNumber(a.FloatPrecision)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.FloatPrecision=a.FloatPrecision),Te.IsBool(a.IsShowXLine)&&(e.Frame.SubFrame[r].Frame.IsShowXLine=a.IsShowXLine),Te.IsBool(a.IsShowYLine)&&(e.Frame.SubFrame[r].Frame.IsShowYLine=a.IsShowYLine),Te.IsNumber(a.YTextBaseline)&&(e.Frame.SubFrame[r].Frame.YTextBaseline=a.YTextBaseline))}if(e.UpdateXShowText(),t.MinuteLine){if(0==t.MinuteLine.IsDrawAreaPrice&&(e.ChartPaint[0].IsDrawArea=!1),0==t.MinuteLine.IsShowLead&&(e.IsShowLead=!1),0==t.MinuteLine.IsShowAveragePrice){e.ChartPaint[1].IsShow=!1,e.TitlePaint[0].IsShowAveragePrice=!1;for(r=0;r<e.ExtendChartPaint.length;++r){"MinuteTooltipPaint"==(a=e.ExtendChartPaint[r]).ClassName&&(a.IsShowAveragePrice=!1)}}t.MinuteLine.SplitType>0&&(e.Frame.SubFrame[0].Frame.YSplitOperator.SplitType=t.MinuteLine.SplitType)}return this.AdjustTitleHeight(e),!0===t.DisableMouseEvent&&(this.CanvasElement.onmousemove=function(t){},this.CanvasElement.oncontextmenu=function(t){},this.CanvasElement.ondblclick=function(t){},this.CanvasElement.onmousedown=function(t){},this.CanvasElement.onmouseout=function(t){},this.CanvasElement.onmouseleave=function(t){}),e},this.CreateHistoryMinuteChartContainer=function(t){var e=new ca(this.CanvasElement),a=2;t.Windows&&t.Windows.length>0&&(a+=t.Windows.length),e.Create(a),0==t.IsShowCorssCursorInfo&&(e.ChartCorssCursor.IsShowText=t.IsShowCorssCursorInfo),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top),isNaN(t.Border.Bottom)||(e.Frame.ChartBorder.Bottom=t.Border.Bottom));var i=new T;if(t.Windows)for(var r=0;r<t.Windows.length;++r){var n=t.Windows[r];if(n.Script)e.WindowIndex[2+parseInt(r)]=new si(n.Name,n.Script,n.Args);else{var o=oa.Get(n.Index);if(o)e.WindowIndex[2+parseInt(r)]=o.Create(),e.CreateWindowIndex(2+parseInt(r));else{var s=i.Get(n.Index);if(!s)continue;e.WindowIndex[2+parseInt(r)]=new si(s.Name,s.Script,s.Args)}}isNaN(n.TitleHeight)||(e.Frame.SubFrame[2+parseInt(r)].Frame.ChartBorder.TitleHeight=n.TitleHeight)}return e.TradeDate=20181009,t.HistoryMinute.TradeDate&&(e.TradeDate=t.HistoryMinute.TradeDate),null!=t.HistoryMinute.IsShowName&&(e.TitlePaint[0].IsShowName=t.HistoryMinute.IsShowName),null!=t.HistoryMinute.IsShowDate&&(e.TitlePaint[0].IsShowDate=t.HistoryMinute.IsShowDate),e},this.CreateKLineTrainChartContainer=function(t){var e=!1;if("简单K线训练"==t.Type||"简单K线训练横屏"==t.Type){var a="简单K线训练横屏"==t.Type,i=new function(t,e){this.newMethod=fa,this.newMethod(t,e),delete this.newMethod,this.IsHScreen=e,this.IsZoomLockRight=!0,this.RightSpaceCount=0,this.RecvFlowCapitalData=function(t){this.Super_RecvFlowCapitalData(t)},this.BeforeBindMainData=function(t){},this.UpdateLastDataIcon=function(){if(this.ChartPaintEx[0]){var t=this.ChartPaintEx[0];t.LastDataIndex=this.TrainInfo.End.Index}},this.AfterBindMainData=function(t){if(this.ChartPaintEx[0]||(this.CreateBuySellPaint(),this.ChartPaintEx[0].LastDataDrawType=1),"Update"!=t){var e=this.ChartOperator_Temp_GetHistroyData();if(!e)return!1;var a=e.Data.length,i=a-this.TrainDataCount-20,r=this.Frame.SubFrame[0].Frame.XPointCount,n=this.GetKDataIndexByDateTime(e.Data,this.TrainStartDate);n>=0&&a-(i=n+1)<this.TrainDataCount&&(this.TrainDataCount=a-i);var o=i-r;e.DataOffset=o;var s=i-1,h=e.Data[s];this.TrainInfo.LastShowData=h,this.TrainInfo.LastData=h,this.TrainInfo.Start.Index=s,this.TrainInfo.Start.Date=h.Date,this.TrainInfo.Start.Time=h.Time,this.TrainInfo.End.Index=s,this.TrainInfo.End.Date=h.Date,this.TrainInfo.End.Time=h.Time,this.UpdateLastDataIcon(),this.UpdateTrainUICallback("开始")}},this.Super_UpdataDataoffset=this.UpdataDataoffset,this.UpdataDataoffset=function(){this.Super_UpdataDataoffset();var t=this.ChartPaint[0].Data;this.ChartPaintEx[0].Data=t},this.MoveNextKLineData=function(t){if(this.TrainDataCount<=0)return!1;var e=this.ChartOperator_Temp_GetHistroyData();if(!e)return!1;var a=1;t&&t.Step>1&&(a=t.Step);for(var i=e.Data.length,r=0,n=0;n<a;++n){var o=this.TrainInfo.End.Index+1;if(o>=i)break;var s=e.Data[o];if(this.TrainInfo.End.Index=o,this.TrainInfo.End.Date=s.Date,this.TrainInfo.End.Time=s.Time,--this.TrainDataCount,++r,this.TrainDataCount<=0)break}if(0==r)return!1;this.TrainInfo.LastShowData=s,this.TrainInfo.LastData=s;var h=this.TrainInfo.End.Index,l=this.Frame.SubFrame[0].Frame.XPointCount,u=h-l+1;return e.DataOffset=u,this.UpdateLastDataIcon(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.TrainDataCount<=0?(this.FinishTrainData(),this.UpdateTrainUICallback("结束"),!1):(this.UpdateTrainUICallback("训练中"),!0)},this.BuyOrSell=function(t,e){var a=this.TrainInfo.LastShowData;if(!a)return!1;var i=this.ChartPaintEx[0];if(!i)return!1;var r=this.ChartPaint[0].Data;if(!r||r.Data.length<=0)return!1;var n=this.TrainInfo.End.Index,o={Date:this.TrainInfo.End.Date,Time:this.TrainInfo.End.Time,Price:t.Price,Vol:t.Vol,Op:0,ID:t.ID};1==t.Op&&(o.Op=1);var s=n;o.Key=s,this.BuySellData.push(o),i.AddTradeItem(o),1==e&&this.Draw()},this.DataMove=function(t,e){var a=this.GetMoveOneStepWidth(),i=t;if((t=parseInt(t/a))<=0)return!1;var r=this.ChartOperator_Temp_GetHistroyData();if(!r)return!1;var n=0;if(!(n=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount))return!1;if(this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&this.Frame.SubFrame[0].Frame){var o=this.Frame.SubFrame[0].Frame;(o.DataWidth<=1||o.DistanceWidth<=1)&&Te.IsPlusNumber(this.StepPixel)&&(t=i*this.StepPixel)}if(e){if(this.RightSpaceCount>0){if(n+r.DataOffset>=r.Data.length+this.RightSpaceCount-1)return!1;r.DataOffset+=t,r.DataOffset+n>=r.Data.length+this.RightSpaceCount&&(r.DataOffset=r.Data.length-(n-this.RightSpaceCount))}else{var s=this.TrainInfo.End.Index+1;if(n+r.DataOffset>=s)return!1;r.DataOffset+=t,r.DataOffset+n>=s&&(r.DataOffset=s-n)}return!0}return!(r.DataOffset<=0)&&(r.DataOffset-=t,r.DataOffset<0&&(r.DataOffset=0),!0)},this.DataMoveRight=function(){var t=this.ChartOperator_Temp_GetHistroyData();if(!t)return!1;var e=0;if(!(e=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount))return!1;var a=this.TrainInfo.End.Index+1;return!(e+t.DataOffset>=a)&&(++t.DataOffset,!0)}}(this.CanvasElement,a);e=!0}else a="K线训练横屏"==t.Type,i=new fa(this.CanvasElement,a);if(t.NetworkFilter&&(i.NetworkFilter=t.NetworkFilter),1==t.IsApiPeriod&&(i.IsApiPeriod=t.IsApiPeriod),i.ModifyIndexDialog=this.ModifyIndexDialog,i.ChangeIndexDialog=this.ChangeIndexDialog,t.ScriptError&&(i.ScriptErrorCallback=t.ScriptError),t.KLine&&(t.KLine.Right>=0&&(i.Right=t.KLine.Right),t.KLine.Period>=0&&(i.Period=t.KLine.Period),t.KLine.MaxRequestDataCount>0&&(i.MaxRequestDataCount=t.KLine.MaxRequestDataCount),t.KLine.Info&&t.KLine.Info.length>0&&i.SetKLineInfo(t.KLine.Info,!1),t.KLine.PageSize>0&&(i.PageSize=t.KLine.PageSize),0==t.KLine.IsShowTooltip&&(i.IsShowTooltip=!1),t.KLine.MaxRequestMinuteDayCount>0&&(i.MaxRequestMinuteDayCount=t.KLine.MaxRequestMinuteDayCount),t.KLine.DrawType&&(i.KLineDrawType=t.KLine.DrawType),Te.IsNumber(t.KLine.RightSpaceCount)&&!e&&(i.RightSpaceCount=t.KLine.RightSpaceCount)),t.Train&&(t.Train.DataCount&&(i.TrainDataCount=t.Train.DataCount),t.Train.Callback&&(i.TrainCallback=t.Train.Callback),t.Train.StartDate&&(i.TrainStartDate=t.Train.StartDate)),!t.Windows||t.Windows.length<=0)return null;if(i.Create(t.Windows.length),this.SetChartBorder(i,t),this.AdjustChartBorder(i),0==t.IsShowCorssCursorInfo&&(i.ChartCorssCursor.IsShowText=t.IsShowCorssCursorInfo),!0===t.IsCorssOnlyDrawKLine&&(i.ChartCorssCursor.IsOnlyDrawKLine=t.IsCorssOnlyDrawKLine),!0===t.CorssCursorTouchEnd&&(i.CorssCursorTouchEnd=t.CorssCursorTouchEnd),1==t.IsClickShowCorssCursor&&(i.IsClickShowCorssCursor=t.IsClickShowCorssCursor),t.CorssCursorInfo&&(isNaN(t.CorssCursorInfo.Left)||(i.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),isNaN(t.CorssCursorInfo.Right)||(i.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),isNaN(t.CorssCursorInfo.Bottom)||(i.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(i.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss),1==t.CorssCursorInfo.IsShowClose&&(i.ChartCorssCursor.IsShowClose=t.CorssCursorInfo.IsShowClose),t.CorssCursorInfo.PressTime&&(i.PressTime=t.CorssCursorInfo.PressTime),t.CorssCursorInfo.HPenType>0&&(i.ChartCorssCursor.HPenType=t.CorssCursorInfo.HPenType),t.CorssCursorInfo.VPenType>0&&(i.ChartCorssCursor.VPenType=t.CorssCursorInfo.VPenType)),t.CorssCursor={},t.CorssCursor.TitleHeight=i.ChartCorssCursor.TextHeight,t.Frame)for(var r=0;r<t.Frame.length;++r){var n=t.Frame[r];i.Frame.SubFrame[r]&&(n.SplitCount&&(i.Frame.SubFrame[r].Frame.YSplitOperator.SplitCount=n.SplitCount),n.StringFormat&&(i.Frame.SubFrame[r].Frame.YSplitOperator.StringFormat=n.StringFormat),Te.IsNumber(n.FloatPrecision)&&(i.Frame.SubFrame[r].Frame.YSplitOperator.FloatPrecision=n.FloatPrecision),n.Custom&&(i.Frame.SubFrame[r].Frame.YSplitOperator.Custom=n.Custom),Te.IsNumber(n.SplitType)&&(i.Frame.SubFrame[r].Frame.YSplitOperator.SplitType=n.SplitType),n.Height>0&&(i.Frame.SubFrame[r].Height=n.Height),0==n.IsShowLeftText&&(i.Frame.SubFrame[r].Frame.YSplitOperator.IsShowLeftText=n.IsShowLeftText),0==n.IsShowRightText&&(i.Frame.SubFrame[r].Frame.YSplitOperator.IsShowRightText=n.IsShowRightText))}if(t.KLine&&(0==t.KLine.ShowKLine&&(i.ChartPaint[0].IsShow=!1),t.KLine.InfoPosition>0&&(i.ChartPaint[0].InfoPosition=t.KLine.InfoPosition),0==t.KLine.IsShowMaxMinPrice&&(i.ChartPaint[0].IsShowMaxMinPrice=t.KLine.IsShowMaxMinPrice)),t.KLineTitle&&(0==t.KLineTitle.IsShowName&&(i.TitlePaint[0].IsShowName=!1),0==t.KLineTitle.IsShowSettingInfo&&(i.TitlePaint[0].IsShowSettingInfo=!1),0==t.KLineTitle.IsShow&&(i.TitlePaint[0].IsShow=!1)),Te.IsNonEmptyArray(t.Overlay))for(r=0;r<t.Overlay.length;++r){n=t.Overlay[r];i.OverlaySymbol(n.Symbol,n)}if(t.ExtendChart)for(r=0;r<t.ExtendChart.length;++r){n=t.ExtendChart[r];i.CreateExtendChart(n.Name,n)}if(Te.IsNonEmptyArray(t.Windows)){var o=new T;for(r=0;r<t.Windows.length;++r){if((n=t.Windows[r]).Script)i.WindowIndex[r]=new si(n.Name,n.Script,n.Args,n);else{var s=oa.Get(n.Index);if(s)i.WindowIndex[r]=s.Create(),i.CreateWindowIndex(r);else{var h=o.Get(n.Index);if(!h)continue;n.Lock&&(h.Lock=n.Lock),i.WindowIndex[r]=new si(h.Name,h.Script,h.Args,h)}}null!=n.Modify&&(i.Frame.SubFrame[r].Frame.ModifyIndex=n.Modify),null!=n.Change&&(i.Frame.SubFrame[r].Frame.ChangeIndex=n.Change),null!=n.Close&&(i.Frame.SubFrame[r].Frame.CloseIndex=n.Close),null!=n.Overlay&&(frame.OverlayIndex=n.Overlay),Te.IsBool(n.Export)&&(frame.ExportData=n.Export),Te.IsBool(n.MaxMin)&&(i.Frame.SubFrame[r].Frame.MaxMinWindow=n.MaxMin),Te.IsBool(n.TitleWindow)&&(i.Frame.SubFrame[r].Frame.TitleWindow=n.TitleWindow),Te.IsBool(n.IsDrawTitleBG)&&(i.Frame.SubFrame[r].Frame.IsDrawTitleBG=n.IsDrawTitleBG),Te.IsBool(n.IsShowNameArrow)&&(i.Frame.SubFrame[r].Frame.IsShowNameArrow=n.IsShowNameArrow),Te.IsNumber(n.TitleHeight)&&(i.Frame.SubFrame[r].Frame.ChartBorder.TitleHeight=n.TitleHeight),0==n.IsShowTitleArraw&&(i.Frame.SubFrame[r].Frame.IsShowTitleArraw=!1),0==n.IsShowIndexName&&(i.Frame.SubFrame[r].Frame.IsShowIndexName=!1),0==n.IsShowOverlayIndexName&&(i.Frame.SubFrame[r].Frame.IsShowOverlayIndexName=!1),Te.IsNumber(n.IndexParamSpace)&&(i.Frame.SubFrame[r].Frame.IndexParamSpace=n.IndexParamSpace),Te.IsNumber(n.IndexTitleSpace)&&(i.Frame.SubFrame[r].Frame.IndexTitleSpace=n.IndexTitleSpace)}}return this.AdjustTitleHeight(i),i},this.CreateDepthChartContainer=function(t){var e=null;if(e=new function(t){this.newMethod=M,this.newMethod(t),delete this.newMethod,this.ClassName="DepthChartContainer",this.Symbol,this.MapAsk=new C.default,this.MapBid=new C.default,this.IsAutoUpdate=!1,this.AutoUpdateFrequency=3e4,this.AutoUpdateTimer,this.DefaultZoom=.8,this.MaxVolRate=1.1,this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new function(){this.Frame,this.HQChart,this.Canvas,this.Data,this.Symbol,this.HPenType=0,this.VPenType=0,this.LineDash=ia.DepthCorss.LineDash,this.IsShowTooltip=!0,this.AskColor=ia.DepthCorss.AskColor.Line,this.BidColor=ia.DepthCorss.BidColor.Line,this.LineWidth=ia.DepthCorss.LineWidth,this.ClassName="DepthChartCorssCursor",this.Tooltip={Border:{Top:ia.DepthCorss.Tooltip.Border.Top,Left:ia.DepthCorss.Tooltip.Border.Left,Right:ia.DepthCorss.Tooltip.Border.Right,Bottom:ia.DepthCorss.Tooltip.Border.Bottom,ItemSpace:ia.DepthCorss.Tooltip.Border.ItemSpace},Font:ia.DepthCorss.Tooltip.Font,TextColor:ia.DepthCorss.Tooltip.TextColor,BGColor:ia.DepthCorss.Tooltip.BGColor},this.Font=ia.CorssCursorTextFont,this.TextColor=ia.CorssCursorTextColor,this.TextBGColor=ia.CorssCursorBGColor,this.TextHeight=20,this.LastPoint,this.PointX,this.PointY,this.StringFormatX,this.StringFormatY,this.IsShowCorss=!0,this.IsShow=!0,this.GetVol=function(t,e){if(!this.Data)return null;var a=e?this.Data.Asks:this.Data.Bids;if(!a||!Array.isArray(a)||a.length<=0)return null;for(var i in a){var r=a[i];if(r.Price==t)return r.Vol}return null},this.Draw=function(){if(this.Status=0,this.LastPoint&&this.Data&&this.IsShow){var t=this.LastPoint.X,e=this.LastPoint.Y,a=!1;if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),a=this.Canvas.isPointInPath(t,e),this.PointY=null,this.PointY,a&&!0!==this.Frame.IsHScreen){var i=this.Frame.ChartBorder.GetLeft(),r=this.Frame.ChartBorder.GetRight(),n=this.Frame.ChartBorder.GetTopTitle(),o=this.Frame.ChartBorder.GetBottom(),s=(this.Frame.ChartBorder.Right,this.Frame.ChartBorder.GetChartWidth(),this.Frame.GetXData(t)),h=this.Frame.GetXFromPrice(s);if(h){var l=this.GetVol(h.Price,h.IsAsk);if(e=this.Frame.GetYFromData(l),h.Vol=l,h.Y=e,this.PointY=[[i,e],[r,e]],this.PointX=[[t,n],[t,o]],this.IsShowCorss){h.IsAsk?this.Canvas.strokeStyle=this.AskColor:this.Canvas.strokeStyle=this.BidColor;var u=this.Canvas.lineWidth,c=A();this.Canvas.lineWidth=this.LineWidth*c;var f=this.Canvas.lineWidth;if(1==this.HPenType||0==this.HPenType){0==this.HPenType&&this.Canvas.setLineDash(this.LineDash);var d=B(f,e);this.Canvas.beginPath(),this.Canvas.moveTo(i,d),this.Canvas.lineTo(r,d),this.Canvas.stroke(),0==this.HPenType&&this.Canvas.setLineDash([])}0==this.VPenType&&this.Canvas.setLineDash(this.LineDash);var C=B(f,h.X);this.Canvas.beginPath(),this.Canvas.moveTo(C,n),this.Canvas.lineTo(C,o),this.Canvas.stroke(),0==this.VPenType&&this.Canvas.setLineDash([]),this.Canvas.lineWidth=u}if(this.HQChart){var p=this.HQChart.GetEventCallback(w.ON_DRAW_DEPTH_TOOLTIP);p&&p.Callback(p,h,this)}if(this.IsShowTooltip){var m=this.GetFormatTooltip(h);this.DrawTooltip(m,h)}}}}},this.GetFormatTooltip=function(t){var e=[],a=2;this.Symbol&&(a=Ga(this.Symbol));var i={Title:na.GetText("Depth-Price",this.HQChart.LanguageID),TitleColor:this.Tooltip.TextColor,Text:t.Price.toFixed(a),Color:this.Tooltip.TextColor};e.push(i);var i={Title:na.GetText("Depth-Sum",this.HQChart.LanguageID),TitleColor:this.Tooltip.TextColor,Text:t.Vol.toFixed(4),Color:this.Tooltip.TextColor};return e.push(i),e},this.DrawTooltip=function(t,e){if(Te.IsNonEmptyArray(t)){this.Canvas.font=this.Tooltip.Font;for(var a=0,i=0,r=0,n=0;n<t.length;++n){var o=t[n];if(o){var s=!1;if(o.Title){var h=this.Canvas.measureText(o.Title).width;a<h&&(a=h),++i,s=!0}if(o.Text){var h=this.Canvas.measureText(o.Text).width;a<h&&(a=h),++i,s=!0}s&&++r}}if(!(a<=0||i<=0)){this.Tooltip.LineHeight=this.Canvas.measureText("擎").width+2;var l=A(),u=this.Tooltip.Border;this.Tooltip.Width=a+(u.Left+u.Right)*l,this.Tooltip.Height=this.Tooltip.LineHeight*i+(u.Top+u.Bottom)*l+u.ItemSpace*l*(r-1);var c=this.Frame.ChartBorder.GetRight(),f=this.Frame.ChartBorder.GetTop(),d=e.X,C=e.Y-this.Tooltip.Height;d+this.Tooltip.Width>=c&&(d=e.X-this.Tooltip.Width),C<f&&(C=e.Y),this.Canvas.fillStyle=this.Tooltip.BGColor,this.Canvas.fillRect(d,C,this.Tooltip.Width,this.Tooltip.Height),this.Canvas.textBaseline="top",this.Canvas.textAlign="left";for(var p=u.Left*l+d,m=u.Top*l+C,n=0;n<t.length;++n){var o=t[n],s=!1;o.Title&&(o.TitleColor?this.Canvas.fillStyle=o.TitleColor:this.Canvas.fillStyle=this.Tooltip.TextColor,this.Canvas.fillText(o.Title,p,m),m+=this.Tooltip.LineHeight,s=!0),o.Text&&(o.Color?this.Canvas.fillStyle=o.Color:this.Canvas.fillStyle=this.Tooltip.TextColor,this.Canvas.fillText(o.Text,p,m),m+=this.Tooltip.LineHeight,s=!0),s&&(m+=u.ItemSpace*l)}}}},this.PtInButton=function(t,e){return null}},this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.HQChart=this,this.ChartSplashPaint=new Le,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.Frame=new function(){this.newMethod=z,this.newMethod(),delete this.newMethod,this.ScreenImageData,this.Position,this.ClassName="DepthChartFrame",this.VerticalRange={Max:88,Min:8,Center:null,MaxDiffer:null,Differ:null,Step:.05},this.AskPrice,this.BidPrice,this.MinZoom=.05,this.SetPriceList=function(t,e){this.AskPrice=t,this.BidPrice=e},this.DrawFrame=function(){this.SplitXYCoordinate(),this.DrawHorizontal(),this.DrawVertical()},this.GetXFromIndex=function(t){var e=this.ChartBorder.GetLeft(),a=(this.ChartBorder.GetRight(),this.ChartBorder.GetWidth()),i=a*(t-this.VerticalRange.Min)/(this.VerticalRange.Max-this.VerticalRange.Min);return e+i},this.GetXData=function(t){var e=this.ChartBorder.GetLeft(),a=(this.ChartBorder.GetRight(),this.ChartBorder.GetWidth());return(t-e)/a*(this.VerticalRange.Max-this.VerticalRange.Min)+this.VerticalRange.Min},this.GetXFromPrice=function(t){var e=!1,a=this.GetPrice(this.BidPrice,t);if(null==a&&(a=this.GetPrice(this.AskPrice,t),e=!0),null==a&&this.BidPrice&&Array.isArray(this.BidPrice)&&this.BidPrice.length>0){var i=this.BidPrice[0];t<i&&(e=!1,a=i)}if(null==a&&this.AskPrice&&Array.isArray(this.AskPrice)&&this.AskPrice.length>0){var r=this.AskPrice[this.AskPrice.length-1];t>r&&(e=!0,a=r)}if(null==a)return null;var n=this.GetXFromIndex(a);return{X:n,Price:a,IsAsk:e}},this.GetPrice=function(t,e){if(!t||!Array.isArray(t)||t.length<=0)return null;if(e<t[0]||e>t[t.length-1])return null;var a=null;for(var i in t){var r=t[i];if(e==r)return r;if(e<r)return a;a=r}},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(null!=this.YSplitOperator&&this.YSplitOperator.Operator(),null!=this.XSplitOperator&&this.XSplitOperator.Operator())},this.Snapshot=function(){this.ScreenImageData=this.Canvas.getImageData(0,0,this.ChartBorder.GetChartWidth(),this.ChartBorder.GetChartHeight())},this.SetSizeChage=function(t){this.SizeChange=t,this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight}},this.PtInFrame=function(t,e){var a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetWidth(),n=this.ChartBorder.GetHeight();return this.Canvas.beginPath(),this.Canvas.rect(a,i,r,n),this.Canvas.isPointInPath(t,e)?0:-1},this.PtInFrameBorder=function(t,e){return null},this.ZoomUp=function(){var t=this.VerticalRange,e=t.Differ,a=t.MaxDiffer*this.MinZoom;if(e<a)return!1;var i=t.Differ*t.Step;return e-=i,t.Differ=e,t.Min=t.Center-t.Differ,t.Max=t.Center+t.Differ,!0},this.ZoomDown=function(){var t=this.VerticalRange,e=t.Differ;if(e==t.MaxDiffer)return!1;var a=t.Differ*t.Step;return(e+=a)>t.MaxDiffer&&(e=t.MaxDiffer),t.Differ=e,t.Min=t.Center-t.Differ,t.Max=t.Center+t.Differ,!0}},this.Frame.ChartBorder=new X,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.ChartBorder.TitleHeight=0,this.Frame.Canvas=this.Canvas,this.Frame.Identify=0;var a=new ye;a.FrameSplitData=this.FrameSplitData.get("double"),a.LanguageID=this.LanguageID,a.Frame=this.Frame,a.SplitCount=5,a.LineType=3,a.IgnoreYValue=[0],a.ChartBorder=this.Frame.ChartBorder,a.GetEventCallback=function(t){return e.GetEventCallback(t)},this.Frame.YSplitOperator=a;var i=new function(){this.newMethod=Te,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.SplitCount=3,this.Symbol,this.LineType=3,this.Operator=function(){var t=this.Frame.VerticalRange;if(t){this.Frame.VerticalInfo=[];var e=2;this.Symbol&&(e=Ga(this.Symbol));var a=t.Max,i=t.Min;if(t.Bid)for(var r=(t.Bid.Max-i)/this.SplitCount,n=0;n<this.SplitCount;++n){var o=new Y;o.Value=i+r*n,o.Value<=0||(Te.IsNumber(this.LineType)&&(o.LineType=this.LineType),this.ShowText&&(o.Message[0]=o.Value.toFixed(e)),this.Frame.VerticalInfo.push(o))}var o=new Y;if(o.Value=t.Center,this.Frame.VerticalInfo.push(o),t.Ask)for(var r=(a-t.Ask.Min)/this.SplitCount,n=1;n<=this.SplitCount;++n){var o=new Y;o.Value=t.Ask.Min+r*n,Te.IsNumber(this.LineType)&&(o.LineType=this.LineType),this.ShowText&&(o.Message[0]=o.Value.toFixed(e)),this.Frame.VerticalInfo.push(o)}if(this.GetEventCallback){var s=this.GetEventCallback(w.ON_SPLIT_XCOORDINATE);if(s&&s.Callback){var h={ID:this.Frame.Identify,Frame:this.Frame};s.Callback(s,h,this)}}}}};i.Frame=this.Frame,i.ChartBorder=this.Frame.ChartBorder,i.LanguageID=this.LanguageID,i.LineType=3,i.GetEventCallback=function(t){return e.GetEventCallback(t)},this.Frame.XSplitOperator=i,this.ChartCorssCursor&&(this.ChartCorssCursor.Frame=this.Frame),this.ChartSplashPaint.Frame=this.Frame;var r=new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartOrderbookDepth",this.Data=null,this.AskColor={Line:ia.DepthChart.AskColor.Line,Area:ia.DepthChart.AskColor.Area},this.BidColor={Line:ia.DepthChart.BidColor.Line,Area:ia.DepthChart.BidColor.Area},this.LineWidth=ia.DepthChart.LineWidth,this.Draw=function(){if(this.Data){var t=this.Canvas.lineWidth;this.Canvas.lineWidth=this.LineWidth*A(),this.DrawArea(this.Data.Bids,this.BidColor.Line,this.BidColor.Area,!0),this.DrawArea(this.Data.Asks,this.AskColor.Line,this.AskColor.Area,!1),this.Canvas.lineWidth=t}},this.DrawArea=function(t,e,a,i){var r=this.ChartFrame.VerticalRange,n=[];for(var o in t){var s=t[o];if(i){if(s.Price<r.Min)break}else if(s.Price>r.Max)break;var h=this.ChartFrame.GetXFromIndex(s.Price),l=this.ChartFrame.GetYFromData(s.Vol);n.push({X:h,Y:l})}if(!(n.length<=1)){var u=this.ChartBorder.GetLeft(),c=this.ChartBorder.GetBottom(),f=this.ChartBorder.GetRight();for(var o in this.Canvas.beginPath(),this.Canvas.moveTo(n[0].X,c),n){var s=n[o];this.Canvas.lineTo(s.X,s.Y)}for(var o in this.Canvas.lineTo(i?u:f,n[n.length-1].Y),this.Canvas.lineTo(i?u:f,c),this.Canvas.lineTo(n[0].X,c),this.Canvas.closePath(),this.Canvas.fillStyle=a,this.Canvas.fill(),this.Canvas.beginPath(),this.Canvas.moveTo(n[0].X,c),n){var s=n[o];this.Canvas.lineTo(s.X,s.Y)}this.Canvas.lineTo(i?u:f,n[n.length-1].Y),this.Canvas.strokeStyle=e,this.Canvas.stroke()}},this.GetMaxMin=function(){var t={Min:null,Max:null,XMin:null,XMax:null},e=this.ChartFrame.VerticalRange;for(var a in this.Data.Asks){var i=this.Data.Asks[a];if(i.Price>e.Max)break;(null==t.XMin||t.XMin>i.Price)&&(t.XMin=i.Price),(null==t.XMax||t.XMax<i.Price)&&(t.XMax=i.Price),(null==t.Min||t.Min>i.Vol)&&(t.Min=i.Vol),(null==t.Max||t.Max<i.Vol)&&(t.Max=i.Vol)}for(var a in this.Data.Bids){var i=this.Data.Bids[a];if(i.Price<e.Min)break;(null==t.XMin||t.XMin>i.Price)&&(t.XMin=i.Price),(null==t.XMax||t.XMax<i.Price)&&(t.XMax=i.Price),(null==t.Min||t.Min>i.Vol)&&(t.Min=i.Vol),(null==t.Max||t.Max<i.Vol)&&(t.Max=i.Vol)}return t}};r.Canvas=this.Canvas,r.ChartBorder=this.Frame.ChartBorder,r.ChartFrame=this.Frame,r.Name="深度图",this.ChartPaint.push(r);var n=!0;t&&!1===t.Wheel&&(n=!1,D.Chart.Log("[DepthChartContainer::Create] not register wheel event.")),this.UIElement.addEventListener("keydown",function(t){e.OnKeyDown(t)},!0),n&&this.UIElement.addEventListener("wheel",function(t){e.OnWheel(t)},!0)},this.OnWheel=function(t){D.Chart.Log("[KLineChartContainer::OnWheel]",t);var e=t.clientX-this.UIElement.getBoundingClientRect().left,a=t.clientY-this.UIElement.getBoundingClientRect().top,i=!1;this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),i=this.Canvas.isPointInPath(e,a);var r=t.wheelDelta;Te.IsObjectExist(t.wheelDelta)||(r=-.01*t.deltaY);var n=!0;this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Wheel&&(n=!1),i&&r<0&&n?this.Frame.ZoomDown()&&(this.UpdateFrameMaxMin(),this.Draw()):i&&r>0&&n&&this.Frame.ZoomUp()&&(this.UpdateFrameMaxMin(),this.Draw()),t.preventDefault?t.preventDefault():t.returnValue=!1},this.UIOnMouseDown=function(t){},this.OnTouchStart=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.IsOnTouch=!0,this.TouchDrawCount=0,this.PhonePinch=null;var e=this.IsSingleTouch(t);if(0!=this.EnableScrollUpDown&&e||t.cancelable&&t.preventDefault(),this.IsPhoneDragging(t)){var a={Click:{},LastMove:{}},i=this.GetToucheData(t,this.IsForceLandscape);a.Click.X=i[0].clientX,a.Click.Y=i[0].clientY,a.LastMove.X=i[0].clientX,a.LastMove.Y=i[0].clientY,this.MouseDrag=a,this.MoveCorssCursor(a.Click,t)}else if(this.IsPhonePinching(t)){var r={Start:{},Last:{}},i=this.GetToucheData(t,this.IsForceLandscape);r.Start={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},r.Last={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},this.PhonePinch=r}}},this.OnTouchMove=function(e){var a=this.GetToucheData(e,!1);if(this.IsPhoneDragging(e)){var i=this.MouseDrag;if(null==i){var r=A(),n=a[0].clientX-t.getBoundingClientRect().left*r,o=a[0].clientY-t.getBoundingClientRect().top*r;this.OnMouseMove(n,o,e)}else{var s=this.GetMoveAngle(i.LastMove,{X:a[0].clientX,Y:a[0].clientY}),h=Math.abs(i.LastMove.X-a[0].clientX),l=Math.abs(i.LastMove.Y-a[0].clientY);if(h=parseInt(h),(l>0&&h<=3||s<=this.TouchMoveMinAngle)&&1==this.EnableScrollUpDown)return;this.PreventTouchEvent(e),this.MouseDrag=null;var r=A(),n=a[0].clientX-t.getBoundingClientRect().left*r,o=a[0].clientY-t.getBoundingClientRect().top*r;this.OnMouseMove(n,o,e)}}else if(this.IsPhonePinching(e)){this.PreventTouchEvent(e);var u=this.PhonePinch;if(!u)return;if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Touch)return;var c=Math.abs(a[0].pageY-a[1].pageY),f=Math.abs(u.Last.Y-u.Last.Y2),d=c-f,C=Math.abs(a[0].pageX-a[1].pageX),p=Math.abs(u.Last.X-u.Last.X2),m=C-p,D=this.ZoomStepPixel;if(Math.abs(d)<D&&Math.abs(m)<D)return;var v=d;if(Math.abs(d)<D&&(v=m),v>0){if(!this.Frame.ZoomUp())return;this.UpdateFrameMaxMin(),this.Draw()}else{if(!this.Frame.ZoomDown())return;this.UpdateFrameMaxMin(),this.Draw()}u.Last={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY}}this.PreventTouchEvent(e)},this.OnTouchEnd=function(t){D.Chart.Log("[DepthChartContainer::OnTouchEnd]",t),this.IsOnTouch=!1,this.OnTouchFinished(),this.TouchDrawCount=0},this.OnTouchFinished=function(){!0!==this.CorssCursorTouchEnd||this.DrawDynamicInfo()},this.ChangeSymbol=function(t){this.CancelAutoUpdate(),this.Symbol=t,this.MapBid=new C.default,this.MapAsk=new C.default,this.Frame.VerticalRange.Differ=null,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw(),this.RequestDepthData()},this.RequestDepthData=function(){var t=this;if(this.NetworkFilter){var e={Name:"DepthChartContainer::RequestDepthData",Explain:"深度图数据",Request:{Data:{symbol:t.Symbol}},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvDepthData(e),t.AutoUpdate()}),1==e.PreventDefault)return}},this.RecvDepthData=function(t){this.UpdateAskAndBid(t);var e=(0,h.default)(this.MapAsk.values());e.sort(function(t,e){return t.Price-e.Price});var a=0;for(var i in e){var r=e[i];a+=r.Vol,e[i]={Price:r.Price,Vol:a}}var n=(0,h.default)(this.MapBid.values());n.sort(function(t,e){return e.Price-t.Price});var a=0;for(var i in n){var r=n[i];a+=r.Vol,n[i]={Price:r.Price,Vol:a}}var o={Asks:e,Bids:n},s=this.ChartPaint[0];s.Data=o,this.Frame.XSplitOperator.Symbol=this.Symbol,this.ChartCorssCursor.Data=o,this.ChartCorssCursor.Symbol=this.Symbol,this.UpdateFramePriceList(),this.UpdateFrameMaxMin(),this.Draw()},this.UpdateAskAndBid=function(t){for(var e in"snapshot"==t.datatype&&(this.MapBid=new C.default,this.MapAsk=new C.default),t.asks){var a=t.asks[e],i=parseFloat(a[0]),r=parseFloat(a[1]);if(this.MapAsk.has(i)){var n=this.MapAsk.get(i);r<=0?this.MapAsk.delete(i):n.Vol=r}else r>0&&this.MapAsk.set(i,{Price:i,Vol:r})}for(var e in t.bids){var a=t.bids[e],i=parseFloat(a[0]),r=parseFloat(a[1]);if(this.MapBid.has(i)){var n=this.MapBid.get(i);r<=0?this.MapBid.delete(i):n.Vol=r}else r>0&&this.MapBid.set(i,{Price:i,Vol:r})}},this.UpdateFramePriceList=function(){var t=(0,h.default)(this.MapAsk.keys()),e=(0,h.default)(this.MapBid.keys());t.sort(function(t,e){return t-e}),e.sort(function(t,e){return t-e});var a={Max:88,Min:8};if(t.length>1&&e.length>1){var i=t[0],r=t[t.length-1],n=e[0],o=e[e.length-1],s=r-i,l=o-n,u=Math.max(s,l),c={Min:i,Max:i+u},f={Max:o,Min:o-u};a={Max:c.Max,Min:f.Min}}this.Frame.SetPriceList(t,e);var d=this.Frame.VerticalRange;d.Max=a.Max,d.Center=a.Min+(a.Max-a.Min)/2,d.Min=a.Min,d.MaxDiffer=u,d.Ask=c,d.Bid=f,Te.IsNumber(d.Differ)||(d.Differ=u*this.DefaultZoom),d.Min=d.Center-d.Differ,d.Max=d.Center+d.Differ},this.UpdateFrameMaxMin=function(){var t=this.ChartPaint[0].GetMaxMin();this.Frame.HorizontalMax=t.Max*this.MaxVolRate,this.Frame.HorizontalMin=0,this.Frame.XYSplit=!0},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=void 0)},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.AutoUpdate=function(){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var t=this,e=Ea.GetMarketStatus(this.Symbol);if(0!=e&&3!=e){var a=this.AutoUpdateFrequency;1==e?this.AutoUpdateTimer=setTimeout(function(){t.AutoUpdate()},a):2==e&&(this.AutoUpdateTimer=setTimeout(function(){t.RequestDepthData()},a))}}}}(this.CanvasElement),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),1==t.EnableScrollUpDown&&(e.EnableScrollUpDown=t.EnableScrollUpDown),Te.IsPlusNumber(t.MaxVolRate)&&(e.MaxVolRate=t.MaxVolRate),t.ZoomStepPixel>0&&(e.ZoomStepPixel=t.ZoomStepPixel),Te.IsString(t.SplashTitle)&&(e.LoadDataSplashTitle=t.SplashTitle),Te.IsBool(t.EnableVerifyRecvData)&&(e.EnableVerifyRecvData=t.EnableVerifyRecvData),t.Language){var a=na.GetLanguageID(t.Language);Te.IsNumber(a)&&(e.LanguageID=a)}if(e.Create(t.Listener),t.Border&&(Te.IsNumber(t.Border.Left)?e.Frame.ChartBorder.Left=t.Border.Left:t.Border.Left=e.Frame.ChartBorder.Left,Te.IsNumber(t.Border.Right)?e.Frame.ChartBorder.Right=t.Border.Right:t.Border.Right=e.Frame.ChartBorder.Right,Te.IsNumber(t.Border.Top)?e.Frame.ChartBorder.Top=t.Border.Top:t.Border.Top=e.Frame.ChartBorder.Top,Te.IsNumber(t.Border.Bottom)?e.Frame.ChartBorder.Bottom=t.Border.Bottom:t.Border.Bottom=e.Frame.ChartBorder.Bottom),this.AdjustChartBorder(e),!0===t.CorssCursorTouchEnd&&(e.CorssCursorTouchEnd=t.CorssCursorTouchEnd),t.CorssCursorInfo){var i=t.CorssCursorInfo;Te.IsNumber(i.HPenType)&&(e.ChartCorssCursor.HPenType=i.HPenType),Te.IsNumber(i.VPenType)&&(e.ChartCorssCursor.VPenType=i.VPenType),Te.IsBool(i.IsShowTooltip)&&(e.ChartCorssCursor.IsShowTooltip=i.IsShowTooltip)}t.Frame&&((i=t.Frame).SplitCount&&(e.Frame.YSplitOperator.SplitCount=i.SplitCount),Te.IsNumber(i.SplitType)&&(e.Frame.YSplitOperator.SplitType=i.SplitType),Te.IsNumber(i.Height)&&(e.Frame.Height=i.Height),Te.IsNumber(i.YLineType)&&(e.Frame.YSplitOperator.LineType=i.YLineType),Te.IsNumber(i.XLineType)&&(e.Frame.XSplitOperator.LineType=i.XLineType),Array.isArray(i.IgnoreYValue)&&(e.Frame.YSplitOperator.IgnoreYValue=i.IgnoreYValue),!1!==i.IsShowLeftText&&!0!==i.IsShowLeftText||(e.Frame.IsShowYText[0]=i.IsShowLeftText,e.Frame.YSplitOperator.IsShowLeftText=i.IsShowLeftText),!1!==i.IsShowRightText&&!0!==i.IsShowRightText||(e.Frame.IsShowYText[1]=i.IsShowRightText,e.Frame.YSplitOperator.IsShowRightText=i.IsShowRightText),0==i.IsShowXLine&&(e.Frame.IsShowXLine=i.IsShowXLine),0==i.IsShowYLine&&(e.Frame.IsShowYLine=i.IsShowYLine),Te.IsNumber(i.XSplitCount)&&(e.Frame.XSplitOperator.SplitCount=i.XSplitCount));return e},this.SetOption=function(t){Te.IsNumber(t.ToolbarButtonStyle)&&(ia.ToolbarButtonStyle=t.ToolbarButtonStyle);var e=null;switch(t.Type){case"历史K线图":case"历史K线图横屏":e=this.CreateKLineChartContainer(t);break;case"自定义指数历史K线图":e=this.CreateCustomKLineChartContainer(t);break;case"分钟走势图":case"分钟走势图横屏":e=this.CreateMinuteChartContainer(t);break;case"迷你分钟走势图":e=this.CreateMinMinuteChartContainer(t);break;case"历史分钟走势图":e=this.CreateHistoryMinuteChartContainer(t);break;case"K线训练":case"K线训练横屏":case"简单K线训练":case"简单K线训练横屏":e=this.CreateKLineTrainChartContainer(t);break;case"深度图":e=this.CreateDepthChartContainer(t);break;case"简单图形":return this.CreateSimpleChart(t);case"饼图":case"雷达图":return this.CreatePieChart(t);case"地图":return this.CreateMapChart(t);default:return!1}if(!e)return!1;if(t.OnCreatedCallback&&t.OnCreatedCallback(e),null!=t.IsAutoUpdate&&(e.IsAutoUpdate=t.IsAutoUpdate),t.AutoUpdateFrequency>0&&(e.AutoUpdateFrequency=t.AutoUpdateFrequency),t.EventCallback)for(var a=0;a<t.EventCallback.length;++a){var i=t.EventCallback[a];e.AddEventCallback(i)}t.Symbol?(e.Draw(),e.ChangeSymbol(t.Symbol),this.JSChartContainer=e,this.DivElement.JSChart=this,this.JSChartContainer.Draw()):(e.DrawEmpty(),this.JSChartContainer=e,this.DivElement.JSChart=this),Te.IsBool(t.CheckLatestVerion)&&0==t.CheckLatestVerion||null==I.LastVersion&&e&&"function"==typeof e.GetLatestVersion&&e.GetLatestVersion()},this.CreateSimpleChart=function(t){var e=new function(t){this.newMethod=M,this.newMethod(t),delete this.newMethod,this.MainDataControl,this.Create=function(){this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new Le,this.ChartSplashPaint.Canvas=this.Canvas,this.Frame=new function(){this.newMethod=z,this.newMethod(),delete this.newMethod,this.ScreenImageData,this.Position,this.DrawFrame=function(){if(this.XPointCount>0){var t=this.ChartBorder.GetWidth()/(6*this.XPointCount);this.DistanceWidth=2*t,this.DataWidth=4*t}this.SplitXYCoordinate(),this.DrawHorizontal(),this.DrawVertical()},this.GetXFromIndex=function(t){t<0&&(t=0),t>this.xPointCount-1&&(t=this.xPointCount-1);for(var e=this.ChartBorder.GetLeft()+2+this.DistanceWidth/2+this.DataWidth/2,a=1;a<=t;++a)e+=this.DistanceWidth+this.DataWidth;return e},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(null!=this.YSplitOperator&&this.YSplitOperator.Operator(),null!=this.XSplitOperator&&this.XSplitOperator.Operator())},this.Snapshot=function(){this.ScreenImageData=this.Canvas.getImageData(0,0,this.ChartBorder.GetChartWidth(),this.ChartBorder.GetChartHeight())},this.SetSizeChage=function(t){this.SizeChange=t,this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight}},this.PtInFrame=function(t,e){var a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetWidth(),n=this.ChartBorder.GetHeight();return this.Canvas.beginPath(),this.Canvas.rect(a,i,r,n),this.Canvas.isPointInPath(t,e)?0:-1},this.PtInFrameBorder=function(t,e){return null}},this.Frame.ChartBorder=new X,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartCorssCursor&&(this.ChartCorssCursor.Frame=this.Frame),this.ChartSplashPaint.Frame=this.Frame,this.CreateMainChart(),this.UIElement.addEventListener("keydown",N,!0)},this.SetMainDataConotrl=function(t){t&&(this.MainDataControl=t,this.ChartPaint=[],this.CreateMainChart(),this.Draw(),this.RequestData())},this.CreateMainChart=function(){if(this.MainDataControl){for(var t in this.MainDataControl.DataType){var e=this.MainDataControl.DataType[t];if("BAR"==e.Type){var a=new jt;a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.Name=e.Name,e.Color&&(a.UpBarColor=e.Color),e.Color2&&(a.DownBarColor=e.Color2),this.ChartPaint.push(a)}else if("LINE"==e.Type){var a=new At;a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.Name=e.Name,e.Color&&(a.Color=e.Color),this.ChartPaint.push(a)}}this.Frame.YSplitOperator=new ye,this.Frame.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),this.Frame.YSplitOperator.Frame=this.Frame,this.Frame.YSplitOperator.ChartBorder=this.Frame.ChartBorder,this.Frame.XSplitOperator=new function(){this.newMethod=Te,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.Symbol,this.MinTextDistance=50*A(),this.MinBarDistance=5,this.Operator=function(){if(null!=this.Frame.Data&&null!=this.Frame.XData){this.Frame.VerticalInfo=[];for(var t=this.Frame.Data.DataOffset,e=this.Frame.XPointCount,a=0,i=t;a<e&&i<this.Frame.Data.Data.length;++a,++i){var r=new Y;r.Value=i-t,this.ShowText&&(r.Message[0]=this.Frame.XData[a]),this.Frame.VerticalInfo.push(r),distance=0}}}},this.Frame.XSplitOperator.Frame=this.Frame,this.Frame.XSplitOperator.ChartBorder=this.Frame.ChartBorder}},this.RequestData=function(){this.MainDataControl&&(this.MainDataControl.JSChartContainer=this,this.MainDataControl.RequestData())},this.UpdateMainData=function(t){var e=0;for(var a in t.Data){var i=new pt;i.Data=t.Data[a],this.ChartPaint[a].Data=i,e<i.Data.length&&(e=i.Data.length)}this.Frame.XPointCount=e,this.Frame.Data=this.ChartPaint[0].Data,this.Frame.XData=t.XData,this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}(this.CanvasElement);t.MainDataControl&&(e.MainDataControl=t.MainDataControl),e.Create(),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),e.Draw(),e.RequestData(),this.JSChartContainer=e,this.DivElement.JSChart=this,this.JSChartContainer.Draw()},this.CreatePieChart=function(t){var e=new function(t){this.Radius,this.newMethod=M,this.newMethod(t),delete this.newMethod,this.MainDataControl,this.OnMouseMove=function(t,e,a){},this.Create=function(){this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new Le,this.ChartSplashPaint.Canvas=this.Canvas,this.Frame=new K,this.Frame.ChartBorder=new X,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame,this.CreateMainChart()},this.SetMainDataConotrl=function(t){t&&(this.MainDataControl=t,this.ChartPaint=[],this.CreateMainChart(),this.Draw(),this.RequestData())},this.CreateMainChart=function(){if(this.MainDataControl)for(var t in this.MainDataControl.DataType){var e=this.MainDataControl.DataType[t];if("PIE"==e.Type){var a=new ce;a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.Name=e.Name,this.Radius&&(a.Radius=this.Radius),this.ChartPaint.push(a)}else if("RADAR"==e.Type){var a=new fe;a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.Name=e.Name,e.StartAngle&&(a.StartAngle=e.StartAngle),this.ChartPaint.push(a)}}},this.RequestData=function(){this.MainDataControl&&(this.MainDataControl.JSChartContainer=this,this.MainDataControl.RequestData())},this.UpdateMainData=function(t){for(var e in t.Data){var a=new pt;a.Data=t.Data[e],this.ChartPaint[e].Data=a}this.Frame.SetSizeChage(!0),this.Draw()}}(this.CanvasElement);t.MainDataControl&&(e.MainDataControl=t.MainDataControl),t.Radius&&(e.Radius=t.Radius),e.Create(),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),this.AdjustChartBorder(e),t.Frame&&0==t.Frame[0].IsShowBorder&&(e.Frame.IsShowBorder=t.Frame[0].IsShowBorder),e.Draw(),e.RequestData(),this.JSChartContainer=e,this.DivElement.JSChart=this,this.JSChartContainer.Draw()},this.CreateMapChart=function(t){var e=new function(t){this.newMethod=M,this.newMethod(t),delete this.newMethod,this.MainDataControl,this.OnMouseMove=function(t,e,a){},this.Create=function(){this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new Le,this.ChartSplashPaint.Canvas=this.Canvas,this.Frame=new K,this.Frame.ChartBorder=new X,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame,this.CreateMainChart()},this.SetMainDataConotrl=function(t){t&&(this.MainDataControl=t,this.ChartPaint=[],this.CreateMainChart(),this.Draw(),this.RequestData())},this.CreateMainChart=function(){if(this.MainDataControl){var t=new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ImageData=null,this.Left,this.Top,this.Width,this.Height,this.ImageWidth,this.ImageHeight,this.DefaultColor=[217,222,239],this.Color=[{Name:"海南",Color:"rgb(217,222,223)"},{Name:"内蒙古",Color:"rgb(217,222,225)"},{Name:"新疆",Color:"rgb(217,222,226)"},{Name:"青海",Color:"rgb(217,222,227)"},{Name:"西藏",Color:"rgb(217,222,228)"},{Name:"云南",Color:"rgb(217,222,229)"},{Name:"黑龙江",Color:"rgb(217,222,230)"},{Name:"吉林",Color:"rgb(217,222,231)"},{Name:"辽宁",Color:"rgb(217,222,232)"},{Name:"河北",Color:"rgb(217,222,233)"},{Name:"山东",Color:"rgb(217,222,234)"},{Name:"江苏",Color:"rgb(217,222,235)"},{Name:"浙江",Color:"rgb(217,222,236)"},{Name:"福建",Color:"rgb(217,222,237)"},{Name:"广东",Color:"rgb(217,222,238)"},{Name:"广西",Color:"rgb(217,222,239)"},{Name:"贵州",Color:"rgb(217,222,240)"},{Name:"湖南",Color:"rgb(217,222,241)"},{Name:"江西",Color:"rgb(217,222,242)"},{Name:"安徽",Color:"rgb(217,222,243)"},{Name:"湖北",Color:"rgb(217,222,244)"},{Name:"重庆",Color:"rgb(217,222,245)"},{Name:"四川",Color:"rgb(217,222,246)"},{Name:"甘肃",Color:"rgb(217,222,247)"},{Name:"陕西",Color:"rgb(217,222,248)"},{Name:"山西",Color:"rgb(217,222,249)"},{Name:"河南",Color:"rgb(217,222,250)"}],this.Draw=function(){var t=this.ChartBorder.GetLeft()+1,e=(this.ChartBorder.GetRight(),this.ChartBorder.GetTop()+1),a=(this.ChartBorder.GetBottom(),this.ChartBorder.GetWidth()-2),i=this.ChartBorder.GetHeight()-2,r=CHINA_MAP_IMAGE.width,n=CHINA_MAP_IMAGE.height,o=r,s=n;if(i<s||a<o)this.ImageData=null;else if(this.Left==t&&this.Top==e&&this.Width==a&&this.Height==i&&this.ImageWidth==r&&this.ImageHeight==n||(this.ImageData=null,this.ImageWidth=r,this.ImageHeight=n,this.Left=t,this.Top=e,this.Width=a,this.Height=i,D.Chart.Log(r,n)),null==this.ImageData){this.Canvas.drawImage(CHINA_MAP_IMAGE,0,0,r,n,t,e,o,s),this.ImageData=this.Canvas.getImageData(t,e,o,s);var h,l=new c.default,u=new C.default,f=new C.default;if(this.Data.length>0)for(var d in this.Data){var p=this.Data[d];f.set(p.Name,p.Color)}for(var m in D.Chart.Log(this.Data),this.Color){var v=this.Color[m];f.has(v.Name)?u.set(v.Color,f.get(v.Name)):l.add(v.Color)}for(var g=0;g<this.ImageData.data.length;g+=4)if(h="rgb("+this.ImageData.data[g]+","+this.ImageData.data[g+1]+","+this.ImageData.data[g+2]+")",l.has(h))this.ImageData.data[g]=this.DefaultColor[0],this.ImageData.data[g+1]=this.DefaultColor[1],this.ImageData.data[g+2]=this.DefaultColor[2];else if(u.has(h)){var S=u.get(h);this.ImageData.data[g]=S[0],this.ImageData.data[g+1]=S[1],this.ImageData.data[g+2]=S[2]}this.Canvas.clearRect(t,e,o,s),this.Canvas.putImageData(this.ImageData,t,e,0,0,o,s)}else this.Canvas.putImageData(this.ImageData,t,e,0,0,o,s)}};t.Canvas=this.Canvas,t.ChartBorder=this.Frame.ChartBorder,t.ChartFrame=this.Frame,t.Name=this.MainDataControl.DataType[0].Name,this.Radius&&(t.Radius=this.Radius),this.ChartPaint.push(t)}},this.RequestData=function(){this.MainDataControl&&(this.MainDataControl.JSChartContainer=this,this.MainDataControl.RequestData())},this.UpdateMainData=function(t){this.ChartPaint[0].Data=t.Data[0],this.Frame.SetSizeChage(!0),this.Draw()}}(this.CanvasElement);t.MainDataControl&&(e.MainDataControl=t.MainDataControl),e.Create(),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),e.Draw(),e.RequestData(),this.JSChartContainer=e,this.DivElement.JSChart=this,this.JSChartContainer.Draw()},this.CreateToolbar=function(t){},this.CreateSettingDiv=function(t){},this.Focus=function(){this.CanvasElement&&this.CanvasElement.focus()},this.ChangeSymbol=function(t,e){this.JSChartContainer&&this.JSChartContainer.ChangeSymbol(t,e)},this.ChangeIndex=function(t,e,a){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeIndex&&this.JSChartContainer.ChangeIndex(t,e,a)},this.AddIndexWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddIndexWindow&&this.JSChartContainer.AddIndexWindow(t,e)},this.AddScriptIndexWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddScriptIndexWindow&&this.JSChartContainer.AddScriptIndexWindow(t,e)},this.AddAPIIndexWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddAPIIndexWindow&&this.JSChartContainer.AddAPIIndexWindow(t,e)},this.RemoveIndexWindow=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.RemoveIndexWindow&&this.JSChartContainer.RemoveIndexWindow(t)},this.ChangeScriptIndex=function(t,e,a){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeScriptIndex&&this.JSChartContainer.ChangeScriptIndex(t,e,a)},this.ChangePyScriptIndex=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangePyScriptIndex&&this.JSChartContainer.ChangePyScriptIndex(t,e)},this.GetIndexInfo=function(){return this.JSChartContainer&&"function"==typeof this.JSChartContainer.GetIndexInfo?this.JSChartContainer.GetIndexInfo():[]},this.ChangeInstructionIndex=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeInstructionIndex&&this.JSChartContainer.ChangeInstructionIndex(t,e)},this.ChangeInstructionScriptIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeInstructionIndex&&this.JSChartContainer.ChangeInstructionScriptIndex(t)},this.CancelInstructionIndex=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.CancelInstructionIndex&&this.JSChartContainer.CancelInstructionIndex()},this.ChangePeriod=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangePeriod&&this.JSChartContainer.ChangePeriod(t,e)},this.ChangeRight=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeRight&&this.JSChartContainer.ChangeRight(t)},this.OverlaySymbol=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.OverlaySymbol&&this.JSChartContainer.OverlaySymbol(t,e)},this.DeleteOverlaySymbol=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.DeleteOverlaySymbol&&this.JSChartContainer.DeleteOverlaySymbol(t)},this.SetFirstShowDate=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetFirstShowDate&&this.JSChartContainer.SetFirstShowDate(t)},this.ChangeKLineDrawType=function(t,e,a){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeKLineDrawType&&this.JSChartContainer.ChangeKLineDrawType(t,e,a)},this.ChangeIndexWindowCount=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeIndexWindowCount&&this.JSChartContainer.ChangeIndexWindowCount(t,e)},this.ClearOverlaySymbol=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearOverlaySymbol&&this.JSChartContainer.ClearOverlaySymbol()},this.DeleteKLineInfo=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.DeleteKLineInfo&&this.JSChartContainer.DeleteKLineInfo(t)},this.ClearKLineInfo=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearKLineInfo&&this.JSChartContainer.ClearKLineInfo()},this.AddKLineInfo=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddKLineInfo&&this.JSChartContainer.AddKLineInfo(t,e)},this.ChangMainDataControl=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetMainDataConotrl&&this.JSChartContainer.SetMainDataConotrl(t)},this.AddOverlayIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddOverlayIndex&&this.JSChartContainer.AddOverlayIndex(t)},this.MoveOverlayIndex=function(t,e,a){this.JSChartContainer&&"function"==typeof this.JSChartContainer.MoveOverlayIndex&&this.JSChartContainer.MoveOverlayIndex(t,e,a)},this.MoveOverlayIndexToNewWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.MoveOverlayIndexToNewWindow&&this.JSChartContainer.MoveOverlayIndexToNewWindow(t,e)},this.DeleteOverlayWindowsIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.DeleteOverlayWindowsIndex&&this.JSChartContainer.DeleteOverlayWindowsIndex(t)},this.StopAutoUpdate=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.StopAutoUpdate&&this.JSChartContainer.StopAutoUpdate()},this.ChartDestroy=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChartDestroy&&this.JSChartContainer.ChartDestroy()},this.ChartDestory=this.ChartDestroy,this.SetDepthMapData=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetDepthMapData&&this.JSChartContainer.SetDepthMapData(t,e)},this.ForceLandscape=function(t){this.JSChartContainer&&(D.Chart.Log("[JSChart::ForceLandscape] bForceLandscape="+t),this.JSChartContainer.IsForceLandscape=t)},this.LockIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.LockIndex&&(D.Chart.Log("[JSChart:LockIndex] lockData",t),this.JSChartContainer.LockIndex(t))},this.ChangeTradeDate=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeTradeDate&&(D.Chart.Log("[JSChart:ChangeTradeDate] date",t),this.JSChartContainer.ChangeTradeDate(t))},this.ChangeDayCount=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeDayCount&&(D.Chart.Log("[JSChart:ChangeDayCount] count",t),this.JSChartContainer.ChangeDayCount(t,e))},this.ShowCallAuctionData=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ShowCallAuctionData&&(D.Chart.Log("[JSChart:ShowCallAuctionData] obj, option ",t,e),this.JSChartContainer.ShowCallAuctionData(t,e))},this.StartAnimation=function(t){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.StartAnimation)return D.Chart.Log("[JSChart:StartAnimation] start."),this.JSChartContainer.StartAnimation(t)},this.StopAnimation=function(){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.StopAnimation)return D.Chart.Log("[JSChart:StopAnimation] start."),this.JSChartContainer.StopAnimation()},this.SaveToImage=function(t,e){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.SaveToImage)return this.JSChartContainer.SaveToImage(t,e)},this.SaveToImageUrl=function(t,e){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.SaveToImageUrl)return this.JSChartContainer.SaveToImageUrl(t,e)},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(D.Chart.Log("[JSChart:AddEventCallback] ",t),this.JSChartContainer.AddEventCallback(t))},this.SetLanguage=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetLanguage&&(D.Chart.Log("[JSChart:SetLanguage] ",t),this.JSChartContainer.SetLanguage(t))},this.ChangeIndexTemplate=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeIndexTemplate&&(D.Chart.Log("[JSChart:ChangeIndexTemplate] ",t),this.JSChartContainer.ChangeIndexTemplate(t))},this.SetChartDrawOption=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetChartDrawOption&&(D.Chart.Log("[JSChart:SetChartDrawOption] ",t),this.JSChartContainer.SetChartDrawOption(t))},this.CreateChartDrawPicture=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.CreateChartDrawPicture&&(D.Chart.Log("[JSChart:CreateChartDrawPicture] ",t),this.JSChartContainer.CreateChartDrawPicture(t,e))},this.AddChartDrawPicture=function(t){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddChartDrawPicture)return D.Chart.Log("[JSChart:AddChartDrawPicture] ",t),this.JSChartContainer.AddChartDrawPicture(t)},this.ClearChartDrawPicture=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearChartDrawPicture&&this.JSChartContainer.ClearChartDrawPicture(t,e)},this.PasteChartDrawPicture=function(t,e,a){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.PasteChartDrawPicture)return D.Chart.Log("[JSChart:PasteChartDrawPicture] ",t,e,a),this.JSChartContainer.PasteChartDrawPicture(t,e,a)},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(D.Chart.Log("[JSChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))},this.EnableSplashScreen=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.EnableSplashScreen&&(D.Chart.Log("[JSChart:EnableSplashScreen] "),this.JSChartContainer.EnableSplashScreen(t))},this.Draw=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Draw&&(D.Chart.Log("[JSChart:Draw] "),this.JSChartContainer.Draw())},this.SetFocus=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetFocus&&(D.Chart.Log("[JSChart:SetFocus] "),this.JSChartContainer.SetFocus())},this.ExportData=function(t){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.ExportData)return D.Chart.Log("[JSChart:ExportData] "),this.JSChartContainer.ExportData(t)}}I.LastVersion=null,I.EnableCanvasWillReadFrequently=!1,I.Init=function(t){var e=new I(t);return e.OnSize(),e},I.SetDomain=function(t,e){t&&(ia.Domain=t),e&&(ia.CacheDomain=e)},I.SetPyIndexDomain=function(t){t&&(ia.PyIndexDomain=t)},I.SetStyle=function(t){t&&ia.SetStyle(t)},I.SetTextResource=function(t,e){na.SetTextResource(t,e)},I.GetLocalization=function(){return na},I.GetDevicePixelRatio=function(){return A()},I.CreateGuid=function(){return P()},I.GetResource=function(){return ia},I.GetMinuteTimeStringData=function(){return La},I.GetMinuteCoordinateData=function(){return Ma},I.GetKLineZoom=function(){return Ft},I.GetDivTooltipDataFormat=function(){return _e},I.GetKLineCustomCalulate=function(){return ha},I.SetUSATimeType=function(t){Oa.TimeType=t,Na.TimeType=t,Pa.TimeType=t,Ra.TimeType=t},I.GetChinaFuturesTimeData=function(){return Aa},I.AddPeriodCallback=function(t){Ct.AddPeriodCallback(t)},I.RemovePeriodCallback=function(t){Ct.RemovePeriodCallback(t)},I.RegisterDrawPicture=function(t){return We.RegisterDrawPicture(t)},I.RegisterDrawPictureIonFont=function(t){return We.RegisterIonFont(t)},I.GetInternalTimeData=function(t){switch(t){case"NYMEXTimeData":return Oa;case"COMEXTimeData":return Na;case"NYBOTTimeData":return Pa;case"CBOTTimeData":return Ra;case"LMETimeData":return _a;case"FuturesTimeData":return Aa;case"TOCOMTimeData":return Ba;case"IPETimeData":return ka;default:return null}},I.RegisterExtendChartClass=function(t,e){return de.Add(t,e)},I.RegisterChartPaintClass=function(t,e){return xt.Add(t,e)},I.RegisterScriptIndexChart=function(t,e){return oi.Add(t,e)},I.RegisterDialogClass=function(t,e){return ya.Add(t,e)},I.RegisterChartFrameClass=function(t,e){return W.Add(t,e)},I.ToFixedPoint=function(t){return _(t)},I.ToFixedPoint2=function(t,e){return B(t,e)},I.ToFixedRect=function(t){return k(t)};var w={RECV_KLINE_MATCH:1,RECV_INDEX_DATA:2,RECV_HISTROY_DATA:3,RECV_TRAIN_MOVE_STEP:4,CHART_STATUS:5,BARRAGE_PLAY_END:6,RECV_OVERLAY_INDEX_DATA:7,DBCLICK_KLINE:8,RECV_START_AUTOUPDATE:9,RECV_STOP_AUTOUPDATE:10,ON_CONTEXT_MENU:11,ON_TITLE_DRAW:12,ON_SELECT_RECT:13,RECV_MINUTE_DATA:14,ON_CLICK_INDEXTITLE:15,RECV_KLINE_UPDATE_DATA:16,ON_CLICK_DRAWPICTURE:17,ON_FINISH_DRAWPICTURE:18,ON_INDEXTITLE_DRAW:19,ON_CUSTOM_VERTICAL_DRAW:20,RECV_KLINE_MANUAL_UPDATE_DATA:21,ON_ENABLE_SPLASH_DRAW:22,ON_CLICK_CHART_PAINT:23,ON_DRAW_MINUTE_LAST_POINT:24,ON_DRAW_DEPTH_TOOLTIP:25,ON_CLICK:26,ON_PHONE_TOUCH:27,ON_CLICKUP_CHART_PAINT:28,ON_SPLIT_YCOORDINATE:29,ON_DBCLICK:30,ON_SPLIT_XCOORDINATE:31,ON_KEYDOWN_SELECT_RECT:32,ON_DRAG_SELECT_RECT:33,ON_DRAG_SELECT_RECT_MOUSEUP:34,ON_DRAW_KLINE_LAST_POINT:35,ON_CLICK_CROSSCURSOR_RIGHT:36,ON_PLAY_SOUND:37,ON_CALCULATE_INDEX_OX:38,ON_LOAD_DRAWPICTURE:39,ON_DRAW_COUNTDOWN:41,ON_BIND_DRAWICON:42,ON_DRAW_DEAL_VOL_COLOR:43,ON_DRAW_DEAL_TEXT:44,ON_FILTER_DEAL_DATA:45,ON_FILTER_REPORT_DATA:46,ON_CLICK_REPORT_ROW:47,ON_REPORT_MARKET_STATUS:48,ON_DBCLICK_REPORT_ROW:49,ON_RCLICK_REPORT_ROW:50,ON_CLICK_REPORT_HEADER:51,ON_RCLICK_REPORT_HEADER:52,ON_REPORT_LOCAL_SORT:53,ON_DRAW_REPORT_NAME_COLOR:54,ON_DRAW_CUSTOM_TEXT:55,ON_CLICK_REPORT_TAB:56,ON_CLICK_REPORT_TABMENU:57,ON_DRAW_REPORT_FIXEDROW_TEXT:58,ON_CLICK_REPORT_FIXEDROW:59,ON_RCLICK_REPORT_FIXEDROW:60,ON_KEYDOWN_SELECT_RECT_FIRST:61,ON_CLICK_FRAME_TOOLBAR:62,ON_REPORT_DRAG_ROW:63,ON_MOUSE_MOVE:64,ON_MINUTE_PAGE_CHANGED:65,ON_DRAG_SUB_SELECT_RECT:66,ON_DRAG_SUB_SELECT_RECT_MOUSEUP:67,ON_KEYBOARD_SELECTED:68,ON_KEYBOARD_MOUSEUP:69,ON_CLICK_DRAWPICTURE_BUTTON:70,ON_FINISH_MOVE_DRAWPICTURE:71,ON_CLICK_EXTENDCHART_BUTTON:72,ON_SCROLLBAR_SLIDER_CHANGED:73,ON_DISPLAY_LATEST:74,ON_FORMAT_CORSSCURSOR_Y_TEXT:75,ON_FORMAT_INDEX_OUT_TEXT:76,ON_FORMAT_CORSSCURSOR_X_TEXT:77,ON_REPORT_MOUSE_MOVE:78,ON_REPORT_DRAG_HEADER_TOOLTIP:88,ON_REPORT_DRAW_CUSTOM_ICON:89,ON_REPORT_DRAW_KLINE:90,ON_DBCLICK_REPORT_DRAG_COLUMN_WIDTH:91,ON_REPORT_FORMAT_DRAW_INFO:92,ON_FORMAT_INDEX_Y_LABEL:93,ON_FORMAT_OVERLAY_INDEX_Y_LABEL:94,ON_CUSTOM_UNCHANGE_KLINE_COLOR:95,ON_CLICK_TITLE_BUTTON:96,ON_CUSTOM_LEFT_TOOLBAR:97,ON_CUSTOM_RIGHT_TOOLBAR:98,ON_REPORT_DRAG_COLUMN_WIDTH:99,ON_CUSTOM_UNCHANGE_KLINE_TITLE_COLOR:100,ON_CHANGE_KLINE_PERIOD:101},F={OP_SCROLL_LEFT:1,OP_SCROLL_RIGHT:2,OP_ZOOM_OUT:3,OP_ZOOM_IN:4,OP_GOTO_HOME:5,OP_GOTO_END:6,OP_LEFT_ZOOM_OUT:7,OP_LEFT_ZOOM_IN:8,OP_RIGHT_ZOOM_OUT:9,OP_RIGHT_ZOOM_IN:10,OP_SCROLL_GOTO:11,OP_SET_SELECTRECT:12,OP_SET_SUB_SELECTRECT:13,OP_CORSSCURSOR_GOTO:14,OP_SCROOLBAR_SLIDER_CHANGED:15,OP_GOTO:16},E={DISABLE_DRAG_ID:0,CLICK_TOUCH_MODE_ID:3},b={CLOSE_BEFOREOPEN_ID:1,CLOSE_OVERLAY_INDEX:2,MODIFY_INDEX_PARAM:3,CHANGE_INDEX:4,CLOSE_INDEX_WINDOW:5,OVERLAY_INDEX:6,MODIFY_OVERLAY_INDEX_PARAM:7,CHIP_DEFULT:8,CHIP_LONG:9,CHIP_RECENT:10,MAX_MIN_WINDOW:11,TITLE_WINDOW:12,DRAW_PICTURE_DELETE:13,DRAW_PICTURE_SETTING:14,EXTEND_CHART_BUTTON_ID:15,EXPORT_DATA:16,DRAW_PICTURE_BUTTON_1:17,DRAW_PICTURE_BUTTON_2:18,DRAW_PICTURE_BUTTON_3:19,DRAW_PICTURE_BUTTON_4:20,DRAW_PICTURE_BUTTON_5:21,DRAW_PICTURE_BUTTON_6:22,DRAW_PICTURE_BUTTON_7:23,DRAW_PICTURE_BUTTON_8:24,DRAW_PICTURE_BUTTON_9:25,DRAW_PICTURE_BUTTON_10:26,DRAW_PICTURE_BUTTON_11:27,DRAW_PICTURE_BUTTON_12:28,DRAW_PICTURE_BUTTON_13:29,DRAW_PICTURE_BUTTON_14:30,DRAW_PICTURE_BUTTON_15:31,DRAW_PICTURE_BUTTON_16:32,DRAW_PICTURE_BUTTON_17:33,DRAW_PICTURE_BUTTON_18:34,POP_MENU_1:40,POP_MENU_2:41,POP_MENU_3:42,INDEX_NAME_BUTTON:43},L={KLINE_ORDERFLOW:99,MINUTE_MULTI_DAY_EXTENDDATA:21,MINUTE_DAY_EXTENDDATA:21,MINUTE_BEFOREOPEN_EXTENDDATA:21,MINUTE_AFTERCLOSE_EXTENDDATA:21,KLINE_COLOR_DATA:66,KLINE_DAY_EXTENDDATA:25,KLINE_MINUTE_EXTENDDATA:25,KLINE_HEATMAP:67};function M(t,e){var a=this;this.ClassName="JSChartContainer";if(this.Frame,this.ChartPaint=new Array,this.ChartPaintEx=[],this.ChartInfo=new Array,this.ChartInfoPaint,this.ExtendChartPaint=new Array,this.TitlePaint=new Array,this.OverlayChartPaint=new Array,this.ChartDrawPicture=new Array,this.ChartDrawStorage,this.ChartDrawOption={IsLockScreen:!1,Zoom:1,Magnet:null},this.CurrentChartDrawPicture=null,this.SelectChartDrawPicture=null,this.MoveOnChartDrawPicture=null,this.IsDrawPictureXY=!1,this.EnableShowCorssCursor={DrawPicture:!0},this.ChartPictureMenu,this.ChartCorssCursor,this.IsClickShowCorssCursor=!1,this.ChartSplashPaint=null,this.LoadDataSplashTitle="数据加载中",e)this.Canvas=e.getContext("2d"),this.OffscreenCanvasElement=e,this.ShowCanvas=t.getContext("2d");else{if(!0===I.EnableCanvasWillReadFrequently){this.Canvas=t.getContext("2d",{willReadFrequently:!0})}else this.Canvas=t.getContext("2d");this.ShowCanvas=null}this.UIElement=t,this.MouseDrag,this.PhoneTouchInfo,this.DragMode=1,this.EnableBorderDrag=!0,this.BorderDrag,this.YDrag,this.TouchStatus={CorssCursorShow:!1},this.DragTimer,this.EnableScrollUpDown=!1,this.ClickChartTimer=null,this.CursorIndex=0,this.LastPoint=new V,this.IsForceLandscape=!1,this.CorssCursorTouchEnd=!1,this.IsTitleShowLatestData=!1,this.StepPixel=4,this.ZoomStepPixel=5,this.TouchMoveMinAngle=70,this.EnableAnimation=!1,this.Tooltip=document.createElement("div"),this.Tooltip.className="jschart-tooltip",this.Tooltip.style.background=ia.TooltipBGColor,this.Tooltip.style.opacity=ia.TooltipAlpha,this.Tooltip.style["pointer-events"]="none",this.Tooltip.id=P(),t.parentNode.appendChild(this.Tooltip),this.IsShowTooltip=!0,this.SelectRect=document.createElement("div"),this.SelectRect.className="jschart-selectrect",this.SelectRect.style.background=ia.SelectRectBGColor,this.SelectRect.style["pointer-events"]="none",this.SelectRect.id=P(),this.SelectRect.oncontextmenu=function(){return!1},t.parentNode.appendChild(this.SelectRect),this.SelectRectRightMenu,this.FrameSplitData=new C.default,this.FrameSplitData.set("double",new ea),this.FrameSplitData.set("price",new function(){this.newMethod=ea,this.newMethod(),delete this.newMethod,this.Data=[[1e-6,2e-6,1e-6,1e-7],[2e-6,4e-6,2e-6,2e-7],[4e-6,5e-6,4e-6,1e-7],[5e-6,1e-5,5e-6,5e-7],[1e-5,2e-5,1e-5,1e-6],[2e-5,4e-5,2e-5,2e-6],[4e-5,5e-5,4e-5,1e-6],[5e-5,1e-4,5e-5,5e-6],[1e-4,2e-4,1e-4,1e-5],[2e-4,4e-4,2e-4,2e-5],[4e-4,5e-4,4e-4,1e-5],[5e-4,.001,5e-4,5e-5],[.001,.002,.001,1e-4],[.002,.004,.002,1e-4],[.004,.005,.004,1e-4],[.005,.01,.005,5e-4],[.01,.02,.01,.001],[.02,.04,.02,.001],[.04,.05,.04,.001],[.05,.1,.05,.001],[.1,.2,.1,.01],[.2,.4,.2,.01],[.4,.5,.2,.01],[.5,.8,.2,.01],[.8,1,.5,.01],[1,2,.5,.05],[2,4,.5,.05],[4,5,.5,.05],[5,10,.5,.05],[10,12,10,2],[20,40,20,5],[40,50,40,2],[50,100,50,10],[100,200,100,10],[200,400,200,20],[400,500,400,10],[500,1e3,500,50],[1e3,2e3,1e3,50],[2e3,4e3,2e3,50],[4e3,5e3,4e3,50],[5e3,1e4,5e3,100],[1e4,2e4,1e4,1e3],[2e4,4e4,2e4,2e3],[4e4,5e4,4e4,1e3],[5e4,1e5,5e4,5e3],[1e5,2e5,1e5,1e4],[2e5,4e5,2e5,2e4],[4e5,5e5,4e5,1e4],[5e5,1e6,5e5,5e4],[1e6,2e6,1e6,1e5],[2e6,4e6,2e6,2e5],[4e6,5e6,4e6,1e5],[5e6,1e7,5e6,5e5],[1e7,2e7,1e7,1e6],[2e7,4e7,2e7,2e6],[4e7,5e7,4e7,1e6],[5e7,1e8,5e7,5e6],[1e8,2e8,1e8,1e7],[2e8,4e8,2e8,2e7],[4e8,5e8,4e8,1e7],[5e8,1e9,5e8,5e7],[1e9,2e9,1e9,1e8],[2e9,4e9,2e9,2e8],[4e9,5e9,4e9,1e8],[5e9,1e10,5e9,5e8]]}),this.mapEvent=new C.default,this.IsOnTouch=!1,this.TouchDrawCount=0,this.DisableMouse=!1,this.LanguageID=ra.LANGUAGE_CHINESE_ID,this.PressTime=500,this.NetworkFilter,this.LastMouseStatus={MouseOnToolbar:null},this.ClickDownPoint,this.IsDestroy=!1,this.EnableYDrag={Left:!1,Right:!1},this.EnableZoomIndexWindow=!1,this.EnableVerifyRecvData=!1,this.PhoneDBClick=new function(){this.Start=[],this.Clear=function(){this.Start=[]},this.AddTouchStart=function(t,e,a){if(this.Start.length>0){var i=a-this.Start[this.Start.length-1].Time;i>0&&i<300?this.Start.push({X:t,Y:e,Time:a}):this.Start=[]}else this.Start.push({X:t,Y:e,Time:a})},this.IsVaildDBClick=function(){return 2==this.Start.length},this.AddTouchEnd=function(t){if(!(this.Start.length<=0)){var e=t-this.Start[this.Start.length-1].Time;e>=0&&e<150||(this.Start=[])}}},this.SelectedChart={EnableSelected:!1,EnableMoveOn:!1,Selected:{Identify:null},MoveOn:{Identify:null}},this.IndexChartDrag,this.EnableIndexChartDrag=!1,this.GlobalOption={IsValueFullRange:!1,IsDisplayLatest:!1},this.VerticalDrag,this.EnableVerticalDrag=!1,this.ClickModel={IsShowCorssCursor:!1},this.EnableClickModel=!1,this.DisplayLatestOption={Timer:null,Enable:!1,DelayTime:18e4,LastPoint:null},this.StopDisplayLatest=function(){this.GlobalOption.IsDisplayLatest=!1,this.DisplayLatestOption.Timer&&(clearTimeout(this.DisplayLatestOption.Timer),this.DisplayLatestOption.Timer=null)},this.StartStopDisplayLatest=function(){var t=this;this.StopDisplayLatest(),this.DisplayLatestOption.Enable&&(this.DisplayLatestOption.Timer=setTimeout(function(){t.DisplayLatest&&(D.Chart.Log("[JSChartContainer:StartStopDisplayLatest] call this.DisplayLatest()"),t.DisplayLatest())},this.DisplayLatestOption.DelayTime))},this.ChartDestroy=function(){this.IsDestroy=!0,this.StopAutoUpdate(),null!=this.GetLatestVersionTimer&&(clearTimeout(this.GetLatestVersionTimer),this.GetLatestVersionTimer=null)},this.ChartDestory=this.ChartDestroy,this.GetLatestVersionTimer=null,this.GetLatestVersion=function(){var t=this;null!=this.GetLatestVersionTimer&&(clearTimeout(this.GetLatestVersionTimer),this.GetLatestVersionTimer=null);var e=18e4+1e3*Math.floor(50*Math.random());D.Chart.Log("[JSChartContainer::GetLatestVersion] wait for get hqchart latest version. ",e),this.GetLatestVersionTimer=setTimeout(function(){var e=0,a=0;t.Frame&&t.Frame.ChartBorder&&(e=t.Frame.ChartBorder.GetChartWidth(),a=t.Frame.ChartBorder.GetChartHeight());var i=atob("aHR0cHM6Ly9ocWNoYXJ0LnplYWxpbmsuY29tL2FwaS9HZXRWZXJzaW9u")+"?width="+e+"&height="+a+"&type=h5";null==I.LastVersion&&v.HttpRequest({url:i,type:"get",dataType:"json",async:!0,success:function(t){D.Chart.Log("[JSChartContainer::GetLatestVersion] hqchart latest version. ",t),I.LastVersion=t},error:function(t,e,a){D.Chart.Log("[JSChartContainer::GetLatestVersion] Get HQChart latest version failed.",t)}})},e)},this.SetFocus=function(){this.UIElement&&this.UIElement.focus()},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){return this.mapEvent.has(t)?this.mapEvent.get(t):null},this.GetIndexEvent=function(){return this.GetEventCallback(w.RECV_INDEX_DATA)},this.GetOverlayIndexEvent=function(){return this.GetEventCallback(w.RECV_OVERLAY_INDEX_DATA)},t.onmousemove=function(t){a.UIOnMouseMove(t)},t.oncontextmenu=function(t){return a.UIOnContextMenu(t)},t.ondblclick=function(t){a.UIOnDblClick(t)},t.onmousedown=function(t){a.UIOnMouseDown(t)},t.onmouseout=function(t){a.UIOnMounseOut(t)},t.onmouseleave=function(t){a.UIOnMouseleave(t)},this.UIOnMouseMove=function(t){var e=A(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;if(this.StopDisplayLatest(),this.MoveOnChartDrawPicture=null,!(this.ChartSplashPaint&&1==this.ChartSplashPaint.IsEnableSplash||1==this.DisableMouse||this.BorderDrag||this.YDrag||this.IndexChartDrag)){var r={X:a,Y:i,IsInClient:this.IsMouseOnClient(a,i)};this.LastMouseStatus.OnMouseMove=r,this.LastMouseStatus.MoveOnPoint={X:a,Y:i};var n=this.GetEventCallback(w.ON_MOUSE_MOVE),o=this.TitlePaint[0];n&&o&&(o.OnMouseMoveEvent=n),this.MoveOnPoint={X:a,Y:i},this.OnMouseMove(a,i,t),o&&(o.OnMouseMoveEvent=null),this.StartStopDisplayLatest()}},this.IsMouseOnClient=function(t,e){var a={Left:this.Frame.ChartBorder.GetLeft(),Top:this.Frame.ChartBorder.GetTop(),Width:this.Frame.ChartBorder.GetWidth(),Height:this.Frame.ChartBorder.GetHeight()};return a.Right=a.Left+a.Width,a.Bottom=a.Top+a.Height,t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom},this.UIOnContextMenu=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=t.clientX-this.UIElement.getBoundingClientRect().left,a=t.clientY-this.UIElement.getBoundingClientRect().top;return"function"==typeof this.OnRightMenu&&this.OnRightMenu(e,a,t),!1}},this.UIOnDblClick=function(t){var e=A(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;this.OnDoubleClick(a,i,t)},this.TryYDrag=function(t,e){if(!this.EnableYDrag)return null;if(!this.EnableYDrag.Left&&!this.EnableYDrag.Right)return null;if(!this.Frame||!this.Frame.PtInFrameY)return null;var a=this.Frame.PtInFrameY(t,e);return!a||a.Index<0||1==a.IsOverlay?null:a.Left&&this.EnableYDrag.Left&&this.Frame.IsEnableDragY(a.Index)?a:a.Right&&this.EnableYDrag.Right&&this.Frame.IsEnableDragY(a.Index)?a:null},this.TryUpDownDrag=function(t,e){var a=this.Frame.PtInFrame(t,e);if(a<0)return null;var i=this.Frame.SubFrame[a];if(!i||!i.Frame)return null;var r=i.Frame;return r.YSplitOperator&&r.YSplitOperator.FixedYMaxMin?{Index:a,X:t,Y:e}:null},this.TryRectSelectDrag=function(t,e){var a=this.GetRectSelectPaint();return a?a.GetPointCount()<=0?null:{Item:a.PtInPaint(t,e),X:t,Y:e}:null},this.TryClickCrossCursor=function(t,e,a){if(this.ChartCorssCursor){var i=this.ChartCorssCursor.PtInButton(t,e);if(!i)return!1;var r=this.GetEventCallback(w.ON_CLICK_CROSSCURSOR_RIGHT);if(r&&r.Callback){var n={Button:i,e:a};r.Callback(r,n,this)}return!0}},this.TryClickButton=function(t,e,a){var i=this.Frame.PtInButtons(t,e);return i&&this.ClickFrameButton?(this.ClickFrameButton(i,a),!0):(i=this.PtInExtendChartButtons(t,e))&&this.ClickExtendChartButton?(this.ClickExtendChartButton(i,a),!0):(i=this.PtInDrawPictureButtons(t,e))&&this.ClickDrawPictureButton?(this.ClickDrawPictureButton(i,a),!0):!(!(i=this.PtInTitleButtons(t,e))||!this.ClickTitleButton)&&(this.ClickTitleButton(i,a),!0)},this.UIOnMouseDown=function(t){var e=this;if(this.MoveOnChartDrawPicture=null,!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.ClickDownPoint={X:t.clientX,Y:t.clientY},this.IsOnTouch=!0,this.BorderDrag=null,this.YDrag=null,this.UpDownDrag=null,this.RectSelectDrag=null,this.IndexChartDrag=null;var a=A(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a;if(!this.TryClickButton(i,r,t)&&!this.TryClickCrossCursor(i,r,t)&&!(this.TryClickChartTooltipData&&this.TryClickChartTooltipData(i,r,t)||this.TryClickLock&&this.TryClickLock(i,r))){this.HideSelectRect(),this.SelectRectRightMenu&&this.SelectRectRightMenu.Hide(),this.ChartPictureMenu&&this.ChartPictureMenu.Hide();var n=this.GetRectSelectPaint();if(n&&n.GetPointCount()>0){var o=n.PtInPaint(i,r);if(o)if(4==o.Type){this.UIElement.style.cursor="pointer";var s={X:t.clientX};this.GetXDataIndex(s)&&(this.RectSelectDrag={DataIndex:s.DataIndex,Type:o.Type,X:t.clientX},D.Chart.Log("[JSChartContainer::UIOnMouseDown] drag sub rect select ",s))}else this.UIElement.style.cursor="ew-resize",this.RectSelectDrag={Index:o.PointIndex,Type:o.Type},D.Chart.Log("[JSChartContainer::UIOnMouseDown] drag rect select ",o)}if(!this.RectSelectDrag&&this.ClearRectSelect(!1)&&this.Draw(),this.EnableBorderDrag&&this.Frame){var h=this.Frame.PtInFrameBorder(i,r);h&&h.Index>=0&&(this.UIElement.style.cursor="n-resize",this.BorderDrag={Index:h.Index},D.Chart.Log("[JSChartContainer::UIOnMouseDown] DragBorder ",h))}if(!this.BorderDrag){var l=this.TryYDrag(i,r);if(l)this.UIElement.style.cursor=0==l.Position?"n-resize":"row-resize",this.YDrag=l,D.Chart.Log("[JSChartContainer::UIOnMouseDown] dragY ",l);else{var u=this.TryUpDownDrag(i,r);u&&(this.UIElement.style.cursor="pointer",this.UpDownDrag=u,D.Chart.Log("[JSChartContainer::UIOnMouseDown] dragUpDown ",u))}}if(0!=this.DragMode){var c={Click:{},LastMove:{},CurrentMove:{}};c.Click.X=t.clientX,c.Click.Y=t.clientY,c.Click.IsInFrameBottom=this.Frame.PtInFrameBottom(i,r),c.LastMove.X=t.clientX,c.LastMove.Y=t.clientY,this.MouseDrag=c;var f=this.GetActiveDrawPicture(),d={Chart:this.SelectedChart.Selected.Chart,Identify:this.SelectedChart.Selected.Identify};if(this.SelectChartDrawPicture=null,this.BorderDrag);else if(this.YDrag||this.RectSelectDrag);else if(this.CurrentChartDrawPicture){this.UpDownDrag=null;var C=this.CurrentChartDrawPicture;2==C.Status?this.SetChartDrawPictureThirdPoint(c.Click.X,c.Click.Y):(this.SetChartDrawPictureFirstPoint(c.Click.X,c.Click.Y),this.FinishChartDrawPicturePoint()&&(C.IsDrawMain?this.Draw():this.DrawDynamicInfo())),!f.Select.Guid||this.CurrentChartDrawPicture&&f.Select.Guid==this.CurrentChartDrawPicture.Guid||f.Select.Chart.IsDrawMain&&this.Draw()}else{var p={};if(p.X=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,p.Y=(t.clientY-this.UIElement.getBoundingClientRect().top)*a,this.GetChartDrawPictureByPoint(p)){if(1==p.ChartDrawPicture.EnableMove){this.UpDownDrag=null,this.CurrentChartDrawPicture=p.ChartDrawPicture,this.SelectChartDrawPicture=p.ChartDrawPicture;var m=!1;f.Select.Guid&&f.Select.Chart&&f.Select.Chart.IsDrawMain?m=!0:p.ChartDrawPicture.IsDrawMain&&(m=!0),m&&this.Draw(),p.ChartDrawPicture.Status=20,p.ChartDrawPicture.ValueToPoint(),p.ChartDrawPicture.MovePointIndex=p.PointIndex,this.SelectChartDrawPicture.DragInfo={Click:{X:t.clientX,Y:t.clientY}}}else this.CurrentChartDrawPicture=null,this.SelectChartDrawPicture=null;var v=this.GetEventCallback(w.ON_CLICK_DRAWPICTURE);if(v&&v.Callback){var g={DrawPicture:p.ChartDrawPicture};v.Callback(v,g,this)}else this.OnSelectChartPicture(p.ChartDrawPicture)}else{null!=this.ClickChartTimer&&(clearTimeout(this.ClickChartTimer),this.ClickChartTimer=null);var S=this,T={X:this.ClickDownPoint.X,Y:this.ClickDownPoint.Y};this.ClickChartTimer=setTimeout(function(){S.TryClickPaintEvent(w.ON_CLICK_CHART_PAINT,T,t)},250);var I=!1;if(this.SelectedChart.EnableSelected){var y=this.PtInChart(i,r);y?(this.SelectedChart.Selected.Identify!=y.Identify&&(this.SelectedChart.Selected.Identify=y.Identify,this.SelectedChart.Selected.Chart=y.Chart,I=!0),this.EnableIndexChartDrag&&(this.IndexChartDrag={SelectedChart:y,LastMove:{X:i,Y:r},Click:{X:i,Y:r}},this.IndexChartDrag.Info=this.GetSelectedChartInfo(y),this.IndexChartDrag.Info&&(this.IndexChartDrag.Info.FrameID=this.Frame.PtInFrame(i,r)))):this.SelectedChart.Selected.Identify&&(this.SelectedChart.Selected.Identify=null,this.SelectedChart.Selected.Chart=null,I=!0)}else this.SelectedChart.Selected.Identify&&(this.SelectedChart.Selected.Identify=null,I=!0);if(null!=f.Select.Guid&&null==this.SelectChartDrawPicture||I){var x=0;if(f.Select.Guid&&f.Select.Chart&&f.Select.Chart.IsDrawMain&&(x=1),I){var F=d.Chart;F&&F.SetSelectedStatus&&(F.SetSelectedStatus(0),x=1),(F=this.SelectedChart.Selected.Chart)&&F.SetSelectedStatus&&(F.SetSelectedStatus(1),x=1)}1==x?this.Draw():this.DrawDynamicInfo()}}}document.onmousemove=function(t){e.DocOnMouseMove(t)},document.onmouseup=function(t){e.DocOnMouseUp(t)}}}}},this.DocOnMouseMove=function(e){if(!this.ChartSplashPaint||1!=this.IsEnableSplash){var a=this.MouseDrag;if(a){var i=Math.abs(a.LastMove.X-e.clientX),r=Math.abs(a.LastMove.Y-e.clientY),n=this.RectSelectDrag&&this.RectSelectDrag.Index>=0,o=this.RectSelectDrag&&4==this.RectSelectDrag.Type;if(a.CurrentMove&&(a.CurrentMove.X=e.clientX,a.CurrentMove.Y=e.clientY),this.BorderDrag&&this.BorderDrag.Index>=0){if(Math.abs(a.LastMove.Y-e.clientY)<5)return;var s=e.clientY-a.LastMove.Y;this.OnMoveFromeBorder(this.BorderDrag.Index,s),a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}else if(this.YDrag&&this.YDrag.Index>=0){if(r<5)return;s=e.clientY-a.LastMove.Y;D.Chart.Log("[JSChartContainer::DocOnMouseMove] YDrag ",this.YDrag,s),this.OnZoomUpDownFrameY(this.YDrag,s),a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}else if(this.IndexChartDrag&&this.IndexChartDrag.SelectedChart){if(Math.abs(a.LastMove.Y-e.clientY)<2&&Math.abs(a.LastMove.X-e.clientX)<2)return;var h=this.GetExtendChartByClassName("DragMovePaint");if(h&&h.Chart){var l=A(),u=(e.clientX-this.UIElement.getBoundingClientRect().left)*l,c=(e.clientY-this.UIElement.getBoundingClientRect().top)*l;h.Chart.Point={X:u,Y:c},h.Chart.IsShow=!0,h.Chart.Info=this.IndexChartDrag.Info,this.DrawDynamicInfo()}this.IndexChartDrag.LastMove.X=u,this.IndexChartDrag.LastMove.Y=c,a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}else if(this.CurrentChartDrawPicture){var f=this.CurrentChartDrawPicture;if(1==f.Status||2==f.Status){if(Math.abs(a.LastMove.X-e.clientX)<5&&Math.abs(a.LastMove.Y-e.clientY)<5)return;this.SetChartDrawPictureSecondPoint(e.clientX,e.clientY)&&this.DrawDynamicInfo()}else if(3==f.Status)this.SetChartDrawPictureThirdPoint(e.clientX,e.clientY)&&this.DrawDynamicInfo();else if(20==f.Status){if(Math.abs(a.LastMove.X-e.clientX)<5&&Math.abs(a.LastMove.Y-e.clientY)<1)return;if(this.SelectChartDrawPicture&&this.SelectChartDrawPicture.EnableCtrlMove&&!e.ctrlKey)return;this.SelectChartDrawPicture&&this.SelectChartDrawPicture.DragInfo&&(this.SelectChartDrawPicture.DragInfo.Move={X:e.clientX,Y:e.client}),this.MoveChartDrawPicture(e.clientX-a.LastMove.X,e.clientY-a.LastMove.Y,!1,a)&&this.DrawDynamicInfo()}a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}else if(1==this.DragMode||n||o)this.OnDragMode_One({X:i,Y:r},e);else if(2==this.DragMode){var d=Math.abs(a.LastMove.Y-e.clientY);if(i<5&&d<5)return;this.UIElement.style.cursor="default";u=a.Click.X-t.getBoundingClientRect().left,c=a.Click.Y-t.getBoundingClientRect().top;var C=e.clientX-t.getBoundingClientRect().left,p=e.clientY-t.getBoundingClientRect().top;this.ShowSelectRect(u,c,C,p),a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}}}},this.OnDragMode_One=function(t,e){var a=t.X,i=t.Y,r=this.MouseDrag;if(!(a<5&&i<5)){var n=!1,o=!1;if(i>=5&&this.UpDownDrag&&this.UpDownDrag.Index>=0){var s=e.clientY-r.LastMove.Y;D.Chart.Log("[JSChartContainer::OnDragMode_One] UpDownDrag ",this.UpDownDrag,s),this.UIElement.style.cursor="pointer",this.OnUpDonwFrameY(this.UpDownDrag,s)&&(n=!0,o=!0),r.LastMove.Y=e.clientY}if(a>=5){if(this.RectSelectDrag){if(this.RectSelectDrag.Index>=0){var h={X:e.clientX,Y:e.clientY,PointIndex:this.RectSelectDrag.Index,Name:"MoveRectSelectLine"};this.MoveRectSelectPoint(h)&&(n=!0)}else if(4===this.RectSelectDrag.Type){h={X:e.clientX};if(!this.GetXDataIndex(h))return;if(h.DataIndex==this.RectSelectDrag.DataIndex)return;var l=h.DataIndex-this.RectSelectDrag.DataIndex,u=!0;if(l>0&&(u=!1),!this.MoveSubRectSelect({Step:Math.abs(l),IsLeft:u,X:e.clientX,Y:e.clientY}))return;this.RectSelectDrag.DataIndex=h.DataIndex,this.RectSelectDrag.X=e.clientX,n=!0}}else{u=!0;r.LastMove.X<e.clientX&&(u=!1);var c="pointer";if(r.Click.IsInFrameBottom&&(c="ew-resize"),a<this.GetMoveOneStepWidth())return this.UIElement.style.cursor=c,void(n&&this.Draw());r.Click&&r.Click.IsInFrameBottom?this.XCoordinateZoom(a,u)&&(this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),n=!0):this.DataMove(a,u)?(this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),n=!0):o||this.DragDownloadData&&this.DragDownloadData(),this.UIElement.style.cursor=c}r.LastMove.X=e.clientX}n&&(this.Draw(),this.OnKLinePageChange("datamove"))}},this.GetXDataIndex=function(e){if(!this.ChartPaint[0]||!this.ChartPaint[0].Data)return!1;var a=this.ChartPaint[0].Data;if(!this.Frame.SubFrame[0])return!1;var i=this.Frame.SubFrame[0].Frame,r=A(),n=(e.X-t.getBoundingClientRect().left)*r,o=i.GetXData(n),s=(o=parseInt(o.toFixed(0)))+a.DataOffset;s>=a.Data.length&&(s=a.Data.length-1);var h=a.Data[s];return e.DataIndex=s,e.Item=h,!0},this.DocOnMouseUp=function(e){document.onmousemove=null,document.onmouseup=null;var a="MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName,i=this.RectSelectDrag&&this.RectSelectDrag.Index>=0,r=this.RectSelectDrag&&4==this.RectSelectDrag.Type,n=!0;if(this.CurrentChartDrawPicture){var o=this.CurrentChartDrawPicture;2==o.Status||1==o.Status||3==o.Status?(o.PointStatus=o.Status,this.FinishChartDrawPicturePoint()?this.DrawDynamicInfo():n=!1):20==o.Status&&this.FinishMoveChartDrawPicture()&&this.DrawDynamicInfo()}else if(this.IndexChartDrag&&this.IndexChartDrag.SelectedChart){var s=this.GetExtendChartByClassName("DragMovePaint");s&&s.Chart&&s.Chart.Clear(),this.OnDragChart(this.IndexChartDrag)||this.DrawDynamicInfo(),this.UIElement.style.cursor="default"}else if(i)this.OnDragSelectRectMouseUp&&this.OnDragSelectRectMouseUp(e);else if(r)this.OnDragSubSelectRectMouseUp&&this.OnDragSubSelectRectMouseUp(e);else if(a)this.OnMinuteSelectRectMouseUp&&this.OnMinuteSelectRectMouseUp(e);else if(2==this.DragMode){var h=this.MouseDrag;h.LastMove.X=e.clientX,h.LastMove.Y=e.clientY;var l=new H,u=A();if(l.XStart=(h.Click.X-t.getBoundingClientRect().left)*u,l.YStart=(h.Click.Y-t.getBoundingClientRect().top)*u,l.XEnd=(h.LastMove.X-t.getBoundingClientRect().left)*u,l.YEnd=(h.LastMove.Y-t.getBoundingClientRect().top)*u,l.JSChartContainer=this,l.Stock={Symbol:this.Symbol,Name:this.Name},!this.BorderDrag&&this.GetSelectRectData(l)){var c=this.GetEventCallback(w.ON_SELECT_RECT),f=this.GetRectSelectPaint(),d=!0;if(c&&c.Callback){var C={X:h.LastMove.X-t.getBoundingClientRect().left,Y:h.LastMove.Y-t.getBoundingClientRect().top,SelectData:l,RectSelectPaint:f,IsShowMenu:!0};c.Callback(c,C,this),d=C.IsShowMenu}a?(this.HideSelectRect(),this.UpdateSelectRect(l.Start,l.End)):d&&this.SelectRectRightMenu&&(e.data={Chart:this,X:h.LastMove.X-t.getBoundingClientRect().left,Y:h.LastMove.Y-t.getBoundingClientRect().top,SelectData:l,RectSelectPaint:f},this.SelectRectRightMenu.DoModal(e))}else this.TryClickPaintEvent(w.ON_CLICKUP_CHART_PAINT,this.ClickDownPoint,e)}else this.TryClickPaintEvent(w.ON_CLICKUP_CHART_PAINT,this.ClickDownPoint,e),this.ClickEvent(e);D.Chart.Log("[KLineChartContainer::document.onmouseup]",e),this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.DragInfo=null),this.UIElement.style.cursor="default",this.MouseDrag=null,this.ClickDownPoint=null,this.IsOnTouch=!1,this.BorderDrag&&this.BorderDrag.Index>=0&&this.Frame.SaveSubFrameHeightRate(),this.BorderDrag=null,this.YDrag=null,this.UpDownDrag=null,this.RectSelectDrag=null,this.IndexChartDrag=null,!0===n&&(this.CurrentChartDrawPicture=null)},this.UIOnMounseOut=function(t){D.Chart.Log("[KLineChartContainer::UIOnMounseOut]",t),this.UIOnMouseMove(t)},this.UIOnMouseleave=function(t){D.Chart.Log("[KLineChartContainer::UIOnMouseleave]",t)},this.OnDragChart=function(t){if(!t)return!1;var e=t.Info,a=t.LastMove,i=e.FrameID,r=this.Frame.PtInFrame(a.X,a.Y);return r<0?-3==r&&this.MoveIndexToNewWindow({WindowIndex:i,IndexID:e.IndexID},{Operator:0}):i!=r&&this.MoveIndex({WindowIndex:i,IndexID:e.IndexID},{WindowIndex:r},{Operator:0})},this.GetSelectedChartInfo=function(t){if(!t)return null;var e={Type:0},a=t.Identify;if("Main-KLine"==a)e.Name=this.Name,e.Symbol=this.Symbol,e.Type=ge.MAIN_KLINE;else if(0==a.indexOf("Overlay-KLine-"))e.Name=t.Chart.Title,e.Symbol=t.Chart.Symbol,e.Type=ge.OVERLAY_KLINE;else if(0==a.indexOf("Overlay-Minute-"))e.Name=t.Chart.Title,e.Symbol=t.Chart.Symbol,e.Type=ge.OVERLAY_MINUTE;else if("Minute-Line"==a)e.Name=this.Name,e.Symbol=this.Symbol,e.Type=ge.MAIN_MINUTE;else if("Minute-Average-Line"==a)e.Name=this.Name,e.Symbol=this.Symbol,e.Type=ge.MAIN_AVERAGE_MINUTE;else if("Minute-Vol-Bar"==a)e.Name=this.Name,e.Symbol=this.Symbol,e.Type=ge.MAIN_MINUTE_VOL;else if(0==a.indexOf("guid"))for(var i=0;i<this.TitlePaint.length;++i){var r=this.TitlePaint[i];if("DynamicChartTitlePainting"==r.ClassName){if(r.Identify==a){e.IndexName=r.Title,e.IndexID=a,e.Type=ge.MAIN_INDEX;break}var n=!0,o=!1,s=void 0;try{for(var h,l=(0,f.default)(r.OverlayIndex);!(n=(h=l.next()).done);n=!0){var u=h.value;if(u[0]==a){e.IndexName=u[1].Title,e.IndexID=a,e.Type=ge.OVERLAY_INDEX;break}}}catch(t){o=!0,s=t}finally{try{!n&&l.return&&l.return()}finally{if(o)throw s}}if(e.Type>0)break}}return e},this.ClickEvent=function(e){var a=this.GetEventCallback(w.ON_CLICK);if(!a||!a.Callback)return!1;if(this.ClickDownPoint.X!=e.clientX||this.ClickDownPoint.Y!=e.clientY)return!1;var i=A(),r=(e.clientX-t.getBoundingClientRect().left)*i,n=(e.clientY-t.getBoundingClientRect().top)*i,o={X:e.clientX,Y:e.clientY,FrameID:-1};if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),this.Canvas.isPointInPath(r,n)){var s={},h=this.Frame.GetYData(n,s);if(Te.IsNumber(s.FrameID)&&s.FrameID>=0){var l=this.Frame.GetXData(r);o.FrameID=s.FrameID,o.Data={X:l,Y:h}}}return a.Callback(a,o,this),!0},this.DBClickEvent=function(e,a){var i=this.GetEventCallback(w.ON_DBCLICK);if(!i||!i.Callback)return!1;var r=A(),n=(a.clientX-t.getBoundingClientRect().left)*r,o=(a.clientY-t.getBoundingClientRect().top)*r,s={X:a.clientX,Y:a.clientY,FrameID:-1,ClientPos:-1},h=this.PtInClient(n,o);if(s.ClientPos=h,h>0){var l={},u=this.Frame.GetYData(o,l);if(Te.IsNumber(l.FrameID)&&l.FrameID>=0){var c=this.Frame.GetXData(n);s.FrameID=l.FrameID,s.Data={X:c,Y:u},this.GetDataItem&&(s.Data.Item=this.GetDataItem({ClientPos:h,Index:c,Point:{X:n,Y:o}}))}}return e&&e.SelectedChart&&(s.SelectedChart=this.GetSelectedChartInfo(e.SelectedChart)),i.Callback(i,s,this),!0},this.PtInChartPaintTooltip=function(t,e,a){for(var i=0;i<this.ChartPaint.length;++i){var r=this.ChartPaint[i];if(r.GetTooltipData(t,e,a))return r}return null},this.PtInOverlayChartPaintTooltip=function(t,e,a){for(var i=0;i<this.OverlayChartPaint.length;++i){var r=this.OverlayChartPaint[i];if(r.GetTooltipData(t,e,a))return r}return null},this.TryClickPaintEvent=function(e,a,i){var r=this.GetEventCallback(e);if(r&&r.Callback&&a.X==i.clientX&&a.Y==i.clientY){var n=A(),o=(i.clientX-t.getBoundingClientRect().left)*n,s=(i.clientY-t.getBoundingClientRect().top)*n,h=new It,l=null,u=this.PtInChartPaintTooltip(o,s,h);if(u&&(l={Symbol:this.Symbol,Name:this.Name}),u||(u=this.PtInOverlayChartPaintTooltip(o,s,h))&&(l={Symbol:h.ChartPaint.Symbol,Name:h.ChartPaint.Title}),h.Data){var c={X:i.clientX,Y:i.clientY,Stock:l,Tooltip:h};return r.Callback(r,c,this),!0}}return!1},this.IsPhoneDragging=function(t){var e=t.changedTouches.length,a=t.touches.length;return 1==e&&1==a},this.IsPhonePinching=function(t){var e=t.changedTouches.length,a=t.touches.length;return(1==e||2==e)&&2==a},this.PreventTouchEvent=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()},this.GetToucheData=function(t,e){for(var a=new Array,i=A(),r=0;r<t.touches.length;++r){var n=t.touches[r];e?a.push({clientX:n.clientY*i,clientY:n.clientX*i,pageX:n.pageY*i,pageY:n.pageX*i}):a.push({clientX:n.clientX*i,clientY:n.clientY*i,pageX:n.pageX*i,pageY:n.pageY*i})}return a},this.IsSingleTouch=function(t){return 1==t.touches.length},this.StopDragTimer=function(){Te.IsNumber(this.DragTimer)&&(clearTimeout(this.DragTimer),this.DragTimer=null)},this.GetMoveAngle=function(t,e){var a=Math.abs(t.X-e.X),i=Math.abs(t.Y-e.Y);return 180*Math.atan(a/i)/Math.PI},t.ontouchstart=function(t){a.OnTouchStart(t)},t.ontouchmove=function(t){a.OnTouchMove(t)},t.ontouchend=function(t){a.OnTouchEnd(t)},this.AddPhoneDBClickInfo=function(t,e,a){var i={X:t,Y:e,Time:a};this.PhoneDBClickInfo.Start.push(i)},this.ClearPhoneDBClickInfo=function(){this.PhoneDBClickInfo.Start=[]},this.IsShortPhoneClick=function(t,e,a){},this.OnTouchStart=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.IsOnTouch=!0,this.TouchDrawCount=0,this.PhonePinch=null,this.StopDragTimer();var e=this.IsSingleTouch(t);if((0==this.EnableScrollUpDown||!e||this.DragMode==E.CLICK_TOUCH_MODE_ID&&1==this.TouchStatus.CorssCursorShow)&&t.cancelable&&t.preventDefault(),this.IsPhoneDragging(t)){var a=this.GetToucheData(t,this.IsForceLandscape),i=this.PointAbsoluteToRelative(a[0].clientX,a[0].clientY,!0);if(this.TryClickLock||this.TryClickIndexTitle){var r=i.X,n=i.Y;if(this.TryClickLock&&this.TryClickLock(r,n))return;if(this.TryClickIndexTitle&&this.TryClickIndexTitle(r,n))return}if(this.ClickFrameButton){var o=this.Frame.PtInButtons(i.X,i.Y);if(o)return void this.ClickFrameButton(o,t)}this.EnableVerticalDrag&&(this.VerticalDrag={IsDrag:!1},this.Frame.PtInFrameVertical(i.X,i.Y)&&(this.VerticalDrag.IsDrag=!0));var s=!0;this.ChartDrawOption.IsLockScreen?s=!1:this.DragMode==E.CLICK_TOUCH_MODE_ID?1==this.TouchStatus.CorssCursorShow&&(s=!1):this.DragMode==E.DISABLE_DRAG_ID?s=!1:e||(s=!1),this.VerticalDrag&&(s=!1),this.EnableClickModel&&1==this.ClickModel.IsShowCorssCursor&&(s=!1);var h={Click:{},LastMove:{}};h.Click.X=a[0].clientX,h.Click.Y=a[0].clientY,h.LastMove.X=a[0].clientX,h.LastMove.Y=a[0].clientY,this.MouseDrag=h,this.PhoneTouchInfo={Start:{X:a[0].clientX,Y:a[0].clientY},End:{X:a[0].clientX,Y:a[0].clientY}},this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.IsSelected=!1),this.SelectChartDrawPicture=null;if(this.CurrentChartDrawPicture)return 2==this.CurrentChartDrawPicture.Status?this.SetChartDrawPictureThirdPoint(h.Click.X,h.Click.Y,!0):(this.SetChartDrawPictureFirstPoint(h.Click.X,h.Click.Y,!0),this.FinishChartDrawPicturePoint()&&this.DrawDynamicInfo({Corss:!1,Tooltip:!1})),void(t.cancelable&&t.preventDefault());var l={X:(i=this.PointAbsoluteToRelative(a[0].clientX,a[0].clientY,!0)).X,Y:i.Y};A();if(this.GetChartDrawPictureByPoint(l)){l.ChartDrawPicture.Status=20,l.ChartDrawPicture.ValueToPoint(),l.ChartDrawPicture.MovePointIndex=l.PointIndex,l.ChartDrawPicture.IsSelected=!0,this.CurrentChartDrawPicture=l.ChartDrawPicture,this.SelectChartDrawPicture=l.ChartDrawPicture;var u=this.GetEventCallback(w.ON_CLICK_DRAWPICTURE);if(u&&u.Callback){var c={DrawPicture:l.ChartDrawPicture};u.Callback(u,c,this)}return void(t.cancelable&&t.preventDefault())}if(s){var f=this;this.DragTimer=setTimeout(function(){if(h.Click.X==h.LastMove.X&&h.Click.Y==h.LastMove.Y){f.MouseDrag;f.MouseDrag=null,f.DragMode==E.CLICK_TOUCH_MODE_ID&&(f.TouchStatus.CorssCursorShow=!0),!0===f.EnableClickModel&&(f.ClickModel.IsShowCorssCursor=!0),f.MoveCorssCursor(h.Click,t)}},f.PressTime)}this.EnableZoomIndexWindow&&(this.PhoneDBClick.AddTouchStart(a[0].clientX,a[0].clientY,Date.now()),D.Chart.Log("[JSChartContainer::OnTouchStart] PhoneDBClick ",this.PhoneDBClick)),this.ChartDrawOption.IsLockScreen?this.MouseDrag=null:this.DragMode==E.CLICK_TOUCH_MODE_ID||(this.DragMode==E.DISABLE_DRAG_ID?(this.MouseDrag=null,this.MoveCorssCursor(h.Click,t)):this.EnableClickModel||(this.VerticalDrag?this.VerticalDrag.IsDrag||this.MoveCorssCursor(h.Click,t):this.IsClickShowCorssCursor&&this.MoveCorssCursor(h.Click,t))),this.TouchEvent({EventID:w.ON_PHONE_TOUCH,FunctionName:"OnTouchStart"},t)}else if(this.IsPhonePinching(t)){var d={Start:{},Last:{}};a=this.GetToucheData(t,this.IsForceLandscape);d.Start={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY},d.Last={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY},this.PhonePinch=d,this.SelectChartDrawPicture=null}}},this.OnTouchMove=function(e){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var a=this.GetToucheData(e,this.IsForceLandscape);if(this.IsPhoneDragging(e)){var i=this.MouseDrag;if(null==i)this.IsForceLandscape&&(y=t.getBoundingClientRect().width-a[0].clientY),this.ChartDrawOption.IsLockScreen||this.MoveCorssCursor({X:a[0].clientX,Y:a[0].clientY},e);else{var r=this.GetMoveAngle(i.LastMove,{X:a[0].clientX,Y:a[0].clientY}),n=Math.abs(i.LastMove.X-a[0].clientX),o=Math.abs(i.LastMove.Y-a[0].clientY);n=parseInt(n);var s=this.DragMode==E.CLICK_TOUCH_MODE_ID&&1==this.TouchStatus.CorssCursorShow;if(this.VerticalDrag&&(s=!0!==this.VerticalDrag.IsDrag),this.EnableClickModel&&(s=!0===this.ClickModel.IsShowCorssCursor),this.CurrentChartDrawPicture){var h=this.CurrentChartDrawPicture;if(1==h.Status||2==h.Status){if(n<5&&o<5)return;this.SetChartDrawPictureSecondPoint(a[0].clientX,a[0].clientY,!0)&&this.DrawDynamicInfo()}else if(3==h.Status)this.SetChartDrawPictureThirdPoint(a[0].clientX,a[0].clientY,!0)&&this.DrawDynamicInfo();else if(20==h.Status){if(n<5&&o<5)return;this.MoveChartDrawPicture(a[0].clientX-i.LastMove.X,a[0].clientY-i.LastMove.Y,!0)&&this.DrawDynamicInfo()}i.LastMove.X=a[0].clientX,i.LastMove.Y=a[0].clientY}else if(s){this.MouseDrag;this.MouseDrag=null,this.MoveCorssCursor(i.Click,e)}else if(1==this.DragMode||0==s){if((o>0&&n<=3||r<=this.TouchMoveMinAngle)&&1==this.EnableScrollUpDown)return void this.StopDragTimer();if(n<5||r<=this.TouchMoveMinAngle)return void this.PreventTouchEvent(e);if(this.EnableVerticalDrag){if(!this.VerticalDrag)return;if(!this.VerticalDrag.IsDrag)return}var l=!0;if(i.LastMove.X<a[0].clientX&&(l=!1),n<this.GetMoveOneStepWidth())return;this.DataMove(n,l)?(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw(),this.OnKLinePageChange("OnTouchMove")):this.DragDownloadData&&this.DragDownloadData(),i.LastMove.X=a[0].clientX,i.LastMove.Y=a[0].clientY}}this.PhoneTouchInfo&&(this.PhoneTouchInfo.End.X=a[0].clientX,this.PhoneTouchInfo.End.Y=a[0].clientY)}else if(this.IsPhonePinching(e)){if(this.DragMode==E.DISABLE_DRAG_ID)return;this.PreventTouchEvent(e);var u=this.PhonePinch;if(!u)return;if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Touch)return;var c=Math.abs(a[0].pageY-a[1].pageY)-Math.abs(u.Last.Y-u.Last.Y2),f=Math.abs(a[0].pageX-a[1].pageX)-Math.abs(u.Last.X-u.Last.X2),d=this.ZoomStepPixel;if(Math.abs(c)<d&&Math.abs(f)<d)return;var C=c;if(Math.abs(c)<d&&(C=f),C>0){if((p={IsLockRight:this.IsZoomLockRight}).Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomUp(p))return;this.CursorIndex=p.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.StopDragTimer()}else{var p;if((p={IsLockRight:this.IsZoomLockRight}).Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomDown(p))return;this.CursorIndex=p.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.StopDragTimer()}u.Last={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY}}this.PreventTouchEvent(e)}},this.OnTouchEnd=function(t){if(D.Chart.Log("[KLineChartContainer:OnTouchEnd]",t),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=!0;if(this.CurrentChartDrawPicture){var a=this.CurrentChartDrawPicture;2==a.Status||1==a.Status||3==a.Status?(a.PointStatus=a.Status,this.FinishChartDrawPicturePoint()?this.DrawDynamicInfo():e=!1):20==a.Status&&this.FinishMoveChartDrawPicture()&&this.DrawDynamicInfo()}if(this.EnableZoomIndexWindow){var i=Date.now();this.PhoneDBClick.AddTouchEnd(i),this.PhoneDBClick.IsVaildDBClick()&&(this.OnTouchDBClick(this.PhoneDBClick.Start),this.PhoneDBClick.Clear())}this.IsOnTouch=!1,this.VerticalDrag=null,!0===e&&(this.CurrentChartDrawPicture=null),this.StopDragTimer(),this.TouchEvent({EventID:w.ON_PHONE_TOUCH,FunctionName:"OnTouchEnd"},t),this.OnTouchFinished(),this.TouchDrawCount=0}},this.OnTouchDBClick=function(t){var e=this.PointAbsoluteToRelative(t[0].X,t[0].Y,!0),a=e.X,i=e.Y;D.Chart.Log("[KLineChartContainer:OnTouchDBClick] Phone dbclick absolute ["+a+","+i+"], soruce ["+t[0].X+","+t[0].Y+"]");var r=this.Frame.PtInFrame(a,i);if(D.Chart.Log("[KLineChartContainer::OnTouchDBClick] frameId",r),r>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(r,{X:a,Y:i}))return this.Frame.SetSizeChage(!0),this.Draw(),!0},this.TouchEvent=function(t,e){var a=t.EventID,i=this.GetEventCallback(a);if(!i||!i.Callback)return!1;var r=this.PhoneTouchInfo;if(!r||!r.Start||!r.End)return!1;var n=A(),o=r.End.X/n,s=r.End.Y/n,h=r.End.X-this.UIElement.getBoundingClientRect().left*n,l=r.End.Y-this.UIElement.getBoundingClientRect().top*n,u={X:o,Y:s,FrameID:-1,FunctionName:t.FunctionName,Drag:{Start:{X:r.Start.X/n,Y:r.Start.Y/n},End:{X:r.End.X/n,Y:r.End.Y/n}}};if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),this.Canvas.isPointInPath(h,l))if(this.Frame&&this.Frame.IsHScreen){var c={},f=this.Frame.GetYData(h,c);if(Te.IsNumber(c.FrameID)&&c.FrameID>=0){var d=this.Frame.GetXData(l);u.FrameID=c.FrameID,u.Data={X:d,Y:f}}}else{c={},f=this.Frame.GetYData(l,c);if(Te.IsNumber(c.FrameID)&&c.FrameID>=0){d=this.Frame.GetXData(h);u.FrameID=c.FrameID,u.Data={X:d,Y:f}}}return i.Callback(i,u,this),!0},this.MoveCorssCursor=function(t,e){var a=A(),i=t.X-this.UIElement.getBoundingClientRect().left*a,r=t.Y-this.UIElement.getBoundingClientRect().top*a;this.DragMode==E.CLICK_TOUCH_MODE_ID&&(this.TouchStatus.CorssCursorShow=!0),this.OnMouseMove(i,r,e,!0)},this.DrawEmpty=function(){this.UIElement.width<=0||this.UIElement.height<=0||(this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.Frame&&(this.Frame.ScreenImageData=null,this.Frame.Draw()))},this.PtInChart=function(t,e){for(var a=null,i=0;i<this.ChartPaint.length;++i){if((r=this.ChartPaint[i]).PtInChart&&(a=r.PtInChart(t,e)))return a}for(i=0;i<this.OverlayChartPaint.length;++i){var r;if((r=this.OverlayChartPaint[i]).PtInChart&&(a=r.PtInChart(t,e)))return a}return this.Frame.PtInOveralyChart&&(a=this.Frame.PtInOveralyChart(t,e))?a:null},this.DrawSelectedStatus=function(){if(this.SelectedChart.MoveOn.Identify||this.SelectedChart.Selected.Identify){for(var t=0;t<this.ChartPaint.length;++t){(e=this.ChartPaint[t]).Identify&&(e.Identify!=this.SelectedChart.MoveOn.Identify&&e.Identify!=this.SelectedChart.Selected.Identify||e.DrawSelectedStatus&&e.DrawSelectedStatus())}for(t=0;t<this.OverlayChartPaint.length;++t){(e=this.OverlayChartPaint[t]).Identify&&(e.Identify!=this.SelectedChart.MoveOn.Identify&&e.Identify!=this.SelectedChart.Selected.Identify||e.DrawSelectedStatus&&e.DrawSelectedStatus())}for(t=0;t<this.OverlayChartPaint.length;++t){var e;(e=this.OverlayChartPaint[t]).Identify&&(e.Identify!=this.SelectedChart.MoveOn.Identify&&e.Identify!=this.SelectedChart.Selected.Identify||e.DrawSelectedStatus&&e.DrawSelectedStatus())}this.Frame.DrawOveralySelectedStatus&&this.Frame.DrawOveralySelectedStatus(this.SelectedChart)}},this.Draw=function(){var t=this;if(this.ChartCorssCursor&&(this.ChartCorssCursor.Status=0),!(this.UIElement.width<=0||this.UIElement.height<=0)){this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var e=A();if(this.Canvas.lineWidth=e,this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return this.Frame.ClearCoordinateText(),this.Frame.Draw({IsEnableSplash:this.ChartSplashPaint.IsEnableSplash}),void this.ChartSplashPaint.Draw();if(this.Frame.SetBeforeDrawXYCallback&&this.Frame.SetBeforeDrawXYCallback(function(e){t.BeforeDrawXYCoordinate(e)}),this.Frame.Draw(),this.Frame.DrawCustomVertical){var a=this.GetEventCallback(w.ON_CUSTOM_VERTICAL_DRAW);this.Frame.DrawCustomVertical(a)}this.Frame.CalculateLock();for(var i=0;i<this.ChartDrawPicture.length;++i){(l=this.ChartDrawPicture[i]).IsDrawMain&&(l.IsDrawMain()&&l.MainDraw())}for(i=0;i<this.ChartPaint.length;++i){(l=this.ChartPaint[i]).IsDrawFirst&&l.Draw()}this.Frame.DrawOveraly&&this.Frame.DrawOveraly(!0);for(i=0;i<this.ChartPaint.length;++i){(l=this.ChartPaint[i]).IsDrawFirst||l.Draw()}for(i=0;i<this.ChartPaintEx.length;++i){(l=this.ChartPaintEx[i]).Draw()}for(i=0;i<this.OverlayChartPaint.length;++i){(l=this.OverlayChartPaint[i]).Draw()}this.Frame.DrawOveraly&&this.Frame.DrawOveraly(!1);for(i=0;i<this.ExtendChartPaint.length;++i){(l=this.ExtendChartPaint[i]).IsCallbackDraw||(l.DrawAfterPicture||l.IsDynamic||0!=l.IsAnimation||l.Draw())}this.Frame.DrawInsideHorizontal&&this.Frame.DrawInsideHorizontal(),this.KLineIncreaseCustomHorizontal(),this.Frame.DrawCustomHorizontal&&this.Frame.DrawCustomHorizontal(),this.Frame.DrawEx&&this.Frame.DrawEx({Symbol:this.Symbol}),this.ChartInfoPaint&&this.ChartInfoPaint.Draw(),this.Frame.DrawLock(),this.Frame.DrawLogo(),this.Frame.Snapshot(),this.Frame.DrawToolbar&&this.Frame.DrawToolbar(this.LastMouseStatus),this.DrawSelectedStatus();var r=null;this.LastMouseStatus&&this.LastMouseStatus.MoveOnPoint&&(r=this.LastMouseStatus.MoveOnPoint);for(i=0;i<this.ExtendChartPaint.length;++i){(l=this.ExtendChartPaint[i]).IsCallbackDraw||(l.DrawAfterPicture||l.IsDynamic&&!1===l.DrawAfterTitle&&(l.Draw(),l.DrawToolbar&&l.DrawToolbar(r)))}for(i=0;i<this.ChartDrawPicture.length;++i){(l=this.ChartDrawPicture[i]).IsDrawFirst&&l.Draw()}this.DrawDrawPictureXYCoordinate();var n=null;if(null!=this.LastPoint.X||null!=this.LastPoint.Y){if(this.ChartCorssCursor)this.ChartCorssCursor.LastPoint=this.LastPoint,this.ChartCorssCursor.CursorIndex=this.CursorIndex,this.PtInButton(this.LastPoint.X,this.LastPoint.Y)||(this.DragMode==E.CLICK_TOUCH_MODE_ID?1==this.TouchStatus.CorssCursorShow&&this.ChartCorssCursor.Draw():this.EnableClickModel?!0===this.ClickModel.IsShowCorssCursor&&this.ChartCorssCursor.Draw():!0===this.CorssCursorTouchEnd&&this.MouseDrag||1==this.CorssCursorTouchEnd&&0==this.IsOnTouch||this.ChartCorssCursor.Draw());n=this.Frame.PtInFrame(this.LastPoint.X,this.LastPoint.Y)}var o=this.GetDrawStatus();o.DrawName="Draw";var s=this.GetEventCallback(w.ON_TITLE_DRAW),h=this.GetEventCallback(w.ON_INDEXTITLE_DRAW);for(i=0;i<this.TitlePaint.length;++i){(l=this.TitlePaint[i]).IsDynamic&&(l.CursorIndex=this.CursorIndex,l.LastPoint=this.LastPoint,"DynamicChartTitlePainting"==l.ClassName?l.OnDrawEvent=h:l.OnDrawEvent=s,l.OnDrawEvent&&(l.OnDrawEvent.FunctionName="Draw",l.OnDrawEvent.PointPosition=n),l.DrawStatus=o,l.Draw(r,this.LastMouseStatus))}for(i=0;i<this.ExtendChartPaint.length;++i){(l=this.ExtendChartPaint[i]).IsCallbackDraw||(l.DrawAfterPicture||l.IsDynamic&&!0===l.DrawAfterTitle&&0==l.IsAnimation&&l.Draw())}if(this.EnableAnimation)for(i=0;i<this.ExtendChartPaint.length;++i){!0===(l=this.ExtendChartPaint[i]).IsAnimation&&l.Draw()}for(i=0;i<this.ChartDrawPicture.length;++i){(l=this.ChartDrawPicture[i]).IsDrawFirst||(l.IsDrawMain&&l.IsDrawMain()||l.Draw())}this.CurrentChartDrawPicture&&10!=this.CurrentChartDrawPicture.Status&&this.CurrentChartDrawPicture.Draw();for(i=0;i<this.ExtendChartPaint.length;++i){var l;(l=this.ExtendChartPaint[i]).DrawAfterPicture&&l.Draw()}if(this.OffscreenToShowCanvas(),"function"==typeof this.UpdateScrollBar&&this.UpdateScrollBar(),this.mapEvent.has(w.CHART_STATUS)){var u=this.mapEvent.get(w.CHART_STATUS),c={};"function"==typeof this.GetChartStatus&&(c=this.GetChartStatus()),u.Callback(u,c,this)}++this.TouchDrawCount}},this.PtInButton=function(t,e){var a=this.Frame.PtInButtons(t,e);return a?{Name:"FrameButton",Button:a}:(a=this.PtInExtendChartButtons(t,e))?{Name:"ExtendChartButton",Button:a}:(a=this.PtInDrawPictureButtons(t,e))?{Name:"DrawPictureButton",Button:a}:(a=this.PtInTitleButtons(t,e))?{Name:"TitleButton",Button:a}:null},this.DrawDrawPictureXYCoordinate=function(){var t=null;this.CurrentChartDrawPicture?t=this.CurrentChartDrawPicture:this.SelectChartDrawPicture&&(t=this.SelectChartDrawPicture);for(var e={Symbol:this.Symbol,Period:this.Period},a=0;a<this.ChartDrawPicture.length;++a){var i=this.ChartDrawPicture[a];i&&(this.IsDrawPictureXY&&t&&(t==i||t.Guid==i.Guid)&&this.Frame.DrawPictureCoordinate(t,e)||i.IsShowYCoordinate&&i.Frame&&i.Frame.DrawPicturePointYCoordinate(i,e))}},this.BeforeDrawXYCoordinate=function(t){for(var e=0;e<this.ExtendChartPaint.length;++e){var a=this.ExtendChartPaint[e];a.IsCallbackDraw&&["KLineYAxisBGPaint","DepthMapPaint"].includes(a.ClassName)&&a.FrameID==t.Identify&&a.Draw()}},this.KLineIncreaseCustomHorizontal=function(){if(this.Frame&&this.Frame.SubFrame){var t=this.Frame.SubFrame[0].Frame;if(t){var e=Ga(this.Symbol),a=!1;t.YSplitOperator&&1==t.YSplitOperator.CoordinateType&&(a=!0);for(var i=!1,r=0;r<t.CustomHorizontalInfo.length;++r){if(4==(c=t.CustomHorizontalInfo[r]).Type&&(i=!0),a&&3==c.Type||2==c.Type){if(!(h=this.ChartPaint[0]))continue;if(!(l=h.Data)||!Te.IsNonEmptyArray(l.Data))continue;if(!Te.IsNumber(h.DrawKRange.Start)||!Te.IsNumber(h.DrawKRange.End))continue;var n=l.Data[h.DrawKRange.Start],o=((u=l.Data[h.DrawKRange.End]).Close-n.Close)/n.Close*100;c.Value=u.Close,2==c.Type?(c.Message[1]=u.Close.toFixed(e),u.Close>u.Open?c.LineColor=ia.FrameLatestPrice.UpBarColor:u.Close<u.Open?c.LineColor=ia.FrameLatestPrice.DownBarColor:c.LineColor=ia.FrameLatestPrice.UnchagneBarColor):c.Message[1]=o.toFixed(2)+"%",this.Name&&(c.Title=this.Name)}}if(i){var s=t.CustomHorizontalInfo.filter(function(t,e,a){return 4!=t.Type});t.CustomHorizontalInfo=s}for(r=0;r<this.OverlayChartPaint.length;++r){var h,l;if(h=this.OverlayChartPaint[r])if(4==h.YInfoType)if((l=h.Data)&&Te.IsNonEmptyArray(l.Data)&&Te.IsNumber(h.DrawKRange.Start)&&Te.IsNumber(h.DrawKRange.End)){var u,c;n=l.Data[h.DrawKRange.Start],o=((u=l.Data[h.DrawKRange.End]).Close-n.Close)/n.Close*100;(c=new Y).Value=u.Close/h.ShowRange.FirstOverlayOpen*h.ShowRange.FirstOpen,c.Message[1]=o.toFixed(2)+"%",c.LineType=-1,c.Type=h.YInfoType,c.LineColor=h.Color,c.TextColor=ia.FrameLatestPrice.OverlayTextColor,h.Title&&(c.Title=h.Title),t.CustomHorizontalInfo.push(c)}}}}},this.OffscreenToShowCanvas=function(){this.ShowCanvas&&(this.ShowCanvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.ShowCanvas.drawImage(this.OffscreenCanvasElement,0,0))},this.GetDrawStatus=function(){var t={Point:{X:this.LastPoint.X,Y:this.LastPoint.Y},IsOnTouch:this.IsOnTouch,CorssCursorTouchEnd:this.CorssCursorTouchEnd,IsTitleShowLatestData:this.IsTitleShowLatestData,IsMinuteChart:"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName};return t.FrameID=this.Frame.PtInFrame(this.LastPoint.X,this.LastPoint.Y),t},this.DrawDynamicInfo=function(t){if(this.LastMouseStatus.MouseOnToolbar=null,null!=this.Frame.ScreenImageData){var e=!1;if(this.ChartCorssCursor&&(null==this.ChartCorssCursor.PointX&&null==this.ChartCorssCursor.PointY||(e=!0)),0==(e=!0))for(var a=0;a<this.ExtendChartPaint.length;++a){if(!(o=this.ExtendChartPaint[a]).IsCallbackDraw&&(o.IsDynamic&&o.IsEraseBG)){e=!0;break}}e&&this.Canvas.putImageData(this.Frame.ScreenImageData,0,0),this.Frame.DrawToolbar&&this.Frame.DrawToolbar(this.LastMouseStatus),this.DrawSelectedStatus();var i=null;this.LastMouseStatus&&this.LastMouseStatus.MoveOnPoint&&(i=this.LastMouseStatus.MoveOnPoint);for(a=0;a<this.ExtendChartPaint.length;++a){(o=this.ExtendChartPaint[a]).IsCallbackDraw||(o.DrawAfterPicture||o.IsDynamic&&!1===o.DrawAfterTitle&&0==o.IsAnimation&&(o.Draw(),o.DrawToolbar&&o.DrawToolbar(i,this.LastMouseStatus)))}for(a=0;a<this.ChartDrawPicture.length;++a){(o=this.ChartDrawPicture[a]).IsDrawFirst&&o.Draw()}this.DrawDrawPictureXYCoordinate(),this.ChartCorssCursor&&(this.ChartCorssCursor.LastPoint=this.LastPoint,this.ChartCorssCursor.CursorIndex=this.CursorIndex,t&&0==t.Corss||(this.DragMode==E.CLICK_TOUCH_MODE_ID?1==this.TouchStatus.CorssCursorShow&&this.ChartCorssCursor.Draw():!1===this.IsOnTouch&&this.CurrentChartDrawPicture&&!0===this.CurrentChartDrawPicture.IsShowCorssCursor?this.ChartCorssCursor.Draw():!1===this.IsOnTouch&&!0===this.CorssCursorTouchEnd||this.CurrentChartDrawPicture?!0===this.IsOnTouch&&this.CurrentChartDrawPicture&&this.EnableShowCorssCursor&&1==this.EnableShowCorssCursor.DrawPicture&&this.ChartCorssCursor.Draw():this.ChartCorssCursor.Draw()));var r=null;t&&t.Point&&("OnMouseMove"==t.ParentFunction||"MoveCorssCursorIndex"==t.ParentFunction)&&(r=this.Frame.PtInFrame(t.Point.X,t.Point.Y));var n=this.GetDrawStatus();n.DrawName="DrawDynamicInfo";for(a=0;a<this.TitlePaint.length;++a){(o=this.TitlePaint[a]).IsDynamic&&(o.CursorIndex=this.CursorIndex,o.LastPoint=this.LastPoint,o.OnDrawEvent&&(o.OnDrawEvent.FunctionName="DrawDynamicInfo",o.OnDrawEvent.PointPosition=r),o.DrawStatus=n,"DynamicMinuteTitlePainting"==o.ClassName&&(t&&Te.IsNumber(t.ClientPos)&&t.Point?o.PointInfo={ClientPos:t.ClientPos,Point:{X:t.Point.X,Y:t.Point.Y}}:o.PointInfo=null),o.Draw(i,this.LastMouseStatus))}for(a=0;a<this.ExtendChartPaint.length;++a){if(!(o=this.ExtendChartPaint[a]).IsCallbackDraw&&!o.DrawAfterPicture){if("KLineTooltipPaint"==o.ClassName&&t){if(0==t.Tooltip)continue;t.Point&&(o.LatestPoint=t.Point)}else"MinuteTooltipPaint"==o.ClassName&&t&&t.Point&&(o.LatestPoint=t.Point);o.IsDynamic&&!0===o.DrawAfterTitle&&o.Draw()}}if(this.EnableAnimation)for(a=0;a<this.ExtendChartPaint.length;++a){!0===(o=this.ExtendChartPaint[a]).IsAnimation&&o.Draw()}for(a=0;a<this.ChartDrawPicture.length;++a){(o=this.ChartDrawPicture[a]).IsDrawFirst||(o.IsDrawMain&&o.IsDrawMain()||o.Draw(i,this.LastMouseStatus))}this.CurrentChartDrawPicture&&10!=this.CurrentChartDrawPicture.Status&&this.CurrentChartDrawPicture.Draw();for(a=0;a<this.ExtendChartPaint.length;++a){var o;(o=this.ExtendChartPaint[a]).DrawAfterPicture&&o.Draw()}if(this.LastMouseStatus.MouseOnToolbar){var s=this.LastMouseStatus.MouseOnToolbar.Frame;s&&s.DrawToolbarTooltip&&s.DrawToolbarTooltip(this.LastMouseStatus.MouseOnToolbar)}this.OffscreenToShowCanvas(),++this.TouchDrawCount}},this.DrawAnimation=function(){if(this.EnableAnimation){if(this.Frame.ScreenImageData&&!this.IsOnTouch){for(var t=0;t<this.ExtendChartPaint.length;++t){var e=this.ExtendChartPaint[t];!0===e.IsAnimation&&(e.IsMoveStep=!0)}this.DrawDynamicInfo()}var a=this;window.requestAnimationFrame(function(){a.DrawAnimation()})}},this.StartAnimation=function(t){for(var e=!1,a=null,i=0;i<this.ExtendChartPaint.length;++i){var r=this.ExtendChartPaint[i];if("BarragePaint"===r.ClassName){e=!0,a=r.BarrageList;break}}if(!e){var n=new function(){this.newMethod=Ce,this.newMethod(),delete this.newMethod,this.ClassName="BarragePaint",this.IsAnimation=!0,this.IsEraseBG=!0,this.HQChart,this.Font=ia.Barrage.Font,this.TextColor=ia.Barrage.Color,this.FontHeight=ia.Barrage.Height,this.BarrageList=new function(){this.PlayList=[],this.Cache=[],this.MinLineHeight=40*A(),this.Height,this.Step=1,this.GetPlayList=function(t){for(var e=t.Canves,a=t.Right,i=t.Left,r=a-i,n=t.IsMoveStep,o=[],s=0,h=0;h<this.PlayList.length;++h){var l=this.PlayList[h],u=this.MinLineHeight;l.Height>this.MinLineHeight&&(u=l.Height);for(var c=!0,f=!1,d=0;d<l.Data.length;++d){var C=l.Data[d],p={X:C.X,Y:s,Text:C.Text,Color:C.Color,Height:u,Font:C.Font,Info:C.Info};o.push(p),n&&(d==l.Data.length-1&&this.Cache.length>0?(c=!1,C.TextWidth||(C.Font&&C.Font.Name?e.font=C.Font.Name:e.font=t.Font,C.TextWidth=e.measureText(p.Text+"擎擎").width),C.X>=C.TextWidth&&(c=!0)):0==d&&(f=!1,C.TextWidth||(C.Font&&C.Font.Name?e.font=C.Font.Name:e.font=t.Font,C.TextWidth=e.measureText(p.Text+"擎擎").width),C.X>r+C.TextWidth&&(f=!0)),C.X+=this.Step)}if(n&&c&&this.Cache.length>0){var m=this.Cache.shift(),D={X:0,Text:m.Text,Color:m.Color,Font:m.Font,Info:m.Info};l.Data.push(D)}if(n&&f&&l.Data.length>0){var v=l.Data.shift();this.OnItemPlayEnd(t.HQChart,v)}s+=u}return o},this.CacluatePlayLine=function(t){this.Height=t;var e=parseInt(t/this.MinLineHeight);if(this.PlayList.length<e)for(var a=e-this.PlayList.length,i=0;i<a;++i)this.PlayList.push({Data:[]});else if(this.PlayList.length>e)for(var r=this.PlayList.length-e,i=0;i<r;++i)for(var n=this.PlayList.pop(),o=0;o<n.Data.length;++o){var s=n.Data[o],h={Text:s.Text,Color:s.Color,Font:s.Font,Info:s.Info};this.Cache.unshift(h)}D.Chart.Log("[BarrageList::CacluatePlayLine] LineCount="+this.PlayList.length+" Height="+this.Height)},this.AddBarrage=function(t){for(var e in t){var a=t[e];this.Cache.push(a)}},this.OnItemPlayEnd=function(t,e){if(t.mapEvent.has(w.BARRAGE_PLAY_END)){var a=t.mapEvent.get(w.BARRAGE_PLAY_END);a.Callback&&a.Callback(a,e,this)}},this.Count=function(){return this.Cache.length}},this.IsMoveStep=!1,this.SetOption=function(t){t&&(t.Step>0&&(this.BarrageList.Step=t.Step),t.MinLineHeight&&(this.Barrage.MinLineHeight=t.MinLineHeight))},this.DrawHScreen=function(){var t=this.ChartBorder.GetWidth(),e=this.ChartBorder.GetTop(),a=this.ChartBorder.GetBottom(),i=this.ChartBorder.GetRightEx();this.ChartBorder.GetChartWidth();t!=this.BarrageList.Height&&this.BarrageList.CacluatePlayLine(t),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left";var r=this.BarrageList.GetPlayList({Canves:this.Canvas,Right:a,Left:e,Font:this.Font,IsMoveStep:this.IsMoveStep,HQChart:this.HQChart});if(this.IsMoveStep=!1,r){this.Canvas.save(),this.Canvas.translate(this.ChartBorder.GetChartHeight(),0),this.Canvas.rotate(90*Math.PI/180);for(var n=0;n<r.length;++n){var o=r[n];o.Color?this.Canvas.fillStyle=o.Color:this.Canvas.fillStyle=this.TextColor,o.Font?this.Canvas.font=o.Font.Name:this.Canvas.font=this.Font;var s=this.FontHeight;o.Font&&o.Font.Height>0&&(s=o.Font.Height);var h=o.Y+parseInt((o.Height-s)/2);this.Canvas.fillText(o.Text,a-o.X,i+h)}this.Canvas.restore()}},this.Draw=function(){if(this.ChartFrame.IsHScreen)this.DrawHScreen();else{var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetHeight();i!=this.BarrageList.Height&&this.BarrageList.CacluatePlayLine(i),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left";var r=this.BarrageList.GetPlayList({Canves:this.Canvas,Right:e,Left:t,Font:this.Font,IsMoveStep:this.IsMoveStep,HQChart:this.HQChart});if(this.IsMoveStep=!1,r)for(var n=0;n<r.length;++n){var o=r[n];o.Color?this.Canvas.fillStyle=o.Color:this.Canvas.fillStyle=this.TextColor,o.Font?this.Canvas.font=o.Font.Name:this.Canvas.font=this.Font;var s=this.FontHeight;o.Font&&o.Font.Height>0&&(s=o.Font.Height);var h=o.Y+parseInt((o.Height-s)/2);this.Canvas.fillText(o.Text,e-o.X,a+h)}}}};n.Canvas=this.Canvas,n.ChartBorder=this.Frame.ChartBorder,n.ChartFrame=this.Frame,n.HQChart=this,n.SetOption(t),this.ExtendChartPaint.push(n),a=n.BarrageList}this.EnableAnimation=!0;var o=this;return window.requestAnimationFrame(function(){o.DrawAnimation()}),a},this.StopAnimation=function(){this.EnableAnimation=!1,this.DrawDynamicInfo()},this.GetChartTooltipData=function(t,e,a){var i=new It;if(this.ChartInfoPaint&&this.ChartInfoPaint.GetTooltipData(t,e,i))return i;if(this.PtInChartPaintTooltip(t,e,i))return i;if(Te.IsNonEmptyArray(this.Frame.SubFrame))for(var r=0;r<this.Frame.SubFrame.length;++r)for(var n=this.Frame.SubFrame[r],o=0;o<n.OverlayIndex.length;++o)for(var s=n.OverlayIndex[o],h=0;h<s.ChartPaint.length;++h){if(s.ChartPaint[h].GetTooltipData(t,e,i))return i}return this.PtInOverlayChartPaintTooltip(t,e,i)?i:null},this.PtInExtendChartButtons=function(t,e){for(var a=0;a<this.ExtendChartPaint.length;++a){var i=this.ExtendChartPaint[a];if(i.PtInButtons){var r=i.PtInButtons(t,e);if(r)return r.Chart=i,r}}return null},this.ClickExtendChartButton=function(t,e){var a=this.GetEventCallback(w.ON_CLICK_EXTENDCHART_BUTTON);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}},this.PtInDrawPictureButtons=function(t,e){for(var a=0;a<this.ChartDrawPicture.length;++a){var i=this.ChartDrawPicture[a];if(i.PtInButtons){var r=i.PtInButtons(t,e);if(r)return r.Chart=i,r}}return null},this.ClickDrawPictureButton=function(t,e){var a=this.GetEventCallback(w.ON_CLICK_DRAWPICTURE_BUTTON);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}t.ID==b.DRAW_PICTURE_DELETE?(D.Chart.Log(t,"ClickDrawPictureButton"),this.ClearChartDrawPicture(t.Chart)):(t.ID,b.DRAW_PICTURE_SETTING)},this.PtInTitleButtons=function(t,e){for(var a=0;a<this.TitlePaint.length;++a){var i=this.TitlePaint[a];if(i.PtInButtons){var r=i.PtInButtons(t,e);if(r)return r.Chart=i,r}}return null},this.OnMouseMove=function(t,e,a,i){this.LastPoint.X=t,this.LastPoint.Y=e;var r=null,n=null,o=this.Frame.PtInFrame(t,e);if(Te.IsNumber(o)&&o>=0&&(this.CursorIndex=this.Frame.GetXData(t)),this.EnableBorderDrag&&this.Frame&&!this.CurrentChartDrawPicture){var s=this.Frame.PtInFrameBorder(t,e);s&&s.Index>=0&&(r={Cursor:"n-resize",Name:"DragBorder"},D.Chart.Log("[JSChartContainer::OnMouseMove] drag border ",s))}if(this.EnableYDrag&&this.Frame&&!this.CurrentChartDrawPicture){var h=this.TryYDrag(t,e);h&&(r={Cursor:0==h.Position?"n-resize":"row-resize",Name:"DragY"},D.Chart.Log("[JSChartContainer::OnMouseMove] drag y ",h))}if(this.CurrentChartDrawPicture||(n=this.PtInButton(t,e))&&(r={Cursor:"pointer",Name:n.Name},D.Chart.Log("[JSChartContainer::OnMouseMove] frame button ",n)),this.ChartCorssCursor){var l=this.ChartCorssCursor.PtInButton(t,e);l&&(r={Cursor:"pointer",Name:"CorssCursorButton"},D.Chart.Log("[JSChartContainer::OnMouseMove] cross cursor button ",l))}if("KLineChartContainer"==this.ClassName&&this.Frame.PtInFrameBottom(t,e)&&(r={Cursor:"ew-resize",Name:"FrameButtom"},D.Chart.Log("[JSChartContainer::OnMouseMove] frame bottom ")),this.SelectedChart.EnableMoveOn&&this.PtInChart&&!this.CurrentChartDrawPicture){var u=this.PtInChart(t,e);u&&u.Identify?(r={Cursor:"pointer",Name:"PtInChart"},this.SelectedChart.MoveOn.Identify=u.Identify,this.SelectedChart.MoveOn.Identify=null,D.Chart.Log("[JSChartContainer::OnMouseMove] Point in chart ",u)):this.SelectedChart.MoveOn.Identify=null}else this.SelectedChart.MoveOn.Identify=null;var c=this.GetRectSelectPaint();if(c&&c.GetPointCount()>0){var f=c.PtInPaint(t,e);f&&(r=4==f.Type?{Cursor:"pointer",Name:"DragRectSelect"}:{Cursor:"ew-resize",Name:"DragRectSelect"},D.Chart.Log("[JSChartContainer::OnMouseMove] drag rect select ",f))}var d=!1;if(this.CurrentChartDrawPicture){var C=this.Frame.PtInChartFrame(t,e);if(20!=this.CurrentChartDrawPicture.Status){var p=!1;Te.IsNumber(this.CurrentChartDrawPicture.LimitFrameID)?C>=0&&C==this.CurrentChartDrawPicture.LimitFrameID&&(p=!0):C>=0&&(p=!0),r={Cursor:p?"crosshair":"not-allowed",Name:"CurrentChartDrawPicture"}}this.CurrentChartDrawPicture.SetLastPoint&&this.CurrentChartDrawPicture.SetLastPoint({X:t,Y:e}),d=!0}else{var m={};m.X=t,m.Y=e,this.GetChartDrawPictureByPoint(m)&&m.ChartDrawPicture&&1==m.ChartDrawPicture.EnableMove?(100===m.PointIndex?m.Cursor?this.UIElement.style.cursor=m.Cursor:this.UIElement.style.cursor="move":m.Cursor?this.UIElement.style.cursor=m.Cursor:this.UIElement.style.cursor="pointer",d=!0,this.MoveOnChartDrawPicture=m.ChartDrawPicture):this.MouseDrag||(this.UIElement.style.cursor="default")}var v={ParentFunction:"OnMouseMove",Point:{X:t,Y:e},IsPhone:!0===i,ClientPos:this.PtInClient(t,e)};if((a&&("mouseout"==a.type||"mouseleave"==a.type)||n)&&(v.Corss=!1),this.SetCorssCursorIndex&&this.SetCorssCursorIndex(v),this.DrawDynamicInfo(v),r&&(this.UIElement.style.cursor=r.Cursor),this.IsShowTooltip&&0==d){var g=this.GetChartTooltipData(t,e);if(g&&g.Data){if(!0===i)var S=a.touches[0],T=S.clientX-this.UIElement.getBoundingClientRect().left,I=S.clientY-this.UIElement.getBoundingClientRect().top;else T=a.clientX-this.UIElement.getBoundingClientRect().left,I=a.clientY-this.UIElement.getBoundingClientRect().top;this.ShowTooltip(T,I,g)}else this.HideTooltip()}},this.OnKeyDown=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=t.keyCode?t.keyCode:t.which;switch(e){case 37:if(t.ctrlKey&&this.OnCustomKeyDown&&this.OnCustomKeyDown(e,t))break;if(this.CursorIndex<=.99999){if(!this.DataMoveLeft()){this.DragDownloadData&&this.DragDownloadData();break}this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("keydown")}else--this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown();break;case 39:if(t.ctrlKey&&this.OnCustomKeyDown&&this.OnCustomKeyDown(e,t))break;var a=0;if(a=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,this.CursorIndex+1>=a){if(!this.DataMoveRight())break;this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("keydown")}else{var i=null;if(!(i=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data))break;if(this.CursorIndex+i.DataOffset+1>=i.Data.length)break;++this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown()}break;case 38:if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Keyboard)break;if((r={ZoomType:this.ZoomType,IsLockRight:this.IsZoomLockRight}).Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomUp(r))break;this.CursorIndex=r.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("keydown");break;case 40:if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Keyboard)break;var r;if((r={ZoomType:this.ZoomType,IsLockRight:this.IsZoomLockRight}).Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomDown(r))break;this.CursorIndex=r.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("keydown");break;case 46:if(this.SelectChartDrawPicture){var n=this.SelectChartDrawPicture;D.Chart.Log("[JSChartContainer::OnKeyDown] delete draw picture."),this.SelectChartDrawPicture=null,this.ChartPictureMenu&&this.ChartPictureMenu.Hide(),this.ClearChartDrawPicture(n)}else if(this.SelectedChart&&this.SelectedChart.Selected.Identify){var o=this.GetSelectedChartInfo(this.SelectedChart.Selected);o&&(o.Type==ge.OVERLAY_INDEX?this.DeleteOverlayWindowsIndex(o.IndexID):o.Type==ge.OVERLAY_KLINE&&this.DeleteOverlaySymbol(o.Symbol))}break;case 32:this.OnMarkRectSelect(t);break;case 27:if(this.CurrentChartDrawPicture)20!=(n=this.CurrentChartDrawPicture).Status&&(this.CurrentChartDrawPicture=null);break;default:return}t.preventDefault?t.preventDefault():t.returnValue=!1}},this.OnDoubleClick=function(t,e,a){},this.ZoomIndexWindow=function(t,e){return!(t<0||t>=this.Frame.SubFrame.length)&&this.Frame.ZoomIndexWindow(t,e)},this.ShowIndexTitleOnly=function(t,e){return!(t<0||t>=this.Frame.SubFrame.length)&&this.Frame.ShowIndexTitleOnly(t,e)},this.RemoveMinSizeWindows=function(){if(this.Frame.ZoomWindowsInfo){for(var t=[],e=[],a=0;a<this.Frame.SubFrame.length;++a){(s=this.Frame.SubFrame[a]).Frame.ClearToolbar(),s.Frame.IsMinSize?t.push(a):e.push(a)}if(this.Frame.ZoomWindowsInfo=null,!(t.length<=0)){for(a=0;a<t.length;++a)this.DeleteIndexPaint(t[a]);var i=[],r=[],n=[this.TitlePaint[0]];for(a=0;a<e.length;++a){var o=e[a];i[a]=this.Frame.SubFrame[o],r[a]=this.WindowIndex[o],n[a+1]=this.TitlePaint[o+1]}this.Frame.SubFrame=i,this.WindowIndex=r,this.TitlePaint=n;for(a=0;a<this.Frame.SubFrame.length;++a){var s=this.Frame.SubFrame[a].Frame;a==this.Frame.SubFrame.length-1?s.XSplitOperator.ShowText=!0:s.XSplitOperator.ShowText=!1,s.Identify=a}if(Te.IsNonEmptyArray(this.ChartDrawPicture)){var h=[];for(a=0;a<this.ChartDrawPicture.length;++a){s=this.ChartDrawPicture[a];for(var l=0;l<this.Frame.SubFrame.length;++l)if(s.Frame==this.Frame.SubFrame[l].Frame){h.push(s);break}}this.ChartDrawPicture=h}}}},this.PtInClient=function(t,e){if(this.Canvas.beginPath(),!0===this.Frame.IsHScreen){if((n=this.Frame.ChartBorder.GetHScreenBorder()).DayBorder){for(var a=n.Right-n.Left,i=0;i<n.DayBorder.length;++i){var r=n.DayBorder[i];if(this.Canvas.beginPath(),this.Canvas.rect(n.Left,r.TopEx,a,r.BottomEx-r.TopEx),this.Canvas.isPointInPath(t,e))return 1;if(this.Canvas.beginPath(),this.Canvas.rect(n.Left,r.Top,a,r.TopEx-r.Top),this.Canvas.isPointInPath(t,e))return 200+parseInt(i);if(this.Canvas.beginPath(),this.Canvas.rect(n.Left,r.BottomEx,a,r.Bottom-r.BottomEx),this.Canvas.isPointInPath(t,e))return 300+parseInt(i)}return-1}this.Canvas.rect(n.Left,n.TopEx,n.Right-n.Left,n.BottomEx-n.TopEx)}else{var n;if((n=this.Frame.ChartBorder.GetBorder()).DayBorder){for(i=0;i<n.DayBorder.length;++i){r=n.DayBorder[i];if(this.Canvas.beginPath(),this.Canvas.rect(r.LeftEx,n.TopEx,r.RightEx-r.LeftEx,n.BottomEx-n.TopEx),this.Canvas.isPointInPath(t,e))return 1;if(this.Canvas.beginPath(),this.Canvas.rect(r.Left,n.TopEx,r.LeftEx-r.Left,n.BottomEx-n.TopEx),this.Canvas.isPointInPath(t,e))return 200+parseInt(i);if(this.Canvas.beginPath(),this.Canvas.rect(r.RightEx,n.TopEx,r.Right-r.RightEx,n.BottomEx-n.TopEx),this.Canvas.isPointInPath(t,e))return 300+parseInt(i)}return-1}this.Canvas.rect(n.LeftEx,n.Top,n.RightEx-n.LeftEx,n.Bottom-n.Top)}return this.Canvas.isPointInPath(t,e)?1:this.Frame.ChartBorder.LeftExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(n.Left,n.Top,n.Right-n.Left,n.TopEx-n.Top):this.Canvas.rect(n.Left,n.Top,n.LeftEx-n.Left,n.Bottom-n.Top),this.Canvas.isPointInPath(t,e))?2:this.Frame.ChartBorder.RightExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(n.Left,n.BottomEx,n.Right-n.Left,n.Bottom-n.BottomEx):this.Canvas.rect(n.RightEx,n.Top,n.Right-n.RightEx,n.Bottom-n.Top),this.Canvas.isPointInPath(t,e))?3:-1},this.OnMoveFromeBorder=function(t,e){this.Frame&&this.Frame.OnMoveFromeBorder(t,e)&&(this.Frame.SetFrameBorderSizeChange(),this.Frame.ReDrawToolbar(),this.Draw())},this.OnZoomUpDownFrameY=function(t,e){this.Frame&&this.Frame.OnZoomUpDownFrameY(t,e)&&(this.Frame.SetSizeChage(!0),this.Draw())},this.OnUpDonwFrameY=function(t,e){return!!this.Frame&&(!!this.Frame.OnUpDonwFrameY(t,e)&&(this.Frame.SetSizeChage(!0),!0))},this.CancelZoomUpDownFrameY=function(t){this.Frame&&this.Frame.CancelZoomUpDownFrameY(t)&&(this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw())},this.IsKLineContainer=function(){return"KLineChartContainer"==this.ClassName||"KLineChartHScreenContainer"==this.ClassName||"KLineTrainChartContainer"==this.ClassName||"CustomKLineChartContainer"==this.ClassName},this.UpdatePointByCursorIndex=function(t){var e={X:null,Y:null};e.X=this.Frame.GetXFromIndex(this.CursorIndex);var a=Math.abs(this.CursorIndex-.5);this.IsKLineContainer()&&(a=this.CursorIndex);var i=this.Frame.Data;if(i.DataOffset+a<i.Data.length){var r=i.Data[i.DataOffset+a].Close;e.Y=this.Frame.GetYFromData(r)}if(1==t&&this.ChartCorssCursor)if(1==this.ChartCorssCursor.Status);else{this.LastPoint.X=this.Frame.GetXFromIndex(this.CursorIndex);a=Math.abs(this.CursorIndex-.5);a=parseInt(a.toFixed(0)),this.IsKLineContainer()&&(a=this.CursorIndex),this.LastPoint.Y=null}else 2==t&&this.ChartCorssCursor?(this.LastPoint.Y=null,this.LastPoint.X=null):(this.LastPoint.X=e.X,this.LastPoint.Y=e.Y)},this.ShowTooltipByKeyDown=function(){var t=Math.abs(this.CursorIndex-.5);t=parseInt(t.toFixed(0)),"KLineChartContainer"!=this.ClassName&&"KLineTrainChartContainer"!=this.ClassName||(t=this.CursorIndex);var e=this.Frame.Data,a=new It;a.Data=e.Data[e.DataOffset+t],a.ChartPaint=this.ChartPaint[0];var i=A();0===i&&(i=1),this.ShowTooltip(this.LastPoint.X/i,this.LastPoint.Y/i,a)},this.ShowTooltip=function(t,e,a){var i=this;if(this.IsShowTooltip){var r=15/A();if(0===a.Type){R();var n=t,o=e;if((l=_e.Create("HistoryDataStringFormat")).Value=a,l.Symbol=this.Symbol,l.LanguageID=this.LanguageID,l.GetEventCallback=function(t){return i.GetEventCallback(t)},!l.Operator())return;var s=25*l.LineCount;l.Height>0&&(s=l.Height);var h=l.Width;this.Tooltip.style.width=h+"px",this.Tooltip.style.height=s+"px",this.Tooltip.style.position="absolute",n+h>this.UIElement.getBoundingClientRect().width?this.Tooltip.style.left=n-h+"px":this.Tooltip.style.left=n+"px",o+r+s>this.UIElement.getBoundingClientRect().height-5?this.Tooltip.style.top=o-s+"px":this.Tooltip.style.top=o+r+"px",this.Tooltip.className="jschart-tooltip",this.Tooltip.innerHTML=l.Text,this.Tooltip.style.display="block"}else if(1===a.Type){R(),n=t,o=e;if((l=_e.Create("KLineInfoDataStringFormat")).Value=a,l.Symbol=this.Symbol,l.LanguageID=this.LanguageID,!l.Operator())return;h=l.Width;this.Tooltip.className="jchart-klineinfo-tooltip",this.Tooltip.style.position="absolute",n+h>this.UIElement.getBoundingClientRect().width?this.Tooltip.style.left=n-h+"px":this.Tooltip.style.left=n+"px",this.Tooltip.style.top=o+r+"px",this.Tooltip.style.width=h+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=l.Text,this.Tooltip.style.display="block"}else if(2==a.Type){n=t,o=e;if((l=_e.Create("KLineTradeDataStringFormat")).Value=a,l.Symbol=this.Symbol,l.LanguageID=this.LanguageID,!l.Operator())return;h=l.Width;this.Tooltip.className="jchart-klinetrade-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=n+"px",this.Tooltip.style.top=o+r+"px",this.Tooltip.style.width=h+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=l.Text,this.Tooltip.style.display="block"}else if(3==a.Type){n=t,o=e;if((l=_e.Create("MinuteInfoDataStringFormat")).Value=a,l.Symbol=this.Symbol,l.LanguageID=this.LanguageID,!l.Operator())return;h=l.Width;this.Tooltip.className="jchart-minuteinfo-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=n+"px",this.Tooltip.style.top=o+r+"px",this.Tooltip.style.width=h+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=l.Text,this.Tooltip.style.display="block"}else if(4==a.Type){n=t,o=e;if((l=_e.Create("IconDataStringFormat")).Value=a,l.Symbol=this.Symbol,l.LanguageID=this.LanguageID,!l.Operator())return;h=l.Width;this.Tooltip.className="jchart-iconinfo-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=n+"px",this.Tooltip.style.top=o+r+"px",this.Tooltip.style.width=h+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=l.Text,this.Tooltip.style.display="block"}else if(5==a.Type){n=t,o=e;if((l=_e.Create("ChartOXDataStringFormat")).Value=a,l.Symbol=this.Symbol,l.Period=this.Period,l.LanguageID=this.LanguageID,!l.Operator())return;h=l.Width;this.Tooltip.className="jchart-chartox-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=n+"px",this.Tooltip.style.top=o+r+"px",this.Tooltip.style.width=h+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=l.Text,this.Tooltip.style.display="block"}else if(6==a.Type){n=t,o=e;if((l=_e.Create("ScatterPlotDataStringFormat")).Value=a,l.Symbol=this.Symbol,l.Period=this.Period,l.LanguageID=this.LanguageID,!l.Operator())return;h=l.Width;this.Tooltip.className="jchart-charscatterplot-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=n+"px",this.Tooltip.style.top=o+r+"px",this.Tooltip.style.width=h+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=l.Text,this.Tooltip.style.display="block"}else if(7==a.Type){var l;n=t,o=e;if((l=_e.Create("ChartDrawSVGDataStringFormat")).Value=a,l.Symbol=this.Symbol,l.Period=this.Period,l.LanguageID=this.LanguageID,!l.Operator())return;h=l.Width;this.Tooltip.className="jchart-chartdrawsvg-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=n+"px",this.Tooltip.style.top=o+r+"px",this.Tooltip.style.width=h+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=l.Text,this.Tooltip.style.display="block"}}},this.HideTooltip=function(){"none"!=this.Tooltip.style.display&&(this.Tooltip.style.display="none")},this.ShowSelectRect=function(t,e,a,i){var r=t,n=e,o=this.Frame.ChartBorder.GetBorder(),s=o.Right,h=o.Left;t>s&&(t=s),a>s&&(a=s),t<h&&(t=h),a<h&&(a=h),t>a&&(r=a),e>i&&(n=i);var l=Math.abs(t-a),u=Math.abs(e-i);this.SelectRect.style.width=l+"px",this.SelectRect.style.height=u+"px",this.SelectRect.style.position="absolute",this.SelectRect.style.left=r+"px",this.SelectRect.style.top=n+"px",this.SelectRect.style.display="block"},this.UpdateSelectRect=function(t,e){if(this.ChartPaint[0].Data){var a=this.GetRectSelectPaint();if(a){var i=this.ChartPaint[0].Data,r=i.Data[t],n=i.Data[e];D.Chart.Log("[JSChartContainer::UpdateSelectRect]",r,n),a.SetPoint(r,{Index:0,DataIndex:t}),a.SetPoint(n,{Index:1,DataIndex:e}),this.Draw()}}},this.HideSelectRect=function(){this.SelectRect.style.display="none"},this.ResetFrameXYSplit=function(){"function"==typeof this.Frame.ResetXYSplit&&this.Frame.ResetXYSplit()},this.UpdateFrameMaxMin=function(){for(var t=new Array,e=new Array,a=0;a<this.ChartPaint.length;++a){0!=(l=this.ChartPaint[a]).IsShow&&e.push(this.ChartPaint[a])}for(a=0;a<this.OverlayChartPaint.length;++a)e.push(this.OverlayChartPaint[a]);var i=[];for(a=0;a<e.length;++a){if((o=e[a]).NotSupportMessage)i.push(o);else if(null!=(s=o.GetMaxMin())&&null!=s.Max&&null!=s.Min){for(var r=null,n=0;n<t.length;++n)if(t[n].Frame==o.ChartFrame){r=t[n];break}r?(r.Range.Max<s.Max&&(r.Range.Max=s.Max),r.Range.Min>s.Min&&(r.Range.Min=s.Min)):((r={OverlayFrame:[]}).Frame=o.ChartFrame,r.Range=s,t.push(r))}}for(a=0;a<i.length;++a){var o=i[a],s={Max:10,Min:1};for(r=null,n=0;n<t.length;++n)if(t[n].Frame==o.ChartFrame){r=t[n];break}r||((r={OverlayFrame:[]}).Frame=o.ChartFrame,r.Range=s,t.push(r))}var h=new C.default;for(a=0;a<t.length;++a){var l=t[a];h.set(l.Frame.Identify,l)}for(a=0;a<this.Frame.SubFrame.length;++a){var u=this.Frame.SubFrame[a];for(n=0;n<u.OverlayIndex.length;++n){var c=(d=u.OverlayIndex[n]).Frame;if(1==c.IsShareY)if(c.MainFrame)if(h.has(c.MainFrame.Identify))if((r=h.get(c.MainFrame.Identify))&&(r.OverlayFrame.push(c),!1!==c.IsCalculateYMaxMin))for(var f=0;f<d.ChartPaint.length;++f){null!=(s=(o=d.ChartPaint[f]).GetMaxMin())&&null!=s.Max&&null!=s.Min&&(r.Range.Max<s.Max&&(r.Range.Max=s.Max),r.Range.Min>s.Min&&(r.Range.Min=s.Min))}}}for(a=0;a<t.length;++a){if((l=t[a]).Frame&&l.Range&&(null!=l.Range.Max&&null!=l.Range.Min))for(var n in l.Frame.YSpecificMaxMin?(l.Frame.HorizontalMax=l.Frame.YSpecificMaxMin.Max,l.Frame.HorizontalMin=l.Frame.YSpecificMaxMin.Min):(l.Frame.HorizontalMax=l.Range.Max,l.Frame.HorizontalMin=l.Range.Min),l.Frame.XYSplit=!0,l.OverlayFrame)l.OverlayFrame[n].XYSplit=!0}for(a=0;a<this.Frame.SubFrame.length;++a)for(u=this.Frame.SubFrame[a],n=0;n<u.OverlayIndex.length;++n){var d;!0!==(d=u.OverlayIndex[n]).Frame.IsShareY&&d.UpdateFrameMaxMin()}},this.DataMoveLeft=function(){var t=null;return!!(t=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data)&&(!(t.DataOffset<=0)&&(--t.DataOffset,!0))},this.DataMoveRight=function(){var t=null;if(!(t=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data))return!1;var e=0;return!!(e=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount)&&(!(e+t.DataOffset>=t.Data.length)&&(++t.DataOffset,!0))},this.UpdataDataoffset=function(){var t=null;if(t=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data){for(var e in this.ChartPaint){(o=this.ChartPaint[e]).Data&&(o.Data.DataOffset=t.DataOffset)}for(var e in this.OverlayChartPaint){(o=this.OverlayChartPaint[e]).Data&&(o.Data.DataOffset=t.DataOffset)}for(var e in this.Frame.SubFrame){var a=this.Frame.SubFrame[e];for(var i in a.OverlayIndex){var r=a.OverlayIndex[i];for(var n in r.ChartPaint){var o;(o=r.ChartPaint[n]).Data&&(o.Data.DataOffset=t.DataOffset)}}}}},this.GetMoveOneStepWidth=function(){if(Te.IsPlusNumber(this.StepPixel))return this.StepPixel;var t=A(),e=this.Frame.SubFrame[0].Frame,a=e.DataWidth,i=e.DistanceWidth,r=this.StepPixel;return(r=(a+i)/t)<1&&(r=1),r},this.DataMove=function(t,e){var a=this.GetMoveOneStepWidth(),i=t;if((t=parseInt(t/a))<=0)return!1;var r=null;if(!(r=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data))return!1;var n=0;if(!(n=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount))return!1;if(this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&this.Frame.SubFrame[0].Frame){var o=this.Frame.SubFrame[0].Frame;(o.DataWidth<=1||o.DistanceWidth<=1)&&Te.IsPlusNumber(this.StepPixel)&&(t=parseInt(i)*this.StepPixel)}if(e){if(this.RightSpaceCount>0){if(n+r.DataOffset>=r.Data.length+this.RightSpaceCount-1)return!1;r.DataOffset+=t,r.DataOffset+n>=r.Data.length+this.RightSpaceCount&&(r.DataOffset=r.Data.length-(n-this.RightSpaceCount))}else{if(n+r.DataOffset>=r.Data.length)return!1;r.DataOffset+=t,r.DataOffset+n>=r.Data.length&&(r.DataOffset=r.Data.length-n)}return!0}return!(r.DataOffset<=0)&&(r.DataOffset-=t,r.DataOffset<0&&(r.DataOffset=0),!0)},this.XCoordinateZoom=function(t,e){var a=this.GetMoveOneStepWidth();return!((t=parseInt(t/a))<=0)&&this.Frame.XCoordinateZoom(e)},this.GetSubFrameIndex=function(t,e){if(!this.Frame.SubFrame||this.Frame.SubFrame.length<=0)return-1;for(var a in this.Frame.SubFrame){var i=this.Frame.SubFrame[a].Frame,r=i.ChartBorder.GetLeft(),n=i.ChartBorder.GetTop(),o=i.ChartBorder.GetHeight(),s=i.ChartBorder.GetWidth();if(this.Canvas.beginPath(),this.Canvas.rect(r,n,s,o),this.Canvas.isPointInPath(t,e))return parseInt(a)}return 0},this.GetDataIndexByPoint=function(t){var e=this.Frame;this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&(e=this.Frame.SubFrame[0].Frame);var a=null;if((a=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data)&&e){var i=parseInt(e.GetXData(t));return a.DataOffset+i}},this.GetSelectRectData=function(t){if(Math.abs(t.XStart-t.XEnd)<5)return!1;this.PtInClient(t.XStart,t.YStart),this.PtInClient(t.XEnd,t.YEnd);var e=null;if(!(e=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data))return!1;var a=this.GetDataIndexByPoint(t.XStart),i=this.GetDataIndexByPoint(t.XEnd);return!(Math.abs(a-i)<2)&&(t.Data=e,a>i?(t.Start=i,t.End=a):(t.Start=a,t.End=i),!0)},this.GetChartDrawPictureByPoint=function(t){for(var e=0;e<this.ChartDrawPicture.length;++e){var a=this.ChartDrawPicture[e],i=a.IsPointIn(t.X,t.Y,this.ChartDrawOption);if(!1!==i&&i>=0)return t.ChartDrawPicture=a,t.PointIndex=i,a.GetCursorType&&(t.Cursor=a.GetCursorType(i)),!0}return!1},this.SaveToImage=function(t,e){if(this.UIElement.width<=0||this.UIElement.height<=0)return null;if(this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return null;D.Chart.Log("[JSChartContainer::SaveToImage]",this.UIElement);var a="rgb(255,255,255)";e&&(a=e),this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.Canvas.fillStyle=a,this.Canvas.fillRect(0,0,this.UIElement.width,this.UIElement.height);var i=A();for(var r in this.Canvas.lineWidth=i,this.Frame.Draw(),this.ChartPaint){(n=this.ChartPaint[r]).IsDrawFirst&&n.Draw()}for(var r in this.ChartPaint){(n=this.ChartPaint[r]).IsDrawFirst||n.Draw()}for(var r in this.ChartPaintEx){(n=this.ChartPaintEx[r]).Draw()}for(var r in this.OverlayChartPaint){(n=this.OverlayChartPaint[r]).Draw()}for(var r in this.ExtendChartPaint){(n=this.ExtendChartPaint[r]).IsDynamic||0!=n.IsAnimation||n.Draw()}for(var r in this.Frame.DrawInsideHorizontal&&this.Frame.DrawInsideHorizontal(),this.Frame.DrawLock(),this.ExtendChartPaint){(n=this.ExtendChartPaint[r]).IsDynamic&&!1===n.DrawAfterTitle&&n.Draw()}for(var r in null==this.LastPoint.X&&null==this.LastPoint.Y||this.ChartCorssCursor&&(this.ChartCorssCursor.LastPoint=this.LastPoint,this.ChartCorssCursor.CursorIndex=this.CursorIndex),this.TitlePaint){(n=this.TitlePaint[r]).IsDynamic&&(n.CursorIndex=this.CursorIndex,n.Draw())}for(var r in this.ExtendChartPaint){(n=this.ExtendChartPaint[r]).IsDynamic&&!0===n.DrawAfterTitle&&0==n.IsAnimation&&n.Draw()}if(this.EnableAnimation)for(var r in this.ExtendChartPaint){!0===(n=this.ExtendChartPaint[r]).IsAnimation&&n.Draw()}for(var r in this.ChartDrawPicture){var n;(n=this.ChartDrawPicture[r]).Draw()}this.CurrentChartDrawPicture&&10!=this.CurrentChartDrawPicture.Status&&this.CurrentChartDrawPicture.Draw();var o=this.UIElement.toDataURL(t||"image/png",1);return D.Chart.Log("[JSChartContainer::SaveToImage] data= ",o),o},this.SaveToImageUrl=function(t,e){t||(t={Format:"image/png",ColorGB:"rgb(255,255,255)"});var a={Base64:this.SaveToImage(t.Format,t.ColorGB),BucketName:"downloadcache",Path:"hqchart/hq_snapshot"},i=ia.Domain+"/API/FileUploadForBase64";v.HttpRequest({url:i,method:"POST",dataType:"json",data:a,success:function(t){D.Chart.Log("[JSChartContainer::SaveToImageUrl] recv data",t);var a={Path:t.relativeurl,Domain:"https://opensourcedownload.zealink.com"};a.Url=a.Domain+"/"+a.Path,e&&e(!0,a,"")},error:function(t){D.Chart.Log("[JSChartContainer::SaveToImageUrl] error ",t),e&&e(!1,null,"upload failed")}})},this.ExportDataToCSV=function(t){for(var e="",a="",i=0,r=0;r<t.length;++r){a+='"'+(o=t[r]).Name+'"',r==t.length-1?a+="\r\n":a+=",",Te.IsNonEmptyArray(o.Data)&&(i=Math.max(i,o.Data.length))}e+=a;r=0;for(var n=0;r<i;++r){for(a="",n=0;n<t.length;++n){var o,s=null;(o=t[n]).Data&&r<o.Data.length&&(s=o.Data[r]),a+='"'+s+'"',n==t.length-1?a+="\r\n":a+=","}e+=a}return e="\ufeff"+e},this.SetLanguage=function(t){var e=na.GetLanguageID(t);if(Te.IsNumber(e)){if(this.LanguageID!=e){this.LanguageID=e,this.ChartCorssCursor&&this.ChartCorssCursor.StringFormatY&&(this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID);for(var a=0;a<this.TitlePaint.length;++a){(i=this.TitlePaint[a])&&(i.LanguageID=this.LanguageID)}for(a=0;a<this.ExtendChartPaint.length;++a){var i;(i=this.ExtendChartPaint[a])&&(i.LanguageID=this.LanguageID)}this.Frame&&this.Frame.SetLanguage&&this.Frame.SetLanguage(this.LanguageID),this.Frame.SetSizeChage(!0),this.Draw()}}else console.warn("[JSChartContainer::SetLanguage] language="+t+" error")},this.ReloadTiltePaintResource=function(t){for(var e in this.TitlePaint){var a=this.TitlePaint[e];a.ReloadResource&&a.ReloadResource(t)}},this.ReloadExtendChartPaintResource=function(t){for(var e in this.ExtendChartPaint){var a=this.ExtendChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}},this.ReloadChartDrawPictureResource=function(t){if(Te.IsNonEmptyArray(this.ChartDrawPicture))for(var e=0;e<this.ChartDrawPicture.length;++e){var a=this.ChartDrawPicture[e];a.ReloadResource&&a.ReloadResource(t)}},this.ReloadResource=function(t){this.ReloadBorder(t),this.ReloadTiltePaintResource(t.Resource),this.ReloadChartPaint(t.Resource),this.ReloadFrame(t.Resource),this.ReloadExtendChartPaintResource(t.Resource),this.ReloadChartCorssCursor(t,t.Resource),this.ReloadChartDrawPictureResource(t.Resource),t.Update&&this.Update?this.Update({UpdateCursorIndexType:2}):1==t.Draw&&this.Draw()},this.ReloadBorder=function(t){if(t){var e=A();if(t.Border){var a=t.Border;Te.IsNumber(a.Left)&&(this.Frame.ChartBorder.Left=a.Left*e),Te.IsNumber(a.Right)&&(this.Frame.ChartBorder.Right=a.Right*e),Te.IsNumber(a.Top)&&(this.Frame.ChartBorder.Top=a.Top*e),Te.IsNumber(a.Bottom)&&(this.Frame.ChartBorder.Bottom=a.Bottom*e)}for(var i in t.Windows){a=t.Windows[i];if(!(i>=this.Frame.SubFrame.length)){var r=this.Frame.SubFrame[i].Frame.ChartBorder;Te.IsNumber(a.TitleHeight)&&(r.TitleHeight=a.TitleHeight*e)}}for(var i in t.Frame){a=t.Frame[i];if(!(i>=this.Frame.SubFrame.length)){r=this.Frame.SubFrame[i].Frame.ChartBorder;a.TopSpace>=0&&(r.TopSpace=a.TopSpace*e),a.BottomSpace>=0&&(r.BottomSpace=a.BottomSpace*e)}}}},this.ReloadFrame=function(t){for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e],i=a.Frame;i&&i.ReloadResource&&i.ReloadResource(t);for(var r=0;r<a.OverlayIndex.length;++r){var n=a.OverlayIndex[r];n.Frame&&n.Frame.ReloadResource&&n.Frame.ReloadResource(t)}}},this.ReloadChartPaint=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&a.ReloadResource&&a.ReloadResource(t)}},this.ReloadChartCorssCursor=function(t,e){var a=A();if(t&&t.CorssCursor){var i=t.CorssCursor;Te.IsNumber(i.TitleHeight)&&(this.ChartCorssCursor.TextHeight=i.TitleHeight*a)}this.ChartCorssCursor.ReloadResource&&this.ChartCorssCursor.ReloadResource(e)},this.SetDepthMapData=function(t,e){for(var a=0;a<t.length;++a)for(var i=t[a],r=0;r<this.ExtendChartPaint.length;++r){var n=this.ExtendChartPaint[r];if(n.ID==i.ID){n.Data=i.Data;break}}e&&1==e.Draw&&this.Draw()},this.PointAbsoluteToRelative=function(t,e,a){var i={X:t,Y:e},r=A(),n=this.UIElement.getBoundingClientRect();return a?(i.X=t-n.left*r,i.Y=e-n.top*r):(i.X=(t-n.left)*r,i.Y=(e-n.top)*r),i},this.SetChartDrawPictureFirstPoint=function(t,e,a){var i=this.CurrentChartDrawPicture;if(!i)return!1;if(!this.Frame.SubFrame||this.Frame.SubFrame.length<=0)return!1;for(var r=this.PointAbsoluteToRelative(t,e,a),n=r.X,o=r.Y,s=0;s<this.Frame.SubFrame.length;++s){var h=this.Frame.SubFrame[s].Frame,l=h.ChartBorder.GetLeft(),u=h.ChartBorder.GetTopEx(),c=h.ChartBorder.GetBottomEx()-u,f=h.ChartBorder.GetWidth();if(this.Canvas.beginPath(),this.Canvas.rect(l,u,f,c),this.Canvas.isPointInPath(n,o)){if(Te.IsNumber(i.LimitFrameID)&&s!=i.LimitFrameID)return!1;i.Frame=h;break}}return!!i.Frame&&(i.Point[0]=new V,i.Point[0].X=n,i.Point[0].Y=o,i.Status=1,i.PointMagnetKLine(),!0)},this.SetChartDrawPictureSecondPoint=function(t,e,a){var i=this.CurrentChartDrawPicture;if(!i)return!1;var r=this.PointAbsoluteToRelative(t,e,a);return i.Point[1]=new V,i.Point[1].X=r.X,i.Point[1].Y=r.Y,i.Status=2,!0},this.SetChartDrawPictureThirdPoint=function(t,e,a){var i=this.CurrentChartDrawPicture;if(!i)return!1;var r=this.PointAbsoluteToRelative(t,e,a);return i.Point[2]=new V,i.Point[2].X=r.X,i.Point[2].Y=r.Y,i.Status=3,!0},this.MoveChartDrawPicture=function(t,e,a,i){var r=this.CurrentChartDrawPicture;if(!r)return!1;var n=A();a&&(n=1);var o=t*n,s=e*n;return r.Move(o,s,i),!0},this.FinishChartDrawPicturePoint=function(){var t=this.CurrentChartDrawPicture;if(!t)return!1;if(t.PointCount!=t.Point.length)return!1;if("ChartDrawRuler"==t.ClassName)return this.CurrentChartDrawPicture=null,!0;t.PointMagnetKLine(),t.Status=10,t.PointToValue(),this.ChartDrawPicture.push(t),this.CurrentChartDrawPicture=null;var e=this.GetEventCallback(w.ON_FINISH_DRAWPICTURE);if(e&&e.Callback){var a={DrawPicture:t};e.Callback(e,a,this)}else t.FinishedCallback&&t.FinishedCallback(t);return t.OnFinish&&t.OnFinish(),this.ChartDrawStorage&&this.ChartDrawStorage.SaveDrawData(t),!0},this.OnSelectChartPicture=function(t){if(D.Chart.Log("[JSChartContainer::OnSelectChartPicture]",t),this.ChartPictureMenu||(this.ChartPictureMenu=ya.Create("ChartPictureSettingMenu",this.UIElement.parentNode)),this.ChartPictureMenu){var e={data:{ChartPicture:t,HQChart:this}};this.ChartPictureMenu.DoModal(e)}},this.FinishMoveChartDrawPicture=function(){var t=this.CurrentChartDrawPicture;if(!t)return!1;if(t.PointCount!=t.Point.length)return!1;if(t.PointMagnetKLine(),t.Status=10,t.PointToValue(),this.ChartDrawStorage&&this.ChartDrawStorage.SaveDrawData(t),this.CurrentChartDrawPicture=null,this.SelectChartDrawPicture&&this.SelectChartDrawPicture.DragInfo){var e=this.SelectChartDrawPicture.DragInfo;if(e.Click&&e.Move&&(e.Click.X!=e.Move.X||e.Click.Y!=e.Move.Y)){var a=this.GetEventCallback(w.ON_FINISH_MOVE_DRAWPICTURE);if(a&&a.Callback){var i={DrawPicture:t};a.Callback(a,i,this)}t.OnMoveFinish&&t.OnMoveFinish()}}return!0},this.ClearChartDrawPicture=function(t,e){var a=!0;if(t)for(var i in this.ChartDrawPicture)this.ChartDrawPicture[i]==t&&(this.ChartDrawStorage&&this.ChartDrawStorage.DeleteDrawData(t),this.ChartDrawPicture.splice(i,1),e&&0==e.Draw&&(a=!1),a&&this.Draw());else this.ChartDrawPicture=[],this.ChartDrawStorage&&this.ChartDrawStorage.Clear(),e&&0==e.Draw&&(a=!1),a&&this.Draw()},this.GetActiveDrawPicture=function(){var t={Move:{Guid:null},Select:{Guid:null},MoveOn:{Guid:null}};return this.CurrentChartDrawPicture&&(t.Move={Guid:this.CurrentChartDrawPicture.Guid}),this.SelectChartDrawPicture&&(t.Select={Guid:this.SelectChartDrawPicture.Guid,Chart:this.SelectChartDrawPicture}),this.MoveOnChartDrawPicture&&(t.MoveOn={Guid:this.MoveOnChartDrawPicture.Guid}),t},this.SetChartDrawOption=function(t){if(Te.IsBool(t.IsLockScreen)&&(this.ChartDrawOption.IsLockScreen=t.IsLockScreen),Te.IsNumber(t.Zoom)&&t.Zoom>=0&&(this.ChartDrawOption.Zoom=t.Zoom),t.Magnet){var e=t.Magnet;this.ChartDrawOption.Magnet||(this.ChartDrawOption.Magnet={Type:0,Distance:20*A(),Enable:!1}),Te.IsBool(e.Enable)&&(this.ChartDrawOption.Magnet.Enable=e.Enable),Te.IsNumber(e.Type)&&(this.ChartDrawOption.Magnet.Type=e.Type),Te.IsNumber(e.Distance)&&(this.ChartDrawOption.Magnet.Distance=opitemion.Distance)}},this.EnableShowCorssCursorLine=function(t){this.ChartCorssCursor&&(this.ChartCorssCursor.IsShowCorss=t)},this.GetExtendChartByClassName=function(t){for(var e=0;e<this.ExtendChartPaint.length;++e){var a=this.ExtendChartPaint[e];if(a.ClassName==t)return{Index:e,Chart:a}}return null},this.GetExtendChartRightWidth=function(){for(var t=0,e=0;e<this.ExtendChartPaint.length;++e){var a=this.ExtendChartPaint[e];a&&("StockChip"!=a.ClassName&&"DrawToolsButton"!=a.ClassName||Te.IsNumber(a.Width)&&(t+=a.Width))}return t},this.DeleteExtendChart=function(t){t.Index>=this.ExtendChartPaint.length||this.ExtendChartPaint[t.Index]==t.Chart&&("function"==typeof t.Chart.Clear&&t.Chart.Clear(),this.ExtendChartPaint.splice(t.Index,1))},this.EnableSplashScreen=function(t){this.ChartSplashPaint&&t&&(Te.IsString(t.Title)&&this.ChartSplashPaint.SetTitle(t.Title),this.ChartSplashPaint.EnableSplash(!0),!1!==t.Draw&&this.Draw())},this.SetSubFrameAttribute=function(t,e,a){if(t&&t.Frame){var i=t.Frame;e&&(Te.IsBool(e.Modify)&&(i.ModifyIndex=e.Modify),Te.IsBool(e.Change)&&(i.ChangeIndex=e.Change),Te.IsBool(e.Close)&&(i.CloseIndex=e.Close),Te.IsBool(e.Overlay)&&(i.OverlayIndex=e.Overlay),Te.IsBool(e.IsDrawTitleBG)&&(i.IsDrawTitleBG=e.IsDrawTitleBG),Te.IsNumber(e.TitleHeight)?i.ChartBorder.TitleHeight=e.TitleHeight:e.TitleHeight=i.ChartBorder.TitleHeight,Te.IsBool(e.IsShowTitleArraw)&&(i.IsShowTitleArraw=e.IsShowTitleArraw),Te.IsBool(e.IsShowIndexName)&&(i.IsShowIndexName=e.IsShowIndexName),Te.IsNumber(e.IndexParamSpace)&&(i.IndexParamSpace=e.IndexParamSpace),Te.IsNumber(e.IndexTitleSpace)&&(i.IndexTitleSpace=e.IndexTitleSpace)),a&&(a.SplitCount&&(i.YSplitOperator.SplitCount=a.SplitCount),Te.IsBool(a.IsShowXLine)&&(i.IsShowXLine=a.IsShowXLine),Te.IsBool(a.IsShowYLine)&&(i.IsShowYLine=a.IsShowYLine),Te.IsBool(a.IsShowLeftText)&&(i.IsShowYText[0]=a.IsShowLeftText,i.YSplitOperator.IsShowLeftText=a.IsShowLeftText),Te.IsBool(a.IsShowRightText)&&(i.IsShowYText[1]=a.IsShowRightText,i.YSplitOperator.IsShowRightText=a.IsShowRightText),Te.IsNumber(a.Height)&&a.Height>=0&&(t.Height=a.Height))}},this.SetSubFrameOption=function(t,e){if(e){if(e.Window){var a=e.Window;null!=a.Modify&&(t.Frame.ModifyIndex=a.Modify),null!=a.Change&&(t.Frame.ChangeIndex=a.Change),null!=a.Close&&(t.Frame.CloseIndex=a.Close),null!=a.Overlay&&(t.Frame.OverlayIndex=a.Overlay),1==a.IsDrawTitleBG&&(t.Frame.IsDrawTitleBG=a.IsDrawTitleBG),Te.IsBool(a.IsShowNameArrow)&&(t.Frame.IsShowNameArrow=a.IsShowNameArrow),a.OverlayIndexType&&(Te.IsNumber(a.OverlayIndexType.Position)&&(t.Frame.OverlayIndexType.Position=a.OverlayIndexType.Position),Te.IsNumber(a.OverlayIndexType.LineSpace)&&(t.Frame.OverlayIndexType.LineSpace=a.OverlayIndexType.LineSpace))}Te.IsNumber(e.SplitCount)&&(t.Frame.YSplitOperator.SplitCount=e.SplitCount),Te.IsNumber(e.TitleHeight)&&(t.Frame.ChartBorder.TitleHeight=e.TitleHeight),Te.IsBool(e.IsShowTitleArraw)&&(t.Frame.IsShowTitleArraw=e.IsShowTitleArraw),Te.IsBool(e.IsShowIndexName)&&(t.Frame.IsShowIndexName=e.IsShowIndexName),Te.IsBool(e.IsShowOverlayIndexName)&&(t.Frame.IsShowOverlayIndexName=e.IsShowOverlayIndexName),Te.IsNumber(e.IndexParamSpace)&&(t.Frame.IndexParamSpace=e.IndexParamSpace),Te.IsBool(e.IsShowXLine)&&(t.Frame.IsShowXLine=e.IsShowXLine),Te.IsBool(e.IsShowYLine)&&(t.Frame.IsShowYLine=e.IsShowYLine),Te.IsBool(e.IsShowIndexTitle)&&(t.Frame.IsShowIndexTitle=e.IsShowIndexTitle),Te.IsBool(e.IsShowLeftText)&&(t.Frame.IsShowYText[0]=e.IsShowLeftText,t.Frame.YSplitOperator.IsShowLeftText=e.IsShowLeftText),Te.IsBool(e.IsShowRightText)&&(t.Frame.IsShowYText[1]=e.IsShowRightText,t.Frame.YSplitOperator.IsShowRightText=e.IsShowRightText)}},this.AddNewSubFrame=function(t){var e=this,a=this.Frame.SubFrame.length,i=this.CreateSubFrameItem(a),r=A();i.Frame.ChartBorder.TitleHeight*=r,this.Frame.SubFrame[a]=i;var n=new Xe;n.Frame=this.Frame.SubFrame[a].Frame,n.Canvas=this.Canvas,n.LanguageID=this.LanguageID,n.GetEventCallback=function(t){return e.GetEventCallback(t)},this.TitlePaint[a+1]=n,this.SetSubFrameOption(i,t);for(var o=0;o<this.Frame.SubFrame.length;++o){var s=this.Frame.SubFrame[o].Frame;o==this.Frame.SubFrame.length-1?s.XSplitOperator.ShowText=!0:s.XSplitOperator.ShowText=!1}return this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.UpdateXShowText&&this.UpdateXShowText(),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw(),a},this.AddIndexWindow=function(t,e){var a=(new T).Get(t);if(a){this.RemoveMinSizeWindows();var i=this.AddNewSubFrame(e),r={Name:a.Name,Script:a.Script,Args:a.Args,ID:t,KLineType:a.KLineType,YSpecificMaxMin:a.YSpecificMaxMin,YSplitScale:a.YSplitScale,FloatPrecision:a.FloatPrecision,Condition:a.Condition,StringFormat:a.StringFormat,OutName:a.OutName};if(e&&(e.FloatPrecision>=0&&(r.FloatPrecision=e.FloatPrecision),e.StringFormat>0&&(r.StringFormat=e.StringFormat),e.Args&&(r.Args=e.Args),e.Lock&&(r.Lock=e.Lock)),this.WindowIndex[i]=new si(r.Name,r.Script,r.Args,r),"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName)var n=this.SourceData;else n=this.ChartPaint[0].Data;this.BindIndexData(i,n)}},this.AddAPIIndexWindow=function(t,e){if(t.API){this.RemoveMinSizeWindows();var a=this.AddNewSubFrame(e),i=t.API;if(this.WindowIndex[a]=new li(i.Name,i.Script,i.Args,t),"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName)var r=this.SourceData;else r=this.ChartPaint[0].Data;this.BindIndexData(a,r)}},this.AddScriptIndexWindow=function(t,e){if(t&&t.Script&&t.Name){this.RemoveMinSizeWindows();var a=this.AddNewSubFrame(e),i={Name:t.Name,Script:t.Script,Args:t.Args,ID:t.Name,KLineType:t.KLineType,YSpecificMaxMin:t.YSpecificMaxMin,YSplitScale:t.YSplitScale,FloatPrecision:t.FloatPrecision,Condition:t.Condition,StringFormat:t.StringFormat,OutName:t.OutName};if(t.ID&&(i.ID=t.ID),this.WindowIndex[a]=new si(i.Name,i.Script,i.Args,i),"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName)var r=this.SourceData;else r=this.ChartPaint[0].Data;this.BindIndexData(a,r)}},this.GetRectSelectPaint=function(){for(var t=0;t<this.ExtendChartPaint.length;++t){var e=this.ExtendChartPaint[t];if("RectSelectPaint"==e.ClassName)return e}return null},this.SetRectSelectData=function(t,e){var a=this.GetRectSelectPaint();if(!a)return!1;if(2==a.GetPointCount()){if(!a.SpaceReselected)return!1;var i=a.PreventClose;a.PreventClose=!1,a.ClearPoint(),a.PreventClose=i}return a.SetPoint(t,{DataIndex:e})},this.MoveRectSelectPoint=function(e){var a=this.GetRectSelectPaint();if(!a)return!1;if(!this.ChartPaint[0]||!this.ChartPaint[0].Data)return!1;var i=this.ChartPaint[0].Data;if(!this.Frame.SubFrame[0])return!1;var r=this.Frame.SubFrame[0].Frame,n=A(),o=(e.X-t.getBoundingClientRect().left)*n,s=r.GetXData(o),h=(s=parseInt(s.toFixed(0)))+i.DataOffset;h>=i.Data.length&&(h=i.Data.length-1);var l=i.Data[h];if(D.Chart.Log("[KLineChartContainer::MoveRectSelectPoint] point, item",e.PointIndex,l),!a.SetPoint(l,{Index:e.PointIndex,DataIndex:h}))return!1;var u=this.GetEventCallback(w.ON_DRAG_SELECT_RECT);if(u){var c=a.GetSelectRectData(),f={X:e.X,Y:e.Y,SelectData:c,RectSelectPaint:a};u.Callback(u,f,this)}return!0},this.MoveSubRectSelect=function(t){var e=this.GetRectSelectPaint();if(!e)return!1;if(!e.MoveSubRect(t.Step,t.IsLeft))return!1;var a=this.GetEventCallback(w.ON_DRAG_SUB_SELECT_RECT);if(a){var i={Start:e.SubClient.FirstPoint,End:e.SubClient.SecondPoint},r={X:t.X,Y:t.Y,SubRectSelectData:i,RectSelectPaint:e};a.Callback(a,r,this)}return!0},this.ClearRectSelect=function(t){var e=this.GetRectSelectPaint();return!!e&&(t&&(e.PreventClose=!1),e.ClearPoint())},this.DeleteOverlayIndex=function(t,e){var a=null;if(Te.IsNumber(e)){if(e>=0&&e<this.Frame.SubFrame.length)for(var i=this.Frame.SubFrame[e],r=0;r<i.OverlayIndex.length;++r){if((s=i.OverlayIndex[r]).Identify===t){for(var n=0;n<s.ChartPaint.length;++n){(h=s.ChartPaint[n])&&h.OnDestroy&&h.OnDestroy()}i.OverlayIndex.splice(r,1),a=e;break}}}else for(var o=0;o<this.Frame.SubFrame.length;++o)for(i=this.Frame.SubFrame[o],r=0;r<i.OverlayIndex.length;++r){var s;if((s=i.OverlayIndex[r]).Identify===t){for(n=0;n<s.ChartPaint.length;++n){var h;(h=s.ChartPaint[n])&&h.OnDestroy&&h.OnDestroy()}i.OverlayIndex.splice(r,1),a=o;break}}if(null==a)return console.warn("[JSChartContainer::DeleteOverlayIndex] can't find overlay index. [identify="+t+"]"),!1;var l=a+1,u=this.TitlePaint[l];return u.OverlayIndex.has(t)&&u.OverlayIndex.delete(t),u.OverlayDynamicTitle.has(t)&&u.OverlayDynamicTitle.delete(t),!0},this.FindScriptIndex=function(t,e){if(Te.IsNumber(e)&&e>=0){if(e>=this.Frame.SubFrame.length)return null;if((a=this.WindowIndex[e])&&a.Guid==t)return{Type:0,Data:a,WindowIndex:e};for(var a=this.Frame.SubFrame[e],i=0;i<a.OverlayIndex.length;++i){if((n=a.OverlayIndex[i]).Identify===t)return{Type:1,Data:n,WindowIndex:e,OverlayIndex:i}}}else for(i=0;i<this.Frame.SubFrame.length;++i){if((a=this.WindowIndex[i])&&a.Guid==t)return{Type:0,Data:a,WindowIndex:i};a=this.Frame.SubFrame[i];for(var r=0;r<a.OverlayIndex.length;++r){var n;if((n=a.OverlayIndex[r]).Identify===t)return{Type:1,Data:n,WindowIndex:i,OverlayIndex:r}}}return null},this.MoveIndex=function(t,e,a){var i=this;if(!t||!e||!a)return!1;if(!Te.IsNumber(t.WindowIndex)||t.WindowIndex<0||t.WindowIndex>=this.Frame.SubFrame.length)return!1;if(!Te.IsNumber(e.WindowIndex)||e.WindowIndex<0||e.WindowIndex>=this.Frame.SubFrame.length)return!1;if(!(d=this.FindScriptIndex(t.IndexID,t.WindowIndex)))return!1;var r=null,n=null;if(0==d.Type?r=d.Data:1==d.Type&&(n=d.Data),!n&&!r)return!1;var o=0;if(("MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName)&&(o=2),e.WindowIndex>=o&&null==this.WindowIndex[e.WindowIndex]){r?this.WindowIndex[e.WindowIndex]=this.CreateMainScript(r):n&&(this.WindowIndex[e.WindowIndex]=this.CreateMainScript(n.Script)),0==a.Operator&&(n?this.DeleteOverlayIndex(n.Identify,t.WindowIndex):r&&this.DeleteMainIndex(r.Guid,t.WindowIndex));var s=this.GetMainData();this.BindIndexData(e.WindowIndex,s),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}else{var h=this.Frame.SubFrame[e.WindowIndex];h.Interval=this.OverlayIndexFrameWidth;var l,u=new rt,c=this.CreateOverlayFrame();c.Canvas=this.Canvas,c.MainFrame=h.Frame,c.ChartBorder=h.Frame.ChartBorder,n&&(c.IsShow=n.Frame.IsShow),c.YSplitOperator=new ye,c.YSplitOperator.LanguageID=this.LanguageID,c.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),c.YSplitOperator.Frame=c,c.YSplitOperator.ChartBorder=c.ChartBorder,c.YSplitOperator.SplitCount=h.Frame.YSplitOperator.SplitCount,c.YSplitOperator.GetEventCallback=function(t){return i.GetEventCallback(t)},u.Frame=c,r?(l=this.CreateOverlayScript(r)).OverlayIndex={IsOverlay:!0,Identify:u.Identify,WindowIndex:e.WindowIndex,Frame:u}:n&&((l=this.CreateOverlayScript(n.Script)).OverlayIndex={IsOverlay:!0,Identify:u.Identify,WindowIndex:e.WindowIndex,Frame:u}),u.Script=l,h.OverlayIndex.push(u);var f=e.WindowIndex;if(0==a.Operator)if(n)this.DeleteOverlayIndex(n.Identify,t.WindowIndex);else if(r){var d;this.DeleteMainIndex(r.Guid,t.WindowIndex),(d=this.FindScriptIndex(u.Identify))&&(f=d.WindowIndex)}s=this.GetMainData();this.BindOverlayIndexData(u,f,s),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.MoveIndexToNewWindow=function(t,e){var a=this;if(!t||!e)return!1;if(!Te.IsNumber(t.WindowIndex)||t.WindowIndex<0||t.WindowIndex>=this.Frame.SubFrame.length)return!1;var i=this.FindScriptIndex(t.IndexID,t.WindowIndex);if(!i)return!1;var r=null,n=null;if(0==i.Type?r=i.Data:1==i.Type&&(n=i.Data),!n&&!r)return!1;if(t.WindowIndex==this.Frame.SubFrame.length-1&&this.Frame.SubFrame[t.WindowIndex].OverlayIndex<=0)return!1;this.RemoveMinSizeWindows();var o=this.Frame.SubFrame.length,s=this.CreateSubFrameItem(o),h=A();s.Frame.ChartBorder.TitleHeight*=h,this.Frame.SubFrame[o]=s;var l=new Xe;l.Frame=this.Frame.SubFrame[o].Frame,l.Canvas=this.Canvas,l.LanguageID=this.LanguageID,l.SelectedChart=this.SelectedChart,l.GetEventCallback=function(t){return a.GetEventCallback(t)},this.TitlePaint[o+1]=l,this.SetSubFrameOption(s,e);for(var u=0;u<this.Frame.SubFrame.length;++u){var c=this.Frame.SubFrame[u].Frame;u==this.Frame.SubFrame.length-1?c.XSplitOperator.ShowText=!0:c.XSplitOperator.ShowText=!1}0==e.Operator&&(n?this.DeleteOverlayIndex(n.Identify,t.WindowIndex):r&&this.DeleteMainIndex(r.Guid,t.WindowIndex)),this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.UpdateXShowText&&this.UpdateXShowText(),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw();o=this.Frame.SubFrame.length-1;r?this.WindowIndex[o]=this.CreateMainScript(r):n&&(this.WindowIndex[o]=this.CreateMainScript(n.Script));var f=this.GetMainData();this.BindIndexData(o,f)},this.CreateOverlayScript=function(t){var e=null;switch(t.ClassName){case"ScriptIndex":e=new hi;break;case"APIScriptIndex":e=new li(null,null,null,null,!0);break;case"OverlayScriptIndex":e=new hi}return t.CopyTo(e),e},this.CreateMainScript=function(t){var e=null;switch(t.ClassName){case"ScriptIndex":case"OverlayScriptIndex":e=new si;break;case"APIScriptIndex":e=new li}return t.CopyTo(e),e},this.DeleteMainIndex=function(t,e){if(!this.WindowIndex[e])return!1;var a=this.Frame.SubFrame[e];if(!a)return!1;if(Te.IsNonEmptyArray(a.OverlayIndex)){var i=a.OverlayIndex[0];this.DeleteOverlayIndex(i.Identify,e),this.WindowIndex[e]=this.CreateMainScript(i.Script);var r=this.GetMainData();this.BindIndexData(e,r)}else this.RemoveIndexWindow(e,{DeleteMainIndex:!0})},this.GetMainData=function(){switch(this.ClassName){case"MinuteChartContainer":case"MinuteChartHScreenContainer":return this.SourceData;case"KLineChartContainer":case"KLineChartHScreenContainer":return this.ChartPaint[0].Data}},this.CreateOverlayFrame=function(){switch(this.ClassName){case"KLineChartContainer":return new tt;case"KLineChartHScreenContainer":return new at;case"MinuteChartContainer":return new Z;case"MinuteChartHScreenContainer":return new Q}},this.ExportData=function(t){if(!this.ExportMainData)return null;if(!this.ChartPaint[0])return null;var e=this.GetMainData();if(!e||!Te.IsNonEmptyArray(e.Data))return null;var a=null,i=e.Data;t.Start&&t.End&&(a=e.GetDataRange(t.Start,t.End));var r=this.ExportMainData(e,a);if(!r)return null;for(var n=1;n<this.ChartPaint.length;++n){if((l=this.ChartPaint[n])&&l.ExportData)if((c=l.ExportData(i,a))&&Te.IsNonEmptyArray(c))for(var o=0;o<c.length;++o){var s=c[o];l.IndexName?r.push({Name:s.Name+"("+l.IndexName+")",Data:s.Data}):r.push(s)}}for(n=0;n<this.OverlayChartPaint.length;++n){if((l=this.OverlayChartPaint[n]).Data&&Te.IsNonEmptyArray(f.Data.Data))if((c=this.ExportMainData(l.Data,{IsOverlay:!0}))&&Te.IsNonEmptyArray(c))for(o=0;o<c.length;++o){s=c[o];r.push({Name:s.Name+"("+l.Symbol+")",Data:s.Data})}}n=0,o=0;for(var h=0;n<this.Frame.SubFrame.length;++n){var l=this.Frame.SubFrame[n];for(o=0;o<l.OverlayIndex.length;++o){var u=l.OverlayIndex[o];if(Te.IsNonEmptyArray(u.ChartPaint))for(h=0;h<u.ChartPaint.length;++h){var c,f=u.ChartPaint[h];if(f&&f.ExportData)if((c=f.ExportData(i,a))&&Te.IsNonEmptyArray(c))for(var d=0;d<c.length;++d){s=c[d];f.IndexName?r.push({Name:s.Name+"("+f.IndexName+")",Data:s.Data}):r.push(s)}}}}return t&&"CSV"==t.Type?this.ExportDataToCSV(r):r}}function A(){return"undefined"==typeof window?1:window.devicePixelRatio||1}function O(t,e,a){if(!t)return null;e&&(t.font=e);var i="擎";Te.IsString(a)&&(i=a);var r=t.measureText(i),n=r.fontBoundingBoxAscent+r.fontBoundingBoxDescent;return Te.IsNumber(n)||(n=r.width+2*A()),n}function N(t){this.JSChartContainer&&this.JSChartContainer.OnKeyDown&&this.JSChartContainer.OnKeyDown(t)}function P(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return"guid"+(t()+t())+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function R(){var t={},e=0,a=0;return document.documentElement&&document.documentElement.scrollTop?(e=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):document.body&&(e=document.body.scrollTop,a=document.body.scrollLeft),t.Top=e,t.Left=a,t}function _(t){return parseInt(t)+.5}function B(t,e){return t%2==0?Math.floor(e):Math.floor(e)+.5}function k(t){return.5+t<<0}function G(t){if(!t)return null;var e=(0,d.default)(t);return JSON.parse(e)}function V(){this.X,this.Y}function H(){this.Data,this.JSChartContainer,this.Start,this.End,this.XStart,this.YStart,this.XEnd,this.YEnd}function Y(){this.Value,this.Message=[],this.TextColor=ia.FrameSplitTextColor,this.TextColor2,this.Font=ia.FrameSplitTextFont,this.LineColor=ia.FrameSplitPen,this.LineDash=null,this.LineType=1,this.LineWidth,this.ExtendData}function X(){this.UIElement,this.Left=50,this.Right=80,this.Top=50,this.Bottom=50,this.TitleHeight=24,this.TopSpace=0,this.BottomSpace=0,this.LeftExtendWidth=0,this.RightExtendWidth=0,this.MultiDayMinute={Count:1,Left:0,Right:0},this.IsShowTitleOnly=!1,this.GetBorder=function(){var t={Left:this.Left,LeftEx:this.Left+this.LeftExtendWidth,Right:this.UIElement.width-this.Right,RightEx:this.UIElement.width-this.Right-this.RightExtendWidth,Top:this.Top,TopEx:this.Top+this.TitleHeight+this.TopSpace,TopTitle:this.Top+this.TitleHeight,Bottom:this.UIElement.height-this.Bottom,BottomEx:this.UIElement.height-this.Bottom-this.BottomSpace,ChartWidth:this.UIElement.width,ChartHeight:this.UIElement.height};if(this.MultiDayMinute&&this.MultiDayMinute.Count>1&&(this.MultiDayMinute.Left>0||this.MultiDayMinute.Right>0)){for(var e=(this.UIElement.width-this.Left-this.Right)/this.MultiDayMinute.Count,a=[],i=0;i<this.MultiDayMinute.Count;++i){var r={Left:this.Left+e*i,Right:this.Left+e*(i+1)};r.LeftEx=r.Left+this.MultiDayMinute.Left,r.RightEx=r.Right-this.MultiDayMinute.Right,a.push(r)}t.DayBorder=a}return t},this.GetHScreenBorder=function(){var t={Left:this.Left,LeftEx:this.Left+this.BottomSpace,Right:this.UIElement.width-this.Right,RightEx:this.UIElement.width-this.Right-this.TitleHeight-this.TopSpace,RightTitle:this.UIElement.width-this.Right-this.TitleHeight,Top:this.Top,TopEx:this.Top+this.LeftExtendWidth,Bottom:this.UIElement.height-this.Bottom,BottomEx:this.UIElement.height-this.Bottom-this.RightExtendWidth,ChartWidth:this.UIElement.width,ChartHeight:this.UIElement.height};if(this.MultiDayMinute&&this.MultiDayMinute.Count>1&&(this.MultiDayMinute.Left>0||this.MultiDayMinute.Right>0)){for(var e=(this.UIElement.height-this.Top-this.Bottom)/this.MultiDayMinute.Count,a=[],i=0;i<this.MultiDayMinute.Count;++i){var r={Top:this.Top+e*i,Bottom:this.Top+e*(i+1)};r.TopEx=r.Top+this.MultiDayMinute.Left,r.BottomEx=r.Bottom-this.MultiDayMinute.Right,a.push(r)}t.DayBorder=a}return t},this.PtInClient=function(t,e,a,i){if(i){var r=this.GetHScreenBorder();a.rect(r.Left,r.TopEx,r.Right-r.Left,r.BottomEx-r.TopEx)}else{if((r=this.GetBorder()).DayBorder){for(var n=0;n<r.DayBorder.length;++n){var o=r.DayBorder[n];if(a.beginPath(),a.rect(o.LeftEx,r.TopEx,o.RightEx-o.LeftEx,r.BottomEx-r.TopEx),a.isPointInPath(t,e))return 1;if(a.beginPath(),a.rect(o.Left,r.TopEx,o.LeftEx-o.Left,r.BottomEx-r.TopEx),a.isPointInPath(t,e))return 200+parseInt(n);if(a.beginPath(),a.rect(o.RightEx,r.TopEx,o.Right-o.RightEx,r.BottomEx-r.TopEx),a.isPointInPath(t,e))return 300+parseInt(n)}return-1}a.rect(r.LeftEx,r.Top,r.RightEx-r.LeftEx,r.Bottom-r.Top)}return a.isPointInPath(t,e)?1:this.LeftExtendWidth>10&&(a.beginPath(),!0===i?a.rect(r.Left,r.Top,r.Right-r.Left,r.TopEx-r.Top):a.rect(r.Left,r.Top,r.LeftEx-r.Left,r.Bottom-r.Top),a.isPointInPath(t,e))?2:this.RightExtendWidth>10&&(a.beginPath(),!0===i?a.rect(r.Left,r.BottomEx,r.Right-r.Left,r.Bottom-r.BottomEx):a.rect(r.RightEx,r.Top,r.Right-r.RightEx,r.Bottom-r.Top),a.isPointInPath(t,e))?3:-1},this.GetChartWidth=function(){return this.UIElement.width},this.GetChartHeight=function(){return this.UIElement.height},this.GetLeft=function(){return this.Left+this.LeftExtendWidth},this.GetRight=function(){return this.UIElement.width-this.Right-this.RightExtendWidth},this.GetTop=function(){return this.Top},this.GetTopEx=function(){return this.Top+this.TitleHeight+this.TopSpace},this.GetTopTitle=function(){return this.Top+this.TitleHeight},this.GetBottom=function(){return this.UIElement.height-this.Bottom},this.GetBottomEx=function(){return this.UIElement.height-this.Bottom-this.BottomSpace},this.GetWidth=function(){return this.UIElement.width-this.Left-this.Right-this.LeftExtendWidth-this.RightExtendWidth},this.GetHeight=function(){return this.UIElement.height-this.Top-this.Bottom},this.GetHeightEx=function(){return this.UIElement.height-this.Top-this.Bottom-this.TitleHeight-this.TopSpace-this.BottomSpace},this.GetRightEx=function(){return this.UIElement.width-this.Right-this.TitleHeight-this.TopSpace},this.GetWidthEx=function(){return this.UIElement.width-this.Left-this.Right-this.TitleHeight-this.TopSpace-this.BottomSpace},this.GetLeftEx=function(){return this.Left+this.BottomSpace},this.GetRightTitle=function(){return this.UIElement.width-this.Right-this.TitleHeight},this.GetTitleHeight=function(){return this.TitleHeight}}Number.prototype.toFixed2=Number.prototype.toFixed,Number.prototype.toFixed=function(t){return function(t,e){var a=1;if(isNaN(t))return t;t<0&&(a=-1);var i=Math.pow(10,e),r=Math.round(Math.abs(t)*i)/i*a;if(/^(\d+(?:\.\d+)?)(e)([\-]?\d+)$/.test(r))var n=r.toFixed2(e);else n=r.toString();var o=n.indexOf(".");for(o<0&&e>0&&(o=n.length,n+=".");n.length<=o+e;)n+="0";return n}(this,t)};var W=new function(){this.DataMap=new C.default([["KLineFrame",{Create:function(t){return new $}}],["KLineHScreenFrame",{Create:function(t){return new et}}]]),this.Create=function(t,e){return this.DataMap.has(t)?this.DataMap.get(t).Create(e):(D.Warn("[ChartFrameFactory::Create] can't find class="+t+"."),null)},this.Add=function(t,e){var a=null;return this.DataMap.has(t)&&(a=this.DataMap.get(t)),this.DataMap.set(t,{Create:e.Create}),a}};function U(){this.HorizontalInfo=new Array,this.VerticalInfo=new Array,this.ClassName="IChartFramePainting",this.Canvas,this.Identify,this.ChartBorder,this.PenBorder=ia.FrameBorderPen,this.TitleBGColor=ia.FrameTitleBGColor,this.IsShow=!0,this.SizeChange=!0,this.XYSplit=!0,this.HorizontalMax,this.HorizontalMin,this.XPointCount=10,this.YSplitOperator,this.XSplitOperator,this.Data,this.IsLocked=!1,this.LockPaint=null,this.YSpecificMaxMin=null,this.IsShowBorder=!0,this.IsShowTitleArraw=!0,this.IsShowIndexName=!0,this.IsShowOverlayIndexName=!0,this.OverlayIndexType={Position:1,LineSpace:3},this.IndexParamSpace=2,this.IndexTitleSpace=0,this.IsShowIndexTitle=!0,this.IsDrawTitleBottomLine=!1,this.BorderLine=null,this.Buttons=[],this.LeftButtonWidth=0,this.IsMinSize=!1,this.LogoTextColor=ia.FrameLogo.TextColor,this.LogoTextFont=ia.FrameLogo.Font,this.GlobalOption,this.PtInButtons=function(t,e){for(var a=0;a<this.Buttons.length;++a){var i=this.Buttons[a];if(i.Rect){var r=i.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.Left,r.Top,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return{ID:i.ID,Rect:r}}}return null},this.GetBorder=function(){return this.IsHScreen?this.ChartBorder.GetHScreenBorder():this.ChartBorder.GetBorder()},this.Draw=function(){this.Buttons=[],this.DrawFrame(),this.DrawBorder(),this.SizeChange=!1,this.XYSplit=!1},this.DrawFrame=function(){},this.ClearCoordinateText=function(t){if(Te.IsNonEmptyArray(this.HorizontalInfo))for(var e=0;e<this.HorizontalInfo.length;++e){(a=this.HorizontalInfo[e])&&a.Message&&Array.isArray(a.Message)&&(a.Message[0]=a.Message[1]=null)}if(Te.IsNonEmptyArray(this.VerticalInfo))for(e=0;e<this.VerticalInfo.length;++e){var a;(a=this.VerticalInfo[e])&&a.Message&&Array.isArray(a.Message)&&(a.Message[0]=a.Message[1]=null)}},this.DrawBorder=function(){if(this.IsShowBorder&&!this.IsMinSize){var t=1==this.IsHScreen?this.ChartBorder.GetHScreenBorder():this.ChartBorder.GetBorder(),e=_(t.Left),a=_(t.Top),i=_(t.Right),r=_(t.Bottom),n=i-e,o=r-a;null==this.BorderLine?(this.Canvas.strokeStyle=this.PenBorder,this.Canvas.strokeRect(e,a,n,o)):Te.IsPlusNumber(this.BorderLine)&&(this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(e,a),this.Canvas.lineTo(i,a)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(e,r),this.Canvas.lineTo(i,r)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(e,a),this.Canvas.lineTo(e,r)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(i,a),this.Canvas.lineTo(i,r)),this.Canvas.stroke())}},this.DrawTitleBG=function(){if(!(this.ChartBorder.TitleHeight<=0)){var t=this.GetBorder(),e=_(t.Left),a=_(t.Top),i=_(t.Right),r=i-e,n=_(this.ChartBorder.GetTopTitle())-a;this.Canvas.fillStyle=this.TitleBGColor,this.Canvas.fillRect(e,a,r,n),this.IsDrawTitleBottomLine&&(this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(e,_(t.TopTitle)),this.Canvas.lineTo(i,_(t.TopTitle)),this.Canvas.stroke())}},this.DrawLock=function(){this.IsLocked&&(null==this.LockPaint&&(this.LockPaint=new ue),this.LockPaint.Canvas=this.Canvas,this.LockPaint.ChartBorder=this.ChartBorder,this.LockPaint.ChartFrame=this,this.LockPaint.Draw(!0))},this.DrawLogo=function(){var t=this.GetBorder(),e=ia.FrameLogo.Text;if(Te.IsString(e))if(this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.IsHScreen){var a=t.Left+5,i=t.Top+5;this.Canvas.save(),this.Canvas.translate(a,i),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(e,0,0),this.Canvas.restore()}else{a=t.Left+5,i=t.Bottom-5;this.Canvas.fillText(e,a,i)}},this.CalculateLock=function(){this.IsLocked&&(null==this.LockPaint&&(this.LockPaint=new ue),this.LockPaint.Canvas=this.Canvas,this.LockPaint.ChartBorder=this.ChartBorder,this.LockPaint.ChartFrame=this,this.LockPaint.Draw(!1))},this.SetLock=function(t){t?(this.IsLocked=!0,this.LockPaint||(this.LockPaint=new ue),t.Callback&&(this.LockPaint.Callback=t.Callback),t.IndexName&&(this.LockPaint.IndexName=t.IndexName),t.ID&&(this.LockPaint.LockID=t.ID),t.BG&&(this.LockPaint.BGColor=t.BG),t.Text&&(this.LockPaint.Title=t.Text),t.TextColor&&(this.LockPaint.TextColor=t.TextColor),t.Font&&(this.LockPaint.Font=t.Font),t.Count&&(this.LockPaint.LockCount=t.Count),t.MinWidth>0&&(this.LockPaint.MinWidth=t.MinWidth)):this.IsLocked=!1},this.GetLockRect=function(){return this.IsLocked&&this.LockPaint?this.LockPaint.LockRect:null},this.ReloadResource=function(t){for(var e in t||(this.PenBorder=ia.FrameBorderPen,this.TitleBGColor=ia.FrameTitleBGColor),this.HorizontalInfo){(a=this.HorizontalInfo[e]).Font&&(a.Font=ia.FrameSplitTextFont),a.TextColor&&(a.TextColor=ia.FrameSplitTextColor),a.LineColor&&(a.LineColor=ia.FrameSplitPen)}for(var e in this.VerticalInfo){var a;(a=this.VerticalInfo[e]).Font&&(a.Font=ia.FrameSplitTextFont),a.TextColor&&(a.TextColor=ia.FrameSplitTextColor),a.LineColor&&(a.LineColor=ia.FrameSplitPen)}},this.GetFontHeight=function(t){return O(this.Canvas,t,"擎")},this.GetScaleTextWidth=function(){}}function K(){this.newMethod=U,this.newMethod(),delete this.newMethod,this.ClassName="NoneFrame",this.Snapshot=function(){},this.SetSizeChage=function(t){this.SizeChange=t,this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight}}}function z(){this.newMethod=U,this.newMethod(),delete this.newMethod,this.ClassName="AverageWidthFrame",this.DataWidth=50*A(),this.DistanceWidth=10*A(),this.MinXDistance=30*A(),this.MinYDistance=12*A(),this.CoordinateType=0,this.IsShowYText=[!0,!0],this.XBottomOffset=ia.Frame.XBottomOffset,this.YTextTopOffset=ia.Frame.YTopOffset,this.YTextPosition=[0,0],this.YTextPadding=[ia.Frame.YTextPadding[0],ia.Frame.YTextPadding[1]],this.IsShowXLine=!0,this.IsShowYLine=!0,this.YInsideOffset=0,this.YTextBaseline=0,this.MultiTextFormat=0,this.RightTextMaxWidth=0,this.ShortYLineLength=5,this.ShortXLineLength=5,this.BeforeDrawXYCallback,this.GetEventCallback,this.ToolbarButtonStyle=ia.ToolbarButtonStyle,this.CloseWindowButton=G(ia.Buttons.CloseWindow),this.OverlayIndexButton=G(ia.Buttons.OverlayIndex),this.ChangeIndexButton=G(ia.Buttons.ChangeIndex),this.ModifyIndexParamButton=G(ia.Buttons.ModifyIndexParam),this.MaxMinWindowButton=G(ia.Buttons.MaxMinWindow),this.TitleWindowButton=G(ia.Buttons.TitleWindow),this.ExportDataButton=G(ia.Buttons.ExportData),this.ButtonTooltip=G(ia.Buttons.Tooltip),this.DrawPicture={BGColor:ia.DrawPicture.XYCoordinate.BGColor,TextBGColor:ia.DrawPicture.XYCoordinate.TextBGColor,TextColor:ia.DrawPicture.XYCoordinate.TextColor,Font:ia.DrawPicture.XYCoordinate.Font},this.IChartFramePainting_ReloadResource=this.ReloadResource,this.ReloadResource=function(t){this.IChartFramePainting_ReloadResource(t),t||(this.ToolbarButtonStyle=ia.ToolbarButtonStyle,this.CloseWindowButton=G(ia.Buttons.CloseWindow),this.OverlayIndexButton=G(ia.Buttons.OverlayIndex),this.ChangeIndexButton=G(ia.Buttons.ChangeIndex),this.ModifyIndexParamButton=G(ia.Buttons.ModifyIndexParam),this.MaxMinWindowButton=G(ia.Buttons.MaxMinWindow),this.TitleWindowButton=G(ia.Buttons.TitleWindow),this.ButtonTooltip=G(ia.Buttons.Tooltip))},this.DrawFrame=function(){if(this.XPointCount>0){var t=this.ChartBorder.GetWidth()/(6*this.XPointCount);this.DistanceWidth=2*t,this.DataWidth=4*t}this.DrawHorizontal(),this.DrawVertical()},this.DrawTitleButton=function(t,e,a){var i=this.GetBorder();if(this.IsHScreen){var r=i.Bottom-3,n=i.RightTitle+this.ChartBorder.TitleHeight/2;this.Canvas.save(),this.Canvas.translate(n,r),this.Canvas.rotate(90*Math.PI/180);for(var o=0,s=0,h=0,l=0;l<t.length;++l){s=h-(C=(d=t[l]).Style.Size)-d.Style.MerginLeft;var u=C+"px "+d.Style.Family,c=d.Style.Color;this.Canvas.fillStyle=c,this.Canvas.font=u,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(d.Style.Text,s,0),(m={Left:n-C/2,Right:n+C/2,Bottom:r,Width:C,Height:C+d.Style.MerginLeft}).Top=m.Bottom-C-d.Style.MerginLeft,this.Buttons.push({ID:d.ID,Rect:m}),h=s,r=m.Top}this.Canvas.restore()}else{var f=i.Right-3;for(i.Left,o=i.Top+this.ChartBorder.TitleHeight/2,l=0;l<t.length;++l){var d,C,p=f-(C=(d=t[l]).Style.Size)-d.Style.MerginLeft,m=(u=C+"px "+d.Style.Family,{Left:p,Top:o-C/2,Right:p+C+d.Style.MerginLeft,Bottom:o+C/2,Width:C+d.Style.MerginLeft,Height:C});c=d.Style.Color;e&&e.X>=m.Left&&e.X<m.Right&&e.Y>=m.Top&&e.Y<=m.Bottom&&(c=d.Style.MoveOnColor,a&&(a.MouseOnToolbar={Rect:m,Item:d,Frame:this,Point:{X:e.X,Y:e.Y}})),this.Canvas.fillStyle=c,this.Canvas.font=u,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(d.Style.Text,p,o),this.Buttons.push({ID:d.ID,Rect:m}),f=p}}},this.DrawToolbarTooltip=function(t){if(t){var e=this.GetBorder(),a=null;if(t.Item.TooltipText)a=t.Item.TooltipText;else{var i="Toolbar-"+t.Item.ID;a=na.GetText(i,0)}if(a){A();var r=t.Rect.Left+t.Rect.Width/2;this.Canvas.font=this.ButtonTooltip.Font,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var n=this.Canvas.measureText(a).width+8,o=this.GetFontHeight()+10;if("TitleButton"==t.ID)var s=t.Point.X,h=t.Point.Y+20;else if(b.CLOSE_BEFOREOPEN_ID==t.Item.ID)s=t.Rect.Right+5,h=t.Rect.Top;else if(b.DRAW_PICTURE_DELETE==t.Item.ID||b.DRAW_PICTURE_SETTING==t.Item.ID||t.Item.ID>=b.DRAW_PICTURE_BUTTON_1&&t.Item.ID<=b.DRAW_PICTURE_BUTTON_18){s=t.Point.X,h=t.Point.Y+20;s+n>=e.ChartWidth&&(s=e.ChartWidth-n-2)}else{s=r-n/2;(h=e.Top-o)<0&&(h=e.TopEx+1),s+n>e.ChartWidth&&(s=e.ChartWidth-n-2)}this.Canvas.fillStyle=this.ButtonTooltip.ColorBG,this.Canvas.fillRect(s,h,n,o),this.Canvas.fillStyle=this.ButtonTooltip.Color,this.Canvas.fillText(a,s+4,h+o/2)}}},this.GetYFromData=function(t,e){if(this.Logarithmic&&this.GetYLogarithmicFromData)return this.GetYLogarithmicFromData(t,e);if(!1===e){if(1==this.CoordinateType){var a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetTopEx()+a}a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetBottomEx()-a}if(1==this.CoordinateType){if(t<=this.HorizontalMin)return this.ChartBorder.GetTopEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetBottomEx();a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetTopEx()+a}if(t<=this.HorizontalMin)return this.ChartBorder.GetBottomEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetTopEx();a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetBottomEx()-a},this.DrawHorizontal=function(){if(this.RightTextMaxWidth=0,Te.IsNonEmptyArray(this.HorizontalInfo)&&!this.ChartBorder.IsShowTitleOnly){for(var t,e,a,i,r=this.ChartBorder.GetBorder(),n=r.Left,o=r.Right,s=r.Bottom,h=this.ChartBorder.GetTop(),l=this.ChartBorder.Right,u=this.ChartBorder.Left>10&&!0===this.IsShowYText[0]&&2!=this.YTextPosition[0],c=l>10&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1],f=null,d=A(),C=(r.BottomEx-r.TopEx)/this.HorizontalInfo.length,p=[],m=0,D=this.HorizontalInfo.length-1;D>=0;--D){var v=this.HorizontalInfo[D],g=this.GetYFromData(v.Value);if(!(null!=g&&null!=f&&Math.abs(g-f)<this.MinYDistance)){var S=_(g);if(g!=s&&this.IsShowYLine){var T=!1;Te.IsPlusNumber(v.LineWidth)&&(this.Canvas.lineWidth=v.LineWidth*d,T=!0),this.Canvas.strokeStyle=v.LineColor,2==v.LineType?(this.Canvas.save(),v.LineDash?this.Canvas.setLineDash(v.LineDash):this.Canvas.setLineDash([5*d,5*d]),this.Canvas.beginPath(),this.Canvas.moveTo(n,S),this.Canvas.lineTo(o,S),this.Canvas.stroke(),this.Canvas.setLineDash([]),this.Canvas.restore()):3==v.LineType||8==v.LineType||9==v.LineType||v.LineType>0&&(ia.FrameYLineDash?(this.Canvas.save(),this.Canvas.setLineDash(ia.FrameYLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(n,S),this.Canvas.lineTo(o,S),this.Canvas.stroke(),this.Canvas.setLineDash([]),this.Canvas.restore()):(this.Canvas.beginPath(),this.Canvas.moveTo(n,S),this.Canvas.lineTo(o,S),this.Canvas.stroke())),T&&(this.Canvas.lineWidth=d)}var I=g;if(g>=s-2?(this.Canvas.textBaseline="bottom",m=2):g<=h+2?(this.Canvas.textBaseline="top",I+=this.YTextTopOffset,m=0):(this.Canvas.textBaseline="middle",m=1),this.Canvas.strokeStyle=v.TextColor,this.Canvas.fillStyle=v.TextColor,null!=v.Message[0]&&u&&(null!=v.Font&&(this.Canvas.font=v.Font),a=this.GetTextTopBottom(m,I),(!i||a&&!this.IsTextTopBottomOverlap(a,i))&&(this.Canvas.textAlign="right",this.Canvas.fillText(v.Message[0],n-this.YTextPadding[0],I),i=a)),null!=v.Message[1]&&c){null!=v.Font&&(this.Canvas.font=v.Font);var y=o;if(3==v.LineType){var x=this.ShortYLineLength*A();this.Canvas.beginPath(),this.Canvas.moveTo(y,S),this.Canvas.lineTo(y+x,S),this.Canvas.stroke(),y+=x}if(this.Canvas.textAlign="left",Array.isArray(v.Message[1]))if(1==this.MultiTextFormat){v.ExtendData&&v.ExtendData.Font&&(this.Canvas.font=v.ExtendData.Font);var w={Text:[{Text:v.Message[1][0],Width:this.Canvas.measureText(v.Message[1][0]).width},{Text:v.Message[1][1],Width:this.Canvas.measureText(v.Message[1][1]).width}],X:y+2,Y:I,TextBaseline:this.Canvas.textBaseline,Item:v};p.push(w)}else if(2==this.MultiTextFormat){this.Canvas.fillText(v.Message[1][0],y+this.YTextPadding[1],I);var F=this.Canvas.measureText("M").width;C>2*F&&this.Canvas.fillText(v.Message[1][1],y+this.YTextPadding[1],I+F)}else this.Canvas.fillText(v.Message[1][0],y+this.YTextPadding[1],I);else e=this.GetTextTopBottom(m,I),(!t||e&&!this.IsTextTopBottomOverlap(e,t))&&(v.TextColor2&&(this.Canvas.fillStyle=v.TextColor2),this.Canvas.fillText(v.Message[1],y+this.YTextPadding[1],I),t=e)}f=g}}Te.IsNonEmptyArray(p)&&1==this.MultiTextFormat&&this.DrawHorizontalMuText(p)}},this.IsTextTopBottomOverlap=function(t,e){return e.Top>=t.Top&&e.Top<=t.Bottom||e.Bottom>=t.Top&&e.Bottom<=t.Bottom},this.GetTextTopBottom=function(t,e){var a=null,i=this.Canvas.measureText("擎").width;return 0==t?a={Top:e,Bottom:e+i}:1==t?(a={Top:e-i/2}).Bottom=a.Top+i:2==t&&((a={Bottom:e}).Top=a.Bottom-i),a},this.DrawHorizontalMuText=function(t){for(var e=[null,null],a=0;a<t.length;++a){var i=(r=t[a]).Text[0].Width;Te.IsNumber(e[0])?e[0]<i&&(e[0]=i):e[0]=i,i=r.Text[1].Width,Te.IsNumber(e[1])?e[1]<i&&(e[1]=i):e[1]=i}for(a=0;a<t.length;++a){var r,n=(r=t[a]).Item;this.Canvas.textBaseline=n.TextBaseline,n.ExtendData&&n.ExtendData.Font?this.Canvas.font=n.ExtendData.Font:n.Font&&(this.Canvas.font=n.Font),n.ExtendData&&n.ExtendData.PriceColor?this.Canvas.fillStyle=n.ExtendData.PriceColor:this.Canvas.fillStyle=n.TextColor,this.Canvas.textAlign="right";var o=r.X+e[1];this.Canvas.fillText(r.Text[1].Text,o,r.Y),n.ExtendData&&n.ExtendData.SplitColor?this.Canvas.fillStyle=n.ExtendData.SplitColor:this.Canvas.fillStyle=n.TextColor,this.Canvas.textAlign="left";var s=this.Canvas.measureText("/").width;this.Canvas.fillText("/",o,r.Y),n.ExtendData&&n.ExtendData.PercentageColor?this.Canvas.fillStyle=n.ExtendData.PercentageColor:this.Canvas.fillStyle=n.TextColor,this.Canvas.textAlign="right";o=r.X+e[1]+e[0]+s;this.Canvas.fillText(r.Text[0].Text,o,r.Y);var h=e[1]+e[0]+4*s;this.RightTextMaxWidth<h&&(this.RightTextMaxWidth=h)}},this.DrawInsideClientHorizontal=function(){var t=this.GetBorder();if(t.DayBorder&&Te.IsNonEmptyArray(t.DayBorder))var e=(l=t.DayBorder[0]).LeftEx,a=(l=t.DayBorder[t.DayBorder.length-1]).RightEx,i=t.Bottom,r=t.TopTitle;else e=t.LeftEx,a=t.RightEx,i=t.Bottom,r=t.TopTitle;for(var n=A(),o=null,s=null,h=this.HorizontalInfo.length-1;h>=0;--h){var l=this.HorizontalInfo[h],u=this.GetYFromData(l.Value);if(!(null!=u&&null!=o&&Math.abs(u-o)<this.MinYDistance)){if(l.Message[2]){null!=l.Font&&(this.Canvas.font=l.Font),this.Canvas.fillStyle=l.TextColor,this.Canvas.textAlign="left";var c=u;u>=i-2?this.Canvas.textBaseline="bottom":u<=r+2?(this.Canvas.textBaseline="top",c+=this.YTextTopOffset):this.Canvas.textBaseline="middle";var f={X:e,Y:c,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:l.Message[0]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(f)||(this.Canvas.fillText(l.Message[2],e+1*n,c),(null==s||s>c)&&(this.YInsideOffset=this.Canvas.measureText(l.Message[2]).width+4*A(),s=c))}if(l.Message[3]){null!=l.Font&&(this.Canvas.font=l.Font),this.Canvas.fillStyle=l.TextColor,this.Canvas.textAlign="right";c=u;u>=i-2?this.Canvas.textBaseline="bottom":u<=r+2?(this.Canvas.textBaseline="top",c+=this.YTextTopOffset):this.Canvas.textBaseline="middle";f={X:a-this.Canvas.measureText(l.Message[3]).width,Y:c,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:l.Message[1]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(f)||this.Canvas.fillText(l.Message[3],a-1*n,c)}o=u}}},this.DrawInsideHorizontal=function(){if(!0!==this.IsHScreen&&!(this.IsMinSize||this.ChartBorder.IsShowTitleOnly||!1===this.IsShowYText[0]&&!1===this.IsShowYText[1])){this.DrawInsideClientHorizontal();var t=this.ChartBorder.GetBorder(),e=t.Left,a=t.Right,i=t.Bottom,r=t.TopTitle,n=this.ChartBorder.Right,o=this.ChartBorder.Left,s=(this.ChartBorder.TitleHeight,(o<10||2==this.YTextPosition[0])&&!0===this.IsShowYText[0]),h=(n<10||2==this.YTextPosition[1])&&!0===this.IsShowYText[1];if(s||h)for(var l=A(),u=null,c=null,f=this.HorizontalInfo.length-1;f>=0;--f){var d=this.HorizontalInfo[f],C=this.GetYFromData(d.Value);if(!(null!=C&&null!=u&&Math.abs(C-u)<this.MinYDistance)){if(null!=d.Message[0]&&s){null!=d.Font&&(this.Canvas.font=d.Font),this.Canvas.fillStyle=d.TextColor,this.Canvas.textAlign="left";var p=C;C>=i-2?this.Canvas.textBaseline="bottom":C<=r+2?(this.Canvas.textBaseline="top",p+=this.YTextTopOffset):1==this.YTextBaseline?this.Canvas.textBaseline="bottom":this.Canvas.textBaseline="middle";var m={X:e,Y:p,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:d.Message[0]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(m)||(this.Canvas.fillText(d.Message[0],e+1*l,p),(null==c||c>p)&&(this.YInsideOffset=this.Canvas.measureText(d.Message[0]).width+4*A(),c=p))}if(null!=d.Message[1]&&h){null!=d.Font&&(this.Canvas.font=d.Font),this.Canvas.fillStyle=d.TextColor,this.Canvas.textAlign="right";p=C;if(C>=i-2?this.Canvas.textBaseline="bottom":C<=r+2?(this.Canvas.textBaseline="top",p+=this.YTextTopOffset):1==this.YTextBaseline?this.Canvas.textBaseline="bottom":this.Canvas.textBaseline="middle",Array.isArray(d.Message[1]))var D=d.Message[1][0];else D=d.Message[1];m={X:a-this.Canvas.measureText(D).width,Y:p,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:d.Message[1]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(m)||this.Canvas.fillText(D,a-1*l,p)}u=C}}}},this.GetXFromIndex=function(t){var e=this.XPointCount;return 1==e?0==t?this.ChartBorder.GetLeft():this.ChartBorder.GetRight():e<=0?this.ChartBorder.GetLeft():t>=e?this.ChartBorder.GetRight():this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()*t/e},this.DrawVertical=function(){var t=this.GetBorder(),e=t.TopTitle,a=t.Bottom,i=t.RightEx,r=A();if(!(this.ChartBorder.Bottom<=5*A()))for(var n=null,o=null,s=0;s<this.VerticalInfo.length;++s){var h=this.GetXFromIndex(this.VerticalInfo[s].Value);if(h>i)break;if(!(null!=n&&Math.abs(h-n)<this.MinXDistance)){var l=this.VerticalInfo[s],u=_(h);if(this.IsShowXLine&&(2==l.LineType?(this.Canvas.strokeStyle=this.VerticalInfo[s].LineColor,l.LineDash?this.Canvas.setLineDash(l.LineDash):this.Canvas.setLineDash([5*r,5*r]),this.Canvas.beginPath(),this.Canvas.moveTo(u,e),this.Canvas.lineTo(u,a),this.Canvas.stroke(),this.Canvas.setLineDash([])):3==l.LineType||l.LineType>0&&(ia.FrameXLineDash?(this.Canvas.strokeStyle=this.VerticalInfo[s].LineColor,this.Canvas.setLineDash(ia.FrameXLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(u,e),this.Canvas.lineTo(u,a),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.strokeStyle=this.VerticalInfo[s].LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(u,e),this.Canvas.lineTo(u,a),this.Canvas.stroke()))),l.BG&&l.BG.Color){var c=l.BG;this.Canvas.fillStyle=c.Color;var f=this.GetXFromIndex(c.Index.Start),d=this.GetXFromIndex(c.Index.End),C=this.ChartBorder.Bottom;Te.IsNumber(c.Height)&&(C=c.Height);var p={Left:f,Width:d-f,Top:t.Bottom,Height:C};this.Canvas.fillRect(p.Left,p.Top,p.Width,p.Height)}if(null!=this.VerticalInfo[s].Message[0]){null!=this.VerticalInfo[s].Font&&(this.Canvas.font=this.VerticalInfo[s].Font);var m=0;this.Canvas.fillStyle=l.TextColor,this.Canvas.strokeStyle=l.TextColor;var D=this.Canvas.measureText(this.VerticalInfo[s].Message[0]).width;if(h<D/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",m=h):h+D/2>=this.ChartBorder.GetChartWidth()?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top",m=h-D):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top",m=h-D/2),null==o||m>o){var v=a;if(3==l.LineType){var g=this.ShortXLineLength*r;this.Canvas.beginPath(),this.Canvas.moveTo(u,v),this.Canvas.lineTo(u,v+g),this.Canvas.stroke(),v+=g+2*r}this.Canvas.fillText(this.VerticalInfo[s].Message[0],h,v+this.XBottomOffset),o=m+D}}n=h}}},this.GetYData=function(t,e){return this.Logarithmic&&this.GetYLogarithmicFromData?this.GetYLogarithmicData(t):1==this.CoordinateType?0==e?(t-this.ChartBorder.GetTopEx())/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin:t<this.ChartBorder.GetTopEx()?this.HorizontalMin:t>this.ChartBorder.GetBottomEx()?this.HorizontalMax:(t-this.ChartBorder.GetTopEx())/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin:0==e?(this.ChartBorder.GetBottomEx()-t)/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin:t<this.ChartBorder.GetTopEx()?this.HorizontalMax:t>this.ChartBorder.GetBottomEx()?this.HorizontalMin:(this.ChartBorder.GetBottomEx()-t)/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin},this.GetXData=function(t){return t<=this.ChartBorder.GetLeft()?0:t>=this.ChartBorder.GetRight()?this.XPointCount:(t-this.ChartBorder.GetLeft())*(1*this.XPointCount/this.ChartBorder.GetWidth())},this.DrawPictureXCoordinate=function(t,e,a){if(!this.IsHScreen&&e&&Te.IsNonEmptyArray(e.Points)){var i=this.GetBorder(),r=i.Left,n=i.Right;this.Canvas.font=this.DrawPicture.Font;var o=this.GetFontHeight();if(e.X){var s=e.X,h=s.Min.X,l=s.Max.X;h<r&&(h=r),l>n&&(l=n),this.Canvas.fillStyle=this.DrawPicture.BGColor,this.Canvas.fillRect(h,i.Bottom,l-h,o)}for(var u=0;u<e.Points.length;++u){var c=e.Points[u];if(!(c.X<r||c.X>n)){var f=this.GetXData(c.X,!1),d=(f=Math.round(f),this.GetKItem(f));if(d){var C=Te.FormatDateString(d.Date,null);pt.IsMinutePeriod(a.Period)&&(C+=" "+Te.FormatTimeString(d.Time,"HH:MM"));var p=this.Canvas.measureText(C).width+2,m=c.X-p/2;m<r&&(m=r),this.Canvas.fillStyle=this.DrawPicture.TextBGColor,this.Canvas.fillRect(m,i.Bottom,p,o),this.Canvas.fillStyle=this.DrawPicture.TextColor;var D=i.Bottom+o;this.Canvas.fillText(C,m+1,D)}}}}},this.GetKItem=function(t){if(!this.Data)return null;if(!Te.IsNonEmptyArray(this.Data.Data))return null;var e=this.Data.DataOffset+t;return this.Data.Data[e]},this.DrawPictureYCoordinate=function(t,e,a){if(!this.IsHScreen&&e&&Te.IsNonEmptyArray(e.Points)){var i=this.GetBorder(),r=i.TopEx,n=i.BottomEx,o=i.Right;this.Canvas.font=this.DrawPicture.Font;var s=this.GetFontHeight();this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var h=2;a&&a.Symbol&&(h=Ga(a.Symbol));for(var l=0,u=0;u<e.Points.length;++u){var c=e.Points[u],f=this.GetYData(c.Y).toFixed(h),d=this.Canvas.measureText(f).width;l<d&&(l=d),e.Points[u].Text=f}if(l+=this.YTextPadding[1]+2,e.Y){var C=e.Y,p=C.Min.Y,m=C.Max.Y;C.Min.Y<r&&(p=r),C.Max.Y>n&&(m=n),this.Canvas.fillStyle=this.DrawPicture.BGColor,this.Canvas.fillRect(o,p,l+5,m-p)}for(u=0;u<e.Points.length;++u){if(!((c=e.Points[u]).Y<r||c.Y>n)){this.Canvas.fillStyle=this.DrawPicture.TextBGColor,this.Canvas.fillRect(o,c.Y-s/2,l,s),this.Canvas.fillStyle=this.DrawPicture.TextColor;var D=c.Y+s/2;this.Canvas.fillText(c.Text,o+this.YTextPadding[1],D)}}}},this.DrawPicturePointYCoordinate=function(t,e){if(!this.IsHScreen&&t.GetYCoordinatePoint){var a=t.GetYCoordinatePoint();if(Te.IsNonEmptyArray(a)){var i=this.GetBorder(),r=i.TopEx,n=i.BottomEx,o=i.Right;this.Canvas.font=this.DrawPicture.Font;var s=this.GetFontHeight();this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var h=2;e&&e.Symbol&&(h=Ga(e.Symbol));for(var l=0;l<a.length;++l){var u=a[l];if(u&&!(u.Y<r||u.Y>n)){var c=u.YValue.toFixed(h),f=this.Canvas.measureText(c).width+2;f+=this.YTextPadding[1],this.Canvas.fillStyle=this.DrawPicture.TextBGColor,this.Canvas.fillRect(o,u.Y-s/2,f,s),this.Canvas.fillStyle=this.DrawPicture.TextColor;var d=u.Y+s/2;this.Canvas.fillText(c,o+this.YTextPadding[1],d)}}}}},this.GetCustomItemTextInfo=function(t,e,a){var i=e?t.Message[0]:t.Message[1],r=[],n=0;if(Array.isArray(i)){for(var o=0;o<i.length;++o){if(1===(t=i[o]).Type)r.push({Type:t.Type});else{var s=this.Canvas.measureText(i[o].Text).width;s>n&&(n=s),r.push({Text:i[o].Text,Width:s+2*a})}}n>0&&(n+=2*a)}else n=this.Canvas.measureText(i).width+2*a,r.push({Text:i,Width:n});return{MaxWidth:n,Text:r}},this.DrawCustomItem=function(t,e){if(t.Message[1]||t.Message[0])if(t.Value>this.HorizontalMax||t.Value<this.HorizontalMin)this.SendDrawCountDownEvent({IsShow:!1});else{var a=this.GetBorder(),i=a.Left,r=a.Right,n=a.Bottom,o=a.Top,s=this.ChartBorder.Right,h=this.ChartBorder.Left;this.ChartBorder.TitleHeight;this.IsHScreen&&(h=this.ChartBorder.Top,s=this.ChartBorder.Bottom,o=a.Top,n=a.Bottom);var l,u=A(),c=18*u,f=c,d=this.GetYFromData(t.Value),C=0;if(t.ExtendData&&t.ExtendData.Custom){var p=t.ExtendData.Custom;Te.IsNumber(p.Position)&&(C=p.Position),p.EmptyBGColor&&(l=p.EmptyBGColor)}if(t.Message[0])if(h<10||1==C){null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var m=(F=this.GetCustomItemTextInfo(t,!0,u)).MaxWidth;f=(E=this.GetFontHeight())>c?E:c;var D=t.LineColor;(M=this.RGBToStruct(t.LineColor))&&(D="rgba("+M.R+", "+M.G+", "+M.B+", "+ia.FrameLatestPrice.BGAlpha+")");for(var v=d,g=0;g<F.Text.length;++g){var S=F.Text[g];if(this.IsHScreen){var T=o,I=v-f/2-1*u;this.Canvas.fillStyle=D,this.Canvas.fillRect(I,T,f,S.Width),this.DrawHScreenText({X:v,Y:T},{Text:S.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==g&&this.DrawLine(T+S.Width,n,v,t.LineColor,t.LineType,t),v-=f+1*u}else if(1===S.Type);else{T=v-f/2-1*u,I=i+1*u;this.Canvas.fillStyle=D,this.Canvas.fillRect(I,T,S.Width,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(S.Text,I+1*u,v),0==g&&this.DrawLine(I+S.Width,r,v,t.LineColor,t.LineType,t),v+=f+1*u}}}else{null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle";m=(F=this.GetCustomItemTextInfo(t,!0,u)).MaxWidth;f=(E=this.GetFontHeight())>c?E:c;for(v=d,g=0;g<F.Text.length;++g){S=F.Text[g];if(this.IsHScreen){if(0==g)T=o-S.Width;else T=o-m;I=v-f/2-1*u;this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(I,T,f,S.Width),this.DrawHScreenText({X:v,Y:T},{Text:S.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==g&&this.DrawLine(T+S.Width,n,v,t.LineColor,t.LineType,t),v-=f+1*u}else{T=v-f/2-1*u;if(0==g){var y=i-S.Width;I=i}else y=i-m,I=i-(m-S.Width);l?(this.Canvas.fillStyle=l,this.Canvas.fillRect(y-1,T,S.Width+1,f),this.Canvas.strokeStyle=t.LineColor,this.Canvas.strokeRect(_(y-1),_(T),_(S.Width+1),_(f)),this.Canvas.fillStyle=t.LineColor,this.Canvas.fillText(S.Text,I-1*u,v)):(this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(y,T,S.Width,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(S.Text,I-1*u,v)),0==g&&this.DrawLine(i,r,v,t.LineColor,t.LineType,t),v+=f+1*u}}}else if(t.Message[1])if(s<10||1==C){null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";m=(F=this.GetCustomItemTextInfo(t,!1,u)).MaxWidth;f=(E=this.GetFontHeight())>c?E:c;D=t.LineColor;(M=this.RGBToStruct(t.LineColor))&&(D="rgba("+M.R+", "+M.G+", "+M.B+", "+ia.FrameLatestPrice.BGAlpha+")");for(v=d,g=0;g<F.Text.length;++g){S=F.Text[g];if(this.IsHScreen){T=n-S.Width,I=v-f/2-1*u;this.Canvas.fillStyle=D,this.Canvas.fillRect(I,T,f,S.Width),this.DrawHScreenText({X:v,Y:T},{Text:S.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==g&&this.DrawLine(o,T,v,t.LineColor,t.LineType,t),v-=f+1*u}else if(1===S.Type){if(this.GetEventCallback){var x={Top:T=v-f/2-1*u,Right:r,Height:null,IsShow:!0,BGColor:t.LineColor,TextColor:t.TextColor,PixelTatio:u,Position:"Right",IsInside:!0};this.SendDrawCountDownEvent(x)&&Te.IsPlusNumber(x.Height)&&(v+=f+1*u)}}else{T=v-f/2-1*u,I=r-S.Width;this.Canvas.fillStyle=D,this.Canvas.fillRect(I,T,S.Width,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(S.Text,I+1*u,v),0==g&&this.DrawLine(i,I,v,t.LineColor,t.LineType,t),v+=f+1*u}}if((3==t.Type||4==t.Type)&&t.Title){var w=this.Canvas.measureText(t.Title).width+2*u;if(this.IsHScreen){T=n-S.Width-w,I=d-f/2-1*u;this.Canvas.fillStyle=D,this.Canvas.fillRect(I,T,f,w),this.DrawHScreenText({X:d,Y:T},{Text:t.Title,Color:t.TextColor,XOffset:1*u,YOffset:2*u})}else{T=d-f/2-1*u,I=r-m-w-1*u;this.Canvas.fillStyle=D,this.Canvas.fillRect(I,T,w,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Title,I+1*u,d)}}}else{null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var F,E;m=(F=this.GetCustomItemTextInfo(t,!1,u)).MaxWidth;f=(E=this.GetFontHeight())>c?E:c;var b=null;e&&e.has(3)&&(b=e.get(3));v=d;var L={};for(g=0;g<F.Text.length;++g){S=F.Text[g];if(this.IsHScreen){T=n,I=v-f/2-1*u;this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(I,T,f,S.Width),this.DrawHScreenText({X:v,Y:T},{Text:S.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==g&&this.DrawLine(o,T,v,t.LineColor,t.LineType,t),v-=f+1*u}else if(1===S.Type){if(this.GetEventCallback){x={Top:T=v-f/2-1*u,Left:r,Right:this.ChartBorder.GetChartWidth(),Height:null,IsShow:!0,BGColor:t.LineColor,TextColor:t.TextColor,PixelTatio:u,Position:"Right",IsInside:!1};this.SendDrawCountDownEvent(x)&&Te.IsPlusNumber(x.Height)&&(v+=f+1*u)}}else{T=v-f/2-1*u;if(0==g){I=r;L.Left=I,b&&T<b.Rect.Bottom&&(T=(v=b.Rect.Bottom)-f/2-1*u)}else I=r+m-S.Width;l?(this.Canvas.fillStyle=l,this.Canvas.fillRect(I,T,S.Width+1,f),this.Canvas.strokeStyle=t.LineColor,this.Canvas.strokeRect(_(I),_(T),k(S.Width+1),k(f)),this.Canvas.fillStyle=t.LineColor,this.Canvas.fillText(S.Text,I+2*u,v)):(this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(I,T,S.Width,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(S.Text,I+1*u,v)),0==g&&this.DrawLine(i,r,d,t.LineColor,t.LineType,t),v+=f+1*u,L.Bottom=v}}if(e&&Te.IsNumber(L.Left)&&Te.IsNumber(L.Bottom)&&e.set(3,{Rect:L,Item:t}),(3==t.Type||4==t.Type)&&t.Title){var M;D=t.LineColor;(M=this.RGBToStruct(t.LineColor))&&(D="rgba("+M.R+", "+M.G+", "+M.B+", "+ia.FrameLatestPrice.BGAlpha+")");w=this.Canvas.measureText(t.Title).width+2*u;if(this.IsHScreen){T=n-w,I=d-f/2-1*u;this.Canvas.fillStyle=D,this.Canvas.fillRect(I,T,f,w),this.DrawHScreenText({X:d,Y:T},{Text:t.Title,Color:t.TextColor,XOffset:1*u,YOffset:2*u})}else{T=d-f/2-1*u,I=r-w-1*u;this.Canvas.fillStyle=D,this.Canvas.fillRect(I,T,w,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Title,I+1*u,d)}}}}},this.SendDrawCountDownEvent=function(t){if(!this.GetEventCallback)return!1;var e=this.GetEventCallback(w.ON_DRAW_COUNTDOWN);return!(!e||!e.Callback)&&(e.Callback(e,t,this),!0)},this.DrawDotLine=function(t,e,a,i,r){var n=A();this.Canvas.save(),this.Canvas.strokeStyle=i,r&&Te.IsPlusNumber(r.LineWidth)&&(this.Canvas.lineWidth=r.LineWidth*n),r.LineDash?this.Canvas.setLineDash(r.LineDash):this.Canvas.setLineDash([5*n,5*n]),this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(_(a),t),this.Canvas.lineTo(_(a),e)):(this.Canvas.moveTo(t,_(a)),this.Canvas.lineTo(e,_(a))),this.Canvas.stroke(),this.Canvas.restore()},this.DrawLine=function(t,e,a,i,r,n){if(-1!=r)if(0==r){var o=A();this.Canvas.strokeStyle=i;var s=!1;n&&Te.IsPlusNumber(n.LineWidth)&&(this.Canvas.lineWidth=n.LineWidth*o,s=!0),this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(_(a),t),this.Canvas.lineTo(_(a),e)):(this.Canvas.moveTo(t,_(a)),this.Canvas.lineTo(e,_(a))),this.Canvas.stroke(),s&&(this.Canvas.lineWidth=o)}else this.DrawDotLine(t,e,a,i,n)},this.DrawHScreenText=function(t,e){this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=e.Color,this.Canvas.save(),this.Canvas.translate(t.X,t.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(e.Text,e.XOffset,e.YOffset),this.Canvas.restore()},this.RGBToStruct=function(t){if(/^(rgb|RGB)/.test(t)){var e=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),a={};return 3!=e.length?null:(a.R=Number(e[0]),a.G=Number(e[1]),a.B=Number(e[2]),a)}return null},this.GetScaleTextWidth=function(){this.ChartBorder.GetBorder();var t=A();if(this.IsHScreen)var e=this.ChartBorder.Top,a=this.ChartBorder.Bottom,i=e>10*t&&!0===this.IsShowYText[0]&&2!=this.YTextPosition[0],r=a>10*t&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1];else{var n=this.ChartBorder.Right;i=this.ChartBorder.Left>10&&!0===this.IsShowYText[0]&&2!=this.YTextPosition[0],r=n>10&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1]}if(!r&&!i)return null;var o={Left:null,Right:null},s=0,h=!1;this.YSplitOperator&&1==this.YSplitOperator.CoordinateType&&(h=!0);for(var l=0;l<this.HorizontalInfo.length;++l){var u=null,c=this.HorizontalInfo[l];if(c&&(null!=c.Font&&(this.Canvas.font=c.Font),null!=c.Message[0]&&i&&(u=this.Canvas.measureText(c.Message[0]).width,(null==o.Left||o.Left<u)&&(o.Left=u)),null!=c.Message[1]&&r)){if(null!=c.Font&&(this.Canvas.font=c.Font),Array.isArray(c.Message[1])){if(1==this.MultiTextFormat){if(c.ExtendData){c.ExtendData.Font&&(this.Canvas.font=c.ExtendData.Font);var f=this.Canvas.measureText(c.Message[1][0]).width,d=this.Canvas.measureText(c.Message[1][1]).width;u=f+this.Canvas.measureText("/").width,s<d&&(s=d)}}else if(2==this.MultiTextFormat){u=this.Canvas.measureText(c.Message[1][0]).width;var C=this.Canvas.measureText(c.Message[1][1]).width;u<C&&(u=C)}else if(u=this.Canvas.measureText(c.Message[1][0]).width,h){var p=this.Canvas.measureText("-00.00%").width;p>u&&(u=p)}}else u=this.Canvas.measureText(c.Message[1]).width;(null==o.Right||o.Right<u)&&(o.Right=u)}}return Te.IsNumber(o.Right)&&(o.Right+=s),Te.IsNumber(o.Left)&&(o.Left+=this.YTextPadding[0]),Te.IsNumber(o.Right)&&(o.Right+=this.YTextPadding[1]),{TextWidth:o}},this.ClearToolbar=function(){if(this.ToolbarID){var t=document.getElementById(this.ToolbarID);t&&(this.ChartBorder.UIElement.parentNode.removeChild(t),this.ToolbarRect=null)}},this.HideToolbar=function(){if(this.ToolbarID){this.ToolbarRect=null;var t=document.getElementById(this.ToolbarID);t&&"none"!=t.style.display&&(t.style.display="none")}}}function J(){this.newMethod=z,this.newMethod(),delete this.newMethod,this.ClassName="MinuteFrame",this.DataWidth=1*A(),this.DistanceWidth=1*A(),this.MinuteCount=243,this.BeforeBGColor=ia.Minute.Before.BGColor,this.AfterBGColor=ia.Minute.After.BGColor,this.MultiDayBorderPen=ia.MultiDayBorderPen,this.CustomHorizontalInfo=[],this.RightFrame=null,this.ToolbarID=P(),this.ReDrawToolbar=!1,this.DayCount=1,this.ModifyIndex=!0,this.ChangeIndex=!0,this.CloseIndex=!0,this.MaxMinWindow=!0,this.TitleWindow=!0,this.ExportData=!1,this.ModifyIndexEvent,this.ChangeIndexEvent,this.ToolbarRect=null,this.IsShowPositionTitle=!1,this.LastCalculateStatus={Width:0,XPointCount:0},this.BeforeCloseIcon=G(ia.Minute.Before.CloseIcon),this.IsShowCloseButton=!0,this.BeforeOpenVerticalInfo=[],this.AfterCloseVerticalInfo=[],this.DrawFrame=function(){this.IsMinSize||(this.SplitXYCoordinate(),this.DrawBeforeDataBG(),this.YInsideOffset=0,this.DrawTitleBG(),this.DrawHorizontal(),this.DrawVertical()),1!=this.SizeChange&&1!=this.ReDrawToolbar||(this.DrawToolbar(),this.ReDrawToolbar=!1)},this.SuperDrawBorder=this.DrawBorder,this.DrawBorder=function(){if(this.IsShowBorder&&!this.IsMinSize&&(this.SuperDrawBorder(),1==this.Identify)){var t=this.ChartBorder.GetBorder(),e=_(t.Left),a=_(t.Top),i=_(t.Right);this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(e,a),this.Canvas.lineTo(i,a),this.Canvas.save(),this.Canvas.lineWidth=2*A(),this.Canvas.stroke(),this.Canvas.restore()}},this.DrawVolTitle=function(t){if(Ea.IsShowMinuteVolTitle(t)&&1==this.Identify){var e=A(),a=this.ChartBorder.GetLeft()+2*e+this.YInsideOffset,i=this.ChartBorder.GetTopEx()+2*e;if(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",ia.Minute.VolBarColor||ia.Minute.VolTitleColor){ia.Minute.VolBarColor?this.Canvas.fillStyle=ia.Minute.VolBarColor:this.Canvas.fillStyle=ia.Minute.VolTitleColor;var r=this.YSplitOperator.LanguageID,n=na.GetText("MVol-Vol",r);this.Canvas.fillText(n,a,i),a+=this.Canvas.measureText(n).width,a+=6*A()}this.IsShowPositionTitle&&(n=na.GetText("MVol-Position",r),this.Canvas.fillStyle=ia.Minute.PositionColor,this.Canvas.fillText(n,a,i))}},this.DrawToolbar=function(){if(1!=this.ToolbarButtonStyle&&void 0!==p.default&&!(this.Identify<2)&&this.ChartBorder.UIElement){var t=document.getElementById(this.ToolbarID);if(!t||0!=this.SizeChange||0!=this.ReDrawToolbar)if(t||((t=document.createElement("div")).className="klineframe-toolbar",t.id=this.ToolbarID,t.oncontextmenu=function(){return!1},t.setAttribute("identify",this.Identify.toString()),this.ChartBorder.UIElement.parentNode.appendChild(t)),this.ModifyIndex||this.ChangeIndex||this.OverlayIndex||this.CloseIndex){var e=A(),a=parseInt(this.ChartBorder.UIElement.parentElement.style.width.replace("px","")),i=(parseInt(this.ChartBorder.UIElement.parentElement.style.height.replace("px","")),this.ChartBorder.GetTitleHeight()),r=a-this.ChartBorder.Right/e-100,n=this.ChartBorder.GetTop()/e;if(!this.ToolbarRect||this.ToolbarRect.Left!=r||this.ToolbarRect.Top!=n||100!=this.ToolbarRect.Width||this.ToolbarRect.Height!=i/e){this.ToolbarRect={Left:r,Top:n,Width:100,Height:i/e};var o="<span class='index_param icon iconfont icon-index_param' id='modifyindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='调整指标参数'></span><span class='index_change icon iconfont icon-change_index' id='changeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='切换指标'></span>";this.CloseIndex&&(o+="<span class='index_close icon iconfont icon-close' id='closeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='关闭指标窗口'></span>"),t.style.left=r+"px",t.style.top=n+"px",t.style.width="100px",t.style.height=i/e+"px",t.innerHTML=o;this.ChartBorder.UIElement.JSChartContainer,this.Identify;this.ModifyIndex?"function"==typeof this.ModifyIndexEvent&&(0,p.default)("#"+t.id+" .index_param").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},this.ModifyIndexEvent):(0,p.default)("#"+t.id+" .index_param").hide(),this.ChangeIndex?"function"==typeof this.ChangeIndexEvent&&(0,p.default)("#"+t.id+" .index_change").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,IsOverlay:!1},this.ChangeIndexEvent):(0,p.default)("#"+t.id+" .index_change").hide(),(0,p.default)("#"+t.id+" .index_close").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},function(t){var e=t.data.Chart,a=t.data.Identify;e.RemoveIndexWindow(a)}),t.style.display="block"}}else"none"!=t.style.display&&(t.style.display="none")}},this.DrawToolbarV2=function(t,e){if(0==this.Identify&&this.IsShowCloseButton&&this.DrawCloseBeforeButton(t,e),!(this.ChartBorder.TitleHeight<5)&&0!=this.Identify&&1!=this.Identify){var a=[];if(this.CloseIndex&&a.push({ID:b.CLOSE_INDEX_WINDOW,Style:this.CloseWindowButton}),this.MaxMinWindow&&a.push({ID:b.MAX_MIN_WINDOW,Style:this.MaxMinWindowButton}),this.TitleWindow&&a.push({ID:b.TITLE_WINDOW,Style:this.TitleWindowButton}),this.ExportData&&a.push({ID:b.EXPORT_DATA,Style:this.ExportDataButton}),this.OverlayIndex&&a.push({ID:b.OVERLAY_INDEX,Style:this.OverlayIndexButton}),this.ChangeIndex&&a.push({ID:b.CHANGE_INDEX,Style:this.ChangeIndexButton}),this.ModifyIndex&&a.push({ID:b.MODIFY_INDEX_PARAM,Style:this.ModifyIndexParamButton}),Te.IsNonEmptyArray(this.CustomToolbar))for(var i=0;i<this.CustomToolbar.length;++i){var r=this.CustomToolbar[i];r.ID&&r.Style&&a.push({ID:r.ID,Style:r.Style,TooltipText:r.TooltipText})}this.DrawTitleButton(a,t,e)}},this.DrawCloseBeforeButton=function(t,e){if(0==this.Identify){var a=this.ChartBorder.GetBorder();if(!(a.DayBorder||this.ChartBorder.LeftExtendWidth<10)){var i={Left:a.Left,Top:a.TopEx,Width:this.BeforeCloseIcon.Size,Height:this.BeforeCloseIcon.Size};i.Right=i.Left+this.BeforeCloseIcon.Size,i.Bottom=i.Top+this.BeforeCloseIcon.Size;var r={Rect:i,Name:"集合竞价关闭按钮",ID:b.CLOSE_BEFOREOPEN_ID},n=this.BeforeCloseIcon.Color;t&&t.X>=i.Left&&t.X<i.Right&&t.Y>=i.Top&&t.Y<=i.Bottom&&(n=this.BeforeCloseIcon.MoveOnColor,e&&(e.MouseOnToolbar={Rect:i,Item:r,Frame:this,Point:{X:t.X,Y:t.Y}}));var o=this.BeforeCloseIcon.Size+"px "+this.BeforeCloseIcon.Family;this.Canvas.font=o,this.Canvas.fillStyle=n,this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.fillText(this.BeforeCloseIcon.Text,a.Left,a.TopEx),this.Buttons.push(r)}}},this.DrawMultiDayBeforeDataBG=function(t){var e=t.DayBorder,a=_(t.Top),i=_(t.Bottom),r=i-a;this.Canvas.strokeStyle=this.MultiDayBorderPen;for(var n=0;n<e.length;++n){var o=0,s=e[n],h=_(s.Left);(u=(l=_(s.LeftEx))-h)>3&&(this.Canvas.fillStyle=this.BeforeBGColor,this.Canvas.fillRect(h,a,u,r),++o);var l,u;h=_(s.RightEx);(u=(l=_(s.Right))-h)>3&&(this.Canvas.fillStyle=this.AfterBGColor,this.Canvas.fillRect(h,a,u,r),++o),2==o&&n!=e.length-1&&(this.Canvas.beginPath(),this.Canvas.moveTo(l,a),this.Canvas.lineTo(l,i),this.Canvas.stroke())}},this.DrawCallAuctionVertical=function(t,e,a,i){if(e){var r=a.TopTitle,n=a.Bottom,o=(a.Left,a.LeftEx),s=A(),h=null,l=null;for(var u in t){var c=t[u],f=this.GetLeftExtendXFromIndex(c.Value,e);if(f>o)break;if(!(null!=h&&Math.abs(f-h)<this.MinXDistance)){var d=_(f);if(this.IsShowXLine&&(2==c.LineType?(this.Canvas.strokeStyle=c.LineColor,this.Canvas.setLineDash([5*s,5*s]),this.Canvas.beginPath(),this.Canvas.moveTo(d,r),this.Canvas.lineTo(d,n),this.Canvas.stroke(),this.Canvas.setLineDash([])):3==c.LineType||c.LineType>0&&(ia.FrameXLineDash?(this.Canvas.strokeStyle=c.LineColor,this.Canvas.setLineDash(ia.FrameXLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(d,r),this.Canvas.lineTo(d,n),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.strokeStyle=c.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(d,r),this.Canvas.lineTo(d,n),this.Canvas.stroke()))),null!=c.Message[0]&&this.ChartBorder.Bottom>5*s){null!=c.Font&&(this.Canvas.font=c.Font);var C=0;this.Canvas.fillStyle=c.TextColor,this.Canvas.strokeStyle=c.TextColor;var p=this.Canvas.measureText(c.Message[0]).width;if(f<p/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",C=f):f+p/2>=a.ChartWidth?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top",C=f-p):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top",C=f-p/2),null==l||C>l){var m=n;if(3==c.LineType){var D=this.ShortXLineLength*s;this.Canvas.beginPath(),this.Canvas.moveTo(d,m),this.Canvas.lineTo(d,m+D),this.Canvas.stroke(),m+=D+2*s}this.Canvas.fillText(c.Message[0],f,m+this.XBottomOffset),l=C+p}}h=f}}}},this.DrawBeforeDataBG=function(){var t=this.ChartBorder.GetBorder();if(t.DayBorder)this.DrawMultiDayBeforeDataBG(t);else if(!(this.ChartBorder.LeftExtendWidth<10&&this.ChartBorder.RightExtendWidth<10)){var e=_(t.Top),a=_(t.Bottom);if(this.Canvas.fillStyle=this.BeforeBGColor,this.ChartBorder.LeftExtendWidth>10){var i=_(t.Left),r=_(this.ChartBorder.GetLeft())-i,n=a-e;this.Canvas.fillRect(i,e,r,n),this.DrawCallAuctionVertical(this.BeforeOpenVerticalInfo,this.YSplitOperator.BeforeOpenData,t,!0)}if(this.ChartBorder.RightExtendWidth>10){this.Canvas.fillStyle=this.AfterBGColor;i=_(this.ChartBorder.GetRight()),r=_(t.Right)-i,n=a-e;this.Canvas.fillRect(i,e,r,n)}}},this.DrawPictureXCoordinate=function(t,e,a){if(!this.IsHScreen&&e&&Te.IsNonEmptyArray(e.Points)){var i=this.GetBorder(),r=i.Left,n=i.Right;this.Canvas.font=this.DrawPicture.Font;var o=this.GetFontHeight();if(e.X){var s=e.X,h=s.Min.X,l=s.Max.X;h<r&&(h=r),l>n&&(l=n),this.Canvas.fillStyle=this.DrawPicture.BGColor,this.Canvas.fillRect(h,i.Bottom,l-h,o)}for(var u=0;u<e.Points.length;++u){var c=e.Points[u];if(!(c.X<r||c.X>n)){var f=parseInt(this.GetXData(c.X)),d=this.GetKItem(f,a);if(d){var C=Te.FormatTimeString(d.Time,"HH:MM"),p=this.Canvas.measureText(C).width+2,m=c.X-p/2;m<r&&(m=r),this.Canvas.fillStyle=this.DrawPicture.TextBGColor,this.Canvas.fillRect(m,i.Bottom,p,o),this.Canvas.fillStyle=this.DrawPicture.TextColor;var D=i.Bottom+o;this.Canvas.fillText(C,m+1,D)}}}}},this.GetKItem=function(t,e){if(!this.Data)return null;if(!Te.IsNonEmptyArray(this.Data.Data))return null;if(t<this.Data.Data.length)return this.Data.Data[t];var a=this.Data.Data[this.Data.Data.length-1],i=La.GetTimeData(e.Symbol),r=i[t%i.length];return{Date:a.Date,Time:r}},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(null!=this.XSplitOperator&&this.XSplitOperator.Operator(),null!=this.YSplitOperator&&this.YSplitOperator.Operator())},this.GetMultiDayXFromIndex=function(t,e){var a=e.DayBorder,i=t%this.MinuteCount,r=parseInt(t/this.MinuteCount);r>=a.length&&(r=a.length-1);var n=a[r],o=this.MinuteCount-1;if(i>=o)return n.RightEx;var s=n.RightEx-n.LeftEx;return n.LeftEx+s*i/o},this.GetXFromIndex=function(t){var e=this.XPointCount-1,a=this.ChartBorder.GetBorder();if(a.DayBorder)return this.GetMultiDayXFromIndex(t,a);if(1==e)return 0==t?a.LeftEx:a.RightEx;if(e<=0)return a.LeftEx;if(t>=e)return a.RightEx;var i=a.RightEx-a.LeftEx;return a.LeftEx+i*t/e},this.GetMultiDayXData=function(t,e){for(var a=e.DayBorder,i=0;i<a.length;++i){var r=a[i];if(t>=r.Left&&t<=r.Right){var n=this.MinuteCount-1,o=this.MinuteCount*i;if(t<=r.LeftEx)return 0+o;if(t>=r.RightEx)return n+o;var s=r.RightEx-r.LeftEx;return(t-r.LeftEx)*(1*n/s)+o}}},this.GetXData=function(t){var e=this.XPointCount-1;e<0&&(e=0);var a=this.ChartBorder.GetBorder();if(a.DayBorder)return this.GetMultiDayXData(t,a);if(t<=a.LeftEx)return 0;if(t>=a.RightEx)return e;var i=a.RightEx-a.LeftEx;return(t-a.LeftEx)*(1*e/i)},this.DrawCustomHorizontal=function(){if(!this.IsMinSize)for(var t in this.CustomHorizontalInfo){var e=this.CustomHorizontalInfo[t];switch(e.Type){case 0:case 1:this.DrawCustomItem(e)}}},this.GetLeftExtendXFromIndex=function(t,e){var a=e.TotalCount-1,i=this.ChartBorder.GetBorder();return i.DayBorder?this.GetLeftExtendMultiDayXFromIndex(t,e,i):i.Left+this.ChartBorder.LeftExtendWidth*t/a},this.GetLeftExtendMultiDayXFromIndex=function(t,e,a){var i=a.DayBorder[e.Index],r=e.TotalCount-1,n=i.Left;return n+(i.LeftEx-n)*t/r},this.GetLeftExtendMultiDayXData=function(t,e,a){for(var i=a.DayBorder,r=0;r<i.length;++r){var n=i[r];if(t>=n.Left&&t<=n.LeftEx){if(!e[r])return null;var o=e[r].TotalCount-1,s=n.Left,h=1*o/(n.LeftEx-s)*(t-s);return{DayIndex:parseInt(r),DataIndex:h}}}},this.GetLeftExtendXData=function(t,e){var a=this.ChartBorder.GetBorder();if(a.DayBorder)return this.GetLeftExtendMultiDayXData(t,e,a);var i=e.TotalCount-1;i<0&&(i=0);var r=a.Left,n=a.LeftEx;return t<=r?0:t>=n?i:1*i/(n-r)*(t-r)},this.MoveXIndexLeft=function(t,e){if(D.Chart.Log("[MinuteFrame::MoveXIndexLeft] obj ",e),2==e.DataType){var a=e.IndexData.DayIndex,i=e.IndexData.DataIndex-t,r=-1;if(20==e.IndexData.Type)r=0;else if(10==e.IndexData.Type)r=1;else{if(30!=e.IndexData.Type)return!1;r=2}for(var n=a,o=r;n>=0;--n){for(var s=e.Data[n];o>=0;--o){if((l=s[o]).DayItem&&l.DayItem.Data){for(null==i&&(i=l.DayItem.Data.length-1);i>=0;--i){if(c=l.DayItem.Data[i]){if(10==l.Type){var h=this.MinuteCount*n+i;return e.Point.X=this.GetXFromIndex(h),e.Point.Y=this.GetYFromData(c.Close),e.IndexData.CursorIndex=h,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}if(20==l.Type){if(!Te.IsNumber(c.Price))continue;return e.Point.X=this.GetLeftExtendXFromIndex(i,l.DayItem),e.Point.Y=this.GetLeftExtendYFromData(c.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}if(30==l.Type){if(!Te.IsNumber(c.Price))continue;return e.Point.X=this.GetRightExtendXFromIndex(i,l.DayItem),e.Point.Y=this.GetRightExtendYFromData(c.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}}}i=null}}o=2}return!1}if(1==e.DataType){a=e.IndexData.DayIndex,i=e.IndexData.DataIndex-t,r=-1;if(2==e.IndexData.Type)r=0;else if(1==e.IndexData.Type)r=1;else{if(3!=e.IndexData.Type)return!1;r=2}for(n=r;n>=0;--n){var l;if((l=e.Data[n])&&l.DayItem&&l.DayItem.Data){for(null==i&&(i=l.DayItem.Data.length-1);i>=0;--i){if(1==l.Type){var u=l.DayItem.DataOffset;if(!(c=l.DayItem.Data[i+u]))continue;h=i;return e.Point.X=this.GetXFromIndex(h),e.Point.Y=this.GetYFromData(c.Close),e.IndexData.CursorIndex=h,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}if(2==l.Type){if(!(c=l.DayItem.Data[i]))continue;if(!Te.IsNumber(c.Price))continue;return e.Point.X=this.GetLeftExtendXFromIndex(i,l.DayItem),e.Point.Y=this.GetLeftExtendYFromData(c.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}if(3==l.Type){var c;if(!(c=l.DayItem.Data[i]))continue;if(!Te.IsNumber(c.Price))continue;return e.Point.X=this.GetRightExtendXFromIndex(i,l.DayItem),e.Point.Y=this.GetRightExtendYFromData(c.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}}i=null}}}},this.MoveXIndexRight=function(t,e){if(D.Chart.Log("[MinuteFrame::MoveXIndexRight] obj ",e),2==e.DataType){var a=e.IndexData.DayIndex,i=e.IndexData.DataIndex+t,r=-1;if(20==e.IndexData.Type)r=0;else if(10==e.IndexData.Type)r=1;else{if(30!=e.IndexData.Type)return!1;r=2}for(var n=a,o=r;n<e.Data.length;++n){for(var s=e.Data[n];o<3;++o){if((l=s[o]).DayItem&&l.DayItem.Data){for(null==i&&(i=0);i<l.DayItem.Data.length;++i){if(c=l.DayItem.Data[i]){if(10==l.Type){var h=this.MinuteCount*n+i;return e.Point.X=this.GetXFromIndex(h),e.Point.Y=this.GetYFromData(c.Close),e.IndexData.CursorIndex=h,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}if(20==l.Type){if(!Te.IsNumber(c.Price))continue;return e.Point.X=this.GetLeftExtendXFromIndex(i,l.DayItem),e.Point.Y=this.GetLeftExtendYFromData(c.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}if(30==l.Type){if(!Te.IsNumber(c.Price))continue;return e.Point.X=this.GetRightExtendXFromIndex(i,l.DayItem),e.Point.Y=this.GetRightExtendYFromData(c.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}}}i=null}}o=0}return!1}if(1==e.DataType){a=e.IndexData.DayIndex,i=e.IndexData.DataIndex+t,r=-1;if(2==e.IndexData.Type)r=0;else if(1==e.IndexData.Type)r=1;else{if(3!=e.IndexData.Type)return!1;r=2}for(n=r;n<e.Data.length;++n){var l;if((l=e.Data[n]).DayItem&&l.DayItem.Data){for(null==i&&(i=0);i<l.DayItem.Data.length;++i){if(1==l.Type){if(i>=this.XPointCount)break;var u=l.DayItem.DataOffset;if(!(c=l.DayItem.Data[i+u]))continue;h=i;return e.Point.X=this.GetXFromIndex(h),e.Point.Y=this.GetYFromData(c.Close),e.IndexData.CursorIndex=h,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}if(2==l.Type){if(!(c=l.DayItem.Data[i]))continue;if(!Te.IsNumber(c.Price))continue;return e.Point.X=this.GetLeftExtendXFromIndex(i,l.DayItem),e.Point.Y=this.GetLeftExtendYFromData(c.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}if(3==l.Type){var c;if(!(c=l.DayItem.Data[i]))continue;if(!Te.IsNumber(c.Price))continue;return e.Point.X=this.GetRightExtendXFromIndex(i,l.DayItem),e.Point.Y=this.GetRightExtendYFromData(c.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}}i=null}}}},this.GetLeftExtendXValidData=function(t,e){if(this.ChartBorder.GetBorder().DayBorder){var a=this.GetLeftExtendXData(t,e.Data);if(!a)return!1;var i=parseInt(a.DataIndex.toFixed(0)),r=e.Data[a.DayIndex];if(i>=0&&i<r.Data.length){var n=r.Data[i];if(Te.IsNumber(n.Price))return e.IndexData.DataIndex=i,!0}i<0?i=0:i>=r.Data.length&&(i=r.Data.length-1);for(var o=-1,s=i;s>=0;--s){if((n=r.Data[s])&&Te.IsNumber(n.Price)){o=s;break}}return!(o<0)&&(e.IndexData.DataIndex=o,e.IndexData.Point.X=this.GetLeftExtendXFromIndex(o,r),D.Chart.Log("[MinuteFrame::GetLeftExtendXValidData] DayIndex:"+e.IndexData.DayIndex+", Type:"+e.IndexData.Type+", x:"+t+"=>"+e.IndexData.Point.X+", index:"+i+"=>"+o),!0)}i=this.GetLeftExtendXData(t,e.Data);if((i=parseInt(i.toFixed(0)))>=0&&i<e.Data.Data.length){n=e.Data.Data[i];if(Te.IsNumber(n.Price))return e.IndexData.DataIndex=i,!0}i<0?i=0:i>=e.Data.Data.length&&(i=e.Data.Data.length-1);for(o=-1,s=i;s>=0;--s){n=e.Data.Data[s];if(Te.IsNumber(n.Price)){o=s;break}}if(o<0)for(s=i+1;s<e.Data.Data.length;++s){n=e.Data.Data[s];if(Te.IsNumber(n.Price)){o=s;break}}return!(o<0)&&(e.IndexData.DataIndex=o,e.IndexData.Point.X=this.GetLeftExtendXFromIndex(o,e.Data),D.Chart.Log("[MinuteFrame::GetLeftExtendXValidData] DayIndex:"+e.IndexData.DayIndex+", Type:"+e.IndexData.Type+", x:"+t+"=>"+e.IndexData.Point.X+", index:"+i+"=>"+o),!0)},this.GetRightExtendXValidData=function(t,e){if(this.ChartBorder.GetBorder().DayBorder){var a=this.GetRightExtendXData(t,e.Data);if(!a)return!1;var i=parseInt(a.DataIndex.toFixed(0)),r=e.Data[a.DayIndex];if(i>=0&&i<r.Data.length){var n=r.Data[i];if(Te.IsNumber(n.Price))return e.IndexData.DataIndex=i,!0}i<0?i=0:i>=r.Data.length&&(i=r.Data.length-1);for(var o=-1,s=i;s>=0;--s){if((n=r.Data[s])&&Te.IsNumber(n.Price)){o=s;break}}return!(o<0)&&(e.IndexData.DataIndex=o,e.IndexData.Point.X=this.GetRightExtendXFromIndex(o,r),D.Chart.Log("[MinuteFrame::GetRightExtendXValidData] DayIndex:"+e.IndexData.DayIndex+", Type:"+e.IndexData.Type+", x:"+t+"=>"+e.IndexData.Point.X+", index:"+i+"=>"+o),!0)}if(!e||!e.Data)return!1;i=this.GetRightExtendXData(t,e.Data);if((i=parseInt(i.toFixed(0)))>=0&&i<e.Data.Data.length){n=e.Data.Data[i];if(Te.IsNumber(n.Price))return e.IndexData.DataIndex=i,!0}i<0?i=0:i>=e.Data.Data.length&&(i=e.Data.Data.length-1);for(o=-1,s=i;s>=0;--s){n=e.Data.Data[s];if(Te.IsNumber(n.Price)){o=s;break}}if(o<0)for(s=i+1;s<e.Data.Data.length;++s){n=e.Data.Data[s];if(Te.IsNumber(n.Price)){o=s;break}}return!(o<0)&&(e.IndexData.DataIndex=o,e.IndexData.Point.X=this.GetRightExtendXFromIndex(o,e.Data),D.Chart.Log("[MinuteFrame::GetRightExtendXValidData] DayIndex:"+e.IndexData.DayIndex+", Type:"+e.IndexData.Type+", x:"+t+"=>"+e.IndexData.Point.X+", index:"+i+"=>"+o),!0)},this.GetLeftExtendYFromData=function(t,e,a){if(!a||!a.Range)return this.GetYFromData(t,e);var i=a.Range,r=this.ChartBorder.GetBorder(),n=(r.BottomEx-r.TopEx)*(t-i.Min)/(i.Max-i.Min);return r.BottomEx-n},this.GetLeftExtendYData=function(t,e,a){if(!a||!a.Range)return this.GetYData(t,e);var i=a.Range,r=this.ChartBorder.GetBorder(),n=r.BottomEx-r.TopEx;return(r.BottomEx-t)/n*(i.Max-i.Min)+i.Min},this.GetRightExtendMultiDayXFromIndex=function(t,e,a){var i=a.DayBorder[e.Index],r=e.TotalCount-1,n=i.RightEx;return n+(i.Right-n)*t/r},this.GetRightExtendXFromIndex=function(t,e){var a=e.TotalCount-1,i=this.ChartBorder.GetBorder();return i.DayBorder?this.GetRightExtendMultiDayXFromIndex(t,e,i):i.RightEx+this.ChartBorder.RightExtendWidth*t/a},this.GetRightExtendYFromData=function(t,e,a){return this.GetLeftExtendYFromData(t,e,a)},this.GetRightExtendYData=function(t,e,a){return a&&a.Range?this.GetLeftExtendYData(t,e,a):this.GetYData(t,e)},this.GetRightExtendMultiDayXData=function(t,e,a){for(var i=a.DayBorder,r=0;r<i.length;++r){var n=i[r];if(t>=n.RightEx&&t<=n.Right){if(!e[r])return null;var o=e[r].TotalCount-1,s=n.RightEx,h=1*o/(n.Right-s)*(t-s);return{DayIndex:parseInt(r),DataIndex:h}}}return null},this.GetRightExtendXData=function(t,e){var a=this.ChartBorder.GetBorder();if(a.DayBorder)return this.GetRightExtendMultiDayXData(t,e,a);var i=e.TotalCount-1;i<0&&(i=0);var r=a.RightEx,n=a.Right;return t<=r?0:t>=n?i:1*i/(n-r)*(t-r)}}function q(){this.newMethod=J,this.newMethod(),delete this.newMethod,this.ClassName="MinuteHScreenFrame",this.IsHScreen=!0,this.DrawTitleBG=function(){if(!(this.ChartBorder.TitleHeight<=0)){var t=this.ChartBorder.GetHScreenBorder(),e=_(t.RightEx),a=_(t.Top),i=_(t.Bottom),r=this.ChartBorder.TitleHeight,n=i-a;this.Canvas.fillStyle=this.TitleBGColor,this.Canvas.fillRect(e,a,r,n)}},this.DrawToolbar=function(){},this.DrawBeforeDataBG=function(){var t=this.ChartBorder.GetHScreenBorder();if(t.DayBorder)this.DrawMultiDayBeforeDataBG(t);else if(!(this.ChartBorder.LeftExtendWidth<10&&this.ChartBorder.RightExtendWidth<10)){var e=_(t.Left),a=_(t.Right);if(this.Canvas.fillStyle=this.BeforeBGColor,this.ChartBorder.LeftExtendWidth>10){var i=_(t.Top),r=a-e,n=_(t.TopEx)-i;this.Canvas.fillRect(e,i,r,n)}if(this.ChartBorder.RightExtendWidth>10){i=t.BottomEx,r=a-e,n=t.Bottom-i;this.Canvas.fillRect(e,i,r,n)}}},this.DrawMultiDayBeforeDataBG=function(t){var e=t.DayBorder,a=_(t.Left),i=_(t.Right),r=i-a;this.Canvas.strokeStyle=this.MultiDayBorderPen;for(var n=0;n<e.length;++n){var o=0,s=e[n],h=_(s.Top);(u=(l=_(s.TopEx))-h)>3&&(this.Canvas.fillStyle=this.BeforeBGColor,this.Canvas.fillRect(a,h,r,u),++o);var l,u;h=_(s.BottomEx);(u=(l=_(s.Bottom))-h)>3&&(this.Canvas.fillStyle=this.AfterBGColor,this.Canvas.fillRect(a,h,r,u),++o),2==o&&n!=e.length-1&&(this.Canvas.beginPath(),this.Canvas.moveTo(a,l),this.Canvas.lineTo(i,l),this.Canvas.stroke())}},this.GetYData=function(t){var e=this.ChartBorder.GetHScreenBorder();if(t<e.LeftEx)return this.HorizontalMin;if(t>e.RightEx)return this.HorizontalMax;var a=e.RightEx-e.LeftEx;return(t-e.LeftEx)/a*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin},this.GetMultiDayXData=function(t,e){for(var a=e.DayBorder,i=0;i<a.length;++i){var r=a[i];if(t>=r.Top&&t<=r.Bottom){var n=this.MinuteCount-1,o=this.MinuteCount*i;if(t<=r.TopEx)return 0+o;if(t>=r.BottomEx)return n+o;var s=r.BottomEx-r.TopEx;return(t-r.TopEx)*(1*n/s)+o}}},this.GetXData=function(t){var e=this.XPointCount-1;e<0&&(e=0);var a=this.ChartBorder.GetHScreenBorder();if(a.DayBorder)return this.GetMultiDayXData(t,a);if(t<=a.TopEx)return 0;if(t>=a.BottomEx)return e;var i=a.BottomEx-a.TopEx;return(t-a.TopEx)*(1*e/i)},this.GetMultiDayXFromIndex=function(t,e){var a=e.DayBorder,i=t%this.MinuteCount,r=parseInt(t/this.MinuteCount);r>=a.length&&(r=a.length-1);var n=a[r],o=this.MinuteCount-1;if(i>=o)return n.BottomEx;var s=n.BottomEx-n.TopEx;return n.TopEx+s*i/o},this.GetXFromIndex=function(t){var e=this.XPointCount-1,a=this.ChartBorder.GetHScreenBorder();if(a.DayBorder)return this.GetMultiDayXFromIndex(t,a);if(1==e)return 0==t?a.TopEx:a.BottomEx;if(e<=0)return a.TopEx;if(t>=e)return a.BottomEx;var i=a.BottomEx-a.TopEx;return a.TopEx+i*t/e},this.GetYFromData=function(t){var e=this.ChartBorder.GetHScreenBorder();if(t<=this.HorizontalMin)return e.LeftEx;if(t>=this.HorizontalMax)return e.RightEx;var a=(e.RightEx-e.LeftEx)*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return e.LeftEx+a},this.DrawVolTitle=function(t){if(Ea.IsShowMinuteVolTitle(t)&&1==this.Identify){var e=A(),a=this.ChartBorder.GetRight()-2*e,i=this.ChartBorder.GetTopEx()+2*e;this.Canvas.save(),this.Canvas.translate(a,i),this.Canvas.rotate(90*Math.PI/180);var r=this.YInsideOffset;if(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",ia.Minute.VolBarColor||ia.Minute.VolTitleColor){ia.Minute.VolBarColor?this.Canvas.fillStyle=ia.Minute.VolBarColor:this.Canvas.fillStyle=ia.Minute.VolTitleColor;var n=this.YSplitOperator.LanguageID,o=na.GetText("MVol-Vol",n);this.Canvas.fillText(o,r,0),r+=this.Canvas.measureText(o).width,r+=6*A()}this.IsShowPositionTitle&&(o=na.GetText("MVol-Position",n),this.Canvas.fillStyle=ia.Minute.PositionColor,this.Canvas.fillText(o,r,0)),this.Canvas.restore()}},this.DrawHorizontal=function(){for(var t=this.ChartBorder.GetHScreenBorder(),e=t.Top,a=t.Bottom,i=t.Left,r=t.Right,n=this.ChartBorder.Top,o=this.ChartBorder.Bottom,s=null,h=this.HorizontalInfo.length-1;h>=0;--h){var l=this.HorizontalInfo[h],u=this.GetYFromData(l.Value);if(!(null!=u&&Math.abs(u-s)<this.MinYDistance)){if(this.Canvas.strokeStyle=l.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(_(u),e),this.Canvas.lineTo(_(u),a),this.Canvas.stroke(),u>=r-2)this.Canvas.textBaseline="top",u=r;else if(u<=i+2){if(this.Canvas.textBaseline="bottom",null!=(u=i)&&Math.abs(u-s)<2*this.MinYDistance)continue}else this.Canvas.textBaseline="middle";if(null!=l.Message[0]&&n>10){null!=l.Font&&(this.Canvas.font=l.Font),this.Canvas.fillStyle=l.TextColor,this.Canvas.textAlign="right";var c=u,f=e;this.Canvas.save(),this.Canvas.translate(c,f),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(l.Message[0],-2,0),this.Canvas.restore()}if(null!=l.Message[1]&&o>10){null!=l.Font&&(this.Canvas.font=l.Font),this.Canvas.fillStyle=l.TextColor,this.Canvas.textAlign="left";c=u,f=a;this.Canvas.save(),this.Canvas.translate(c,f),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(l.Message[1],2,0),this.Canvas.restore()}s=u}}},this.DrawInsideClientHorizontal=function(){for(var t=this.GetBorder(),e=t.Left,a=t.Right,i=t.BottomEx,r=t.TopEx,n=(A(),null),o=this.HorizontalInfo.length-1;o>=0;--o){var s=this.HorizontalInfo[o];if(s&&s.Message[2]&&s.Message[3]){var h=this.GetYFromData(s.Value);if(!(null!=h&&null!=n&&Math.abs(h-n)<this.MinYDistance)){if(h>=a-2)this.Canvas.textBaseline="top",h=a;else if(h<=e+2){if(this.Canvas.textBaseline="bottom",null!=(h=e)&&Math.abs(h-n)<2*this.MinYDistance)continue}else this.Canvas.textBaseline="middle";if(s.Message[2]){null!=s.Font&&(this.Canvas.font=s.Font),this.Canvas.fillStyle=s.TextColor,this.Canvas.textAlign="left";var l=h,u=r;this.Canvas.save(),this.Canvas.translate(l,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(s.Message[2],2,0),this.Canvas.restore()}if(s.Message[3]){null!=s.Font&&(this.Canvas.font=s.Font),this.Canvas.fillStyle=s.TextColor,this.Canvas.textAlign="right";l=h,u=i;this.Canvas.save(),this.Canvas.translate(l,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(s.Message[3],-2,0),this.Canvas.restore()}n=h}}}},this.DrawVertical=function(){var t=this.ChartBorder.GetHScreenBorder(),e=t.Left,a=t.Right,i=t.Bottom,r=null;for(var n in this.VerticalInfo){var o=this.GetXFromIndex(this.VerticalInfo[n].Value);if(o>i)break;if(!(null!=r&&Math.abs(o-r)<this.MinXDistance)){if(this.Canvas.strokeStyle=this.VerticalInfo[n].LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e,_(o)),this.Canvas.lineTo(a,_(o)),this.Canvas.stroke(),null!=this.VerticalInfo[n].Message[0]){null!=this.VerticalInfo[n].Font&&(this.Canvas.font=this.VerticalInfo[n].Font),this.Canvas.fillStyle=this.VerticalInfo[n].TextColor;var s=this.Canvas.measureText(this.VerticalInfo[n].Message[0]).width;o<s/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top"):o+s/2>=this.ChartBorder.GetChartHeight()?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top"):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top");var h=e,l=o;this.Canvas.save(),this.Canvas.translate(h,l),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.VerticalInfo[n].Message[0],0,0),this.Canvas.restore()}r=o}}},this.DrawInsideHorizontal=function(){if(!this.IsMinSize&&(!1!==this.IsShowYText[0]||!1!==this.IsShowYText[1])){this.DrawInsideClientHorizontal();var t=this.ChartBorder.GetHScreenBorder(),e=t.Left,a=t.RightEx,i=t.Top,r=t.Bottom,n=this.ChartBorder.Top,o=this.ChartBorder.Bottom;this.ChartBorder.TitleHeight;if(n<10*(s=A())&&!0===this.IsShowYText[0]||o<10*s&&!0===this.IsShowYText[1])for(var s=A(),h=null,l=null,u=this.HorizontalInfo.length-1;u>=0;--u){var c=this.HorizontalInfo[u],f=this.GetYFromData(c.Value);if(!(null!=f&&null!=h&&Math.abs(f-h)<this.MinYDistance)){if(null!=c.Message[0]&&n<10*s&&!0===this.IsShowYText[0]){null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline=f>=a-2?"top":f<=e+2?"bottom":"middle";this.Canvas.textBaseline,this.Canvas.textAlign,this.Canvas.font,c.Message[0];var d=f,C=i;this.Canvas.save(),this.Canvas.translate(d,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(c.Message[0],2*s,0),this.Canvas.restore(),(null==l||l<d)&&(this.YInsideOffset=this.Canvas.measureText(c.Message[0]).width+4*A(),l=d)}if(null!=c.Message[1]&&o<10*s&&!0===this.IsShowYText[1]){null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="right",this.Canvas.textBaseline=f>=a-2?"top":f<=e+2?"bottom":"middle";this.Canvas.measureText(c.Message[1]).width,this.Canvas.textBaseline,this.Canvas.textAlign,this.Canvas.font,c.Message[1],d=f,C=r;this.Canvas.save(),this.Canvas.translate(d,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(c.Message[1],-2*s,0),this.Canvas.restore()}h=f}}}},this.GetLeftExtendXFromIndex=function(t,e){var a=e.TotalCount-1,i=this.ChartBorder.GetHScreenBorder();return i.DayBorder?this.GetLeftExtendMultiDayXFromIndex(t,e,i):i.Top+this.ChartBorder.LeftExtendWidth*t/a},this.GetLeftExtendMultiDayXFromIndex=function(t,e,a){var i=a.DayBorder[e.Index],r=e.TotalCount-1,n=i.Top;return n+(i.TopEx-n)*t/r},this.GetLeftExtendMultiDayXData=function(t,e,a){for(var i=a.DayBorder,r=0;r<i.length;++r){var n=i[r];if(t>=n.Top&&t<=n.TopEx){if(!e[r])return null;var o=e[r].TotalCount-1,s=n.Top,h=1*o/(n.TopEx-s)*(t-s);return{DayIndex:parseInt(r),DataIndex:h}}}return null},this.GetLeftExtendXData=function(t,e){var a=this.ChartBorder.GetHScreenBorder();if(a.DayBorder)return this.GetLeftExtendMultiDayXData(t,e,a);var i=e.TotalCount-1;i<0&&(i=0);var r=a.Top,n=a.TopEx;return t<=r?0:t>=n?i:1*i/(n-r)*(t-r)},this.GetLeftExtendYFromData=function(t,e,a){if(!a||!a.Range)return this.GetYFromData(t,e);var i=a.Range,r=this.ChartBorder.GetHScreenBorder(),n=(r.RightEx-r.LeftEx)*(t-i.Min)/(i.Max-i.Min);return r.LeftEx+n},this.GetLeftExtendYData=function(t,e,a){if(!a||!a.Range)return this.GetYData(y,e);var i=a.Range,r=this.ChartBorder.GetHScreenBorder(),n=r.RightEx-r.LeftEx;return(t-r.LeftEx)/n*(i.Max-i.Min)+i.Min},this.GetRightExtendMultiDayXFromIndex=function(t,e,a){var i=a.DayBorder[e.Index],r=e.TotalCount-1,n=i.BottomEx;return n+(i.Bottom-n)*t/r},this.GetRightExtendXFromIndex=function(t,e){var a=e.TotalCount-1,i=this.ChartBorder.GetHScreenBorder();return i.DayBorder?this.GetRightExtendMultiDayXFromIndex(t,e,i):i.BottomEx+this.ChartBorder.RightExtendWidth*t/a},this.GetRightExtendMultiDayXData=function(t,e,a){for(var i=a.DayBorder,r=0;r<i.length;++r){var n=i[r];if(t>=n.BottomEx&&t<=n.Bottom){if(!e[r])return null;var o=e[r].TotalCount-1,s=n.BottomEx,h=1*o/(n.Bottom-s)*(t-s);return{DayIndex:parseInt(r),DataIndex:h}}}return null},this.GetRightExtendXData=function(t,e){var a=this.ChartBorder.GetHScreenBorder();if(a.DayBorder)return this.GetRightExtendMultiDayXData(t,e,a);var i=e.TotalCount-1;i<0&&(i=0);var r=a.BottomEx,n=a.Bottom;return t<=r?0:t>=n?i:1*i/(n-r)*(t-r)},this.GetRightExtendYFromData=function(t,e,a){return a&&a.Range?this.GetLeftExtendYFromData(t,e,a):this.GetYFromData(t,e)}}function Z(){this.newMethod=J,this.newMethod(),delete this.newMethod,this.ClassName="OverlayMinuteFrame",this.IsShow=!0,this.IsShareY=!1,this.IsCalculateYMaxMin=!0,this.Draw=function(){this.SplitXYCoordinate(),this.IsShow,this.SizeChange=!1,this.XYSplit=!1},this.DrawToolbar=function(){},this.GetScaleTextWidth=function(){return{TextWidth:0}},this.SplitXYCoordinate=function(){if(0!=this.XYSplit)if(this.IsShareY)for(var t in this.HorizontalMax=this.MainFrame.HorizontalMax,this.HorizontalMin=this.MainFrame.HorizontalMin,this.HorizontalInfo=[],this.MainFrame.HorizontalInfo){var e=this.MainFrame.HorizontalInfo[t];this.HorizontalInfo.push(e)}else null!=this.YSplitOperator&&this.YSplitOperator.Operator()}}function Q(){this.newMethod=q,this.newMethod(),delete this.newMethod,this.ClassName="OverlayMinuteHScreenFrame",this.IsShow=!0,this.Draw=function(){this.SplitXYCoordinate(),this.IsShow,this.SizeChange=!1,this.XYSplit=!1},this.SplitXYCoordinate=function(){if(0!=this.XYSplit)if(this.IsShareY)for(var t in this.HorizontalMax=this.MainFrame.HorizontalMax,this.HorizontalMin=this.MainFrame.HorizontalMin,this.HorizontalInfo=[],this.MainFrame.HorizontalInfo){var e=this.MainFrame.HorizontalInfo[t];this.HorizontalInfo.push(e)}else null!=this.YSplitOperator&&this.YSplitOperator.Operator()}}function $(){this.newMethod=z,this.newMethod(),delete this.newMethod,this.ClassName="KLineFrame",this.ToolbarID=P(),this.ModifyIndex=!0,this.ChangeIndex=!0,this.CloseIndex=!0,this.OverlayIndex=!1,this.MaxMinWindow=!0,this.TitleWindow=!0,this.ExportData=!1,this.ModifyIndexEvent,this.ChangeIndexEvent,this.ToolbarRect=null,this.ReDrawToolbar=!1,this.LastCalculateStatus={Width:0,XPointCount:0},this.CustomHorizontalInfo=[],this.IsDrawTitleBG=!1,this.IsShowNameArrow=!1,this.CustomVerticalInfo=[],this.DrawCustomVerticalEvent,this.RightSpaceCount=0,this.Logarithmic=null,this.CustomToolbar=[],this.ToolbarType=0,this.DrawToolbar=function(){if(1!=this.ToolbarButtonStyle&&void 0!==p.default&&this.ChartBorder.UIElement&&this.ChartBorder.UIElement.parentNode){var t=document.getElementById(this.ToolbarID);if(!t||0!=this.SizeChange||0!=this.ReDrawToolbar)if(t||((t=document.createElement("div")).className="klineframe-toolbar",t.id=this.ToolbarID,t.oncontextmenu=function(){return!1},t.setAttribute("identify",this.Identify.toString()),this.ChartBorder.UIElement.parentNode.appendChild(t)),this.ModifyIndex||this.ChangeIndex||this.OverlayIndex||this.CloseIndex||Te.IsNonEmptyArray(this.CustomToolbar)){var e=A(),a=parseInt(this.ChartBorder.UIElement.parentElement.style.width.replace("px","")),i=(parseInt(this.ChartBorder.UIElement.parentElement.style.height.replace("px","")),this.ChartBorder.GetTitleHeight()),r=a-this.ChartBorder.Right/e-100,n=this.ChartBorder.GetTop()/e;if(!this.ToolbarRect||this.ToolbarRect.Left!=r||this.ToolbarRect.Top!=n||100!=this.ToolbarRect.Width||this.ToolbarRect.Height!=i/e){this.ToolbarRect={Left:r,Top:n,Width:100,Height:i/e};var o="<span class='index_param icon iconfont icon-index_param' id='modifyindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='调整指标参数'></span><span class='index_change icon iconfont icon-change_index' id='changeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='切换指标'></span><span class='index_overlay icon iconfont icon-overlay_index' id='overlayindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='叠加指标'></span>";if(0!==this.Identify&&this.CloseIndex&&(o+="<span class='index_close icon iconfont icon-close' id='closeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='关闭指标窗口'></span>"),Te.IsNonEmptyArray(this.CustomToolbar))for(var s=0;s<this.CustomToolbar.length;++s){o+=(h=this.CustomToolbar[s]).Html}t.style.left=r+"px",t.style.top=n+"px",t.style.width="100px",t.style.height=i/e+"px",t.innerHTML=o;this.ChartBorder.UIElement.JSChartContainer,this.Identify;if(this.ModifyIndex?"function"==typeof this.ModifyIndexEvent&&(0,p.default)("#"+t.id+" .index_param").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},this.ModifyIndexEvent):(0,p.default)("#"+t.id+" .index_param").hide(),this.ChangeIndex?"function"==typeof this.ChangeIndexEvent&&(0,p.default)("#"+t.id+" .index_change").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,IsOverlay:!1},this.ChangeIndexEvent):(0,p.default)("#"+t.id+" .index_change").hide(),this.OverlayIndex?(0,p.default)("#"+t.id+" .index_overlay").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,IsOverlay:!0},this.ChangeIndexEvent):(0,p.default)("#"+t.id+" .index_overlay").hide(),(0,p.default)("#"+t.id+" .index_close").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},function(t){var e=t.data.Chart,a=t.data.Identify;e.RemoveIndexWindow(a)}),Te.IsNonEmptyArray(this.CustomToolbar))for(s=0;s<this.CustomToolbar.length;++s){var h=this.CustomToolbar[s];(0,p.default)("#"+h.ID).click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,ID:h.ID},h.Click)}t.style.display="block"}}else"none"!=t.style.display&&(t.style.display="none")}},this.DrawToolbarV2=function(t,e){if(this.Buttons=[],this.LeftButtonWidth=0,1!=this.IsMinSize&&!(this.ChartBorder.TitleHeight<5)){var a=[];if(this.CloseIndex&&0!==this.Identify&&a.push({ID:b.CLOSE_INDEX_WINDOW,Style:this.CloseWindowButton}),this.MaxMinWindow&&0!=this.Identify&&a.push({ID:b.MAX_MIN_WINDOW,Style:this.MaxMinWindowButton}),this.TitleWindow&&0!=this.Identify&&a.push({ID:b.TITLE_WINDOW,Style:this.TitleWindowButton}),this.ExportData&&a.push({ID:b.EXPORT_DATA,Style:this.ExportDataButton}),this.OverlayIndex&&a.push({ID:b.OVERLAY_INDEX,Style:this.OverlayIndexButton}),this.ChangeIndex&&a.push({ID:b.CHANGE_INDEX,Style:this.ChangeIndexButton}),this.ModifyIndex&&a.push({ID:b.MODIFY_INDEX_PARAM,Style:this.ModifyIndexParamButton}),Te.IsNonEmptyArray(this.CustomToolbar))for(var i=0;i<this.CustomToolbar.length;++i){var r=this.CustomToolbar[i];if(r.ID&&r.Style){var n={ID:r.ID,Style:r.Style,TooltipText:r.TooltipText};!0===r.IsLeft||a.push(n)}}if(this.GetEventCallback){var o=this.GetEventCallback(w.ON_CUSTOM_RIGHT_TOOLBAR);if(o&&o.Callback){var s={PreventDefault:!1,DefaultButton:a,AryButton:null,FrameID:this.Identify};if(o.Callback(o,s,this),s.PreventDefault)return void this.DrawTitleButton(s.AryButton,t,e)}}this.DrawTitleButton(a,t,e)}},this.GetLeftToolbar=function(t){if(this.GetEventCallback){var e=this.GetEventCallback(w.ON_CUSTOM_LEFT_TOOLBAR);if(e&&e.Callback){var a={PreventDefault:!1,AryButton:null,FrameID:this.Identify};if(t&&(t.Overlay&&(a.Title=t.Overlay.Title),t.OverlayID&&(a.OverlayID=t.OverlayID)),e.Callback(e,a,this),a.PreventDefault)return a.AryButton}}if(!Te.IsNonEmptyArray(this.CustomToolbar))return null;for(var i=[],r=0;r<this.CustomToolbar.length;++r){var n=this.CustomToolbar[r];if(n.ID&&n.Style){var o={ID:n.ID,Style:n.Style,TooltipText:n.TooltipText};!0===n.IsLeft&&i.push(o)}}return i},this.DrawFrame=function(){this.IsMinSize||(this.SplitXYCoordinate(),1==this.SizeChange&&(this.CalculateDataWidth(),this.Logarithmic&&this.SplitLogarithmicXYCoordinate()),this.BeforeDrawXYCallback&&this.BeforeDrawXYCallback(this),this.DrawTitleBG(),this.DrawHorizontal(),this.DrawVertical()),1!=this.SizeChange&&1!=this.ReDrawToolbar||(this.DrawToolbar(),this.ReDrawToolbar=!1)},this.GetXFromIndex=function(t,e){if(!1===e)if(t>=0)for(var a=this.ChartBorder.GetLeft()+ia.FrameLeftMargin+this.DistanceWidth/2+this.DataWidth/2,i=1;i<=t;++i)a+=this.DistanceWidth+this.DataWidth;else{a=this.ChartBorder.GetLeft()-(this.DistanceWidth/2+this.DataWidth+this.DistanceWidth);var r=Math.abs(t);for(i=1;i<r;++i)a-=this.DistanceWidth+this.DataWidth}else{t<0&&(t=0),t>this.xPointCount-1&&(t=this.xPointCount-1);for(a=this.ChartBorder.GetLeft()+ia.FrameLeftMargin+this.DistanceWidth/2+this.DataWidth/2,i=1;i<=t;++i)a+=this.DistanceWidth+this.DataWidth}return a},this.GetXData=function(t,e){var a=this.DistanceWidth,i=this.DataWidth,r=this.ChartBorder.GetLeft()+ia.FrameLeftMargin;if(0==e){if(t<this.ChartBorder.GetLeft()){for(var n=-1,o=this.ChartBorder.GetLeft()-(a/2+i+a);n>-1e4&&!(o<=t);)o-=i+a,--n;return n}for(n=0,o=r+a/2+i+a;n<1e4&&!(o>=t);)o+=i+a,++n;return n}if(t<=this.ChartBorder.GetLeft())return 0;if(t>=this.ChartBorder.GetRight())return this.XPointCount-1;var s=this.ChartBorder.GetRight()-ia.FrameRightMargin;for(n=0,o=r+a/2+i+a;o<s&&n<1e4&&n+1<this.XPointCount&&!(o>=t);)o+=i+a,++n;return n},this.CalculateDataWidth=function(){if(!(this.XPointCount<2)){var t=this.GetFrameWidth()-ia.FrameMargin;if(this.ZoomIndex>=0&&this.LastCalculateStatus.Width==t&&this.LastCalculateStatus.XPointCount==this.XPointCount){var e=this.DistanceWidth/2+ia.FrameLeftMargin+(this.DataWidth+this.DistanceWidth)*(this.XPointCount-1);this.DataWidth,this.DistanceWidth,this.XPointCount;if(e<=t)return}this.LastCalculateStatus.Width=t,this.LastCalculateStatus.XPointCount=this.XPointCount;for(var a=0;a<Ft.length;++a)if((Ft[a][0]+Ft[a][1])*this.XPointCount<t)return this.ZoomIndex=a,this.DataWidth=Ft[a][0],this.DistanceWidth=Ft[a][1],this.TrimKLineDataWidth(t),void D.Chart.Log("[KLineFrame::CalculateDataWidth] ZOOM_SEED, DataWidth, DistanceWidth, XPointCount",Ft[this.ZoomIndex],this.DataWidth,this.DistanceWidth,this.XPointCount);this.ZoomIndex=Ft.length-1,this.DataWidth=t/this.XPointCount,this.DistanceWidth=0}},this.OnSize=function(t){for(var e=this.GetFrameWidth()-ia.FrameMargin,a=0,i=this.DistanceWidth/2+ia.FrameLeftMargin+(this.DataWidth+this.DistanceWidth);i<e;i+=this.DataWidth+this.DistanceWidth,++a);return t.CurCount=this.XPointCount,t.CalcCount=a,t.DataWidth=this.DataWidth,t.DistanceWidth=this.DistanceWidth,t.Changed=!1,this.LastCalculateStatus.Width=e,t.CurCount==t.CalcCount?t:(this.XPointCount=a,this.LastCalculateStatus.XPointCount=this.XPointCount,this.Data&&(this.Data.DataOffset+=t.CurCount-t.CalcCount,this.Data.DataOffset<0&&(this.Data.DataOffset=0),t.Changed=!0),t)},this.SetDataWidth=function(t){var e=Ft.length-1;for(var a in Ft){if(Ft[a][0]<=t){e=parseInt(a)-1;break}}this.ZoomIndex=e,this.DataWidth=Ft[this.ZoomIndex][0],this.DistanceWidth=Ft[this.ZoomIndex][1];for(var i=this.GetFrameWidth()-ia.FrameMargin,r=0,n=this.DistanceWidth/2+ia.FrameLeftMargin+(this.DataWidth+this.DistanceWidth);n<=i;n+=this.DataWidth+this.DistanceWidth,++r);return this.XPointCount=r,this.LastCalculateStatus.XPointCount=this.XPointCount,this.LastCalculateStatus.Width=i,{XPointCount:this.XPointCount,DataWidth:this.DataWidth,DistanceWidth:this.DistanceWidth}},this.TrimKLineDataWidth=function(t){var e=Ft[this.ZoomIndex][0],a=Ft[this.ZoomIndex][1];if(1!=e||0!=a)for(;;){if((this.DistanceWidth+this.DataWidth)*this.XPointCount+this.DistanceWidth>t){this.DistanceWidth-=.01;break}this.DistanceWidth+=.01}else this.DataWidth=t/this.XPointCount},this.IsOverlayMaxMin=function(t){if(!this.ChartKLine)return!1;if(!this.ChartKLine.Max||!this.ChartKLine.Min)return!1;var e=this.Canvas.measureText(t.Text.Value).width+4;"right"===t.Text.TextAlign&&(t.X-=e);var a=this.ChartKLine.Max,i=this.ChartKLine.Min,r=!1,n=!1;if(a.X>=t.X&&a.X<=t.X+e){var o=a.Y+20,s=a.Y-20;(o>=t.Y-20&&o<=t.Y+20||s>=t.Y-20&&s<=t.Y+20)&&(r=!0)}if(1==r)return!0;if(i.X>=t.X&&i.X<=t.X+e){o=i.Y+20,s=i.Y-20;(o>=t.Y-20&&o<=t.Y+20||s>=t.Y-20&&s<=t.Y+20)&&(n=!0)}return r||n},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(null!=this.YSplitOperator&&this.YSplitOperator.Operator(),null!=this.XSplitOperator&&this.XSplitOperator.Operator(),this.Logarithmic&&this.SplitLogarithmicXYCoordinate())},this.SplitLogarithmicXYCoordinate=function(){for(var t=this.Logarithmic.Up,e=this.Logarithmic.Down,a=0,i=0,r=Math.max(t.length,e.length),n=[],o=0;o<r;++o)n[o]=2*o;o=0;for(var s=n.length-1;o<t.length;++o,--s){(p=t[o]).LogHeight=n[s],a+=p.LogHeight,++i}for(o=0,s=n.length-1;o<e.length;++o,--s){(p=e[o]).LogHeight=n[s],a+=p.LogHeight,++i}var h=2*A(),l=this.ChartBorder.GetTopEx(),u=this.ChartBorder.GetBottomEx(),c=u-l,f=(c-a*h)/i;if(f<0&&(f=0,h=c/a),1==this.CoordinateType){var d=l;for(o=e.length-1;o>=0;--o){(p=e[o]).Height=f+h*p.LogHeight,p.Top=d,p.Bottom=p.Top+p.Height,d=p.Bottom}var C=u;for(o=t.length-1;o>=0;--o){(p=t[o]).Height=f+h*p.LogHeight,p.Bottom=C,p.Top=C-p.Height,C=p.Top}}else{for(d=l,o=t.length-1;o>=0;--o){(p=t[o]).Height=f+h*p.LogHeight,p.Top=d,p.Bottom=p.Top+p.Height,d=p.Bottom}for(C=u,o=e.length-1;o>=0;--o){var p;(p=e[o]).Height=f+h*p.LogHeight,p.Bottom=C,p.Top=C-p.Height,C=p.Top}}D.Chart.Log("[KLineFrame::SplitLogarithmicXYCoordinate]",this.Logarithmic)},this.GetYLogarithmicFromData=function(t,e){if(1==this.CoordinateType){if(t<=this.HorizontalMin)return this.ChartBorder.GetTopEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetBottomEx();if(t>this.Logarithmic.OpenPrice){var a=this.Logarithmic.Up;for(var i in a){if(t>=(o=a[i]).Start&&t<=o.End){var r=(o.Bottom-o.Top)*(t-o.Start)/(o.End-o.Start);return o.Top+r}}}else{var n=this.Logarithmic.Down;for(var i in n){if(t>=(o=n[i]).Start&&t<=o.End){r=(o.Bottom-o.Top)*(t-o.Start)/(o.End-o.Start);return o.Top+r}}}}else{if(t<=this.HorizontalMin)return this.ChartBorder.GetBottomEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetTopEx();if(t>this.Logarithmic.OpenPrice){a=this.Logarithmic.Up;for(var i in a){if(t>=(o=a[i]).Start&&t<=o.End){r=(o.Bottom-o.Top)*(t-o.Start)/(o.End-o.Start);return o.Bottom-r}}}else{n=this.Logarithmic.Down;for(var i in n){var o;if(t>=(o=n[i]).Start&&t<=o.End){r=(o.Bottom-o.Top)*(t-o.Start)/(o.End-o.Start);return o.Bottom-r}}}}},this.GetYLogarithmicData=function(t){if(1==this.CoordinateType){if(t<this.ChartBorder.GetTopEx())return this.HorizontalMin;if(t>this.ChartBorder.GetBottomEx())return this.HorizontalMax;var e=this.Logarithmic.Up;for(var a in e){if(t>=(r=e[a]).Top&&t<=r.Bottom)return(t-r.Top)/r.Height*(r.End-r.Start)+r.Start}var i=this.Logarithmic.Down;for(var a in i){if(t>=(r=i[a]).Top&&t<=r.Bottom)return(t-r.Top)/r.Height*(r.End-r.Start)+r.Start}}else{if(t<this.ChartBorder.GetTopEx())return this.HorizontalMax;if(t>this.ChartBorder.GetBottomEx())return this.HorizontalMin;e=this.Logarithmic.Up;for(var a in e){if(t>=(r=e[a]).Top&&t<=r.Bottom)return(r.Bottom-t)/r.Height*(r.End-r.Start)+r.Start}i=this.Logarithmic.Down;for(var a in i){var r;if(t>=(r=i[a]).Top&&t<=r.Bottom)return(r.Bottom-t)/r.Height*(r.End-r.Start)+r.Start}}},this.CalculateCount=function(t){var e=Ft[t][0],a=Ft[t][1],i=this.GetFrameWidth()-ia.FrameMargin-a/2;return parseInt(i/(e+a))},this.ZoomUp=function(t){if(this.ZoomIndex<=0)return!1;if(this.Data.DataOffset<0)return!1;var e=this.Data.Data.length,a=e+this.RightSpaceCount,i=0,r=this.Data.DataOffset+this.XPointCount-1,n=this.Data.DataOffset+t.Index;r>=e&&(i=r-(this.Data.Data.length-1),r=this.Data.Data.length-1,i>this.RightSpaceCount&&(i=this.RightSpaceCount));var o=this.CalculateCount(this.ZoomIndex-1);D.Chart.Log("[KLineFrame::ZoomUp] old status. XPointCount="+o+" ZoomIndex="+this.ZoomIndex+" DataCount= "+this.Data.Data.length+" rightSpaceCount="+i);var s=!1;if(--this.ZoomIndex,1==t.IsLockRight){var h=this.Data.DataOffset+this.XPointCount;if(o>h)o=h,this.XPointCount=o,this.Data.DataOffset=0;else{var l=r-(o-i)+1;this.XPointCount=o,this.Data.DataOffset=l,this.Data.DataOffset<0&&(this.Data.DataOffset=0)}}else if(o>=a)this.Data.DataOffset=0,this.XPointCount=o,s=!0,D.Chart.Log("[KLineFrame::ZoomUp] Show all data. XPointCount="+o+" ZoomIndex="+this.ZoomIndex+" DataCount= "+e);else{l=r-(o-i)+1;if(1==t.ZoomType){var u=this.XPointCount-o+1,c=parseInt(t.Index/this.XPointCount*u);this.Data.DataOffset+c<e&&(l=this.Data.DataOffset+c)}this.XPointCount=o,this.Data.DataOffset=l,this.Data.DataOffset<0&&(this.Data.DataOffset=0),D.Chart.Log("[KLineFrame::ZoomUp] calculate. XPointCount="+o+" ZoomIndex="+this.ZoomIndex+" DataCount= "+e+" DataOffset="+this.Data.DataOffset)}if(this.DataWidth=Ft[this.ZoomIndex][0],this.DistanceWidth=Ft[this.ZoomIndex][1],!s){var f=this.GetFrameWidth()-ia.FrameMargin;this.TrimKLineDataWidth(f)}return this.LastCalculateStatus.XPointCount=this.XPointCount,t.Index=n-this.Data.DataOffset,!0},this.SetXShowCount=function(t){for(var e=-1,a=this.GetFrameWidth()-ia.FrameMargin,i=0;i<Ft.length;++i){var r=Ft[i],n=r[0],o=r[1];a=this.GetFrameWidth()-ia.FrameMargin-o/2;if(parseInt((a-o/2)/(n+o))>=t)return e=i,this.XPointCount=t,this.ZoomIndex=e,this.DataWidth=n,this.DistanceWidth=o,1==n&&0==o&&(this.DataWidth=a/this.XPointCount),this.LastCalculateStatus.XPointCount=this.XPointCount,void(this.LastCalculateStatus.Width=a)}this.XPointCount=t,this.ZoomIndex=Ft.length-1,this.DataWidth=a/this.XPointCount,this.DistanceWidth=0,this.LastCalculateStatus.XPointCount=this.XPointCount,this.LastCalculateStatus.Width=a},this.XCoordinateZoom=function(t){var e=this.XPointCount;if(t){if(this.ZoomIndex<=0)return!1;if(this.Data.DataOffset<0)return!1;var a=this.ZoomIndex-1,i=this.CalculateCount(a),r=this.Data.Data.length;if((n=e-i)<=0)return!1;this.Data.DataOffset+=n,this.Data.DataOffset>r&&(this.Data.DataOffset=0)}else{if(this.ZoomIndex+1>=Ft.length)return!1;if(this.Data.DataOffset<0)return!1;a=this.ZoomIndex+1;var n=(i=this.CalculateCount(a))-e;this.Data.DataOffset-=n,this.Data.DataOffset<0&&(this.Data.DataOffset=0)}this.XPointCount=i,this.ZoomIndex=a,this.DataWidth=Ft[this.ZoomIndex][0],this.DistanceWidth=Ft[this.ZoomIndex][1];var o=this.GetFrameWidth()-ia.FrameMargin;return this.TrimKLineDataWidth(o),this.LastCalculateStatus.XPointCount=this.XPointCount,!0},this.ZoomDown=function(t){if(this.ZoomIndex+1>=Ft.length)return!1;if(this.Data.DataOffset<0)return!1;if(this.Data.DataOffset<=0&&1==t.IsLockRight)return!1;var e=this.Data.Data.length,a=e+this.RightSpaceCount,i=0,r=this.Data.DataOffset+this.XPointCount-1;r>=this.Data.Data.length&&(i=r-(this.Data.Data.length-1),r=this.Data.Data.length-1,i>this.RightSpaceCount&&(i=this.RightSpaceCount));var n=this.CalculateCount(this.ZoomIndex+1),o=this.Data.DataOffset+t.Index;D.Chart.Log("[KLineFrame::ZoomDown] old status. XPointCount="+n+" ZoomIndex="+this.ZoomIndex+" DataCount= "+this.Data.Data.length+" lastCursorIndex="+o+" rightSpaceCount="+i);if(++this.ZoomIndex,1==t.IsLockRight){var s=this.Data.DataOffset+this.XPointCount;if(n>s)n=s,this.XPointCount=n,this.Data.DataOffset=0;else{var h=r-(n-i)+1;this.XPointCount=n,this.Data.DataOffset=h,this.Data.DataOffset<0&&(this.Data.DataOffset=0)}}else if(n>=a)this.XPointCount=n,this.Data.DataOffset=0,D.Chart.Log("[KLineFrame::ZoomDown] Show all data. XPointCount="+n+" ZoomIndex="+this.ZoomIndex+" DataCount= "+e);else{h=r-(n-i)+1;if(1==t.ZoomType){var l=n-this.XPointCount+1,u=parseInt(t.Index/this.XPointCount*l);(h=this.Data.DataOffset-u)+(n-this.RightSpaceCount)>=e&&(h=this.Data.DataOffset-l)}this.XPointCount=n,this.Data.DataOffset=h,this.Data.DataOffset<0&&(this.Data.DataOffset=0),D.Chart.Log("[KLineFrame::ZoomDown] calculate. XPointCount="+n+" ZoomIndex="+this.ZoomIndex+" DataCount= "+e+" DataOffset="+this.Data.DataOffset)}this.DataWidth=Ft[this.ZoomIndex][0],this.DistanceWidth=Ft[this.ZoomIndex][1];var c=this.GetFrameWidth()-ia.FrameMargin;return this.TrimKLineDataWidth(c),this.LastCalculateStatus.XPointCount=this.XPointCount,t.Index=o-this.Data.DataOffset,!0},this.GetFrameWidth=function(){var t;return this.IsHScreen?(t=this.ChartBorder.GetHScreenBorder()).BottomEx-t.TopEx:(t=this.ChartBorder.GetBorder()).RightEx-t.LeftEx},this.DrawCustomHorizontal=function(){if(!this.IsMinSize&&!this.ChartBorder.IsShowTitleOnly&&Te.IsNonEmptyArray(this.CustomHorizontalInfo)){var t=this.CustomHorizontalInfo.slice();t.sort(function(t,e){return e.Value-t.Value});for(var e=new C.default,a=0;a<t.length;++a){var i=t[a];switch(i.Type){case 0:case 1:this.DrawCustomItem(i,e);break;case 2:case 3:case 4:this.DrawCustomItem(i,e)}}}},this.DrawCustomVerticalItem=function(t){this.Canvas.save(),1==t.Data.Line.Type&&this.Canvas.setLineDash([5,5]),this.Canvas.strokeStyle=t.Data.Line.Color,this.Canvas.beginPath(),t.IsHScreen?(this.Canvas.moveTo(t.Top,_(t.X)),this.Canvas.lineTo(t.Bottom,_(t.X))):(this.Canvas.moveTo(_(t.X),t.Top),this.Canvas.lineTo(_(t.X),t.Bottom)),this.Canvas.stroke(),this.Canvas.restore()},this.DrawCustomVertical=function(){if(this.CustomVerticalInfo&&!(this.CustomVerticalInfo.length<=0)&&this.Data){var t=this.IsHScreen,e=this.ChartBorder.GetTopEx(),a=this.ChartBorder.GetBottomEx(),i=this.DataWidth,r=this.DistanceWidth,n=this.ChartBorder.GetLeft()+r/2+2;t&&(n=this.ChartBorder.GetTop()+r/2+2,e=this.ChartBorder.GetLeftEx(),a=this.ChartBorder.GetRightEx());for(var o=0,s=this.Data.DataOffset;s<this.Data.Data.length&&o<this.XPointCount;++s,++o,n+=i+r){var h=this.Data.Data[s];for(var l in this.CustomVerticalInfo){if(0==(c=this.CustomVerticalInfo[l]).Type){if(Te.IsNumber(c.Time)){if(h.Date!=c.Date||h.Time!=c.Time)continue}else if(h.Date!=c.Date)continue;var u={X:(f=n)+(n+i-f)/2,Top:e,Bottom:a,Data:c,IsHScreen:t};this.DrawCustomVerticalItem(u),this.DrawCustomVerticalEvent&&this.DrawCustomVerticalEvent.Callback(this.DrawCustomVerticalEvent,u,this);break}}}for(s=1;o<this.XPointCount;++s,++o,n+=i+r)for(var l in this.CustomVerticalInfo){var c;if(1==(c=this.CustomVerticalInfo[l]).Type&&c.Space==s){var f;u={X:(f=n)+(n+i-f)/2,Top:e,Bottom:a,Data:c,IsHScreen:t};this.DrawCustomVerticalItem(u),this.DrawCustomVerticalEvent&&this.DrawCustomVerticalEvent.Callback(this.DrawCustomVerticalEvent,u,this);break}}}}}function tt(){this.newMethod=$,this.newMethod(),delete this.newMethod,this.ClassName="OverlayKLineFrame",this.MainFrame=null,this.IsShareY=!1,this.IsCalculateYMaxMin=!0,this.RightOffset=50,this.PenBorder=ia.OverlayFrame.BolderPen,this.IsShow=!0,this.IsShowToolbar=!0,this.Title=null,this.TitleColor=ia.OverlayFrame.TitleColor,this.TitleFont=ia.OverlayFrame.TitleFont,this.IsYDrawMainFrame=!1,this.Buttons=[],this.CloseButton=G(ia.Buttons.CloseOverlayIndex),this.ModifyIndexParamButton=G(ia.Buttons.ModifyIndexParam),this.KLineFrame_ReloadResource=this.ReloadResource,this.ReloadResource=function(t){this.KLineFrame_ReloadResource(t),t||(this.CloseButton=G(ia.Buttons.CloseOverlayIndex),this.ModifyIndexParamButton=G(ia.Buttons.ModifyIndexParam),this.PenBorder=ia.OverlayFrame.BolderPen,this.TitleColor=ia.OverlayFrame.TitleColor,this.TitleFont=ia.OverlayFrame.TitleFont)},this.Draw=function(){this.Buttons=[],this.ChartBorder.IsShowTitleOnly||(this.SplitXYCoordinate(),this.IsShow&&(this.DrawVertical(),this.DrawHorizontal(),this.DrawTitle()),this.SizeChange=!1,this.XYSplit=!1)},this.DrawTitle=function(){if(this.Title){var t=this.ChartBorder.GetBorder(),e=this.ChartBorder.GetTopTitle(),a=t.Bottom,i=t.Right;i+=this.RightOffset,this.Canvas.fillStyle=this.TitleColor,this.Canvas.font=this.TitleFont,this.Canvas.textAlign="center",this.Canvas.textBaseline="top";var r=i-2,n=e+(a-e)/2;this.Canvas.save(),this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.Title,0,0),this.Canvas.restore()}},this.GetScaleTextWidth=function(){if(!this.IsShow)return null;this.ChartBorder.GetBorder();var t=A();if(this.IsHScreen)var e=this.ChartBorder.Bottom>10*t&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1];else e=this.ChartBorder.Right>10&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1];if(!e)return null;for(var a={Left:null,Right:0},i=0;i<this.HorizontalInfo.length;++i){var r=null,n=this.HorizontalInfo[i];n&&(null!=n.Message[1]&&e&&(null!=n.Font&&(this.Canvas.font=n.Font),r=this.Canvas.measureText(n.Message[1]).width,a.Right<r&&(a.Right=r)))}return{TextWidth:a}},this.SplitXYCoordinate=function(){if(0!=this.XYSplit)if(this.IsShareY){for(var t in this.HorizontalMax=this.MainFrame.HorizontalMax,this.HorizontalMin=this.MainFrame.HorizontalMin,this.HorizontalInfo=[],this.MainFrame.HorizontalInfo){var e=this.MainFrame.HorizontalInfo[t];this.HorizontalInfo.push(e)}this.CoordinateType=this.MainFrame.CoordinateType}else null!=this.YSplitOperator&&this.YSplitOperator.Operator()},this.DrawHorizontal=function(){var t=this.ChartBorder.GetBorder(),e=(t.Left,t.Right),a=t.Bottom,i=this.ChartBorder.GetTopTitle(),r=this.ChartBorder.Right;e+=this.RightOffset;for(var n=null,o=this.HorizontalInfo.length-1;o>=0;--o){var s=this.HorizontalInfo[o],h=this.GetYFromData(s.Value);if(!(null!=h&&Math.abs(h-n)<this.MinYDistance)){if(this.Canvas.textBaseline=h>=a-2?"bottom":h<=i+2?"top":"middle",this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(e-2,_(h)),this.Canvas.lineTo(e,_(h)),this.Canvas.stroke(),null!=s.Message[1]&&r>10){null!=s.Font&&(this.Canvas.font=s.Font);var l=s.Message[1];Array.isArray(s.Message[1])&&(l=s.Message[1][0]),this.Canvas.fillStyle=s.TextColor,this.Canvas.textAlign="left",this.Canvas.fillText(l,e+2,h)}n=h}}},this.DrawVertical=function(){var t=this.ChartBorder.GetBorder(),e=t.TopEx,a=t.Right,i=t.BottomEx;a+=this.RightOffset,this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(_(a),_(e)),this.Canvas.lineTo(_(a),_(i)),this.Canvas.stroke()},this.DrawToolbar=function(t,e,a){if(this.Buttons=[],1!=e&&!this.ChartBorder.IsShowTitleOnly&&!(this.ChartBorder.TitleHeight<5)&&this.IsShowToolbar){var i=this.ChartBorder.GetBorder(),r=i.Top+this.ChartBorder.TitleHeight/2,n=i.Right+this.RightOffset+this.CloseButton.MerginLeft,o=[];o.push({ID:b.MODIFY_OVERLAY_INDEX_PARAM,Style:this.ModifyIndexParamButton}),o.push({ID:b.CLOSE_OVERLAY_INDEX,Style:this.CloseWindowButton});for(var s=0;s<o.length;++s){var h=o[s],l=h.Style.Size,u=l+"px "+h.Style.Family,c={Left:n,Top:r-l/2,Right:n+l+h.Style.MerginLeft,Bottom:r+l/2,Width:l+h.Style.MerginLeft,Height:l},f=this.CloseButton.Color;t&&t.X>=c.Left&&t.X<c.Right&&t.Y>=c.Top&&t.Y<=c.Bottom&&(f=h.Style.MoveOnColor,a&&(a.MouseOnToolbar={Rect:c,Item:h,Frame:this,Point:{X:t.X,Y:t.Y}})),this.Canvas.fillStyle=f,this.Canvas.font=u,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(h.Style.Text,n,r),this.Buttons.push({ID:h.ID,Rect:c}),n=c.Right}}},this.DrawCustomItem=function(t,e){if((this.IsShow||this.IsYDrawMainFrame)&&(t.Message[1]||t.Message[0]))if(t.Value>this.HorizontalMax||t.Value<this.HorizontalMin)this.SendDrawCountDownEvent({IsShow:!1});else{var a=this.GetBorder(),i=a.Left,r=a.Right+this.RightOffset;this.IsYDrawMainFrame&&(r=a.Right);var n=a.Bottom,o=a.Top,s=this.ChartBorder.Right,h=this.ChartBorder.Left;this.ChartBorder.TitleHeight;this.IsHScreen&&(h=this.ChartBorder.Top,s=this.ChartBorder.Bottom,o=a.Top,n=a.Bottom);var l,u=A(),c=18*u,f=c,d=this.GetYFromData(t.Value),C=0;if(t.ExtendData&&t.ExtendData.Custom){var p=t.ExtendData.Custom;Te.IsNumber(p.Position)&&(C=p.Position),p.EmptyBGColor&&(l=p.EmptyBGColor)}if(t.Message[0])if(h<10||1==C){null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var m=(F=this.GetCustomItemTextInfo(t,!0,u)).MaxWidth;f=(E=this.GetFontHeight())>c?E:c;var D=t.LineColor;(M=this.RGBToStruct(t.LineColor))&&(D="rgba("+M.R+", "+M.G+", "+M.B+", "+ia.FrameLatestPrice.BGAlpha+")");for(var v=d,g=0;g<F.Text.length;++g){var S=F.Text[g];if(this.IsHScreen){var T=o,I=v-f/2-1*u;this.Canvas.fillStyle=D,this.Canvas.fillRect(I,T,f,S.Width),this.DrawHScreenText({X:v,Y:T},{Text:S.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==g&&this.DrawLine(T+S.Width,n,v,t.LineColor,t.LineType,t),v-=f+1*u}else if(1===S.Type);else{T=v-f/2-1*u,I=i+1*u;this.Canvas.fillStyle=D,this.Canvas.fillRect(I,T,S.Width,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(S.Text,I+1*u,v),0==g&&this.DrawLine(I+S.Width,r,v,t.LineColor,t.LineType,t),v+=f+1*u}}}else{null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle";m=(F=this.GetCustomItemTextInfo(t,!0,u)).MaxWidth;f=(E=this.GetFontHeight())>c?E:c;for(v=d,g=0;g<F.Text.length;++g){S=F.Text[g];if(this.IsHScreen){if(0==g)T=o-S.Width;else T=o-m;I=v-f/2-1*u;this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(I,T,f,S.Width),this.DrawHScreenText({X:v,Y:T},{Text:S.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==g&&this.DrawLine(T+S.Width,n,v,t.LineColor,t.LineType,t),v-=f+1*u}else{T=v-f/2-1*u;if(0==g){var y=i-S.Width;I=i}else y=i-m,I=i-(m-S.Width);l?(this.Canvas.fillStyle=l,this.Canvas.fillRect(y-1,T,S.Width+1,f),this.Canvas.strokeStyle=t.LineColor,this.Canvas.strokeRect(_(y-1),_(T),_(S.Width+1),_(f)),this.Canvas.fillStyle=t.LineColor,this.Canvas.fillText(S.Text,I-1*u,v)):(this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(y,T,S.Width,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(S.Text,I-1*u,v)),0==g&&this.DrawLine(i,r,v,t.LineColor,t.LineType,t),v+=f+1*u}}}else if(t.Message[1])if(s<10||1==C){null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";m=(F=this.GetCustomItemTextInfo(t,!1,u)).MaxWidth;f=(E=this.GetFontHeight())>c?E:c;D=t.LineColor;(M=this.RGBToStruct(t.LineColor))&&(D="rgba("+M.R+", "+M.G+", "+M.B+", "+ia.FrameLatestPrice.BGAlpha+")");for(v=d,g=0;g<F.Text.length;++g){S=F.Text[g];if(this.IsHScreen){T=n-S.Width,I=v-f/2-1*u;this.Canvas.fillStyle=D,this.Canvas.fillRect(I,T,f,m),this.DrawHScreenText({X:v,Y:T},{Text:S.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==g&&this.DrawLine(o,T,v,t.LineColor,t.LineType,t),v-=f+1*u}else if(1===S.Type){if(this.GetEventCallback){var x={Top:T=v-f/2-1*u,Right:r,Height:null,IsShow:!0,BGColor:t.LineColor,TextColor:t.TextColor,PixelTatio:u,Position:"Right",IsInside:!0};this.SendDrawCountDownEvent(x)&&Te.IsPlusNumber(x.Height)&&(v+=f+1*u)}}else{T=v-f/2-1*u,I=r-S.Width;this.Canvas.fillStyle=D,this.Canvas.fillRect(I,T,m,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(S.Text,I+1*u,v),0==g&&this.DrawLine(i,I,v,t.LineColor,t.LineType,t),v+=f+1*u}}if((3==t.Type||4==t.Type)&&t.Title){var w=this.Canvas.measureText(t.Title).width+2*u;if(this.IsHScreen){T=n-S.Width-w,I=d-f/2-1*u;this.Canvas.fillStyle=D,this.Canvas.fillRect(I,T,f,w),this.DrawHScreenText({X:d,Y:T},{Text:t.Title,Color:t.TextColor,XOffset:1*u,YOffset:2*u})}else{T=d-f/2-1*u,I=r-m-w-1*u;this.Canvas.fillStyle=D,this.Canvas.fillRect(I,T,w,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Title,I+1*u,d)}}}else{null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var F,E;m=(F=this.GetCustomItemTextInfo(t,!1,u)).MaxWidth;f=(E=this.GetFontHeight())>c?E:c;var b=null;e&&e.has(3)&&(b=e.get(3));v=d;var L={};for(g=0;g<F.Text.length;++g){S=F.Text[g];if(this.IsHScreen){T=n,I=v-f/2-1*u;this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(I,T,f,S.Width),this.DrawHScreenText({X:v,Y:T},{Text:S.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==g&&this.DrawLine(o,T,v,t.LineColor,t.LineType,t),v-=f+1*u}else if(1===S.Type){if(this.GetEventCallback){x={Top:T=v-f/2-1*u,Left:r,Right:this.ChartBorder.GetChartWidth(),Height:null,IsShow:!0,BGColor:t.LineColor,TextColor:t.TextColor,PixelTatio:u,Position:"Right",IsInside:!1};this.SendDrawCountDownEvent(x)&&Te.IsPlusNumber(x.Height)&&(v+=f+1*u)}}else{T=v-f/2-1*u;if(0==g){I=r;L.Left=I,b&&T<b.Rect.Bottom&&(T=(v=b.Rect.Bottom)-f/2-1*u)}else I=r+m-S.Width;l?(this.Canvas.fillStyle=l,this.Canvas.fillRect(I,T,S.Width+1,f),this.Canvas.strokeStyle=t.LineColor,this.Canvas.strokeRect(_(I),_(T),k(S.Width+1),k(f)),this.Canvas.fillStyle=t.LineColor,this.Canvas.fillText(S.Text,I+2*u,v)):(this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(I,T,S.Width,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(S.Text,I+1*u,v)),0==g&&this.DrawLine(i,r,d,t.LineColor,t.LineType,t),v+=f+1*u,L.Bottom=v}}if(e&&Te.IsNumber(L.Left)&&Te.IsNumber(L.Bottom)&&e.set(3,{Rect:L,Item:t}),(3==t.Type||4==t.Type)&&t.Title){var M;D=t.LineColor;(M=this.RGBToStruct(t.LineColor))&&(D="rgba("+M.R+", "+M.G+", "+M.B+", "+ia.FrameLatestPrice.BGAlpha+")");w=this.Canvas.measureText(t.Title).width+2*u;if(this.IsHScreen){T=n-w,I=d-f/2-1*u;this.Canvas.fillStyle=D,this.Canvas.fillRect(I,T,f,w),this.DrawHScreenText({X:d,Y:T},{Text:t.Title,Color:t.TextColor,XOffset:1*u,YOffset:2*u})}else{T=d-f/2-1*u,I=r-w-1*u;this.Canvas.fillStyle=D,this.Canvas.fillRect(I,T,w,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Title,I+1*u,d)}}}}}}function et(){this.newMethod=$,this.newMethod(),delete this.newMethod,this.ClassName="KLineHScreenFrame",this.IsHScreen=!0,this.DrawTitleBG=function(){if(!(this.ChartBorder.TitleHeight<=0)){var t=this.ChartBorder.GetHScreenBorder(),e=_(t.RightTitle),a=_(t.Top),i=_(t.Bottom),r=this.ChartBorder.TitleHeight,n=i-a;this.Canvas.fillStyle=this.TitleBGColor,this.Canvas.fillRect(e,a,r,n)}},this.DrawToolbar=function(){},this.GetYFromData=function(t,e){var a=this.ChartBorder.GetHScreenBorder();if(!1===e){var i=(a.RightEx-a.LeftEx)*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return a.LeftEx+i}if(t<=this.HorizontalMin)return a.LeftEx;if(t>=this.HorizontalMax)return a.RightEx;i=(a.RightEx-a.LeftEx)*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return a.LeftEx+i},this.DrawHorizontal=function(){for(var t=this.ChartBorder.GetHScreenBorder(),e=t.Top,a=t.Bottom,i=this.ChartBorder.Top,r=this.ChartBorder.Bottom,n=t.Left,o=(t.Right,null),s=A(),h=i>10*s&&!0===this.IsShowYText[0]&&2!=this.YTextPosition[0],l=r>10*s&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1],u=this.HorizontalInfo.length-1;u>=0;--u){var c=this.HorizontalInfo[u],f=this.GetYFromData(c.Value);if(!(null!=f&&Math.abs(f-o)<this.MinYDistance)){if(f!=n&&(2==c.LineType?(this.Canvas.strokeStyle=c.LineColor,this.Canvas.setLineDash([5*s,5*s]),this.Canvas.beginPath(),this.Canvas.moveTo(_(f),e),this.Canvas.lineTo(_(f),a),this.Canvas.stroke(),this.Canvas.setLineDash([])):c.LineType>0&&(this.Canvas.strokeStyle=c.LineColor,ia.FrameYLineDash?(this.Canvas.setLineDash(ia.FrameYLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(_(f),e),this.Canvas.lineTo(_(f),a),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.beginPath(),this.Canvas.moveTo(_(f),e),this.Canvas.lineTo(_(f),a),this.Canvas.stroke()))),null!=c.Message[0]&&h){null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="right",this.Canvas.textBaseline="middle";var d=f,C=e;this.Canvas.save(),this.Canvas.translate(d,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(c.Message[0],-2,0),this.Canvas.restore()}if(null!=c.Message[1]&&l){var p;null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",p=Array.isArray(c.Message[1])?c.Message[1][0]:c.Message[1];d=f,C=a;this.Canvas.save(),this.Canvas.translate(d,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(p,2,0),this.Canvas.restore()}o=f}}},this.DrawInsideHorizontal=function(){if(!this.IsMinSize&&(!1!==this.IsShowYText[0]||!1!==this.IsShowYText[1])){var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRightEx(),a=this.ChartBorder.GetTop(),i=this.ChartBorder.GetBottom(),r=this.ChartBorder.Top,n=this.ChartBorder.Bottom,o=(this.ChartBorder.TitleHeight,(r<10*(h=A())||2==this.YTextPosition[0])&&!0===this.IsShowYText[0]),s=(n<10*h||2==this.YTextPosition[1])&&!0===this.IsShowYText[1];if(o||s)for(var h=A(),l=null,u=this.HorizontalInfo.length-1;u>=0;--u){var c=this.HorizontalInfo[u],f=this.GetYFromData(c.Value);if(!(null!=f&&null!=l&&Math.abs(f-l)<this.MinYDistance)){if(null!=c.Message[0]&&o){null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline=f>=e-2?"top":f<=t+2?"bottom":"middle";this.Canvas.textBaseline,this.Canvas.textAlign,this.Canvas.font,c.Message[0];var d=f,C=a;this.Canvas.save(),this.Canvas.translate(d,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(c.Message[0],-2,0),this.Canvas.restore()}if(null!=c.Message[1]&&s){if(null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="right",this.Canvas.textBaseline=f>=e-2?"top":f<=t+2?"bottom":"middle",Array.isArray(c.Message[1]))var p=c.Message[1][0];else p=c.Message[1];this.Canvas.measureText(p).width,this.Canvas.textBaseline,this.Canvas.textAlign,this.Canvas.font,d=f,C=i;this.Canvas.save(),this.Canvas.translate(d,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(p,-2,0),this.Canvas.restore()}l=f}}}},this.GetXFromIndex=function(t,e){if(!1===e){var a=this.ChartBorder.GetHScreenBorder();if(t>=0)for(var i=a.TopEx+ia.FrameLeftMargin+this.DistanceWidth/2+this.DataWidth/2,r=1;r<=t;++r)i+=this.DistanceWidth+this.DataWidth;else{i=a.TopEx-(this.DistanceWidth/2+this.DataWidth+this.DistanceWidth);var n=Math.abs(t);for(r=1;r<n;++r)i-=this.DistanceWidth+this.DataWidth}}else{t<0&&(t=0),t>this.xPointCount-1&&(t=this.xPointCount-1);for(i=(a=this.ChartBorder.GetHScreenBorder()).TopEx+ia.FrameLeftMargin+this.DistanceWidth/2+this.DataWidth/2,r=1;r<=t;++r)i+=this.DistanceWidth+this.DataWidth}return i},this.DrawVertical=function(){var t=this.ChartBorder.GetHScreenBorder(),e=t.Left,a=t.RightTitle,i=t.Bottom,r=A(),n=null;for(var o in this.VerticalInfo){var s=this.GetXFromIndex(this.VerticalInfo[o].Value);if(s>=i)break;if(!(null!=n&&Math.abs(s-n)<80)){var h=this.VerticalInfo[o];if(2==h.LineType?(this.Canvas.strokeStyle=this.VerticalInfo[o].LineColor,this.Canvas.setLineDash([5*r,5*r]),this.Canvas.beginPath(),this.Canvas.moveTo(e,_(s)),this.Canvas.lineTo(a,_(s)),this.Canvas.stroke(),this.Canvas.setLineDash([])):h.LineType>0&&(this.Canvas.strokeStyle=this.VerticalInfo[o].LineColor,ia.FrameXLineDash?(this.Canvas.setLineDash(ia.FrameXLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(e,_(s)),this.Canvas.lineTo(a,_(s)),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.beginPath(),this.Canvas.moveTo(e,_(s)),this.Canvas.lineTo(a,_(s)),this.Canvas.stroke())),null!=this.VerticalInfo[o].Message[0]){null!=this.VerticalInfo[o].Font&&(this.Canvas.font=this.VerticalInfo[o].Font),this.Canvas.fillStyle=this.VerticalInfo[o].TextColor,s<this.Canvas.measureText(this.VerticalInfo[o].Message[0]).width/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top"):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top");var l=e,u=s;this.Canvas.save(),this.Canvas.translate(l,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.VerticalInfo[o].Message[0],0,this.XBottomOffset),this.Canvas.restore()}n=s}}},this.GetYData=function(t,e){var a=this.ChartBorder.GetHScreenBorder();if(!1===e){var i=a.RightEx-a.LeftEx;return(t-a.LeftEx)/i*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin}if(t<a.LeftEx)return this.HorizontalMin;if(t>a.RightEx)return this.HorizontalMax;i=a.RightEx-a.LeftEx;return(t-a.LeftEx)/i*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin},this.GetXData=function(t,e){var a=this.ChartBorder.GetHScreenBorder(),i=a.TopEx+ia.FrameLeftMargin,r=a.BottomEx,n=this.DistanceWidth,o=this.DataWidth;if(0==e){if(t<i){for(var s=-1,h=i-(n/2+o+n);s>-1e4&&!(h<=t);)h-=o+n,--s;return s}for(s=0,h=i+n/2+o+n;s<1e4&&!(h>=t);)h+=o+n,++s;return s}if(t<=a.TopEx)return 0;if(t>=a.BottomEx)return this.XPointCount-1;for(s=0,h=i+n/2+o+n;h<r&&s<1e4&&s+1<this.XPointCount&&!(h>t);)h+=o+n,++s;return s},this.DrawBottons=function(){}}function at(){this.newMethod=et,this.newMethod(),delete this.newMethod,this.ClassName="OverlayKLineHScreenFrame",this.MainFrame=null,this.IsShareY=!1,this.IsCalculateYMaxMin=!0,this.RightOffset=50,this.PenBorder=ia.OverlayFrame.BolderPen,this.IsShow=!0,this.Title=null,this.TitleColor=ia.OverlayFrame.TitleColor,this.TitleFont=ia.OverlayFrame.TitleFont,this.Draw=function(){this.SplitXYCoordinate(),this.IsShow&&(this.DrawVertical(),this.DrawHorizontal(),this.DrawTitle()),this.SizeChange=!1,this.XYSplit=!1},this.DrawTitle=function(){},this.SplitXYCoordinate=function(){if(0!=this.XYSplit)if(this.IsShareY)for(var t in this.HorizontalMax=this.MainFrame.HorizontalMax,this.HorizontalMin=this.MainFrame.HorizontalMin,this.HorizontalInfo=[],this.MainFrame.HorizontalInfo){var e=this.MainFrame.HorizontalInfo[t];this.HorizontalInfo.push(e)}else null!=this.YSplitOperator&&this.YSplitOperator.Operator()},this.DrawHorizontal=function(){},this.DrawVertical=function(){},this.GetScaleTextWidth=function(){return{TextWidth:0}}}function it(){this.Frame,this.Height,this.OverlayIndex=[],this.Interval=60}function rt(){this.Frame,this.ChartPaint=[],this.Identify=P(),this.Scprit,this.UpdateFrameMaxMin=function(){var t={Max:null,Min:null};if(this.Frame.IsShareY)this.Frame.XYSplit=!0;else{if(this.Frame.YSpecificMaxMin)t.Max=this.Frame.YSpecificMaxMin.Max,t.Min=this.Frame.YSpecificMaxMin.Min;else for(var e in this.ChartPaint){var a=this.ChartPaint[e].GetMaxMin();Te.IsNumber(a.Max)&&(null==t.Max||t.Max<a.Max)&&(t.Max=a.Max),Te.IsNumber(a.Min)&&(null==t.Min||t.Min>a.Min)&&(t.Min=a.Min)}null!=t.Max&&null!=t.Min&&(this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min,this.Frame.XYSplit=!0)}}}function nt(){this.SubFrame=new Array,this.SizeChange=!0,this.ChartBorder,this.Canvas,this.ScreenImageData,this.Data,this.Position,this.SizeChange=!0,this.MinSubFrameHeight=ia.DragSubFrameBorder.MinFrameHeight,this.DragBorderHeight=ia.DragSubFrameBorder.TopBorderHeight,this.AutoLeftBorder=null,this.AutoRightBorder=null,this.OverlayBlankWidth=40,this.AuotRightWidth,this.ZoomWindowsInfo=null,this.ZoomStartWindowIndex=1,this.GetExtendChartByClassName,this.OnMoveFromeBorder=function(t,e){if(this.SubFrame.length<=0)return!1;for(var a=this.SubFrame[t],i=null,r=t+1;r<this.SubFrame.length;++r){var n=this.SubFrame[r];if(n.Height>0){i=n;break}}if(!a||!i)return!1;var o=a.Frame.ChartBorder.Bottom,s=i.Frame.ChartBorder.Top;a.Frame.ChartBorder.Bottom-=e,i.Frame.ChartBorder.Top+=e;var h=a.Frame.ChartBorder.GetHeightEx(),l=i.Frame.ChartBorder.GetHeightEx();return!(h<this.MinSubFrameHeight&&e<0||l<this.MinSubFrameHeight&&e>0)||(a.Frame.ChartBorder.Bottom=o,i.Frame.ChartBorder.Top=s,!1)},this.ReDrawToolbar=function(){for(var t in this.SubFrame)this.SubFrame[t].Frame.ReDrawToolbar=!0},this.SetFrameBorderSizeChange=function(){var t=this.SubFrame[0];if(t&&t.Frame){var e=t.Frame.YSplitOperator;e&&2==e.CoordinateType&&(t.Frame.XYSplit=!0)}},this.CancelZoomUpDownFrameY=function(t){var e=t.Index;if(this.SubFrame.length<=0)return!1;if(!this.SubFrame[e])return!1;var a=this.SubFrame[e],i=a.Frame,r=i.YSplitOperator;if(r.FixedYMaxMin){for(var n in r.FixedYMaxMin=null,r.EnableZoomUpDown=!1,i.XYSplit=!0,a.OverlayIndex){var o=a.OverlayIndex[n];o.Frame.IsShareY&&(o.Frame.XYSplit=!0)}return D.Chart.Log("[HQTradeFrame::CancelZoomUpDownFrameY]"),!0}return!1},this.OnZoomUpDownFrameY=function(t,e){var a=t.Index;if(this.SubFrame.length<=0)return!1;if(!this.SubFrame[a])return!1;var i=this.SubFrame[a],r=i.Frame,n=r.ChartBorder.GetTopEx(),o=r.ChartBorder.GetBottomEx(),s=r.HorizontalMax,h=r.HorizontalMin,l=(s-h)*Math.abs(e)/(o-n),u=r.YSplitOperator,c={Max:s,Min:h};if(1==t.Position){var f=e>0?-l:l;c.Max+=f}else if(2==t.Position){f=e>0?-l:l;c.Min+=f}else{if(0!=t.Position)return!1;f=e>0?l:-l;c.Max+=f,c.Min-=f}if(c.Max>c.Min){for(var d in u.FixedYMaxMin=c,u.EnableZoomUpDown=!0,r.XYSplit=!0,i.OverlayIndex){var C=i.OverlayIndex[d];C.Frame.IsShareY&&(C.Frame.XYSplit=!0)}return D.Chart.Log("[HQTradeFrame::OnZoomUpDownFrameY] Max="+c.Max+", Min="+c.Min),!0}return!1},this.OnUpDonwFrameY=function(t,e){var a=t.Index;if(this.SubFrame.length<=0)return!1;if(!this.SubFrame[a])return!1;var i=this.SubFrame[a],r=i.Frame,n=r.ChartBorder.GetTopEx(),o=r.ChartBorder.GetBottomEx(),s=r.YSplitOperator;if(!s)return!1;var h=r.HorizontalMax,l=r.HorizontalMin,u=(h-l)*Math.abs(e)/(o-n),c=e>0?-u:u,f={Max:h,Min:l};for(var d in f.Max-=c,f.Min-=c,s.FixedYMaxMin=f,s.EnableZoomUpDown=!0,r.XYSplit=!0,i.OverlayIndex){var C=i.OverlayIndex[d];C.Frame.IsShareY&&(C.Frame.XYSplit=!0)}return D.Chart.Log("[HQTradeFrame::OnUpDonwFrameY] Max="+f.Max+", Min="+f.Min+", yMove="+e+", moveStep="+u),!0},this.ClearUpDonwFrameYData=function(t){if(!(this.SubFrame.length<=0))if(t){var e=t.Index;if(e<0||e>=this.SubFrame.length)return;if(!(i=this.SubFrame[e])||!i.Frame||!i.Frame.YSplitOperator)return;1==(r=i.Frame.YSplitOperator).EnableZoomUpDown&&(r.FixedYMaxMin=null)}else for(var a=0;a<this.SubFrame.length;++a){var i,r;if((i=this.SubFrame[a])&&i.Frame&&i.Frame.YSplitOperator)1==(r=i.Frame.YSplitOperator).EnableZoomUpDown&&(r.FixedYMaxMin=null)}},this.ClearCoordinateText=function(t){for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];a.Frame&&a.Frame.ClearCoordinateText(t)}},this.RestoreIndexWindows=function(){if(!this.ZoomWindowsInfo)return!1;this.SubFrame[this.ZoomWindowsInfo.FrameID];for(var t=this.ZoomStartWindowIndex;t<this.ZoomWindowsInfo.Data.length;++t){var e=this.ZoomWindowsInfo.Data[t],a=this.SubFrame[t];a.Height=e.Height,a.Frame.IsMinSize=!1,a.Frame.ReDrawToolbar=!0,a.Frame.XSplitOperator.ShowText=e.ShowXText,a.Frame.XYSplit=!0;for(var i=0;i<a.OverlayIndex.length;++i){a.OverlayIndex[i].Frame.IsMinSize=!1}}return this.ZoomWindowsInfo=null,!0},this.ZoomIndexWindow=function(t,e){var a=this.SubFrame[t];if(!a)return!1;if(a.Frame.ChartBorder.IsShowTitleOnly=!1,this.ZoomWindowsInfo)return this.RestoreIndexWindows();for(var i={FrameID:t,Data:[]},r=0;r<this.SubFrame.length;++r){var n=this.SubFrame[r];i.Data[r]={Height:n.Height,ShowXText:n.Frame.XSplitOperator.ShowText}}this.ZoomWindowsInfo=i;var o=0;for(r=this.ZoomStartWindowIndex;r<this.SubFrame.length;++r){var s=(n=this.SubFrame[r]).Frame;if(s.XYSplit=!0,o+=n.Height,r!=t){n.Height=0,s.IsMinSize=!0,s.HideToolbar(),s.XSplitOperator.ShowText=!1;for(var h=0;h<n.OverlayIndex.length;++h){n.OverlayIndex[h].Frame.IsMinSize=!0}}}return a.Height=o,a.Frame.XSplitOperator.ShowText=!0,!0},this.SaveSubFrameHeightRate=function(){for(var t=this.ChartBorder.GetHeight(),e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e],i=a.Frame.ChartBorder.GetHeight()/t*100;a.Height=i}},this.ShowIndexTitleOnly=function(t,e){var a=this.SubFrame[t];if(!a&&!a.Frame)return!1;var i=a.Frame;if(!i.ChartBorder)return!1;var r=i.ChartBorder;return!(r.TitleHeight<10)&&(this.RestoreIndexWindows(),r.IsShowTitleOnly?r.IsShowTitleOnly=!1:r.IsShowTitleOnly=!0,!0)},this.CalculateChartBorder=function(){if(!(this.SubFrame.length<=0)){for(var t=this.ChartBorder.GetTop(),e=this.ChartBorder.GetHeight(),a=0,i=0,r=0;r<this.SubFrame.length;++r){(o=(n=this.SubFrame[r]).Frame)&&o.ChartBorder&&o.ChartBorder.IsShowTitleOnly&&n.Height>0?i+=o.ChartBorder.TitleHeight:a+=n.Height}e-=i;for(r=0;r<this.SubFrame.length;++r){var n,o=(n=this.SubFrame[r]).Frame;if(n.Frame.ChartBorder.Top=t,n.Frame.ChartBorder.Left=this.ChartBorder.Left,n.Frame.ChartBorder.Right=this.ChartBorder.Right,n.Frame.ChartBorder.LeftExtendWidth=this.ChartBorder.LeftExtendWidth,n.Frame.ChartBorder.RightExtendWidth=this.ChartBorder.RightExtendWidth,o&&o.ChartBorder&&o.ChartBorder.IsShowTitleOnly&&n.Height>0){var s=n.Frame.ChartBorder.Top+o.ChartBorder.TitleHeight;n.Frame.ChartBorder.Bottom=this.ChartBorder.GetChartHeight()-s,t=s}else{s=e*(n.Height/a)+t;n.Frame.ChartBorder.Bottom=this.ChartBorder.GetChartHeight()-s,t=s}}}},this.SetExtendWidth=function(t){if(t){var e=null,a=null;for(var i in Te.IsNumber(t.Left)&&(e=t.Left,this.ChartBorder.LeftExtendWidth=e),Te.IsNumber(t.Right)&&(a=t.Right,this.ChartBorder.RightExtendWidth=a),this.SubFrame){var r=this.SubFrame[i];null!=e&&(r.Frame.ChartBorder.LeftExtendWidth=e),null!=a&&(r.Frame.ChartBorder.RightExtendWidth=a)}}},this.CalculateChartBorder2=function(){if(!(this.SubFrame.length<=0)){var t=this.ChartBorder.Top,e=this.ChartBorder.Bottom,a=this.ChartBorder.GetHeight(),i=0;for(var r in this.SubFrame){i+=(o=this.SubFrame[r]).Height}var n=0;for(var r in this.SubFrame){var o;(o=this.SubFrame[r]).Frame.ChartBorder.Top=t,o.Frame.ChartBorder.Left=this.ChartBorder.Left,o.Frame.ChartBorder.Right=this.ChartBorder.Right,o.Frame.ChartBorder.X=this.ChartBorder.X,o.Frame.ChartBorder.Y=this.ChartBorder.Y,o.Frame.ChartBorder.Width=this.ChartBorder.Width,o.Frame.ChartBorder.Height=this.ChartBorder.Height;var s=a*(o.Height/i);n+=s,e=this.ChartBorder.Bottom+(a-n),o.Frame.ChartBorder.Bottom=e,t+=s}}},this.GetScaleTextWidth=function(){for(var t={Left:null,Right:null,OverlayRight:0},e=[],a=0;a<this.SubFrame.length;++a){if(!((C=this.SubFrame[a]).Height<=0)){var i=C.Frame;if(i&&i.XSplitOperator){var r=i.HorizontalMax,n=i.HorizontalMin;i.YSplitOperator.Operator();var o=i.GetScaleTextWidth();if(i.HorizontalMax=r,i.HorizontalMin=n,o&&o.TextWidth){var s=o.TextWidth;Te.IsNumber(s.Left)&&(null==t.Left||t.Left<s.Left)&&(t.Left=s.Left),Te.IsNumber(s.Right)&&(null==t.Right||t.Right<s.Right)&&(t.Right=s.Right)}if(Te.IsNonEmptyArray(C.OverlayIndex))for(var h=0,l=0;h<C.OverlayIndex.length;++h){var u=C.OverlayIndex[h];if(u.Frame){r=u.Frame.HorizontalMax,n=u.Frame.HorizontalMin;u.Frame.YSplitOperator.Operator();o=u.Frame.GetScaleTextWidth();if(u.Frame.HorizontalMax=r,u.Frame.HorizontalMin=n,u.RightWidth={Index:-1,Width:0},o&&o.TextWidth){s=o.TextWidth;Te.IsNumber(s.Right)&&(u.RightWidth.Index=l,u.RightWidth.Width=s.Right,e[l]?e[l][a]=u.RightWidth:(e[l]=[],e[l][a]=u.RightWidth),++l)}}}}}}var c=[];for(a=0;a<e.length;++a){var f=e[a],d=0;for(h=0;h<f.length;++h){var C;if(f[h])d<(C=f[h].Width)&&(d=C)}d>0&&(d+=this.OverlayBlankWidth);for(h=0;h<f.length;++h)f[h]&&(f[h].Width=d);c[a]=d}for(a=0;a<c.length;++a){o=c[a];Te.IsNumber(o)&&(t.OverlayRight+=o)}return t},this.IsFrameXYSplit=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];if(e.Frame.XYSplit)return!0;for(var a=0;a<e.OverlayIndex.length;++a){if(e.OverlayIndex[a].Frame.XYSplit)return!0}}return!1},this.Draw=function(t){!0===this.SizeChange&&this.CalculateChartBorder();var e=!1;if(t&&!0===t.IsEnableSplash&&(e=!0),0==e&&(this.AutoLeftBorder||this.AutoRightBorder)&&this.IsFrameXYSplit()){this.AutoRightOverlayWidth=[];var a=this.GetScaleTextWidth();if(Te.IsNumber(a.Left)&&this.AutoLeftBorder){var i=0;Te.IsNumber(this.AutoLeftBorder.Blank)&&(i=this.AutoLeftBorder.Blank);var r=a.Left+i;Te.IsNumber(this.AutoLeftBorder.MinWidth)&&this.AutoLeftBorder.MinWidth>r&&(r=this.AutoLeftBorder.MinWidth),this.IsHScreen?this.ChartBorder.Top=r:this.ChartBorder.Left=r;for(var n=0;n<this.SubFrame.length;++n){var o=this.SubFrame[n];this.IsHScreen?o.Frame.ChartBorder.Top=r:o.Frame.ChartBorder.Left=r}}if(Te.IsNumber(a.Right)&&this.AutoRightBorder){i=0;Te.IsNumber(this.AutoRightBorder.Blank)&&(i=this.AutoRightBorder.Blank);r=a.Right+i;if(Te.IsNumber(this.AutoRightBorder.MinWidth)&&this.AutoRightBorder.MinWidth>r&&(r=this.AutoRightBorder.MinWidth),this.AuotRightWidth=r,Te.IsPlusNumber(a.OverlayRight)&&(r+=this.OverlayBlankWidth,this.AuotRightWidth=r,r+=a.OverlayRight),this.GetExtendChartRightWidth){var s=this.GetExtendChartRightWidth();if(this.GetExtendChartByClassName){var h=this.GetExtendChartByClassName("StockChip");h&&h.Chart&&(h.Chart.Left=r)}r+=s}this.IsHScreen?(this.ChartBorder.Bottom!=r&&!0,this.ChartBorder.Bottom=r):(this.ChartBorder.Right!=r&&!0,this.ChartBorder.Right=r);for(n=0;n<this.SubFrame.length;++n){o=this.SubFrame[n];this.IsHScreen?o.Frame.ChartBorder.Bottom=r:o.Frame.ChartBorder.Right=r,o.Frame.ReDrawToolbar=!0,o.Interval=this.AuotRightWidth}}this.SetSizeChage(!0)}for(n=0;n<this.SubFrame.length;++n){if(!((o=this.SubFrame[n]).Height<=0))if(o.Frame.Draw(),this.AutoRightBorder)for(var l=this.AuotRightWidth,u=0;u<o.OverlayIndex.length;++u){(c=o.OverlayIndex[u]).Frame.DataWidth=o.Frame.DataWidth,c.Frame.DistanceWidth=o.Frame.DistanceWidth,c.Frame.XPointCount=o.Frame.XPointCount,c.ChartPaint.length>0&&c.Frame&&(c.Frame.RightOffset=l,c.Frame.Draw(),l+=c.RightWidth.Width)}else{l=o.Interval;for(var u in o.Frame.RightTextMaxWidth>l&&(l=o.Frame.RightTextMaxWidth),o.OverlayIndex){var c;(c=o.OverlayIndex[u]).Frame.DataWidth=o.Frame.DataWidth,c.Frame.DistanceWidth=o.Frame.DistanceWidth,c.Frame.XPointCount=o.Frame.XPointCount,c.ChartPaint.length>0&&c.Frame&&(c.Frame.RightOffset=l,c.Frame.Draw(),c.Frame.IsShow&&(l+=o.Interval))}}}this.SizeChange=!1},this.DrawOveraly=function(t){for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];if(!(a.Height<=0))for(var i=0;i<a.OverlayIndex.length;++i)for(var r=a.OverlayIndex[i],n=0;n<r.ChartPaint.length;++n){var o=r.ChartPaint[n];o.IsShow&&(t?o.IsDrawFirst&&o.Draw():o.IsDrawFirst||o.Draw())}}},this.DrawOveralySelectedStatus=function(t){if(t.MoveOn.Identify||t.Selected.Identify)for(var e in this.SubFrame){var a=this.SubFrame[e];for(var i in a.OverlayIndex){var r=a.OverlayIndex[i];for(var n in r.ChartPaint){var o=r.ChartPaint[n];o.IsShow&&(o.Identify&&(o.Identify!=t.MoveOn.Identify&&o.Identify!=t.Selected.Identify||o.DrawSelectedStatus&&o.DrawSelectedStatus()))}}}},this.PtInOveralyChart=function(t,e){var a=null;for(var i in this.SubFrame){var r=this.SubFrame[i];for(var n in r.OverlayIndex){var o=r.OverlayIndex[n];for(var s in o.ChartPaint){var h=o.ChartPaint[s];if(h.IsShow&&(h.PtInChart&&(a=h.PtInChart(t,e))))return a}}}return null},this.DrawPictureCoordinate=function(t,e){if(!t||!t.Frame)return!1;if(!Te.IsNonEmptyArray(t.Point))return!1;if(!t.GetXYCoordinate)return!1;var a=t.GetXYCoordinate();t.Frame.DrawPictureYCoordinate(t,a,e);for(var i=0;i<this.SubFrame.length;++i){var r=this.SubFrame[i];if(r&&r.Frame&&r.Frame.XSplitOperator.ShowText){r.Frame.DrawPictureXCoordinate(t,a,e);break}}return!0},this.DrawLock=function(){for(var t in this.SubFrame){this.SubFrame[t].Frame.DrawLock()}},this.DrawLogo=function(){for(var t=0;t<this.SubFrame.length;++t){var e=this.SubFrame[t];if(e.Frame.DrawLogo){e.Frame.DrawLogo();break}}},this.CalculateLock=function(){for(var t in this.SubFrame){this.SubFrame[t].Frame.CalculateLock()}},this.DrawInsideHorizontal=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];e.Frame.DrawInsideHorizontal&&e.Frame.DrawInsideHorizontal()}},this.DrawCustomHorizontal=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];e.Frame.DrawCustomHorizontal&&e.Frame.DrawCustomHorizontal();for(var a=0;a<e.OverlayIndex.length;++a){var i=e.OverlayIndex[a];i.Frame&&i.Frame.DrawCustomHorizontal&&i.Frame.DrawCustomHorizontal()}}},this.DrawEx=function(t){for(var e in this.SubFrame){var a=this.SubFrame[e];"MinuteFrame"!=a.Frame.ClassName&&"MinuteHScreenFrame"!=a.Frame.ClassName||1!=e||a.Frame.DrawVolTitle(t.Symbol)}},this.DrawCustomVertical=function(t){for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];a.Frame.DrawCustomVerticalEvent=t,a.Frame.DrawCustomVertical&&a.Frame.DrawCustomVertical()}},this.DrawToolbar=function(t){var e=null;t&&t.MoveOnPoint&&(e=t.MoveOnPoint);for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a];if(!(i.Height<=0)){var r=i.Frame;if(r){1==r.ToolbarButtonStyle&&r.DrawToolbarV2&&r.DrawToolbarV2(e,t);for(var n=0;n<i.OverlayIndex.length;++n){var o=i.OverlayIndex[n].Frame;o.DrawToolbar&&o.DrawToolbar(e,r.IsMinSize,t)}}}}},this.SetSizeChage=function(t){for(var e in this.SizeChange=t,this.SubFrame){var a=this.SubFrame[e];for(var i in a.Frame.SizeChange=t,a.OverlayIndex){var r=a.OverlayIndex[i];r.Frame&&(r.Frame.SizeChange=t)}}this.ChartBorder.UIElement&&(this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight})},this.SetBeforeDrawXYCallback=function(t){for(var e=0;e<this.SubFrame.length;++e){this.SubFrame[e].Frame.BeforeDrawXYCallback=t}},this.Snapshot=function(){this.ScreenImageData=this.Canvas.getImageData(0,0,this.ChartBorder.GetChartWidth(),this.ChartBorder.GetChartHeight())},this.GetXData=function(t){return this.SubFrame[0].Frame.GetXData(t)},this.GetYData=function(t,e){for(var a,i=0;i<this.SubFrame.length;++i){var r=this.SubFrame[i],n=r.Frame.ChartBorder.GetLeft(),o=r.Frame.ChartBorder.GetTopEx(),s=r.Frame.ChartBorder.GetWidth(),h=r.Frame.ChartBorder.GetHeightEx();if(r.Frame.Canvas.beginPath(),r.Frame.Canvas.rect(n,o,s,h),r.Frame.Canvas.isPointInPath(n,t)){a=r.Frame,e&&(e.FrameID=i);break}}if(null!=a){a.RightFrame&&(e.RightYValue=a.RightFrame.GetYData(t));var l=a.GetYData(t);if(1==a.YSplitOperator.CoordinateType){var u=a.YSplitOperator.GetFirstOpenPrice();e.RightYValue=((l-u)/u*100).toFixed(2)+"%"}return l}},this.PtInFrame=function(t,e){for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a],r=i.Frame.ChartBorder.GetLeft(),n=i.Frame.ChartBorder.GetTop(),o=i.Frame.ChartBorder.GetWidth(),s=i.Frame.ChartBorder.GetHeight();if(i.Frame.Canvas.beginPath(),i.Frame.Canvas.rect(r,n,o,s),i.Frame.Canvas.isPointInPath(t,e))return a}var h=this.ChartBorder.GetBottom(),l=this.ChartBorder.GetChartHeight(),u=(r=this.ChartBorder.GetLeft(),this.ChartBorder.GetRight());return t>=r&&t<=u&&e>h&&e<l?-3:-1},this.PtInChartFrame=function(t,e){for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a],r=i.Frame.ChartBorder.GetLeft(),n=i.Frame.ChartBorder.GetTopEx(),o=i.Frame.ChartBorder.GetWidth(),s=i.Frame.ChartBorder.GetHeightEx();if(i.Frame.Canvas.beginPath(),i.Frame.Canvas.rect(r,n,o,s),i.Frame.Canvas.isPointInPath(t,e))return a}return-1},this.PtInButtons=function(t,e){for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a];if(!(i.Height<=0)){if(n=i.Frame.PtInButtons(t,e))return n.Frame=i.Frame,n.FrameID=a,n;for(var r=0;r<i.OverlayIndex.length;++r){var n,o=i.OverlayIndex[r],s=o.Frame;if(s&&s.PtInButtons)if(n=s.PtInButtons(t,e))return n.IndexID=o.Identify,n.FrameID=a,n.OverlayFrame=s,n.Frame=i.Frame,n}}}return null},this.PtInFrameBottom=function(t,e){var a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetBottom(),r=this.ChartBorder.GetWidth(),n=this.ChartBorder.Bottom;return this.Canvas.beginPath(),this.Canvas.rect(a,i,r,n),!!this.Canvas.isPointInPath(t,e)},this.PtInFrameVertical=function(t,e){for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a];if(!(i.Height<=0)&&(i.Frame.PtInVertical&&i.Frame.PtInVertical(t,e)))return{Frame:i.Frame}}return null},this.GetXFromIndex=function(t){return this.SubFrame[0].Frame.GetXFromIndex(t)},this.GetYFromData=function(t){return this.SubFrame[0].Frame.GetYFromData(t)},this.ZoomUp=function(t){var e=this.SubFrame[0].Frame.ZoomUp(t);return this.UpdateAllFrame(),e},this.ZoomDown=function(t){var e=this.SubFrame[0].Frame.ZoomDown(t);return this.UpdateAllFrame(),e},this.SetXShowCount=function(t){var e=this.SubFrame[0].Frame.SetXShowCount(t);return this.UpdateAllFrame(),e},this.XCoordinateZoom=function(t,e){var a=this.SubFrame[0].Frame.XCoordinateZoom(t,e);return this.UpdateAllFrame(),a},this.ResetXYSplit=function(){for(var t in this.SubFrame)this.SubFrame[t].Frame.XYSplit=!0},this.SetLanguage=function(t){for(var e in this.SubFrame){var a=this.SubFrame[e];a&&a.Frame&&(a.Frame.YSplitOperator&&(a.Frame.YSplitOperator.LanguageID=t),a.Frame.XSplitOperator&&(a.Frame.XSplitOperator.LanguageID=t))}},this.GetCurrentPageSize=function(){if(this.SubFrame.length<=0)return null;var t=this.SubFrame[0];return t&&t.Frame?t.Frame.XPointCount:null},this.OnSize=function(){var t={};return this.SubFrame[0].Frame.OnSize(t),this.UpdateAllFrame(),t},this.SetDataWidth=function(t){var e=this.SubFrame[0].Frame.SetDataWidth(t);return this.UpdateAllFrame(),e},this.UpdateAllFrame=function(){for(var t=this.SubFrame[0].Frame,e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];for(var i in e>0&&(a.Frame.XPointCount=t.XPointCount,a.Frame.ZoomIndex=t.ZoomIndex,a.Frame.DataWidth=t.DataWidth,a.Frame.DistanceWidth=t.DistanceWidth,a.Frame.LastCalculateStatus.Width=t.LastCalculateStatus.Width,a.Frame.LastCalculateStatus.XPointCount=t.LastCalculateStatus.XPointCount),a.OverlayIndex){var r=this.SubFrame[e].OverlayIndex[i];r.Frame.XPointCount=t.XPointCount,r.Frame.ZoomIndex=t.ZoomIndex,r.Frame.DataWidth=t.DataWidth,r.Frame.DistanceWidth=t.DistanceWidth,r.Frame.LastCalculateStatus.Width=t.LastCalculateStatus.Width,r.Frame.LastCalculateStatus.XPointCount=t.LastCalculateStatus.XPointCount}}},this.PtInFrameBorder=function(t,e){for(var a=this.DragBorderHeight,i=0;i<this.SubFrame.length-1;++i){var r=this.SubFrame[i];if(!(r.Frame.Heigh<=0)){var n=r.Frame.ChartBorder.GetBottom(),o=r.Frame.ChartBorder.GetLeft(),s=r.Frame.ChartBorder.GetRight();if(r.Frame.Canvas.beginPath(),r.Frame.Canvas.rect(o,n-a/2,s-o,a),r.Frame.Canvas.isPointInPath(t,e))return{Index:i,Bottom:!0}}}return null},this.IsEnableDragY=function(t){if(!this.SubFrame)return!1;var e=this.SubFrame[t];if(!e||!e.Frame||!e.Frame.YSplitOperator)return!1;var a=e.Frame.YSplitOperator;return"function"==typeof a.IsEnableDragY&&a.IsEnableDragY()},this.PtInFrameY=function(t,e){var a=0;if(this.GetExtendChartByClassName){var i=this.GetExtendChartByClassName("StockChip");i&&i.Chart&&(a=i.Chart.Width)}for(var r=0;r<this.SubFrame.length;++r){var n=this.SubFrame[r];if(!(n.Frame.Heigh<=0)){var o=n.Frame.ChartBorder.Right;o-=a;var s=n.Frame.ChartBorder.GetBorder(),h=s.Bottom,l=s.TopTitle,u=(s.Left,s.Right),c=h-l;if(c/3>30)var f=l+30,d=h-30;else{var C=c/3;f=l+C,d=h-C}var p=0;if(e<f?p=1:e>d&&(p=2),o>=10)if(Te.IsNonEmptyArray(n.OverlayIndex)){var m=(g=n.OverlayIndex[0]).Frame.RightOffset;if(n.Frame.Canvas.beginPath(),n.Frame.Canvas.rect(u,l,m,h-l),n.Frame.Canvas.isPointInPath(t,e))return{Index:r,Right:!0,Left:!1,Position:p,IsOverlay:!1};for(var D=u+m,v=0;v<n.OverlayIndex.length;++v){var g;if((g=n.OverlayIndex[v]).RightWidth&&Te.IsNumber(g.RightWidth.Width)){var S=g.RightWidth.Width;if(n.Frame.Canvas.beginPath(),n.Frame.Canvas.rect(D,l,S,h-l),n.Frame.Canvas.isPointInPath(t,e))return{Index:r,Right:!0,Left:!1,Position:p,IsOverlay:!0,OverlayIndex:v};D+=S}}}else if(n.Frame.Canvas.beginPath(),n.Frame.Canvas.rect(u,l,o,h-l),n.Frame.Canvas.isPointInPath(t,e))return{Index:r,Right:!0,Left:!1,Position:p,IsOverlay:!1};var T=n.Frame.ChartBorder.Left;if(T>=10&&(n.Frame.Canvas.beginPath(),n.Frame.Canvas.rect(0,l,T,h-l),n.Frame.Canvas.isPointInPath(t,e)))return{Index:r,Right:!1,Left:!0,Position:p,IsOverlay:!1}}}return null},this.SetDayCount=function(t){this.ChartBorder.MultiDayMinute.Count=t;for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];a.Frame&&(a.Frame.DayCount=t,a.Frame.ChartBorder.MultiDayMinute.Count=t)}},this.SetMultiDayMinuteWidth=function(t){if(t){Te.IsNumber(t.Left)&&(this.ChartBorder.MultiDayMinute.Left=t.Left),Te.IsNumber(t.Right)&&(this.ChartBorder.MultiDayMinute.Right=t.Right);for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];a.Frame&&(Te.IsNumber(t.Left)&&(a.Frame.ChartBorder.MultiDayMinute.Left=t.Left),Te.IsNumber(t.Right)&&(a.Frame.ChartBorder.MultiDayMinute.Right=t.Right))}}}}function ot(){this.newMethod=nt,this.newMethod(),delete this.newMethod,this.IsHScreen=!0,this.CalculateChartBorder=function(){if(!(this.SubFrame.length<=0)){for(var t=this.ChartBorder.GetHScreenBorder(),e=this.ChartBorder.Right,a=t.Right,i=t.Right-t.Left,r=0,n=0,o=0;o<this.SubFrame.length;++o){(h=(s=this.SubFrame[o]).Frame)&&h.ChartBorder&&h.ChartBorder.IsShowTitleOnly&&s.Height>0?n+=h.ChartBorder.TitleHeight:r+=s.Height}i-=n;for(o=0;o<this.SubFrame.length;++o){var s,h=(s=this.SubFrame[o]).Frame;if(s.Frame.ChartBorder.Top=this.ChartBorder.Top,s.Frame.ChartBorder.Bottom=this.ChartBorder.Bottom,s.Frame.ChartBorder.LeftExtendWidth=this.ChartBorder.LeftExtendWidth,s.Frame.ChartBorder.RightExtendWidth=this.ChartBorder.RightExtendWidth,h&&h.ChartBorder&&h.ChartBorder.IsShowTitleOnly&&s.Height>0){var l=h.ChartBorder.TitleHeight;s.Frame.ChartBorder.Right=e,s.Frame.ChartBorder.Left=a-l,e+=l,a-=l}else{l=i*(s.Height/r);s.Frame.ChartBorder.Right=e,s.Frame.ChartBorder.Left=a-l,e+=l,a-=l}}}},this.GetYData=function(t,e){for(var a,i=0;i<this.SubFrame.length;++i){var r=this.SubFrame[i],n=r.Frame.ChartBorder.GetLeftEx(),o=r.Frame.ChartBorder.GetTop(),s=r.Frame.ChartBorder.GetWidthEx(),h=r.Frame.ChartBorder.GetHeight();if(r.Frame.Canvas.beginPath(),r.Frame.Canvas.rect(n,o,s,h),r.Frame.Canvas.isPointInPath(t,o)){a=r.Frame,e&&(e.FrameID=i);break}}if(null!=a)return a.GetYData(t)}}function st(){this.Date,this.YClose,this.Open,this.Close,this.High,this.Low,this.Vol,this.Amount,this.Time,this.FlowCapital=null,this.Position=null,this.IsVirtual=!1,this.IsNonTrade=!1,this.YFClose=null,this.FClose=null,this.Stop,this.Up,this.Down,this.Unchanged,this.ExtendData,this.BFactor,this.AFactor,this.OrderFlow,this.ColorData,this.HeatMap}function ht(){this.Close,this.Open,this.High,this.Low,this.Vol,this.Amount,this.DateTime,this.Increase,this.Risefall,this.AvPrice,this.Lead=null,this.Time,this.Date,this.Position=null,this.YClearing,this.ExtendData}function lt(){this.Time,this.Date,this.Price,this.AvPrice,this.Vol=[],this.ColorID}function ut(){this.Time,this.Date,this.Price,this.AvPrice,this.Vol=[],this.ColorID}function ct(){this.Date,this.Time,this.Value}st.Copy=function(t){var e=new st;return e.Date=t.Date,Te.IsNumber(t.Time)&&(e.Time=t.Time),e.YClose=t.YClose,e.Open=t.Open,e.Close=t.Close,e.High=t.High,e.Low=t.Low,e.Vol=t.Vol,e.Amount=t.Amount,Te.IsNumber(t.FlowCapital)&&(e.FlowCapital=t.FlowCapital),Te.IsNumber(t.Position)&&(e.Position=t.Position),Te.IsNumber(t.YFClose)&&(e.YFClose=t.YFClose),Te.IsNumber(t.FClose)&&(e.FClose=t.FClose),Te.IsNumber(t.Stop)&&(e.Stop=t.Stop),Te.IsNumber(t.Up)&&(e.Up=t.Up),Te.IsNumber(t.Down)&&(e.Down=t.Down),Te.IsNumber(t.Unchanged)&&(e.Unchanged=t.Unchanged),Te.IsNumber(t.BFactor)&&(e.BFactor=t.BFactor),Te.IsNumber(t.AFactor)&&(e.AFactor=t.AFactor),Te.IsBool(t.IsVirtual)&&(e.IsVirtual=t.IsVirtual),Te.IsBool(t.IsNonTrade)&&(e.IsNonTrade=t.IsNonTrade),t.OrderFlow&&(e.OrderFlow=t.OrderFlow),t.ColorData&&(e.ColorData=t.ColorData),t.ExtendData&&(e.ExtendData=t.ExtendData),t.HeatMap&&(e.HeatMap=t.HeatMap),e},st.CopyTo=function(t,e){t.Date=e.Date,Te.IsNumber(e.Time)&&(t.Time=e.Time),t.YClose=e.YClose,t.Open=e.Open,t.Close=e.Close,t.High=e.High,t.Low=e.Low,t.Vol=e.Vol,t.Amount=e.Amount,Te.IsNumber(e.FlowCapital)&&(t.FlowCapital=e.FlowCapital),Te.IsNumber(e.Position)&&(t.Position=e.Position),Te.IsNumber(e.YFClose)&&(t.YFClose=e.YFClose),Te.IsNumber(e.FClose)&&(t.FClose=e.FClose),Te.IsNumber(e.Stop)&&(t.Stop=e.Stop),Te.IsNumber(e.Up)&&(t.Up=e.Up),Te.IsNumber(e.Down)&&(t.Down=e.Down),Te.IsNumber(e.Unchanged)&&(t.Unchanged=e.Unchanged),Te.IsNumber(e.BFactor)&&(t.BFactor=e.BFactor),Te.IsNumber(e.AFactor)&&(t.AFactor=e.AFactor),Te.IsBool(e.IsVirtual)&&(t.IsVirtual=e.IsVirtual),Te.IsBool(e.IsNonTrade)&&(t.IsNonTrade=e.IsNonTrade),e.OrderFlow&&(t.OrderFlow=e.OrderFlow),e.ColorData&&(t.ColorData=e.ColorData),e.HeatMap&&(t.HeatMap=e.HeatMap),e.ExtendData&&(t.ExtendData=e.ExtendData)},st.CopyRight=function(t,e){var a=new st;return a.Date=t.Date,Te.IsNumber(t.Time)&&(a.Time=t.Time),a.YClose=t.YClose*e,a.Open=t.Open*e,a.Close=t.Close*e,a.High=t.High*e,a.Low=t.Low*e,a.Vol=t.Vol,a.Amount=t.Amount,a.FlowCapital=t.FlowCapital,a.Position=t.Position,a.YFClose=t.YFClose,a.FClose=t.FClose,t.ColorData&&(a.ColorData=t.ColorData),t.ExtendData&&(a.ExtendData=t.ExtendData),a};var ft={INVESTOR:1,ANNOUNCEMENT:2,PFORECAST:3,ANNOUNCEMENT_QUARTER_1:4,ANNOUNCEMENT_QUARTER_2:5,ANNOUNCEMENT_QUARTER_3:6,ANNOUNCEMENT_QUARTER_4:7,RESEARCH:8,BLOCKTRADING:9,TRADEDETAIL:10,ANNOUNCEMENT_EX_START:100,ANNOUNCEMENT_EX_END:200};function dt(){this.ID,this.Date,this.Time,this.Title,this.InfoType,this.ExtendData}var Ct=new function(){this.PeriodCallback=new C.default,this.GetPeriodCallback=function(t){return this.PeriodCallback.has(t)?this.PeriodCallback.get(t):null},this.AddPeriodCallback=function(t){if(Te.IsNumber(t.Period)&&t.Callback){var e={Period:t.Period,Callback:t.Callback};this.PeriodCallback.set(t.Period,e)}},this.RemovePeriodCallback=function(t){this.PeriodCallback.has(t.ID)&&this.PeriodCallback.delete(t.ID)}};function pt(){this.Data=new Array,this.DataOffset=0,this.Period=0,this.Right=0,this.Symbol,this.Data2=new Array,this.GetCloseMA=function(t){for(var e=new Array,a=0,i=this.Data.length;a<i;a++)if(a<t)e[a]=null;else{for(var r=0,n=0;n<t;n++)r+=this.Data[a-n].Close;e[a]=r/t}return e},this.GetVolMA=function(t){for(var e=new Array,a=0,i=this.Data.length;a<i;a++)if(a<t)e[a]=null;else{for(var r=0,n=0;n<t;n++)r+=this.Data[a-n].Vol;e[a]=r/t}return e},this.GetAmountMA=function(t){for(var e=new Array,a=0,i=this.Data.length;a<i;a++)if(a<t)e[a]=null;else{for(var r=0,n=0;n<t;n++)r+=this.Data[a-n].Amount;e[a]=r/t}return e},this.GetClose=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Close;return t},this.GetYClose=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].YClose;return t},this.GetHigh=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].High;return t},this.GetLow=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Low;return t},this.GetOpen=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Open;return t},this.GetVol=function(t){var e=1;Te.IsNumber(t)&&(e=t);var a=new Array;for(var i in this.Data)a[i]=this.Data[i].Vol/e;return a},this.GetAmount=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Amount;return t},this.GetPosition=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Position;return t},this.GetSettlementPrice=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].FClose;return t},this.GetIsEqual=function(){var t=[];for(var e in this.Data){var a=this.Data[e];t[e]=a.Close==a.Open?1:0}return t},this.GetIsUp=function(){var t=[];for(var e in this.Data){var a=this.Data[e];t[e]=a.Close>a.Open?1:0}return t},this.GetIsDown=function(){var t=[];for(var e in this.Data){var a=this.Data[e];t[e]=a.Close<a.Open?1:0}return t},this.GetLead=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Lead;return t},this.GetDate=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Date;return t},this.GetTime=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Time;return t},this.GetUp=function(){var t=[];for(var e in this.Data)t[e]=this.Data[e].Up;return t},this.GetDown=function(){var t=[];for(var e in this.Data)t[e]=this.Data[e].Down;return t},this.GetYear=function(){var t=new Array;for(var e in this.Data)t[e]=parseInt(this.Data[e].Date/1e4);return t},this.GetMonth=function(){var t=new Array;for(var e in this.Data)t[e]=parseInt(this.Data[e].Date%1e4/100);return t},this.GetAvPrice=function(){var t=new Array;for(var e in this.Data){var a=this.Data[e].AvPrice;Te.IsNumber(a)?t[e]=a:t[e]=0}return t},this.GetDateRange=function(){if(!this.Data||this.Data.length<=0)return null;var t=this.Data[0],e=this.Data[this.Data.length-1],a={Start:{Date:t.Date},End:{Date:e.Date}};return Te.IsNumber(t.Time)&&(a.Start.Time=t.Time),Te.IsNumber(e.Time)&&(a.End.Time=e.Time),a},this.GetDateList=function(){if(!this.Data||this.Data.length<=0)return null;for(var t=[],e=new c.default,a=0;a<this.Data.length;++a){var i=this.Data[a];Te.IsNumber(i.Date)&&(e.has(i.Date)||(e.add(i.Date),t.push(i.Date)))}return t},this.GetMinutePeriodData=function(t){var e=new Array,a=5;if(5==t)a=5;else if(6==t)a=15;else if(7==t)a=30;else if(8==t)a=60;else if(11==t)a=120;else{if(12!=t)return t>vt&&t<=gt?(a=t-vt,this.GetMinuteCustomPeriodData(a)):this.Data;a=240}for(var i=!1,r=null,n=null,o=0;o<this.Data.length;){i=!0;for(var s=0;s<a&&o<this.Data.length;++o){i&&(r=new st,e.push(r),i=!1);var h=this.Data[o];if(null!=h){if((925!=h.Time||null!=n&&924==n)&&(930!=h.Time||null!=n&&929==n)&&(1300!=h.Time||null!=n&&1259==n)&&++s,r.Date=h.Date,r.Time=h.Time,n=r.Time,null!=h.Open&&null!=h.Close&&(null==r.Open||null==r.Close?(r.Open=h.Open,r.High=h.High,r.Low=h.Low,r.YClose=h.YClose,r.Close=h.Close,r.Vol=h.Vol,r.Amount=h.Amount,r.FlowCapital=h.FlowCapital,r.Position=h.Position,r.YFClose=h.YFClose,r.FClose=h.FClose):(r.High<h.High&&(r.High=h.High),r.Low>h.Low&&(r.Low=h.Low),r.Close=h.Close,r.Vol+=h.Vol,null!=h.Amount&&(r.Amount+=h.Amount),r.Position=h.Position,r.FlowCapital=h.FlowCapital,r.FClose=h.FClose),o+1<this.Data.length)){var l=this.Data[o+1];if(l&&l.Date!=h.Date){++o;break}}}else++s}}return e},this.GetMinuteCustomPeriodData=function(t){for(var e=new Array,a=t,i=!1,r=null,n=0;n<this.Data.length;){i=!0;for(var o=0;o<a&&n<this.Data.length;++n,++o){i&&(r=new st,e.push(r),i=!1);var s=this.Data[n];null!=s&&(r.Date=s.Date,r.Time=s.Time,null!=s.Open&&null!=s.Close&&(null==r.Open||null==r.Close?(r.Open=s.Open,r.High=s.High,r.Low=s.Low,r.YClose=s.YClose,r.Close=s.Close,r.Vol=s.Vol,r.Amount=s.Amount,r.FlowCapital=s.FlowCapital,r.Position=s.Position,r.YFClose=s.YFClose,r.FClose=s.FClose):(r.High<s.High&&(r.High=s.High),r.Low>s.Low&&(r.Low=s.Low),r.Close=s.Close,r.Vol+=s.Vol,null!=s.Amount&&(r.Amount+=s.Amount),r.Position=s.Position,r.FlowCapital=s.FlowCapital,r.FClose=s.FClose)))}}return e},this.GetDayPeriodData=function(t){if(t>mt&&t<=Dt)return this.GetDayCustomPeriodData(t-mt);var e=Ea.IsBIT(this.Symbol),a=new Array,i=0,r=2,n=null;for(var o in this.Data){var s=!1,h=this.Data[o];switch(t){case 1:if(e)var l=pt.GetSunday(h.Date);else l=pt.GetFirday(h.Date);l!=i&&(s=!0,i=l);break;case 21:if(e)l=pt.GetSunday(h.Date);else l=pt.GetFirday(h.Date);l!=i&&(++r>=2&&(s=!0,r=0),i=l);break;case 2:parseInt(h.Date/100)!=parseInt(i/100)&&(s=!0,i=h.Date);break;case 3:parseInt(h.Date/1e4)!=parseInt(i/1e4)&&(s=!0,i=h.Date);break;case 22:var u=pt.GetHalfYear(h.Date);u!=i&&(s=!0,i=u);break;case 9:var c=pt.GetQuarter(h.Date);c=10*parseInt(h.Date/1e4)+c;var f=pt.GetQuarter(i);c!=(f=10*parseInt(i/1e4)+f)&&(s=!0,i=h.Date)}if(s){if((n=new st).Date=h.Date,a.push(n),null==h.Open||null==h.Close)continue;n.Open=h.Open,n.High=h.High,n.Low=h.Low,n.YClose=h.YClose,n.Close=h.Close,n.Vol=h.Vol,n.Amount=h.Amount,n.FlowCapital=h.FlowCapital,n.Position=h.Position,n.YFClose=h.YFClose,n.FClose=h.FClose}else{if(null==n)continue;if(null==h.Open||null==h.Close)continue;null==n.Open||null==n.Close?(n.Open=h.Open,n.High=h.High,n.Low=h.Low,n.YClose=h.YClose,n.Close=h.Close,n.Vol=h.Vol,n.Amount=h.Amount,n.FlowCapital=h.FlowCapital,n.Position=h.Position,n.YFClose=h.YFClose,n.FClose=h.FClose):(n.High<h.High&&(n.High=h.High),n.Low>h.Low&&(n.Low=h.Low),n.Close=h.Close,n.Vol+=h.Vol,null!=h.Amount&&(n.Amount+=h.Amount),n.Position=h.Position,n.FlowCapital=h.FlowCapital,n.Date=h.Date,n.FClose=h.FClose)}}return a},this.GetDayCustomPeriodData=function(t){for(var e=[],a=t,i=!1,r=null,n=0;n<this.Data.length;){i=!0;for(var o=0;o<a&&n<this.Data.length;++n,++o){i&&(r=new st,e.push(r),i=!1);var s=this.Data[n];null!=s&&(r.Date=s.Date,null!=s.Open&&null!=s.Close&&(null==r.Open||null==r.Close?(r.Open=s.Open,r.High=s.High,r.Low=s.Low,r.YClose=s.YClose,r.Close=s.Close,r.Vol=s.Vol,r.Amount=s.Amount,r.FlowCapital=s.FlowCapital,r.Position=s.Position,r.YFClose=s.YFClose,r.FClose=s.FClose):(r.High<s.High&&(r.High=s.High),r.Low>s.Low&&(r.Low=s.Low),r.Close=s.Close,r.Vol+=s.Vol,null!=s.Amount&&(r.Amount+=s.Amount),r.Position=s.Position,r.FlowCapital=s.FlowCapital,r.FClose=s.FClose)))}}return e},this.GetPeriodData=function(t){var e=Ct.GetPeriodCallback(t);if(e)return e.Callback(t,this.Data,this);if(Ea.IsBIT(this.Symbol)&&(5==t||6==t||7==t||8==t||t>vt&&t<=gt)){var a=5;return 5==t?a=5:6==t?a=15:7==t?a=30:8==t?a=60:11==t?a=120:12==t?a=240:t>vt&&t<=gt&&(a=t-vt),this.GetMinuteCustomPeriodData(a)}return pt.IsDayPeriod(t,!1)?this.GetDayPeriodData(t):pt.IsMinutePeriod(t,!1)?this.GetMinutePeriodData(t):void 0},this.GetRightData=function(t,e){var a=[];if(this.Data.length<=0)return a;if(e&&1==e.AlgorithmType){for(var i=0;i<this.Data.length;++i){var r=this.Data[i],n=1==t?r.BFactor:r.AFactor;a[i]=st.CopyRight(r,n)}return a}if(1==t){var o=this.Data.length-1,s=(n=1,this.Data[o].YClose);for(a[o]=st.Copy(this.Data[o]),--o;o>=0&&s==this.Data[o].Close;--o)a[o]=st.Copy(this.Data[o]),s=this.Data[o].YClose;for(;o>=0;--o){var h=this.Data[o].Close;s!=h&&0!=h&&(n*=s/h),a[o]=st.CopyRight(this.Data[o],n),s=this.Data[o].YClose}}else if(2==t){o=0,n=1;var l=this.Data[o].Close;for(a[o]=st.Copy(this.Data[o]),++o;o<this.Data.length&&l==this.Data[o].YClose;++o)a[o]=st.Copy(this.Data[o]),l=this.Data[o].Close;for(;o<this.Data.length;++o)l!=this.Data[o].YClose&&(n*=l/this.Data[o].YClose),a[o]=st.CopyRight(this.Data[o],n),l=this.Data[o].Close}return a},this.GetRightDate=this.GetRightData,this.GetOverlayData=function(t,e){for(var a=[],i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date;if(r>=t.length)a[i]=new st,a[i].Date=n,++i;else{var o=t[r].Date;o==n?(a[i]=new st,a[i].Date=t[r].Date,a[i].YClose=t[r].YClose,a[i].Open=t[r].Open,a[i].High=t[r].High,a[i].Low=t[r].Low,a[i].Close=t[r].Close,a[i].Vol=t[r].Vol,a[i].Amount=t[r].Amount,a[i].Stop=t[r].Stop,a[i].Up=t[r].Up,a[i].Down=t[r].Down,a[i].Unchanged=t[r].Unchanged,++r,++i):o<n?++r:(a[i]=new st,a[i].Date=n,++i)}}return a},this.GetOverlayMinuteData=function(t,e){for(var a=[],i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date,o=this.Data[i].Time;if(r>=t.length)a[i]=new st,a[i].Date=n,a[i].Time=o,++i;else{var s=t[r].Date,h=t[r].Time;s==n&&h==o?(a[i]=new st,a[i].Date=t[r].Date,a[i].Time=t[r].Time,a[i].YClose=t[r].YClose,a[i].Open=t[r].Open,a[i].High=t[r].High,a[i].Low=t[r].Low,a[i].Close=t[r].Close,a[i].Vol=t[r].Vol,a[i].Amount=t[r].Amount,a[i].Stop=t[r].Stop,a[i].Up=t[r].Up,a[i].Down=t[r].Down,a[i].Unchanged=t[r].Unchanged,++r,++i):s<n||s==n&&h<o?++r:(a[i]=new st,a[i].Date=n,a[i].Time=o,++i)}}return a},this.GetFittingData=function(t){for(var e=new Array,a=0,i=0;a<this.Data.length;){var r=this.Data[a].Date;if(i>=t.length)e[a]=null,++a;else{var n=t[i].Date;if(n==r){var o=new ct;o.Date=t[i].Date,o.Value=t[i].Value,e[a]=o,++i,++a}else n<r?++i:(e[a]=new ct,e[a].Date=r,++a)}}return e},this.GetFittingData2=function(t,e){for(var a=new Array,i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date;if(r>=t.length)a[i]=new ct,a[i].Date=n,a[i].Value=e,++i;else{var o=t[r].Date;if(o==n){var s=new ct;s.Date=t[r].Date,s.Value=t[r].Value,a[i]=s,++r,++i}else o<n?++r:(a[i]=new ct,a[i].Date=n,a[i].Value=e,++i)}}return a},this.GetDateIndex=function(t){for(var e=0,a=0;e<this.Data.length;){var i=this.Data[e].Date;if(a>=t.length)break;var r=t[a];r.Date==i?(r.Index=e,++a):r.Date<i?++a:++e}},this.GetDateTimeIndex=function(t){for(var e=0,a=0;e<this.Data.length;){var i=this.Data[e].Date,r=this.Data[e].Time;if(a>=t.length)break;var n=t[a];n.Date==i&&n.Time==r?(n.Index=e,++a):n.Date<i||n.Date==i&&n.Time<r?++a:++e}},this.GetMinuteFittingData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var r=this.Data[a].Date,n=this.Data[a].Time;if(i>=t.length)e[a]=null,++a;else{var o=t[i].Date,s=t[i].Time,h=t[i];if(o==r&&s==n)(l=new ct).Date=h.Date,l.Time=h.Time,l.Value=h.Value,e[a]=l,++i,++a;else if(o<r||o==r&&s<n)++i;else{var l;(l=new ct).Date=r,l.Time=n,e[a]=l,++a}}}return e},this.GetMinuteFittingDataV2=function(t){for(var e=[],a=null,i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date,o=this.Data[i].Time;if(r>=t.length)e[i]=null,++i;else{var s=t[r].Date,h=t[r].Time,l=t[r];if(s==n&&h==o)(c=new ct).Date=l.Date,c.Time=l.Time,c.Value=l.Value,e[i]=c,a=l,++r,++i;else if(s<n||s==n&&h<o){var u=e.length-1;if(u>=0)(c=e[u])&&(s<c.Date||s==c.Date&&h<c.Time)&&(c.Value=l.Value);a=l,++r}else{var c;(c=new ct).Date=n,c.Time=o,a&&(c.Value=a.Value),e[i]=c,++i}}}return e},this.GetFittingFinanceData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var r=this.Data[a].Date;if(i<t.length)if(r<t[i].Date){++a;continue}if(i+1<t.length&&t[i].Date<r&&t[i+1].Date<=r)++i;else{var n=new ct;n.Date=r,i<t.length?(n.Value=t[i].Value,n.FinanceDate=t[i].Date):(n.Value=null,n.FinanceDate=null),e[a]=n,++a}}return e},this.GetMinuteFittingFinanceData=function(t){var e=[];if(!Array.isArray(t)||t.length<=0)return e;var a=0,i=t[0];for(a=0;a<this.Data.length;++a){var r=this.Data[a].Date,n=this.Data[a].Time;if(r>i.Date||r==i.Date&&n>=i.Time)break}for(var o=0;a<this.Data.length;){r=this.Data[a].Date,n=this.Data[a].Time;if(o+1<t.length&&(t[o].Date<r&&t[o+1].Date<=r||t[o].Date==r&&t[o].Time<n&&t[o+1].Time<=n))++o;else{var s=new ct;s.Date=r,s.Time=n,o<t.length?(s.Value=t[o].Value,s.FinanceDate=t[o].Date,s.FinanceTime=t[o].Time):(s.Value=null,s.FinanceDate=null,s.FinanceTime=null),e[a]=s,++a}}return e},this.GetFittingTradeData=function(t,e,a){for(var i=[],r=!1,n=0,o=0;n<this.Data.length;){var s=this.Data[n].Date;if(o<t.length&&t[o].Date>s)(h=new ct).Date=s,h.Value=e,i[n]=h,++n;else if(o+1<t.length&&t[o].Date<s&&t[o+1].Date<=s)++o,r=!1;else{var h;if((h=new ct).Date=s,h.Value=e,h.FinanceDate=null,o<t.length){var l=t[o];0==this.Period&&!0===a?l.Date==h.Date&&(h.Value=l.Value,h.FinanceDate=l.Date,r=!0):0==r&&(h.Value=l.Value,h.FinanceDate=l.Date,r=!0)}i[n]=h,++n}}return i},this.GetMinuteFittingTradeData=function(t,e,a){for(var i=[],r=!1,n=0,o=0;n<this.Data.length;){var s=this.Data[n].Date,h=this.Data[n].Time;if(o<t.length&&(t[o].Date>s||t[o].Date==s&&t[o].Time>h))(l=new ct).Date=s,l.Time=h,l.Value=e,i[n]=l,++n;else if(o+1<t.length&&(t[o].Date<s&&t[o+1].Date<=s||t[o].Date==s&&t[o].Time<h&&t[o+1].Time<=h))++o,r=!1;else{var l;if((l=new ct).Date=s,l.FinanceDate=null,l.Time=h,l.Value=e,o<t.length){var u=t[o];4==this.Period&&!0===a?u.Date==l.Date&&u.Time==l.Time&&(l.Value=u.Value,l.FinanceDate=u.Date,l.FinanceTime=u.Time,r=!0):0==r&&(l.Value=u.Value,l.FinanceDate=u.Date,l.FinanceTime=u.Time,r=!0)}i[n]=l,++n}}return i},this.GetFittingMarketValueData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var r=this.Data[a].Date,n=this.Data[a].Close;if(i+1<t.length&&t[i].Date<r&&t[i+1].Date<=r)++i;else{var o=new ct;o.Date=r,o.Value=t[i].Value*n,o.FinanceDate=t[i].Date,e[a]=o,++a}}return e},this.GetFittingMonthData=function(t){for(var e=new Array,a=null,i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date;if(r>=t.length)e[i]=null,++i;else{var o=t[r].Date;if(o==n)(s=new ct).Date=t[r].Date,s.Value=t[r].Value,s.Text=t[r].Text,e[i]=s,++r,++i;else if(null!=a&&a<o&&n>o){var s;(s=new ct).Date=n,s.OverlayDate=t[r].Date,s.Value=t[r].Value,s.Text=t[r].Text,e[i]=s,++r,++i}else o<n?++r:(e[i]=new ct,e[i].Date=n,++i);a=n}}return e},this.GetValue=function(){var t=[];for(var e in this.Data)if(this.Data[e]&&null!=this.Data[e].Value){var a=this.Data[e].Value;isNaN(a)?a instanceof Array?t[e]=a:t[e]=null:t[e]=a}else t[e]=null;return t},this.GetObject=function(){var t=[];for(var e in this.Data)if(this.Data[e]&&this.Data[e].Value){var a=this.Data[e].Value;t[e]=a}else t[e]=null;return t},this.GetPeriodSingleData=function(t){var e=new Array,a=0,i=2,r=null;for(var n in this.Data){var o=!1,s=this.Data[n];if(null!=s&&null!=s.Date){switch(t){case 1:(h=pt.GetFirday(s.Date))!=a&&(o=!0,a=h);break;case 21:var h;(h=pt.GetFirday(s.Date))!=a&&(++i>=2&&(o=!0,i=0),a=h);break;case 2:parseInt(s.Date/100)!=parseInt(a/100)&&(o=!0,a=s.Date);break;case 3:parseInt(s.Date/1e4)!=parseInt(a/1e4)&&(o=!0,a=s.Date);break;case 9:var l=pt.GetQuarter(s.Date);l=10*parseInt(s.Date/1e4)+l;var u=pt.GetQuarter(a);l!=(u=10*parseInt(a/1e4)+u)&&(o=!0,a=s.Date)}if(o)(r=new ct).Date=s.Date,r.Value=s.Value,e.push(r);else{if(null==r)continue;if(null==s.Value||isNaN(s.Value))continue;(null==r.Value||isNaN(r.Value))&&(r.Value=s.Value)}}}return e},this.GetMinuteAvPrice=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].AvPrice;return t},this.MergeMinuteData=function(t){if(!this.Data||this.Data.length<=0)return this.Data=t,!0;for(var e=this.Data[0],a=0,i=null,r=0;r<t.length;++r){if((u=t[r]).Date>e.Date){a=r,i=u;break}if(u.Date==e.Date&&u.Time>=e.Time){a=r,i=u;break}}if(null==i)return!1;var n=null,o=!1;for(r=this.Data.length-1;r>=0;--r){var s=this.Data[r].Date,h=this.Data[r].Time;if(i.Date>s||i.Date==s&&i.Time>=h){n=r,i.Date==s&&i.Time==h&&(o=!0);break}}if(null==n)return!1;var l=n;r=a;if(1==o){var u=t[r];if(l-1>0){var c=this.Data[l-1];u.YClose||(u.YClose=c.Close),!Te.IsNumber(u.FlowCapital)&&Te.IsNumber(c.FlowCapital)&&(u.FlowCapital=c.FlowCapital)}var f=st.Copy(u);this.Data[l]=f,++l,++r}else++l;for(;r<t.length;){u=t[r];if(l>=this.Data.length-1){if(l-1>0){c=this.Data[l-1];u.YClose||(u.YClose=c.Close),!Te.IsNumber(u.FlowCapital)&&Te.IsNumber(c.FlowCapital)&&(u.FlowCapital=c.FlowCapital)}f=st.Copy(u);this.Data[l]=f,++l,++r}else{var d=this.Data[l];d.Date==u.Date&&d.Time==u.Time?(st.CopyTo(d,u),++l,++r):++l}}return!0},this.ConverPeriod=function(t,e,a){for(var i=[],r=null,n=pt.IsMinutePeriod(e,!0),o=pt.IsMinutePeriod(a,!0),s=n&&o,h=n&&!o,l=!n&&!o,u=0,c=0;u<this.Data.length;++u){for(var f=this.Data[u];c<t.length;++c){var d=t[c];if(s){if(d.Date>f.Date||d.Date==f.Date&&d.Time>=f.Time){r=d;break}}else if((h||l)&&d.Date>=f.Date){r=d;break}}var C=null;r?((C=st.Copy(r)).PDate=r.Date,C.PTime=r.Time):C=new st,C.Date=f.Date,(s||h)&&(C.Time=f.Time),i.push(C)}return D.Chart.Log("[ChartData::ConverPeriod] result",i),i},this.GetRef=function(t){for(var e=[],a=0;a<this.Data.length;++a){e[a]=null;var i=this.Data[a];if(a-t<0){(r=new st).Date=i.Date,r.Time=i.Time,e[a]=r}else{var r,n=this.Data[a-t];(r=st.Copy(n)).Date=i.Date,r.Time=i.Time,e[a]=r}}return e},this.FitKLineIndex=function(t,e,a,i){for(var r=this.Data.length,n=t.length,o=[pt.IsMinutePeriod(a,!0),pt.IsMinutePeriod(i,!0)],s=[pt.IsDayPeriod(a,!0),pt.IsDayPeriod(i,!0)],h=pt.GetKLineDataTime(this.Data[0]),l=[],u=n,c=0;c<n;++c){var f=pt.GetKLineDataTime(t[c]);if(s[0]&&s[1]||o[0]&&s[1]){if(f.Date>=h.Date){u=c;break}}else if(o[0]&&o[1]){if(f.Date>h.Date){u=c;break}if(f.Date==h.Date&&f.Time>=h.Time){u=c;break}}}c=0;for(var d=u;c<r;){f=pt.GetKLineDataTime(this.Data[c]);if(d>=n){var C={Date:f.Date,Time:f.Time,Index:-1};l[c]=C,++c}else{var p=pt.GetKLineDataTime(t[d]);if(s[0]&&s[1]||o[0]&&s[1])if(p.Date==f.Date){C={Date:f.Date,Time:f.Time,Index:d,Data2:p.Date,Time2:p.Time};l[c]=C,++c}else if(d+1<n){var m=pt.GetKLineDataTime(t[d+1]);if(p.Date<=f.Date&&m.Date>f.Date){C={Date:f.Date,Time:f.Time,Index:d+1,Data2:m.Date,Time2:m.Time};l[c]=C,++c}else if(m.Date<=f.Date)++d;else{C={Date:f.Date,Time:f.Time,Index:-1};l[c]=C,++c}}else++d;else if(o[0]&&o[1])if(p.Date==f.Date&&p.Time==f.Time){C={Date:f.Date,Time:f.Time,Index:d,Data2:p.Date,Time2:p.Time};l[c]=C,++c}else if(d+1<n){m=pt.GetKLineDataTime(t[d+1]);if(p.Date<f.Date&&m.Date>f.Date||p.Date==f.Date&&p.Time<f.Time&&m.Date==f.Date&&m.Time>f.Time||p.Date==f.Date&&p.Time<f.Time&&m.Date>f.Date||p.Date<f.Date&&m.Date==f.Date&&m.Time>f.Time){C={Date:f.Date,Time:f.Time,Index:d+1,Data2:m.Date,Time2:m.Time};l[c]=C,++c}else if(m.Date<f.Date||m.Date==f.Date&&m.Time<=f.Time)++d;else{C={Date:f.Date,Time:f.Time,Index:-1};l[c]=C,++c}}else++d}}var D=[];for(var c in e){f=e[c];if(Array.isArray(f.Data)){var v=[];D[c]={Data:v,Name:f.Name};for(d=0;d<l.length;++d){var g=l[d];v[d]=null,g&&g.Index>=0&&g.Index<f.Data.length&&(v[d]=f.Data[g.Index])}}else D[c]={Data:f.Data,Name:f.Name}}return D},this.FindDataIndexByDateTime=function(t){var e=0;for(var a in t)t[a].Index=-1;for(var a in this.Data){var i=this.Data[a];for(var r in t){var n=t[r];if(!(n.Index>=0)){if(Te.IsNumber(n.Time)){if(n.Date==i.Date&&n.Time==i.Time){n.Index=parseInt(a),++e;break}}else if(n.Date==i.Date){n.Index=parseInt(a),++e;break}if(e>=t.length)break}}}},this.CloneData=function(t){var e=[];if("HistoryData"==t)for(var a in this.Data){var i=this.Data[a],r=st.Copy(i);e.push(r)}return e},this.GetAPIDataIndex=function(t,e){var a=[];if(t&&e){for(var i=this.Data.length,r=t.length,n=pt.GetKLineDataTime(this.Data[0]),o=r,s=(o=r,0);s<r;++s){var h=t[s],l=e[s];if(h>n.Date||h==n.Date&&l>=n.Time){o=s;break}}s=0;for(var u=o;s<i;){var c=this.Data[s];if(u>=r){var f={KDate:c.Date,KTime:c.Time,KIndex:s,Index:-1};a[s]=f,++s}else{h=t[u],l=e[u];if(h==c.Date&&l==c.Time){f={KDate:c.Date,KTime:c.Time,KIndex:s,Index:u,Data:h,Time:l};a[s]=f,++s}else if(u+1<r){var d=t[u+1],C=e[u+1];if(h<c.Date&&d>c.Date||h==c.Date&&l<c.Time&&d==c.Date&&C>c.Time||h==c.Date&&l<c.Time&&d>c.Date||h<c.Date&&d==c.Date&&C>c.Time){f={KDate:c.Date,KTime:c.Time,KIndex:s,Index:u,Data:h,Time:l};a[s]=f,++s}else if(d<c.Date||d==c.Date&&C<=c.Time)++u;else{f={KDate:c.Date,KTime:c.Time,KIndex:s,Index:-1};a[s]=f,++s}}else++u}}}else if(t){for(i=this.Data.length,r=t.length,n=pt.GetKLineDataTime(this.Data[0]),o=r,s=0;s<r;++s){if((c=t[s])>=n.Date){o=s;break}}for(s=0,u=o;s<i;){c=this.Data[s];if(u>=r){f={KDate:c.Date,KIndex:s,Index:-1};a[s]=f,++s}else{var p=t[u];if(p==c.Date){f={KDate:c.Date,KIndex:s,Index:u,Data:p};a[s]=f,++s}else if(u+1<r){var m=t[u+1];if(p<=c.Date&&m>c.Date){f={KDate:c.Date,KIndex:s,Index:u,Data:p};a[s]=f,++s}else if(m<=c.Date)++u;else{f={KDate:c.Date,KIndex:s,Index:-1};a[s]=f,++s}}else++u}}}return a},this.FixKData=function(t,e){return pt.IsDayPeriod(e,!0)?this.FixKData_Day(t):pt.IsMinutePeriod(e,!0)?this.FixKData_Minute(t):null},this.FixKData_Day=function(t){for(var e=[],a=t.length,i=0,r=0;i<this.Data.length;){var n=this.Data[i];if(r<a)if((o=t[r]).Date>n.Date){++i;continue}if(r+1<a){var o=t[r],s=t[r+1];if(o.Date<n.Date&&s.Date<=n.Date){++r;continue}}var h=new st;h.Date=n.Date;o=t[r<a?r:a-1];h.Close=o.Close,h.High=o.High,h.Low=o.Low,h.Open=o.Open,h.YClose=o.YClose,h.Amount=o.Amount,h.Vol=o.Vol,h.ExDate=o.Date,e[i]=h,++i}return e},this.FixKData_Minute=function(t){for(var e=[],a=t.length,i=0,r=0;i<this.Data.length;){var n=this.Data[i],o=pt.DateTimeToNumber(n);if(r<a){var s=t[r];if((l=pt.DateTimeToNumber(s))>o){++i;continue}}if(r+1<a){s=t[r];var h=t[r+1],l=pt.DateTimeToNumber(s),u=pt.DateTimeToNumber(h);if(l<o&&u<=o){++r;continue}}var c=new st;c.Date=n.Date,c.Time=n.Time;s=t[r<a?r:a-1];c.Close=s.Close,c.High=s.High,c.Low=s.Low,c.Open=s.Open,c.YClose=s.YClose,c.Amount=s.Amount,c.Vol=s.Vol,c.ExDate=s.Date,c.ExTime=s.Time,e[i]=c,++i}return e},this.GetDataRange=function(t,e){if(!Te.IsNonEmptyArray(this.Data))return null;for(var a={},i=0;i<this.Data.length;++i){var r=this.Data[i];if(r.Date==t.Date&&(Te.IsNumber(t.Time)?r.Time==t.Time&&(a.Start={Index:i,Date:r.Date,Time:r.Time}):a.Start={Index:i,Date:r.Date}),(r.Date=e.Date)&&(Te.IsNumber(e.Time)?r.Time==e.Time&&(a.End={Index:i,Date:r.Date,Time:r.Time}):a.End={Index:i,Date:r.Date}),a.Start&&a.End)return a}return null},this.ExportArrayData=function(t,e){if(!Te.IsNonEmptyArray(this.Data))return null;var a=0,i=this.Data.length-1;e&&e.Start&&e.End&&Te.IsNumber(e.Start.Index)&&Te.IsNumber(e.End.Index)&&(a=e.Start.Index,i=e.End.Index);for(var r=[],n=a;n<=i&&n<this.Data.length;++n)r[n]=this.Data[n];return r},this.ExportBoolData=function(t,e){if(!Te.IsNonEmptyArray(this.Data))return null;var a=0,i=this.Data.length-1;e&&e.Start&&e.End&&Te.IsNumber(e.Start.Index)&&Te.IsNumber(e.End.Index)&&(a=e.Start.Index,i=e.End.Index);for(var r=[],n=a;n<=i&&n<this.Data.length;++n){var o=this.Data[n];r[n]=!1,Te.IsPlusNumber(o)&&(r[n]=!0)}return r},this.ExportKLineData=function(t){if(!Te.IsNonEmptyArray(this.Data))return null;var e=0,a=this.Data.length-1;t&&t.Start&&t.End&&Te.IsNumber(t.Start.Index)&&Te.IsNumber(t.End.Index)&&(e=t.Start.Index,a=t.End.Index);for(var i=[],r=[],n=[],o=[],s=[],h=[],l=[],u=[],c=e;c<=a&&c<this.Data.length;++c){var f=this.Data[c];i[c]=f.Date,r[c]=f.Open,n[c]=f.High,o[c]=f.Low,l[c]=f.Close,s[c]=f.Vol,h[c]=f.Amount,u[c]=f.Time}if(t&&t.IsOverlay)return d=[{Name:"Open",Data:r},{Name:"High",Data:n},{Name:"Low",Data:o},{Name:"Close",Data:l},{Name:"Vol",Data:s},{Name:"Amount",Data:h}];var d=[{Name:"Date",Data:i}];return(pt.IsMinutePeriod(this.Period,!0)||pt.IsSecondPeriod(this.Period))&&d.push({Name:"Time",Data:u}),d.push({Name:"Open",Data:r},{Name:"High",Data:n},{Name:"Low",Data:o},{Name:"Close",Data:l},{Name:"Vol",Data:s},{Name:"Amount",Data:h}),d},this.ExportMinuteData=function(t){if(!Te.IsNonEmptyArray(this.Data))return null;var e=[],a=[],i=[],r=[],n=[],o=[],s=[],h=[],l=[],u=[],c=0,f=this.Data.length-1;t&&t.Start&&t.End&&Te.IsNumber(t.Start.Index)&&Te.IsNumber(t.End.Index)&&(c=t.Start.Index,f=t.End.Index);for(var d=c;d<=f&&d<this.Data.length;++d){var C=this.Data[d];e[d]=C.Date,a[d]=C.Open,i[d]=C.High,r[d]=C.Low,s[d]=C.Close,n[d]=C.Vol,o[d]=C.Amount,h[d]=C.Time,u[d]=C.AvPrice,l[d]=C.Position}var p=[{Name:"Open",Data:a},{Name:"High",Data:i},{Name:"Low",Data:r},{Name:"Close",Data:s},{Name:"Vol",Data:n},{Name:"Amount",Data:o},{Name:"AvPrice",Data:u},{Name:"Position",Data:l}];return t&&t.IsOverlay?p:(p.splice(0,0,{Name:"Date",Data:e},{Name:"Time",Data:h}),p)}}pt.DateTimeToNumber=function(t){return 1e4*t.Date+t.Time},pt.GetKLineDataTime=function(t){var e={Date:t.Date,Time:0};return Te.IsNumber(t.Time)&&(e.Time=t.Time),e},pt.GetFirday=function(t){var e=new Date(parseInt(t/1e4),t/100%100-1,t%100),a=e.getDay();if(5==a)return t;var i=e.getTime();a<5?i+=864e5*(5-a):i-=864e5*(a-5);e.setTime(i);var r=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();e.getDay();return r},pt.GetSunday=function(t){var e=new Date(parseInt(t/1e4),t/100%100-1,t%100),a=e.getDay();if(0==a)return t;var i=e.getTime();a>0&&(i+=864e5*(7-a));e.setTime(i);var r=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();e.getDay();return r},pt.GetQuarter=function(t){var e=parseInt(t%1e4/100);return 1==e||2==e||3==e?1:4==e||5==e||6==e?2:7==e||8==e||9==e?3:10==e||11==e||12==e?4:0},pt.GetHalfYear=function(t){var e=parseInt(t/1e4);return t%1e4<=630?1e4*e+630:1e4*e+1231};var mt=4e4,Dt=49999;pt.IsDayPeriod=function(t,e){return 1==t||2==t||3==t||9==t||21==t||22==t||(t>mt&&t<=Dt||0==t&&1==e)};var vt=2e4,gt=29999;pt.IsMinutePeriod=function(t,e){return 5==t||6==t||7==t||8==t||11==t||12==t||(t>vt&&t<=gt||4==t&&1==e)};var St=3e4,Tt=32e3;function It(){this.ChartPaint,this.Data,this.Type=0}function yt(t,e,a,i){this.X=t,this.Y=e,this.Width=a,this.Height=i}pt.IsSecondPeriod=function(t){return t>St&&t<=Tt},pt.IsTickPeriod=function(t){return 10==t},pt.GetPeriodName=function(t){var e=new C.default([[0,"日线"],[1,"周线"],[2,"月线"],[3,"年线"],[9,"季线"],[21,"双周"],[22,"半年"],[4,"1分"],[5,"5分"],[6,"15分"],[7,"30分"],[8,"60分"],[11,"2小时"],[12,"4小时"],[10,"分笔"]]);return e.has(t)?e.get(t):""};var xt=new function(){this.DataMap=new C.default([["ChartKLine",{Create:function(t){return new Et}}],["ChartMinuteVolumBar",{Create:function(t){return new Mt}}],["ChartMinutePriceLine",{Create:function(t){return new Kt}}]]),this.Create=function(t,e){return this.DataMap.has(t)?this.DataMap.get(t).Create(e):(D.Warn("[ChartPaintFactory::Create] can't find class="+t+"."),null)},this.Add=function(t,e){this.DataMap.set(t,{Create:e.Create})}};function wt(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="IChartPainting",this.Data=new pt,this.NotSupportMessage=null,this.MessageFont=ia.Index.NotSupport.Font,this.MessageColor=ia.Index.NotSupport.TextColor,this.IsDrawFirst=!1,this.IsShow=!0,this.GetEventCallback,this.SelectedLineWidth=ia.SelectedChart.LineWidth,this.SelectedLineColor=ia.SelectedChart.LineColor,this.SelectedRadius=ia.SelectedChart.Radius,this.SelectedPointMinSpace=ia.SelectedChart.MinSpace,this.SelectedBGColor=ia.SelectedChart.BGColor,this.DrawSelectedStatus,this.PtInChart,this.Draw=function(){},this.GetBorder=function(){return this.ChartFrame.IsHScreen?this.ChartBorder.GetHScreenBorder():this.ChartBorder.GetBorder()},this.ClipClient=function(t){if(1==t)var e=this.ChartBorder.GetLeftEx(),a=this.ChartBorder.GetRightEx(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetBottom();else e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetTopEx(),r=this.ChartBorder.GetBottomEx();this.Canvas.beginPath(),this.Canvas.rect(e,i,a-e,r-i),this.Canvas.clip()},this.GetYFromData=function(t,e){return this.ChartFrame.GetYFromData(t,e)},this.IsMinuteFrame=function(){return"MinuteFrame"==this.ChartFrame.ClassName||"MinuteHScreenFrame"==this.ChartFrame.ClassName||"OverlayMinuteFrame"==this.ChartFrame.ClassName||"OverlayMinuteHScreenFrame"==this.ChartFrame.ClassName},this.DrawNotSupportmessage=function(){this.Canvas.font=this.MessageFont,this.Canvas.fillStyle=this.MessageColor;var t=this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()/2,e=this.ChartBorder.GetTopEx()+this.ChartBorder.GetHeightEx()/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.NotSupportMessage,t,e)},this.GetTooltipData=function(t,e,a){return!1},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset;this.ChartFrame.GlobalOption&&this.ChartFrame.GlobalOption.IsValueFullRange&&(e=0,t=this.Data.Data.length);var a={Min:null,Max:null};if(!this.Data||!this.Data.Data)return a;for(var i=e,r=0;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];null==n||isNaN(n)||(null==a.Max&&(a.Max=n),null==a.Min&&(a.Min=n),a.Max<n&&(a.Max=n),a.Min>n&&(a.Min=n))}return a},this.GetDynamicFont=function(t,e,a,i,r,n){var o=A();if((a*=o)==(i*=o))return a.toFixed(0)+"px "+n;var s=t+e;return r&&(0==r.Type?r.Value>0&&(s=t*r.Value):1==r.Type?r.Value>0&&(s=(t+e)*r.Value):2==r.Type&&Te.IsNumber(r.Value)&&(s=t+e+2*r.Value*o)),s<i?s=i:s>a&&(s=a),s.toFixed(0)+"px "+n},this.GetLockRect=function(){return this.ChartFrame.GetLockRect()},this.SetFillStyle=function(t,e,a,i,r){if(Array.isArray(t)){var n=this.Canvas.createLinearGradient(e,a,i,r),o=1/t.length;for(var s in t)n.addColorStop(s*o,t[s]);this.Canvas.fillStyle=n}else this.Canvas.fillStyle=t},this.GetDynamicIconSize=function(t,e,a,i,r){var n=A();if((a*=n)==(i*=n))return a;var o=t+e-2*n;return r&&(0==r.Type?r.Value>0&&(o=t*r.Value):1==r.Type?r.Value>0&&(o=(t+e)*r.Value):2==r.Type&&Te.IsNumber(r.Value)&&(o=t+e+2*r.Value*n)),o<i?o=i:o>a&&(o=a),o},this.GetFontHeight=function(t){return O(this.Canvas,t,"擎")},this.DrawLinePoint=function(t){var e=!0===this.ChartFrame.IsHScreen;if(!e&&this.IsShow){var a=this.IsMinuteFrame(),i=this.ChartFrame.DataWidth,r=this.ChartFrame.DistanceWidth,n=this.ChartFrame.XPointCount;if(e)var o=(h=this.ChartBorder.GetHScreenBorder()).BottomEx,s=h.TopEx+r/2+ia.FrameLeftMargin;else{var h;s=(h=this.ChartBorder.GetBorder()).LeftEx+r/2+ia.FrameLeftMargin,o=h.RightEx}var l=this.GetLockRect();l&&(o=e?l.Top:l.Left);var u=A();this.Canvas.save(),this.ClipClient(e),this.Canvas.lineWidth=this.SelectedLineWidth*u,this.Canvas.strokeStyle=this.SelectedLineColor,this.SelectedBGColor&&(this.Canvas.fillStyle=this.SelectedBGColor);var c=this.SelectedRadius,f=Math.ceil(this.SelectedPointMinSpace/(i+r));if(f<=0&&(f=1),a){var d=(h.Right-h.Left)/n;f=Math.ceil(this.SelectedPointMinSpace/d)}var C=0,p=null,m=null;t&&(t.KLineClose?C=1:t.MinuteVolBar?C=2:t.MinuteOverlayPrice?C=1==t.OverlayType?1:3:t.OverlayKLine?(C=4,p=this.GetFirstOpen()):t.StackedBar&&(C=5));for(var D=this.Data.DataOffset,v=0,g=0;D<this.Data.Data.length&&v<n;++D,++v,++g,s+=i+r){var S=null;if(1==C){var T=this.Data.Data[D];Te.IsNumber(T.Close)&&(S=T.Close)}else if(2==C){T=this.Data.Data[D];Te.IsNumber(T.Vol)&&(S=T.Vol)}else if(3==C){var I=this.Data.Data[D].Close;if(null==I)continue;S=I/this.YClose*this.MainYClose}else if(4==C){var y=this.Data.Data[D];null==m&&(m=y.Open),S=y.Close/m*p}else if(5==C){var x=this.Data.Data[D];if(!Te.IsNonEmptyArray(x))continue;var w=0,F=0;for(g=0;g<x.length;++g){var E=x[g];Te.IsNumber(E)&&(0!=E&&(E>0?w+=E:E<0&&(F+=E)))}S=(w+F)/2}else S=this.Data.Data[D];if(null!=S&&!(g<f)){if(g=0,a)var b=this.ChartFrame.GetXFromIndex(v);else{var L=s+i;if(L>o)break;b=s+(L-s)/2}var M=this.GetYFromData(S,!1);if(b>o)break;this.Canvas.beginPath(),this.Canvas.arc(b,M,c,0,360,!1),this.Canvas.closePath(),this.SelectedBGColor&&this.Canvas.fill(),this.Canvas.stroke()}}this.Canvas.restore()}},this.PtInLine=function(t,e,a){if(this.IsShow&&!this.ChartFrame.IsMinSize){var i=!0===this.ChartFrame.IsHScreen;if(!i){var r=this.IsMinuteFrame(),n=this.ChartFrame.DataWidth,o=this.ChartFrame.DistanceWidth,s=this.ChartFrame.XPointCount;if(i)var h=(u=this.ChartBorder.GetHScreenBorder()).BottomEx,l=u.TopEx+o/2+ia.FrameLeftMargin;else{var u;l=(u=this.ChartBorder.GetBorder()).LeftEx+o/2+ia.FrameLeftMargin,h=u.RightEx}var c=this.GetLockRect();if(c&&(h=i?c.Top:c.Left),t<l||t>h)return null;if(e>u.BottomEx||e<u.TopEx)return null;var f={},d={},C=0;a&&(a.KLineClose?C=1:a.MinuteOverlayPrice&&(C=1==a.OverlayType?1:3));for(var p=this.Data.DataOffset,m=0;p<this.Data.Data.length&&m<s;++p,++m,l+=n+o){var D=null;if(1==C){var v=this.Data.Data[p];Te.IsNumber(v.Close)&&(D=v.Close)}else if(3==C){var g=this.Data.Data[p].Close;if(null==g)continue;D=g/this.YClose*this.MainYClose}else D=this.Data.Data[p];if(null!=D){if(r)var S=this.ChartFrame.GetXFromIndex(m);else{var T=l+n;if(T>h)break;S=l+(T-l)/2}var I=this.GetYFromData(D,!1);if(!(S<t)){if(S==t){f.X=d.X=S,f.Y=d.Y=I;break}d.X=S,d.Y=I;break}if(f.X=S,f.Y=I,t>h)break}}if(!Te.IsNumber(f.X)||!Te.IsNumber(f.Y))return null;if(!Te.IsNumber(d.X)||!Te.IsNumber(d.Y))return null;if(t==f.X||e==f.Y)return{Identify:this.Identify,Chart:this};if(t==d.X||e==d.Y)return{Identify:this.Identify,Chart:this};return this.Canvas.beginPath(),f.X==d.X?(this.Canvas.moveTo(f.X-5,f.Y),this.Canvas.lineTo(f.X+5,f.Y),this.Canvas.lineTo(d.X+5,d.Y),this.Canvas.lineTo(d.X-5,d.Y)):(this.Canvas.moveTo(f.X,f.Y+5),this.Canvas.lineTo(f.X,f.Y-5),this.Canvas.lineTo(d.X,d.Y-5),this.Canvas.lineTo(d.X,d.Y+5)),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e)?{Identify:this.Identify,Chart:this}:null}}},this.PtInBar=function(t,e,a){if(!this.IsShow||this.ChartFrame.IsMinSize)return null;if(!0===this.ChartFrame.IsHScreen)return null;var i=this.ChartFrame.DataWidth,r=this.ChartFrame.DistanceWidth,n=this.ChartBorder.GetBorder(),o=n.LeftEx+r/2+ia.FrameLeftMargin,s=n.RightEx,h=this.ChartFrame.XPointCount,l=this.GetLockRect();if(l&&(s=l.Left),t<o||t>s)return null;if(e>n.BottomEx||e<n.TopEx)return null;var u=this.IsMinuteFrame(),c=this.ChartFrame.GetYFromData(0),f=null,d=!1,C=!1;a&&(a.BarWidth>0&&(f=a.BarWidth),1==a.MinuteVolBar?(d=!0,f=4):1==a.StackedBar&&(C=!0));for(var p=this.Data.DataOffset,m=0;p<this.Data.Data.length&&m<h;++p,++m,o+=i+r){var D=this.Data.Data[p];if(null!=D){if(u)var v=(g=this.ChartFrame.GetXFromIndex(m)-f/2)+f;else{var g=o;if((v=o+i)>s)break}if(d){if(!Te.IsNumber(D.Vol))continue;var S=F=this.ChartFrame.GetYFromData(D.Vol),T=c}else if(C){var I=0,y=0;if(!Te.IsNonEmptyArray(D))continue;for(var x=0;x<D.length;++x){var w=D[x];Te.IsNumber(w)&&(0!=w&&(w>0?I+=w:w<0&&(y+=w)))}S=this.ChartFrame.GetYFromData(I),T=this.ChartFrame.GetYFromData(y)}else{var F;S=F=this.ChartFrame.GetYFromData(D),T=c}S>T&&(S=c,T=F);var E=g,b=v;if(f>0&&(b=(E=g+(v-g)/2-f/2)+f),t>=E&&t<=b&&e>=S&&e<=T)return{Identify:this.Identify,Chart:this};if(v>t)break}}return null},this.PtInKBar=function(t,e,a){if(!this.IsShow||this.ChartFrame.IsMinSize)return null;var i=!0===this.ChartFrame.IsHScreen;if(i)return null;var r,n=this.ChartFrame.DataWidth,o=this.ChartFrame.DistanceWidth,s=(r=this.ChartBorder.GetBorder()).LeftEx+o/2+ia.FrameLeftMargin,h=r.RightEx,l=this.ChartFrame.XPointCount;i&&(s=(r=this.ChartBorder.GetHScreenBorder()).TopEx+o/2+ia.FrameLeftMargin,h=r.BottomEx);if(t<s||t>h)return null;if(e>r.BottomEx||e<r.TopEx)return null;var u=null,c=0,f=null;a&&a.OverlayKLine&&(c=1,f=this.GetFirstOpen());for(var d=this.Data.DataOffset,C=0;d<this.Data.Data.length&&C<l;++d,++C,s+=n+o){var p=this.Data.Data[d];if(null!=p.Open&&null!=p.High&&null!=p.Low&&null!=p.Close){null==u&&(u=p.Open);var m=s+n;if(m>h)break;if(t>=s&&t<=m){if(1==c)var D=this.GetYFromData(p.Low/u*f,!1),v=this.GetYFromData(p.High/u*f,!1);else D=this.GetYFromData(p.Low,!1),v=this.GetYFromData(p.High,!1);if(e<=D&&e>=v)return{Identify:this.Identify,Chart:this}}if(m>t)break}}},this.IsShowIndexTitleOnly=function(){return!!(this.ChartFrame&&this.ChartFrame.ChartBorder&&this.ChartFrame.ChartBorder.IsShowTitleOnly)},this.ExportArrayData=function(t,e){var a=this.Data.ExportArrayData(t,e);return[{Name:this.Name,Data:a}]},this.ExportBoolData=function(t,e){var a=this.Data.ExportBoolData(t,e);return[{Name:this.Name,Data:a}]},this.GetArrayItemData=function(t){if(!t)return null;if(!Te.IsNumber(t.Index))return null;if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return null;var e=t.Index;return e<0||e>=this.Data.Data.length?null:[{Value:this.Data.Data[e],Color:this.Color,Name:this.Name}]}}var Ft=[[48,10],[44,10],[40,9],[36,9],[32,8],[28,8],[24,7],[20,7],[18,6],[16,6],[15,5],[13,5],[9,4],[7,4],[5,4],[3,3],[3,1],[2,1],[1,1],[1,0]];function Et(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartKLine",this.Symbol,this.DrawType=0,this.CloseLineColor=ia.CloseLineColor,this.CloseLineAreaColor=ia.CloseLineAreaColor,this.CloseLineWidth=ia.CloseLineWidth,this.UpColor=ia.UpBarColor,this.DownColor=ia.DownBarColor,this.UnchagneColor=ia.UnchagneBarColor,this.ColorData,this.TradeData,this.TradeIcon=ia.KLine.TradeIcon,this.TooltipRect=[],this.InfoTooltipRect=[],this.TradeIconTooltipRect=[],this.IsShowMaxMinPrice=!0,this.IsShowKTooltip=!0,this.TextFont=ia.KLine.MaxMin.Font,this.TextColor=ia.KLine.MaxMin.Color,this.InfoData,this.InfoPosition=0,this.PtMax,this.PtMin,this.TickSymbol="╳",this.TickFontName="arial",this.Period,this.ShowRange={},this.CustomKLine,this.DrawKRange={Start:null,End:null},this.IsThinAKBar=!0,this.HighLowBarColor=ia.HighLowBarColor,this.HLCAreaConfig={HighLineColor:ia.HLCArea.HighLineColor,LowLineColor:ia.HLCArea.LowLineColor,CloseLineColor:ia.HLCArea.CloseLineColor,LineWidth:ia.HLCArea.LineWidth,UpAreaColor:ia.HLCArea.UpAreaColor,DownAreaColor:ia.HLCArea.DownAreaColor},this.VirtualBarConfig={Color:ia.VirtualKLine.Color,LineDash:ia.VirtualKLine.LineDash},this.FFKChart,this.OrderFlow={UpColor:{BG:ia.OrderFlow.UpColor.BG,Border:ia.OrderFlow.UpColor.Border},DownColor:{BG:ia.OrderFlow.DownColor.BG,Border:ia.OrderFlow.DownColor.Border},UnchagneColor:{BG:ia.OrderFlow.UnchagneColor.BG,Border:ia.OrderFlow.UnchagneColor.Border},Text:{Color:ia.OrderFlow.Text.Color,Family:ia.OrderFlow.Text.Family,FontMaxSize:ia.OrderFlow.Text.FontMaxSize,MaxValue:ia.OrderFlow.Text.MaxValue},Line:{UpDownColor:ia.OrderFlow.Line.UpDownColor,MiddleColor:ia.OrderFlow.Line.MiddleColor},POCGBColor:ia.OrderFlow.POCGBColor,ShowType:0,AskBarColor:ia.OrderFlow.AskBarColor,BidBarColor:ia.OrderFlow.BidBarColor,AlwaysShowOrderText:ia.OrderFlow.AlwaysShowOrderText,IsShowAskText:!0,IsShowAskBar:!1,IsShowBidText:!0,IsShowBidBar:!1,IsShowPOCBG:!0},this.OrderFlow_Style2={BarWidth:ia.OrderFlow_Style2.BarWidth,UpColor:ia.OrderFlow_Style2.UpColor,DownColor:ia.OrderFlow_Style2.DownColor,UnchagneColor:ia.OrderFlow_Style2.UnchagneColor},this.OrderFlow_Style3={BarWidth:ia.OrderFlow_Style3.BarWidth,UpColor:ia.OrderFlow_Style3.UpColor,DownColor:ia.OrderFlow_Style3.DownColor,UnchagneColor:ia.OrderFlow_Style3.UnchagneColor},this.IsShowOrderText=!1,this.AryOrderFlowBorder=[],this.ChartHeatMap,this.ReloadResource=function(t){this.TextFont=ia.KLine.MaxMin.Font,this.TextColor=ia.KLine.MaxMin.Color,this.CloseLineColor=ia.CloseLineColor,this.CloseLineAreaColor=ia.CloseLineAreaColor,this.CloseLineWidth=ia.CloseLineWidth,this.UpColor=ia.UpBarColor,this.DownColor=ia.DownBarColor,this.UnchagneColor=ia.UnchagneBarColor,this.HighLowBarColor=ia.HighLowBarColor,this.OrderFlow.UpColor={BG:ia.OrderFlow.UpColor.BG,Border:ia.OrderFlow.UpColor.Border},this.OrderFlow.DownColor={BG:ia.OrderFlow.DownColor.BG,Border:ia.OrderFlow.DownColor.Border},this.OrderFlow.UnchagneColor={BG:ia.OrderFlow.UnchagneColor.BG,Border:ia.OrderFlow.UnchagneColor.Border},this.OrderFlow.Text={Color:ia.OrderFlow.Text.Color,Family:ia.OrderFlow.Text.Family,FontMaxSize:ia.OrderFlow.Text.FontMaxSize,MaxValue:ia.OrderFlow.Text.MaxValue},this.OrderFlow.Line={UpDownColor:ia.OrderFlow.Line.UpDownColor,MiddleColor:ia.OrderFlow.Line.MiddleColor}},this.ClearCustomKLine=function(){this.CustomKLine=null},this.GetCustomKLine=function(t){if(!this.CustomKLine)return null;if(!t)return null;var e=1e6*t.Date;return Te.IsNumber(t.Time)&&(e+=t.Time),this.CustomKLine.has(e)?this.CustomKLine.get(e):null},this.DrawHeatMap=function(){this.ChartHeatMap&&(this.ChartHeatMap.Canvas=this.Canvas,this.ChartHeatMap.ChartBorder=this.ChartBorder,this.ChartHeatMap.ChartFrame=this.ChartFrame,this.ChartHeatMap.Data=this.Data,this.ChartHeatMap.Draw())},this.ClearHeatMap=function(){this.ChartHeatMap=null},this.CreateHeatMap=function(){this.ChartHeatMap=new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartHeatMap",this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize){this.ChartFrame.IsHScreen;for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetBorder(),i=a.LeftEx+ia.FrameLeftMargin,r=a.RightEx,n=this.ChartFrame.XPointCount,o=this.Data.DataOffset,s=0;o<this.Data.Data.length&&s<n;++o,++s,i+=t+e){var h=this.Data.Data[o];if(h.HeatMap){var l=i,u=i+t;if(u>r)break;this.DrawHeatMap(l,u+e,h.HeatMap)}}}},this.DrawHeatMap=function(t,e,a){if(Te.IsNonEmptyArray(a.Order)){var i=this.ChartFrame.HorizontalMax,r=this.ChartFrame.HorizontalMin,n=0;Te.IsNumber(a.PriceOffset)&&(n=this.GetPriceYOffset(a.PriceOffset));for(var o=0;o<a.Order.length;++o){var s=a.Order[o];if(Te.IsNumber(s.Price)&&(s.Color&&!(s.Price>i||s.Price<r))){var h=this.GetYFromData(s.Price,!1),l={Left:t,Right:e,Bottom:h+n/2,Top:h-n/2};l.Width=l.Right-l.Left,l.Height=l.Bottom-l.Top,this.Canvas.fillStyle=s.Color,this.Canvas.fillRect(l.Left,l.Top,l.Width,l.Height)}}}},this.GetPriceYOffset=function(t){var e=this.ChartFrame,a=e.ChartBorder.GetHeightEx()*t/(e.HorizontalMax-e.HorizontalMin);return a}}},this.DrawAKLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=(o=this.ChartBorder.GetHScreenBorder()).TopEx+a/2+ia.FrameLeftMargin,n=o.BottomEx;else{var o;r=(o=this.ChartBorder.GetBorder()).LeftEx+a/2+ia.FrameLeftMargin,n=o.RightEx}var s=this.UpColor,h=this.DownColor,l=this.UnchagneColor,u={X:null,Y:null,Value:null,Align:"left"},c={X:null,Y:null,Value:null,Align:"left"};this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;var f=null;this.GetEventCallback&&(f=this.GetEventCallback(w.ON_CUSTOM_UNCHANGE_KLINE_COLOR));for(var d=this.Data.DataOffset,C=0;d<this.Data.Data.length&&C<i;++d,++C,r+=e+a,++this.ShowRange.DataCount){var p=this.Data.Data[d];if(this.ShowRange.End=d,null!=p.Open&&null!=p.High&&null!=p.Low&&null!=p.Close){var m=r,D=r+e;if(D>n)break;var v=m+(D-m)/2,g=this.GetYFromData(p.Low,!1),S=this.GetYFromData(p.High,!1),T=this.GetYFromData(p.Open,!1),I=this.GetYFromData(p.Close,!1);if(this.DrawKRange.End=d,(null==u.Value||u.Value<p.High)&&(u.X=v,u.Y=S,u.Value=p.High,u.Align=C<i/2?"left":"right"),(null==c.Value||c.Value>p.Low)&&(c.X=v,c.Y=g,c.Value=p.Low,c.Align=C<i/2?"left":"right"),l=this.UnchagneColor,p.Open<p.Close)this.Canvas.strokeStyle=this.UpColor;else if(p.Open>p.Close)this.Canvas.strokeStyle=this.DownColor;else{if(f&&f.Callback){var y={KItem:p,DataIndex:d,DefaultColor:l,BarColor:null};f.Callback(f,y,this),y.BarColor&&(l=y.BarColor)}this.Canvas.strokeStyle=l}if(this.ColorData&&(s=h=l=d<this.ColorData.length&&this.ColorData[d]>0?this.UpColor:this.DownColor),0==this.IsThinAKBar&&e>=9){var x={YLow:g,YHigh:S,YOpen:T,YClose:I,X:v,Left:m,Right:D},F={UpColor:s,DownColor:h,UnchangeColor:l};this.DrawAKBar(p,e,t,x,F)}else this.Canvas.beginPath(),t?p.High==p.Low&&e<4?(this.Canvas.moveTo(S,_(v)),this.Canvas.lineTo(g-1,_(v))):(this.Canvas.moveTo(S,_(v)),this.Canvas.lineTo(g,_(v))):p.High==p.Low&&e<4?(this.Canvas.moveTo(_(v),S),this.Canvas.lineTo(_(v),g+1)):(this.Canvas.moveTo(_(v),S),this.Canvas.lineTo(_(v),g)),this.Canvas.stroke(),e>=4&&(this.Canvas.beginPath(),t?(this.Canvas.moveTo(_(T),m),this.Canvas.lineTo(_(T),v)):(this.Canvas.moveTo(m,_(T)),this.Canvas.lineTo(v,_(T))),this.Canvas.stroke(),this.Canvas.beginPath(),t?(this.Canvas.moveTo(_(I),D),this.Canvas.lineTo(_(I),v)):(this.Canvas.moveTo(D,_(I)),this.Canvas.lineTo(v,_(I))),this.Canvas.stroke());if(0==this.Data.DataType){var E={Xleft:m,XRight:D,YMax:S,XCenter:v,YMin:g,DayData:p,Index:C};this.DrawInfo(E)}}}this.PtMax=u,this.PtMin=c},this.DrawAKBar=function(t,e,a,i,r){var n=e/3,o=k(i.Left),s=[o,k(o+n),k(o+2*n),k(o+3*n)],h=i.YHigh,l=i.YLow,u=i.YOpen,c=i.YClose;if(t.Open<t.Close?(this.Canvas.strokeStyle=r.UpColor,this.Canvas.fillStyle=r.UpColor):t.Open>t.Close?(this.Canvas.strokeStyle=r.DownColor,this.Canvas.fillStyle=r.DownColor):(this.Canvas.strokeStyle=r.UnchangeColor,this.Canvas.fillStyle=r.UnchangeColor),a)if(t.High==t.Low){var f=h-n/2;this.Canvas.fillRect(f,s[1],n,s[2]-s[1])}else this.Canvas.fillRect(h,s[1],l-h,s[2]-s[1]);else if(t.High==t.Low){f=h-n/2;this.Canvas.fillRect(s[1],f,s[2]-s[1],n)}else this.Canvas.fillRect(s[1],h,s[2]-s[1],l-h);f=u-n/2;a?this.Canvas.fillRect(f,s[0],n,s[1]-s[0]):this.Canvas.fillRect(s[0],f,s[1]-s[0],n);f=c-n/2;a?this.Canvas.fillRect(f,s[2],n,s[3]-s[2]):this.Canvas.fillRect(s[2],f,s[3]-s[2],n)},this.DrawCloseArea=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=(s=this.ChartBorder.GetHScreenBorder()).TopEx+a/2+ia.FrameLeftMargin,n=s.BottomEx,o=s.TopEx;else{var s;r=(s=this.ChartBorder.GetBorder()).LeftEx+a/2+ia.FrameLeftMargin,n=s.RightEx,o=s.LeftEx}var h=!0,l=null;this.Canvas.beginPath(),this.Canvas.strokeStyle=this.CloseLineColor,Te.IsNumber(this.CloseLineWidth)&&(this.Canvas.lineWidth=this.CloseLineWidth);var u=null;if(this.Data.DataOffset>0&&((p=this.Data.Data[this.Data.DataOffset-1])&&Te.IsNumber(p.Close))){var c=o,f=this.GetYFromData(p.Close,!1);t?(this.Canvas.moveTo(f,c),l={X:f,Y:c}):(this.Canvas.moveTo(c,f),l={X:c,Y:f}),h=!1}this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;for(var d=this.Data.DataOffset,C=0;d<this.Data.Data.length&&C<i;++d,++C,r+=e+a,++this.ShowRange.DataCount){var p=this.Data.Data[d];if(this.ShowRange.End=d,null!=p.Open&&null!=p.High&&null!=p.Low&&null!=p.Close){var m=r,D=r+e;if(D>n)break;c=m+(D-m)/2,f=this.GetYFromData(p.Close,!1);this.DrawKRange.End=d,h?(t?(this.Canvas.moveTo(f,c),l={X:f,Y:c}):(this.Canvas.moveTo(c,f),l={X:c,Y:f}),h=!1):t?this.Canvas.lineTo(f,c):this.Canvas.lineTo(c,f),d==this.Data.Data.length-1&&(u={X:c,Y:f,XLeft:m,XRight:D,KItem:p,ChartRight:n})}}if(this.DrawLastPointEvent(u),!h){if(this.Canvas.stroke(),t?(this.Canvas.lineTo(s.Left,c),this.Canvas.lineTo(s.Left,l.Y)):(this.Canvas.lineTo(c,s.Bottom),this.Canvas.lineTo(l.X,s.Bottom)),this.Canvas.closePath(),Array.isArray(this.CloseLineAreaColor))if(t){var v=this.Canvas.createLinearGradient(this.ChartBorder.GetRightEx(),this.ChartBorder.GetTop(),this.ChartBorder.GetLeft(),this.ChartBorder.GetTop());v.addColorStop(0,this.CloseLineAreaColor[0]),v.addColorStop(1,this.CloseLineAreaColor[1]),this.Canvas.fillStyle=v}else{var g=this.Canvas.createLinearGradient(l.X,this.ChartBorder.GetTopEx(),l.X,this.ChartBorder.GetBottom());g.addColorStop(0,this.CloseLineAreaColor[0]),g.addColorStop(1,this.CloseLineAreaColor[1]),this.Canvas.fillStyle=g}else this.Canvas.fillStyle=this.CloseLineAreaColor;this.Canvas.fill()}},this.DrawCloseLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=(o=this.ChartBorder.GetHScreenBorder()).TopEx+a/2+ia.FrameLeftMargin,n=o.BottomEx;else{var o;r=(o=this.ChartBorder.GetBorder()).LeftEx+a/2+ia.FrameLeftMargin,n=o.RightEx}var s=!0;this.Canvas.beginPath(),this.Canvas.strokeStyle=this.CloseLineColor,Te.IsNumber(this.CloseLineWidth)&&(this.Canvas.lineWidth=this.CloseLineWidth),this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<i;++h,++l,r+=e+a,++this.ShowRange.DataCount){var u=this.Data.Data[h];if(this.ShowRange.End=h,null!=u.Open&&null!=u.High&&null!=u.Low&&null!=u.Close){var c=r+e;if(c>n)break;var f=r+(c-r)/2,d=this.GetYFromData(u.Close,!1);this.DrawKRange.End=h,s?(t?this.Canvas.moveTo(d,f):this.Canvas.moveTo(f,d),s=!1):t?this.Canvas.lineTo(d,f):this.Canvas.lineTo(f,d)}}0==s&&this.Canvas.stroke()},this.DrawKBar=function(){var t,e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=(t=this.ChartBorder.GetBorder()).LeftEx+i/2+ia.FrameLeftMargin,n=t.RightEx,o=this.ChartFrame.XPointCount;e&&(r=(t=this.ChartBorder.GetHScreenBorder()).TopEx+i/2+ia.FrameLeftMargin,n=t.BottomEx);var s={X:null,Y:null,Value:null,Align:"left"},h={X:null,Y:null,Value:null,Align:"left"},l=this.UpColor,u=this.DownColor,c=this.UnchagneColor;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=o;var f=null;this.DrawKRange.Start=this.Data.DataOffset;var d=null;this.GetEventCallback&&(d=this.GetEventCallback(w.ON_CUSTOM_UNCHANGE_KLINE_COLOR));for(var C=this.Data.DataOffset,p=0;C<this.Data.Data.length&&p<o;++C,++p,r+=a+i,++this.ShowRange.DataCount){var m=this.Data.Data[C];if(this.ShowRange.End=C,null!=m.Open&&null!=m.High&&null!=m.Low&&null!=m.Close){var D=r,v=r+a;if(v>n)break;var g=D+(v-D)/2,S=this.GetYFromData(m.Low,!1),T=this.GetYFromData(m.High,!1),I=this.GetYFromData(m.Open,!1),y=this.GetYFromData(m.Close,!1),x=T;this.DrawKRange.End=C,(null==s.Value||s.Value<m.High)&&(s.X=g,s.Y=T,s.Value=m.High,s.Align=p<o/2?"left":"right"),(null==h.Value||h.Value>m.Low)&&(h.X=g,h.Y=S,h.Value=m.Low,h.Align=p<o/2?"left":"right"),this.ColorData&&(l=u=c=C<this.ColorData.length&&this.ColorData[C]>0?this.UpColor:this.DownColor);var F=this.GetCustomKLine(m);if(m.IsNonTrade)this.DrawVirtualBar(m,a,g,x,D,v,S,T,I,y,e);else if(F){(b=F.Color)||(b=m.Open<m.Close?l:m.Open>m.Close?u:c);var E=this.DrawType;Te.IsNumber(F.DrawType)&&(E=F.DrawType),this.DrawKBar_Custom(m,a,b,E,F,g,x,D,v,S,T,I,y,t,e)}else if(9==this.DrawType&&m.ColorData)this.DrawColorKBar(m,m.ColorData,a,g,x,D,v,S,T,I,y,e);else if(m.Open<m.Close)this.DrawKBar_Up(m,a,l,this.DrawType,g,x,D,v,S,T,I,y,e);else if(m.Open>m.Close)this.DrawKBar_Down(m,a,u,this.DrawType,g,x,D,v,S,T,I,y,e);else{var b=c;if(d&&d.Callback){var L={KItem:m,DataIndex:C,DefaultColor:b,BarColor:null};d.Callback(d,L,this),L.BarColor&&(b=L.BarColor)}this.DrawKBar_Unchagne(m,a,b,this.DrawType,g,x,D,v,S,T,I,y,e)}if(this.IsShowKTooltip&&!e){var M=Math.min(I,y),A=Math.max(I,y);Math.abs(I-y)<5&&(M=Math.min(T,M-5),A=Math.max(S,A+5)),m.IsNonTrade&&(M=T,A=S);var O=new yt(D,M,a,A-M);this.TooltipRect.push([C,O])}if(0==this.Data.DataType||1==this.Data.DataType){var N={Xleft:D,XRight:v,XCenter:g,YMax:T,YMin:S,DayData:m,Index:p};this.DrawInfo(N)}C==this.Data.Data.length-1&&(f={X:g,Y:y,XLeft:D,XRight:v,KItem:m,ChartRight:n})}}this.DrawLastPointEvent(f),this.PtMax=s,this.PtMin=h},this.DrawKBar_Up=function(t,e,a,i,r,n,o,s,h,l,u,c,f){var d=3==i||6==i;if(e>=4){if(d&&e%2!=0&&(e-=1),this.Canvas.strokeStyle=a,t.High>t.Close){if(this.Canvas.beginPath(),f)this.Canvas.moveTo(_(n),_(r)),this.Canvas.lineTo(_(3==i?Math.max(c,u):c),_(r));else if(d){var C=o+e/2;this.Canvas.moveTo(_(C),_(n)),this.Canvas.lineTo(_(C),_(Math.min(c,u)))}else this.Canvas.moveTo(_(r),_(n)),this.Canvas.lineTo(_(r),_(c));this.Canvas.stroke(),n=c}else n=c;if(this.Canvas.fillStyle=a,f?Math.abs(u-n)<1?this.Canvas.fillRect(k(n),k(o),1,k(e)):d?(this.Canvas.beginPath(),this.Canvas.rect(_(n),_(o),k(u-n),k(e)),this.Canvas.stroke()):this.Canvas.fillRect(k(n),k(o),k(u-n),k(e)):Math.abs(u-n)<1?this.Canvas.fillRect(k(o),k(n),k(e),1):d?(this.Canvas.beginPath(),this.Canvas.rect(_(o),_(n),k(e),k(u-n)),this.Canvas.stroke()):this.Canvas.fillRect(k(o),k(Math.min(n,u)),k(e),k(Math.abs(u-n))),t.Open>t.Low){if(this.Canvas.beginPath(),f)this.Canvas.moveTo(_(3==i?Math.min(c,u):n),_(r)),this.Canvas.lineTo(_(h),_(r));else if(d){C=o+e/2;this.Canvas.moveTo(_(C),_(Math.max(c,u))),this.Canvas.lineTo(_(C),_(h))}else this.Canvas.moveTo(_(r),_(n)),this.Canvas.lineTo(_(r),_(h));this.Canvas.stroke()}}else this.Canvas.beginPath(),f?(this.Canvas.moveTo(l,_(r)),this.Canvas.lineTo(h,_(r))):(this.Canvas.moveTo(_(r),l),this.Canvas.lineTo(_(r),h)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.DrawKBar_Down=function(t,e,a,i,r,n,o,s,h,l,u,c,f){var d=6==i;if(e>=4){if(d&&e%2!=0&&(e-=1),this.Canvas.strokeStyle=a,t.High>t.Close){if(this.Canvas.beginPath(),f)this.Canvas.moveTo(_(n),_(r)),this.Canvas.lineTo(_(u),_(r));else if(d){var C=o+e/2;this.Canvas.moveTo(_(C),_(n)),this.Canvas.lineTo(_(C),_(Math.min(c,u)))}else this.Canvas.moveTo(_(r),_(n)),this.Canvas.lineTo(_(r),_(u));this.Canvas.stroke(),n=u}else n=u;if(this.Canvas.fillStyle=a,f?Math.abs(c-n)<1?this.Canvas.fillRect(k(n),k(o),1,k(e)):this.Canvas.fillRect(k(n),k(o),k(c-n),k(e)):Math.abs(c-n)<1?this.Canvas.fillRect(k(o),k(n),k(e),1):d?(this.Canvas.beginPath(),this.Canvas.rect(_(o),_(Math.min(n,c)),k(e),k(Math.abs(c-n))),this.Canvas.stroke()):this.Canvas.fillRect(k(o),k(Math.min(n,c)),k(e),k(Math.abs(c-n))),t.Open>t.Low){if(this.Canvas.beginPath(),f)this.Canvas.moveTo(_(n),_(r)),this.Canvas.lineTo(_(h),_(r));else if(d){C=o+e/2;this.Canvas.moveTo(_(C),_(Math.max(c,u))),this.Canvas.lineTo(_(C),_(h))}else this.Canvas.moveTo(_(r),_(n)),this.Canvas.lineTo(_(r),_(h));this.Canvas.stroke()}}else this.Canvas.beginPath(),f?(this.Canvas.moveTo(l,_(r)),this.Canvas.lineTo(h,_(r))):(this.Canvas.moveTo(_(r),l),this.Canvas.lineTo(_(r),h)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.DrawKBar_Unchagne=function(t,e,a,i,r,n,o,s,h,l,u,c,f){if(e>=4){if(e%2!=0&&(e-=1),this.Canvas.strokeStyle=a,this.Canvas.beginPath(),t.High>t.Close){if(f)this.Canvas.moveTo(n,_(r)),this.Canvas.lineTo(u,_(r));else{var d=_(o+e/2);this.Canvas.moveTo(d,n),this.Canvas.lineTo(d,u)}n=u}else n=u;if(f?(this.Canvas.moveTo(_(n),_(o)),this.Canvas.lineTo(_(n),_(s))):(this.Canvas.moveTo(_(o),_(n)),this.Canvas.lineTo(_(o+e),_(n))),t.Open>t.Low)if(f)this.Canvas.moveTo(_(n),_(r)),this.Canvas.lineTo(_(h),_(r));else{d=_(o+e/2);this.Canvas.moveTo(d,_(n)),this.Canvas.lineTo(d,_(h))}this.Canvas.stroke()}else this.Canvas.beginPath(),f?t.High==t.Low?(this.Canvas.moveTo(l,_(r)),this.Canvas.lineTo(h-1,_(r))):(this.Canvas.moveTo(l,_(r)),this.Canvas.lineTo(h,_(r))):t.High==t.Low?(this.Canvas.moveTo(_(r),l),this.Canvas.lineTo(_(r),h+1)):(this.Canvas.moveTo(_(r),l),this.Canvas.lineTo(_(r),h)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.DrawKBar_Custom=function(t,e,a,i,r,n,o,s,h,l,u,c,f,d,C){if(r.BGColor){this.Canvas.fillStyle=r.BGColor;var p=this.ChartFrame.DistanceWidth;if(C){var m=s-p/2,D=h+p/2,v=d.RightEx,g=d.LeftEx;this.Canvas.fillRect(k(g),k(m),k(v-g),k(D-m))}else{var S=s-p/2,T=h+p/2,I=d.TopEx,y=d.BottomEx;this.Canvas.fillRect(k(S),k(I),k(T-S),k(y-I))}}e>=4?(this.Canvas.strokeStyle=a,t.High>t.Close?(this.Canvas.beginPath(),C?(this.Canvas.moveTo(_(o),_(n)),this.Canvas.lineTo(_(3==i?Math.max(f,c):f),_(n))):(this.Canvas.moveTo(_(n),_(o)),this.Canvas.lineTo(_(n),_(3==i?Math.min(f,c):f))),this.Canvas.stroke(),o=f):o=f,this.Canvas.fillStyle=a,C?Math.abs(c-o)<1?this.Canvas.fillRect(k(o),k(s),1,k(e)):3==i?(this.Canvas.beginPath(),this.Canvas.rect(_(o),_(s),k(c-o),k(e)),this.Canvas.stroke()):this.Canvas.fillRect(k(o),k(s),k(c-o),k(e)):Math.abs(c-o)<1?this.Canvas.fillRect(k(s),k(o),k(e),1):3==i?(this.Canvas.beginPath(),this.Canvas.rect(_(s),_(o),k(e),k(c-o)),this.Canvas.stroke()):this.Canvas.fillRect(k(s),k(Math.min(o,c)),k(e),k(Math.abs(c-o))),t.Open>t.Low&&(this.Canvas.beginPath(),C?(this.Canvas.moveTo(_(3==i?Math.min(f,c):o),_(n)),this.Canvas.lineTo(_(l),_(n))):(this.Canvas.moveTo(_(n),_(3==i?Math.max(f,c):o)),this.Canvas.lineTo(_(n),_(l))),this.Canvas.stroke())):(this.Canvas.beginPath(),C?(this.Canvas.moveTo(u,_(n)),this.Canvas.lineTo(l,_(n))):(this.Canvas.moveTo(_(n),u),this.Canvas.lineTo(_(n),l)),this.Canvas.strokeStyle=a,this.Canvas.stroke())},this.DrawColorKBar=function(t,e,a,i,r,n,o,s,h,l,u,c){Math.abs(u-r)<1?this.DrawColorKBar_Line(t,e,a,i,r,n,o,s,h,l,u,c):e.Border||0===e.Type?this.DrawColorKBar_Border(t,e,a,i,r,n,o,s,h,l,u,c):this.DrawColorKBar_NoBorder(t,e,a,i,r,n,o,s,h,l,u,c)},this.DrawColorKBar_Border=function(t,e,a,i,r,n,o,s,h,l,u,c){if(a>=4){a%2!=0&&(a-=1);var f=Math.max(t.Close,t.Open),d=Math.min(t.Close,t.Open);if(c)var C=Math.max(u,l),p=Math.min(u,l);else C=Math.min(u,l),p=Math.max(u,l);var m,D=Math.abs(u-l);if(t.High>f&&e.Line){if(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),c)this.Canvas.moveTo(_(h),_(i)),this.Canvas.lineTo(_(C),_(i));else{var v=n+a/2;this.Canvas.moveTo(_(v),_(h)),this.Canvas.lineTo(_(v),_(C))}this.Canvas.stroke()}if(d>t.Low&&e.Line){if(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),c)this.Canvas.moveTo(_(p),_(i)),this.Canvas.lineTo(_(s),_(i));else{v=n+a/2;this.Canvas.moveTo(_(v),_(p)),this.Canvas.lineTo(_(v),_(s))}this.Canvas.stroke()}if(c)(m=new Path2D).rect(_(p),_(n),k(D),k(a));else(m=new Path2D).rect(_(n),_(C),k(a),k(D));0==e.Type?(e.BarColor&&(this.Canvas.strokeStyle=e.BarColor,this.Canvas.stroke(m)),e.Border&&(this.Canvas.strokeStyle=e.Border.Color,this.Canvas.stroke(m))):1==e.Type&&(e.BarColor&&(this.Canvas.fillStyle=e.BarColor,this.Canvas.fill(m)),e.Border&&(this.Canvas.strokeStyle=e.Border.Color,this.Canvas.stroke(m)))}else this.DrawColorKBar_MinBar(t,e,a,i,r,n,o,s,h,l,u,c)},this.DrawColorKBar_NoBorder=function(t,e,a,i,r,n,o,s,h,l,u,c){if(a>=4){var f=Math.max(t.Close,t.Open),d=Math.min(t.Close,t.Open);if(c)var C=Math.max(u,l),p=Math.min(u,l);else C=Math.min(u,l),p=Math.max(u,l);var m,D=Math.abs(u-l);if(t.High>f&&e.Line){if(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),c)this.Canvas.moveTo(_(h),_(i)),this.Canvas.lineTo(_(C),_(i));else{var v=n+a/2;this.Canvas.moveTo(_(v),_(h)),this.Canvas.lineTo(_(v),_(C))}this.Canvas.stroke()}if(d>t.Low&&e.Line){if(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),c)this.Canvas.moveTo(_(p),_(i)),this.Canvas.lineTo(_(s),_(i));else{v=n+a/2;this.Canvas.moveTo(_(v),_(p)),this.Canvas.lineTo(_(v),_(s))}this.Canvas.stroke()}if(c)(m=new Path2D).rect(k(p),k(n),k(D),k(a));else(m=new Path2D).rect(k(n),k(C),k(a),k(D));1==e.Type&&e.BarColor&&(this.Canvas.fillStyle=e.BarColor,this.Canvas.fill(m))}else this.DrawColorKBar_MinBar(t,e,a,i,r,n,o,s,h,l,u,c)},this.DrawColorKBar_MinBar=function(t,e,a,i,r,n,o,s,h,l,u,c){e.Line&&(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),c?(this.Canvas.moveTo(_(h),_(i)),this.Canvas.lineTo(_(s),_(i))):(this.Canvas.moveTo(_(i),_(h)),this.Canvas.lineTo(_(i),_(s))),this.Canvas.stroke())},this.DrawColorKBar_Line=function(t,e,a,i,r,n,o,s,h,l,u,c){var f;if(a>=4)e.Line&&(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),c?(this.Canvas.moveTo(_(h),_(i)),this.Canvas.lineTo(_(s),_(i))):(this.Canvas.moveTo(_(i),_(h)),this.Canvas.lineTo(_(i),_(s))),this.Canvas.stroke()),0==e.Type?e.Border?f=e.Border.Color:e.BarColor&&(f=e.BarColor):1==e.Type&&(e.Border?f=e.Border.Color:e.BarColor&&(f=e.BarColor)),f&&(this.Canvas.strokeStyle=f,this.Canvas.beginPath(),c?(this.Canvas.moveTo(_(l),_(n)),this.Canvas.lineTo(_(l),_(o))):(this.Canvas.moveTo(_(n),_(l)),this.Canvas.lineTo(_(o),_(l))),this.Canvas.stroke());else if(e.Line){this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),c?(this.Canvas.moveTo(_(h),_(i)),this.Canvas.lineTo(_(s),_(i))):(this.Canvas.moveTo(_(i),_(h)),this.Canvas.lineTo(_(i),_(s))),this.Canvas.stroke()}},this.DrawVirtualBar=function(t,e,a,i,r,n,o,s,h,l,u){var c=Math.min(s,o),f=Math.max(s,o);this.Canvas.strokeStyle=this.VirtualBarConfig.Color,this.Canvas.setLineDash(this.VirtualBarConfig.LineDash),u?e>=4?this.Canvas.strokeRect(_(c),_(r),k(f-c),k(e)):(this.Canvas.beginPath(),this.Canvas.moveTo(c,_(a)),this.Canvas.lineTo(f,_(a)),this.Canvas.stroke()):e>=4?this.Canvas.strokeRect(_(r),_(c),k(e),k(f-c)):(this.Canvas.beginPath(),this.Canvas.moveTo(_(a),c),this.Canvas.lineTo(_(a),f),this.Canvas.stroke()),this.Canvas.setLineDash([])},this.DrawRenkoCandle=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=(o=this.ChartBorder.GetHScreenBorder()).TopEx+a/2+ia.FrameLeftMargin,n=o.BottomEx;else{var o;r=(o=this.ChartBorder.GetBorder()).LeftEx+a/2+ia.FrameLeftMargin,n=o.RightEx}var s={X:null,Y:null,Value:null,Align:"left"},h={X:null,Y:null,Value:null,Align:"left"};this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<i;++l,++u,r+=e+a,++this.ShowRange.DataCount){var c=this.Data.Data[l];if(this.ShowRange.End=l,null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){var f=r,d=r+e;if(d>n)break;var C=f+(d-f)/2,p=this.GetYFromData(c.Low,!1),m=this.GetYFromData(c.High,!1);this.DrawKRange.End=l,(null==s.Value||s.Value<c.High)&&(s.X=C,s.Y=m,s.Value=c.High,s.Align=u<i/2?"left":"right"),(null==h.Value||h.Value>c.Low)&&(h.X=C,h.Y=p,h.Value=c.Low,h.Align=u<i/2?"left":"right"),c.YClose<c.Close?(this.Canvas.strokeStyle=this.UpColor,this.Canvas.fillStyle=this.UpColor):c.YClose>c.Close&&(this.Canvas.strokeStyle=this.DownColor,this.Canvas.fillStyle=this.DownColor),e>=4?t?this.Canvas.fillRect(k(p),k(f),k(Math.abs(p-m)),k(e)):this.Canvas.fillRect(k(f),k(m),k(e),k(Math.abs(p-m))):(this.Canvas.beginPath(),t?(this.Canvas.moveTo(m,_(C)),this.Canvas.lineTo(p,_(C))):(this.Canvas.moveTo(_(C),m),this.Canvas.lineTo(_(C),p)),this.Canvas.stroke())}}this.PtMax=s,this.PtMin=h},this.DrawLineBreak=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount,r=a/2;if(t)var n=(s=this.ChartBorder.GetHScreenBorder()).TopEx+a/2+ia.FrameLeftMargin-r,o=s.BottomEx;else{var s;n=(s=this.ChartBorder.GetBorder()).LeftEx+a/2+ia.FrameLeftMargin-r,o=s.RightEx}var h={X:null,Y:null,Value:null,Align:"left"},l={X:null,Y:null,Value:null,Align:"left"};this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;for(var u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<i;++u,++c,n+=e+a,++this.ShowRange.DataCount){var f=this.Data.Data[u];if(this.ShowRange.End=u,null!=f.Open&&null!=f.High&&null!=f.Low&&null!=f.Close){var d=n,C=n+e+a;if(C>o)break;var p=d+(C-d)/2,m=this.GetYFromData(f.Low,!1),D=this.GetYFromData(f.High,!1);this.DrawKRange.End=u,(null==h.Value||h.Value<f.High)&&(h.X=p,h.Y=D,h.Value=f.High,h.Align=c<i/2?"left":"right"),(null==l.Value||l.Value>f.Low)&&(l.X=p,l.Y=m,l.Value=f.Low,l.Align=c<i/2?"left":"right"),f.YClose<f.Close?(this.Canvas.strokeStyle=this.UpColor,this.Canvas.fillStyle=this.UpColor):f.YClose>f.Close&&(this.Canvas.strokeStyle=this.DownColor,this.Canvas.fillStyle=this.DownColor),e>=4?t?this.Canvas.fillRect(k(m),k(d),k(Math.abs(m-D)),k(e+a)):this.Canvas.fillRect(k(d),k(D),k(e+a),k(Math.abs(m-D))):(this.Canvas.beginPath(),t?(this.Canvas.moveTo(D,_(p)),this.Canvas.lineTo(m,_(p))):(this.Canvas.moveTo(_(p),D),this.Canvas.lineTo(_(p),m)),this.Canvas.stroke())}}this.PtMax=h,this.PtMin=l},this.DrawTrade=function(){if(this.TradeData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2,r=this.ChartBorder.GetRight(),n=this.ChartFrame.XPointCount;t&&(i=this.ChartBorder.GetTop()+a/2+2,r=this.ChartBorder.GetBottom());var o=this.TradeData.Sell,s=this.TradeData.Buy,h=e;h>10&&(h=10);for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<n;++l,++u,i+=e+a){var c=this.Data.Data[l];if(null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){var f=!1,d=!1;if(o&&l<o.length&&(d=o[l]>0),s&&l<s.length&&(f=s[l]>0),d||f){var C=i+e;if(C>r)break;var p=i+(C-i)/2,m=this.GetYFromData(c.Low,!1),D=this.GetYFromData(c.High,!1);this.GetYFromData(c.Open,!1),this.GetYFromData(c.Close,!1);f&&(this.Canvas.fillStyle=this.UpColor,this.Canvas.strokeStyle=this.UnchagneColor,this.Canvas.beginPath(),t?(this.Canvas.moveTo(m-1,p),this.Canvas.lineTo(m-h-1,p-h/2),this.Canvas.lineTo(m-h-1,p+h/2)):(this.Canvas.moveTo(p,m+1),this.Canvas.lineTo(p-h/2,m+h+1),this.Canvas.lineTo(p+h/2,m+h+1)),this.Canvas.closePath(),this.Canvas.fill(),this.Canvas.stroke()),d&&(this.Canvas.fillStyle=this.DownColor,this.Canvas.strokeStyle=this.UnchagneColor,this.Canvas.beginPath(),t?(this.Canvas.moveTo(D+1,p),this.Canvas.lineTo(D+h+1,p-h/2),this.Canvas.lineTo(D+h+1,p+h/2)):(this.Canvas.moveTo(p,D-1),this.Canvas.lineTo(p-h/2,D-h-1),this.Canvas.lineTo(p+h/2,D-h-1)),this.Canvas.closePath(),this.Canvas.fill(),this.Canvas.stroke())}}}}},this.DrawTick=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2;t&&(i=this.ChartBorder.GetTop()+a/2+2);var r=this.ChartBorder.GetRight();t&&(r=this.ChartBorder.GetBottom());var n=this.ChartFrame.XPointCount,o=parseInt(e);o<=1?o=2:o>=18&&(o=18);var s=A(),h=o*s;this.Canvas.beginPath(),this.Canvas.font=o*s+"px "+this.TickFontName,this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=n,this.DrawKRange.Start=this.Data.DataOffset;for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<n;++l,++u,i+=e+a){var c=this.Data.Data[l];if(this.ShowRange.End=l,null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){var f=i+e;if(f>r)break;var d=i+(f-i)/2,C=this.ChartFrame.GetYFromData(c.Close,!1);if(this.DrawKRange.End=l,0===c.Flag?this.Canvas.fillStyle=this.UpColor:1==c.Flag?this.Canvas.fillStyle=this.DownColor:this.Canvas.fillStyle=this.UnchagneColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",t?this.Canvas.fillText(this.TickSymbol,C,d):this.Canvas.fillText(this.TickSymbol,d,C),this.IsShowKTooltip&&!t){var p=new yt(d-h/2,C-h/2,h,h);this.TooltipRect.push([l,p])}}}},this.DrawHLCArea=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=(s=this.ChartBorder.GetHScreenBorder()).TopEx+a/2+ia.FrameLeftMargin,n=s.BottomEx,o=s.TopEx;else{var s;r=(s=this.ChartBorder.GetBorder()).LeftEx+a/2+ia.FrameLeftMargin,n=s.RightEx,o=s.LeftEx}var h=new Path2D,l=new Path2D,u=new Path2D,c=new Path2D,f=new Path2D,d=[],C=[],p=[],m=!0;if(this.Data.DataOffset>0&&((y=this.Data.Data[this.Data.DataOffset-1])&&Te.IsNumber(y.Close)&&Te.IsNumber(y.High)&&Te.IsNumber(y.Low))){var D=o,v=this.GetYFromData(y.Close,!1),g=this.GetYFromData(y.High,!1),S=this.GetYFromData(y.Low,!1);t?(u.moveTo(v,D),l.moveTo(g,D),h.moveTo(S,D),c.moveTo(g,D),f.moveTo(S,D),p.push({X:v,Y:D}),d.push({X:g,Y:D}),C.push({X:S,Y:D})):(u.moveTo(D,v),l.moveTo(D,g),h.moveTo(D,S),c.moveTo(D,g),f.moveTo(D,S),p.push({X:D,Y:v}),d.push({X:D,Y:g}),C.push({X:D,Y:S})),m=!1}this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;for(var T=this.Data.DataOffset,I=0;T<this.Data.Data.length&&I<i;++T,++I,r+=e+a,++this.ShowRange.DataCount){var y=this.Data.Data[T];if(this.ShowRange.End=T,y&&Te.IsNumber(y.Close)&&Te.IsNumber(y.High)&&Te.IsNumber(y.Low)){var x=r+e;if(x>n)break;D=r+(x-r)/2,v=this.GetYFromData(y.Close,!1),g=this.GetYFromData(y.High,!1),S=this.GetYFromData(y.Low,!1);this.DrawKRange.End=T,m?(t?(u.moveTo(v,D),l.moveTo(g,D),h.moveTo(S,D),c.moveTo(g,D),f.moveTo(S,D)):(u.moveTo(D,v),l.moveTo(D,g),h.moveTo(D,S),c.moveTo(D,g),f.moveTo(D,S)),m=!1):t?(u.lineTo(v,D),l.lineTo(g,D),h.lineTo(S,D),c.lineTo(g,D),f.lineTo(S,D)):(u.lineTo(D,v),l.lineTo(D,g),h.lineTo(D,S),c.lineTo(D,g),f.lineTo(D,S)),t?(p.push({X:v,Y:D}),d.push({X:g,Y:D}),C.push({X:S,Y:D})):(p.push({X:D,Y:v}),d.push({X:D,Y:g}),C.push({X:D,Y:S}))}}if(!m){for(T=p.length-1;T>=0;--T){var w=p[T];c.lineTo(w.X,w.Y),f.lineTo(w.X,w.Y)}c.closePath(),f.closePath(),this.Canvas.fillStyle=this.HLCAreaConfig.UpAreaColor,this.Canvas.fill(c),this.Canvas.fillStyle=this.HLCAreaConfig.DownAreaColor,this.Canvas.fill(f),Te.IsNumber(this.HLCAreaConfig.LineWidth)&&(this.Canvas.lineWidth=this.HLCAreaConfig.LineWidth),this.Canvas.strokeStyle=this.HLCAreaConfig.CloseLineColor,this.Canvas.stroke(u),this.Canvas.strokeStyle=this.HLCAreaConfig.HighLineColor,this.Canvas.stroke(l),this.Canvas.strokeStyle=this.HLCAreaConfig.LowLineColor,this.Canvas.stroke(h)}},this.ClipTickClient=function(t){var e=this.GetBorder();if(1==t)var a=this.ChartBorder.GetLeftEx(),i=this.ChartBorder.GetRightEx(),r=this.ChartBorder.GetTop(),n=this.ChartBorder.GetBottom();else a=e.Left,i=e.Right,r=e.TopTitle,n=e.Bottom;this.Canvas.beginPath(),this.Canvas.rect(a,r,i-a,n-r),this.Canvas.clip()},this.ClipWindow=function(t){if(1==t)var e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRightEx(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetBottom();else e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetTopEx(),r=this.ChartBorder.GetBottom();this.Canvas.beginPath(),this.Canvas.rect(e,i,a-e,r-i),this.Canvas.clip()},this.ClipClient=function(t){if(1==t)var e=this.ChartBorder.GetLeftEx(),a=this.ChartBorder.GetRightEx(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetBottom();else{e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetTopEx(),r=this.ChartBorder.GetBottomEx();this.ChartBorder.BottomSpace>0&&(r+=1)}this.Canvas.beginPath(),this.Canvas.rect(e,i,a-e,r-i),this.Canvas.clip()},this.Draw=function(){if(this.IsShowOrderText=!1,this.TooltipRect=[],this.InfoTooltipRect=[],this.TradeIconTooltipRect=[],this.PtMax={X:null,Y:null,Value:null,Align:"left"},this.PtMin={X:null,Y:null,Value:null,Align:"left"},this.DrawKRange={Start:null,End:null},this.ChartFrame.ChartKLine={Max:null,Min:null},this.DrawHeatMap(),this.IsShow&&(!this.ChartFrame.IsMinSize||"Self Kline"!=this.Name)){if(pt.IsTickPeriod(this.Period))return this.Canvas.save(),1==this.DrawType?(this.ClipClient(this.ChartFrame.IsHScreen),this.DrawCloseLine()):4==this.DrawType?(this.ClipClient(this.ChartFrame.IsHScreen),this.DrawCloseArea()):(this.ClipTickClient(this.ChartFrame.IsHScreen),this.DrawTick()),void this.Canvas.restore();if(this.Canvas.save(),this.ClipClient(this.ChartFrame.IsHScreen),1==this.DrawType)return this.DrawCloseLine(),void this.Canvas.restore();2==this.DrawType?this.DrawAKLine():4==this.DrawType?this.DrawCloseArea():5==this.DrawType?this.DrawOrderFlow():7==this.DrawType?this.DrawOrderFlow_Style2():8==this.DrawType?this.DrawOrderFlow_Style3():9==this.DrawType?this.DrawKBar():10==this.DrawType?this.DrawRenkoCandle():12==this.DrawType?this.DrawLineBreak():13==this.DrawType?this.DrawHighLow():14==this.DrawType?this.FFKChart&&this.FFKChart.Draw&&this.FFKChart.Draw(this):15==this.DrawType?this.DrawHLCArea():this.DrawKBar(),this.TradeIcon?this.DrawTradeIcon():this.DrawTrade(),this.Canvas.restore(),this.IsShowMaxMinPrice&&(!0===this.ChartFrame.IsHScreen?this.HScreenDrawMaxMinPrice(this.PtMax,this.PtMin):this.DrawMaxMinPrice(this.PtMax,this.PtMin))}},this.DrawMaxMinPrice=function(t,e){if(null!=t.X&&null!=t.Y&&null!=t.Value&&null!=e.X&&null!=e.Y&&null!=e.Value){var a=ia.KLine.MaxMin.LeftArrow,i=ia.KLine.MaxMin.RightArrow,r=ia.KLine.MaxMin.HighYOffset,n=ia.KLine.MaxMin.LowYOffset,o=Ga(this.Symbol);this.Canvas.font=this.TextFont,this.Canvas.fillStyle=this.TextColor;var s=this.ChartBorder.GetTopEx(),h=this.ChartBorder.GetBottomEx(),l=t;1==this.ChartFrame.CoordinateType?(t.Y<e.Y&&(l=e),this.Canvas.textBaseline="top"):(t.Y>e.Y&&(l=e),this.Canvas.textBaseline="bottom"),this.Canvas.textAlign=l.Align;var u=(l.Align,l.X);Te.IsNumber(r)&&(l.Y+=r);var c=l.Value.toFixed(o);"left"==l.Align?c=a+c:c+=i,l.Y>s-2&&(this.Canvas.fillText(c,u,l.Y),this.ChartFrame.ChartKLine.Max={X:u,Y:l.Y,Text:{BaseLine:"bottom"}});var f=e;1==this.ChartFrame.CoordinateType?(e.Y>t.Y&&(f=t),this.Canvas.textBaseline="bottom"):(t.Y>e.Y&&(l=e),this.Canvas.textBaseline="top"),this.Canvas.textAlign=f.Align;u=(f.Align,f.X);Te.IsNumber(n)&&(f.Y+=n);c=e.Value.toFixed(o);"left"==f.Align?c=a+c:c+=i,f.Y<h+1&&(this.Canvas.fillText(c,u,f.Y),this.ChartFrame.ChartKLine.Min={X:u,Y:f.Y,Text:{BaseLine:"top"}})}},this.HScreenDrawMaxMinPrice=function(t,e){if(null!=t.X&&null!=t.Y&&null!=t.Value&&null!=e.X&&null!=e.Y&&null!=e.Value){var a=ia.KLine.MaxMin.LeftArrow,i=ia.KLine.MaxMin.RightArrow,r=ia.KLine.MaxMin.HighYOffset,n=ia.KLine.MaxMin.LowYOffset,o=Ga(this.Symbol),s=t.Y,h=t.X;Te.IsNumber(r)&&(s+=r),this.Canvas.save(),this.Canvas.translate(s,h),this.Canvas.rotate(90*Math.PI/180),this.Canvas.font=this.TextFont,this.Canvas.fillStyle=this.TextColor,this.Canvas.textAlign=t.Align,this.Canvas.textBaseline="bottom";var l=t.Value.toFixed(o);"left"==t.Align?l=a+l:l+=i,this.Canvas.fillText(l,0,0),this.Canvas.restore();s=e.Y,h=e.X;Te.IsNumber(n)&&(s+=n),this.Canvas.save(),this.Canvas.translate(s,h),this.Canvas.rotate(90*Math.PI/180),this.Canvas.font=this.TextFont,this.Canvas.fillStyle=this.TextColor,this.Canvas.textAlign=e.Align,this.Canvas.textBaseline="top";l=e.Value.toFixed(o);"left"==e.Align?l=a+l:l+=i,this.Canvas.fillText(l,0,0),this.Canvas.restore()}},this.DrawInfo=function(t){if(this.InfoData&&!(this.InfoData.size<=0)){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetBottom(),n=this.ChartBorder.GetTop(),o=""+t.DayData.Date;if(1==this.Data.DataType&&(o=t.DayData.Date+"-"+t.DayData.Time),this.InfoData.has(o)){var s=this.InfoData.get(o);if(s&&!(s.Data.length<=0)){this.Canvas.restore(),this.Canvas.save(),this.ClipWindow(e);var h=A(),l=a+i,u=18*h,c=!0;l<=15&&(c=!1),l<u&&(l=u);var d,p="",m=new C.default,D=t.YMax+1*h,v=t.YMin+1*h+l,g=!0,S=0;for(var T in s.Data){var I=s.Data[T],y=m.get(I.InfoType);if(y)y.Data.push(I);else{var x=ga.GetIconFont(I.InfoType);if(this.Canvas.fillStyle=x.Color,this.Canvas.font=l+"px "+x.Family,e){this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.fillText(x.HScreenText,D,t.XCenter,l);var w=new yt(t.XCenter-l/2,D-l,l,l),F={Data:new Array(I),Rect:w,Type:I.InfoType,TextRect:{X:D,Y:t.XCenter}};m.set(I.InfoType,F),D+=l}else if(this.Canvas.textBaseline="bottom",this.Canvas.textAlign="center",1===this.InfoPosition){var E=r+S;this.Canvas.fillText(x.Text,t.XCenter,E,l);w=new yt(t.XCenter-l/2,E-l,l,l),F={Data:new Array(I),Rect:w,Type:I.InfoType,TextRect:{X:t.XCenter,Y:E}};m.set(I.InfoType,F),S-=l}else if(g){this.Canvas.fillText(x.Text,t.XCenter,D,l);w=new yt(t.XCenter-l/2,D-l,l,l),F={Data:new Array(I),Rect:w,Type:I.InfoType,TextRect:{X:t.XCenter,Y:D}};m.set(I.InfoType,F),(D-=l)-l<n&&(g=!1)}else{this.Canvas.fillText(x.Text,t.XCenter,v,l);w=new yt(t.XCenter-l/2,v-l,l,l),F={Data:new Array(I),Rect:w,Type:I.InfoType,TextRect:{X:t.XCenter,Y:v}};m.set(I.InfoType,F),v+=l}}}ia.KLine.NumIcon&&(d=e?ia.KLine.NumIcon.HScreenText:ia.KLine.NumIcon.Text);var b=!0,L=!1,M=void 0;try{for(var O,N=(0,f.default)(m);!(b=(O=N.next()).done);b=!0){var P=(t=O.value)[1];if(P.Data.length>=2&&d&&c){var R=P.Data.length;R>=d.length&&(R=0),this.Canvas.fillStyle=ia.KLine.NumIcon.Color;p=d[R];this.Canvas.fillText(p,P.TextRect.X,P.TextRect.Y,l)}e||this.InfoTooltipRect.push(P)}}catch(t){L=!0,M=t}finally{try{!b&&N.return&&N.return()}finally{if(L)throw M}}this.Canvas.restore(),this.Canvas.save(),this.ClipClient(e)}}}},this.DrawTradeIcon=function(){if(this.TradeData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2,r=this.ChartBorder.GetRight(),n=this.ChartFrame.XPointCount;t&&(i=this.ChartBorder.GetTop()+a/2+2,r=this.ChartBorder.GetBottom());var o=this.TradeData.Sell,s=this.TradeData.Buy,h=e+a,l=A(),u=24*l,c=12*l;h<c?h=c:h>u&&(h=u),this.Canvas.font=h+"px "+this.TradeIcon.Family;for(var f=this.Data.DataOffset,d=0;f<this.Data.Data.length&&d<n;++f,++d,i+=e+a){var C=this.Data.Data[f];if(null!=C.Open&&null!=C.High&&null!=C.Low&&null!=C.Close){var p=!1,m=!1;if(o&&f<o.length&&(m=o[f]>0),s&&f<s.length&&(p=s[f]>0),m||p){var D=i+e;if(D>r)break;var v=i+(D-i)/2,g=this.GetYFromData(C.Low,!1),S=this.GetYFromData(C.High,!1);this.GetYFromData(C.Open,!1),this.GetYFromData(C.Close,!1);if(p)if(this.Canvas.fillStyle=this.TradeIcon.Buy.Color,t)this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.TradeIcon.Buy.HScreenText,g,v);else{this.Canvas.textAlign="center",this.Canvas.textBaseline="top",this.Canvas.fillText(this.TradeIcon.Buy.Text,v,g);var T=new yt(v-h/2,g,h,h),I={Data:{Type:1,KData:C,Name:this.TradeData.Name,Param:this.TradeData.Param},Rect:T,TextRect:{X:v,Y:g}};this.TradeIconTooltipRect.push(I)}if(m)if(this.Canvas.fillStyle=this.TradeIcon.Sell.Color,t)this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.TradeIcon.Sell.HScreenText,S,v);else{this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.Canvas.fillText(this.TradeIcon.Sell.Text,v,S);T=new yt(v-h/2,S-h,h,h),I={Data:{Type:2,KData:C,Name:this.TradeData.Name,Param:this.TradeData.Param},Rect:T,TextRect:{X:v,Y:S}};this.TradeIconTooltipRect.push(I)}}}}}},this.GetTooltipData=function(t,e,a){if(!this.IsShow)return!1;for(var i in this.TradeIconTooltipRect){if((n=this.TradeIconTooltipRect[i]).Rect){var r=n.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.X,r.Y,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return D.Chart.Log("[ChartKLine::GetTooltipData] trade icon ",n),a.Data=n,a.ChartPaint=this,a.Type=2,!0}}for(var i in this.InfoTooltipRect){var n;if((n=this.InfoTooltipRect[i]).Rect){r=n.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.X,r.Y,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return a.Data=n,a.ChartPaint=this,a.Type=1,!0}}for(var i in this.TooltipRect){r=this.TooltipRect[i][1];if(this.Canvas.beginPath(),this.Canvas.rect(r.X,r.Y,r.Width,r.Height),this.Canvas.isPointInPath(t,e)){var o=this.TooltipRect[i][0];return a.Data=this.Data.Data[o],a.ChartPaint=this,a.Type=0,!0}}return!1},this.GetMaxMin=function(){if(14==this.DrawType&&this.FFKChart&&this.FFKChart.GetMaxMin)return this.FFKChart.GetMaxMin(this);var t=this.ChartFrame.XPointCount,e={Max:null,Min:null};if(1==this.DrawType||4==this.DrawType)for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];Te.IsNumber(r.Close)&&(null==e.Max&&(e.Max=r.Close),null==e.Min&&(e.Min=r.Close),e.Max<r.Close&&(e.Max=r.Close),e.Min>r.Close&&(e.Min=r.Close))}else for(a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){if(null!=(r=this.Data.Data[a]).Open&&null!=r.High&&null!=r.Low&&null!=r.Close)if(5==this.DrawType&&r.OrderFlow&&Te.IsNumber(r.OrderFlow.PriceOffset)){var n=r.High,o=r.Low;if(Te.IsNonEmptyArray(r.OrderFlow.High))for(var s=0;s<r.OrderFlow.High.length;++s){n<(h=r.OrderFlow.High[s]).Price&&(n=h.Price)}if(Te.IsNonEmptyArray(r.OrderFlow.Low))for(s=0;s<r.OrderFlow.Low.length;++s){var h;o>(h=r.OrderFlow.Low[s]).Price&&(o=h.Price)}n+=r.OrderFlow.PriceOffset,o-=r.OrderFlow.PriceOffset,null==e.Max&&(e.Max=n),null==e.Min&&(e.Min=o),e.Max<n&&(e.Max=n),e.Min>o&&(e.Min=o)}else null==e.Max&&(e.Max=r.High),null==e.Min&&(e.Min=r.Low),e.Max<r.High&&(e.Max=r.High),e.Min>r.Low&&(e.Min=r.Low)}return e},this.GetAllPrice=function(){for(var t=this.ChartFrame.XPointCount,e=new c.default,a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r.Open&&null!=r.High&&null!=r.Low&&null!=r.Close){var n=r.Close;e.add(n)}}var o=[],s=!0,h=!1,l=void 0;try{for(var u,d=(0,f.default)(e);!(s=(u=d.next()).done);s=!0){var C=u.value;o.push(C)}}catch(t){h=!0,l=t}finally{try{!s&&d.return&&d.return()}finally{if(h)throw l}}return o.sort(function(t,e){return t-e}),o},this.DrawLastPointEvent=function(t){if(this.GetEventCallback){var e=this.GetEventCallback(w.ON_DRAW_KLINE_LAST_POINT);if(e){var a={Data:this.ChartFrame.DataWidth,Distance:this.ChartFrame.DistanceWidth};if(t)var i={LastPoint:{X:t.X,Y:t.Y,XLeft:t.XLeft,XRight:t.XRight},KItem:t.KItem,DrawType:this.DrawType,KWidth:a,ChartRight:t.ChartRight};else i={LastPoint:null,KItem:null,KWidth:a};e.Callback(e,i,this)}}},this.DrawOrderFlow=function(){var t,e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=(t=this.ChartBorder.GetBorder()).LeftEx+i/2+ia.FrameLeftMargin,n=t.RightEx,o=this.ChartFrame.XPointCount;e&&(r=(t=this.ChartBorder.GetHScreenBorder()).TopEx+i/2+ia.FrameLeftMargin,n=t.BottomEx);this.UpColor,this.DownColor,this.UnchagneColor;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=o,this.DrawKRange.Start=this.Data.DataOffset;this.DrawOrderFlowHBar();for(var s=this.Data.DataOffset,h=0;s<this.Data.Data.length&&h<o;++s,++h,r+=a+i,++this.ShowRange.DataCount){var l=this.Data.Data[s];if(this.ShowRange.End=s,null!=l.Open&&null!=l.High&&null!=l.Low&&null!=l.Close){var u=r,c=r+a;if(c>n)break;var f=u+(c-u)/2,d=this.GetYFromData(l.Low,!1),C=this.GetYFromData(l.High,!1),p=this.GetYFromData(l.Open,!1),m=this.GetYFromData(l.Close,!1);this.DrawKRange.End=s;var D={Low:d,High:C,Open:p,Close:m},v={Left:u,Center:f,Right:c,DataWidth:a};if(this.DrawOrderFlowBar(l.OrderFlow,l,v,D,e),this.IsShowKTooltip&&!e){var g=Math.min(p,m),S=Math.max(p,m);Math.abs(p-m)<5&&(g=Math.min(C,g-5),S=Math.max(d,S+5));var T=new yt(u,g,a,S-g);this.TooltipRect.push([s,T])}if(0==this.Data.DataType){var I={Xleft:u,XRight:c,XCenter:f,YMax:C,YMin:d,DayData:l,Index:h};this.DrawInfo(I)}s==this.Data.Data.length-1&&{X:f,Y:m,XLeft:u,XRight:c,KItem:l,ChartRight:n}}}},this.DrawOrderFlowBar=function(t,e,a,i,r){var n=Math.min(i.Open,i.Close),o=Math.max(i.Open,i.Close),s=Math.abs(i.Open-i.Close),h=0;t&&Te.IsNumber(t.PriceOffset)&&(h=this.GetPriceYOffset(t.PriceOffset));var l,u=this.GetDynamicOrderFlowFont(h,a.DataWidth/2);this.IsShowOrderText=h>5&&a.DataWidth>10,this.OrderFlow.AlwaysShowOrderText&&(this.IsShowOrderText=!0),l=e.Open<e.Close?this.OrderFlow.UpColor:e.Open>e.Close?this.OrderFlow.DownColor:this.OrderFlow.UnchagneColor;var c=a.DataWidth<4;c?(this.Canvas.strokeStyle=l.Border,this.Canvas.beginPath(),this.Canvas.moveTo(_(a.Center),n-h/2),this.Canvas.lineTo(_(a.Center),o+h/2),this.Canvas.stroke()):(this.Canvas.fillStyle=l.BG,this.Canvas.fillRect(k(a.Left),k(n-h/2),k(a.DataWidth),k(s+h))),this.Canvas.textBaseline="middle",this.Canvas.textAlign="center",this.Canvas.font=u;var f=a.DataWidth/2/2;if(t&&Te.IsNonEmptyArray(t.Order)){var d=0,C=0,p=null;if(this.OrderFlow.IsShowAskBar||this.OrderFlow.IsShowBidBar||this.OrderFlow.IsShowPOCBG)for(var m=0,D=0,v=0;v<t.Order.length;++v){D=0,(g=t.Order[v]).Ask&&Te.IsNumber(g.Ask.Value)&&(d+=g.Ask.Value,D+=g.Ask.Value),g.Bid&&Te.IsNumber(g.Bid.Value)&&(C+=g.Bid.Value,D+=g.Bid.Value),m<D&&(m=D,p=v)}for(v=0;v<t.Order.length;++v){var g=t.Order[v],S=this.GetYFromData(g.Price,!1);if((T={Left:a.Left,Right:a.Center,Bottom:S+h/2,Top:S-h/2}).Width=T.Right-T.Left,T.Height=T.Bottom-T.Top,g.Ask.BG&&(this.Canvas.fillStyle=g.Ask.BG,this.Canvas.fillRect(k(T.Left),k(T.Top),k(T.Width),k(T.Height))),this.OrderFlow.IsShowPOCBG&&p==v&&(this.Canvas.fillStyle=this.OrderFlow.POCGBColor,this.Canvas.fillRect(k(T.Left),k(T.Top),k(T.Width),k(T.Height))),this.OrderFlow.IsShowAskBar&&Te.IsNumber(g.Ask.Value)&&d>0)(I=T.Width*(g.Ask.Value/d))<1&&(I=1),this.Canvas.fillStyle=this.OrderFlow.AskBarColor,this.Canvas.fillRect(k(T.Right),k(T.Top),k(-I),k(T.Height));var T,I,y=null;if(Te.IsString(g.Ask.Text)?y=g.Ask.Text:Te.IsNumber(g.Ask.Value)&&(y=g.Ask.Value.toString()),y&&this.IsShowOrderText&&this.OrderFlow.IsShowAskText)if(g.Ask.Color?this.Canvas.fillStyle=g.Ask.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,g.Ask.Font){var x=this.GetDynamicOrderFlowFont(h,a.DataWidth/2,g.Ask.Font);this.Canvas.font=x,this.Canvas.fillText(y,a.Left+f,S),this.Canvas.font=u}else this.Canvas.fillText(y,a.Left+f,S);if((T={Left:a.Center,Right:a.Right,Bottom:S+h/2,Top:S-h/2}).Width=T.Right-T.Left,T.Height=T.Bottom-T.Top,g.Bid.BG&&(this.Canvas.fillStyle=g.Bid.BG,this.Canvas.fillRect(k(T.Left),k(T.Top),k(T.Width),k(T.Height))),this.OrderFlow.IsShowPOCBG&&p==v&&(this.Canvas.fillStyle=this.OrderFlow.POCGBColor,this.Canvas.fillRect(k(T.Left),k(T.Top),k(T.Width),k(T.Height))),this.OrderFlow.IsShowBidBar&&Te.IsNumber(g.Bid.Value)&&C>0)(I=T.Width*(g.Bid.Value/C))<1&&(I=1),this.Canvas.fillStyle=this.OrderFlow.BidBarColor,this.Canvas.fillRect(k(T.Left),k(T.Top),k(I),k(T.Height));y=null;if(Te.IsString(g.Bid.Text)?y=g.Bid.Text:Te.IsNumber(g.Bid.Value)&&(y=g.Bid.Value.toString()),y&&this.IsShowOrderText&&this.OrderFlow.IsShowBidText)if(g.Bid.Color?this.Canvas.fillStyle=g.Bid.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,g.Bid.Font){x=this.GetDynamicOrderFlowFont(h,a.DataWidth/2,g.Bid.Font);this.Canvas.font=x,this.Canvas.fillText(y,a.Center+f,S),this.Canvas.font=u}else this.Canvas.fillText(y,a.Center+f,S)}}(i.High<n||i.Low>o)&&(this.Canvas.strokeStyle=this.OrderFlow.Line.UpDownColor,i.High<n&&(this.Canvas.beginPath(),this.Canvas.moveTo(_(a.Center),i.High-h/2),this.Canvas.lineTo(_(a.Center),n-h/2),this.Canvas.stroke()),i.Low>o&&(this.Canvas.beginPath(),this.Canvas.moveTo(_(a.Center),i.Low+h/2),this.Canvas.lineTo(_(a.Center),o+h/2),this.Canvas.stroke())),!c&&Math.abs(i.Open-i.Close)>1&&(this.Canvas.strokeStyle=this.OrderFlow.Line.MiddleColor,this.Canvas.beginPath(),this.Canvas.moveTo(_(a.Center),n-h/2),this.Canvas.lineTo(_(a.Center),o+h/2),this.Canvas.stroke()),c||(this.Canvas.beginPath(),this.Canvas.strokeStyle=l.Border,this.Canvas.rect(_(a.Left),_(n-h/2),k(a.DataWidth),k(s+h)),this.Canvas.stroke());u=this.GetDynamicOrderFlowFont(h,a.DataWidth);if(t&&Te.IsNonEmptyArray(t.High)&&this.IsShowOrderText)for(v=0;v<t.High.length;++v){g=t.High[v];if(Te.IsString(g.Text)?y=g.Text:Te.IsNumber(g.Value)&&(y=g.Value.toString()),y){g.Color?this.Canvas.fillStyle=g.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color;S=this.GetYFromData(g.Price,!1);if(g.Font){x=this.GetDynamicOrderFlowFont(h,a.DataWidth,g.Font);this.Canvas.font=x,this.Canvas.fillText(y,a.Center,S),this.Canvas.font=u}else this.Canvas.fillText(y,a.Center,S)}}if(t&&Te.IsNonEmptyArray(t.Low)&&this.IsShowOrderText)for(v=0;v<t.Low.length;++v){g=t.Low[v];if(Te.IsString(g.Text)?y=g.Text:Te.IsNumber(g.Value)&&(y=g.Value.toString()),y){g.Color?this.Canvas.fillStyle=g.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color;S=this.GetYFromData(g.Price,!1);if(g.Font){x=this.GetDynamicOrderFlowFont(h,a.DataWidth,g.Font);this.Canvas.font=x,this.Canvas.fillText(y,a.Center,S),this.Canvas.font=u}else this.Canvas.fillText(y,a.Center,S)}}},this.GetPriceYOffset=function(t){var e=this.ChartFrame;return e.ChartBorder.GetHeightEx()*t/(e.HorizontalMax-e.HorizontalMin)},this.GetDynamicOrderFlowFont=function(t,e,a){var i=parseInt(t)-2;t<5&&(i=parseInt(t)),i>this.OrderFlow.Text.FontMaxSize?i=this.OrderFlow.Text.FontMaxSize:i<=0&&(i=1);for(var r=this.FormatFontString(i,this.OrderFlow.Text.Family,a),n=i;n>0;n-=2){r=this.FormatFontString(n,this.OrderFlow.Text.Family,a);if(this.Canvas.font=r,this.Canvas.measureText(this.OrderFlow.Text.MaxValue).width+2<e)break}return r},this.FormatFontString=function(t,e,a){var i;return a?a.Weight&&(i=a.Weight+" "+t+"px "+e):i=t+"px "+e,i},this.DrawOrderFlowHBar=function(){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartFrame.HorizontalMax,r=this.ChartFrame.HorizontalMin,n=this.Data.DataOffset,o=this.Data.DataOffset+a,s=0;s<this.Data.Data.length;++s){var h=this.Data.Data[s];if(h&&h.OrderFlow&&Te.IsNonEmptyArray(h.OrderFlow.Order))for(var l=0;l<h.OrderFlow.Order.length;++l){var u=h.OrderFlow.Order[l];if(u.HBar&&(Te.IsNumber(u.HBar.Width)&&Te.IsNumber(u.Price)&&!(u.Price>i||u.Price<r))){var c=Math.ceil(s+u.HBar.Width),f=Math.min(s,c);Math.max(s,c)<n||f>o||this.DrawOrderFlowHBarItem(s,h.OrderFlow,u,t,e)}}}},this.DrawOrderFlowHBarItem=function(t,e,a,i,r){var n=this.ShowRange.Start,o=(this.ShowRange.Start,this.ShowRange.ShowCount,this.GetYFromData(a.Price,!1)),s=t-n,h=parseInt(t+a.HBar.Width)-n;if(s<0&&(s=0),h<0&&(h=0),s<=h){this.ChartBorder.GetRight(),this.ChartFrame.XPointCount;var l=n,u=this.GetPriceYOffset(e.PriceOffset),c=this.ChartFrame.GetXFromIndex(s)-i/2;if(1==a.HBar.Type)for(var f=0,d=t+1;f<a.HBar.Width&&d<this.Data.Data.length;++f,++d){if(this.Data.Data[d].Close<a.Price){h=d-1-l;break}}else if(2==a.HBar.Type)for(f=0,d=t+1;f<a.HBar.Width&&d<this.Data.Data.length;++f,++d){if(this.Data.Data[d].Close>a.Price){h=d-1-l;break}}if(h<0)return;var C=this.ChartFrame.GetXFromIndex(h)+i/2,p=o-u/2,m=u+.5;Te.IsNumber(a.HBar.Height)&&(m=a.HBar.Height*u+.1);var D=a.HBar.Width-parseInt(a.HBar.Width);D>1e-6&&(C+=(i+r)*D),this.Canvas.fillStyle=a.HBar.Color,this.Canvas.fillRect(k(c),k(p),k(C-c),k(m))}},this.PtInChart=function(t,e){return 1==this.DrawType||4==this.DrawType?this.PtInLine(t,e,{KLineClose:!0}):this.PtInKBar(t,e)},this.DrawSelectedStatus=function(){this.DrawLinePoint({KLineClose:!0})},this.DrawOrderFlow_Style2=function(){var t,e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=(t=this.ChartBorder.GetBorder()).LeftEx+i/2+ia.FrameLeftMargin,n=t.RightEx,o=this.ChartFrame.XPointCount;(this.AryOrderFlowBorder=[],e)&&(r=(t=this.ChartBorder.GetHScreenBorder()).TopEx+i/2+ia.FrameLeftMargin,n=t.BottomEx);var s=this.OrderFlow_Style2.UpColor,h=this.OrderFlow_Style2.DownColor,l=this.OrderFlow_Style2.UnchagneColor,u=k(this.OrderFlow_Style2.BarWidth),c=a-u;c/7<u&&(u=c/7),u<=1&&(u=2),this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=o,this.DrawKRange.Start=this.Data.DataOffset,this.DrawOrderFlowHBar();for(var f=this.Data.DataOffset,d=0;f<this.Data.Data.length&&d<o;++f,++d,r+=a+i,++this.ShowRange.DataCount){var C=this.Data.Data[f];if(this.ShowRange.End=f,null!=C.Open&&null!=C.High&&null!=C.Low&&null!=C.Close){var p=r,m=r+a;if(m>n)break;var D=p+(m-p)/2,v=this.GetYFromData(C.Low,!1),g=this.GetYFromData(C.High,!1),S=this.GetYFromData(C.Open,!1),T=this.GetYFromData(C.Close,!1);this.DrawKRange.End=f;var I=Math.min(S,T),y=Math.max(S,T),x=k(p),w=x+u;C.Open<C.Close?this.Canvas.fillStyle=s:C.Open>C.Close?this.Canvas.fillStyle=h:this.Canvas.fillStyle=l;var F=0;C.OrderFlow&&Te.IsNumber(C.OrderFlow.PriceOffset)&&(F=this.GetPriceYOffset(C.OrderFlow.PriceOffset)),this.Canvas.fillRect(x,k(I-F/2),u,k(y-I+F));var E={Low:v,High:g,Open:S,Close:T},b={Left:w,Center:D,Right:m,DataWidth:m-w};b.Center=b.Left+b.DataWidth/2,this.DrawOrderFlowBar_Style2(C.OrderFlow,C,b,E,e)}}if(a-u>5)for(f=0;f<this.AryOrderFlowBorder.length;++f){var L=this.AryOrderFlowBorder[f];if(L&&L.Rect&&L.Color){var M=L.Rect;this.Canvas.strokeStyle=L.Color,this.Canvas.beginPath(),this.Canvas.rect(_(M.Left),_(M.Top),k(M.Width),k(M.Height)),this.Canvas.stroke()}}this.AryOrderFlowBorder=[]},this.DrawOrderFlow_Style3=function(){var t,e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=(t=this.ChartBorder.GetBorder()).LeftEx+i/2+ia.FrameLeftMargin,n=t.RightEx,o=this.ChartFrame.XPointCount;(this.AryOrderFlowBorder=[],e)&&(r=(t=this.ChartBorder.GetHScreenBorder()).TopEx+i/2+ia.FrameLeftMargin,n=t.BottomEx);var s=this.OrderFlow_Style3.UpColor,h=this.OrderFlow_Style3.DownColor,l=this.OrderFlow_Style3.UnchagneColor,u=k(this.OrderFlow_Style3.BarWidth);a/4<u&&(u=a/4),u<=1&&(u=2),this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=o,this.DrawKRange.Start=this.Data.DataOffset,this.DrawOrderFlowHBar();for(var c=this.Data.DataOffset,f=0;c<this.Data.Data.length&&f<o;++c,++f,r+=a+i,++this.ShowRange.DataCount){var d=this.Data.Data[c];if(this.ShowRange.End=c,null!=d.Open&&null!=d.High&&null!=d.Low&&null!=d.Close){var C=r,p=r+a;if(p>n)break;var m=this.GetYFromData(d.Low,!1),D=this.GetYFromData(d.High,!1),v=this.GetYFromData(d.Open,!1),g=this.GetYFromData(d.Close,!1);this.DrawKRange.End=c;var S=Math.min(v,g),T=Math.max(v,g),I=k(C),y=I+u;d.Open<d.Close?this.Canvas.fillStyle=s:d.Open>d.Close?this.Canvas.fillStyle=h:this.Canvas.fillStyle=l;var x=0;d.OrderFlow&&Te.IsNumber(d.OrderFlow.PriceOffset)&&(x=this.GetPriceYOffset(d.OrderFlow.PriceOffset)),this.Canvas.fillRect(I,k(S-x/2),u,k(T-S+x));var w={Low:m,High:D,Open:v,Close:g},F={Left:y,Right:p,DataWidth:p-y};this.DrawOrderFlowBar_Style3(d.OrderFlow,d,F,w,e)}}if(a-u>5)for(c=0;c<this.AryOrderFlowBorder.length;++c){var E=this.AryOrderFlowBorder[c];if(E&&E.Rect&&E.Color){var b=E.Rect;this.Canvas.strokeStyle=E.Color,this.Canvas.beginPath(),this.Canvas.rect(_(b.Left),_(b.Top),k(b.Width),k(b.Height)),this.Canvas.stroke()}}this.AryOrderFlowBorder=[]},this.DrawOrderFlowBar_Style2=function(t,e,a,i,r){Math.min(i.Open,i.Close),Math.max(i.Open,i.Close),Math.abs(i.Open-i.Close);var n=0;t&&Te.IsNumber(t.PriceOffset)&&(n=this.GetPriceYOffset(t.PriceOffset));var o=this.GetDynamicOrderFlowFont(n,a.DataWidth/2);this.IsShowOrderText=n>5&&a.DataWidth>10,this.OrderFlow.AlwaysShowOrderText&&(this.IsShowOrderText=!0),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.font=o;a.DataWidth;if(t&&Te.IsNonEmptyArray(t.Order))for(var s=0;s<t.Order.length;++s){var h=t.Order[s],l=this.GetYFromData(h.Price,!1);if((c={Left:a.Left,Right:a.Center,Bottom:l+n/2,Top:l-n/2}).Width=c.Right-c.Left,c.Height=c.Bottom-c.Top,h.Ask.BG&&(this.Canvas.fillStyle=h.Ask.BG,this.Canvas.fillRect(k(c.Left),k(c.Top),k(c.Width),k(c.Height))),h.Ask.BorderColor){var u={Rect:c,Color:h.Ask.BorderColor};this.AryOrderFlowBorder.push(u)}var c,f=null;if(Te.IsString(h.Ask.Text)?f=h.Ask.Text:Te.IsNumber(h.Ask.Value)&&(f=h.Ask.Value.toString()),f&&this.IsShowOrderText)if(h.Ask.Color?this.Canvas.fillStyle=h.Ask.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,h.Ask.Font){var d=this.GetDynamicOrderFlowFont(n,a.DataWidth/2,h.Ask.Font);this.Canvas.font=d,this.Canvas.fillText(f,a.Left+2,l),this.Canvas.font=o}else this.Canvas.fillText(f,a.Left+2,l);if((c={Left:a.Center,Right:a.Right,Bottom:l+n/2,Top:l-n/2}).Width=c.Right-c.Left,c.Height=c.Bottom-c.Top,h.Bid.BG&&(this.Canvas.fillStyle=h.Bid.BG,this.Canvas.fillRect(k(c.Left),k(c.Top),k(c.Width),k(c.Height))),h.Bid.BorderColor){u={Rect:c,Color:h.Bid.BorderColor};this.AryOrderFlowBorder.push(u)}f=null;if(Te.IsString(h.Bid.Text)?f=h.Bid.Text:Te.IsNumber(h.Bid.Value)&&(f=h.Bid.Value.toString()),f&&this.IsShowOrderText)if(h.Bid.Color?this.Canvas.fillStyle=h.Bid.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,h.Bid.Font){d=this.GetDynamicOrderFlowFont(n,a.DataWidth/2,h.Bid.Font);this.Canvas.font=d,this.Canvas.fillText(f,a.Center+2,l),this.Canvas.font=o}else this.Canvas.fillText(f,a.Center+2,l)}},this.DrawOrderFlowBar_Style3=function(t,e,a,i,r){Math.min(i.Open,i.Close),Math.max(i.Open,i.Close),Math.abs(i.Open-i.Close);var n=a.DataWidth-4,o=0;t&&Te.IsNumber(t.PriceOffset)&&(o=this.GetPriceYOffset(t.PriceOffset));var s=this.GetDynamicOrderFlowFont(o,n);this.IsShowOrderText=o>5&&a.DataWidth>10,this.OrderFlow.AlwaysShowOrderText&&(this.IsShowOrderText=!0),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.font=s;if(t&&Te.IsNonEmptyArray(t.Order))for(var h=0;h<t.Order.length;++h){var l=t.Order[h],u=this.GetYFromData(l.Price,!1),c={Left:a.Left,Right:a.Right,Bottom:u+o/2,Top:u-o/2};if(c.Width=c.Right-c.Left,c.Height=c.Bottom-c.Top,l.Item.BG&&(this.Canvas.fillStyle=l.Item.BG,this.Canvas.fillRect(k(c.Left),k(c.Top),k(c.Width),k(c.Height))),l.Item.BorderColor){var f={Rect:c,Color:l.Item.BorderColor};this.AryOrderFlowBorder.push(f)}var d=null;if(Te.IsString(l.Item.Text)?d=l.Item.Text:Te.IsNumber(l.Item.Value)&&(d=l.Item.Value.toString()),d&&this.IsShowOrderText)if(l.Item.Color?this.Canvas.fillStyle=l.Item.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,l.Item.Font){var C=this.GetDynamicOrderFlowFont(o,n,l.Item.Font);this.Canvas.font=C,this.Canvas.fillText(d,a.Left+2,u),this.Canvas.font=s}else this.Canvas.fillText(d,a.Left+2,u)}},this.DrawHighLow=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=(o=this.ChartBorder.GetHScreenBorder()).TopEx+a/2+ia.FrameLeftMargin,n=o.BottomEx;else{var o;r=(o=this.ChartBorder.GetBorder()).LeftEx+a/2+ia.FrameLeftMargin,n=o.RightEx}this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset,this.Canvas.fillStyle=this.HighLowBarColor,this.Canvas.strokeStyle=this.HighLowBarColor;for(var s=this.Data.DataOffset,h=0;s<this.Data.Data.length&&h<i;++s,++h,r+=e+a,++this.ShowRange.DataCount){var l=this.Data.Data[s];if(this.ShowRange.End=s,null!=l.Open&&null!=l.High){var u=r,c=r+e;if(c>n)break;var f=u+(c-u)/2,d=this.GetYFromData(l.Low,!1),C=this.GetYFromData(l.High,!1);this.DrawKRange.End=s;var p=d,m=C-d;if(Math.abs(m)<1&&(m=1),e>=4)t?this.Canvas.fillRect(k(p),k(u),k(m),k(e)):this.Canvas.fillRect(k(u),k(p),k(e),k(m));else{f=u+(c-u)/2;this.Canvas.beginPath(),t?(this.Canvas.moveTo(_(d),_(f)),this.Canvas.lineTo(_(C),_(f))):(this.Canvas.moveTo(_(f),_(d)),this.Canvas.lineTo(_(f),_(C))),this.Canvas.stroke()}if(this.IsShowKTooltip&&!t){var D=Math.min(d,C),v=Math.max(d,C);Math.abs(D-v)<5&&(D=Math.min(C,D-5),v=Math.max(d,v+5));var g=new yt(u,D,e,v-D);this.TooltipRect.push([s,g])}}}}}function bt(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartColorKline",this.Symbol,this.Color="rgb(0,255,44)",this.IsEmptyBar=!1,this.DrawType=0,this.KLineColor,this.DrawName,this.Draw=function(){if(this.IsShow)if("DRAWCOLORKLINE"==this.DrawName)this.DrawColorBar();else{if(!this.KLineColor)return;this.DrawBar()}},this.DrawUpBarItem=function(t,e,a,i){var r=!0===this.ChartFrame.IsHScreen,n=e,o=n+(e+a-n)/2,s=this.ChartFrame.GetYFromData(t.Low),h=this.ChartFrame.GetYFromData(t.High),l=this.ChartFrame.GetYFromData(t.Open),u=this.ChartFrame.GetYFromData(t.Close),c=h;a>=4?(t.High>t.Close?(this.Canvas.beginPath(),r?(this.Canvas.moveTo(_(c),_(o)),this.Canvas.lineTo(_(3==this.DrawType?Math.max(u,l):u),_(o))):(this.Canvas.moveTo(_(o),_(c)),this.Canvas.lineTo(_(o),_(3==this.DrawType?Math.min(u,l):u))),this.Canvas.stroke(),c=u):c=u,r?Math.abs(l-c)<1?this.Canvas.fillRect(k(c),k(n),1,k(a)):3==this.DrawType?(this.Canvas.beginPath(),this.Canvas.rect(_(c),_(n),k(l-c),k(a)),this.Canvas.stroke()):this.Canvas.fillRect(k(c),k(n),k(l-c),k(a)):Math.abs(l-c)<1?this.Canvas.fillRect(k(n),k(c),k(a),1):3==this.DrawType?(this.Canvas.beginPath(),this.Canvas.rect(_(n),_(c),k(a),k(l-c)),this.Canvas.stroke()):this.Canvas.fillRect(k(n),k(Math.min(c,l)),k(a),k(Math.abs(l-c))),t.Open>t.Low&&(this.Canvas.beginPath(),r?(this.Canvas.moveTo(_(3==this.DrawType?Math.min(u,l):c),_(o)),this.Canvas.lineTo(_(s),_(o))):(this.Canvas.moveTo(_(o),_(3==this.DrawType?Math.max(u,l):c)),this.Canvas.lineTo(_(o),_(s))),this.Canvas.stroke())):(this.Canvas.beginPath(),r?(this.Canvas.moveTo(h,_(o)),this.Canvas.lineTo(s,_(o))):(this.Canvas.moveTo(_(o),h),this.Canvas.lineTo(_(o),s)),this.Canvas.stroke())},this.DrawDownBarItem=function(t,e,a,i){var r=!0===this.ChartFrame.IsHScreen,n=e,o=n+(e+a-n)/2,s=this.ChartFrame.GetYFromData(t.Low),h=this.ChartFrame.GetYFromData(t.High),l=this.ChartFrame.GetYFromData(t.Open),u=this.ChartFrame.GetYFromData(t.Close),c=h;a>=4?(t.High>t.Close?(this.Canvas.beginPath(),r?(this.Canvas.moveTo(_(c),_(o)),this.Canvas.lineTo(_(l),_(o))):(this.Canvas.moveTo(_(o),_(c)),this.Canvas.lineTo(_(o),_(l))),this.Canvas.stroke(),c=l):c=l,r?Math.abs(u-c)<1?this.Canvas.fillRect(k(c),k(n),1,k(a)):this.Canvas.fillRect(k(c),k(n),k(u-c),k(a)):Math.abs(u-c)<1?this.Canvas.fillRect(k(n),k(c),k(a),1):this.Canvas.fillRect(k(n),k(Math.min(c,u)),k(a),k(Math.abs(u-c))),t.Open>t.Low&&(this.Canvas.beginPath(),r?(this.Canvas.moveTo(_(c),_(o)),this.Canvas.lineTo(_(s),_(o))):(this.Canvas.moveTo(_(o),_(c)),this.Canvas.lineTo(_(o),_(s))),this.Canvas.stroke())):(this.Canvas.beginPath(),r?(this.Canvas.moveTo(h,_(o)),this.Canvas.lineTo(s,_(o))):(this.Canvas.moveTo(_(o),h),this.Canvas.lineTo(_(o),s)),this.Canvas.stroke())},this.DrawUnChangeBarItem=function(t,e,a,i){var r=!0===this.ChartFrame.IsHScreen,n=e,o=e+a,s=n+(o-n)/2,h=this.ChartFrame.GetYFromData(t.Low),l=this.ChartFrame.GetYFromData(t.High),u=this.ChartFrame.GetYFromData(t.Open),c=(this.ChartFrame.GetYFromData(t.Close),l);a>=4?(this.Canvas.beginPath(),t.High>t.Close?(r?(this.Canvas.moveTo(c,_(s)),this.Canvas.lineTo(u,_(s))):(this.Canvas.moveTo(_(s),c),this.Canvas.lineTo(_(s),u)),c=u):c=u,r?(this.Canvas.moveTo(_(c),_(n)),this.Canvas.lineTo(_(c),_(o))):(this.Canvas.moveTo(_(n),_(c)),this.Canvas.lineTo(_(o),_(c))),t.Open>t.Low&&(r?(this.Canvas.moveTo(_(c),_(s)),this.Canvas.lineTo(_(h),_(s))):(this.Canvas.moveTo(_(s),_(c)),this.Canvas.lineTo(_(s),_(h)))),this.Canvas.stroke()):(this.Canvas.beginPath(),r?(this.Canvas.moveTo(l,_(s)),this.Canvas.lineTo(h,_(s))):(this.Canvas.moveTo(_(s),l),this.Canvas.lineTo(_(s),h)),this.Canvas.stroke())},this.DrawBar=function(){var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetLeft()+e/2+2,i=this.ChartBorder.GetRight(),r=this.ChartFrame.XPointCount;this.IsHScreen&&(a=this.ChartBorder.GetTop()+e/2+2,i=this.ChartBorder.GetBottom());for(var n=this.Data.DataOffset,o=0;n<this.Data.Data.length&&o<r;++n,++o,a+=t+e){var s=this.Data.Data[n];if(null!=s.Open&&null!=s.High&&null!=s.Low&&null!=s.Close&&this.KLineColor.has(n)){var h=this.KLineColor.get(n);if(a+t>i)break;h.Color?(this.Canvas.strokeStyle=h.Color,this.Canvas.fillStyle=h.Color):(this.Canvas.strokeStyle=this.Color,this.Canvas.fillStyle=this.Color),s.Open<s.Close?this.DrawUpBarItem(s,a,t,h):s.Open>s.Close?this.DrawDownBarItem(s,a,t,h):this.DrawUnChangeBarItem(s,a,t,h)}}},this.DrawColorBar=function(){var t,e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=(t=this.ChartBorder.GetBorder()).LeftEx+i/2+ia.FrameLeftMargin,n=t.RightEx,o=this.ChartFrame.XPointCount;e&&(r=(t=this.ChartBorder.GetHScreenBorder()).TopEx+i/2+ia.FrameLeftMargin,n=t.BottomEx);for(var s=this.Data.DataOffset,h=0;s<this.Data.Data.length&&h<o;++s,++h,r+=a+i){var l=this.Data.Data[s];if(l&&(Te.IsNumber(l.Open)&&Te.IsNumber(l.High)&&Te.IsNumber(l.Low)&&Te.IsNumber(l.Close))){var u=r,c=r+a;if(c>n)break;var f=u+(c-u)/2,d=this.GetYFromData(l.Low,!1),C=this.GetYFromData(l.High,!1),p=this.GetYFromData(l.Open,!1),m=this.GetYFromData(l.Close,!1),D=C;l.Open==l.Close?this.DrawKBar_Unchagne(l,a,this.Color,this.IsEmptyBar,f,D,u,c,d,C,p,m,e):this.DrawKBar_Custom(l,a,this.Color,this.IsEmptyBar,f,D,u,c,d,C,p,m,e)}}},this.DrawKBar_Unchagne=function(t,e,a,i,r,n,o,s,h,l,u,c,f){if(e>=4){if(e%2!=0&&(e-=1),this.Canvas.strokeStyle=a,this.Canvas.beginPath(),t.High>t.Close){if(f)this.Canvas.moveTo(n,_(r)),this.Canvas.lineTo(u,_(r));else{var d=_(o+e/2);this.Canvas.moveTo(d,n),this.Canvas.lineTo(d,u)}n=u}else n=u;if(f?(this.Canvas.moveTo(_(n),_(o)),this.Canvas.lineTo(_(n),_(s))):(this.Canvas.moveTo(_(o),_(n)),this.Canvas.lineTo(_(o+e),_(n))),t.Open>t.Low)if(f)this.Canvas.moveTo(_(n),_(r)),this.Canvas.lineTo(_(h),_(r));else{d=_(o+e/2);this.Canvas.moveTo(d,_(n)),this.Canvas.lineTo(d,_(h))}this.Canvas.stroke()}else this.Canvas.beginPath(),f?(this.Canvas.moveTo(l,_(r)),this.Canvas.lineTo(h,_(r))):(this.Canvas.moveTo(_(r),l),this.Canvas.lineTo(_(r),h)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.DrawKBar_Custom=function(t,e,a,i,r,n,o,s,h,l,u,c,f){if(i&&e%2!=0&&(e-=1),e>=4){if(this.Canvas.strokeStyle=a,t.High>t.Close){if(this.Canvas.beginPath(),f)this.Canvas.moveTo(_(n),_(r)),this.Canvas.lineTo(_(i?Math.max(c,u):c),_(r));else if(i){var d=o+e/2;this.Canvas.moveTo(_(d),_(n)),this.Canvas.lineTo(_(d),_(Math.min(c,u)))}else this.Canvas.moveTo(_(r),_(n)),this.Canvas.lineTo(_(r),_(c));this.Canvas.stroke(),n=c}else n=c;if(this.Canvas.fillStyle=a,f?Math.abs(u-n)<1?this.Canvas.fillRect(k(n),k(o),1,k(e)):i?(this.Canvas.beginPath(),this.Canvas.rect(_(n),_(o),k(u-n),k(e)),this.Canvas.stroke()):this.Canvas.fillRect(k(n),k(o),k(u-n),k(e)):Math.abs(u-n)<1?this.Canvas.fillRect(k(o),k(n),k(e),1):i?(this.Canvas.beginPath(),this.Canvas.rect(_(o),_(n),k(e),k(u-n)),this.Canvas.stroke()):this.Canvas.fillRect(k(o),k(Math.min(n,u)),k(e),k(Math.abs(u-n))),t.Open>t.Low){if(this.Canvas.beginPath(),f)this.Canvas.moveTo(_(i?Math.min(c,u):n),_(r)),this.Canvas.lineTo(_(h),_(r));else if(i){d=o+e/2;this.Canvas.moveTo(_(d),_(Math.max(c,u))),this.Canvas.lineTo(_(d),_(h))}else this.Canvas.moveTo(_(r),_(n)),this.Canvas.lineTo(_(r),_(h));this.Canvas.stroke()}}else this.Canvas.beginPath(),f?(this.Canvas.moveTo(l,_(r)),this.Canvas.lineTo(h,_(r))):(this.Canvas.moveTo(_(r),l),this.Canvas.lineTo(_(r),h)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.GetMaxMin=function(){var t={Max:null,Min:null};if("DRAWCOLORKLINE"==this.DrawName)for(var e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<e;++a,++i){var r=this.Data.Data[a];r&&(null!=r.Open&&null!=r.High&&null!=r.Low&&null!=r.Close&&(null==t.Max&&(t.Max=r.High),null==t.Min&&(t.Min=r.Low),t.Max<r.High&&(t.Max=r.High),t.Min>r.Low&&(t.Min=r.Low)))}return t}}var Lt={STATUS_NONE_ID:0,STATUS_REQUESTDATA_ID:1,STATUS_RECVDATA_ID:2,STATUS_FINISHED_ID:3};function Mt(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinuteVolumBar",this.UpColor=ia.UpBarColor,this.DownColor=ia.DownBarColor,this.UnchangeColor=ia.UnchagneBarColor,this.BarCololType=1,this.CustomColor=ia.Minute.VolBarColor,this.YClose,this.Symbol,this.BeforeOpenData,this.AfterCloseData,this.BeforeVolColor=ia.Minute.Before.VolColor,this.ShareAfterVol=0,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.PtInChart=function(t,e){return this.PtInBar(t,e,{MinuteVolBar:!0})},this.DrawSelectedStatus=function(){return this.DrawLinePoint({MinuteVolBar:!0})},this.Draw=function(){var t=!0===this.ChartFrame.IsHScreen;if(t)var e=this.ChartBorder.GetHScreenBorder().BottomEx;else e=this.ChartBorder.GetBorder().RightEx;this.DrawBeforeOpen(),this.DrawMultiDayBeforeOpen();var a=this.ChartFrame.XPointCount,i=this.ChartFrame.GetYFromData(0),r=this.YClose,n=this.Data,o=Ea.IsShowMinuteColorVolBar(this.Symbol);o&&(this.Canvas.strokeStyle=this.CustomColor);for(var s=n.DataOffset,h=0;s<n.Data.length&&h<a;++s,++h){var l,u=n.Data[s];if(u){var c;if(l=u.Vol,c=u.Close,l){var f=this.ChartFrame.GetYFromData(l),d=this.ChartFrame.GetXFromIndex(h);if(d>e)break;o||(this.Canvas.strokeStyle=this.GetMinuteBarColor(c,r)),this.Canvas.beginPath(),t?(this.Canvas.moveTo(f,_(d)),this.Canvas.lineTo(i,_(d))):(this.Canvas.moveTo(_(d),f),this.Canvas.lineTo(_(d),i)),this.Canvas.stroke(),c&&(r=c)}}}this.DrawAfterClose(),this.DrawMultiDayAfterClose()},this.GetMinuteBarColor=function(t,e){return 1==this.BarCololType?t>e?this.UpColor:t<e?this.DownColor:this.UnchangeColor:t>=e?this.UpColor:this.DownColor},this.DrawBeforeOpen=function(){this.ChartBorder.LeftExtendWidth<10||this.BeforeOpenData&&this.DrawCallAuction(-1,this.BeforeOpenData,!0)},this.DrawAfterClose=function(){this.ChartBorder.RightExtendWidth<10||this.AfterCloseData&&this.DrawCallAuction(-1,this.AfterCloseData,!1)},this.DrawMultiDayBeforeOpen=function(){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Left<=0)&&this.MultiDayBeforeOpenData){var t=0,e=this.MultiDayBeforeOpenData.length;this.DayOffset&&(Te.IsNumber(this.DayOffset.Offset)&&(t=this.DayOffset.Offset),Te.IsNumber(this.DayOffset.ShowDayCount)&&(e=this.DayOffset.ShowDayCount));for(var a=t,i=0;a<this.MultiDayBeforeOpenData.length&&i<e;++a,++i){var r=this.MultiDayBeforeOpenData[a];this.DrawCallAuction(i,r,!0)}}},this.DrawMultiDayAfterClose=function(){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Right<=0)&&this.MultiDayAfterCloseData){var t=0,e=this.MultiDayAfterCloseData.length;this.DayOffset&&(Te.IsNumber(this.DayOffset.Offset)&&(t=this.DayOffset.Offset),Te.IsNumber(this.DayOffset.ShowDayCount)&&(e=this.DayOffset.ShowDayCount));for(var a=t,i=0;a<this.MultiDayAfterCloseData.length&&i<e;++a,++i){var r=this.MultiDayAfterCloseData[a];this.DrawCallAuction(i,r,!1)}}},this.DrawCallAuction=function(t,e,a){if(e){e.Index=t;var i=this.GetBorder(),r=!0===this.ChartFrame.IsHScreen,n=this.YClose,o=this.ChartFrame.GetYFromData(0);if(1==e.Ver)for(var s in e.Data){if((c=e.Data[s])&&Te.IsNumber(c.Vol[0])){if(a)var h=this.ChartFrame.GetLeftExtendXFromIndex(s,e),l=this.ChartFrame.GetLeftExtendYFromData(c.Vol[0]);else h=this.ChartFrame.GetRightExtendXFromIndex(s,e),l=this.ChartFrame.GetRightExtendYFromData(c.Vol[0]);this.Canvas.strokeStyle=c.Price>=n?this.UpColor:this.DownColor,this.Canvas.beginPath(),r?(this.Canvas.moveTo(l,_(h)),this.Canvas.lineTo(o,_(h))):(this.Canvas.moveTo(_(h),l),this.Canvas.lineTo(_(h),o)),this.Canvas.stroke(),c.Price&&(n=c.Price)}}else if(2==e.Ver||3==e.Ver){var u={Max:e.VolMax,Min:e.VolMin};for(var s in e.Data){var c;if(c=e.Data[s]){if(Te.IsPlusNumber(c.Vol[0])){if(a)h=this.ChartFrame.GetLeftExtendXFromIndex(s,e),l=this.ChartFrame.GetLeftExtendYFromData(c.Vol[0],!1,{Range:u});else{h=this.ChartFrame.GetRightExtendXFromIndex(s,e);if(1==this.ShareAfterVol)l=this.ChartFrame.GetYFromData(c.Vol[0]);else l=this.ChartFrame.GetRightExtendYFromData(c.Vol[0],!1,{Range:u})}this.Canvas.strokeStyle=this.GetBarColor(c.ColorID),this.Canvas.beginPath(),r?(this.Canvas.moveTo(l,_(h)),this.Canvas.lineTo(o,_(h))):(this.Canvas.moveTo(_(h),l),this.Canvas.lineTo(_(h),o)),this.Canvas.stroke()}if(Te.IsPlusNumber(c.Vol[1])){if(a)h=this.ChartFrame.GetLeftExtendXFromIndex(s,e),l=this.ChartFrame.GetLeftExtendYFromData(c.Vol[1],!1,{Range:u});else{h=this.ChartFrame.GetRightExtendXFromIndex(s,e);if(1==this.ShareAfterVol)l=this.ChartFrame.GetYFromData(c.Vol[1]);else l=this.ChartFrame.GetRightExtendYFromData(c.Vol[1],!1,{Range:u})}this.Canvas.strokeStyle=this.GetBarColor(c.ColorID),this.Canvas.beginPath(),r?(l-=o,l=i.RightEx-l,this.Canvas.moveTo(l,_(h)),this.Canvas.lineTo(i.RightEx,_(h))):(l-=o,l=i.TopEx-l,this.Canvas.moveTo(_(h),l),this.Canvas.lineTo(_(h),i.TopEx)),this.Canvas.stroke()}}}}}},this.GetBarColor=function(t){switch(t){case 0:return this.UnchangeColor;case 1:return this.UpColor;case 2:return this.DownColor}if(this.BeforeVolColor&&Array.isArray(this.BeforeVolColor)){var e=t-3;if(e>=0&&e<this.BeforeVolColor.length)return this.BeforeVolColor[e]}return this.UnchangeColor},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset;this.ChartFrame.GlobalOption&&!0===this.ChartFrame.GlobalOption.IsValueFullRange&&(t=this.Data.Data.length,e=0);for(var a={Min:0,Max:null},i=e,r=0;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];n&&n.Vol&&(null==a.Max&&(a.Max=n.Vol),a.Max<n.Vol&&(a.Max=n.Vol))}return 1==this.ShareAfterVol&&(this.GetAfterCloseMaxMin(a),this.GetMultiDayAfterCloseMaxMin(a)),a},this.GetAfterCloseMaxMin=function(t){if(!(this.ChartBorder.RightExtendWidth<10)&&this.AfterCloseData){var e=this.AfterCloseData;(null==t.Max||t.Max<e.VolMax)&&(t.Max=e.VolMax)}},this.GetMultiDayAfterCloseMaxMin=function(t){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Right<=0)&&this.MultiDayAfterCloseData)for(var e=0;e<this.MultiDayAfterCloseData.length;++e){var a=this.MultiDayAfterCloseData[e];2!=a.Ver&&3!=a.Ver||(null==t.Max||t.Max<a.VolMax)&&(t.Max=a.VolMax)}}}function At(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartLine",this.Color="rgb(255,193,37)",this.LineWidth,this.DrawType=0,this.IsDotLine=!1,this.BreakPoint,this.DrawSelectedStatus=this.DrawLinePoint,this.PtInChart=this.PtInLine,this.ExportData=this.ExportArrayData,this.GetItemData=this.GetArrayItemData,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&!this.IsShowIndexTitleOnly())if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data)switch(this.DrawType){case 0:return this.DrawLine();case 1:return this.DrawStraightLine();case 2:return this.DrawSectionLine()}},this.DrawLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*A()),this.IsDotLine&&this.Canvas.setLineDash(ia.DOTLINE.LineDash);for(var i=!0,r=0,n=this.Data.DataOffset,o=0;n<this.Data.Data.length&&o<a;++n,++o){var s=this.Data.Data[n];if(null!=s){var h=this.ChartFrame.GetXFromIndex(o),l=this.GetYFromData(s);if(h>e)break;i?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(l,h):this.Canvas.moveTo(h,l),i=!1):t?this.Canvas.lineTo(l,h):this.Canvas.lineTo(h,l),++r}}r>0&&this.Canvas.stroke(),this.Canvas.restore()},this.DrawStraightLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartFrame.XPointCount;if(t)var n=(s=this.ChartBorder.GetHScreenBorder()).BottomEx,o=s.TopEx+i/2+ia.FrameLeftMargin;else{var s;o=(s=this.ChartBorder.GetBorder()).LeftEx+i/2+ia.FrameLeftMargin,n=s.RightEx}var h=this.GetLockRect();h&&(n=t?h.Top:h.Left),this.Canvas.save(),this.ClipClient(t),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*A()),this.Canvas.strokeStyle=this.Color,this.IsDotLine&&this.Canvas.setLineDash(ia.DOTLINE.LineDash);for(var l=!0,u=null,c=0,f=this.Data.DataOffset,d=0;f<this.Data.Data.length&&d<r;++f,++d,o+=a+i){var C=this.Data.Data[f];if(null!=C){if(e)var p=this.ChartFrame.GetXFromIndex(d);else{var m=o+a;if(m>n)break;p=o+(m-o)/2}var D=this.GetYFromData(C,!1);if(p>n)break;l?(this.Canvas.beginPath(),t?this.Canvas.moveTo(D,p):this.Canvas.moveTo(p,D),l=!1,u={X:p,Y:D}):t?this.Canvas.lineTo(D,p):this.Canvas.lineTo(p,D),++c}else c>0&&this.Canvas.stroke(),l=!0,c=0,u=null}c>0&&(1==c&&u&&(t?this.Canvas.lineTo(u.Y,u.X+1*A()):this.Canvas.lineTo(u.X+1*A(),u.Y)),this.Canvas.stroke()),this.Canvas.restore()},this.DrawSectionLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartFrame.XPointCount;if(t)var n=(s=this.ChartBorder.GetHScreenBorder()).BottomEx,o=s.TopEx+i/2+ia.FrameLeftMargin;else{var s;o=(s=this.ChartBorder.GetBorder()).LeftEx+i/2+ia.FrameLeftMargin,n=s.RightEx}var h=this.GetLockRect();h&&(n=t?h.Top:h.Left),this.Canvas.save(),this.ClipClient(t),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*A()),this.Canvas.strokeStyle=this.Color,this.IsDotLine&&this.Canvas.setLineDash(ia.DOTLINE.LineDash);for(var l=!0,u=null,c=0,f=this.Data.DataOffset,d=0;f<this.Data.Data.length&&d<r;++f,++d,o+=a+i){var C=this.Data.Data[f];if(null!=C){if(e)var p=this.ChartFrame.GetXFromIndex(d);else{var m=o+a;if(m>n)break;p=o+(m-o)/2}var D=this.GetYFromData(C,!1);if(p>n)break;this.BreakPoint&&this.BreakPoint.has(f)&&(c>0&&this.Canvas.stroke(),l=!0,c=0,u=null),l?(this.Canvas.beginPath(),t?this.Canvas.moveTo(D,p):this.Canvas.moveTo(p,D),l=!1,u={X:p,Y:D}):t?this.Canvas.lineTo(D,p):this.Canvas.lineTo(p,D),++c}else c>0&&this.Canvas.stroke(),l=!0,c=0,u=null}c>0&&(1==c&&u&&(t?this.Canvas.lineTo(u.Y,u.X+1*A()):this.Canvas.lineTo(u.X+1*A(),u.Y)),this.Canvas.stroke()),this.Canvas.restore()}}function Ot(){this.newMethod=At,this.newMethod(),delete this.newMethod,this.ClassName="ChartSubLine",this.Color="rgb(255,193,37)",this.LineWidth,this.DrawType=0,this.IsDotLine=!1,this.SubFrame={Max:null,Min:null},this.Draw=function(){if(this.IsShow&&this.Data&&this.Data.Data)switch(this.CalculateDataMaxMin(),this.DrawType){case 0:return this.DrawLine();case 1:return this.DrawStraightLine()}},this.GetYFromData=function(t){if(!0===this.ChartFrame.IsHScreen){if(t<=this.SubFrame.Min)return this.ChartBorder.GetLeftEx();if(t>=this.SubFrame.Max)return this.ChartBorder.GetRightEx();var e=this.ChartBorder.GetWidthEx()*(t-this.SubFrame.Min)/(this.SubFrame.Max-this.SubFrame.Min);return this.ChartBorder.GetLeftEx()+e}if(t<=this.SubFrame.Min)return this.ChartBorder.GetBottomEx();if(t>=this.SubFrame.Max)return this.ChartBorder.GetTopEx();var a=this.ChartBorder.GetHeightEx()*(t-this.SubFrame.Min)/(this.SubFrame.Max-this.SubFrame.Min);return this.ChartBorder.GetBottomEx()-a},this.CalculateDataMaxMin=function(){this.SubFrame={Max:null,Min:null};var t=!0===this.ChartFrame.IsHScreen,e=this.ChartBorder.GetRight();t&&(e=this.ChartBorder.GetBottom());for(var a=this.ChartFrame.XPointCount,i=this.Data.DataOffset,r=0;i<this.Data.Data.length&&r<a;++i,++r){var n=this.Data.Data[i];if(null!=n){if(this.ChartFrame.GetXFromIndex(r)>e)break;(null==this.SubFrame.Min||this.SubFrame.Min>n)&&(this.SubFrame.Min=n),(null==this.SubFrame.Max||this.SubFrame.Max<n)&&(this.SubFrame.Max=n)}}},this.GetMaxMin=function(){return{Min:null,Max:null}}}function Nt(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartPartLine",this.LineWidth,this.Draw=function(){this.IsShow&&!this.ChartFrame.IsMinSize&&(this.IsShowIndexTitleOnly()||(this.NotSupportMessage?this.DrawNotSupportmessage():this.Data&&this.Data.Data&&this.DrawLine()))},this.DrawLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*A());for(var i,r=0,n={X:null,Y:null},o=!1,s=this.Data.DataOffset,h=0;s<this.Data.Data.length&&h<a;++s,++h){var l=this.Data.Data[s];if(null!=l&&null!=l.Value){var u=l.Value,c=l.RGB,f=this.ChartFrame.GetXFromIndex(h),d=this.ChartFrame.GetYFromData(u);if(f>e)break;c!=i||1==o?(i&&r>0&&this.Canvas.stroke(),r=0,i=c,this.Canvas.strokeStyle=c,this.Canvas.beginPath(),null!=n.X&&null!=n.Y?(t?this.Canvas.moveTo(n.Y,n.X):this.Canvas.moveTo(n.X,n.Y),t?this.Canvas.lineTo(d,f):this.Canvas.lineTo(f,d),++r):t?this.Canvas.moveTo(d,f):this.Canvas.moveTo(f,d)):(t?this.Canvas.lineTo(d,f):this.Canvas.lineTo(f,d),++r),n.X=f,n.Y=d,o=!1}else n.X=null,n.Y=null,o=!0}r>0&&this.Canvas.stroke(),this.Canvas.restore()},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];r&&r.Value&&((null==e.Max||e.Max<r.Value)&&(e.Max=r.Value),(null==e.Min||e.Min>r.Value)&&(e.Min=r.Value))}return e},this.ExportData=function(t,e){var a=[],i=[];if(Te.IsNonEmptyArray(this.Data.Data)){var r=0,n=this.Data.length-1;e&&e.Start&&e.End&&Te.IsNumber(e.Start.Index)&&Te.IsNumber(e.End.Index)&&(r=e.Start.Index,n=e.End.Index);for(var o=r;o<=n&&o<this.Data.Data.length;++o){var s=this.Data.Data[o];a[o]=null,i[o]=null,s&&Te.IsNumber(s.Value)&&(a[o]=s.Value,i[o]=s.RGB)}}return[{Name:this.Name+"-Value",Data:a},{Name:this.Name+"-Color",Data:i}]}}function Pt(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartStepLine",this.LineWidth=1,this.DotLine,this.IsHScreen,this.IsDotLine=!1,this.PtInChart=function(t,e){if(this.IsShow&&!this.ChartFrame.IsMinSize){var a=!0===this.ChartFrame.IsHScreen;if(!a){var i=this.IsMinuteFrame(),r=this.ChartFrame.DataWidth,n=this.ChartFrame.DistanceWidth,o=this.ChartFrame.XPointCount,s=this.GetLockRect();if(a){var h=(u=this.ChartBorder.GetHScreenBorder()).BottomEx,l=u.TopEx+n/2+ia.FrameLeftMargin;s&&(h=s.Top)}else{var u;l=(u=this.ChartBorder.GetBorder()).LeftEx+n/2+ia.FrameLeftMargin,h=u.RightEx;s&&(h=s.Left)}if(t<l||t>h)return null;if(e>u.BottomEx||e<u.TopEx)return null;for(var c={},f={},d=this.Data.DataOffset;d>=0;--d){var C=this.Data.Data[d];if(Te.IsNumber(C)){var p=this.GetYFromData(C,!1),m=null;m=i?this.ChartFrame.GetXFromIndex(0):l,c.Y=p,c.X=m}}d=this.Data.DataOffset;for(var D=0;d<this.Data.Data.length&&D<o;++d,++D,l+=r+n){C=this.Data.Data[d];if(Te.IsNumber(C)){if(i)var v=this.ChartFrame.GetXFromIndex(D);else{var g=l+r;if(g>h)break;v=l+(g-l)/2}var S=this.GetYFromData(C,!1);if(!(v<t)){if(v==t){c.X=f.X=v,c.Y=f.Y=S;break}f.X=v,f.Y=S;break}if(c.X=v,c.Y=S,t>h)break}}return Te.IsNumber(c.X)&&Te.IsNumber(c.Y)&&Te.IsNumber(f.X)&&Te.IsNumber(f.Y)?t==c.X||e==c.Y?{Identify:this.Identify,Chart:this}:t==f.X||e==f.Y?{Identify:this.Identify,Chart:this}:t>=c.X&&t<=f.X&&e>=c.Y-3&&e<=c.Y+3?{Identify:this.Identify,Chart:this}:t>=f.X-3&&t<=f.X+3&&e>=Math.min(c.Y,f.Y)&&e<Math.max(c.Y,f.Y)?{Identify:this.Identify,Chart:this}:null:null}}},this.Draw=function(){this.IsShow&&!this.ChartFrame.IsMinSize&&(this.NotSupportMessage?this.DrawNotSupportmessage():this.Data&&this.Data.Data&&(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.Canvas.save(),this.ClipClient(this.IsHScreen),this.DrawLine(),this.Canvas.restore()))},this.DrawLine=function(){var t=this.IsMinuteFrame(),e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount,r=this.GetLockRect();if(this.IsHScreen){var n=(s=this.ChartBorder.GetHScreenBorder()).BottomEx,o=s.TopEx+a/2+ia.FrameLeftMargin;r&&(n=r.Top)}else{var s;o=(s=this.ChartBorder.GetBorder()).LeftEx+a/2+ia.FrameLeftMargin,n=s.RightEx;r&&(n=r.Left)}this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*A()),this.IsDotLine&&this.Canvas.setLineDash(ia.DOTLINE.LineDash),this.DotLine&&this.Canvas.setLineDash(this.DotLine),this.Canvas.strokeStyle=this.Color;for(var h=!0,l=0,u={X:null,Y:null},c=this.Data.DataOffset;c>=0;--c){var f=this.Data.Data[c];if(Te.IsNumber(f)){var d=this.GetYFromData(f,!1),C=null;C=t?this.ChartFrame.GetXFromIndex(0):o,this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(d,C):this.Canvas.moveTo(C,d),h=!1,u.Y=d,u.X=C}}c=this.Data.DataOffset;for(var p=0;c<this.Data.Data.length&&p<i;++c,++p,o+=e+a){if(t)C=this.ChartFrame.GetXFromIndex(p);else{var m=o+e;if(m>n)break;C=o+(m-o)/2}if(C>n)break;f=this.Data.Data[c];if(Te.IsNumber(f)){d=this.GetYFromData(f,!1);h?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(d,C):this.Canvas.moveTo(C,d),h=!1,u.X=C,u.Y=d):(this.IsHScreen?(this.Canvas.lineTo(u.Y,C),this.Canvas.lineTo(d,C)):(this.Canvas.lineTo(C,u.Y),this.Canvas.lineTo(C,d)),u.X=C,u.Y=d),++l}}l>0&&this.Canvas.stroke()},this.DrawSelectedStatus=function(){this.DrawLinePoint()}}function Rt(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartPointDot",this.Color="rgb(255,193,37)",this.Radius=1,this.EnableUpDownColor=!1,this.HistoryData,this.ExportData=this.ExportArrayData,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());!0===t&&(e=this.ChartBorder.GetBottom());var a,i=this.ChartFrame.XPointCount;this.Canvas.save(),this.Canvas.fillStyle=this.Color;for(var r=this.Data.DataOffset,n=0;r<this.Data.Data.length&&n<i;++r,++n){var o=this.Data.Data[r];if(null!=o){var s=this.ChartFrame.GetXFromIndex(n),h=this.ChartFrame.GetYFromData(o);if(s>e)break;if(this.EnableUpDownColor)a=this.HistoryData.Data[r].Close>o?"rgb(255,61,61)":"rgb(0,199,65)",this.Canvas.fillStyle=a;this.Canvas.beginPath(),t?this.Canvas.arc(h,s,this.Radius,0,2*Math.PI,!0):this.Canvas.arc(s,h,this.Radius,0,2*Math.PI,!0),this.Canvas.closePath(),this.Canvas.fill()}}this.Canvas.restore()}}}function _t(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.Color="rgb(255,193,37)",this.LineWidth,this.ClassName="ChartStick",this.ExportData=this.ExportArrayData,this.DrawLine=function(){if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());!0===t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*A());for(var i=!0,r=0,n=this.Data.DataOffset,o=0;n<this.Data.Data.length&&o<a;++n,++o){var s=this.Data.Data[n];if(null!=s){var h=this.ChartFrame.GetXFromIndex(o),l=this.ChartFrame.GetYFromData(s);if(h>e)break;i?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(l,h):this.Canvas.moveTo(h,l),i=!1):t?this.Canvas.lineTo(l,h):this.Canvas.lineTo(h,l),++r}}r>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.DrawStick=function(){if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartBorder.GetRight();t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetBottom(),r=this.ChartBorder.GetLeft();this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.LineWidth&&(this.Canvas.lineWidth=this.LineWidth*A());for(var n=this.Canvas.lineWidth,o=this.Data.DataOffset,s=0;o<this.Data.Data.length&&s<a;++o,++s){var h=this.Data.Data[o];if(null!=h){var l=this.ChartFrame.GetXFromIndex(s),u=this.ChartFrame.GetYFromData(h);if(l>e)break;if(this.Canvas.beginPath(),t)this.Canvas.moveTo(r,l),this.Canvas.lineTo(u,l),this.Canvas.stroke();else{var c=B(n,l);this.Canvas.moveTo(c,u),this.Canvas.lineTo(c,i)}this.Canvas.stroke()}}this.Canvas.restore()}},this.Draw=function(){this.IsShow&&!this.ChartFrame.IsMinSize&&(this.NotSupportMessage?this.DrawNotSupportmessage():this.Data&&this.Data.Data&&this.DrawStick())}}function Bt(){this.newMethod=_t,this.newMethod(),delete this.newMethod,this.ClassName="ChartLineStick",this.Draw=function(){this.IsShow&&!this.ChartFrame.IsMinSize&&(this.NotSupportMessage?this.DrawNotSupportmessage():(this.DrawStick(),this.DrawLine()))}}function kt(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.UpColor=ia.UpBarColor,this.DownColor=ia.DownBarColor,this.HistoryData,this.KLineDrawType=0,this.ClassName="ChartVolStick",this.PtInChart=this.PtInBar,this.DrawSelectedStatus=this.DrawLinePoint,this.ExportData=this.ExportArrayData,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&!this.IsShowIndexTitleOnly())if(!0!==this.ChartFrame.IsHScreen){var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetBorder(),i=a.LeftEx+e/2+ia.FrameLeftMargin,r=a.RightEx,n=this.ChartFrame.XPointCount,o=this.GetLockRect();o&&(r=o.Left);var s=this.IsMinuteFrame(),h=this.ChartFrame.GetYFromData(0);if(t>=4){h=k(h);for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<n;++l,++u,i+=t+e){var c=this.Data.Data[l],f=this.HistoryData.Data[l];if(null!=c&&null!=f&&0!=c){var d=i;if(i+t>r)break;var C=this.ChartFrame.GetYFromData(c),p=(v=this.GetBarColor(f)).IsUp;this.Canvas.fillStyle=v.Color;var m=k(Math.abs(h-C)>=1?h-C:1);C=h-m,6==this.KLineDrawType?(this.Canvas.strokeStyle=v.Color,this.Canvas.beginPath(),this.Canvas.rect(_(d),_(C),k(t),m),this.Canvas.stroke()):!p||1!=this.KLineDrawType&&2!=this.KLineDrawType&&3!=this.KLineDrawType?this.Canvas.fillRect(k(d),C,k(t),m):(this.Canvas.strokeStyle=this.UpColor,this.Canvas.beginPath(),this.Canvas.rect(_(d),_(C),k(t),m),this.Canvas.stroke())}}}else for(l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<n;++l,++u,i+=t+e){c=this.Data.Data[l],f=this.HistoryData.Data[l];if(null!=c&&null!=f){C=this.ChartFrame.GetYFromData(c);if(s)var D=this.ChartFrame.GetXFromIndex(u);else D=(d=i)+(i+t-d)/2;if(D>r)break;var v=this.GetBarColor(f);this.Canvas.strokeStyle=v.Color;D=this.ChartFrame.GetXFromIndex(u);this.Canvas.beginPath(),this.Canvas.moveTo(_(D),C),this.Canvas.lineTo(_(D),h),this.Canvas.stroke()}}}else this.HScreenDraw()},this.HScreenDraw=function(){var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetHScreenBorder(),i=a.TopEx+e/2+ia.FrameLeftMargin,r=a.BottomEx,n=this.ChartFrame.XPointCount,o=this.GetLockRect();o&&(r=o.Top);var s=this.ChartFrame.GetYFromData(0);if(t>=4){s=k(s);for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<n;++h,++l,i+=t+e){var u=this.Data.Data[h],c=this.HistoryData.Data[h];if(null!=u&&null!=c){var f=i;if(i+t>r)break;var d=this.ChartFrame.GetYFromData(u),C=!1;c.Close>=c.Open?(C=!0,this.Canvas.fillStyle=this.UpColor):this.Canvas.fillStyle=this.DownColor;var p=k(d-s);!C||1!=this.KLineDrawType&&2!=this.KLineDrawType&&3!=this.KLineDrawType?this.Canvas.fillRect(s,k(f),p,k(t)):(this.Canvas.strokeStyle=this.UpColor,this.Canvas.beginPath(),this.Canvas.rect(_(s),_(f),p,k(t)),this.Canvas.stroke())}}}else for(h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<n;++h,++l,i+=t+e){u=this.Data.Data[h],c=this.HistoryData.Data[h];if(null!=u&&null!=c){d=this.ChartFrame.GetYFromData(u);if((m=this.ChartFrame.GetXFromIndex(l))>r)break;c.Close>c.Open?this.Canvas.strokeStyle=this.UpColor:this.Canvas.strokeStyle=this.DownColor;var m=this.ChartFrame.GetXFromIndex(l);this.Canvas.beginPath(),this.Canvas.moveTo(d,_(m)),this.Canvas.lineTo(s,_(m)),this.Canvas.stroke()}}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];(!Te.IsNumber(e.Max)||e.Max<r)&&(e.Max=r),(!Te.IsNumber(e.Min)||e.Min>r)&&(e.Min=r)}return e.Max>0&&e.Min>0?e.Min=0:e.Max<0&&e.Min<0&&(e.Max=0),e},this.GetBarColor=function(t){return t.Close>=t.Open?{Color:this.UpColor,IsUp:!0}:{Color:this.DownColor,IsUp:!1}},this.GetItemData=function(t){if(!t)return null;if(!Te.IsNumber(t.Index))return null;if(!this.HistoryData||!Te.IsNonEmptyArray(this.HistoryData.Data))return null;if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return null;var e=t.Index;if(e<0||e>=this.Data.Data.length||e>=this.HistoryData.Data.length)return null;var a=this.Data.Data[e],i=this.HistoryData.Data[e];return[{Value:a,Color:this.GetBarColor(i).Color,Name:this.Name}]}}function Gt(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartVericaltLine",this.LineWidth=2,this.LineCap,this.Draw=function(){if(!this.ChartFrame.IsMinSize){var t=1==this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.GetBorder(),r=this.ChartFrame.XPointCount;if(t)var n=i.RightEx,o=i.LeftEx,s=i.TopEx+a/2+ia.FrameLeftMargin;else n=i.TopEx,o=i.BottomEx,s=i.LeftEx+a/2+ia.FrameLeftMargin;this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.LineType&&this.Canvas.setLineDash(this.LineType),this.LineCap&&(this.Canvas.lineCap=this.LineCap),this.Canvas.beginPath();var h=this.Canvas.lineWidth;this.LineWidth>0&&(h=this.LineWidth*A(),this.Canvas.lineWidth=h);for(var l=0,u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<r;++u,++c,s+=e+a){if(this.Data.Data[u]){var f=s+e/2;f=B(h,f),t?(this.Canvas.moveTo(n,f),this.Canvas.lineTo(o,f)):(this.Canvas.moveTo(f,n),this.Canvas.lineTo(f,o)),++l}}l>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.GetMaxMin=function(){return{Min:null,Max:null}}}function Vt(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartHorizontalLine",this.LineWidth=2,this.LineCap,this.ExtendType=0,this.Draw=function(){if(!this.ChartFrame.IsMinSize){var t=1==this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.GetBorder(),r=this.ChartFrame.XPointCount;if(t)var n=i.TopEx,o=i.BottomEx,s=i.TopEx+a/2+ia.FrameLeftMargin;else n=i.LeftEx,o=i.RightEx,s=i.LeftEx+a/2+ia.FrameLeftMargin;this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.LineType&&this.Canvas.setLineDash(this.LineType),this.LineCap&&(this.Canvas.lineCap=this.LineCap),this.Canvas.beginPath();var h=this.Canvas.lineWidth;this.LineWidth>0&&(h=this.LineWidth*A(),this.Canvas.lineWidth=h);for(var l=0,u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<r;++u,++c,s+=e+a){var f=this.Data.Data[u];if(f&&Te.IsNumber(f)){var d=this.ChartFrame.GetYFromData(f);d=B(h,d);var C=s+e/2;C=B(h,C),3==this.ExtendType?t?(this.Canvas.moveTo(d,n),this.Canvas.lineTo(d,o)):(this.Canvas.moveTo(n,d),this.Canvas.lineTo(o,d)):1==this.ExtendType?t?(this.Canvas.moveTo(d,n),this.Canvas.lineTo(d,C)):(this.Canvas.moveTo(n,d),this.Canvas.lineTo(C,d)):t?(this.Canvas.moveTo(d,C),this.Canvas.lineTo(d,o)):(this.Canvas.moveTo(C,d),this.Canvas.lineTo(o,d)),++l}}l>0&&this.Canvas.stroke(),this.Canvas.restore()}}}function Ht(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartLineMultiData",this.Color="rgb(255,193,37)",this.PointColor,this.PointRadius,this.LineWidth,this.Draw=function(){if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),Te.IsPlusNumber(this.LineWidth)&&(this.Canvas.lineWidth=this.LineWidth*A());for(var i,r=!0,n=0,o=[],s=this.Data.DataOffset,h=0;s<this.Data.Data.length&&h<a;++s,++h){var l=this.Data.Data[s];if(l){var u=this.ChartFrame.GetXFromIndex(h);if(u>e)break;i=Array.isArray(l)?l:[l];for(var c=0;c<i.length;++c){var f=i[c];if(f){var d=f.Value,C=this.ChartFrame.GetYFromData(d);r?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(C,u):this.Canvas.moveTo(u,C),r=!1,1===f.Type&&o.push({X:u,Y:C})):(t?this.Canvas.lineTo(C,u):this.Canvas.lineTo(u,C),1===f.Type&&o.push({X:u,Y:C})),++n}}}}n>0&&this.Canvas.stroke(),this.DrawPoint(o),this.Canvas.restore()}},this.DrawPoint=function(t){if(this.PointColor&&Te.IsPlusNumber(this.PointRadius))for(var e=this.PointRadius*A(),a=0;a<t.length;++a){var i=t[a];this.Canvas.beginPath(),this.Canvas.arc(i.X,i.Y,e,0,360,!1),this.Canvas.fillStyle=this.PointColor,this.Canvas.fill(),this.Canvas.closePath()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={Min:null,Max:null};if(!this.Data||!this.Data.Data)return e;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r){var n;n=Array.isArray(r)?r:[r];for(i=0;i<n.length;++i){var o=n[i].Value;Te.IsNumber(o)&&(null==e.Max&&(e.Max=o),null==e.Min&&(e.Min=o),e.Max<o&&(e.Max=o),e.Min>o&&(e.Min=o))}}}return e}}function Yt(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartStickLine",this.Color="rgb(255,193,37)",this.BarType=0,this.LineDotted=[3,3],this.Width=0,this.SetEmptyBar=function(){if(1!=this.BarType&&-1!=this.BarType)return!1;this.Canvas.lineWidth=A(),this.Canvas.strokeStyle=this.Color;var t=ia.EmptyBarBGColor;return t&&(this.Canvas.fillStyle=t),-1==this.BarType&&this.Canvas.setLineDash(this.LineDotted),!0},this.IsEmptyBar=function(){return 1==this.BarType||-1==this.BarType},this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetRight();this.ChartFrame.ZoomIndex;t&&(i=this.ChartBorder.GetBottom());var r=this.ChartFrame.XPointCount,n=this.ChartBorder.GetLeft()+a/2+ia.FrameLeftMargin;t&&(n=this.ChartBorder.GetTop()+a/2+ia.FrameLeftMargin);var o=this.IsMinuteFrame();this.Canvas.save();var s=!1,h=!1,l=ia.EmptyBarBGColor;if(o)this.Width>1?this.Canvas.lineWidth=2*A():this.Canvas.lineWidth=A(),this.Canvas.strokeStyle=this.Color;else if(0==this.Width)this.SetEmptyBar();else if(3==this.Width||50==this.Width)e>=4?(h=!0,this.SetEmptyBar(),this.IsEmptyBar()||(this.Canvas.fillStyle=this.Color),this.Canvas.strokeStyle=this.Color):(this.Canvas.lineWidth=A(),this.Canvas.strokeStyle=this.Color);else if(101==this.Width){var u=e+a+1*A();this.Canvas.lineWidth=u,this.Canvas.strokeStyle=this.Color}else if(this.Width<=3){var c=2*A();(f=e*(this.Width/3))<c&&(f=c),this.SetEmptyBar(),this.IsEmptyBar()||(this.Canvas.fillStyle=this.Color),s=!0}else{var f=this.Width*A()+e;this.SetEmptyBar(),this.IsEmptyBar()||(this.Canvas.fillStyle=this.Color),s=!0}for(var d=this.Data.DataOffset,C=0;d<this.Data.Data.length&&C<r;++d,++C,n+=e+a){var p=this.Data.Data[d];if(null!=p){var m=p.Value,D=p.Value2;if(null==D&&(D=0),o)var v=this.ChartFrame.GetXFromIndex(C);else v=(T=n)+(n+e-T)/2;var g=this.ChartFrame.GetYFromData(m),S=this.ChartFrame.GetYFromData(D);if(v>i)break;if(s)if(t){var T=v-f/2,I=f;this.IsEmptyBar()?(this.Canvas.beginPath(),this.Canvas.rect(_(Math.min(g,S)),_(T),k(Math.abs(g-S)),k(I)),this.Canvas.stroke()):this.Canvas.fillRect(k(Math.min(g,S)),k(T),k(Math.abs(g-S)),k(I))}else{(T=v-f/2)+(I=f)>i&&(I=i-T),this.IsEmptyBar()?(l&&this.Canvas.fillRect(k(T),k(Math.min(g,S)),k(I),k(Math.abs(g-S))),this.Canvas.beginPath(),this.Canvas.rect(_(T),_(Math.min(g,S)),k(I),k(Math.abs(g-S))),this.Canvas.stroke()):this.Canvas.fillRect(k(T),k(Math.min(g,S)),k(I),k(Math.abs(g-S)))}else if(h)this.IsEmptyBar()?t?(this.Canvas.beginPath(),this.Canvas.rect(_(Math.min(g,S)),_(n),k(Math.abs(g-S)),k(e)),this.Canvas.stroke()):(l&&this.Canvas.fillRect(k(n),k(Math.min(g,S)),k(e),k(Math.abs(g-S))),this.Canvas.beginPath(),this.Canvas.rect(_(n),_(Math.min(g,S)),k(e),k(Math.abs(g-S))),this.Canvas.stroke()):t?this.Canvas.fillRect(k(Math.min(g,S)),k(n),k(Math.abs(g-S)),k(e)):this.Canvas.fillRect(k(n),k(Math.min(g,S)),k(e),k(Math.abs(g-S)));else if(t)this.Canvas.beginPath(),this.Canvas.moveTo(g,_(v)),this.Canvas.lineTo(S,_(v)),this.Canvas.stroke();else{var y=parseInt(v.toString())+.5;this.Canvas.beginPath(),this.Canvas.moveTo(y,g),this.Canvas.lineTo(y,S),this.Canvas.stroke()}}}this.Canvas.restore()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={Min:null,Max:null};if(!this.Data||!this.Data.Data)return e;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r){var n=r.Value2;if(null==n&&(n=0),null!=r&&!isNaN(r.Value)&&!isNaN(n)){var o=Math.max(r.Value,n),s=Math.min(r.Value,n);null==e.Max&&(e.Max=o),null==e.Min&&(e.Min=s),e.Max<o&&(e.Max=o),e.Min>s&&(e.Min=s)}}}return e}}function Xt(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartSingleText",this.Color="rgb(255,193,37)",this.TextFont="14px 微软雅黑",this.Text,this.TextAlign="left",this.TextBG,this.Direction=0,this.FixedFontSize=-1,this.YOffset=0,this.Position,this.ShowOffset={X:0,Y:0},this.IconFont,this.IconSize={Max:ia.DRAWICON.Icon.MaxSize,Min:ia.DRAWICON.Icon.MinSize,Zoom:{Type:ia.DRAWICON.Icon.Zoom.Type,Value:ia.DRAWICON.Icon.Zoom.Value},YOffset:ia.DRAWICON.Icon.YOffset},this.TextSize={Max:ia.DRAWICON.Text.MaxSize,Min:ia.DRAWICON.Text.MinSize,Zoom:{Type:ia.DRAWICON.Text.Zoom.Type,Value:ia.DRAWICON.Text.Zoom.Value},FontName:ia.DRAWICON.Text.FontName,YOffset:ia.DRAWICON.Text.YOffset},this.Font={DRAWTEXT_FIX:ia.DRAWTEXT_FIX.Font,DRAWNUMBER_FIX:ia.DRAWNUMBER_FIX.Font},this.ExportData=this.ExportBoolData,this.ReloadResource=function(t){"DRAWTEXT"==this.Name?this.TextSize={Max:ia.DRAWTEXT.MaxSize,Min:ia.DRAWTEXT.MinSize,Zoom:{Type:ia.DRAWTEXT.Zoom.Type,Value:ia.DRAWTEXT.Zoom.Value},FontName:ia.DRAWTEXT.FontName,YOffset:ia.DRAWTEXT.YOffset}:"DRAWNUMBER"==this.Name?this.TextSize={Max:ia.DRAWNUMBER.MaxSize,Min:ia.DRAWNUMBER.MinSize,Zoom:{Type:ia.DRAWNUMBER.Zoom.Type,Value:ia.DRAWNUMBER.Zoom.Value},FontName:ia.DRAWNUMBER.FontName,YOffset:ia.DRAWNUMBER.YOffset}:"DRAWTEXT_FIX"==this.Name?this.Font.DRAWTEXT_FIX=ia.DRAWTEXT_FIX.Font:"DRAWNUMBER_FIX"==this.Name&&(this.Font.DRAWNUMBER_FIX=ia.DRAWNUMBER_FIX.Font)},this.SuperGetMaxMin=this.GetMaxMin,this.GetMaxMin=function(){return"DRAWTEXT_FIX"==this.Name||"DRAWNUMBER_FIX"==this.Name?{Min:null,Max:null}:"DRAWTEXTREL"==this.Name||"DRAWTEXTABS"==this.Name?{Min:null,Max:null}:this.SuperGetMaxMin()},this.DrawRectText=function(){if(this.DrawData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.GetBorder();if("DRAWTEXTREL"==this.Name)if(t)var a=e.RightTitle-e.LeftEx,i=e.BottomEx-e.TopEx,r=this.DrawData.Point.X/1e3*i+e.TopEx,n=e.RightTitle-this.DrawData.Point.Y/1e3*i;else i=e.RightEx-e.LeftEx,a=e.BottomEx-e.TopTitle,r=this.DrawData.Point.X/1e3*i+e.LeftEx,n=this.DrawData.Point.Y/1e3*a+e.TopTitle;else{if("DRAWTEXTABS"!=this.Name)return;if(t)r=this.DrawData.Point.X+e.TopEx,n=e.RightTitle-this.DrawData.Point.Y;else r=this.DrawData.Point.X+e.LeftEx,n=this.DrawData.Point.Y+e.TopTitle}1==this.Direction?this.Canvas.textBaseline="bottom":2==this.Direction?this.Canvas.textBaseline="top":this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.font=this.TextFont,this.Canvas.fillStyle=this.Color,this.DrawText(this.DrawData.Text,r,n,t)}},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if("DRAWTEXTREL"!=this.Name&&"DRAWTEXTABS"!=this.Name){if(this.Position)this.DrawPosition();else if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+ia.FrameLeftMargin,n=this.ChartBorder.GetRight(),o=this.ChartBorder.GetTopEx(),s=this.ChartBorder.GetBottomEx();t&&(n=this.ChartBorder.GetBottom(),o=this.ChartBorder.GetRightEx(),s=this.ChartBorder.GetLeftEx(),r=this.ChartBorder.GetTop()+i/2+ia.FrameLeftMargin);var h=this.ChartFrame.XPointCount,l=Array.isArray(this.Text),u=A(),c={Text:{},Font:{}};if(1==this.Direction?(this.Canvas.textBaseline="bottom",c.Text={Baseline:"bottom"}):2==this.Direction?(this.Canvas.textBaseline="top",c.Text={Baseline:"top"}):(this.Canvas.textBaseline="middle",c.Text={Baseline:"middle"}),this.IconFont){if(this.Color=this.IconFont.Color,this.Text=this.IconFont.Text,this.FixedFontSize>0)var f=this.FixedFontSize;else f=this.GetDynamicIconSize(a,i,this.IconSize.Max,this.IconSize.Min,this.IconSize.Zoom);this.Canvas.font=f+"px "+this.IconFont.Family}else this.FixedFontSize>0?this.TextFont=this.FixedFontSize+"px "+this.TextSize.FontName:this.TextFont=this.GetDynamicFont(a,i,this.TextSize.Max,this.TextSize.Min,this.TextSize.Zoom,this.TextSize.FontName),this.Canvas.font=this.TextFont;c.Font={Height:this.GetFontHeight()};for(var d=this.Data.DataOffset,C=0;d<this.Data.Data.length&&C<h;++d,++C,r+=a+i){var p=this.Data.Data[d];if(null!=p){if(e)var m=this.ChartFrame.GetXFromIndex(C);else{var D=r+a;if(D>n)break;m=r+(D-r)/2}var v=this.ChartFrame.GetYFromData(p);if(m>n)break;if(v+=this.ShowOffset.Y,m+=this.ShowOffset.X,this.Canvas.textAlign=this.TextAlign,this.Canvas.fillStyle=this.Color,c.Text.Color=this.Color,c.Text.Align=this.TextAlign,c.X=m,c.Y=v,this.YOffset>0&&this.Direction>0){var g=v;this.Canvas.setLineDash([5,10]),this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?(1==this.Direction?(v=o-this.YOffset*u,g+=5*u):(v=s+this.YOffset*u,g-=5*u),this.Canvas.moveTo(_(g),_(m)),this.Canvas.lineTo(_(v),_(m))):(1==this.Direction?(v=o+this.YOffset*u,g+=5*u):(v=s-this.YOffset*u,g-=5*u),this.Canvas.moveTo(_(m),_(g)),this.Canvas.lineTo(_(m),_(v))),this.Canvas.stroke(),this.Canvas.setLineDash([])}if(l){var S=this.Text[d];if(!S)continue;"DRAWNUMBER"==this.Name&&(1==this.Direction?v-=ia.DRAWABOVE.YOffset*u:2==this.Direction&&(v+=this.TextSize.YOffset*u)),"DRAWTEXT"==this.Name?this.DrawTextV2(S,c,t):this.DrawText(S,m,v,t)}else"DRAWICON"==this.Name?1==this.Direction?v-=ia.DRAWABOVE.YOffset*u:2==this.Direction&&(this.IconFont?v+=this.IconSize.YOffset*u:v+=this.TextSize.YOffset*u):"DRAWTEXT"==this.Name&&(1==this.Direction?v-=ia.DRAWABOVE.YOffset*u:2==this.Direction&&(v+=this.TextSize.YOffset*u)),"DRAWTEXT"==this.Name?this.DrawTextV2(this.Text,c,t):this.DrawText(this.Text,m,v,t)}}}}else this.DrawRectText()},this.DrawPosition=function(){if(this.Text){var t=!0===this.ChartFrame.IsHScreen;if(t)var e=this.ChartBorder.GetRightEx()-this.ChartBorder.GetWidthEx()*this.Position.Y,a=this.ChartBorder.GetTop()+this.ChartBorder.GetHeight()*this.Position.X;else a=this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()*this.Position.X,e=this.ChartBorder.GetTopEx()+this.ChartBorder.GetHeightEx()*this.Position.Y;if(this.Canvas.fillStyle=this.Color,"DRAWTEXT_FIX"==this.Name?this.Canvas.font=this.Font.DRAWTEXT_FIX:"DRAWNUMBER_FIX"==this.Name&&(this.Canvas.font=this.Font.DRAWNUMBER_FIX),0==this.Position.Type?this.Canvas.textAlign="left":1==this.Position.Type?this.Canvas.textAlign="right":this.Canvas.textAlign="center",1==this.Direction?this.Canvas.textBaseline="bottom":2==this.Direction?this.Canvas.textBaseline="top":this.Canvas.textBaseline="middle",Array.isArray(this.Text)){if(!this.Data||!this.Data.Data)return;for(var i=this.ChartFrame.XPointCount,r=this.Data.DataOffset,n=0;r<this.Data.Data.length&&n<i;++r,++n){var o=this.Text[r];if(o){this.DrawText(o,a,e,t);break}}}else this.DrawText(this.Text,a,e,t)}},this.DrawText=function(t,e,a,i){i?(this.Canvas.save(),this.Canvas.translate(a,e),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,0,0),this.Canvas.restore()):this.Canvas.fillText(t,e,a)},this.DrawTextV2=function(t,e,a){var i=this.Canvas.measureText(t).width;if(a){var r=e.Y,n=e.X;if("right"==e.Text.Align?n-=i:"center"==e.Text.Align&&(n-=i/2),"top"==e.Text.Baseline?r-=e.Font.Height:"middle"==e.Text.Baseline&&(r-=e.Font.Height/2),this.TextBG&&(this.TextBG.Color||this.TextBG.Border)){var o=r-(u=this.TextBG.Margin)[0],s=n-u[2],h=i+u[2]+u[3],l=e.Font.Height+u[0]+u[1];this.TextBG.Color&&(this.Canvas.fillStyle=this.TextBG.Color,this.Canvas.fillRect(o,s,l,h)),this.TextBG.Border&&(this.Canvas.strokeStyle=this.TextBG.Border,this.Canvas.strokeRect(_(o),_(s),k(l),k(h)))}this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=e.Text.Color,this.Canvas.save(),this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,0,0),this.Canvas.restore()}else{r=e.X,n=e.Y;if("right"==e.Text.Align?r-=i:"center"==e.Text.Align&&(r-=i/2),"top"==e.Text.Baseline?n+=e.Font.Height:"middle"==e.Text.Baseline&&(n+=e.Font.Height/2),this.TextBG&&(this.TextBG.Color||this.TextBG.Border)){var u;o=r-(u=this.TextBG.Margin)[2],s=n-e.Font.Height-u[1],h=i+u[2]+u[3],l=e.Font.Height+u[0]+u[1];this.TextBG.Color&&(this.Canvas.fillStyle=this.TextBG.Color,this.Canvas.fillRect(o,s,h,l)),this.TextBG.Border&&(this.Canvas.strokeStyle=this.TextBG.Border,this.Canvas.strokeRect(_(o),_(s),k(h),k(l)))}this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=e.Text.Color,this.Canvas.fillText(t,r,n)}}}function Wt(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawText",this.Color="rgb(255,193,37)",this.TextFont="14px 微软雅黑",this.TextBaseline="middle",this.TextAlign="left",this.Text,this.TextBG,this.FixedFontSize=-1,this.YOffset=0,this.FixedPosition=-1,this.VerticalLine,this.ShowOffset={X:0,Y:0},this.ExportData=this.ExportBoolData,this.TextSize={Max:ia.DRAWICON.Text.MaxSize,Min:ia.DRAWICON.Text.MinSize,Zoom:{Type:ia.DRAWICON.Text.Zoom.Type,Value:ia.DRAWICON.Text.Zoom.Value},FontName:ia.DRAWICON.Text.FontName,YOffset:ia.DRAWICON.Text.YOffset},this.ReloadResource=function(t){this.TextSize={Max:ia.DRAWTEXT.MaxSize,Min:ia.DRAWTEXT.MinSize,Zoom:{Type:ia.DRAWTEXT.Zoom.Type,Value:ia.DRAWTEXT.Zoom.Value},FontName:ia.DRAWTEXT.FontName,YOffset:ia.DRAWTEXT.YOffset}},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+ia.FrameLeftMargin,n=this.ChartBorder.GetRight(),o=this.ChartBorder.GetTopEx(),s=this.ChartBorder.GetBottomEx();t&&(n=this.ChartBorder.GetBottom(),o=this.ChartBorder.GetRightEx(),s=this.ChartBorder.GetLeftEx(),r=this.ChartBorder.GetTop()+i/2+ia.FrameLeftMargin);var h=this.ChartFrame.XPointCount,l=Array.isArray(this.Text),u={Text:{Color:this.Color,Align:this.TextAlign,Baseline:this.TextBaseline},Font:{}};this.FixedFontSize>0?this.TextFont=this.FixedFontSize+"px "+this.TextSize.FontName:this.TextFont=this.GetDynamicFont(a,i,this.TextSize.Max,this.TextSize.Min,this.TextSize.Zoom,this.TextSize.FontName),this.Canvas.font=this.TextFont,u.Font={Height:this.GetFontHeight()};for(var c=this.Data.DataOffset,f=0;c<this.Data.Data.length&&f<h;++c,++f,r+=a+i){var d=this.Data.Data[c];if(null!=d){if(e)var C=this.ChartFrame.GetXFromIndex(f);else{var p=r+a;if(p>n)break;C=r+(p-r)/2}var m;if(m=1===this.FixedPosition?o:2===this.FixedPosition?s:this.ChartFrame.GetYFromData(d),C>n)break;if(m+=this.ShowOffset.Y,C+=this.ShowOffset.X,u.X=C,u.Y=m,l){var D=this.Text[c];if(!D)continue;this.DrawText(D,u,t)}else this.DrawText(this.Text,u,t);this.DrawVerticalLine(c,u,t)}}}},this.DrawText=function(t,e,a){var i=this.Canvas.measureText(t).width;if(a){var r=e.Y,n=e.X;if("right"==e.Text.Align?n-=i:"center"==e.Text.Align&&(n-=i/2),"top"==e.Text.Baseline?r-=e.Font.Height:"middle"==e.Text.Baseline&&(r-=e.Font.Height/2),this.TextBG&&(this.TextBG.Color||this.TextBG.Border)){var o=r-(u=this.TextBG.Margin)[0],s=n-u[2],h=i+u[2]+u[3],l=e.Font.Height+u[0]+u[1];this.TextBG.Color&&(this.Canvas.fillStyle=this.TextBG.Color,this.Canvas.fillRect(o,s,l,h)),this.TextBG.Border&&(this.Canvas.strokeStyle=this.TextBG.Border,this.Canvas.strokeRect(_(o),_(s),k(l),k(h))),e.Rect={Bottom:o,Top:o+l}}else{o=r,l=e.Font.Height;e.Rect={Bottom:o,Top:o+l}}this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=e.Text.Color,this.Canvas.save(),this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,0,0),this.Canvas.restore()}else{r=e.X,n=e.Y;if("right"==e.Text.Align?r-=i:"center"==e.Text.Align&&(r-=i/2),"top"==e.Text.Baseline?n+=e.Font.Height:"middle"==e.Text.Baseline&&(n+=e.Font.Height/2),this.TextBG&&(this.TextBG.Color||this.TextBG.Border)){var u;o=r-(u=this.TextBG.Margin)[2],s=n-e.Font.Height-u[1],h=i+u[2]+u[3],l=e.Font.Height+u[0]+u[1];this.TextBG.Color&&(this.Canvas.fillStyle=this.TextBG.Color,this.Canvas.fillRect(o,s,h,l)),this.TextBG.Border&&(this.Canvas.strokeStyle=this.TextBG.Border,this.Canvas.strokeRect(_(o),_(s),k(h),k(l))),e.Rect={Top:s,Bottom:s+l}}else{s=n-e.Font.Height,l=e.Font.Height;e.Rect={Top:s,Bottom:s+l}}this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=e.Text.Color,this.Canvas.fillText(t,r,n)}},this.DrawVerticalLine=function(t,e,a){if(this.VerticalLine){var i=this.VerticalLine.Data[t];if(i&&Te.IsNumber(i.High)&&Te.IsNumber(i.Low)){var r,n,o=this.ChartFrame.GetYFromData(i.High),s=this.ChartFrame.GetYFromData(i.Low);if(a)if(e.Rect.Bottom>o)r=e.Rect.Bottom-1,n=o+1;else{if(!(e.Rect.Top<s))return;r=e.Rect.Top-1,n=s-1}else if(e.Rect.Bottom<o)r=e.Rect.Bottom+1,n=o-1;else{if(!(e.Rect.Top>s))return;r=e.Rect.Top-1,n=s+1}this.Canvas.save();var h=A(),l=e.X;1==this.VerticalLine.LineType&&(this.VerticalLine.LineDotted?this.Canvas.setLineDash(this.VerticalLine.LineDotted):this.Canvas.setLineDash([5,10])),Te.IsPlusNumber(this.VerticalLine.LineWidth)&&(this.Canvas.lineWidth=this.VerticalLine.LineWidth*h),this.Canvas.strokeStyle=this.VerticalLine.Color,this.Canvas.beginPath(),a?(this.Canvas.moveTo(_(r),_(l)),this.Canvas.lineTo(_(n),_(l))):(this.Canvas.moveTo(_(l),_(r)),this.Canvas.lineTo(_(l),_(n))),this.Canvas.stroke(),this.Canvas.restore()}}}}function Ut(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartStraightArea",this.Color="rgb(255,193,37)",this.Font="11px 微软雅黑",this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data)if(!0!==this.ChartFrame.IsHScreen){this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight(),this.ChartBorder.GetBottom();var t=this.ChartBorder.GetLeft(),e=this.ChartFrame.XPointCount,a=this.ChartFrame.GetXFromIndex(e-1);for(var i in this.Data.Data){var r=this.Data.Data[i];if(null!=r&&!isNaN(r.Value)&&!isNaN(r.Value2)&&null!=r.Color){var n=Math.max(r.Value,r.Value2),o=Math.min(r.Value,r.Value2),s=this.ChartFrame.GetYFromData(n),h=this.ChartFrame.GetYFromData(o);if(this.Canvas.fillStyle=r.Color,this.Canvas.fillRect(k(t),k(s),k(a-t),k(h-s)),r.Title&&r.TitleColor){this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=r.TitleColor,this.Canvas.font=this.Font;var l=s+(h-s)/2;this.Canvas.fillText(r.Title,a,l)}}}}else this.HScreenDraw()},this.HScreenDraw=function(){var t=this.ChartBorder.GetBottom(),e=this.ChartBorder.GetTop(),a=this.ChartBorder.GetHeight();for(var i in this.Data.Data){var r=this.Data.Data[i];if(null!=r&&!isNaN(r.Value)&&!isNaN(r.Value2)&&null!=r.Color){var n=Math.max(r.Value,r.Value2),o=Math.min(r.Value,r.Value2),s=this.ChartFrame.GetYFromData(n),h=this.ChartFrame.GetYFromData(o);if(this.Canvas.fillStyle=r.Color,this.Canvas.fillRect(k(h),k(e),k(s-h),k(a)),r.Title&&r.TitleColor){var l=s+(h-s)/2,u=t;this.Canvas.save(),this.Canvas.translate(l,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=r.TitleColor,this.Canvas.font=this.Font,this.Canvas.fillText(r.Title,0,-2),this.Canvas.restore()}}}},this.GetMaxMin=function(){this.ChartFrame.XPointCount;var t={Min:null,Max:null};if(!this.Data||!this.Data.Data)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];if(null!=a&&!isNaN(a.Value)&&!isNaN(a.Value2)){var i=Math.max(a.Value,a.Value2),r=Math.min(a.Value,a.Value2);null==t.Max&&(t.Max=i),null==t.Min&&(t.Min=r),t.Max<i&&(t.Max=i),t.Min>r&&(t.Min=r)}}return t}}function Kt(){this.newMethod=At,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinutePriceLine",this.YClose,this.IsDrawArea=!0,this.AreaColor="rgba(0,191,255,0.1)",this.IsShowLead=!1,this.LeadData,this.UpColor=ia.UpBarColor,this.DownColor=ia.DownBarColor,this.BeforeOpenData,this.BeforeLineColor=ia.Minute.Before.LineColor,this.BeforeAvPriceColor=ia.Minute.Before.AvPriceColor,this.BeforePoint=G(ia.Minute.Before.Point),this.AfterCloseData,this.AfterLineColor=ia.Minute.After.LineColor,this.AfterAvPriceColor=ia.Minute.After.AvPriceColor,this.AfterPoint=G(ia.Minute.After.Point),this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.ColorLineData,this.Source,this.PtInChart=this.PtInLine,this.DrawSelectedStatus=this.DrawLinePoint,this.PtInChart=this.PtInLine,this.DrawSelectedStatus=this.DrawLinePoint,this.DayOffset,this.LastPoint={},this.FFMChart,this.DrawType=0,this.UpdateLastPoint=function(t,e,a,i){Te.IsNumber(this.LastPoint.DateTime)&&this.LastPoint.DateTime>t||(this.LastPoint.DateTime=t,this.LastPoint.X=e,this.LastPoint.Y=a,this.LastPoint.Data=i,this.LastPoint.Value=i.Value)},this.Draw=function(){if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.LastPoint={},this.IsShow)if(14!=this.DrawType){var t=!0===this.ChartFrame.IsHScreen;this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight();!0===t&&this.ChartBorder.GetBottom();var e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount,i=this.ChartBorder.GetBottomEx(),r=this.ChartBorder.GetLeftEx(),n=this.Data;if(this.DrawBeforeOpen(),this.DrawMultiDayBeforeOpen(),this.IsShowLead&&this.DrawLead(),n){var o=!0,s={},h=0,l=0;this.Canvas.save(),Te.IsPlusNumber(this.LineWidth>0)&&(this.Canvas.lineWidth=this.LineWidth);for(var u=n.DataOffset,c=0;u<n.Data.length&&c<e;++u,++c){var f;if(++l,null!=(f=n.Data[u])){var d=this.ChartFrame.GetXFromIndex(c),C=this.ChartFrame.GetYFromData(f);if(o?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(C,d):this.Canvas.moveTo(d,C),o=!1,s={X:d,Y:C}):t?this.Canvas.lineTo(C,d):this.Canvas.lineTo(d,C),this.Source){var p=this.Source.Data[u],m=1e6*p.Date+100*p.Time;this.UpdateLastPoint(m,d,C,{Value:f,Index:u,Date:p.Date,Time:p.Time,Type:0,Explain:"盘中"})}++h,l>=a&&(o=!0,this.Canvas.stroke(),this.IsDrawArea&&(t?(this.Canvas.lineTo(r,d),this.Canvas.lineTo(r,s.X),this.SetFillStyle(this.AreaColor,this.ChartBorder.GetRightEx(),i,this.ChartBorder.GetLeftEx(),i)):(this.Canvas.lineTo(d,i),this.Canvas.lineTo(s.X,i),this.SetFillStyle(this.AreaColor,r,this.ChartBorder.GetTopEx(),r,i)),this.Canvas.fill()),l=0,h=0)}}if(h>0&&(1==h?(this.Canvas.beginPath(),t?this.Canvas.arc(s.Y,s.X,1,0,360,!1):this.Canvas.arc(s.X,s.Y,1,0,360,!1),this.Canvas.closePath(),this.Canvas.fillStyle=this.Color,this.Canvas.fill()):(this.Canvas.stroke(),this.IsDrawArea&&(t?(this.Canvas.lineTo(r,d),this.Canvas.lineTo(r,s.X),this.SetFillStyle(this.AreaColor,this.ChartBorder.GetRightEx(),i,this.ChartBorder.GetLeftEx(),i)):(this.Canvas.lineTo(d,i),this.Canvas.lineTo(s.X,i),this.SetFillStyle(this.AreaColor,r,this.ChartBorder.GetTopEx(),r,i)),this.Canvas.fill()))),this.Canvas.restore(),this.DrawColorLine(),this.DrawAfterClose(),this.DrawMultiDayAfterClose(),this.GetEventCallback){var D=this.GetEventCallback(w.ON_DRAW_MINUTE_LAST_POINT);if(D){n={LastPoint:{X:this.LastPoint.X,Y:this.LastPoint.Y},Price:this.LastPoint.Price,Data:this.LastPoint.Data};D.Callback(D,n,this)}}}}else this.FFMChart&&this.FFMChart.Draw&&this.FFMChart.Draw(this)},this.DrawLead=function(){if(this.LeadData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount,i=(this.ChartBorder.GetBottomEx(),this.ChartBorder.GetTopEx());if(!0===t&&(i=this.ChartBorder.GetRightEx()),!(e>a)){for(var r=[],n=null,o=null,s=this.ChartFrame.GetYFromData(this.YClose),h=(s-i)/3,l=this.LeadData,u=l.DataOffset,c=0;u<l.Data.length&&c<e;++u,++c){var f=l.Data[u];if(Te.IsNumber(f)&&0!=f){var d=this.ChartFrame.GetXFromIndex(c);(null==n||n<f)&&(n=f),(null==o||o>f)&&(o=f),r.push({X:d,Value:f})}}if(!(r.length<=0)){var C=Math.max(Math.abs(n),Math.abs(o));for(var u in r){var p=r[u];p.Value>0?this.Canvas.strokeStyle=this.UpColor:this.Canvas.strokeStyle=this.DownColor;var m=s-p.Value*h/C;d=_(p.X);this.Canvas.beginPath(),!0===t?(this.Canvas.moveTo(s,d),this.Canvas.lineTo(m,d)):(this.Canvas.moveTo(d,s),this.Canvas.lineTo(d,m)),this.Canvas.stroke()}}}}},this.DrawBeforeOpen=function(){this.ChartBorder.LeftExtendWidth<10||this.BeforeOpenData&&this.DrawCallAuction(-1,this.BeforeOpenData,!0)},this.DrawAfterClose=function(){this.ChartBorder.RightExtendWidth<10||this.AfterCloseData&&this.DrawCallAuction(-1,this.AfterCloseData,!1)},this.DrawMultiDayBeforeOpen=function(){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Left<=0)&&this.MultiDayBeforeOpenData){var t=0,e=this.MultiDayBeforeOpenData.length;this.DayOffset&&(Te.IsNumber(this.DayOffset.Offset)&&(t=this.DayOffset.Offset),Te.IsNumber(this.DayOffset.ShowDayCount)&&(e=this.DayOffset.ShowDayCount));for(var a=t,i=0;a<this.MultiDayBeforeOpenData.length&&i<e;++a,++i){var r=this.MultiDayBeforeOpenData[a];this.DrawCallAuction(i,r,!0)}}},this.DrawMultiDayAfterClose=function(){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Right<=0)&&this.MultiDayAfterCloseData){var t=0,e=this.MultiDayAfterCloseData.length;this.DayOffset&&(Te.IsNumber(this.DayOffset.Offset)&&(t=this.DayOffset.Offset),Te.IsNumber(this.DayOffset.ShowDayCount)&&(e=this.DayOffset.ShowDayCount));for(var a=t,i=0;a<this.MultiDayAfterCloseData.length&&i<e;++a,++i){var r=this.MultiDayAfterCloseData[a];this.DrawCallAuction(i,r,!1)}}},this.DrawCallAuction=function(t,e,a){if(e){e.Index=t;var i=!0===this.ChartFrame.IsHScreen,r=!0,n=0;e.TotalCount;if(3==e.Ver){for(var o=0;o<e.Data.length;++o){if((c=e.Data[o])&&Te.IsNumber(c.AvPrice)){if(a)var s=this.ChartFrame.GetLeftExtendXFromIndex(o,e),h=this.ChartFrame.GetLeftExtendYFromData(c.AvPrice);else s=this.ChartFrame.GetRightExtendXFromIndex(o,e),h=this.ChartFrame.GetRightExtendYFromData(c.AvPrice);r?(this.Canvas.strokeStyle=this.BeforeAvPriceColor,this.Canvas.beginPath(),i?this.Canvas.moveTo(h,s):this.Canvas.moveTo(s,h),r=!1):i?this.Canvas.lineTo(h,s):this.Canvas.lineTo(s,h),++n}}n>0&&this.Canvas.stroke()}r=!0,n=0;var l=[];for(o=0;o<e.Data.length;++o){if((c=e.Data[o])&&Te.IsNumber(c.Price)){if(a)s=this.ChartFrame.GetLeftExtendXFromIndex(o,e),h=this.ChartFrame.GetLeftExtendYFromData(c.Price);else s=this.ChartFrame.GetRightExtendXFromIndex(o,e),h=this.ChartFrame.GetRightExtendYFromData(c.Price);r?(this.Canvas.strokeStyle=a?this.BeforeLineColor:this.AfterLineColor,this.Canvas.beginPath(),i?this.Canvas.moveTo(h,s):this.Canvas.moveTo(s,h),r=!1,l.push({X:s,Y:h})):(i?this.Canvas.lineTo(h,s):this.Canvas.lineTo(s,h),l.push({X:s,Y:h}));var u=1e6*c.Date+c.Time;this.UpdateLastPoint(u,s,h,{Value:c.Price,Index:o,Date:c.Date,Time:c.Time,Type:a?1:2,Explain:a?"盘前":"盘后"}),++n}else if(0==o&&a&&Te.IsNumber(this.YClose)){var s=this.ChartFrame.GetLeftExtendXFromIndex(o,e),h=this.ChartFrame.GetLeftExtendYFromData(this.YClose);this.Canvas.strokeStyle=this.BeforeLineColor,this.Canvas.beginPath(),i?this.Canvas.moveTo(h,s):this.Canvas.moveTo(s,h),r=!1}}if(n>0&&this.Canvas.stroke(),2==e.Ver&&this.BeforePoint.Radius>0)for(var o in this.Canvas.fillStyle=a?this.BeforePoint.Color:this.AfterPoint.Color,l){var c=l[o];this.Canvas.beginPath(),i?this.Canvas.arc(c.Y,c.X,this.BeforePoint.Radius,0,2*Math.PI):this.Canvas.arc(c.X,c.Y,this.BeforePoint.Radius,0,2*Math.PI),this.Canvas.fill()}}},this.FindColorLineItem=function(t){if(!t||!this.ColorLineData)return null;for(var e in this.ColorLineData){var a=this.ColorLineData[e];if(a.Date==t.Date&&t.Time>=a.Start&&t.Time<=a.End)return a}return null},this.DrawColorLine=function(){if(this.ColorLineData&&this.Source&&this.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartBorder.GetBorder(),this.ChartFrame.XPointCount),a=(this.ChartFrame.MinuteCount,this.Data),i=!0,r={},n=0,o=null;this.Canvas.save();for(var s=a.DataOffset,h=0;s<a.Data.length&&h<e;++s,++h){var l;l=a.Data[s];var u=this.Source.Data[s];if(l&&u){var c=this.FindColorLineItem(u);if(c){o&&o!=c.Color&&(this.Canvas.stroke(),i=!0);var f=this.ChartFrame.GetXFromIndex(h),d=this.ChartFrame.GetYFromData(l);i?(this.Canvas.strokeStyle=c.Color,Te.IsNumber(c.LineWidth)&&(this.Canvas.lineWidth=c.LineWidth),this.Canvas.beginPath(),t?this.Canvas.moveTo(d,f):this.Canvas.moveTo(f,d),i=!1,{X:f,Y:d},o=c.Color):t?this.Canvas.lineTo(d,f):this.Canvas.lineTo(f,d),r.X=f,r.Y=d,r.Price=l,++n}else n>0&&(this.Canvas.stroke(),i=!0)}}n>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.GetMaxMin=function(){if(14==this.DrawType&&this.FFMChart&&this.FFMChart.GetMaxMin)return this.FFMChart.GetMaxMin(this);var t=this.ChartFrame.XPointCount,e={};if(null==this.YClose)return e;if(!this.IsShow)return e;if(e.Min=this.YClose,e.Max=this.YClose,this.ChartBorder.LeftExtendWidth>10&&this.BeforeOpenData)for(var a in this.BeforeOpenData.Data){var i=this.BeforeOpenData.Data[a];i&&(Te.IsNumber(i.Price)&&(null==e.Max&&(e.Max=i.Price),null==e.Min&&(e.Min=i.Price),e.Max<i.Price&&(e.Max=i.Price),e.Min>i.Price&&(e.Min=i.Price)),3==this.BeforeOpenData.Ver&&Te.IsNumber(i.AvPrice)&&(null==e.Max&&(e.Max=i.AvPrice),null==e.Min&&(e.Min=i.AvPrice),e.Max<i.AvPrice&&(e.Max=i.AvPrice),e.Min>i.AvPrice&&(e.Min=i.AvPrice)))}for(var r=this.Data,n=(a=r.DataOffset,0);a<r.Data.length&&n<t;++a,++n){var o;null!=(o=r.Data[a])&&(null==e.Max&&(e.Max=o),null==e.Min&&(e.Min=o),e.Max<o&&(e.Max=o),e.Min>o&&(e.Min=o))}if(e.Max==this.YClose&&e.Min==this.YClose)return e.Max=this.YClose+.1*this.YClose,e.Min=this.YClose-.1*this.YClose,e;var s=Math.max(Math.abs(this.YClose-e.Max),Math.abs(this.YClose-e.Min));return e.Max=this.YClose+s,e.Min=this.YClose-s,e},this.GetTooltipData=function(t,e,a){var i=!0===this.ChartFrame.IsHScreen;if(i)return!1;if(!this.IsShow)return!1;if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return!1;if(1!=this.ChartBorder.PtInClient(t,e,this.Canvas,i))return!1;var r=this.Data,n=this.ChartFrame.GetXData(t),o=Math.ceil(n),s=Math.floor(n);if(o>=r.Data.length||s>=r.Data.length)return!1;if(o==s)r.Data[s];else{var h=r.Data[s],l=r.Data[o],u={X:this.ChartFrame.GetXFromIndex(s),Y:this.ChartFrame.GetYFromData(h)},c={X:this.ChartFrame.GetXFromIndex(o),Y:this.ChartFrame.GetYFromData(l)};if(this.Canvas.beginPath(),this.Canvas.moveTo(u.X,u.Y+5),this.Canvas.lineTo(u.X,u.Y-5),this.Canvas.lineTo(c.X,c.Y-5),this.Canvas.lineTo(c.X,c.Y+5),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return a.Data={Index:n,Start:{Index:s,Item:r.Data[s]},End:{Index:o,Value:r.Data[o]}},a.ChartPaint=this,a.Type=5,!0}return!1}}function zt(){this.newMethod=At,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinutePositionLine",this.Draw=function(){if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.IsShow){var t=!0===this.ChartFrame.IsHScreen;this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight();!0===t&&this.ChartBorder.GetBottom();var e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount,i=(this.ChartBorder.GetBottomEx(),this.ChartBorder.GetLeftEx(),this.Data);if(i){var r=!0,n={},o={},s=0,h=0;this.Canvas.save(),Te.IsPlusNumber(this.LineWidth>0)&&(this.Canvas.lineWidth=this.LineWidth),this.IsDotLine&&this.Canvas.setLineDash(ia.DOTLINE.LineDash);for(var l=i.DataOffset,u=0;l<i.Data.length&&u<e;++l,++u){var c;if(++h,null!=(c=i.Data[l])){var f=this.ChartFrame.GetXFromIndex(u),d=this.ChartFrame.GetYFromData(c);r?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(d,f):this.Canvas.moveTo(f,d),r=!1,n={X:f,Y:d}):t?this.Canvas.lineTo(d,f):this.Canvas.lineTo(f,d),o.X=f,o.Y=d,o.Price=c,++s,h>=a&&(r=!0,this.Canvas.stroke(),h=0,s=0)}}s>0&&(1==s?(this.Canvas.beginPath(),t?this.Canvas.arc(n.Y,n.X,1,0,360,!1):this.Canvas.arc(n.X,n.Y,1,0,360,!1),this.Canvas.closePath(),this.Canvas.fillStyle=this.Color,this.Canvas.fill()):this.Canvas.stroke()),this.Canvas.restore()}}}}function Jt(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMACD",this.UpColor=ia.UpBarColor,this.DownColor=ia.DownBarColor,this.LineWidth=1,this.DrawSelectedStatus=this.DrawLinePoint,this.ExportData=this.ExportArrayData,this.PtInChart=function(t,e){var a=this.ChartFrame.DataWidth,i=this.LineWidth*A();return 50==this.barWidth?i=null:i>a&&(i=a),i<4&&(i=4),this.PtInBar(t,e,{BarWidth:i})},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&!this.IsShowIndexTitleOnly())if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(!0!==this.ChartFrame.IsHScreen){var t=this.IsMinuteFrame(),e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+ia.FrameLeftMargin,n=i.RightEx,o=this.ChartFrame.XPointCount,s=this.GetLockRect();s&&(n=s.Left);var h=this.ChartFrame.GetYFromData(0),l=this.LineWidth*A();50==this.LineWidth?l=e:l>e&&(l=e);var u=this.Canvas.lineWidth;this.Canvas.lineWidth=l;for(var c=this.Data.DataOffset,f=0;c<this.Data.Data.length&&f<o;++c,++f,r+=e+a){var d=this.Data.Data[c];if(null!=d){if(t)var C=this.ChartFrame.GetXFromIndex(f);else{var p=r+e;if(p>n)break;C=r+(p-r)/2}var m=this.ChartFrame.GetYFromData(d);if(C>n)break;var D=B(l,C);this.Canvas.beginPath(),this.Canvas.moveTo(D,h),this.Canvas.lineTo(D,m),this.Canvas.strokeStyle=d>=0?this.UpColor:this.DownColor,this.Canvas.stroke(),this.Canvas.closePath()}}this.Canvas.lineWidth=u}else this.HScreenDraw()},this.HScreenDraw=function(){var t=this.ChartFrame.DataWidth,e=(this.ChartFrame.DistanceWidth,this.ChartBorder.GetHScreenBorder().BottomEx),a=this.ChartFrame.XPointCount,i=this.GetLockRect();i&&(e=i.Top);var r=this.ChartFrame.GetYFromData(0),n=this.LineWidth*A();50==this.LineWidth?n=t:n>t&&(n=t);var o=this.Canvas.lineWidth;this.Canvas.lineWidth=n;for(var s=this.Data.DataOffset,h=0;s<this.Data.Data.length&&h<a;++s,++h){var l=this.Data.Data[s];if(null!=l){var u=this.ChartFrame.GetXFromIndex(h),c=this.ChartFrame.GetYFromData(l);if(u>e)break;this.Canvas.beginPath(),this.Canvas.moveTo(r,_(u)),this.Canvas.lineTo(c,_(u)),this.Canvas.strokeStyle=l>=0?this.UpColor:this.DownColor,this.Canvas.stroke(),this.Canvas.closePath()}}this.Canvas.lineWidth=o},this.GetItemData=function(t){if(!t)return null;if(!Te.IsNumber(t.Index))return null;if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return null;var e=t.Index;if(e<0||e>=this.Data.Data.length)return null;var a=this.Data.Data[e];return[{Value:a,Color:a>0?this.UpColor:this.DownColor,Name:this.Name}]}}function jt(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartBar",this.UpBarColor=ia.UpBarColor,this.DownBarColor=ia.DownBarColor,this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else{var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetRight(),i=this.ChartFrame.XPointCount,r=this.ChartBorder.GetLeft()+e/2+2,n=this.ChartFrame.GetYFromData(0);if(t>=4){n=k(n);for(var o=this.Data.DataOffset,s=0;o<this.Data.Data.length&&s<i;++o,++s,r+=t+e){if(null!=(f=this.Data.Data[o])&&0!=f){var h=r;if(r+t>a)break;var l=this.ChartFrame.GetXFromIndex(s),u=this.ChartFrame.GetYFromData(f);this.Canvas.fillStyle=f>0?this.UpBarColor:this.DownBarColor;var c=k(Math.abs(n-u));u=n-u>0?n-c:n+c,this.Canvas.fillRect(k(h),u,k(t),c)}}}else for(o=this.Data.DataOffset,s=0;o<this.Data.Data.length&&s<i;++o,++s,r+=t+e){var f;if(null!=(f=this.Data.Data[o])&&0!=f){h=r;if(r+t>a)break;l=this.ChartFrame.GetXFromIndex(s),u=this.ChartFrame.GetYFromData(f);this.Canvas.strokeStyle=f>0?this.UpBarColor:this.DownBarColor,this.Canvas.beginPath(),this.Canvas.moveTo(_(l),u),this.Canvas.lineTo(_(l),n),this.Canvas.stroke()}}}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:0,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];null==e.Max&&(e.Max=r),e.Max<r&&(e.Max=r)}return e}}function qt(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.ClassName="ChartBand",this.FirstColor=ia.Index.LineColor[0],this.SecondColor=ia.Index.LineColor[1],this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else for(var t=this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount,r=this.ChartBorder.GetLeft()+a/2+2,n=0,o=0,s=0,h=[],l=[],u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<i;++u,++c,r+=e+a){for(h=[],l=[];u<this.Data.Data.length&&c<i;++u,++c,r+=e+a){var f=this.Data.Data[u];if(null==f||null==f.Value||null==f.Value2)break;n=this.ChartFrame.GetXFromIndex(c),o=this.ChartFrame.GetYFromData(f.Value),s=this.ChartFrame.GetYFromData(f.Value2),t?(h.push({x:o,y:n}),l.push({x:s,y:n})):(h.push({x:n,y:o}),l.push({x:n,y:s}))}h.length>1&&l.length>1&&this.DrawBand(h,l)}},this.ClipTop=function(t){var e=this.ChartFrame.IsHScreen;this.Canvas.beginPath();for(var a=0;a<t.length;++a)0==a?this.Canvas.moveTo(t[a].x,t[a].y):this.Canvas.lineTo(t[a].x,t[a].y);var i=t[0],r=t[t.length-1];if(e){var n=this.ChartBorder.GetRightEx();this.Canvas.lineTo(n,r.y),this.Canvas.lineTo(n,i.y)}else{var o=this.ChartBorder.GetTopEx();this.Canvas.lineTo(r.x,o),this.Canvas.lineTo(i.x,o)}this.Canvas.closePath(),this.Canvas.clip()},this.ClipBottom=function(t){var e=this.ChartFrame.IsHScreen;this.Canvas.beginPath();for(var a=0;a<t.length;++a)0==a?this.Canvas.moveTo(t[a].x,t[a].y):this.Canvas.lineTo(t[a].x,t[a].y);var i=t[0],r=t[t.length-1];if(e){var n=this.ChartBorder.GetLeftEx();this.Canvas.lineTo(n,r.y),this.Canvas.lineTo(n,i.y)}else{var o=this.ChartBorder.GetBottomEx();this.Canvas.lineTo(r.x,o),this.Canvas.lineTo(i.x,o)}this.Canvas.closePath(),this.Canvas.clip()},this.DrawArea=function(t,e,a){this.Canvas.beginPath();for(var i=0;i<t.length;++i)0==i?this.Canvas.moveTo(t[i].x,t[i].y):this.Canvas.lineTo(t[i].x,t[i].y);for(i=e.length-1;i>=0;--i)this.Canvas.lineTo(e[i].x,e[i].y);this.Canvas.closePath(),this.Canvas.fillStyle=a,this.Canvas.fill()},this.DrawBand=function(t,e){this.FirstColor&&(this.Canvas.save(),this.ClipTop(t),this.DrawArea(t,e,this.FirstColor),this.Canvas.restore()),this.SecondColor&&(this.Canvas.save(),this.ClipBottom(t),this.DrawArea(t,e,this.SecondColor),this.Canvas.restore())},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r&&null!=r.Value&&null!=r.Value2){var n=r.Value>r.Value2?r.Value:r.Value2,o=r.Value<r.Value2?r.Value:r.Value2;null==e.Max?e.Max=n:e.Max<n&&(e.Max=n),null==e.Min?e.Min=o:e.Min>o&&(e.Min=o)}}return e}}function Zt(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.ClassName="ChartLineArea",this.Color="rgb(56,67,99)",this.IsHScreen=!1,this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+ia.FrameLeftMargin,r=0,n=0,o=0,s=[],h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<a;++h,++l,i+=t+e){var u=this.Data.Data[h];s[h]=null,null!=u&&null!=u.Value&&null!=u.Value2&&(r=this.ChartFrame.GetXFromIndex(l),n=this.ChartFrame.GetYFromData(u.Value),o=this.ChartFrame.GetYFromData(u.Value2),this.IsHScreen?s[h]={Line:{X:n,Y:r},Line2:{X:o,Y:r}}:s[h]={Line:{X:r,Y:n},Line2:{X:r,Y:o}})}this.Canvas.fillStyle=this.Color;var c=!0,f=0,d=[];for(var h in s){var C=s[h];if(C)c?(this.Canvas.beginPath(),this.Canvas.moveTo(C.Line.X,C.Line.Y),c=!1):this.Canvas.lineTo(C.Line.X,C.Line.Y),d.push(C),++f;else{if(f>0){for(l=d.length-1;l>=0;--l){var p=d[l];this.Canvas.lineTo(p.Line2.X,p.Line2.Y)}this.Canvas.closePath(),this.Canvas.fill()}c=!0,f=0,d=[]}}if(f>0){for(l=d.length-1;l>=0;--l){p=d[l];this.Canvas.lineTo(p.Line2.X,p.Line2.Y)}this.Canvas.closePath(),this.Canvas.fill()}}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r&&null!=r.Value&&null!=r.Value2){var n=r.Value>r.Value2?r.Value:r.Value2,o=r.Value<r.Value2?r.Value:r.Value2;null==e.Max?e.Max=n:e.Max<n&&(e.Max=n),null==e.Min?e.Min=o:e.Min>o&&(e.Min=o)}}return e}}function Qt(){this.newMethod=Zt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.IsHScreen=!1,this.ClassName="ChartFillRGN",this.DrawRGB=function(t){var e=!0,a=0,i=[],r=null;for(var n in t){var o=t[n];if(!o||r&&o.Color!=r){if(a>0){for(var s=i.length-1;s>=0;--s){var h=i[s];this.Canvas.lineTo(h.Line2.X,h.Line2.Y)}this.Canvas.closePath(),this.Canvas.fillStyle=r,this.Canvas.fill()}e=!0,a=0,i=[],r=null}o&&(e?(this.Canvas.beginPath(),this.Canvas.moveTo(o.Line.X,o.Line.Y),e=!1,r=o.Color):this.Canvas.lineTo(o.Line.X,o.Line.Y),i.push(o),++a)}if(a>0){for(s=i.length-1;s>=0;--s){h=i[s];this.Canvas.lineTo(h.Line2.X,h.Line2.Y)}this.Canvas.closePath(),this.Canvas.fillStyle=r,this.Canvas.fill()}},this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+ia.FrameLeftMargin,r=0,n=0,o=0,s=[],h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<a;++h,++l,i+=t+e){var u=this.Data.Data[h];s[h]=null,null!=u&&null!=u.Value&&null!=u.Value2&&u.Color&&(r=this.ChartFrame.GetXFromIndex(l),n=this.ChartFrame.GetYFromData(u.Value),o=this.ChartFrame.GetYFromData(u.Value2),this.IsHScreen?s[h]={Line:{X:n,Y:r},Line2:{X:o,Y:r},Color:u.Color}:s[h]={Line:{X:r,Y:n},Line2:{X:r,Y:o},Color:u.Color})}this.DrawRGB(s)}}}function $t(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.ClassName="ChartChannel",this.IsHScreen=!1,this.PointCount=0,this.DataWidth=0,this.DistanceWidth=0,this.ChartRight=0,this.LineColor="RGB(255,0,0)",this.LineDotted=[3,3],this.AreaColor="RGB(255,222,173)",this.LineWidth=1,this.CalculateData=function(){for(var t=[],e=[],a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<this.PointCount;++a,++i){var r=this.Data.Data[a];if(r&&Te.IsNumber(r.Value)&&Te.IsNumber(r.Value2)){var n=this.ChartFrame.GetXFromIndex(i);if(n>this.ChartRight)break;var o=this.ChartFrame.GetYFromData(r.Value),s=this.ChartFrame.GetYFromData(r.Value2);e.push({X:n,Y:o,Y2:s})}else e.length>0&&(t.push(e),e=[])}return e.length>0&&t.push(e),t},this.DrawArea=function(t){if(!(t.length<=0)){this.Canvas.beginPath();var e=t[0];this.IsHScreen?this.Canvas.moveTo(e.Y,e.X):this.Canvas.moveTo(e.X,e.Y);for(var a=1;a<t.length;++a){var i=t[a];this.IsHScreen?this.Canvas.lineTo(i.Y,i.X):this.Canvas.lineTo(i.X,i.Y),0}for(a=t.length-1;a>=0;--a){i=t[a];this.IsHScreen?this.Canvas.lineTo(i.Y2,i.X):this.Canvas.lineTo(i.X,i.Y2),0}this.Canvas.closePath(),this.Canvas.fillStyle=this.AreaColor,this.Canvas.fill()}},this.DrawLine=function(t){this.Canvas.strokeStyle=this.LineColor;for(var e=0;e<2;++e){for(var a=!0,i=0,r=0;r<t.length;++r){var n=t[r];a?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(0===e?n.Y:n.Y2,n.X):this.Canvas.moveTo(n.X,0===e?n.Y:n.Y2),a=!1):this.IsHScreen?this.Canvas.lineTo(0===e?n.Y:n.Y2,n.X):this.Canvas.lineTo(n.X,0===e?n.Y:n.Y2),++i}i>0&&this.Canvas.stroke()}},this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else{this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.PointCount=this.ChartFrame.XPointCount,this.DataWidth=this.ChartFrame.DataWidth,this.DistanceWidth=this.ChartFrame.DistanceWidth,this.IsHScreen?this.ChartRight=this.ChartBorder.GetBottom():this.ChartRight=this.ChartBorder.GetRight();var t=this.CalculateData();if(t&&!(t.length<=0)){this.Canvas.save(),this.Canvas.lineWidth=this.LineWidth*A(),this.Canvas.setLineDash(this.LineDotted);for(var e=0;e<t.length;++e){var a=t[e];this.DrawArea(a),this.DrawLine(a)}this.Canvas.restore()}}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r&&null!=r.Value&&null!=r.Value2){var n=r.Value>r.Value2?r.Value:r.Value2,o=r.Value<r.Value2?r.Value:r.Value2;null==e.Max?e.Max=n:e.Max<n&&(e.Max=n),null==e.Min?e.Min=o:e.Min>o&&(e.Min=o)}}return e}}function te(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartBackground",this.Color=null,this.ColorAngle=0,this.IsDrawFirst=!0,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Color&&!(this.Color.length<=0)){if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,2==this.Color.length){if(this.IsHScreen)if(0==this.ColorAngle)var t={X:this.ChartBorder.GetRight(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()};else t={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetBottomEx()};else if(0==this.ColorAngle)t={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetBottomEx()};else t={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetRight(),Y:this.ChartBorder.GetTopEx()};var a=this.Canvas.createLinearGradient(t.X,t.Y,e.X,e.Y);a.addColorStop(0,this.Color[0]),a.addColorStop(1,this.Color[1]),this.Canvas.fillStyle=a}else{if(1!=this.Color.length)return;this.Canvas.fillStyle=this.Color[0]}if("DRAWGBK2"!=this.Name&&"KLINE_BG"!=this.Name){if(this.IsHScreen)var i=this.ChartBorder.GetLeftEx(),r=this.ChartBorder.GetTop(),n=this.ChartBorder.GetWidthEx(),o=this.ChartBorder.GetHeight();else i=this.ChartBorder.GetLeft(),r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetWidth(),o=this.ChartBorder.GetHeightEx();this.Canvas.fillRect(i,r,n,o)}else this.DrawRegion()}},this.DrawRegion=function(){var t=this.ChartFrame.XPointCount,e=this.ChartBorder.GetLeft()+i/2+ia.FrameLeftMargin,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetBottomEx();this.IsHScreen&&(r=this.ChartBorder.GetRightEx(),n=this.ChartBorder.GetLeftEx());for(var o=[],s=this.Data.DataOffset,h=0;s<this.Data.Data.length&&h<t;++s,++h,e+=a+i){var l=this.Data.Data[s];if(o[s]=null,Te.IsNumber(l)&&!(l<=0)){var u=this.ChartFrame.GetXFromIndex(h);this.ChartFrame.GetYFromData(l.Value);this.IsHScreen?o[s]={Line:{X:n,Y:u},Line2:{X:r,Y:u}}:o[s]={Line:{X:u,Y:r},Line2:{X:u,Y:n}}}}this.DrawBG(o)},this.DrawBG=function(t){var e=this.ChartFrame.DataWidth,a=(this.ChartFrame.DistanceWidth+e)/2,i=!0,r=0,n=[],o=null;for(var s in t){var h=t[s];if(!h||o&&h.Color!=o){if(r>0){for(var l=n.length-1;l>=0;--l){var u=n[l];this.IsHScreen?(this.Canvas.lineTo(u.Line2.X,u.Line2.Y+a),this.Canvas.lineTo(u.Line2.X,u.Line2.Y-a)):(this.Canvas.lineTo(u.Line2.X+a,u.Line2.Y),this.Canvas.lineTo(u.Line2.X-a,u.Line2.Y))}this.Canvas.closePath(),this.Canvas.fill()}i=!0,r=0,n=[],o=null}h&&(i?(this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(h.Line.X,h.Line.Y-a),this.Canvas.lineTo(h.Line.X,h.Line.Y+a)):(this.Canvas.moveTo(h.Line.X-a,h.Line.Y),this.Canvas.lineTo(h.Line.X+a,h.Line.Y)),i=!1,o=h.Color):this.IsHScreen?(this.Canvas.lineTo(h.Line.X,h.Line.Y-a),this.Canvas.lineTo(h.Line.X,h.Line.Y+a)):(this.Canvas.lineTo(h.Line.X-a,h.Line.Y),this.Canvas.lineTo(h.Line.X+a,h.Line.Y)),n.push(h),++r)}if(r>0){for(l=n.length-1;l>=0;--l){u=n[l];this.IsHScreen?(this.Canvas.lineTo(u.Line2.X,u.Line2.Y+a),this.Canvas.lineTo(u.Line2.X,u.Line2.Y-a)):(this.Canvas.lineTo(u.Line2.X+a,u.Line2.Y),this.Canvas.lineTo(u.Line2.X-a,u.Line2.Y))}this.Canvas.closePath(),this.Canvas.fill()}},this.GetMaxMin=function(){return{Min:null,Max:null}}}function ee(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartTextLine",this.Text,this.Line,this.Price,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Text&&this.Line&&Te.IsNumber(this.Price)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=this.ChartBorder.GetBottomEx(),i=this.ChartBorder.GetTopEx(),r=this.ChartFrame.GetYFromData(this.Price),n=0;if(this.Text.Title){var o=t+2*A(),s=r;this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var h=8*A();r-h<i?(this.Canvas.textBaseline="top",s=i):r+h>a&&(this.Canvas.textBaseline="bottom",s=a),this.Canvas.fillStyle=this.Text.Color,this.Canvas.font=this.Text.Font,this.Canvas.fillText(this.Text.Title,o,s),n=this.Canvas.measureText(this.Text.Title).width+4*A()}if(this.Line.Type>0){2==this.Line.Type&&(this.Canvas.save(),this.Canvas.setLineDash([3,5]));o=t+n;this.Canvas.strokeStyle=this.Line.Color,this.Canvas.beginPath(),this.Canvas.moveTo(o,_(r)),this.Canvas.lineTo(e,_(r)),this.Canvas.stroke(),2==this.Line.Type&&this.Canvas.restore()}}},this.GetMaxMin=function(){var t={Min:null,Max:null};return Te.IsNumber(this.Price)&&(t.Min=this.Price,t.Max=this.Price),t}}function ae(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiBar",this.Bars=[],this.IsHScreen=!1,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=this.ChartFrame.DataWidth,i=A(),r=[];for(var n in this.Bars){var o={Point:[],Color:(d=this.Bars[n]).Color,Width:a,Type:0};for(var s in d.Type>0&&(o.Type=d.Type),d.Width>0?(o.Width=d.Width*i,o.Width>a&&(o.Width=a)):o.Width<4&&(o.Width=1*i),d.Point){var h=d.Point[s];if(Te.IsNumber(h.Index)){var l=h.Index-e;if(l>=0&&l<t){var u=this.ChartFrame.GetXFromIndex(l),c=this.ChartFrame.GetYFromData(h.Value),f=this.ChartFrame.GetYFromData(h.Value2);o.Point.push({X:u,Y:c,Y2:f})}}}o.Point.length>0&&r.push(o)}for(var n in r){var d;(d=r[n]).Width>=4?1==d.Type?this.DrawHollowBar(d):this.DrawFillBar(d):this.DrawLineBar(d)}}},this.DrawLineBar=function(t){this.Canvas.strokeStyle=t.Color;var e=this.Canvas.lineWidth;for(var a in this.Canvas.lineWidth=t.Width,t.Point){var i=t.Point[a];this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(_(i.Y),_(i.X)),this.Canvas.lineTo(_(i.Y2),_(i.X))):(this.Canvas.moveTo(_(i.X),_(i.Y)),this.Canvas.lineTo(_(i.X),_(i.Y2))),this.Canvas.stroke()}this.Canvas.lineWidth=e},this.DrawFillBar=function(t){for(var e in this.Canvas.fillStyle=t.Color,t.Point){var a=t.Point[e],i=a.X-t.Width/2,r=Math.min(a.Y,a.Y2),n=t.Width,o=Math.abs(a.Y-a.Y2);this.IsHScreen?this.Canvas.fillRect(k(r),k(i),k(o),k(n)):this.Canvas.fillRect(k(i),k(r),k(n),k(o))}},this.DrawHollowBar=function(t){this.Canvas.strokeStyle=t.Color;for(var e in t.Point){var a=t.Point[e],i=a.X-t.Width/2,r=Math.min(a.Y,a.Y2),n=t.Width,o=Math.abs(a.Y-a.Y2);this.Canvas.beginPath(),this.IsHScreen?this.Canvas.rect(_(r),_(i),k(o),k(n)):this.Canvas.rect(_(i),_(r),k(n),k(o)),this.Canvas.stroke()}this.Canvas.lineWidth=1},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Bars){var n=this.Bars[r];for(var o in n.Point){var s=n.Point[o];if(s.Index>=a&&s.Index<i){var h=Math.min(s.Value,s.Value2),l=Math.max(s.Value,s.Value2);null==t.Max?t.Max=l:t.Max<l&&(t.Max=l),null==t.Min?t.Min=h:t.Min>h&&(t.Min=h)}}}return t}}function ie(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiLine",this.Lines=[],this.LineDash,this.LineWidth=1,this.IsHScreen=!1,this.ArrawAngle=35,this.ArrawLength=10,this.ArrawLineWidth=5,this.Arrow={Start:!1,End:!1},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=[],i=[];for(var r in this.Lines){var n=this.Lines[r],o={Point:[],Color:n.Color},s={Start:[],End:[]};n.BGColor&&(o.BGColor=n.BGColor);for(var h=0;h<n.Point.length;++h){var l=n.Point[h];if(Te.IsNumber(l.Index)){var u=l.Index-e;if(u>=0&&u<t){var c={X:this.ChartFrame.GetXFromIndex(u),Y:this.ChartFrame.GetYFromData(l.Value,!1),End:!1};o.Point.push(c),0!=h&&1!=h||s.Start.push(c),h!=n.Point.length-1&&h!=n.Point.length-2||s.End.push(c)}else o.Point.length>0&&(o.Point[o.Point.length-1].End=!0)}}o.Point.length>=2&&(a.push(o),i.push(s))}var f=A();for(var r in this.Canvas.save(),a){this.LineDash&&this.Canvas.setLineDash(this.LineDash),Te.IsPlusNumber(this.LineWidth)?this.Canvas.lineWidth=this.LineWidth*f:this.Canvas.lineWidth=1*f;var d=a[r];this.DrawLine(d,i[r])}this.Canvas.restore()}},this.DrawLine=function(t,e){if(t.BGColor){for(var a in this.Canvas.fillStyle=t.BGColor,t.Point){var i=t.Point[a];0==a?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(i.Y,i.X):this.Canvas.moveTo(i.X,i.Y)):this.IsHScreen?this.Canvas.lineTo(i.Y,i.X):this.Canvas.lineTo(i.X,i.Y)}this.Canvas.closePath(),this.Canvas.fill()}this.Canvas.strokeStyle=t.Color;var r=0;for(var a in t.Point){i=t.Point[a];0==r?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(i.Y,i.X):this.Canvas.moveTo(i.X,i.Y),++r):(this.IsHScreen?this.Canvas.lineTo(i.Y,i.X):this.Canvas.lineTo(i.X,i.Y),++r),1==i.End&&(r>0&&this.Canvas.stroke(),r=0)}r>0&&this.Canvas.stroke(),2==e.End.length&&1==this.Arrow.End&&this.DrawArrow(e.End[0],e.End[1]),2==e.Start.length&&1==this.Arrow.Start&&this.DrawArrow(e.Start[1],e.Start[0])},this.DrawArrow=function(t,e){var a=this.ArrawAngle,i=this.ArrawLength,r=180*Math.atan2(t.Y-e.Y,t.X-e.X)/Math.PI,n=(r+a)*Math.PI/180,o=(r-a)*Math.PI/180,s=i*Math.cos(n),h=i*Math.sin(n),l=i*Math.cos(o),u=i*Math.sin(o);this.Canvas.beginPath();var c=e.X+s,f=e.Y+h;this.Canvas.moveTo(c,f),this.Canvas.lineTo(e.X,e.Y),c=e.X+l,f=e.Y+u,this.Canvas.lineTo(c,f),this.Canvas.setLineDash([]),this.Canvas.lineWidth=this.ArrawLineWidth*A(),this.Canvas.stroke()},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Lines){var n=this.Lines[r];for(var o in n.Point){var s=n.Point[o];s.Index>=a&&s.Index<i&&(null==t.Max?t.Max=s.Value:t.Max<s.Value&&(t.Max=s.Value),null==t.Min?t.Min=s.Value:t.Min>s.Value&&(t.Min=s.Value))}}return t}}function re(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiPoint",this.PointGroup=[],this.IsHScreen=!1,this.LineWidth=1,this.PointRadius=5,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)&&Te.IsNonEmptyArray(this.PointGroup)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=A();this.Canvas.save(),this.ClipClient(this.IsHScreen);for(var i=0;i<this.PointGroup.length;++i){var r=this.PointGroup[i],n=r.Color,o=r.BGColor,s=this.LineWidth,h=this.PointRadius;Te.IsNumber(r.LineWidth)&&(s=r.LineWidth),Te.IsNumber(r.PointRadius)&&(h=r.PointRadius);for(var l=new Path2D,u=0,c=0;c<r.Point.length;++c){var f=r.Point[c];if(Te.IsNumber(f.Index)){var d=f.Index-e;if(d>=0&&d<t){var C=this.ChartFrame.GetXFromIndex(d),p=this.ChartFrame.GetYFromData(f.Value,!1),m=new Path2D;this.IsHScreen?m.arc(p,C,h*a,0,360,!1):m.arc(C,p,h*a,0,360,!1),l.addPath(m),++u}}}u>0&&(o||n)&&(this.Canvas.lineWidth=s*a,this.Canvas.fillStyle=o,this.Canvas.strokeStyle=n,o&&this.Canvas.fill(l),n&&this.Canvas.stroke(l))}this.Canvas.restore()}},this.GetMaxMin=function(){for(var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e,r=0;r<this.PointGroup.length;++r){var n=this.PointGroup[r];if(Te.IsNonEmptyArray(n.Point))for(var o=0;o<n.Point.length;++o){var s=n.Point[o];s.Index>=a&&s.Index<i&&(null==t.Max?t.Max=s.Value:t.Max<s.Value&&(t.Max=s.Value),null==t.Min?t.Min=s.Value:t.Min>s.Value&&(t.Min=s.Value))}}return t}}function ne(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiText",this.Texts=[],this.Font=ia.DefaultTextFont,this.Color=ia.DefaultTextColor,this.IsHScreen=!1,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)&&this.Texts){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetRight(),r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetBottomEx();this.IsHScreen&&(a=this.ChartBorder.GetTop(),i=this.ChartBorder.GetBottom());for(var o=0,s=0;s<this.Texts.length;++s){var h=this.Texts[s];if(h.Text&&Te.IsNumber(h.Index)){var l=h.Index-e;if(l>=0&&l<t){var u=this.ChartFrame.GetXFromIndex(l);o="TOP"==h.Value?r:"BOTTOM"==h.Value?n:this.ChartFrame.GetYFromData(h.Value),h.Color?this.Canvas.fillStyle=h.Color:this.Canvas.fillStyle=this.Color,h.Font?this.Canvas.font=h.Font:this.Canvas.font=this.Font;var c=this.Canvas.measureText(h.Text).width;if(this.Canvas.textAlign="center",u+c/2>=i?(this.Canvas.textAlign="right",u=i):u-c/2<a&&(this.Canvas.textAlign="left",u=a),1==h.Baseline?this.Canvas.textBaseline="top":2==h.Baseline?this.Canvas.textBaseline="bottom":this.Canvas.textBaseline="middle",this.IsHScreen?(this.Canvas.save(),this.Canvas.translate(o,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(h.Text,0,0),this.Canvas.restore()):(Te.IsNumber(h.YMove)&&(o+=h.YMove),this.Canvas.fillText(h.Text,u,o)),h.Line){var f=this.Data.Data[h.Index],d="H"==h.Line.KData?f.High:f.Low,C=this.ChartFrame.GetYFromData(d),p=o;Array.isArray(h.Line.Offset)&&2==h.Line.Offset.length&&(p>C?(p-=h.Line.Offset[1],C+=h.Line.Offset[0]):p<C&&(p+=h.Line.Offset[1],C-=h.Line.Offset[0])),this.Canvas.save(),h.Line.Dash&&this.Canvas.setLineDash(h.Line.Dash),h.Line.Width>0&&(this.Canvas.lineWidth=h.Line.Width),this.Canvas.strokeStyle=h.Line.Color,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(p,_(u)),this.Canvas.lineTo(C,_(u))):(this.Canvas.moveTo(_(u),p),this.Canvas.lineTo(_(u),C)),this.Canvas.stroke(),this.Canvas.restore()}}}}}},this.GetMaxMin=function(){var t={Min:null,Max:null};if(!this.Texts)return t;var e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Texts){var n=this.Texts[r];n.Index>=a&&n.Index<i&&(null==t.Max?t.Max=n.Value:t.Max<n.Value&&(t.Max=n.Value),null==t.Min?t.Min=n.Value:t.Min>n.Value&&(t.Min=n.Value))}return t}}function oe(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiSVGIcon",this.Icon,this.IconSize={Max:ia.DRAWICON.Icon.MaxSize,Min:ia.DRAWICON.Icon.MinSize,Zoom:{Type:ia.DRAWICON.Icon.Zoom.Type,Value:ia.DRAWICON.Icon.Zoom.Value}},this.Family,this.Color=ia.DefaultTextColor,this.IsHScreen=!1,this.IconRect=[],this.Draw=function(){if(this.IconRect=[],this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)&&this.Family&&this.Icon&&Te.IsNonEmptyArray(this.Icon)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset;this.DataWidth=this.ChartFrame.DataWidth,this.DistanceWidth=this.ChartFrame.DistanceWidth;var a=this.GetBorder();if(this.IsHScreen)var i=a.TopEx,r=a.BottomEx;else i=a.LeftEx,r=a.RightEx;var n=this.GetDynamicIconSize(this.DataWidth,this.DistanceWidth,this.IconSize.Max,this.IconSize.Min,this.IconSize.Zoom);this.Canvas.font=n+"px "+this.Family;for(var o=0;o<this.Icon.length;++o){var s=this.Icon[o];if(Te.IsNumber(s.Index)){var h=s.Index-e;if(h>=0&&h<t){var l=this.ChartFrame.GetXFromIndex(h),u=this.ChartFrame.GetYFromData(s.Value);s.Color?this.Canvas.fillStyle=s.Color:this.Canvas.fillStyle=this.Color;var c=this.Canvas.measureText(s.Text).width;this.Canvas.textAlign="center";var f=new yt(l-n/2,u-n/2,n,n);if(l+c/2>=r?(this.Canvas.textAlign="right",l+=this.DataWidth/2,f.X=l-n):l-c/2<i&&(this.Canvas.textAlign="left",l-=this.DataWidth/2,f.X=l),1==s.Baseline?(this.Canvas.textBaseline="top",f.Y=u):2==s.Baseline?(this.Canvas.textBaseline="bottom",f.Y=u-n):(this.Canvas.textBaseline="middle",f.Y=u-n/2),this.IsHScreen?(this.Canvas.save(),this.Canvas.translate(u,l),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(s.Symbol,0,0),this.Canvas.restore()):(Te.IsNumber(s.YMove)&&(u+=s.YMove),this.Canvas.fillText(s.Symbol,l,u),s.Text&&this.IconRect.push({Index:o,Rect:f,Item:s})),s.Line){var d=this.Data.Data[s.Index],C="H"==s.Line.KData?d.High:d.Low,p=this.ChartFrame.GetYFromData(C),m=u;Array.isArray(s.Line.Offset)&&2==s.Line.Offset.length&&(m>p?(m-=s.Line.Offset[1],p+=s.Line.Offset[0]):m<p&&(m+=s.Line.Offset[1],p-=s.Line.Offset[0])),this.Canvas.save(),s.Line.Dash&&this.Canvas.setLineDash(s.Line.Dash),s.Line.Width>0&&(this.Canvas.lineWidth=s.Line.Width),this.Canvas.strokeStyle=s.Line.Color,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(m,_(l)),this.Canvas.lineTo(p,_(l))):(this.Canvas.moveTo(_(l),m),this.Canvas.lineTo(_(l),p)),this.Canvas.stroke(),this.Canvas.restore()}}}}}},this.GetTooltipData=function(t,e,a){if(!Te.IsNonEmptyArray(this.IconRect))return!1;for(var i=0;i<this.IconRect.length;++i){var r=this.IconRect[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return D.Chart.Log("[ChartMultiSVGIcon::GetTooltipData] icon ",r),a.Data=r,a.ChartPaint=this,a.Type=4,!0}}return!1},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Icon){var n=this.Icon[r];n.Index>=a&&n.Index<i&&(null==t.Max?t.Max=n.Value:t.Max<n.Value&&(t.Max=n.Value),null==t.Min?t.Min=n.Value:t.Min>n.Value&&(t.Min=n.Value))}return t}}function se(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiHtmlDom",this.Texts=[],this.IsHScreen=!1,this.DrawCallback,this.DrawItem=[],this.EnableDraw=!0,this.HQChart,this.IsDestroy=!1,this.Draw=function(){this.EnableDraw&&(this.IsDestroy||(this.DrawItem=[],this.DrawCallback&&this.DrawCallback(1,{Self:this}),this.DrawDom(),this.DrawCallback&&this.DrawCallback(2,{Self:this,DrawItem:this.DrawItem})))},this.OnDestroy=function(){this.IsDestroy=!0,this.DrawCallback&&this.DrawCallback(4,{Self:this})},this.DrawDom=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetBottomEx(),r=A();if(this.HQChart)var n=this.HQChart.UIElement.getBoundingClientRect().left,o=this.HQChart.UIElement.getBoundingClientRect().top;else n=null,o=null;for(var s in this.Texts){var h=this.Texts[s];if(h.Text&&Te.IsNumber(h.Index)){var l=this.IsMinuteFrame(),u=h.Index-e,c={KData:p=this.Data.Data[h.Index],Item:h,IsShow:!1,Self:this};if(u>=0&&u<t){var f=this.ChartFrame.GetXFromIndex(u);if("Top"==h.Value)var d=a;else if("Bottom"==h.Value)d=i;else d=this.ChartFrame.GetYFromData(h.Value);c.X=f/r,c.Y=d/r,c.UIElement={Left:n,Top:o},c.IsShow=!0}if(this.DrawItem.push(c),this.DrawCallback&&this.DrawCallback(3,c),h.Line){if(l)var C=this.Data.Data[h.Index];else{var p=this.Data.Data[h.Index];C="H"==h.Line.KData?p.High:p.Low}var m=this.ChartFrame.GetYFromData(C),D=d;Array.isArray(h.Line.Offset)&&2==h.Line.Offset.length&&(D>m?(D-=h.Line.Offset[1],m+=h.Line.Offset[0]):D<m&&(D+=h.Line.Offset[1],m-=h.Line.Offset[0])),this.Canvas.save(),h.Line.Dash&&this.Canvas.setLineDash(h.Line.Dash);var v=A(),g=1*v;h.Line.Width>0&&(g=h.Line.Width*v),this.Canvas.lineWidth=g,this.Canvas.strokeStyle=h.Line.Color,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(D,_(f)),this.Canvas.lineTo(m,_(f))):(this.Canvas.moveTo(B(g,f),D),this.Canvas.lineTo(B(g,f),m)),this.Canvas.stroke(),this.Canvas.restore()}}}}},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Texts){var n=this.Texts[r];Te.IsNumber(n.Index)&&(n.Index>=a&&n.Index<i&&(null==t.Max?t.Max=n.Value:t.Max<n.Value&&(t.Max=n.Value),null==t.Min?t.Min=n.Value:t.Min>n.Value&&(t.Min=n.Value)))}return t}}function he(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawSVG",this.Family,this.TextFont,this.Texts=[],this.IsHScreen=!1,this.IsDestroy=!1,this.EnableTooltip=!0,this.TooltipRect=[],this.Draw=function(){this.TooltipRect=[],this.IsShow&&!this.ChartFrame.IsMinSize&&(this.IsShowIndexTitleOnly()||this.DrawSVG())},this.DrawSVG=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&Te.IsNonEmptyArray(this.Data.Data)&&Te.IsNonEmptyArray(this.Texts)&&this.Family){this.IsHScreen=!0===this.ChartFrame.IsHScreen;for(var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetBottomEx(),r=A(),n=0,o=0,s=0;s<this.Texts.length;++s){var h=this.Texts[s];if(h.SVG&&h.SVG.Symbol&&Te.IsNumber(h.Index)){this.IsMinuteFrame();var l=h.Index-e,u=this.Data.Data[h.Index];if(!(l<0||l>=t)){n=this.ChartFrame.GetXFromIndex(l),o="Top"==h.Value?a:"Bottom"==h.Value?i:this.ChartFrame.GetYFromData(h.Value),Te.IsNumber(h.YOffset)&&(o+=h.YOffset);var c=h.SVG;Te.IsNumber(c.YOffset)&&(o+=c.YOffset);var f=c.Size+"px "+this.Family;this.Canvas.font=f;var d=c.Size/2,C="bottom",p={Left:n-d,Right:n+d,Top:o-c.Size,Bottom:o,Height:c.Size,Width:c.Size};if(0===c.VAlign?(C="top",p.Top=o,p.Bottom=p.Top+c.Size):1===c.VAlign&&(C="middle",p.Top=o-c.Size/2,p.Bottom=p.Top+c.Size),p.Top<0&&(p.Top=0,p.Bottom=c.Size,o=p.Bottom),this.Canvas.textBaseline=C,this.Canvas.textAlign="center",this.Canvas.fillStyle=c.Color,this.Canvas.fillText(c.Symbol,n,o),this.EnableTooltip&&this.TooltipRect.push({Rect:p,Index:s}),h.Text&&h.Text.Content&&this.TextFont){var m=h.Text;this.Canvas.font=this.TextFont,this.Canvas.fillStyle=m.Color;var D=o;Te.IsNumber(m.YOffset)&&(D+=m.YOffset),this.Canvas.fillText(m.Content,n,D)}if(h.Line){var v,g=h.Line;u=this.Data.Data[h.Index];switch(g.Value){case"C":v=u.Close;break;case"H":v=u.High;break;case"L":v=u.Low}if(!Te.IsNumber(v))continue;var S=this.ChartFrame.GetYFromData(v);if(S>=p.Top&&S<=p.Bottom)continue;S<p.Top?(D=p.Top,Te.IsNumber(g.SVGBlank)&&(D-=g.SVGBlank)):(D=p.Bottom,Te.IsNumber(g.SVGBlank)&&(D+=g.SVGBlank)),g.Dash&&this.Canvas.setLineDash(g.Dash);var T=1*r;g.Width>0&&(T=g.Width*r),this.Canvas.lineWidth=T,this.Canvas.strokeStyle=g.Color,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(D,_(n)),this.Canvas.lineTo(S,_(n))):(this.Canvas.moveTo(B(T,n),D),this.Canvas.lineTo(B(T,n),S)),this.Canvas.stroke(),this.Canvas.setLineDash([])}}}}}},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;if(!Te.IsNonEmptyArray(this.Texts))return t;for(var r=0;r<this.Texts.length;++r){var n=this.Texts[r];if(Te.IsNumber(n.Index)&&(n.Index>=a&&n.Index<i)){if(!Te.IsNumber(n.Value))continue;null==t.Max?t.Max=n.Value:t.Max<n.Value&&(t.Max=n.Value),null==t.Min?t.Min=n.Value:t.Min>n.Value&&(t.Min=n.Value)}}return t},this.GetTooltipData=function(t,e,a){if(!this.IsShow)return!1;for(var i=0;i<this.TooltipRect.length;++i){var r=this.TooltipRect[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.Left,n.Top,n.Width,n.Height),this.Canvas.isPointInPath(t,e)){var o=this.Texts[r.Index];return D.Chart.Log("[ChartDrawSVG::GetTooltipData] svg icon.",r),a.Data={Rect:r.Rect,Item:o,Index:r.Index},a.ChartPaint=this,a.Type=7,!0}}}return!1}}function le(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartStackedBar",this.Data,this.BarName=[],this.BarColor=["rgb(255,165,0)","rgb(95,158,160)"],this.LineWidth=1,this.BarType=0,this.IsHScreen,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&Te.IsNonEmptyArray(this.Data.Data)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount;if(this.IsHScreen)var i=(s=this.ChartBorder.GetHScreenBorder()).TopEx+e/2+ia.FrameLeftMargin,r=s.BottomEx,n=s.RightEx,o=s.LeftEx;else{i=(s=this.ChartFrame.GetBorder()).LeftEx+e/2+ia.FrameLeftMargin,r=s.RightEx,n=s.TopEx,o=s.BottomEx;var s,h=this.GetLockRect();h&&(r=h.Left)}var l=this.IsMinuteFrame();if(this.Canvas.save(),1==this.BarType);else{this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*A());var u=this.Canvas.lineWidth}for(var c=this.ChartFrame.GetYFromData(0),f=this.Data.DataOffset,d=0;f<this.Data.Data.length&&d<a;++f,++d,i+=t+e){var C=this.Data.Data[f];if(Te.IsNonEmptyArray(C)){if(l)var p=this.ChartFrame.GetXFromIndex(d);else{var m=i,D=i+t;if(D>r)break;p=i+(D-i)/2}if(p>r)break;1==this.BarType&&t>=4?this.DrawKBarItem(C,p,m,D,n,o,c,t):this.DrawBarItem(C,p,n,o,c,u)}}this.Canvas.restore()}},this.DrawKBarItem=function(t,e,a,i,r,n,o,s){for(var h=0,l=o,u=0,c=o,f=0;f<t.length;++f){var d=t[f];if(Te.IsNumber(d)&&0!=d){if(this.Canvas.fillStyle=this.BarColor[f],d>0){h+=d;var C={Left:a,Top:p=this.ChartFrame.GetYFromData(h),Width:s,Height:l-p};l=p}else{u+=d;var p;C={Left:a,Top:p=this.ChartFrame.GetYFromData(u),Width:s,Height:c-p};c=p}this.IsHScreen?this.Canvas.fillRect(C.Top,C.Left,C.Height,C.Width):this.Canvas.fillRect(C.Left,C.Top,C.Width,C.Height)}}},this.DrawBarItem=function(t,e,a,i,r,n){e=B(n,e);for(var o=0,s=r,h=0,l=r,u=0;u<t.length;++u){var c=t[u];if(Te.IsNumber(c)&&0!=c){var f={};if(c>0){o+=c;f={X:e,Y:s,X2:e,Y2:d=this.ChartFrame.GetYFromData(o)};s=d}else{h+=c;var d;f={X:e,Y:l,X2:e,Y2:d=this.ChartFrame.GetYFromData(h)};l=d}this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(f.Y,f.X),this.Canvas.lineTo(f.Y2,f.X2)):(this.Canvas.moveTo(f.X,f.Y),this.Canvas.lineTo(f.X2,f.Y2)),this.Canvas.strokeStyle=this.BarColor[u],this.Canvas.stroke()}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={Min:null,Max:null};if(!this.Data||!this.Data.Data)return e;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r&&Te.IsNonEmptyArray(r)){for(var n=0,o=0,s=0;s<r.length;++s){var h=r[s];Te.IsNumber(h)&&(0!=h&&(h>0?n+=h:h<0&&(o+=h)))}null==e.Max&&(e.Max=n,e.Min=o),e.Max<n&&(e.Max=n),e.Min>o&&(e.Min=o)}}return e},this.PtInChart=function(t,e){var a={StackedBar:!0};return 0==this.BarType&&(a.BarWidth=4),this.PtInBar(t,e,a)},this.DrawSelectedStatus=function(){this.DrawLinePoint({StackedBar:!0})}}function ue(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartLock",this.WidthDiv=.2,this.LockCount=20,this.BGColor=ia.LockBGColor,this.TextColor=ia.LockTextColor,this.Font=ia.DefaultTextFont,this.Title="🔒开通权限",this.LockRect=null,this.LockID,this.Callback,this.IndexName,this.MinWidth=null,this.Draw=function(t){if(this.LockRect=null,this.NotSupportMessage)this.DrawNotSupportmessage();else if(!0!==this.ChartFrame.IsHScreen){var e=this.ChartBorder.GetRight(),a=0;if(null!=this.ChartFrame.Data){var i=this.ChartFrame.DataWidth,r=this.ChartFrame.DistanceWidth;e=this.ChartBorder.GetLeft()+r/2+2;for(var n=this.ChartBorder.GetRight(),o=this.ChartFrame.XPointCount,s=this.ChartFrame.Data.DataOffset,h=0;s<this.ChartFrame.Data.Data.length&&h<o;++s,++h,e+=i+r){var l=this.ChartFrame.Data.Data[s];if(null!=l.Open&&null!=l.High&&null!=l.Low&&null!=l.Close){if(e+i>n)break}}a=(i+r)*this.LockCount}0==a&&(a=(e-this.ChartBorder.GetLeft())*this.WidthDiv);var u=e-a;u<this.ChartBorder.GetLeft()&&(u=this.ChartBorder.GetLeft());var c=this.ChartBorder.GetBottom()-this.ChartBorder.GetTop(),f=this.ChartBorder.GetRight()-u;if(this.MinWidth>10&&f<this.MinWidth&&(f=this.MinWidth,(u=this.ChartBorder.GetRight()-f)<this.ChartBorder.GetLeft()&&(u=this.ChartBorder.GetLeft())),t){this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(u,this.ChartBorder.GetTop(),f,c);var d=u+f/2,C=this.ChartBorder.GetTop()+c/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.Title,d,C)}this.LockRect={Left:u,Top:this.ChartBorder.GetTop(),Width:f,Heigh:c}}else this.HScreenDraw(t)},this.HScreenDraw=function(t){var e=this.ChartBorder.GetBottom(),a=0;if(null!=this.ChartFrame.Data){var i=this.ChartFrame.DataWidth,r=this.ChartFrame.DistanceWidth;e=this.ChartBorder.GetTop()+r/2+2;for(var n=this.ChartBorder.GetBottom(),o=this.ChartFrame.XPointCount,s=this.ChartFrame.Data.DataOffset,h=0;s<this.ChartFrame.Data.Data.length&&h<o;++s,++h,e+=i+r){var l=this.ChartFrame.Data.Data[s];if(null!=l.Open&&null!=l.High&&null!=l.Low&&null!=l.Close){if(e+i>n)break}}a=(i+r)*this.LockCount}0==a&&(a=(e-this.ChartBorder.GetTop())*this.WidthDiv);var u=e-a;u<this.ChartBorder.GetTop()&&(u=this.ChartBorder.GetTop());var c=this.ChartBorder.GetRight()-this.ChartBorder.GetLeft(),f=this.ChartBorder.GetBottom()-u;this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(this.ChartBorder.GetLeft(),u,c,f);var d=this.ChartBorder.GetLeft()+c/2,C=u+f/2;this.Canvas.save(),this.Canvas.translate(d,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.Title,0,0),this.Canvas.restore(),this.LockRect={Left:this.ChartBorder.GetLeft(),Top:u,Width:c,Heigh:f}},this.GetTooltipData=function(t,e,a){return null!=this.LockRect&&(this.Canvas.beginPath(),this.Canvas.rect(this.LockRect.Left,this.LockRect.Top,this.LockRect.Width,this.LockRect.Heigh),!!this.Canvas.isPointInPath(t,e)&&(a.Data={ID:this.LockID,Callback:this.Callback,IndexName:this.IndexName},a.ChartPaint=this,!0))}}function ce(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.Radius=100,this.Distance=30,this.txtLine=20,this.paddingX=20/3,this.Draw=function(){if(!(this.Data&&this.Data.Data&&this.Data.Data.length>0))return this.DrawEmptyData();this.ChartBorder.GetLeft(),this.ChartBorder.GetRight(),this.ChartBorder.GetTop(),this.ChartBorder.GetBottom();var t=this.ChartBorder.GetWidth(),e=this.ChartBorder.GetHeight();if(isNaN(this.Radius)){var a=this.Radius.replace("%","");a/=100,t>=e&&(this.Radius=a*e),t<e&&(this.Radius=a*t)}this.Canvas.save(),this.Canvas.translate(t/2,e/2);var i=0;for(var r in this.Data.Data)i+=this.Data.Data[r].Value;var n=0,o=0;for(var s in this.Data.Data){var h=this.Data.Data[s],l=(h.Value/i).toFixed(2);this.Canvas.beginPath(),this.Canvas.moveTo(0,0),o+=2*l*Math.PI,this.Canvas.strokeStyle="white",this.Canvas.fillStyle=h.Color,this.Canvas.arc(0,0,this.Radius,n,o),this.Canvas.fill(),this.Canvas.closePath(),this.Canvas.stroke(),this.Canvas.beginPath(),this.Canvas.strokeStyle=h.Color,this.Canvas.moveTo(0,0);var u=(this.Radius+this.Distance)*Math.cos(o-(o-n)/2),c=(this.Radius+this.Distance)*Math.sin(o-(o-n)/2);this.Canvas.lineTo(u,c);var f=this.txtLine,d=this.paddingX;if(this.Canvas.textAlign="left",o-(o-n)/2<1.5*Math.PI&&o-(o-n)/2>.5*Math.PI&&(f=-this.txtLine,d=-this.paddingX,this.Canvas.textAlign="right"),this.Canvas.lineTo(u+f,c),this.Canvas.stroke(),h.Text)this.Canvas.fillText(h.Text,u+f+d,c);else{var C=h.Name+":"+h.Value;this.Canvas.fillText(C,u+f+d,c)}n+=2*l*Math.PI}this.Canvas.restore()},this.DrawEmptyData=function(){D.Chart.Log("[ChartPie::DrawEmptyData]")}}function fe(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.BorderPoint=[],this.DataPoint=[],this.CenterPoint={},this.StartAngle=0,this.Color="rgb(198,198,198)",this.AreaColor="rgba(242,154,118,0.4)",this.AreaLineColor="rgb(242,154,118)",this.TitleFont=24*A()+"px 微软雅黑",this.TitleColor="rgb(102,102,102)",this.BGColor=["rgb(255,255,255)","rgb(224,224,224)"],this.DrawBorder=function(){if(!(this.BorderPoint.length<=0)){this.Canvas.font=this.TitleFont,this.Canvas.strokeStyle=this.Color;var t=[1,.8,.6,.4,.2];for(var e in t){var a=t[e],i=!0;for(var r in this.BorderPoint){(o=this.BorderPoint[r]).X=this.CenterPoint.X+o.Radius*Math.cos(o.Angle*Math.PI/180)*a,o.Y=this.CenterPoint.Y+o.Radius*Math.sin(o.Angle*Math.PI/180)*a,i?(this.Canvas.beginPath(),this.Canvas.moveTo(o.X,o.Y),i=!1):this.Canvas.lineTo(o.X,o.Y)}this.Canvas.closePath(),this.Canvas.stroke(),this.Canvas.fillStyle=this.BGColor[e%2==0?0:1],this.Canvas.fill()}for(var n in this.Canvas.beginPath(),this.BorderPoint){var o;(o=this.BorderPoint[n]).X=this.CenterPoint.X+o.Radius*Math.cos(o.Angle*Math.PI/180),o.Y=this.CenterPoint.Y+o.Radius*Math.sin(o.Angle*Math.PI/180),this.Canvas.moveTo(this.CenterPoint.X,this.CenterPoint.Y),this.Canvas.lineTo(o.X,o.Y),this.DrawText(o)}this.Canvas.stroke()}},this.DrawArea=function(){if(this.DataPoint&&!(this.DataPoint.length<=0)){this.Canvas.fillStyle=this.AreaColor,this.Canvas.strokeStyle=this.AreaLineColor,this.Canvas.beginPath();var t=!0;for(var e in this.DataPoint){var a=this.DataPoint[e];t?(this.Canvas.beginPath(),this.Canvas.moveTo(a.X,a.Y),t=!1):this.Canvas.lineTo(a.X,a.Y)}this.Canvas.closePath(),this.Canvas.fill(),this.Canvas.stroke()}},this.DrawText=function(t){if(t.Text){this.Canvas.fillStyle=this.TitleColor;var e=t.X,a=t.Y;t.Angle>0&&t.Angle<45?(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",e+=2):t.Angle>=0&&t.Angle<90?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",e+=2):t.Angle>=90&&t.Angle<135?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top",e-=2):t.Angle>=135&&t.Angle<180?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top",e-=2):t.Angle>=180&&t.Angle<225?(this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",e-=2):t.Angle>=225&&t.Angle<=270?(this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom"):t.Angle>270&&t.Angle<315?(this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",e+=2):(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",e+=2),this.Canvas.fillText(t.Text,e,a)}},this.Draw=function(){this.BorderPoint=[],this.DataPoint=[],this.CenterPoint={},this.Data&&this.Data.Data&&this.Data.Data.length>0?this.CalculatePoints(this.Data.Data):this.CalculatePoints(null),this.DrawBorder(),this.DrawArea()},this.CalculatePoints=function(t){for(var e=this.ChartBorder.GetLeft(),a=(this.ChartBorder.GetRight(),this.ChartBorder.GetTop()),i=(this.ChartBorder.GetBottom(),this.ChartBorder.GetWidth()),r=this.ChartBorder.GetHeight(),n={X:e+i/2,Y:a+r/2},o=Math.min(i/2,r/2)-2,s=Math.max(5,t?t.length:0),h=360/s,l=0;l<s;++l){var u={Index:l,Radius:o,Angle:l*h+this.StartAngle},c=u.Angle;if(t&&l<t.length){var f=t[l],d={Index:l,Text:f.Text};if(u.Text=f.Name,f.Value){var C=f.Value;C>=1&&(C=1);var p=o*C;d.X=n.X+p*Math.cos(c*Math.PI/180),d.Y=n.Y+p*Math.sin(c*Math.PI/180)}else d.X=n.X,d.Y=n.Y;this.DataPoint.push(d)}this.BorderPoint.push(u)}this.CenterPoint=n},this.DrawEmptyData=function(){D.Chart.Log("[ChartPie::DrawEmptyData]")}}var de=new function(){this.DataMap=new C.default([["FrameSplitPaint",{Create:function(){return new ve}}],["RectSelectPaint",{Create:function(){return new function(){this.newMethod=Ce,this.newMethod(),delete this.newMethod,this.ClassName="RectSelectPaint",this.LineColor=ia.RectSelect.LineColor,this.LineWidth=ia.RectSelect.LineWidth,this.LineDotted=ia.RectSelect.LineDotted,this.AreaColor=ia.RectSelect.AreaColor,this.SubAreaColor=ia.RectSelect.SubAreaColor,this.FirstPoint,this.SecondPoint,this.CenterPoint,this.PreventClose=!1,this.SpaceReselected=!1,this.SubClient={FirstPoint:null,SecondPoint:null,Start:null,End:null},this.StartDate,this.EndDate,this.CenterDate,this.HQChart,this.DragRect,this.ShowRangeText={Enable:!1,Position:0,Font:ia.RectSelect.RangeTextFont,Color:ia.RectSelect.RangeTextColor,BGColor:ia.RectSelect.RangeTextBGColor,SubPosition:0,SubFont:ia.RectSelect.RangeTextSubFont,SubColor:ia.RectSelect.RangeTextSubColor,SubBGColor:ia.RectSelect.RangeTextSubBGColor},this.BorderCache,this.SetOption=function(t){if(t&&(t.LineColor&&(this.LineColor=t.LineColor),t.AreaColor&&(this.AreaColor=t.AreaColor),Te.IsBool(t.SpaceReselected)&&(this.SpaceReselected=t.SpaceReselected),t.ShowRangeText)){var e=t.ShowRangeText;Te.IsBool(e.Enable)&&(this.ShowRangeText.Enable=e.Enable),Te.IsNumber(e.Position)&&(this.ShowRangeText.Position=e.Position),Te.IsNumber(e.SubPosition)&&(this.ShowRangeText.SubPosition=e.SubPosition)}},this.ReloadResource=function(t){this.LineColor=ia.RectSelect.LineColor,this.LineWidth=ia.RectSelect.LineWidth,this.LineDotted=ia.RectSelect.LineDotted,this.AreaColor=ia.RectSelect.AreaColor,this.ShowRangeText.Font=ia.RectSelect.RangeTextFont,this.ShowRangeText.Color=ia.RectSelect.RangeTextColor,this.ShowRangeText.BGColor=ia.RectSelect.RangeTextBGColor},this.IsMinuteChart=function(){var t=this.HQChart.ClassName,e="MinuteChartContainer"==t||"MinuteChartHScreenContainer"==t;return e},this.GetKData=function(){if(!this.HQChart)return null;var t=this.IsMinuteChart(),e=null;if(t){if(!this.HQChart.SourceData)return null;e=this.HQChart.SourceData}else{if(!this.HQChart.ChartPaint[0])return null;if(!(e=this.HQChart.ChartPaint[0].Data))return null}return e},this.GetPointCount=function(){var t=0;return this.FirstPoint&&++t,this.SecondPoint&&++t,t},this.DateToNumber=function(t,e){if(e)return Te.IsNumber(t.Date)?1e4*t.Date+t.Time:t.Time;var a=this.HQChart.Period;return pt.IsDayPeriod(a,!0)?t.Date:pt.IsMinutePeriod(a,!0)?1e4*t.Date+t.Time:pt.IsSecondPeriod(a)||pt.IsTickPeriod(a)?1e6*t.Date+t.Time:null},this.GetSelectRectData=function(){if(!this.FirstPoint||!this.SecondPoint)return null;var t=this.GetKData();if(!t)return null;for(var e=this.IsMinuteChart(),a=this.DateToNumber(this.FirstPoint,e),i=this.DateToNumber(this.SecondPoint,e),r={Start:null,End:null,Data:t},n=0;n<t.Data.length;++n){var o=t.Data[n];if(o){var s=this.DateToNumber(o,e);if(a==s&&(r.Start=n),i==s&&(r.End=n),Te.IsNumber(r.Start)&&Te.IsNumber(r.End)){if(r.Start>r.End){var h=r.Start;r.Start=r.End,r.End=h}return r}}}return null},this.SortPoint=function(){var t=this.IsMinuteChart();if(this.CenterData=null,this.FirstPoint&&!this.SecondPoint)this.StartDate={Date:this.DateToNumber(this.FirstPoint,t),Index:0};else if(this.FirstPoint&&this.SecondPoint){var e=this.DateToNumber(this.FirstPoint,t),a=this.DateToNumber(this.SecondPoint,t);if(e<a?(this.StartDate={Date:e,Index:0},this.EndDate={Date:a,Index:1}):(this.StartDate={Date:a,Index:1},this.EndDate={Date:e,Index:0}),this.CenterPoint){var i=this.DateToNumber(this.CenterPoint,t);this.CenterDate={Date:i,Index:2}}if(this.SubClient.FirstPoint&&this.SubClient.SecondPoint){var e=this.DateToNumber(this.SubClient.FirstPoint,t),a=this.DateToNumber(this.SubClient.SecondPoint,t);e<a?(this.SubClient.Start={Date:e,Index:3},this.SubClient.End={Date:a,Index:4}):(this.SubClient.Start={Date:a,Index:4},this.SubClient.End={Date:e,Index:3}),this.SubClient.End.Date<=this.StartDate.Date||this.SubClient.Start.Date>=this.EndDate.Date?(this.SubClient.Start=null,this.SubClient.End=null):(this.SubClient.Start.Date<this.StartDate.Date&&(this.SubClient.Start.Date=this.StartDate.Date),this.SubClient.End.Date>this.EndDate.Date&&(this.SubClient.End.Date=this.EndDate.Date))}}},this.GetCenterPoint=function(){if(!this.FirstPoint||!this.SecondPoint)return null;if(!Te.IsNumber(this.FirstPoint.DataIndex))return null;if(!Te.IsNumber(this.SecondPoint.DataIndex))return null;var t=this.FirstPoint.DataIndex-this.SecondPoint.DataIndex;if(Math.abs(t)<3)return null;var e=parseInt(this.FirstPoint.DataIndex+(this.SecondPoint.DataIndex-this.FirstPoint.DataIndex)/2);if(e<0)return null;var a=this.GetKData();if(!a||!a.Data)return null;var i=a.Data[e];return i?{Date:i.Date,Time:i.Time,DataIndex:e}:null},this.MovePoint=function(t){if(!this.FirstPoint||!this.SecondPoint)return!1;var e=this.GetKData();if(!e||!e.Data)return!1;var a=this.FirstPoint.DataIndex+t,i=e.Data[a];if(!i)return!1;var r={Date:i.Date,Time:i.Time,DataIndex:a},a=this.SecondPoint.DataIndex+t,i=e.Data[a];if(!i)return!1;var n={Date:i.Date,Time:i.Time,DataIndex:a},a=this.CenterPoint.DataIndex+t,i=e.Data[a];if(!i)return!1;var o={Date:i.Date,Time:i.Time,DataIndex:a};return this.FirstPoint=r,this.SecondPoint=n,this.CenterPoint=o,!0},this.MoveSubRect=function(t,e){if(!this.FirstPoint||!this.SecondPoint)return!1;if(!this.SubClient||!this.SubClient.FirstPoint||!this.SubClient.SecondPoint)return!1;var a=this.GetKData();if(!a||!a.Data)return!1;var i=Math.min(this.FirstPoint.DataIndex,this.SecondPoint.DataIndex),r=Math.max(this.FirstPoint.DataIndex,this.SecondPoint.DataIndex),n=this.SubClient.FirstPoint,o=this.SubClient.SecondPoint;if(this.SubClient.FirstPoint.DataIndex>this.SubClient.SecondPoint.DataIndex)var n=this.SubClient.SecondPoint,o=this.SubClient.FirstPoint;var s=n.DataIndex,h=o.DataIndex;if(e){if(s<=i)return!1;s-=t,h-=t}else{if(o.DataIndex>=r)return!1;s+=t,h+=t}var l=!1;if(s!=n.DataIndex){n.DataIndex=s;var u=a.Data[s];n.Date=u.Date,n.Time=u.Time,l=!0}if(h!=n.DataIndex){o.DataIndex=h;var u=a.Data[h];o.Date=u.Date,o.Time=u.Time,l=!0}return l},this.SetPoint=function(t,e){var a=null;if(e&&Te.IsNumber(e.DataIndex)&&(a=e.DataIndex),!e||!Te.IsNumber(e.Index))return this.FirstPoint?!this.SecondPoint&&(this.SecondPoint={Date:t.Date,Time:t.Time,DataIndex:a},this.CenterPoint=this.GetCenterPoint(),!0):(this.FirstPoint={Date:t.Date,Time:t.Time,DataIndex:a},!0);switch(e.Index){case 0:return this.FirstPoint={Date:t.Date,Time:t.Time,DataIndex:a},this.CenterPoint=this.GetCenterPoint(),!0;case 1:return this.SecondPoint={Date:t.Date,Time:t.Time,DataIndex:a},this.CenterPoint=this.GetCenterPoint(),!0;case 2:var i=a-this.CenterPoint.DataIndex;return Math.abs(i)>0&&this.MovePoint(i);case 3:return this.SubClient.FirstPoint={Date:t.Date,Time:t.Time,DataIndex:a},!0;case 4:return this.SubClient.SecondPoint={Date:t.Date,Time:t.Time,DataIndex:a},!0;default:return!1}},this.ClearPoint=function(){if(this.PreventClose)return!1;var t=!1;return this.FirstPoint&&(this.FirstPoint=null,t=!0),this.SecondPoint&&(this.SecondPoint=null,t=!0),this.SubClient.FirstPoint=null,this.SubClient.SecondPoint=null,t},this.Draw=function(){if(this.BorderCache=null,this.StartDate=null,this.EndDate=null,this.CenterDate=null,this.DragRect=[],this.SubClient.Start=null,this.SubClient.End=null,this.FirstPoint||this.SecondPoint){this.SortPoint();var t=this.GetKData();if(t&&(this.Data=t,this.ChartFrame&&this.ChartFrame.SubFrame)){var e=this.ChartFrame.SubFrame[0].Frame;if(e){var a=!0===e.IsHScreen,i=e.DataWidth,r=e.DistanceWidth,n=e.XPointCount;if(a){var o=e.GetBorder(),s=o.TopEx+r/2+ia.FrameLeftMargin;o.BottomEx,this.BorderCache=o}else{var o=e.GetBorder(),s=o.LeftEx+r/2+ia.FrameLeftMargin,h=(o.RightEx,o.ChartHeight,o.TopTitle,A(),o.TopEx),l=o.BottomEx;this.BorderCache=o}this.Canvas.save(),pt.IsDayPeriod(this.HQChart.Period,!0);for(var u=this.IsMinuteChart(),c=null,f=null,d=null,C=null,p=[],m=this.Data.DataOffset,D=0;m<this.Data.Data.length&&D<n;++m,++D,s+=i+r){var v=this.Data.Data[m];if(v){var g=s,S=s+i;if(u)var T=e.GetXFromIndex(D);else var T=g+(S-g)/2;var I=this.DateToNumber(v,u);if(this.StartDate&&I==this.StartDate.Date&&(c={XIndex:m,X:T,Top:h,Bottom:l,PointIndex:this.StartDate.Index,Type:0,Item:v},p.push(c)),this.EndDate&&I==this.EndDate.Date&&(f={XIndex:m,X:T,Top:h,Bottom:l,PointIndex:this.EndDate.Index,Type:1,Item:v},p.push(f)),this.CenterDate&&I==this.CenterDate.Date){var y={XIndex:m,X:T,Top:h,Bottom:l,PointIndex:this.CenterDate.Index,Type:2,Item:v};p.push(y)}if(this.SubClient&&this.SubClient.Start&&this.SubClient.End&&(I==this.SubClient.Start.Date&&(this.SubClient.Start.Point={Date:I,X:T,Top:h,Bottom:l,KItem:v}),I==this.SubClient.End.Date&&(this.SubClient.End.Point={Date:I,X:T,Top:h,Bottom:l,kItem:v})),d?(C.Date=I,C.X=T):(d={Date:I,X:T,Top:h,Bottom:l},C={Date:I,X:T,Top:h,Bottom:l}),c&&f)break}}if(this.DrawLines(p),this.DrawArea(c,f,d,C,this.AreaColor),this.SubClient&&this.SubClient.Start&&this.SubClient.End&&(this.DrawArea(this.SubClient.Start.Point,this.SubClient.End.Point,d,C,this.SubAreaColor,4),this.SubClient.Start.Point)){var v=this.SubClient.Start.Point,x={X:v.X,Top:v.Top,Bottom:v.Bottom,PointIndex:v.DataIndex,Type:3,Item:v.KItem};p.push(x)}this.DrawRangeText(p),this.Canvas.restore()}}}},this.DrawRangeText=function(t){if(this.ShowRangeText&&0!=this.ShowRangeText.Enable)for(var e,a,i,r=this.BorderCache,n=this.IsMinuteChart(),o=this.HQChart.Period,s=0;s<t.length;++s){var h=t[s];if(0===h.Type||1==h.Type||3==h.Type){if(n){var l=Te.FormatDateString(h.Item.Date,"YYYY-MM-DD"),u=Te.FormatTimeString(h.Item.Time,"HH:MM");i=l+" "+u}else{var l=Te.FormatDateString(h.Item.Date,"YYYY-MM-DD"),u=null;pt.IsMinutePeriod(o,!0)?u=Te.FormatTimeString(h.Item.Time,"HH:MM"):(pt.IsSecondPeriod(o)||pt.IsTickPeriod(o))&&(u=Te.FormatTimeString(h.Item.Time,"HH:MM:SS")),i=u?l+" "+u:l}if(3==h.Type){var c=this.ShowRangeText.SubPosition,f=this.ShowRangeText.SubBGColor,d=this.ShowRangeText.SubColor;this.Canvas.font=this.ShowRangeText.SubFont;var C=this.GetFontHeight()}else{var c=this.ShowRangeText.Position,f=this.ShowRangeText.BGColor,d=this.ShowRangeText.Color;this.Canvas.font=this.ShowRangeText.Font;var C=this.GetFontHeight()}var p=this.Canvas.measureText(i).width+4,m={Height:C,Width:p};0==h.Type||3==h.Type?p>h.X?(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",e=h.X+2,m.X=h.X):(this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",e=h.X-2,m.X=h.X-p):1==h.Type&&(p>r.Right-h.X?(this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",e=h.X-2,m.X=h.X-p):(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",e=h.X+2,m.X=h.X)),1==c?(a=h.Top+(h.Bottom-h.Top)/2,3==h.Type&&(a+=C),m.Y=a-C/2):2==c?(a=h.Bottom,m.Y=a-C/2):(a=h.Top,m.Y=a-C/2),f&&(this.Canvas.fillStyle=f,this.Canvas.fillRect(_(m.X),_(m.Y),k(m.Width),k(m.Height))),d&&(this.Canvas.fillStyle=d,this.Canvas.fillText(i,e,a,p))}}},this.DrawLines=function(t){if(Te.IsNonEmptyArray(t)){var e=this.LineWidth*A();this.Canvas.strokeStyle=this.LineColor,this.Canvas.lineWidth=e;for(var a=0;a<t.length;++a){var i=t[a],r=B(e,i.X);0==i.Type||1==i.Type?(this.LineDotted&&this.Canvas.setLineDash(this.LineDotted),this.Canvas.beginPath(),this.Canvas.moveTo(r,i.Top),this.Canvas.lineTo(r,i.Bottom),this.Canvas.stroke(),this.LineDotted&&this.Canvas.setLineDash([])):(this.Canvas.beginPath(),this.Canvas.moveTo(r,i.Top),this.Canvas.lineTo(r,i.Bottom),this.Canvas.stroke());var n=new yt(r-3,i.Top,10,i.Bottom-i.Top);this.DragRect[a]={Rect:n,PointIndex:i.PointIndex,Type:i.Type}}}},this.PtInPaint=function(t,e){if(!Te.IsNonEmptyArray(this.DragRect))return null;for(var a=0;a<this.DragRect.length;++a){var i=this.DragRect[a],r=i.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.X,r.Y,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return(0,u.default)({Index:a,PointIndex:i.PointIndex,Type:i.Type,Self:this},"Type",i.Type)}return null},this.DrawArea=function(t,e,a,i,r,n){var o;if(a&&i&&this.StartDate&&this.EndDate&&(t&&e?o=[t,e]:!t&&e?o=[a,e]:t&&!e?o=[t,i]:a.Date>this.StartDate.Date&&i.Date<this.EndDate.Date&&(o=[a,i]),o&&2==o.length)){var s=o[0],h=o[1],l=_(s.X),u=_(h.X),c=u-l,f=s.Bottom-s.Top;this.Canvas.fillStyle=r,this.Canvas.fillRect(l,s.Top,c,f);var d={X:l,Y:s.Top,Right:u,Bottom:s.Top+f,Width:c,Height:f};Te.IsNumber(n)&&this.DragRect.push({Rect:d,Type:n})}}}}}],["DragMovePaint",{Create:function(){return new function(){this.newMethod=Ce,this.newMethod(),delete this.newMethod,this.ClassName="DragMovePaint",this.DrawAfterTitle=!0,this.IsDynamic=!0,this.Info,this.IsShow=!1,this.Point,this.TextColor=ia.DragMovePaint.TextColor,this.Font=ia.DragMovePaint.Font,this.ReloadResource=function(t){this.TextColor=ia.DragMovePaint.TextColor,this.Font=ia.DragMovePaint.Font},this.Clear=function(){this.Info=null,this.IsShow=!1,this.Point=null},this.Draw=function(){if(this.Info&&this.IsShow&&this.Point){var t,e=this.Info.FrameID+1;this.Info.Type==ge.MAIN_KLINE?t="K线:"+this.Info.Name+", 窗口:"+e:this.Info.Type==ge.OVERLAY_KLINE?t="叠加K线:"+this.Info.Name+", 窗口:"+e:this.Info.Type==ge.MAIN_INDEX?t="指标:"+this.Info.IndexName+", 窗口:"+e:this.Info.Type==ge.OVERLAY_INDEX?t="叠加指标:"+this.Info.IndexName+", 窗口:"+e:this.Info.Type==ge.OVERLAY_MINUTE?t="走势图, 叠加价格线:"+this.Info.Name+", 窗口:"+e:this.Info.Type==ge.MAIN_MINUTE?t="走势图, 价格线:"+this.Info.Name+", 窗口:"+e:this.Info.Type==ge.MAIN_AVERAGE_MINUTE?t="走势图, 均线:"+this.Info.Name+", 窗口:"+e:this.Info.Type==ge.MAIN_MINUTE_VOL&&(t="走势图, 成交量:"+this.Info.Name+", 窗口:"+e),t&&(this.Canvas.font=this.Font,this.Canvas.fillStyle=this.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.Canvas.fillText(t,this.Point.X,this.Point.Y))}}}}}]]),this.Create=function(t){return this.DataMap.has(t)?this.DataMap.get(t).Create():null},this.Add=function(t,e){this.DataMap.set(t,{Create:e.Create})}};function Ce(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.Data,this.IsDynamic=!1,this.IsAnimation=!1,this.ClassName="IExtendChartPainting",this.SizeChange=!0,this.IsEraseBG=!1,this.DrawAfterTitle=!1,this.DrawAfterPicture=!1,this.IsCallbackDraw=!1,this.Left=5,this.Right=5,this.Top=5,this.Bottom=5,this.Draw=function(){},this.SetOption=function(t){},this.GetFontHeight=function(t){return O(this.Canvas,t,"擎")}}function pe(){this.newMethod=Ce,this.newMethod(),delete this.newMethod,this.IsDynamic=!0,this.IsEraseBG=!0,this.DrawAfterTitle=!0,this.ClassName="KLineTooltipPaint",this.BorderColor=ia.TooltipPaint.BorderColor,this.BGColor=ia.TooltipPaint.BGColor,this.TitleColor=ia.TooltipPaint.TitleColor,this.DateTimeColor=ia.TooltipPaint.DateTimeColor,this.VolColor=ia.TooltipPaint.VolColor,this.AmountColor=ia.TooltipPaint.AmountColor,this.LatestPoint,this.ShowPosition=0,this.Left=1*A(),this.Top=5*A(),this.Width=50,this.Height=100,this.LineHeight=15*A(),this.LineSpace=2,this.Mergin={Left:2,Top:3,Bottom:5,Right:5},this.ExtendLineWidth=2,this.Font=[ia.TooltipPaint.TitleFont],this.HQChart,this.KLineTitlePaint,this.IsHScreen=!1,this.LanguageID=ra.LANGUAGE_CHINESE_ID,this.ReloadResource=function(t){this.BorderColor=ia.TooltipPaint.BorderColor,this.BGColor=ia.TooltipPaint.BGColor,this.TitleColor=ia.TooltipPaint.TitleColor,this.DateTimeColor=ia.TooltipPaint.DateTimeColor,this.VolColor=ia.TooltipPaint.VolColor,this.AmountColor=ia.TooltipPaint.AmountColor},this.GetLeft=function(){return this.IsHScreen?this.ChartBorder.GetRightEx()-this.Height-this.Top:0==this.ShowPosition?this.ChartBorder.GetLeft()+this.Left:this.ChartBorder.GetRight()-this.Width-this.Left},this.GetTop=function(){return this.IsHScreen?0==this.ShowPosition?this.ChartBorder.GetTop()+this.Left:this.ChartBorder.GetBottom()-this.Width-this.Left:this.ChartBorder.GetTopEx()+this.Top},this.IsEnableDraw=function(){if(!this.HQChart||!this.HQChart.TitlePaint||!this.HQChart.TitlePaint[0])return!1;if(this.HQChart.DragMode==E.CLICK_TOUCH_MODE_ID){if(0==this.HQChart.TouchStatus.CorssCursorShow)return!1}else if(this.HQChart.EnableClickModel){if(!1===this.HQChart.ClickModel.IsShowCorssCursor)return!1}else if(this.HQChart.VerticalDrag){if(this.HQChart.VerticalDrag.IsDrag)return!1}else if(!this.HQChart.IsOnTouch)return!1;return!this.HQChart.CurrentChartDrawPicture},this.Draw=function(){if(this.IsEnableDraw()){this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.KLineTitlePaint=this.HQChart.TitlePaint[0];var t=this.KLineTitlePaint.GetCurrentKLineData();if(t){var e=this.GetFormatTitle({Data:t});e&&Te.IsNonEmptyArray(e.AryText)&&(this.CalculateTooltipSize(e),this.CalculateShowPosition(),this.DrawBG(),this.DrawTooltipData(e),this.DrawBorder())}}},this.CalculateTooltipSize=function(t){this.Canvas.font=this.Font[0],this.LineHeight=this.Canvas.measureText("擎").width;for(var e=A(),a=0,i=0,r=0,n=0,o=0;o<t.AryText.length;++o){var s=t.AryText[o];a>0&&(a+=this.LineSpace);var h,l=0;if(s.Title)i<(h=this.Canvas.measureText(s.Title).width+2)&&(i=h),l+=h;if(s.Text)r<(h=this.Canvas.measureText(s.Text).width+2)&&(r=h),l+=h;n<l&&(n=l),a+=this.LineHeight}return this.Height=a+(this.Mergin.Top+this.Mergin.Bottom)*e,this.Width=n+(this.Mergin.Left+this.Mergin.Right+this.ExtendLineWidth)*e,{Height:this.Height,Width:this.Width,MaxTitleWidth:i,MaxTextWidth:r}},this.CalculateShowPosition=function(){if(this.ShowPosition=0,this.LatestPoint)if(this.IsHScreen){var t=this.ChartBorder.GetTop()+this.ChartBorder.GetHeight()/2;this.LatestPoint.Y<t&&(this.ShowPosition=1)}else{var e=this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()/2;this.LatestPoint.X<e&&(this.ShowPosition=1)}},this.GetFormatTitle=function(t){if(t&&t.Data){var e,a=t.Data;this.HQChart.Symbol&&(e=this.HQChart.Symbol.toUpperCase());var i,r,n=Ga(this.HQChart.Symbol),o=[],s={AryText:o};c=Te.FormatDateString(a.Date),o.push({Text:c,Color:this.DateTimeColor});var h=this.HQChart.Period;if(pt.IsMinutePeriod(h,!0)&&Te.IsNumber(a.Time)?(c=Te.FormatTimeString(a.Time),o.push({Text:c,Color:this.DateTimeColor})):pt.IsSecondPeriod(h)&&Te.IsNumber(a.Time)&&(c=Te.FormatTimeString(a.Time,"HH:MM:SS"),o.push({Text:c,Color:this.DateTimeColor})),Te.IsNumber(a.Open)&&(i=na.GetText("Tooltip-Open",this.LanguageID),r=this.KLineTitlePaint.GetColor(a.Open,a.YClose),c=a.Open.toFixed(n),o.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:r})),Te.IsNumber(a.High)&&(i=na.GetText("Tooltip-High",this.LanguageID),r=this.KLineTitlePaint.GetColor(a.High,a.YClose),c=a.High.toFixed(n),o.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:r})),Te.IsNumber(a.Low)&&(i=na.GetText("Tooltip-Low",this.LanguageID),r=this.KLineTitlePaint.GetColor(a.Low,a.YClose),c=a.Low.toFixed(n),o.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:r})),Te.IsNumber(a.Close)&&(i=na.GetText("Tooltip-Close",this.LanguageID),r=this.KLineTitlePaint.GetColor(a.Close,a.YClose),c=a.Close.toFixed(n),o.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:r})),i=na.GetText("Tooltip-Increase",this.LanguageID),0!=a.YFClose&&Ea.IsChinaFutures(e)){var l=(a.Close-a.YFClose)/a.YFClose*100;r=this.KLineTitlePaint.GetColor(l,0),c=l.toFixed(2)+"%"}else if(0!=a.YClose){l=(a.Close-a.YClose)/a.YClose*100;r=this.KLineTitlePaint.GetColor(l,0),c=l.toFixed(2)+"%"}else c="--.--",r=this.KLineTitlePaint.GetColor(0,0);if(o.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:r}),Te.IsNumber(a.Vol)){i=na.GetText("Tooltip-Vol",this.LanguageID);var u=a.Vol;e&&Ea.IsSHSZ(e)&&(u/=100),c=Te.FromatIntegerString(u,2,this.LanguageID),o.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:this.VolColor})}if(Te.IsNumber(a.Amount)){i=na.GetText("Tooltip-Amount",this.LanguageID);var c=Te.FormatValueString(a.Amount,2,this.LanguageID);o.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:this.AmountColor})}if(Ea.IsSHSZStockA(this.HQChart.Symbol)&&a.FlowCapital>0){i=na.GetText("Tooltip-Exchange",this.LanguageID);c=(l=a.Vol/a.FlowCapital*100).toFixed(2)+"%";o.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:this.TitleColor})}if(Ea.IsFutures(e)&&Te.IsNumber(a.Position)){i=na.GetText("Tooltip-Position",this.LanguageID);c=Te.FromatIntegerString(a.Position,2,this.LanguageID);o.push({Title:i,TitleColor:this.TitleColor,Text:c,Color:this.TitleColor})}return s}},this.DrawTooltipData=function(t){if(t&&Te.IsNonEmptyArray(t.AryText)){var e=A(),a=this.GetLeft()+2*e,i=this.GetTop()+3*e;if(this.IsHScreen){this.Canvas.save();var r=this.GetLeft()+this.Height,n=this.GetTop();this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180),a=2*e,i=3*e}this.Canvas.textBaseline="top";var o=a+this.Width-this.Mergin.Right*e;a+=this.Mergin.Left*e,i+=this.Mergin.Top*e;for(var s=0;s<t.AryText.length;++s){var h=t.AryText[s];h.Title&&(this.Canvas.textAlign="left",this.Canvas.fillStyle=h.TitleColor,this.Canvas.fillText(h.Title,a,i)),h.Text&&(this.Canvas.textAlign="right",this.Canvas.fillStyle=h.Color,this.Canvas.fillText(h.Text,o,i)),i+=this.LineHeight+this.LineSpace}this.IsHScreen&&this.Canvas.restore()}},this.DrawBorder=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.GetLeft(),a=this.GetTop();this.Canvas.strokeStyle=this.BorderColor,t?this.Canvas.strokeRect(_(e),_(a),this.Height,this.Width):this.Canvas.strokeRect(_(e),_(a),k(this.Width),k(this.Height))},this.DrawBG=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.GetLeft(),a=this.GetTop();this.Canvas.fillStyle=this.BGColor,t?this.Canvas.fillRect(e,a,this.Height,this.Width):this.Canvas.fillRect(e,a,this.Width,this.Height)},this.SetOption=function(t){t.LineHeight>0&&(this.LineHeight=t.LineHeight*A()),t.BGColor&&(this.BGColor=t.BGColor),t.LanguageID>0&&(this.LanguageID=t.LanguageID)}}function me(){this.newMethod=pe,this.newMethod(),delete this.newMethod,this.ClassName="MinuteTooltipPaint",this.Left=1*A(),this.Top=1*A(),this.YClose,this.IsShowAveragePrice=!0,this.TitlePaint,this.GetTop=function(){if(this.IsHScreen){var t=this.ChartBorder.GetHScreenBorder();return 0==this.ShowPosition?t.TopEx+this.Left:t.BottomEx-this.Width-this.Left}return(t=this.ChartBorder.GetBorder()).Top+this.Top},this.GetLeft=function(){if(this.IsHScreen)return(t=this.ChartBorder.GetHScreenBorder()).Right-this.Height-this.Top;var t=this.ChartBorder.GetBorder();return 0==this.ShowPosition?t.LeftEx+this.Left:t.RightEx-this.Width-this.Left},this.Draw=function(){if(this.IsEnableDraw()&&(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.TitlePaint=this.HQChart.TitlePaint[0],this.TitlePaint)){var t,e=this.TitlePaint.PointInfo;if(e&&(2==e.ClientPos||3==e.ClientPos||e.ClientPos>=200&&e.ClientPos<=299||e.ClientPos>=300&&e.ClientPos<=399)){var a=this.TitlePaint.GetCurrentAuctionData();if(!a)return;t={Type:1,Data:a}}else{var i=this.TitlePaint.GetCurrentKLineData();if(!i)return;t={Type:0,Data:i}}var r=this.GetFormatTitle(t);r&&Te.IsNonEmptyArray(r.AryText)&&(this.CalculateTooltipSize(r),this.CalculateShowPosition(),this.DrawBG(),this.DrawTooltipData(r),this.DrawBorder())}},this.GetFormatTitle=function(t){if(t&&t.Data){var e,a,i,r,n;if(0==t.Type)a=(e=t.Data).Close,i=e.Vol,r=e.Amount;else if(1==t.Type){if(!(e=t.Data.Data))return;a=e.Price}this.YClose=this.TitlePaint.YClose,this.HQChart.Symbol&&(n=this.HQChart.Symbol.toUpperCase());var o,s=Ga(this.HQChart.Symbol),h=[],l={AryText:h};Te.IsNumber(e.Date)&&(d=Te.FormatDateString(e.Date),h.push({Text:d,Color:this.DateTimeColor})),Te.IsNumber(e.Time)&&(d=Te.FormatTimeString(e.Time),h.push({Text:d,Color:this.DateTimeColor})),Te.IsNumber(a)&&(o=na.GetText("Tooltip-Price",this.LanguageID),c=this.TitlePaint.GetColor(a,this.YClose),d=a.toFixed(s),h.push({Title:o,TitleColor:this.TitleColor,Text:d,Color:c}));var u=!0;if(Ea.IsForeignExchange(n)?u=!1:Ea.IsET(n)&&!Ea.IsETShowAvPrice(n)?u=!1:Ea.IsShowAvPrice&&!Ea.IsShowAvPrice(n)&&(u=!1),u&&Te.IsNumber(e.AvPrice)&&this.IsShowAveragePrice){o=na.GetText("Tooltip-AvPrice",this.LanguageID);var c=this.TitlePaint.GetColor(e.AvPrice,this.YClose);d=e.AvPrice.toFixed(s),h.push({Title:o,TitleColor:this.TitleColor,Text:d,Color:c})}if(Te.IsNumber(a)&&Te.IsNumber(this.YClose)){o=na.GetText("Tooltip-Increase",this.LanguageID);var f=(a-this.YClose)/this.YClose*100;c=this.TitlePaint.GetColor(f,0),d=f.toFixed(2)+"%",h.push({Title:o,TitleColor:this.TitleColor,Text:d,Color:c})}if(Te.IsNumber(i)){o=na.GetText("Tooltip-Vol",this.LanguageID);var d=Te.FromatIntegerString(i,2,this.LanguageID);h.push({Title:o,TitleColor:this.TitleColor,Text:d,Color:this.VolColor})}if(Te.IsNumber(r)){o=na.GetText("Tooltip-Amount",this.LanguageID);d=Te.FormatValueString(r,2,this.LanguageID);h.push({Title:o,TitleColor:this.TitleColor,Text:d,Color:this.AmountColor})}if(Te.IsNumber(e.Position)){o=na.GetText("Tooltip-Position",this.LanguageID);d=Te.FormatValueString(e.Position,2,this.LanguageID);h.push({Title:o,TitleColor:this.TitleColor,Text:d,Color:this.TitleColor})}return l}}}function De(){this.newMethod=Ce,this.newMethod(),delete this.newMethod,this.ClassName="DrawToolsButton",this.HQChart,this.ID=P(),this.ToolsDiv,this.Color="#696969",this.Top=5*A(),this.Width=45*A(),this.SetOption=function(t){var e=A();t&&t.Width>10&&(this.Width=t.Width*e)},this.Clear=function(){this.ToolsDiv&&this.ChartBorder.UIElement.parentNode.removeChild(this.ToolsDiv)},this.Draw=function(){var t=this;if(0!=this.SizeChange){var e=[[{HTML:{Title:"线段",IClass:"iconfont icon-draw_line",ID:"icon-segment"},Name:"线段"},{HTML:{Title:"尺子",IClass:"iconfont icon-ruler",ID:"icon_ruler"},Name:"尺子"},{HTML:{Title:"射线",IClass:"iconfont icon-draw_rays",ID:"icon-beam"},Name:"射线"},{HTML:{Title:"标价线",IClass:"iconfont icon-price_line",ID:"icon-price-line"},Name:"标价线"},{HTML:{Title:"垂直线",IClass:"iconfont icon-vertical_line",ID:"icon-vertical-line"},Name:"垂直线"},{HTML:{Title:"箭头",IClass:"iconfont icon-draw_rays",ID:"icon-beam2"},Name:"箭头"},{HTML:{Title:"趋势线",IClass:"iconfont icon-draw_trendline",ID:"icon-trendline"},Name:"趋势线"},{HTML:{Title:"水平线",IClass:"iconfont icon-draw_hline",ID:"icon-hline"},Name:"水平线"},{HTML:{Title:"水平线段",IClass:"iconfont icon-draw_hlinesegment",ID:"icon-hlineseg"},Name:"水平线段"},{HTML:{Title:"平行射线",IClass:"iconfont icon-draw_p_rays_lines",ID:"icon-rayslineseg"},Name:"平行射线"},{HTML:{Title:"平行线",IClass:"iconfont icon-draw_parallel_lines",ID:"icon-parallellines"},Name:"平行线"},{HTML:{Title:"平行通道",IClass:"iconfont icon-draw_parallelchannel",ID:"icon-parallelchannel"},Name:"平行通道"},{HTML:{Title:"价格通道线",IClass:"iconfont icon-draw_pricechannel",ID:"icon-pricechannel"},Name:"价格通道线"},{HTML:{Title:"M头W底",IClass:"iconfont icon-draw_wavemw",ID:"icon-wavemw"},Name:"M头W底"},{HTML:{Title:"头肩型",IClass:"iconfont icon-draw_head_shoulders_bt",ID:"icon-Head-Shoulders"},Name:"头肩型"},{HTML:{Title:"波浪尺",IClass:"iconfont icon-waveruler",ID:"icon-wave-ruler"},Name:"波浪尺"},{HTML:{Title:"AB波浪尺",IClass:"iconfont icon-waveruler",ID:"icon-wave-ruler"},Name:"AB波浪尺"},{HTML:{Title:"箱型线",IClass:"iconfont icon-draw_box",ID:"icon-drawbox"},Name:"箱型线"},{HTML:{Title:"涂鸦线段",IClass:"iconfont icon-draw_line",ID:"icon-segment2"},Name:"涂鸦线段"}],[{HTML:{Title:"圆弧",IClass:"iconfont icon-draw_arc",ID:"icon-arc"},Name:"圆弧线"},{HTML:{Title:"矩形",IClass:"iconfont icon-rectangle",ID:"icon-rect"},Name:"矩形"},{HTML:{Title:"平行四边形",IClass:"iconfont icon-draw_quadrangle",ID:"icon-quad"},Name:"平行四边形"},{HTML:{Title:"三角形",IClass:"iconfont icon-draw_triangle",ID:"icon-triangle"},Name:"三角形"},{HTML:{Title:"圆",IClass:"iconfont icon-draw_circle",ID:"icon-circle"},Name:"圆"},{HTML:{Title:"对称角度",IClass:"iconfont icon-draw_symangle",ID:"icon-symangle"},Name:"对称角度"}],[{HTML:{Title:"文本",IClass:"iconfont icon-draw_text",ID:"icon-text"},Name:"文本"},{HTML:{Title:"向上箭头",IClass:"iconfont icon-arrow_up",ID:"icon-arrowup"},Name:"icon-arrow_up"},{HTML:{Title:"向下箭头",IClass:"iconfont icon-arrow_down",ID:"icon-arrowdown"},Name:"icon-arrow_down"},{HTML:{Title:"向左箭头",IClass:"iconfont icon-arrow_left",ID:"icon-arrowleft"},Name:"icon-arrow_left"},{HTML:{Title:"向右箭头",IClass:"iconfont icon-arrow_right",ID:"icon-arrowright"},Name:"icon-arrow_right"}],[{HTML:{Title:"江恩角度线",IClass:"iconfont icon-draw_gannfan",ID:"icon-gannfan"},Name:"江恩角度线"},{HTML:{Title:"斐波那契周期线",IClass:"iconfont icon-draw_fibonacci",ID:"icon-fibonacci"},Name:"斐波那契周期线"},{HTML:{Title:"阻速线",IClass:"iconfont icon-draw_resline",ID:"icon-resline"},Name:"阻速线"},{HTML:{Title:"黄金分割",IClass:"iconfont icon-draw_goldensection",ID:"icon-goldensection"},Name:"黄金分割"},{HTML:{Title:"百分比线",IClass:"iconfont icon-draw_percentage",ID:"icon-percentage"},Name:"百分比线"},{HTML:{Title:"波段线",IClass:"iconfont icon-draw_waveband",ID:"icon-waveband"},Name:"波段线"},{HTML:{Title:"线形回归线",IClass:"iconfont icon-linear_3",ID:"icon-waveband2"},Name:"线形回归线"},{HTML:{Title:"线形回归带",IClass:"iconfont icon-linear_1",ID:"icon-waveband3"},Name:"线形回归带"},{HTML:{Title:"延长线形回归带",IClass:"iconfont icon-linear_2",ID:"icon-waveband5"},Name:"延长线形回归带"}],[{HTML:{Title:"全部删除",IClass:"iconfont icon-recycle_bin",ID:"icon-delete"},Name:"全部删除"}]],a=this.HQChart;if(!this.ToolsDiv){var i=document.createElement("div");i.className="drawtools",i.id=this.ID;var r="",n="",o=new Array;e.forEach(function(t,e){o.push(t[0])});for(var s=0;s<e.length;s++){for(var h=o[s],l=e[s],u="",c="",f=0;f<l.length;f++){var d=l[f],C=d.Name;C.indexOf("up")>-1?C="向上箭头":C.indexOf("down")>-1?C="向下箭头":C.indexOf("left")>-1?C="向左箭头":C.indexOf("right")>-1&&(C="向右箭头"),u+='<p class="menuTwoItem '+d.HTML.ID+'">'+C+'<i class="'+d.HTML.IClass+'" title="'+d.HTML.Title+'"></i></p>'}s!==e.length-1?(n='<div class="menuTwo">'+u+"</div>",c='<i class="contentArrow iconfont icon-menu_arraw_left"></i>'):(n="",c=""),r+='<div class="icon-image first-'+h.HTML.ID+'"><i class="'+h.HTML.IClass+'" title="'+h.HTML.Title+'"></i>'+n+c+"</div>"}for(var s in this.ChartBorder.UIElement.parentNode.appendChild(i),i.innerHTML=r,this.ToolsDiv=i,e){var m=e[s][0];if((0,p.default)("#"+this.ID+" .first-"+m.HTML.ID).hover(function(){(0,p.default)(".drawtools").find(".contentArrow").hide(),(0,p.default)(this).find(".contentArrow").removeClass("trans").show()}),(0,p.default)("#"+this.ID+" .first-"+m.HTML.ID+" .contentArrow").click(function(t){t.stopPropagation(),(0,p.default)(".drawtools").find(".menuTwo").hide(),(0,p.default)(this).siblings(".menuTwo").show()}),(0,p.default)("#"+this.ID+" .first-"+m.HTML.ID+" .trans").click(function(){event.stopPropagation(),(0,p.default)(this).siblings(".menuTwo").hide()}),"全部删除"==m.Name)(0,p.default)("#"+this.ID+" .first-icon-delete").click(function(){(0,p.default)(".drawtools").find(".menuTwo").hide(),(0,p.default)(this).siblings().removeClass("active"),(0,p.default)(this).addClass("active"),a.ClearChartDrawPicture(),(0,p.default)(".subTolls").css("display","none")});else{(0,p.default)("#"+this.ID+" .first-"+o[s].HTML.ID).click({CurrentIndex:s},function(t){(0,p.default)(".drawtools").find(".menuTwo").hide(),(0,p.default)(this).siblings().removeClass("active"),(0,p.default)(this).addClass("active"),a.CreateChartDrawPicture(o[t.data.CurrentIndex].Name)});var D=function(){var i=(v=e[s][f]).HTML.IClass;(0,p.default)("#"+t.ID+" ."+v.HTML.ID).hover(function(t){t.stopPropagation(),(0,p.default)(this).closest(".icon-image").find(".contentArrow").addClass("trans")}),(0,p.default)("#"+t.ID+" ."+v.HTML.ID).click({DrawName:v.Name,CurrentIndex:s,CurrentData:v},function(t){t.stopPropagation(),(0,p.default)(this).closest(".icon-image").find(".contentArrow").hide(),(0,p.default)(this).siblings().removeClass("current"),(0,p.default)(this).addClass("current"),(0,p.default)(this).closest(".icon-image").children("i").eq(0).removeClass().addClass(i,"active").attr("title",t.data.CurrentData.HTML.Title),o.splice(t.data.CurrentIndex,1,t.data.CurrentData),(0,p.default)(this).parent().hide(),a.CreateChartDrawPicture(t.data.DrawName)})};for(var f in e[s]){var v;D()}}}}var g=this.ID;(0,p.default)(document).click(function(t){(0,p.default)("#"+g).is(t.target)||0!==(0,p.default)("#"+g).has(t.target).length||((0,p.default)("#"+g+" .menuTwo").hide(),(0,p.default)("#"+g+" .contentArrow").hide())});R();var S=A(),T=_(this.ChartBorder.GetRight()+this.Left),I=this.ChartBorder.GetTop();this.ToolsDiv.style.left=T/S+"px",this.ToolsDiv.style.top=I/S+"px",this.ToolsDiv.style.width=(this.Width-5)/S+"px",this.ToolsDiv.style.height="auto",this.ToolsDiv.style.position="absolute",this.ToolsDiv.style.display="block",this.SizeChange}}}function ve(){this.newMethod=Ce,this.newMethod(),delete this.newMethod,this.ClassName="FrameSplitPaint",this.LineColor="rgb(255,0,0)",this.TextColor="rgb(255,0,0)",this.LineWidth=2,this.Font="bold "+18*A()+"px 微软雅黑",this.TextTopOffset=10*A(),this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.TextColor&&(this.TextColor=t.TextColor),t.Font&&(this.Font=t.Font),Te.IsNumber(t.LineWidth)&&(this.LineWidth=t.LineWidth),Te.IsNumber(t.TextTopOffset)&&(this.TextTopOffset=t.TextTopOffset))},this.Draw=function(){if(this.HQChart&&(0==this.HQChart.Period||1==this.HQChart.Period)&&this.HQChart.ChartPaint[0]){var t=this.HQChart.ChartPaint[0].Data;if(t&&(this.Data=t,this.ChartFrame&&this.ChartFrame.SubFrame)){var e=this.ChartFrame.SubFrame[0].Frame;if(e){var a=!0===e.IsHScreen,i=e.DataWidth,r=e.DistanceWidth,n=e.XPointCount,o=this.LineWidth*A();if(a)var s=(l=this.ChartBorder.GetHScreenBorder()).TopEx+r/2+ia.FrameLeftMargin,h=l.BottomEx;else{s=(l=this.ChartBorder.GetBorder()).LeftEx+r/2+ia.FrameLeftMargin,h=l.RightEx;var l,u=l.ChartHeight-l.TopTitle-5*A()}this.Canvas.save(),this.Canvas.lineWidth=o,this.Canvas.font=this.Font,this.Canvas.textAlign="center",this.Canvas.textBaseline="top";for(var c={Left:l.LeftEx,Top:B(o,l.TopTitle),Height:u,LineWidth:o},f=this.Data.DataOffset,d=0;f<this.Data.Data.length&&d<n;++f,++d,s+=i+r){var C=this.Data.Data[f];if(C){var p=this.GetQuarter(C.Date);if(p){var m=s+i;if(m>h)break;var D=s+(m-s)/2;if(c.DateInfo){var v=c.DateInfo;v.Year!=p.Year||v.Quarter!=p.Quarter?(c.Right=D,this.DrawQuarter(c),c.Left=D,c.Right=null,c.DateInfo=p):c.Right=D}else c.DateInfo=p,c.Right=D}}}this.DrawQuarter(c),this.Canvas.restore()}}}},this.DrawQuarter=function(t){if(Te.IsNumber(t.Left)&&Te.IsNumber(t.Right)){var e=B(t.LineWidth,t.Left),a=B(t.LineWidth,t.Right)-e;this.Canvas.strokeStyle=this.LineColor,this.Canvas.strokeRect(e,t.Top,a,t.Height);var i=t.DateInfo,r=i.Year%100;if(r<10)var n="0"+r;else n=r.toString();var o=n+"年"+i.Quarter+"季度";if(this.Canvas.measureText(o).width<a+5){var s=e+a/2,h=t.Top+this.TextTopOffset;this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(o,s,h)}}},this.GetQuarter=function(t){if(!Te.IsNumber(t))return null;var e=parseInt(t/1e4),a=parseInt(t%1e4/100);switch(a){case 1:case 2:case 3:var i=1;break;case 4:case 5:case 6:i=2;break;case 7:case 8:case 9:i=3;break;case 10:case 11:case 12:i=4;break;default:return null}return{Year:e,Month:a,Quarter:i}}}var ge={MAIN_KLINE:1,OVERLAY_KLINE:2,MAIN_INDEX:3,OVERLAY_INDEX:4,OVERLAY_MINUTE:5,MAIN_MINUTE:6,MAIN_AVERAGE_MINUTE:7,MAIN_MINUTE_VOL:8};var Se={LATEST_VALUE_ID:0,FIXED_VALUE_ID:1,PAGE_LAST_PRICE_ID:2,PAGE_DATA_INCREASE:3,PAGE_LAST_INDEX_VALUE_ID:4,PAGE_LAST_OVERLAY_INDEX_VALUE_ID:5};function Te(){this.ChartBorder,this.Frame,this.FrameSplitData,this.SplitCount=5,this.StringFormat=0,this.IsShowLeftText=!0,this.IsShowRightText=!0,this.LanguageID=ra.LANGUAGE_CHINESE_ID,this.GetEventCallback,this.GetKLineChartCallback,this.IntegerCoordinateSplit=function(t){var e=this.FrameSplitData.Find(t.Interval);if(!e)return!1;if(t.Interval==e.FixInterval)return!0;var a=t.Max,i=t.Min,r=t.Max/e.FixInterval,n=t.Min/e.FixInterval;Te.IsFloat(r)&&(a=parseInt((r+.5).toFixed(0))*e.FixInterval),Te.IsFloat(n)&&(i=parseInt((n-.5).toFixed(0))*e.FixInterval),0==t.Min&&(i=0),i<0&&t.Min>0&&(i=0);for(var o=0,s=i;s-a<1e-8;s+=e.FixInterval)++o;return t.Interval=e.FixInterval,t.Max=a,t.Min=i,t.Count=o,!0},this.Filter=function(t,e){if(this.SplitCount<=0||t.length<=0||t.length<=this.SplitCount)return t;var a=parseInt(t.length/this.SplitCount);a<=1&&(a=2);for(var i=[],r=0;r<t.length;r+=a)r+a>=t.length&&r!=t.length-1?i.push(t[t.length-1]):i.push(t[r]);if(2==this.SplitCount&&i.length>2)for(r=1;r<i.length-1;++r){(o=i[r]).Message[0]=null,o.Message[1]=null}if(e){var n=!1;for(r=0;r<i.length;++r){var o=i[r];if(Math.abs(o.Value)<1e-8){n=!0;break}}if(0==n){var s=new Y;s.Value=0,s.Message[0]=null,s.Message[1]=null,i.push(s)}}return i},this.RemoveZero=function(t){for(var e=[!0,!0,!0,!0],a=0;a<t.length;++a){var i=(r=t[a]).Message[0];this.IsDecimalZeroEnd(i)||(e[0]=!1);i=r.Message[1];this.IsDecimalZeroEnd(i)||(e[1]=!1);i=r.Message[2];this.IsDecimalZeroEnd(i)||(e[2]=!1);i=r.Message[3];this.IsDecimalZeroEnd(i)||(e[3]=!1)}if(0!=e[0]||0!=e[1]||0!=e[2]||0!=e[3])for(a=0;a<t.length;++a){var r=t[a];if(e[0])null!=(i=r.Message[0])&&("number"==typeof i&&(i=i.toString()),r.Message[0]=i.replace(/[.][0]+/g,""));if(e[1])null!=(i=r.Message[1])&&("number"==typeof i&&(i=i.toString()),r.Message[1]=i.replace(/[.][0]+/g,""));if(e[2])null!=(i=r.Message[2])&&("number"==typeof i&&(i=i.toString()),r.Message[2]=i.replace(/[.][0]+/g,""));if(e[3])null!=(i=r.Message[3])&&("number"==typeof i&&(i=i.toString()),r.Message[3]=i.replace(/[.][0]+/g,""))}},this.IsDecimalZeroEnd=function(t){if(null==t)return!0;if("number"==typeof t&&(t=t.toString()),"0"==t)return!0;var e=t.search(/[.]/);if(e<0)return!1;for(var a=e+1;a<t.length;++a){var i=t.charAt(a);if(i>="1"&&i<="9")return!1}return!0},this.GetKLinePageInfo=function(){if(!this.GetKLineChartCallback)return null;var t=this.GetKLineChartCallback();if(!(t&&t.Data&&t.Data.DataOffset>=0))return null;if(!Te.IsNonEmptyArray(t.Data.Data))return null;var e=t.Data.Data,a=t.Data.DataOffset,i=t.Data.DataOffset+t.ChartFrame.XPointCount-1;return i>=e.length&&(i=e.length-1),{Start:{Item:e[a],Index:a},End:{Item:e[i],Index:i},IsLast:i==e.length-1}},this.CustomLatestIndexDataCoordinate=function(t){var e=this.GetKLinePageInfo();if(e&&this.HQChart){var a=null;this.GetEventCallback&&(a=this.GetEventCallback(w.ON_FORMAT_INDEX_Y_LABEL));var i=e.End.Index,r=2;Te.IsNumber(this.FloatPrecision)&&(r=this.FloatPrecision);for(var n=0,o=0;n<this.HQChart.ChartPaint.length;++n){var s=this.HQChart.ChartPaint[n];if(s.ChartFrame&&(s.GetItemData&&(s.ChartFrame.Identify==this.Frame.Identify||s.ChartFrame==this.Frame))){var h=s.GetItemData({Index:i});if(!Te.IsNonEmptyArray(h))continue;for(o=0;o<h.length;++o){var l=h[o],u=new Y;u.Type=1,u.TextColor=ia.FrameLatestPrice.TextColor,u.LineColor=l.Color,u.LineType=-1,u.IsLast=e.IsLast,Te.IsNumber(t.LineType)&&(u.LineType=t.LineType),u.Value=l.Value;var c=Te.FormatValueString(l.Value,r,this.LanguageID);if("left"==t.Position?u.Message[0]=c:u.Message[1]=c,!e.IsLast){var f={};e.IsLast||(f.EmptyBGColor=ia.FrameLatestPrice.EmptyBGColor),u.ExtendData={Custom:f}}if(a){var d={PreventDefault:!1,Label:u,Data:l,IndexName:s.IndexName,FrameID:this.Frame.Identify};if(a.Callback(a,d,this),d.PreventDefault)continue}this.Frame.CustomHorizontalInfo.push(u)}}}}},this.CustomLatestOverlayIndexDataCoordinate=function(t){var e=this.GetKLinePageInfo();if(e&&this.OverlayIndex&&Te.IsNonEmptyArray(this.OverlayIndex.ChartPaint)){var a=null;this.GetEventCallback&&(a=this.GetEventCallback(w.ON_FORMAT_OVERLAY_INDEX_Y_LABEL));var i=e.End.Index,r=2;Te.IsNumber(this.FloatPrecision)&&(r=this.FloatPrecision);for(var n=0,o=0;n<this.OverlayIndex.ChartPaint.length;++n){var s=this.OverlayIndex.ChartPaint[n];if(s.ChartFrame&&s.GetItemData){var h=s.GetItemData({Index:i});if(Te.IsNonEmptyArray(h))for(o=0;o<h.length;++o){var l=h[o],u=new Y;u.Type=1,u.TextColor=ia.FrameLatestPrice.TextColor,u.LineColor=l.Color,u.LineType=-1,u.IsLast=e.IsLast,Te.IsNumber(t.LineType)&&(u.LineType=t.LineType),u.Value=l.Value;var c=Te.FormatValueString(l.Value,r,this.LanguageID);if("left"==t.Position?u.Message[0]=c:u.Message[1]=c,!e.IsLast){var f={};e.IsLast||(f.EmptyBGColor=ia.FrameLatestPrice.EmptyBGColor),u.ExtendData={Custom:f}}if(a){var d={PreventDefault:!1,Label:u,Data:l,IndexName:s.IndexName,OverlayIdentify:this.OverlayIndex.Identify};if(a.Callback(a,d,this),d.PreventDefault)continue}this.Frame.CustomHorizontalInfo.push(u)}}}}}}function Ie(){this.newMethod=Te,this.newMethod(),delete this.newMethod,this.CoordinateType=0,this.Symbol,this.Data,this.FrameSplitData2,this.FloatPrecision=null,this.Period,this.KLineChart,this.Custom=[],this.SplitType=0,this.DefaultSplitType=0,this.DefaultYMaxMin,this.FixedYMaxMin,this.EnableZoomUpDown=!1,this.LastMaxMin,this.PercentageTextFormat=0,this.IsEnableDragY=function(){return 0==this.CoordinateType||1==this.CoordinateType},this.Operator=function(){var t={};t.Max=this.Frame.HorizontalMax,t.Min=this.Frame.HorizontalMin,t.Count=this.SplitCount,t.Max==t.Min&&(t.Max+=.01*t.Max,t.Min-=.01*t.Min);var e=this.FixedYMaxMin&&Te.IsNumber(this.FixedYMaxMin.Max)&&Te.IsNumber(this.FixedYMaxMin.Min);if(e)t.Max=this.FixedYMaxMin.Max,t.Min=this.FixedYMaxMin.Min;else if(this.DefaultYMaxMin){var a=this.DefaultYMaxMin;Te.IsNumber(a.Max)&&(t.Min>a.Max?t.Min=a.Max:t.Max<a.Max&&(t.Max=a.Max)),Te.IsNumber(a.Min)&&(t.Max<a.Min?t.Max=a.Min:t.Min>a.Min&&(t.Min=a.Min))}t.Interval=(t.Max-t.Min)/(t.Count-1);var i=A(),r=this.Frame.ChartBorder.GetChartWidth()<450*i,n=Ga(this.Symbol);r&&Ea.IsSHSZIndex(this.Symbol)&&(n=0),null!=this.FloatPrecision&&(n=this.FloatPrecision),D.Chart.Log("[FrameSplitKLinePriceY::Operator] Max="+t.Max+" Min="+t.Min+" Count="+t.Count+" isPhoneModel="+r+" defaultfloatPrecision="+n+" "),this.Frame.Logarithmic=null,this.Frame.MultiTextFormat=0;var o=!0;if(t.IsFixedMaxMin=e,t.IsFilter=o,pt.IsTickPeriod(this.Period))this.SplitTickData(t,n),o=t.IsFilter;else if(Ie.SplitCustom)Ie.SplitCustom(this,t,n),o=!1;else switch(this.CoordinateType){case 1:this.SplitPercentage(t,n,e)?(this.Frame.MultiTextFormat=this.PercentageTextFormat,o=!1):this.SplitDefault(t,n,e);break;case 3:this.SplitIncrease(t,n)?o=!1:this.SplitDefault(t,n);break;case 4:this.SplitAverage(t,n),o=!1;break;case 5:this.SplitGoldenSection(t,n),o=!1;break;case 2:this.SplitLogarithmic(t,n)?o=!1:this.SplitDefault(t,n);break;default:1==this.SplitType?(this.SplitFixed(t,n),o=!1):2==this.SplitType?(this.SplitFixedV2(t,n),o=!1):this.SplitDefault(t,n,e)}if(this.CustomCoordinate(n),o&&(this.Frame.HorizontalInfo=this.Filter(this.Frame.HorizontalInfo,!1)),this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min,1!=this.EnableZoomUpDown||this.FixedYMaxMin||(this.FixedYMaxMin={Max:t.Max,Min:t.Min}),D.Chart.Log("[FrameSplitKLinePriceY::Operator] fixed . Max="+t.Max+" Min="+t.Min+" Count="+t.Count),this.GetEventCallback){var s=this.GetEventCallback(w.ON_SPLIT_YCOORDINATE);if(s&&s.Callback){var h={ID:this.Frame.Identify,Frame:this.Frame};s.Callback(s,h,this)}}},this.SplitTickData=function(t,e){switch(this.CoordinateType){case 1:this.SplitPercentage(t,e,t.IsFixedMaxMin)?(this.Frame.MultiTextFormat=this.PercentageTextFormat,t.IsFilter=!1):this.SplitDefault(t,e,t.IsFixedMaxMin);break;default:3==this.SplitType?this.SplitTickPrice(t,e):this.SplitDefault(t,e,t.IsFixedMaxMin)}},this.SplitTickPrice=function(t,e){var a=this.KLineChart.GetAllPrice();for(var i in this.Frame.HorizontalInfo=[],a){var r=a[i];this.Frame.HorizontalInfo[i]=new Y,this.Frame.HorizontalInfo[i].Value=r,this.IsShowLeftText&&(this.Frame.HorizontalInfo[i].Message[0]=r.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[i].Message[1]=r.toFixed(e))}},this.SplitPercentage=function(t,e,a){var i=this.GetFirstOpenPrice();if(!Te.IsNumber(i))return!1;t.Max=(t.Max-i)/i,t.Min=(t.Min-i)/i,t.Interval=(t.Max-t.Min)/(t.Count-1),a||this.IntegerCoordinateSplit2(t);var r,n=(1+t.Min)*i,o=(1+t.Max)*i;ia.Frame&&ia.Frame.PercentageText&&(r={PriceColor:(f=ia.Frame.PercentageText).PriceColor,PercentageColor:f.PercentageColor,SplitColor:f.SplitColor,Font:f.Font});for(var s=[],h=0;h<=t.Max;h+=t.Interval){var l=(h+1)*i;if((f=new Y).Value=l,this.IsShowLeftText&&(f.Message[0]=l.toFixed(e)),this.IsShowRightText){var u=l.toFixed(e),c=(100*h).toFixed(2);c=Te.RemoveZero(c),c+="%",f.Message[1]=[c,u],f.ExtendData=r}s.push(f)}for(h=-t.Interval;h>=t.Min;h-=t.Interval){if(!((l=(h+1)*i)<n||l>o)){var f;if((f=new Y).Value=l,this.IsShowLeftText&&(f.Message[0]=l.toFixed(e)),this.IsShowRightText){u=l.toFixed(e),c=(100*h).toFixed(2);c=Te.RemoveZero(c),c+="%",f.Message[1]=[c,u],f.ExtendData=r}s.push(f)}}return s.sort(function(t,e){return t.Value-e.Value}),this.Frame.HorizontalInfo=s,t.Min=n,t.Max=o,!0},this.SplitIncrease=function(t,e){var a=this.GetLast2ndClose();if(!Te.IsNumber(a))return!1;this.IntegerCoordinateSplit(t),this.Frame.HorizontalInfo=[];for(var i=ia.FrameSplitIncrease.Increase,r=[],n=a;n<t.Max;n*=1+i){(s=new Y).Value=n;var o=n.toFixed(e);this.IsShowLeftText&&(s.Message[0]=o),this.IsShowRightText&&(s.Message[1]=o),r.push(s)}for(n=.9*a;n>t.Min;n*=1-i){var s;(s=new Y).Value=n;o=n.toFixed(e);this.IsShowLeftText&&(s.Message[0]=o),this.IsShowRightText&&(s.Message[1]=o),r.push(s)}return this.Frame.HorizontalInfo=r,!0},this.SplitAverage=function(t,e){var a=t.Max,i=t.Min;this.Frame.HorizontalInfo=[];for(var r=ia.FrameSplitAverage.Count,n=(a-i)/r,o=0;o<=r;++o){var s=new Y;s.Value=i+n*o;var h=s.Value.toFixed(e);this.IsShowLeftText&&(s.Message[0]=h),this.IsShowRightText&&(s.Message[1]=h),this.Frame.HorizontalInfo[o]=s}},this.SplitGoldenSection=function(t,e){var a=t.Max,i=t.Min;this.Frame.HorizontalInfo=[];var r=[],n=ia.FrameGoldenSection.Golden;for(var o in n){var s=(a-i)*n[o]+i;item=new Y,item.Value=s;var h=s.toFixed(e);this.IsShowLeftText&&(item.Message[0]=h),this.IsShowRightText&&(item.Message[1]=h),r.push(item)}this.Frame.HorizontalInfo=r},this.SplitLogarithmic=function(t,e){var a=ia.FrameLogarithmic.MinInterval,i=this.GetFirstOpenPrice();if(!Te.IsNumber(i))return!1;for(var r=this.ChartBorder.GetHeightEx(),n=[.01,.02,.04,.08,.1,.2],o=n[n.length-1],s=0;s<n.length;++s){var h=n[s];if(i*h*(r/(t.Max-t.Min))>a){o=h;break}}var l=[],u=i;s=o;do{var c={Start:u};u=i*(1+s),c.End=u,l.push(c),s+=o}while(u<t.Max);var f=u,d=[];u=i,s=o;do{c={End:u};u=i*(1-s),c.Start=u,d.push(c),s+=o}while(u>t.Min);var C=u;t.Max=f,t.Min=C,D.Chart.Log("[FrameSplitKLinePriceY::SplitLogarithmic] up, down",l,d),this.Frame.HorizontalInfo=[],(c=new Y).Value=i,c.Font=ia.FrameLogarithmic.OpenPriceFont;var p=c.Value.toFixed(e);for(var s in this.IsShowLeftText&&(c.Message[0]=p),this.IsShowRightText&&(c.Message[1]=p),this.Frame.HorizontalInfo.push(c),l){(c=new Y).Value=l[s].End;p=c.Value.toFixed(e);this.IsShowLeftText&&(c.Message[0]=p),this.IsShowRightText&&(c.Message[1]=p),this.Frame.HorizontalInfo.push(c)}for(var s in d){(c=new Y).Value=d[s].End;p=c.Value.toFixed(e);this.IsShowLeftText&&(c.Message[0]=p),this.IsShowRightText&&(c.Message[1]=p),this.Frame.HorizontalInfo.splice(0,0,c)}return this.Frame.Logarithmic={Up:l,Down:d,OpenPrice:i},!0},this.SplitDefault=function(t,e,a){a||this.IntegerCoordinateSplit(t),this.Frame.HorizontalInfo=[];for(var i=0,r=t.Min;i<t.Count;++i,r+=t.Interval)this.Frame.HorizontalInfo[i]=new Y,this.Frame.HorizontalInfo[i].Value=r,this.IsShowLeftText&&(this.Frame.HorizontalInfo[i].Message[0]=r.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[i].Message[1]=r.toFixed(e))},this.SplitFixed=function(t,e){this.Frame.HorizontalInfo=[];for(var a=0,i=t.Min;a<t.Count;++a,i+=t.Interval)this.Frame.HorizontalInfo[a]=new Y,this.Frame.HorizontalInfo[a].Value=i,this.IsShowLeftText&&(this.Frame.HorizontalInfo[a].Message[0]=i.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[a].Message[1]=i.toFixed(e))},this.SplitFixedV2=function(t,e){this.Frame.HorizontalInfo=[];for(var a=0,i=t.Min;a<t.Count;++a,i+=t.Interval)this.Frame.HorizontalInfo[a]=new Y,this.Frame.HorizontalInfo[a].Value=i,this.IsShowLeftText&&(this.Frame.HorizontalInfo[a].Message[0]=i.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[a].Message[1]=i.toFixed(e));t.IsFixedMaxMin||(0==e?(t.Max+=1,t.Min-=1):1==e?(t.Max+=.1,t.Min-=.1):2==e&&(t.Max+=.01,t.Min-=.01))},this.CustomCoordinate=function(t){var e,a;this.Frame.CustomHorizontalInfo=[];for(var i=0;i<this.Custom.length;++i){var r=this.Custom[i];if(r.Type==Se.LATEST_VALUE_ID||r.Type==Se.PAGE_DATA_INCREASE||r.Type==Se.PAGE_LAST_PRICE_ID){var n=t;Te.IsNumber(r.FloatPrecision)&&r.FloatPrecision>=0&&(n=r.FloatPrecision);var o=this.GetLatestPrice(n,r);o&&(r.Type==Se.LATEST_VALUE_ID?e=o:r.Type==Se.PAGE_LAST_PRICE_ID?a=o:this.Frame.CustomHorizontalInfo.push(o))}else r.Type==Se.FIXED_VALUE_ID?this.CustomFixedCoordinate(r):r.Type==Se.PAGE_LAST_INDEX_VALUE_ID&&this.CustomLatestIndexDataCoordinate(r)}(e||a)&&(e&&a&&!0===a.IsLast?this.Frame.CustomHorizontalInfo.unshift(e):(e&&this.Frame.CustomHorizontalInfo.unshift(e),a&&this.Frame.CustomHorizontalInfo.push(a)))},this.GetLatestPrice=function(t,e){if(!this.Data||!this.Data.Data)return null;if(this.Data.Data.length<=0)return null;var a=this.Data.Data[this.Data.Data.length-1],i=!0;2==e.Type&&((n=this.GetKLinePageInfo())&&(a=n.End.Item,i=n.IsLast));var r=new Y;r.Type=0,e&&Te.IsNumber(e.Type)&&(r.Type=e.Type),r.Value=a.Close,r.TextColor=ia.FrameLatestPrice.TextColor,r.LineType=2;var n,o=a.Close.toFixed(t);if((a.Close>a.Open?r.LineColor=ia.FrameLatestPrice.UpBarColor:a.Close<a.Open?r.LineColor=ia.FrameLatestPrice.DownBarColor:r.LineColor=ia.FrameLatestPrice.UnchagneBarColor,3==e.Type)&&((n=this.GetKLinePageInfo())&&Te.IsNumber(n.Start.Item.YClose))){var s=(n.End.Item.Close-n.Start.Item.YClose)/n.Start.Item.YClose*100;o=s.toFixed(2)+"%";r.LineColor=s>0?ia.FrameLatestPrice.UpBarColor:s<0?ia.FrameLatestPrice.DownBarColor:ia.FrameLatestPrice.UnchagneBarColor,r.Value=n.End.Item.Close,i=n.IsLast}if("HH:MM"==e.DateTime&&pt.IsMinutePeriod(this.Period,!0)){var h=[{Text:o},{Text:Te.FormatTimeString(a.Time,e.DateTime)}];"left"==e.Position?r.Message[0]=h:r.Message[1]=h}else if(Te.IsBool(e.CountDown)){h=[{Text:o},{Type:1}];"left"==e.Position?r.Message[0]=h:r.Message[1]=h}else"left"==e.Position?r.Message[0]=o:r.Message[1]=o;if(Te.IsNumber(e.LineType)&&(r.LineType=e.LineType),Te.IsPlusNumber(e.LineWidth)&&(r.LineWidth=e.LineWidth),e.LineDash&&(r.LineDash=e.LineDash),0==e.IsShowLine&&(r.LineType=-1),r.IsLast=i,!i||1===e.PositionEx){var l={};i||(l.EmptyBGColor=ia.FrameLatestPrice.EmptyBGColor),1===e.PositionEx&&(l.Position=1),r.ExtendData={Custom:l}}return r},this.GetFirstOpenPrice=function(){if(!this.Data)return null;for(var t=this.Frame.XPointCount,e=this.Data.DataOffset,a=0;e<this.Data.Data.length&&a<t;++e,++a){var i=this.Data.Data[e];if(null!=i.Open&&null!=i.High&&null!=i.Low&&null!=i.Close)return pt.IsTickPeriod(this.Period)?i.YClose:i.Open}return null},this.GetLast2ndClose=function(){if(!this.Data)return null;if(this.Data.Data.length<=0)return null;var t=this.Frame.XPointCount,e=this.Data.DataOffset+t-1;e>=this.Data.Data.length&&(e=this.Data.Data.length-1);for(var a=null,i=e,r=0;i>=0&&i<this.Data.Data.length;--i){var n=this.Data.Data[i];if(null!=n.Open&&null!=n.High&&null!=n.Low&&null!=n.Close&&(0==r?a=n.Open:1==r&&(a=n.Close),++r>=2))break}return a},this.CustomFixedCoordinate=function(t){var e=Ga(this.Symbol);for(var a in t.Data){var i,r=t.Data[a],n=new Y;n.Type=1,n.TextColor=r.TextColor,n.LineColor=r.Color,n.LineType=2,Te.IsNumber(t.LineType)&&(n.LineType=t.LineType),Te.IsPlusNumber(t.LineWidth)&&(n.LineWidth=t.LineWidth),t.LineDash&&(n.LineDash=t.LineDash),0==t.IsShowLine&&(n.LineType=-1),n.Value=r.Value,i=r.Text?r.Text:n.Value.toFixed(e),"left"==t.Position?n.Message[0]=i:n.Message[1]=i,1===t.PositionEx&&(n.ExtendData={Custom:{Position:1}}),this.Frame.CustomHorizontalInfo.push(n)}},this.IntegerCoordinateSplit2=function(t){var e=this.FrameSplitData2.Find(t.Interval);if(!e)return!1;if(t.Interval==e.FixInterval)return!0;var a=parseInt((t.Max/e.FixInterval+.5).toFixed(0))*e.FixInterval,i=parseInt((t.Min/e.FixInterval-.5).toFixed(0))*e.FixInterval;0==t.Min&&(i=0),i<0&&t.Min>0&&(i=0);for(var r=0,n=i;n-a<1e-8;n+=e.FixInterval)++r;return t.Interval=e.FixInterval,t.Max=a,t.Min=i,t.Count=r,!0}}function ye(){this.newMethod=Te,this.newMethod(),delete this.newMethod,this.SplitCount=3,this.FloatPrecision=2,this.FLOATPRECISION_RANGE=[1,.1,.01,.001,1e-4],this.SplitType=0,this.DefaultSplitType=0,this.Custom=[],this.DefaultYMaxMin,this.EnableRemoveZero=!0,this.LineType=null,this.IgnoreYValue=null,this.FixedYMaxMin,this.EnableZoomUpDown=!1,this.IsBeforeData=!1,this.BeforeOpenData,this.IsAfterData=!1,this.AfterCloseData,this.ShareAfterVol=0,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.OverlayIdentify,this.HQChart,this.OverlayIndex,this.IsEnableDragY=function(){return!0},this.GetFloatPrecision=function(t,e){if(t>this.FLOATPRECISION_RANGE[0])return e;if(e<0)return 2;for(;e<this.FLOATPRECISION_RANGE.length&&!(t>this.FLOATPRECISION_RANGE[e]);++e);return e},this.Operator=function(){var t={};t.Max=this.Frame.HorizontalMax,t.Min=this.Frame.HorizontalMin,t.Max==t.Min&&(0==t.Max?(t.Max=1,t.Min=-1):(t.Max+=.01*t.Max,t.Min-=.01*t.Min));var e=!1;if(this.FixedYMaxMin&&Te.IsNumber(this.FixedYMaxMin.Max)&&Te.IsNumber(this.FixedYMaxMin.Min)&&(e=!0),e)t.Max=this.FixedYMaxMin.Max,t.Min=this.FixedYMaxMin.Min;else if(this.DefaultYMaxMin){var a=this.DefaultYMaxMin;Te.IsNumber(a.Max)&&(t.Min>a.Max?t.Min=a.Max:t.Max<a.Max&&(t.Max=a.Max)),Te.IsNumber(a.Min)&&(t.Max<a.Min?t.Max=a.Min:t.Min>a.Min&&(t.Min=a.Min))}if(this.Frame.YSpecificMaxMin?(t.Count=this.Frame.YSpecificMaxMin.Count,t.Interval=(t.Max-t.Min)/(t.Count-1)):1==this.SplitType||e?(t.Count=this.SplitCount,t.Interval=(t.Max-t.Min)/(t.Count-1)):2==this.SplitType?(t.Max=100,t.Min=0,t.Count=this.SplitCount,t.Interval=(t.Max-t.Min)/(t.Count-1)):(t.Count=this.SplitCount,t.Interval=(t.Max-t.Min)/(t.Count-1),this.IntegerCoordinateSplit(t)),this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min,this.Frame.HorizontalInfo=[],this.Frame.YSplitScale)for(var i in this.Frame.YSplitScale){var r=this.Frame.YSplitScale[i];(s=new Y).Value=r,Te.IsNumber(this.LineType)&&(s.LineType=this.LineType);var n=Math.abs(r);if(n<1e-10)s.Message[1]=0;else if(n<this.FLOATPRECISION_RANGE[this.FLOATPRECISION_RANGE.length-1])s.Message[1]=r.toExponential(2).toString();else{var o=this.GetFloatPrecision(n,this.FloatPrecision);s.Message[1]=Te.FormatValueString(r,o,this.LanguageID)}s.Message[0]=s.Message[1],0==this.IsShowLeftText&&(this.Frame.HorizontalInfo[i].Message[0]=null),0==this.IsShowRightText&&(this.Frame.HorizontalInfo[i].Message[1]=null),this.Frame.HorizontalInfo.push(s)}else for(i=0,r=t.Min;i<t.Count;++i,r+=t.Interval){var s=new Y;this.Frame.HorizontalInfo[i]=s,s.Value=r,Te.IsNumber(this.LineType)&&(s.LineType=this.LineType);var h=this.FormatValueString(r);this.Frame.HorizontalInfo[i].Message[0]=this.Frame.HorizontalInfo[i].Message[1]=h,0==this.IsShowLeftText&&(this.Frame.HorizontalInfo[i].Message[0]=null),0==this.IsShowRightText&&(this.Frame.HorizontalInfo[i].Message[1]=null)}if(this.FilterIgnoreYValue(),this.CustomCoordinate(),1!=this.SplitType&&(this.Frame.HorizontalInfo=this.Filter(this.Frame.HorizontalInfo,t.Max>0&&t.Min<0)),this.RightFrameSplitY(),this.CallAcutionSplitY(this.SplitCount,t),this.EnableRemoveZero&&this.RemoveZero(this.Frame.HorizontalInfo),this.DynamicMessageText(),this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min,1!=this.EnableZoomUpDown||this.FixedYMaxMin||(this.FixedYMaxMin={Max:t.Max,Min:t.Min}),this.GetEventCallback){var l=this.GetEventCallback(w.ON_SPLIT_YCOORDINATE);if(l&&l.Callback){var u={ID:this.Frame.Identify,Frame:this.Frame};this.OverlayIdentify&&(u.OverlayIdentify=this.OverlayIdentify),l.Callback(l,u,this)}}},this.FormatValueString=function(t){var e;if(1==this.StringFormat){var a=this.FloatPrecision;Te.IsNumber(t)&&Math.abs(t)>1e3&&(a=0),e=Te.FormatValueString(t,a,this.LanguageID)}else{var i=Math.abs(t);if(i<1e-10)e=0;else if(i<this.FLOATPRECISION_RANGE[this.FLOATPRECISION_RANGE.length-1])e=t.toExponential(2).toString();else{a=this.GetFloatPrecision(i,this.FloatPrecision);e=Te.FormatValueString(t,a,this.LanguageID)}}return e},this.FilterIgnoreYValue=function(){if(this.IgnoreYValue&&!(this.IgnoreYValue.length<=0)){var t=new c.default(this.IgnoreYValue);this.Frame.HorizontalInfo=this.Frame.HorizontalInfo.filter(function(e){return!t.has(e.Value)})}},this.DynamicMessageText=function(){if(2==this.SplitType)for(var t=0;t<this.Frame.HorizontalInfo.length;++t){var e=this.Frame.HorizontalInfo[t];e.Message[0]&&(e.Message[0]+="%"),e.Message[1]&&(e.Message[1]+="%")}},this.CallAcutionSplitY=function(t,e){if(1!=this.Frame.Identify)return null;var a=this.GetCallAcutionSplitY(t,e);if(a){for(var i=0;i<this.Frame.HorizontalInfo.length;++i){var r=this.Frame.HorizontalInfo[i];a.IsBeforeData&&(r.Message[2]=r.Message[0],r.Message[0]=null),!a.IsAfterData||0!=this.ShareAfterVol&&2!=this.ShareAfterVol||(r.Message[3]=r.Message[1],r.Message[1]=null)}for(i=0;i<a.HorizontalInfo.length;++i){r=a.HorizontalInfo[i];this.Frame.HorizontalInfo.push(r)}}},this.GetCallAcutionSplitY=function(t,e){if(1!=this.Frame.Identify)return null;var a=1==this.IsBeforeData&&this.BeforeOpenData&&(2==this.BeforeOpenData.Ver||3==this.BeforeOpenData.Ver),i=1==this.IsAfterData&&this.AfterCloseData&&(2==this.AfterCloseData.Ver||3==this.AfterCloseData.Ver);if(a||i){var r=(e.Max-e.Min)/(t-1);if(a)var n=(this.BeforeOpenData.VolMax-this.BeforeOpenData.VolMin)/(t-1);if(i)var o=(this.AfterCloseData.VolMax-this.AfterCloseData.VolMin)/(t-1);for(var s=[],h=0;h<t;++h){var l=r*h;if((p=new Y).Value=l,p.LineType=8,a){var u=n*h;p.Message[0]=this.FormatValueString(u)}if(i&&(0==this.ShareAfterVol||2==this.ShareAfterVol)){var c=o*h;p.Message[1]=this.FormatValueString(c)}s.push(p)}return{HorizontalInfo:s,IsBeforeData:a,IsAfterData:i}}var f=!1;n=null;if(this.MultiDayBeforeOpenData&&Te.IsNonEmptyArray(this.MultiDayBeforeOpenData)&&(f=!0,2==(d=this.MultiDayBeforeOpenData[0]).Ver||3==d.Ver))n=(d.VolMax-d.VolMin)/(t-1);var d,C=!1;o=null;if(this.MultiDayAfterCloseData&&Te.IsNonEmptyArray(this.MultiDayAfterCloseData)&&(C=!0,2==(d=this.MultiDayAfterCloseData[0]).Ver||3==d.Ver))o=(d.VolMax-d.VolMin)/(t-1);if(f||C){for(r=(e.Max-e.Min)/(t-1),s=[],h=0;h<t;++h){var p;l=r*h;(p=new Y).Value=l,p.LineType=9;var m=!1;if(null!=n){u=n*h;p.Message[0]=this.FormatValueString(u),m=!0}if(null!=o&&(0==this.ShareAfterVol||2==this.ShareAfterVol)){c=o*h;p.Message[1]=this.FormatValueString(c),m=!0}m&&s.push(p)}if(Te.IsNonEmptyArray(s))return{HorizontalInfo:s,IsBeforeData:f,IsAfterData:C}}return null},this.RightFrameSplitY=function(){if(this.Frame.RightFrame){var t=this.Frame.RightFrame;t.YSplitOperator&&t.YSplitOperator.Operator();for(var e=0;e<this.Frame.HorizontalInfo.length;++e){var a=this.Frame.HorizontalInfo[e],i=this.Frame.GetYFromData(a.Value),r=t.GetYData(i);a.Message[1]=Te.FormatValueString(r,this.FloatPrecision,this.LanguageID)}}},this.CustomCoordinate=function(){if(this.Frame.CustomHorizontalInfo=[],Te.IsNonEmptyArray(this.Custom))for(var t=0;t<this.Custom.length;++t){var e=this.Custom[t];e.Type==Se.PAGE_LAST_INDEX_VALUE_ID?this.CustomLatestIndexDataCoordinate(e):e.Type==Se.FIXED_VALUE_ID?this.CustomFixedCoordinate(e):e.Type==Se.PAGE_LAST_OVERLAY_INDEX_VALUE_ID&&this.CustomLatestOverlayIndexDataCoordinate(e)}},this.CustomFixedCoordinate=function(t){if(Te.IsNonEmptyArray(t.Data))for(var e=0;e<t.Data.length;++e){var a,i=t.Data[e],r=new Y;r.Type=1,r.TextColor=i.TextColor,r.LineColor=i.Color,r.LineType=2,Te.IsNumber(t.LineType)&&(r.LineType=t.LineType),0==t.IsShowLine&&(r.LineType=-1),r.Value=i.Value,a=i.Text?i.Text:r.Value.toFixed(2),"left"==t.Position?r.Message[0]=a:r.Message[1]=a,this.Frame.CustomHorizontalInfo.push(r)}}}function xe(){this.newMethod=Te,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.Period,this.Symbol,this.MinTextDistance=50*A(),this.MinBarDistance=5,this.SplitDateTime=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.DistanceWidth+this.Frame.DataWidth,e=this.Frame.Data.DataOffset,a=this.Frame.XPointCount,i=0,r=0,n=0,o=e;n<a&&o<this.Frame.Data.Data.length;++n,++o){i+=t,++r;var s=null;if(0==n)s={Value:o-e,Text:Te.FormatDateString(this.Frame.Data.Data[o].Date,"MM-DD")};else if(i>this.MinTextDistance&&r>=this.MinBarDistance){s={Value:o-e,Text:Te.FormatTimeString(this.Frame.Data.Data[o].Time)}}if(s){var h=new Y;h.Value=s.Value,this.ShowText&&(h.Message[0]=s.Text),0==h.Value&&(h.LineType=-1),this.Frame.VerticalInfo.push(h),i=0,r=0,0==n&&(i=-this.MinTextDistance/2)}}},this.SplitSecond=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.DistanceWidth+this.Frame.DataWidth,e=this.Frame.Data.DataOffset,a=this.Frame.XPointCount,i=0,r=0,n=0,o=e;n<a&&o<this.Frame.Data.Data.length;++n,++o){i+=t,++r;var s=null;if(0==n)s={Value:o-e,Text:Te.FormatDateString(this.Frame.Data.Data[o].Date,"MM-DD")};else if(i>this.MinTextDistance&&r>=this.MinBarDistance){s={Value:o-e,Text:Te.FormatTimeString(this.Frame.Data.Data[o].Time,"HH:MM:SS")}}if(s){var h=new Y;h.Value=s.Value,this.ShowText&&(h.Message[0]=s.Text),this.Frame.VerticalInfo.push(h),i=0,r=0,0==n&&(i=-this.MinTextDistance/2)}}},this.SplitDate=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.Data.DataOffset,e=this.Frame.XPointCount,a=null,i=null,r=0,n=0,o=t,s=12;n<e&&o<this.Frame.Data.Data.length;++n,++o){var h=parseInt(this.Frame.Data.Data[o].Date/1e4),l=parseInt(this.Frame.Data.Data[o].Date/100)%100;if(i!=l&&++r,s<12||null!=a&&a==h&&null!=i&&i==l)i=l,++s;else{var u,c=new Y;c.Value=o-t,null==a||a!=h?u=h.toString():null!=i&&i==l||(u=l.toString()+"月",u=na.GetText(u,this.LanguageID)),a=h,i=l,this.ShowText&&(c.Message[0]=u),0==c.Value&&(c.LineType=-1),this.Frame.VerticalInfo.push(c),s=0}}0==this.Period&&r<=2&&this.SplitShortDate()},this.SplitShortDate=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.Data.DataOffset,e=this.Frame.XPointCount,a=!0,i=0,r=t,n=12;i<e&&r<this.Frame.Data.Data.length;++i,++r){var o=parseInt(this.Frame.Data.Data[r].Date/1e4);if(n<12)++n;else{var s=new Y;s.Value=r-t,a?(u=o.toString(),a=!1):u=Te.FormatDateString(this.Frame.Data.Data[r].Date,"MM-DD"),this.ShowText&&(s.Message[0]=u),0==s.Value&&(s.LineType=-1),this.Frame.VerticalInfo.push(s),n=0}}if(1==this.Frame.VerticalInfo.length){var h=this.Frame.VerticalInfo[0],l=(r=h.Value+t,this.Frame.Data.Data[r]),u=Te.FormatDateString(l.Date,"YYYY-MM");this.ShowText&&(h.Message[0]=u)}},this.Operator=function(){if(null!=this.Frame.Data&&(xe.SplitCustom?xe.SplitCustom(this):pt.IsMinutePeriod(this.Period,!0)?this.SplitDateTime():pt.IsSecondPeriod(this.Period)?this.SplitSecond():pt.IsTickPeriod(this.Period)?this.SplitSecond():this.SplitDate(),this.GetEventCallback)){var t=this.GetEventCallback(w.ON_SPLIT_XCOORDINATE);if(t&&t.Callback){var e={ID:this.Frame.Identify,Frame:this.Frame};t.Callback(t,e,this)}}},this.CreateCoordinateInfo=function(){return new Y}}function we(){this.newMethod=Te,this.newMethod(),delete this.newMethod,this.High=null,this.Low=null,this.YClose,this.Data,this.SourceData,this.OverlayChartPaint,this.SplitCount=7,this.Symbol,this.SplitType=0,this.DefaultSplitType=0,this.LimitPrice,this.Custom,this.RightTextFormat=0,this.BeforeOpenData,this.IsBeforeData=!1,this.AfterCloseData,this.IsAfterData=!1,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.DayOffset,this.AverageData,this.DayCount=1,this.GlobalOption,this.HQChart,this.IsEnableDragY=function(){return!1},this.Operator=function(){if(this.Frame.HorizontalInfo=[],this.Frame.CustomHorizontalInfo=[],this.Data){var t=this.GetMaxMin();if(this.Symbol&&Ea.IsUSA(this.Symbol.toUpperCase())?this.USASplit(t):2==this.SplitType?this.USASplit(t):this.DefaultSplit(t),this.CustomCoordinate(),this.GetEventCallback){var e=this.GetEventCallback(w.ON_SPLIT_YCOORDINATE);if(e&&e.Callback){var a={ID:this.Frame.Identify,Frame:this.Frame};e.Callback(e,a,this)}}}},this.CustomCoordinate=function(){if(this.Custom){var t=Ga(this.Symbol);for(var e in this.Custom){var a=this.Custom[e];if(1==a.Type)this.CustomFixedCoordinate(a);else if(0==a.Type){var i=this.GetLatestPrice(t,a);i&&this.Frame.CustomHorizontalInfo.push(i)}}}},this.GetLatestPrice=function(t,e){if(!this.Data||!this.Data.Data)return null;if(this.Data.Data.length<=0)return null;var a=this.Data.Data[this.Data.Data.length-1];if(!Te.IsNumber(a)||!Te.IsNumber(this.YClose))return null;var i=new Y;i.Type=0,i.Value=a,i.TextColor=ia.FrameLatestPrice.TextColor,i.LineType=2;var r=a.toFixed(t);if("HH:MM"==e.DateTime){var n=this.Frame.Data.Data[this.Frame.Data.Data.length-1],o=[{Text:r},{Text:Te.FormatTimeString(n.Time,e.DateTime)}];"left"==e.Position?i.Message[0]=o:i.Message[1]=o}else"left"==e.Position?i.Message[0]=r:i.Message[1]=r;return a>this.YClose?i.LineColor=ia.FrameLatestPrice.UpBarColor:a<this.YClose?i.LineColor=ia.FrameLatestPrice.DownBarColor:i.LineColor=ia.FrameLatestPrice.UnchagneBarColor,Te.IsNumber(e.LineType)&&(i.LineType=e.LineType),Te.IsPlusNumber(e.LineWidth)&&(i.LineWidth=e.LineWidth),e.LineDash&&(i.LineDash=e.LineDash),0==e.IsShowLine&&(i.LineType=-1),1===e.PositionEx&&(i.ExtendData={Custom:{Position:1}}),i},this.CustomFixedCoordinate=function(t){for(var e=Ga(this.Symbol),a=0;a<t.Data.length;++a){var i,r=t.Data[a],n=new Y;if(n.Type=1,n.TextColor=r.TextColor,n.LineColor=r.Color,n.LineType=2,Te.IsNumber(t.LineType)&&(n.LineType=t.LineType),Te.IsPlusNumber(t.LineWidth)&&(n.LineWidth=t.LineWidth),t.LineDash&&(n.LineDash=t.LineDash),0==t.IsShowLine&&(n.LineType=-1),1===t.PositionEx&&(n.ExtendData={Custom:{Position:1}}),Te.IsNumber(r.Increase)){if(!Te.IsNumber(this.YClose))continue;n.Value=this.YClose*(1+r.Increase)}else n.Value=r.Value;i=r.Text?r.Text:n.Value.toFixed(e),"left"==t.Position?n.Message[0]=i:n.Message[1]=i,this.Frame.CustomHorizontalInfo.push(n)}},this.GetCallAuctionMaxMin=function(t,e){for(var a in t.Data){var i=t.Data[a];i&&(Te.IsNumber(i.Price)&&(null==e.Max&&(e.Max=i.Price),null==e.Min&&(e.Min=i.Price),e.Max<i.Price&&(e.Max=i.Price),e.Min>i.Price&&(e.Min=i.Price)),3==t.Ver&&Te.IsNumber(i.AvPrice)&&(null==e.Max&&(e.Max=i.AvPrice),null==e.Min&&(e.Min=i.AvPrice),e.Max<i.AvPrice&&(e.Max=i.AvPrice),e.Min>i.AvPrice&&(e.Min=i.AvPrice)))}},this.GetMultiDayBeforeOpenData=function(){if(!this.MultiDayBeforeOpenData||!Te.IsNonEmptyArray(this.MultiDayBeforeOpenData))return null;if(!this.DayOffset)return this.MultiDayBeforeOpenData;if(!Te.IsNumber(this.DayOffset.Offset)||!Te.IsNumber(this.DayOffset.ShowDayCount))return null;if(this.GlobalOption&&!0===this.GlobalOption.IsValueFullRange)return this.MultiDayBeforeOpenData;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset;return this.MultiDayBeforeOpenData.slice(e,e+t)},this.GetMultiDayAfterCloseData=function(){if(!this.MultiDayAfterCloseData||!Te.IsNonEmptyArray(this.MultiDayAfterCloseData))return null;if(!this.DayOffset)return this.MultiDayAfterCloseData;if(!Te.IsNumber(this.DayOffset.Offset)||!Te.IsNumber(this.DayOffset.ShowDayCount))return null;if(this.GlobalOption&&!0===this.GlobalOption.IsValueFullRange)return this.MultiDayAfterCloseData;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset;return this.MultiDayAfterCloseData.slice(e,e+t)},this.GetMaxMin=function(){var t=this.YClose,e=this.YClose,a=this.Data,i=!1;if(this.SourceData&&(a=this.SourceData,i=!0),this.DayCount>1){var r=this.DayOffset.DataOffset,n=this.DayOffset.ShowDataCount;this.GlobalOption&&!0===this.GlobalOption.IsValueFullRange&&(r=0,n=a.Data.length);for(var o=r,s=0;o<a.Data.length&&s<n;++o,++s){var h=null;if(i)h=(l=a.Data[o]).Before?l.Before.Close:l.Close;else h=a.Data[o];null!=h&&(t<h&&(t=h),e>h&&(e=h))}if(this.AverageData)for(o=r,s=0;o<this.AverageData.Data.length&&s<n;++o,++s)null!=this.AverageData.Data[o]&&(t<this.AverageData.Data[o]&&(t=this.AverageData.Data[o]),e>this.AverageData.Data[o]&&(e=this.AverageData.Data[o]))}else{for(o=0;o<a.Data.length;++o){h=null;if(i)h=(l=a.Data[o]).Before?l.Before.Close:l.Close;else h=a.Data[o];null!=h&&(t<h&&(t=h),e>h&&(e=h))}if(this.AverageData)for(o=0;o<this.AverageData.Data.length;++o)null!=this.AverageData.Data[o]&&(t<this.AverageData.Data[o]&&(t=this.AverageData.Data[o]),e>this.AverageData.Data[o]&&(e=this.AverageData.Data[o]))}for(var o in this.OverlayChartPaint){var l;(u=(l=this.OverlayChartPaint[o]).GetMaxMin()).Max&&u.Max>t&&(t=u.Max),u.Min&&u.Min<e&&(e=u.Min)}1==this.SplitType&&this.LimitPrice&&(t<this.LimitPrice.Max&&(t=this.LimitPrice.Max),e>this.LimitPrice.Min&&(e=this.LimitPrice.Min)),Te.IsNumber(this.High)&&Te.IsNumber(this.Low)&&(t<this.High&&(t=this.High),e>this.Low&&(e=this.Low));var u={Max:null,Min:null};this.IsAfterData&&this.AfterCloseData&&this.GetCallAuctionMaxMin(this.AfterCloseData,u),this.IsBeforeData&&this.BeforeOpenData&&this.GetCallAuctionMaxMin(this.BeforeOpenData,u);var c=this.GetMultiDayBeforeOpenData();if(c&&this.ChartBorder.MultiDayMinute.Count>1&&this.ChartBorder.MultiDayMinute.Left>0)for(o=0;o<c.length;++o){var f=c[o];this.GetCallAuctionMaxMin(f,u)}var d=this.GetMultiDayAfterCloseData();if(d&&this.ChartBorder.MultiDayMinute.Count>1&&this.ChartBorder.MultiDayMinute.Right>0)for(o=0;o<d.length;++o){f=d[o];this.GetCallAuctionMaxMin(f,u)}Te.IsNumber(u.Max)&&t<u.Max&&(t=u.Max),Te.IsNumber(u.Min)&&e>u.Min&&(e=u.Min);var C=this.GetOverlayMaxMin();return C&&(Te.IsNumber(C.Max)&&C.Max>t&&(t=C.Max),Te.IsNumber(C.Min)&&C.Min<e&&(e=C.Min)),{Max:t,Min:e}},this.GetOverlayMaxMin=function(){if(!this.HQChart)return null;if(!this.HQChart.Frame||!this.HQChart.Frame.SubFrame)return null;var t=this.HQChart.Frame.SubFrame[0];if(!t)return null;if(!Te.IsNonEmptyArray(t.OverlayIndex))return null;for(var e={Max:null,Min:null},a=0;a<t.OverlayIndex.length;++a){var i=t.OverlayIndex[a];if(i&&i.Frame){var r=i.Frame;if(1==r.IsShareY&&!1!==r.IsCalculateYMaxMin)for(var n=0;n<i.ChartPaint.length;++n){var o=i.ChartPaint[n].GetMaxMin();null!=o&&null!=o.Max&&null!=o.Min&&((null==e.Max||e.Max<o.Max)&&(e.Max=o.Max),(null==e.Min||e.Min>o.Min)&&(e.Min=o.Min))}}}return e},this.USASplit=function(t){var e=t.Max,a=t.Min;if(e==a)e+=.1*e,a-=.1*a;else{var i=5*A()*(e-a)/this.Frame.ChartBorder.GetHeight();e+=i,(a-=i)<0&&(a=t.Min)}var r=this.SplitCount,n=(e-a)/(r-1),o=[1,.1,.01,.001,1e-4],s=Ga(this.Symbol);n<o[s]&&(e=a+(n=o[s])*r);for(var h=0;h<r;++h){var l=a+n*h;if(!this.YClose||l!=this.YClose){(f=new Y).Value=l;var u=l.toFixed(s);if(this.IsShowLeftText&&(f.Message[0]=u),this.YClose){var c=100*(l/this.YClose-1);c>0?f.TextColor=ia.UpTextColor:c<0&&(f.TextColor=ia.DownTextColor),this.IsShowRightText&&(1==this.RightTextFormat?f.Message[1]=u:f.Message[1]=Te.FormatValueString(c,2)+"%")}this.Frame.HorizontalInfo.push(f)}}if(this.YClose>a&&this.YClose<e){var f;(f=new Y).Value=this.YClose,f.LineType=2,ia.FrameDotSplitPen&&(f.LineColor=ia.FrameDotSplitPen);u=this.YClose.toFixed(s);this.IsShowLeftText&&(f.Message[0]=u),this.IsShowRightText&&(1==this.RightTextFormat?f.Message[1]=u:f.Message[1]="0.00%"),this.Frame.HorizontalInfo.push(f)}this.Frame.HorizontalInfo.sort(function(t,e){return t.Value-e.Value}),this.Frame.HorizontalMax=e,this.Frame.HorizontalMin=a},this.DefaultSplit=function(t){var e=t.Max,a=t.Min;if(this.YClose==e&&this.YClose==a)e=this.YClose+.1*this.YClose,a=this.YClose-.1*this.YClose;else{var i=Math.max(Math.abs(this.YClose-e),Math.abs(this.YClose-a));e=this.YClose+i,(a=this.YClose-i)<0&&(a=t.Min)}var r=A(),n=this.Frame.ChartBorder.GetChartWidth()<450*r;D.Chart.Log("[FrameSplitMinutePriceY]max="+e+" min="+a+" isPhoneModel="+n);var o=this.SplitCount,s=(e-a)/(o-1),h=[1,.1,.01,.001,1e-4],l=Ga(this.Symbol);n&&Ea.IsSHSZIndex(this.Symbol)&&(l=0),s<h[l]&&(s=h[l],e=this.YClose+s*(o-1)/2,a=this.YClose-s*(o-1)/2);for(var u=0;u<o;++u){var c=a+s*u,f=new Y;this.Frame.HorizontalInfo[u]=f,f.Value=c;var d=c.toFixed(l);if(this.IsShowLeftText&&(f.Message[0]=d),c==this.YClose&&(f.LineType=2,ia.FrameDotSplitPen&&(f.LineColor=ia.FrameDotSplitPen)),this.YClose){var C=100*(c/this.YClose-1);C>0?f.TextColor=ia.UpTextColor:C<0&&(f.TextColor=ia.DownTextColor),this.IsShowRightText&&(1==this.RightTextFormat?f.Message[1]=d:f.Message[1]=Te.FormatValueString(C,2)+"%")}}this.Frame.HorizontalMax=e,this.Frame.HorizontalMin=a}}function Fe(){this.newMethod=Te,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.Symbol=null,this.DayCount=1,this.DateFormat=0,this.Operator=function(){this.Frame.VerticalInfo=[];this.Frame.XPointCount;var t=this.Frame.ChartBorder.GetWidth();!0===this.Frame.IsHScreen&&(t=this.Frame.ChartBorder.GetHeight()),t/=A();var e=Ma.GetCoordinateData(this.Symbol,t),a=e.Count,i=e.MiddleCount>0?e.MiddleCount:parseInt(a/2),r=e.Data;if(this.Frame.XPointCount=a*this.DayCount,this.Frame.MinuteCount=a,this.Frame.VerticalInfo=[],this.Frame.GlobalOption){var n=this.Frame.GlobalOption;Te.IsNumber(n.XDateFormat)&&(this.DateFormat=n.XDateFormat)}if(this.DayCount<=1){this.DayOffset.DataOffset=0,this.DayOffset.ShowDataCount=a,this.DayOffset.PageInfo=null;for(var o=0;o<r.length;++o){var s=new Y;n=r[o];ia.Minute.FrameSplitTextColor&&(s.TextColor=ia.Minute.FrameSplitTextColor),s.Value=n[0],this.ShowText&&(s.Message[0]=n[3]),n[4]&&(s.LineColor=n[4]),this.Frame.VerticalInfo[o]=s}}else{var h=0,l=this.DayData.length;this.DayOffset&&(Te.IsNumber(this.DayOffset.Offset)&&(h=this.DayOffset.Offset),Te.IsNumber(this.DayOffset.ShowDayCount)&&(l=this.DayOffset.ShowDayCount)),this.DayOffset.DataOffset=h*a,this.DayOffset.ShowDataCount=this.DayOffset.ShowDayCount*a,this.DayOffset.PageInfo={Day:[]};o=this.DayData.length-1-h;for(var u=0;o>=0&&u<l;--o,++u){(s=new Y).Value=u*a+i,s.LineType=-1,this.ShowText&&(s.Message[0]=this.FormatDate(this.DayData[o].Date),s.BG={Index:{Start:u*a+1,End:(u+1)*a-1},Date:this.DayData[o].Date}),this.Frame.VerticalInfo.push(s),(s=new Y).Value=(u+1)*a,this.Frame.VerticalInfo.push(s),this.DayOffset.PageInfo.Day.push({Date:this.DayData[o].Date,Index:o})}}if(this.GetEventCallback){var c=this.GetEventCallback(w.ON_SPLIT_XCOORDINATE);if(c&&c.Callback){var f={ID:this.Frame.Identify,Frame:this.Frame};c.Callback(c,f,this)}}},this.FormatDate=function(t){switch(this.DateFormat){case 1:return Te.FormatDateString(t,"MM/DD");case 2:return Te.FormatDateString(t,"MM/DD/W");default:return Te.FormatDateString(t,"MM-DD")}}}function Ee(){this.Frame,this.Value,this.Point,this.ClientPos,this.BeforOpeneData,this.AfterCloseData,this.X,this.Item,this.DataIndex,this.DayIndex,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.DayOffset,this.Operator=function(){return this.Item=null,this.DataIndex=null,this.DayIndex=null,2==this.ClientPos?this.GetBeforeOpenXIndex():3==this.ClientPos?this.GetAfterCloseXIndex():this.ClientPos>=200&&this.ClientPos<=299?this.GetMultiDayBeforeOpenXIndex():this.ClientPos>=300&&this.ClientPos<=399&&this.GetMultiDayAfterCloseXIndex()},this.GetBeforeOpenXIndex=function(){if(!Te.IsNumber(this.Value))return!1;if(!this.BeforeOpenData||!this.BeforeOpenData.Data)return!1;var t=this.Frame.GetLeftExtendXData(this.Value,this.BeforeOpenData);if((t=parseInt(t.toFixed(0)))>=0&&t<this.BeforeOpenData.Data.length){var e=this.BeforeOpenData.Data[t];if(Te.IsNumber(e.Price))return this.Item=e,this.X=this.Value,this.DataIndex=t,!0}t<0?t=0:t>=this.BeforeOpenData.Data.length&&(t=this.BeforeOpenData.Data.length-1);for(var a=-1,i=t;i>=0;--i){e=this.BeforeOpenData.Data[i];if(Te.IsNumber(e.Price)){a=i;break}}if(a<0)for(i=t+1;i<this.BeforeOpenData.Data.length;++i){e=this.BeforeOpenData.Data[i];if(Te.IsNumber(e.Price)){a=i;break}}return!(a<0)&&(this.Item=e,this.DataIndex=a,this.X=this.Frame.GetLeftExtendXFromIndex(a,this.BeforeOpenData),!0)},this.GetMultiDayBeforeOpenData=function(){if(!this.MultiDayBeforeOpenData||!Te.IsNonEmptyArray(this.MultiDayBeforeOpenData))return null;if(this.DayOffset||this.MultiDayBeforeOpenData,!Te.IsNumber(this.DayOffset.Offset)||!Te.IsNumber(this.DayOffset.ShowDayCount))return null;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset;return this.MultiDayBeforeOpenData.slice(e,e+t)},this.GetMultiDayBeforeOpenXIndex=function(){var t=this.GetMultiDayBeforeOpenData();if(!t||!Te.IsNonEmptyArray(t))return!1;if((r=this.ClientPos-200)<0||r>=t.length)return!1;var e=t[r],a=this.Frame.GetLeftExtendXData(this.Value,t);if(!a||!Te.IsNumber(a.DataIndex))return!1;var i=parseInt(a.DataIndex.toFixed(0)),r=a.DayIndex;if(i>=0&&i<e.Data.length){var n=e.Data[i];if(Te.IsNumber(n.Price))return this.Item=n,this.X=this.Value,this.DataIndex=i,this.DayIndex=r,!0}i<0?i=0:i>=e.Data.length&&(i=e.Data.length-1);for(var o=-1,s=i;s>=0;--s){if((n=e.Data[s])&&Te.IsNumber(n.Price)){o=s;break}}return!(o<0)&&(this.Item=n,this.DataIndex=o,this.DayIndex=r,this.X=this.Frame.GetLeftExtendXFromIndex(o,e),!0)},this.GetAfterCloseXIndex=function(){if(!Te.IsNumber(this.Value))return!1;if(!this.AfterCloseData||!this.AfterCloseData.Data)return!1;var t=this.Frame.GetRightExtendXData(this.Value,this.AfterCloseData);if((t=parseInt(t.toFixed(0)))>=0&&t<this.AfterCloseData.Data.length){var e=this.AfterCloseData.Data[t];if(Te.IsNumber(e.Price))return this.Item=e,this.X=this.Value,this.DataIndex=t,!0}t<0?t=0:t>=this.AfterCloseData.Data.length&&(t=this.AfterCloseData.Data.length-1);for(var a=-1,i=t;i>=0;--i){e=this.AfterCloseData.Data[i];if(Te.IsNumber(e.Price)){a=i;break}}if(a<0)for(i=t+1;i<this.AfterCloseData.Data.length;++i){e=this.AfterCloseData.Data[i];if(Te.IsNumber(e.Price)){a=i;break}}return!(a<0)&&(this.Item=e,this.DataIndex=a,this.X=this.Frame.GetRightExtendXFromIndex(a,this.AfterCloseData),!0)},this.GetMultiDayAfterCloseData=function(){if(!this.MultiDayAfterCloseData||!Te.IsNonEmptyArray(this.MultiDayAfterCloseData))return null;if(this.DayOffset||this.MultiDayAfterCloseData,!Te.IsNumber(this.DayOffset.Offset)||!Te.IsNumber(this.DayOffset.ShowDayCount))return null;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset;return this.MultiDayAfterCloseData.slice(e,e+t)},this.GetMultiDayAfterCloseXIndex=function(){var t=this.GetMultiDayAfterCloseData();if(t&&Te.IsNonEmptyArray(t)&&!((r=this.ClientPos-300)<0||r>=t.length)){var e=t[r],a=this.Frame.GetRightExtendXData(this.Value,t);if(a){var i=parseInt(a.DataIndex.toFixed(0)),r=a.DayIndex;if(i>=0&&i<e.Data.length){var n=e.Data[i];if(Te.IsNumber(n.Price))return this.Item=n,this.X=this.Value,this.DataIndex=i,this.DayIndex=r,!0}i<0?i=0:i>=e.Data.length&&(i=e.Data.length-1);for(var o=-1,s=i;s>=0;--s){if((n=e.Data[s])&&Te.IsNumber(n.Price)){o=s;break}}return!(o<0)&&(this.Item=n,this.DataIndex=o,this.DayIndex=r,this.X=this.Frame.GetRightExtendXFromIndex(o,e),!0)}}}}function be(){this.ClassName="ChartCorssCursor",this.Frame,this.Canvas,this.HPenColor=ia.CorssCursorHPenColor,this.HPenType=0,this.VPenColor=ia.CorssCursorVPenColor,this.VPenType=0,this.VLineType=0,this.Font=ia.CorssCursorTextFont,this.TextColor=ia.CorssCursorTextColor,this.TextBGColor=ia.CorssCursorBGColor,this.BorderColor=ia.CorssCursorBorderColor,this.XRangeBGColor=ia.CorssCursorXRangeBGColor,this.TextHeight=20,this.LastPoint,this.CursorIndex,this.IsOnlyDrawKLine=!1,this.IsOnlyDrawMinute=!1,this.IsFixXLastTime=!1,this.IsDrawXRangeBG=!1,this.PointX,this.PointY,this.StringFormatX,this.StringFormatY,this.ShowTextMode={Left:1,Right:1,Bottom:1},this.TextFormat={Right:0},this.IsShowCorss=!0,this.IsShow=!0,this.IsShowClose=!1,this.ClientPos=-1,this.CallAcutionXOperator,this.RightButton={Enable:!1,Rect:null,BGColor:ia.CorssCursor.RightButton.BGColor,PenColor:ia.CorssCursor.RightButton.PenColor,Icon:ia.CorssCursor.RightButton.Icon},this.Close=null,this.Status=0,this.ReloadResource=function(t){this.Font=ia.CorssCursorTextFont,this.HPenColor=ia.CorssCursorHPenColor,this.VPenColor=ia.CorssCursorVPenColor,this.TextColor=ia.CorssCursorTextColor,this.TextBGColor=ia.CorssCursorBGColor,this.BorderColor=ia.CorssCursorBorderColor,this.XRangeBGColor=ia.CorssCursorXRangeBGColor},this.GetCloseYPoint=function(t){if(!this.StringFormatX.Data)return null;var e=this.StringFormatX.Data;if(!e.Data||e.Data.length<=0)return null;var a=e.DataOffset+t;if(a>=e.Data.length&&(a=e.Data.length-1),a<0)return null;var i=e.Data[a];return i?(this.Close=i.Close,this.Frame.GetYFromData(this.Close)):null},this.GetMinuteCloseYPoint=function(t){if(!Te.IsNumber(t))return null;if(t=parseInt(t),!this.StringFormatX.Data)return null;var e=this.StringFormatX.Data;if(!e.Data||e.Data.length<=0)return null;var a=e.DataOffset+t;if(a>=e.Data.length&&(a=e.Data.length-1),a<0)return null;var i=e.Data[a];return Te.IsNumber(t)?(this.Close=i,this.Frame.GetYFromData(this.Close)):null},this.GetDateTimeRange=function(t,e){if(!Te.IsNumber(t))return null;t=parseInt(t);var a=this.StringFormatX.Data;if(!a.Data||a.Data.length<=0)return null;var i=a.DataOffset+t;if(i>=a.Data.length||i<0)return null;if(!this.Frame||!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return null;var r=this.Frame.SubFrame[0].Frame,n=r.DataWidth,o=r.DistanceWidth,s=r.XPointCount,h=a.Data[i];if(!h)return null;for(var l=1e6*h.Date,u=100*parseInt(h.Time/100),c=l+u,f=l+u+59,d=i,C=i;C<a.Data.length;++C){if(1e6*(m=a.Data[C]).Date+m.Time>f)break;if(C-a.DataOffset>=s)break;d=C}var p=i;for(C=i;C>=0&&C>=a.DataOffset;--C){var m;if(1e6*(m=a.Data[C]).Date+m.Time<c)break;p=C}var D={StartIndex:p,EndIndex:d};return D.XStart=this.Frame.GetXFromIndex(p-a.DataOffset),D.XEnd=this.Frame.GetXFromIndex(d-a.DataOffset),D.XStart-=(o+n)/2,D.XEnd+=(o+n)/2,D},this.FixMinuteLastTimeXPoint=function(t){if(!Te.IsNumber(t))return null;if(t=parseInt(t),!this.StringFormatX.Data)return null;var e=this.StringFormatX.Data;if(!e.Data||e.Data.length<=0)return null;var a=e.DataOffset+t;return a<e.Data.length?null:(a=e.Data.length-1,a-=e.DataOffset,{X:this.Frame.GetXFromIndex(a),Index:a})},this.PtInClient=function(t,e){if(this.Canvas.beginPath(),!0===this.Frame.IsHScreen){var a=this.Frame.ChartBorder.GetHScreenBorder();this.Canvas.rect(a.Left,a.TopEx,a.Right-a.Left,a.BottomEx-a.TopEx)}else{a=this.Frame.ChartBorder.GetBorder();this.Canvas.rect(a.LeftEx,a.Top,a.RightEx-a.LeftEx,a.Bottom-a.Top)}return this.Canvas.isPointInPath(t,e)?1:this.Frame.ChartBorder.LeftExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.Top,a.Right-a.Left,a.TopEx-a.Top):this.Canvas.rect(a.Left,a.Top,a.LeftEx-a.Left,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?2:this.Frame.ChartBorder.RightExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.BottomEx,a.Right-a.Left,a.Bottom-a.BottomEx):this.Canvas.rect(a.RightEx,a.Top,a.Right-a.RightEx,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?3:-1},this.GetFontHeight=function(t){return O(this.Canvas,t,"擎")},this.Draw=function(){if(this.Status=0,this.RightButton.Rect=null,this.LastPoint){this.Close=null;var t=this.LastPoint.X,e=this.LastPoint.Y,a=this.PtInClient(t,e);if(this.PointY=null,this.PointY,this.ClientPos=a,!(a<=0))if(!0!==this.Frame.IsHScreen){var i=this.Frame.ChartBorder.GetBorder(),r=i.Left,n=i.Right,o=i.TopTitle,s=i.Bottom,h=this.Frame.ChartBorder.Right,l=i.ChartWidth;if(this.IsOnlyDrawKLine){if(t=this.Frame.GetXFromIndex(this.CursorIndex),this.IsShowClose)null!=(u=this.GetCloseYPoint(this.CursorIndex))&&(e=u)}else if(this.IsOnlyDrawMinute){var u;null!=(u=this.GetMinuteCloseYPoint(this.CursorIndex))&&(e=u)}if(this.CallAcutionXOperator&&(this.CallAcutionXOperator.Value=t,this.CallAcutionXOperator.Point={X:t,Y:e},this.CallAcutionXOperator.ClientPos=a,this.CallAcutionXOperator.Operator()&&(t=this.CallAcutionXOperator.X)),this.IsFixXLastTime)(B=this.FixMinuteLastTimeXPoint(this.CursorIndex))&&(t=B.X,this.CursorIndex=B.Index);if(this.PointY=[[r,e],[n,e]],this.PointX=[[t,o],[t,s]],this.IsShowCorss){var c=null;this.IsDrawXRangeBG&&(c=this.GetDateTimeRange(this.CursorIndex));var f=A();if(1!=this.HPenType&&0!=this.HPenType||(this.Canvas.strokeStyle=this.HPenColor,0==this.HPenType&&this.Canvas.setLineDash([3*f,2*f]),this.Canvas.beginPath(),this.Canvas.moveTo(r,_(e)),this.Canvas.lineTo(n,_(e)),this.Canvas.stroke(),0==this.HPenType&&this.Canvas.setLineDash([])),this.Canvas.save(),this.Canvas.strokeStyle=this.VPenColor,0==this.VPenType)this.Canvas.setLineDash([3*f,2*f]);else if(2==this.VPenType){var d=this.Frame.SubFrame[0].Frame.DataWidth;d>2*f&&(this.Canvas.lineWidth=d)}if(this.Canvas.beginPath(),1==this.VLineType)c&&(this.Canvas.fillStyle=this.XRangeBGColor,this.Canvas.fillRect(c.XStart,i.Top,c.XEnd-c.XStart,i.Bottom-i.Top)),this.Canvas.moveTo(_(t),i.Top),this.Canvas.lineTo(_(t),i.Bottom);else if(this.Frame.SubFrame.length>0)for(var C in this.Frame.SubFrame){var p=(G=this.Frame.SubFrame[C].Frame).ChartBorder.GetBorder();o=p.TopTitle,s=p.Bottom,c&&(this.Canvas.fillStyle=this.XRangeBGColor,this.Canvas.fillRect(c.XStart,o,c.XEnd-c.XStart,s-o)),this.Canvas.moveTo(_(t),o),this.Canvas.lineTo(_(t),s)}else this.Canvas.moveTo(_(t),o),this.Canvas.lineTo(_(t),s);this.Canvas.stroke(),this.Canvas.restore()}this.Frame.GetXData(t);var m={},D=this.Frame.GetYData(e,m);(this.IsOnlyDrawMinute||this.IsShowClose)&&null!=this.Close&&(D=this.Close),this.StringFormatX.Value=this.CursorIndex,this.StringFormatX.Point={X:t,Y:e},this.StringFormatX.ClientPos=a,this.StringFormatY.Value=D,this.StringFormatY.RValue=m.RightYValue,this.StringFormatY.FrameID=m.FrameID,this.StringFormatY.Point={X:t,Y:e},this.StringFormatY.ClientPos=a,this.Canvas.font=this.Font;var v=this.GetFontHeight();if(v>this.TextHeight&&(this.TextHeight=v),(1==this.ShowTextMode.Left&&this.Frame.ChartBorder.Left>=30||2==this.ShowTextMode.Left||1==this.ShowTextMode.Right&&this.Frame.ChartBorder.Right>=30||2==this.ShowTextMode.Right)&&this.StringFormatY.Operator()){var g=this.StringFormatY.Text;this.Canvas.font=this.Font;var S=this.Canvas.measureText(g).width+4,T={Y:e,YValue:D,FrameID:m.FrameID};if(this.Frame.ChartBorder.Left>=30&&1==this.ShowTextMode.Left?r<S?(this.DrawTextBGRect(_(2),_(e-this.TextHeight/2),k(S),k(this.TextHeight)),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(g,4,e,S)):(this.DrawTextBGRect(r-2,e-this.TextHeight/2,-S,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(g,r-4,e,S)):2==this.ShowTextMode.Left&&(this.DrawTextBGRect(r,e-this.TextHeight/2,S,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(g,r+2,e,S)),this.StringFormatY.PercentageText&&0==this.TextFormat.Right&&(g=this.StringFormatY.PercentageText+"%",S=this.Canvas.measureText(g).width+4),this.StringFormatY.RText){g=this.StringFormatY.RText;S=this.Canvas.measureText(g).width+4}var I=null;if(this.StringFormatY.RComplexText&&Te.IsNonEmptyArray(this.StringFormatY.RComplexText.Text)){S=0;I=this.StringFormatY.RComplexText;for(C=0;C<I.Text.length;++C){var y=I.Text[C],x=this.Canvas.measureText(y.Text).width+4;C>0&&Te.IsNumber(I.Space)&&(S+=I.Space),S+=x}}if(this.Frame.ChartBorder.Right>=30&&1==this.ShowTextMode.Right){var w=!1,F=null;if(m.FrameID>=0)w=(G=this.Frame.SubFrame[m.FrameID]).OverlayIndex.length>0,F=G.Interval;if(w&&S>F){var E=n+F;E>l&&(E=l);var b=E-2-S;this.DrawTextBGRect(b,e-this.TextHeight/2,S,this.TextHeight),I?this.DrawComplexText(b,e,I):(this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(g,E-4,e,S))}else if(h<S){b=l-2-S;this.DrawTextBGRect(b,e-this.TextHeight/2,S,this.TextHeight),I?this.DrawComplexText(b,e,I):(this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(g,l-4,e,S)),this.RightButton.Enable&&this.DrawRightButton(e-this.TextHeight/2,l-2-S,this.TextHeight,this.TextHeight,T)}else{b=n+2;this.DrawTextBGRect(b,e-this.TextHeight/2,S,this.TextHeight),I?this.DrawComplexText(b,e,I):(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(g,n+4,e,S)),this.RightButton.Enable&&this.DrawRightButton(e-this.TextHeight/2,n+2,this.TextHeight,this.TextHeight,T)}if(this.StringFormatY.RExtendText&&this.StringFormatY.RExtendText.length>0){var L=0;for(var C in this.StringFormatY.RExtendText){var M="--.--";(y=this.StringFormatY.RExtendText[C]).YText?M=y.YText:Te.IsNumber(y.Y)&&(M=y.Y.toFixed(0));var O=this.Canvas.measureText(M).width+4;h<O?(this.DrawTextBGRect(l-2-O,e+L+this.TextHeight/2,O,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=y.TextColor,this.Canvas.fillText(M,l-4,e+L+this.TextHeight,O)):(this.DrawTextBGRect(n+2,e+L+this.TextHeight/2,O,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=y.TextColor,this.Canvas.fillText(M,n+4,e+L+this.TextHeight,O)),L+=this.TextHeight}}}else if(2==this.ShowTextMode.Right){this.Canvas.fillStyle=this.TextBGColor;var N=n-S;this.DrawTextBGRect(N,e-this.TextHeight/2,S,this.TextHeight),I?this.DrawComplexText(N,e,I):(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(g,N+2,e,S)),this.RightButton.Enable&&this.DrawRightButton(e-this.TextHeight/2,N,this.TextHeight,this.TextHeight,T)}}if((1==this.ShowTextMode.Bottom||2==this.ShowTextMode.Bottom||10==this.ShowTextMode.Bottom)&&this.StringFormatX.Operator()){g=this.StringFormatX.Text;this.Canvas.font=this.Font,this.Canvas.fillStyle=this.TextBGColor;S=this.Canvas.measureText(g).width+4;var P=s+2+this.TextHeight/2,R=s+2;if(2==this.ShowTextMode.Bottom)P=s-this.TextHeight/2-2,R=s-this.TextHeight-2;else if(10==this.ShowTextMode.Bottom){if((G=this.Frame.SubFrame[0].Frame).GetCorssCursorTop){var B=G.GetCorssCursorTop();Te.IsNumber(B)&&(P=B+this.TextHeight/2,R=B)}}t-S/2<3?(this.DrawTextBGRect(t-1,R,S,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(g,t+1,P,S)):t+S/2>=n?(this.DrawTextBGRect(n-S,R,S,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(g,n-2,P,S)):(this.DrawTextBGRect(t-S/2,R,S,this.TextHeight),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(g,t,P,S))}if(m.FrameID>=0){var G=this.Frame.SubFrame[m.FrameID],V=!1;this.Frame.AutoRightBorder&&(V=!0);var H=n;for(var C in V&&(H=n+this.Frame.AuotRightWidth),this.Canvas.font=this.Font,G.OverlayIndex){if(!1!==(y=G.OverlayIndex[C]).Frame.IsShow){if(V||(H+=G.Interval),H+30>l)break;for(D=y.Frame.GetYData(e),C=2;C>=0;--C){g=Te.FormatValueString(D,C);if((S=this.Canvas.measureText(g).width+4)<G.Interval)break}this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(H+2,e-this.TextHeight/2,S,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(g,H+4,e,S),V&&(H+=y.RightWidth.Width)}}}this.Status=1}else this.HScreenDraw()}},this.DrawComplexText=function(t,e,a){this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";for(var i=t+2,r=0;r<a.Text.length;++r){var n=a.Text[r],o=this.Canvas.measureText(n.Text).width+4;n.Color?this.Canvas.fillStyle=n.Color:is.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(n.Text,i,e,o),r>0&&Te.IsNumber(a.Space)&&(i+=a.Space),i+=o}},this.DrawRightButton=function(t,e,a,i,r){this.Canvas.fillStyle=this.RightButton.BGColor;var n={Left:e-a,Top:t,Width:a,Height:i};this.RightButton.Rect=n,this.RightButton.Data=r,this.Canvas.fillRect(_(n.Left+1),_(n.Top),k(n.Width),k(n.Height));var o=A(),s=n.Top+3+(n.Height-6)/2,h=n.Left+3+(n.Width-6)/2;if(this.RightButton.Icon){var l=this.RightButton.Icon;this.Canvas.font=l.Size*o+"px "+l.Family,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=l.Color,this.Canvas.fillText("",h,s)}else{this.Canvas.strokeStyle=this.RightButton.PenColor;var u=n.Left+3,c=n.Top+3;this.Canvas.save(),this.Canvas.linewidth=1*o,this.Canvas.beginPath(),this.Canvas.moveTo(_(u),_(s)),this.Canvas.lineTo(_(u+n.Width-6),_(s)),this.Canvas.moveTo(_(h),_(c)),this.Canvas.lineTo(_(h),_(c+n.Height-6)),this.Canvas.stroke(),this.Canvas.restore()}},this.PtInButton=function(t,e){if(!this.RightButton.Enable)return null;if(!this.RightButton.Rect)return null;var a=this.RightButton.Rect;return this.Canvas.beginPath(),this.Canvas.rect(a.Left,a.Top,a.Width,a.Height),this.Canvas.isPointInPath(t,e)?{Data:this.RightButton.Data,Rect:a}:void 0},this.DrawTextBGRect=function(t,e,a,i){this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(_(t),_(e),k(a),k(i)),this.BorderColor&&(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(_(t),_(e),k(a),k(i)))},this.HScreenDraw=function(){var t=this.LastPoint.X,e=this.LastPoint.Y;this.IsOnlyDrawKLine&&(e=this.Frame.GetXFromIndex(this.CursorIndex));var a=this.Frame.ChartBorder.GetHScreenBorder(),i=a.Left,r=a.Right,n=a.Top,o=a.Bottom,s=this.Frame.ChartBorder.Bottom;if(this.CallAcutionXOperator&&(this.CallAcutionXOperator.Value=e,this.CallAcutionXOperator.Point={X:t,Y:e},this.CallAcutionXOperator.ClientPos=this.ClientPos,this.CallAcutionXOperator.Operator()&&(e=this.CallAcutionXOperator.X)),this.PointY=[[i,e],[r,e]],this.PointX=[[t,n],[t,o]],this.IsShowCorss){var h=A();if(this.Canvas.save(),this.Canvas.strokeStyle=this.HPenColor,0==this.HPenType&&this.Canvas.setLineDash([3*h,2*h]),this.Canvas.beginPath(),this.Canvas.moveTo(_(t),n),this.Canvas.lineTo(_(t),o),this.Canvas.stroke(),this.Canvas.restore(),this.Canvas.save(),this.Canvas.strokeStyle=this.VPenColor,0==this.VPenType)this.Canvas.setLineDash([3*h,2*h]);else if(2==this.VPenType){var l=this.Frame.SubFrame[0].Frame.DataWidth;l>2*h&&(this.Canvas.lineWidth=l)}if(this.Canvas.beginPath(),1==this.VLineType)this.Canvas.moveTo(i,_(e)),this.Canvas.lineTo(r,_(e));else if(this.Frame.SubFrame.length>0)for(var u in this.Frame.SubFrame){var c=(w=this.Frame.SubFrame[u].Frame).ChartBorder.GetHScreenBorder();this.Canvas.moveTo(c.Left,_(e)),this.Canvas.lineTo(c.RightEx,_(e))}else this.Canvas.moveTo(i,_(e)),this.Canvas.lineTo(r,_(e));this.Canvas.stroke(),this.Canvas.restore()}var f=this.Frame.GetXData(e),d={},C=this.Frame.GetYData(t,d);this.StringFormatX.Value=f,this.StringFormatX.Point={X:t,Y:e},this.StringFormatX.ClientPos=this.ClientPos,this.StringFormatY.Value=C,this.StringFormatY.FrameID=d.FrameID,this.StringFormatY.Point={X:t,Y:e},this.StringFormatY.ClientPos=this.ClientPos,this.Canvas.font=this.Font;var p=this.GetFontHeight();if(p>this.TextHeight&&(this.TextHeight=p),(1==this.ShowTextMode.Left&&this.Frame.ChartBorder.Top>=30||2==this.ShowTextMode.Left||1==this.ShowTextMode.Right&&this.Frame.ChartBorder.Bottom>=30||2==this.ShowTextMode.Right)&&this.StringFormatY.Operator()){var m=this.StringFormatY.Text;this.Canvas.font=this.Font;var D=this.Canvas.measureText(m).width+4;if(this.Frame.ChartBorder.Top>=30&&1==this.ShowTextMode.Left){var v=t,g=n;this.Canvas.save(),this.Canvas.translate(v,g),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,n>=D?(this.Canvas.fillRect(0,-this.TextHeight/2,-D,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(m,-2,0,D)):(this.Canvas.fillRect(D-n,-this.TextHeight/2,-D,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(m,D-n-2,0,D)),this.Canvas.restore()}else if(2==this.ShowTextMode.Left){v=t,g=n;this.Canvas.save(),this.Canvas.translate(v,g),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(0,-this.TextHeight/2,D,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(m,2,0,D),this.Canvas.restore()}if(this.StringFormatY.RText){m=this.StringFormatY.RText;D=this.Canvas.measureText(m).width+4}if(this.Frame.ChartBorder.Bottom>=30&&1==this.ShowTextMode.Right){v=t,g=o;if(this.Canvas.save(),this.Canvas.translate(v,g),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,s>D?(this.Canvas.fillRect(0,-this.TextHeight/2,D,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(m,2,0,D)):(this.Canvas.fillRect(s-D,-this.TextHeight/2,D,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(m,s-D+2,0,D)),this.StringFormatY.RExtendText&&this.StringFormatY.RExtendText.length>0){var S=0;for(var u in this.StringFormatY.RExtendText){var T=this.StringFormatY.RExtendText[u],I="--.--";T.YText?I=T.YText:Te.IsNumber(T.Y)&&(I=T.Y.toFixed(0));var y=this.Canvas.measureText(I).width+4;if(this.Canvas.fillStyle=T.TextBGColor,s>y)this.Canvas.fillRect(0,S+this.TextHeight/2,y,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=T.TextColor,this.Canvas.fillText(I,2,S+this.TextHeight,y);else{var x=s-y;this.Canvas.fillRect(x,S+this.TextHeight/2,y,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=T.TextColor,this.Canvas.fillText(I,x+2,S+this.TextHeight,y)}S+=this.TextHeight}}this.Canvas.restore()}else if(2==this.ShowTextMode.Right){v=t,g=o;this.Canvas.save(),this.Canvas.translate(v,g),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(0,-this.TextHeight/2,-D,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(m,-2,0,D),this.Canvas.restore()}}if((1===this.ShowTextMode.Bottom||10==this.ShowTextMode.Bottom)&&this.StringFormatX.Operator()){m=this.StringFormatX.Text;this.Canvas.font=this.Font,this.Canvas.fillStyle=this.TextBGColor;var w;D=this.Canvas.measureText(m).width+4,v=i;if(10==this.ShowTextMode.Bottom)if((w=this.Frame.SubFrame[0].Frame).GetCorssCursorTop){var F=w.GetCorssCursorTop();Te.IsNumber(F)&&(v=F)}if(e-D/2<3){g=e;this.Canvas.save(),this.Canvas.translate(v,g),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillRect(0,0,D,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(m,2,this.TextHeight/2,D),this.Canvas.restore()}else if(e+D/2>=o){g=e;this.Canvas.save(),this.Canvas.translate(v,g),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillRect(-D,0,D,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(m,-2,this.TextHeight/2,D),this.Canvas.restore()}else{g=e;this.Canvas.save(),this.Canvas.translate(v,g),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillRect(-D/2,0,D,this.TextHeight),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(m,0,this.TextHeight/2,D),this.Canvas.restore()}}this.Status=1}}function Le(){this.Frame,this.Canvas,this.Font=ia.DefaultTextFont,this.TextColor=ia.DefaultTextColor,this.IsEnableSplash=!1,this.SplashTitle="数据加载中",this.HQChart,this.Position=0,this.EnableSplash=function(t){if(this.IsEnableSplash=t,this.HQChart){var e=this.HQChart.GetEventCallback(w.ON_ENABLE_SPLASH_DRAW);if(e){var a={Enable:t};e.Callback(e,a,this)}}},this.SetTitle=function(t){this.SplashTitle=t},this.Draw=function(){if(this.IsEnableSplash)if(!0!==this.Frame.IsHScreen){var t=null,e=null;if(1==this.Position&&this.HQChart.Frame&&this.HQChart.Frame.SubFrame&&this.HQChart.Frame.SubFrame[0]){var a=this.HQChart.Frame.SubFrame[0].Frame;a&&(t=(a.ChartBorder.GetLeft()+a.ChartBorder.GetRight())/2,e=(a.ChartBorder.GetTop()+a.ChartBorder.GetBottom())/2)}if(!Te.IsNumber(t)||!Te.IsNumber(e))t=(this.Frame.ChartBorder.GetLeft()+this.Frame.ChartBorder.GetRight())/2,e=(this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.GetBottom())/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.SplashTitle,t,e)}else this.HScreenDraw()},this.HScreenDraw=function(){var t=(this.Frame.ChartBorder.GetLeft()+this.Frame.ChartBorder.GetRight())/2,e=(this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.GetBottom())/2;this.Canvas.save(),this.Canvas.translate(t,e),this.Canvas.rotate(90*Math.PI/180),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.SplashTitle,0,0),this.Canvas.restore()}}function Me(){this.Data,this.Value,this.Text,this.Operator=function(){return!1},this.GetMultiDayBeforeOpenData=function(){if(!this.MultiDayBeforeOpenData||!Te.IsNonEmptyArray(this.MultiDayBeforeOpenData))return null;if(this.DayOffset||this.MultiDayBeforeOpenData,!Te.IsNumber(this.DayOffset.Offset)||!Te.IsNumber(this.DayOffset.ShowDayCount))return null;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset;return this.MultiDayBeforeOpenData.slice(e,e+t)},this.GetMultiDayAfterCloseData=function(){if(!this.MultiDayAfterCloseData||!Te.IsNonEmptyArray(this.MultiDayAfterCloseData))return null;if(this.DayOffset||this.MultiDayAfterCloseData,!Te.IsNumber(this.DayOffset.Offset)||!Te.IsNumber(this.DayOffset.ShowDayCount))return null;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset;return this.MultiDayAfterCloseData.slice(e,e+t)}}Te.FormatValueThousandsString=function(t,e){if(null==t||isNaN(t)){if(e>0){for(var a="-.",i=0;i<e;++i)a+="-";return a}return"--"}var r="",n=t.toFixed(e);if(e>0){for(var o=n.split(".")[1],s=n.split(".")[0];s.length>3;)r=","+s.slice(-3)+r,s=s.slice(0,s.length-3);s&&(r=s+r+"."+o)}else{for(;n.length>3;)r=","+n.slice(-3)+r,n=n.slice(0,n.length-3);n&&(r=n+r)}return r},Te.FormatValueString=function(t,e,a){if(null==t||isNaN(t)){if(e>0){for(var i="-.",r=0;r<e;++r)i+="-";return i}return"--"}if(t<1e-11&&t>-1e-11)return"0";var n=Math.abs(t);return a===ra.LANGUAGE_ENGLISH_ID?n<1e4?t.toFixed(e):n<1e6?(t/1e3).toFixed(e)+"K":n<1e9?(t/1e6).toFixed(e)+"M":n<1e12?(t/1e9).toFixed(e)+"B":(t/1e12).toFixed(e)+"T":a===ra.LANGUAGE_TRADITIONAL_CHINESE_ID?n<1e4?t.toFixed(e):n<1e8?(t/1e4).toFixed(e)+"萬":n<1e12?(t/1e8).toFixed(e)+"億":(t/1e12).toFixed(e)+"萬億":n<1e4?t.toFixed(e):n<1e6?(t/1e4).toFixed(e)+"万":n<1e8?(t/1e4).toFixed(e)+"万":n<1e12?(t/1e8).toFixed(e)+"亿":(t/1e12).toFixed(e)+"万亿"},Te.FormatVolString=function(t,e){var a=Math.abs(t);return a<1e5?a.toFixed(0):a<1e7?(t/1e4).toFixed(1)+"万":a<1e8?(t/1e4).toFixed(0)+"万":a<1e9?(t/1e8).toFixed(2)+"亿":a<1e12?(t/1e8).toFixed(1)+"亿":(t/1e12).toFixed(1)+"万亿"},Te.FromatIntegerString=function(t,e,a){return t<1e4&&Te.IsInteger(t)&&(e=0),Te.FormatValueString(t,e,a)},Te.NumberToString=function(t){return t<10?"0"+t.toString():t.toString()},Te.MillisecondToString=function(t){return t<10?"00"+t.toString():t<100?"0"+t.toString():t.toString()},Te.FormatDateString=function(t,e,a){var i=parseInt(t/1e4),r=parseInt(t/100)%100,n=t%100;switch(e){case"MM-DD":return Te.NumberToString(r)+"-"+Te.NumberToString(n);case"MM/DD":return Te.NumberToString(r)+"/"+Te.NumberToString(n);case"MM/DD/W":var o=new Date(i,r-1,n),s=na.GetText(Re[o.getDay()],a);return Te.NumberToString(r)+"/"+Te.NumberToString(n)+"/"+s;case"YYYY-MM":return i+"-"+Te.NumberToString(r);case"YYYY/MM/DD":return i.toString()+"/"+Te.NumberToString(r)+"/"+Te.NumberToString(n);case"YYYY/MM/DD/W":o=new Date(i,r-1,n),s=na.GetText(Re[o.getDay()],a);return i.toString()+"/"+Te.NumberToString(r)+"/"+Te.NumberToString(n)+"/"+s.toString();case"DD/MM/YYYY":return Te.NumberToString(n)+"/"+Te.NumberToString(r)+"/"+i.toString();default:return i.toString()+"-"+Te.NumberToString(r)+"-"+Te.NumberToString(n)}},Te.FormatTimeString=function(t,e){if("HH:MM:SS"==e){var a=parseInt(t/1e4),i=parseInt(t%1e4/100),r=t%100;return Te.NumberToString(a)+":"+Te.NumberToString(i)+":"+Te.NumberToString(r)}if("hh:mm"==e){a=parseInt(t/1e4),i=parseInt(t%1e4/100),r=t%100;return Te.NumberToString(a)+":"+Te.NumberToString(i)}if("HH:MM"==e){a=parseInt(t/100),i=t%100;return Te.NumberToString(a)+":"+Te.NumberToString(i)}if("HH:MM:SS.fff"==e){var n=t%1e3,o=parseInt(t/1e3);a=parseInt(o/1e4),i=parseInt(o%1e4/100),r=o%100;return Te.NumberToString(a)+":"+Te.NumberToString(i)+":"+Te.NumberToString(r)+"."+Te.MillisecondToString(n)}if(t<1e4){a=parseInt(t/100),i=t%100;return Te.NumberToString(a)+":"+Te.NumberToString(i)}a=parseInt(t/1e4),i=parseInt(t%1e4/100),r=t%100;return Te.NumberToString(a)+":"+Te.NumberToString(i)+":"+Te.NumberToString(r)},Te.FormatReportDateString=function(t){var e,a=parseInt(t/1e4);switch(parseInt(t/100)%100){case 3:e="一季度报";break;case 6:e="半年报";break;case 9:e="三季度报";break;case 12:e="年报"}return a.toString()+e},Te.FormatDateTimeString=function(t,e,a){var i=t.split(" ");if(i.length<2)return"";var r="";if(e){var n=parseInt(i[0]),o=parseInt(n/1e4),s=parseInt(n%1e4/100),h=n%100;r+=f=o.toString()+"-"+(s<10?"0"+s.toString():s.toString())+"-"+(h<10?"0"+h.toString():h.toString())}if(a){var l=parseInt(i[1]);if(l<1e4){var u=l%100,c=parseInt(l/100),f=Te.NumberToString(c)+":"+Te.NumberToString(u);r.length>0&&(r+=" "),r+=f}else{c=parseInt(l/1e4),u=parseInt(l%1e4/100);var d=l%100;f=Te.NumberToString(c)+":"+Te.NumberToString(u)+":"+Te.NumberToString(d);r.length>0&&(r+=" "),r+=f}}return r},Te.FormatValueColor=function(t,e){return null!=t&&null==e?0==t?"PriceNull":t>0?"PriceUp":"PriceDown":null==t||null==e?"PriceNull":t==e?"PriceNull":t>e?"PriceUp":"PriceDown"},Te.IsNumber=function(t){return null!=t&&!isNaN(t)},Te.IsPlusNumber=function(t){return null!=t&&(!isNaN(t)&&t>0)},Te.IsInteger=function(t){return"number"==typeof t&&t%1==0},Te.IsObjectExist=function(t){return void 0!==t&&null!=t},Te.IsBool=function(t){return!0===t||!1===t},Te.IsString=function(t){return"string"==(void 0===t?"undefined":(0,l.default)(t))},Te.IsNonEmptyArray=function(t){return!!t&&(!!Array.isArray(t)&&t.length>0)},Te.IsFloat=function(t){return void 0!==t&&(null!=t&&(!isNaN(t)&&t!=parseInt(t)))},Te.RemoveZero=function(t){for(;t.length>0;){var e=t.length-1,a=t[e];if("0"!=a){if("."==a){t=t.substr(0,e);break}break}t=t.substr(0,e)}return t};var Ae=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10];function Oe(){this.newMethod=Me,this.newMethod(),delete this.newMethod,this.Symbol,this.FrameID,this.Frame,this.LanguageID=ra.LANGUAGE_CHINESE_ID,this.YClose,this.PercentageText,this.RValue,this.RText,this.RComplexText,this.Point,this.ClientPos=-1,this.ExtendChartPaint,this.RExtendText=[],this.BeforeOpenData,this.AfterCloseData,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.ShareAfterVol=0,this.PriceFormatType=0,this.DataFormatType=0,this.GetEventCallback,this.GetBeforeOpen=function(){if(!this.Frame)return!1;var t=this.Frame.SubFrame[this.FrameID];if(!t||!t.Frame)return!1;if(!this.BeforeOpenData)return!1;var e={Max:this.BeforeOpenData.VolMax,Min:this.BeforeOpenData.VolMin},a=this.Frame.IsHScreen?this.Point.X:this.Point.Y,i=t.Frame.GetLeftExtendYData(a,!1,{Range:e});Te.IsNumber(i)&&(this.RText=this.Text=Te.FormatValueString(i,2,this.LanguageID))},this.GetAfterClose=function(){if(!this.Frame)return!1;var t=this.Frame.SubFrame[this.FrameID];if(!t||!t.Frame)return!1;if(!this.AfterCloseData)return!1;var e={Max:this.AfterCloseData.VolMax,Min:this.AfterCloseData.VolMin},a=this.Frame.IsHScreen?this.Point.X:this.Point.Y,i=t.Frame.GetRightExtendYData(a,!1,{Range:e});Te.IsNumber(i)&&(this.RText=this.Text=Te.FormatValueString(i,2,this.LanguageID))},this.GetMultiDayBeforeOpen=function(){if(!this.Frame)return!1;var t=this.Frame.SubFrame[this.FrameID];if(!t||!t.Frame)return!1;var e=this.GetMultiDayBeforeOpenData();if(e&&Te.IsNonEmptyArray(e)){var a=this.ClientPos-200;if(a<0||a>=e.length)return!1;var i=e[a],r={Max:i.VolMax,Min:i.VolMin},n=this.Frame.IsHScreen?this.Point.X:this.Point.Y,o=t.Frame.GetLeftExtendYData(n,!1,{Range:r});Te.IsNumber(o)&&(this.RText=this.Text=Te.FormatValueString(o,2,this.LanguageID))}},this.GetMultiDayAfterClose=function(){if(!this.Frame)return!1;var t=this.Frame.SubFrame[this.FrameID];if(!t||!t.Frame)return!1;var e=this.GetMultiDayAfterCloseData();if(e&&Te.IsNonEmptyArray(e)){var a=this.ClientPos-300;if(a<0||a>=e.length)return!1;var i=e[a],r={Max:i.VolMax,Min:i.VolMin},n=this.Frame.IsHScreen?this.Point.X:this.Point.Y,o=t.Frame.GetRightExtendYData(n,!1,{Range:r});Te.IsNumber(o)&&(this.RText=this.Text=Te.FormatValueString(o,2,this.LanguageID))}},this.Operator=function(){if(this.RText=null,this.RComplexText=null,this.RExtendText=[],Te.IsString(this.RValue)&&(this.RText=this.RValue),!this.Value)return!1;this.PercentageText=null;var t=2;if(0==this.FrameID){t=Ga(this.Symbol);1==this.PriceFormatType?this.Text=Te.FormatValueThousandsString(this.Value,t):this.Text=this.Value.toFixed(t),this.YClose>0&&(this.PercentageText=(100*(this.Value-this.YClose)/this.YClose).toFixed(2)),this.GetExtendPaintData(t)}else 1==this.FrameID?(1==this.DataFormatType?(this.Text=Te.FormatValueThousandsString(this.Value,t),Te.IsNumber(this.RValue)&&(this.RText=Te.FormatValueString(this.RValue,t,this.LanguageID))):(this.Text=Te.FormatValueString(this.Value,t,this.LanguageID),Te.IsNumber(this.RValue)&&(this.RText=Te.FormatValueString(this.RValue,t,this.LanguageID))),2==this.ClientPos?this.GetBeforeOpen():3==this.ClientPos?0!=this.ShareAfterVol&&2!=this.ShareAfterVol||this.GetAfterClose():this.ClientPos>=200&&this.ClientPos<=299?this.GetMultiDayBeforeOpen():this.ClientPos>=300&&this.ClientPos<=399&&(0!=this.ShareAfterVol&&2!=this.ShareAfterVol||this.GetMultiDayAfterClose())):1==this.DataFormatType?this.Text=Te.FormatValueThousandsString(this.Value,t):this.Text=Te.FormatValueString(this.Value,t,this.LanguageID);if(this.GetEventCallback){var e=this.GetEventCallback(w.ON_FORMAT_CORSSCURSOR_Y_TEXT);if(e){var a={Value:this.Value,FrameID:this.FrameID};e.Callback(e,a,this)}}return!0},this.GetExtendPaintData=function(t){var e=parseInt(this.Value*Ae[t]);for(var a in this.ExtendChartPaint){var i=this.ExtendChartPaint[a];if("DepthMapPaint"==i.ClassName&&i.FrameID==this.FrameID){var r=i.GetYValueByXValue(e,t);for(var n in r)this.RExtendText.push(r[n])}}}}function Ne(){this.newMethod=Me,this.newMethod(),delete this.newMethod,this.DateFormatType=0,this.LanguageID=0,this.Operator=function(){if(!Te.IsNumber(this.Value))return!1;if(!this.Data)return!1;var t=this.Value;if(t=parseInt(t.toFixed(0)),this.Data.DataOffset+t>=this.Data.Data.length)return!1;var e=this.Data.Data[this.Data.DataOffset+t],a="YYYY-MM-DD";if(1==this.DateFormatType?a="YYYY/MM/DD":2==this.DateFormatType?a="YYYY/MM/DD/W":3==this.DateFormatType&&(a="DD/MM/YYYY"),this.Text=Te.FormatDateString(e.Date,a,this.LanguageID),pt.IsMinutePeriod(this.Data.Period,!0)){var i=Te.FormatTimeString(e.Time);this.Text=this.Text+"  "+i}else if(pt.IsSecondPeriod(this.Data.Period)){i=Te.FormatTimeString(e.Time,"HH:MM:SS");this.Text=this.Text+"  "+i}else if(pt.IsTickPeriod(this.Data.Period)){i=Te.FormatTimeString(e.Time);this.Text=this.Text+"  "+i}if(this.GetEventCallback){var r=this.GetEventCallback(w.ON_FORMAT_CORSSCURSOR_X_TEXT);if(r){var n={Item:e,Period:this.Data.Period,Date:e.Date,Time:e.Time,Index:this.Data.DataOffset+t};r.Callback(r,n,this)}}return!0}}function Pe(){this.newMethod=Me,this.newMethod(),delete this.newMethod,this.Frame,this.Symbol,this.Point,this.ClientPos=-1,this.BeforeOpenData,this.AfterCloseData,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.GetEventCallback,this.GetBeforeOpen=function(){if(!this.BeforeOpenData||!this.BeforeOpenData.Data)return!1;var t=1==this.Frame.IsHScreen?this.Point.Y:this.Point.X,e=this.Frame.GetLeftExtendXData(t,this.BeforeOpenData);if((e=parseInt(e.toFixed(0)))>=this.BeforeOpenData.Data.length)return!1;var a=this.BeforeOpenData.Data[e];return this.Text=this.FormatCallAcutionDateTime(a,this.BeforeOpenData),!0},this.GetAfterClose=function(){if(!this.AfterCloseData||!this.AfterCloseData.Data)return!1;var t=1==this.Frame.IsHScreen?this.Point.Y:this.Point.X,e=this.Frame.GetRightExtendXData(t,this.AfterCloseData);if((e=parseInt(e.toFixed(0)))>=this.AfterCloseData.Data.length)return!1;var a=this.AfterCloseData.Data[e];return this.Text=this.FormatCallAcutionDateTime(a,this.AfterCloseData),!0},this.GetMultiDayBeforeOpen=function(){var t=this.GetMultiDayBeforeOpenData();if(!t)return!1;if(this.Frame.ChartBorder.MultiDayMinute.Count<=1||this.Frame.ChartBorder.MultiDayMinute.Left<=0)return!1;var e=1==this.Frame.IsHScreen?this.Point.Y:this.Point.X,a=this.Frame.GetLeftExtendXData(e,t);if(!a)return!1;if(a.DayIndex>=t.length)return!1;var i=t[a.DayIndex];if(a.DataIndex=parseInt(a.DataIndex.toFixed(0)),a.DataIndex>=i.Data.length||a.DataIndex<0)return!1;var r=i.Data[a.DataIndex];return this.Text=this.FormatCallAcutionDateTime(r,i),!0},this.GetMultiDayAfterClose=function(){var t=this.GetMultiDayAfterCloseData();if(!t)return!1;if(this.Frame.ChartBorder.MultiDayMinute.Count<=1||this.Frame.ChartBorder.MultiDayMinute.Right<=0)return!1;var e=1==this.Frame.IsHScreen?this.Point.Y:this.Point.X,a=this.Frame.GetRightExtendXData(e,t);if(!a)return!1;if(a.DayIndex>=t.length)return!1;var i=t[a.DayIndex];if(a.DataIndex=parseInt(a.DataIndex.toFixed(0)),a.DataIndex>=i.Data.length)return!1;var r=i.Data[a.DataIndex];return this.Text=this.FormatCallAcutionDateTime(r,i),!0},this.FormatCallAcutionDateTime=function(t,e){var a=t.Time;return 1==e.Ver?Te.FormatTimeString(a,"HH:MM"):Te.FormatTimeString(a,"HH:MM:SS")},this.Operator=function(){if(2==this.ClientPos)return this.GetBeforeOpen();if(3==this.ClientPos)return this.GetAfterClose();if(this.ClientPos>=200&&this.ClientPos<=299)return this.GetMultiDayBeforeOpen();if(this.ClientPos>=300&&this.ClientPos<=399)return this.GetMultiDayAfterClose();if(!Te.IsNumber(this.Value))return!1;var t=Math.abs(this.Value),e=t=parseInt(t.toFixed(0));this.Frame&&this.Frame.MinuteCount&&(e=t%this.Frame.MinuteCount);var a=La.GetTimeData(this.Symbol);if(!a)return!1;e<0?e=0:e>a.length&&(e=a.length-1),this.Frame&&t>=this.Frame.XPointCount&&(e=a.length-1);var i=a[e];if(this.Text=Te.FormatTimeString(i),this.GetEventCallback){var r=this.GetEventCallback(w.ON_FORMAT_CORSSCURSOR_X_TEXT);if(r){var n={Time:i,Index:e};r.Callback(r,n,this)}}return!0}}var Re=["日","一","二","三","四","五","六"];var _e=new function(){this.DataMap=new C.default([["KLineTradeDataStringFormat",{Create:function(){return new function(){this.newMethod=Me,this.newMethod(),delete this.newMethod,this.Width=120,this.Operator=function(){var t=this.Value.Data;if(!t)return!1;var e,a=t.Data,i="<span class='tooltip-index-name'>"+a.Name+a.Param+":</span>";return e=1==a.Type?"<span class='tooltip-index-buy'>买入</span>":"<span class='tooltip-index-sell'>卖出</span>",this.Text=i+e,!0}}}}],["MinuteInfoDataStringFormat",{Create:function(){return new function(){this.newMethod=Me,this.newMethod(),delete this.newMethod,this.Width=200,this.Operator=function(){var t=this.Value.Data;if(!t)return!1;var e=t.Data.Item,a="<span class='tooltip-minuteinfo-time'>"+Te.FormatTimeString(e.Time)+" </span>",i="<span class='tooltip-minuteinfo-content'>"+e.Title+"</span>";return e.Content&&(i="<span class='tooltip-minuteinfo-content'>"+e.Content+"</span>"),this.Text=a+i,!0}}}}],["HistoryDataStringFormat",{Create:function(){return new function(){this.newMethod=Me,this.newMethod(),delete this.newMethod,this.ClassName="HistoryDataStringFormat",this.Symbol,this.UpColor=ia.UpTextColor,this.DownColor=ia.DownTextColor,this.UnchagneColor=ia.UnchagneTextColor,this.VolColor=ia.Title.VolColor,this.AmountColor=ia.Title.AmountColor,this.TurnoverRateColor=ia.Title.TurnoverRateColor,this.PositionColor=ia.Title.PositionColor,this.LanguageID=ra.LANGUAGE_CHINESE_ID,this.LineCount=0,this.LineHeight=ia.PCTooltip.LineHeight,this.Width=157,this.Height=5*this.LineHeight,this.Operator=function(){var t=this.Value.Data;if(!t)return!1;this.Width=157,this.LanguageID==ra.LANGUAGE_ENGLISH_ID&&(this.Width=180);var e=new Date(parseInt(t.Date/1e4),t.Date/100%100-1,t.Date%100),a=Te.FormatDateString(t.Date),i=na.GetText(Re[e.getDay()],this.LanguageID),r=pt.IsTickPeriod(this.Value.ChartPaint.Data.Period);pt.IsMinutePeriod(this.Value.ChartPaint.Data.Period,!0)?i=Te.FormatTimeString(t.Time):(pt.IsSecondPeriod(this.Value.ChartPaint.Data.Period)||r)&&(i=Te.FormatTimeString(t.Time,"HH:MM:SS"));var n=this.Symbol.toUpperCase(),o=Ga(this.Symbol),s=null;if(t.YClose>0&&(s=(t.Close-t.YClose)/t.YClose*100),r){var h="<span class='tooltip-title'>"+a+"&nbsp&nbsp"+i+"</span><span class='tooltip-con'>"+na.GetText("DivTooltip-Price",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetColor(t.Open,t.YClose)+";'>"+t.Open.toFixed(o)+"</span><br/><span class='tooltip-con'>"+na.GetText("DivTooltip-Increase",this.LanguageID)+"</span>"+(null==s?"<span class='tooltip-num' style='color:"+this.GetColor(0,0)+";'>--</span><br/>":"<span class='tooltip-num' style='color:"+this.GetColor(s,0)+";'>"+s.toFixed(2)+"%</span><br/>");this.LineCount=4}else if(t.IsNonTrade)h="<span class='tooltip-title'>"+a+"&nbsp&nbsp"+i+"</span>",this.LineCount=2;else{var l=t.Vol;n&&Ea.IsSHSZ(n)&&(l/=100);var u=null;if(this.GetEventCallback&&(u=this.GetEventCallback(w.ON_CUSTOM_UNCHANGE_KLINE_TITLE_COLOR)),h="<span class='tooltip-title'>"+a+"&nbsp&nbsp"+i+"</span><span class='tooltip-con'>"+na.GetText("DivTooltip-Open",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetPriceColor("DivTooltip-Open",t.Open,t.YClose,t,u)+";'>"+(Te.IsNumber(t.Open)?t.Open.toFixed(o):"--")+"</span><br/><span class='tooltip-con'>"+na.GetText("DivTooltip-High",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetPriceColor("DivTooltip-High",t.High,t.YClose,t,u)+";'>"+(Te.IsNumber(t.High)?t.High.toFixed(o):"--")+"</span><br/><span class='tooltip-con'>"+na.GetText("DivTooltip-Low",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetPriceColor("DivTooltip-Low",t.Low,t.YClose,t,u)+";'>"+(Te.IsNumber(t.Low)?t.Low.toFixed(o):"--")+"</span><br/><span class='tooltip-con'>"+na.GetText("DivTooltip-Close",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetPriceColor("DivTooltip-Close",t.Close,t.YClose,t,u)+";'>"+(Te.IsNumber(t.Close)?t.Close.toFixed(o):"--")+"</span><br/><span class='tooltip-con'>"+na.GetText("DivTooltip-Vol",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.VolColor+";'>"+(Te.IsNumber(l)?Te.FormatValueString(l,2,this.LanguageID):"--")+"</span><br/><span class='tooltip-con'>"+na.GetText("DivTooltip-Amount",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.AmountColor+";'>"+(Te.IsNumber(t.Amount)?Te.FormatValueString(t.Amount,2,this.LanguageID):"--")+"</span><br/><span class='tooltip-con'>"+na.GetText("DivTooltip-Increase",this.LanguageID)+"</span>"+(null==s?"<span class='tooltip-num' style='color:"+this.GetColor(0,0)+";'>--</span><br/>":"<span class='tooltip-num' style='color:"+this.GetColor(s,0)+";'>"+s.toFixed(2)+"%</span><br/>"),this.LineCount=8,Ea.IsSHSZStockA(this.Symbol)&&t.FlowCapital>0){var c=t.Vol/t.FlowCapital*100;h+="<span class='tooltip-con'>"+na.GetText("DivTooltip-Exchange",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.TurnoverRateColor+";'>"+c.toFixed(2)+"%</span><br/>",++this.LineCount}Ea.IsFutures(n)&&Te.IsNumber(t.Position)&&(h+="<span class='tooltip-con'>"+na.GetText("DivTooltip-Position",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.PositionColor+";'>"+t.Position+"</span><br/>",++this.LineCount),"Overlay-KLine"==this.Value.ChartPaint.Name&&(h="<span style='color:rgb(0,0,0);font:微软雅黑;font-size:12px;text-align:center;display: block;'>"+this.Value.ChartPaint.Title+"</span>"+h,++this.LineCount)}return this.Text=h,this.Height=this.LineCount*this.LineHeight,!0},this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor},this.GetPriceColor=function(t,e,a,i,r){var n=this.GetColor(e,a);if(e==a&&r&&r.Callback){var o={Item:i,TitleName:t,DefaultColor:n,TitleColor:null,ClassName:this.ClassName};r.Callback(r,o),o.TitleColor&&(n=o.TitleColor)}return n}}}}],["KLineInfoDataStringFormat",{Create:function(){return new function(){this.newMethod=Me,this.newMethod(),delete this.newMethod,this.UpColor=ia.UpTextColor,this.DownColor=ia.DownTextColor,this.UnchagneColor=ia.UnchagneTextColor,this.Width=500,this.Operator=function(){if(!this.Value)return!1;var t=this.Value.Data.Data,e=this.Value.Data.Type,a="";for(var i in t){var r=t[i],n="";switch(e){case ft.BLOCKTRADING:n=this.BlockTradingFormat(r);break;case ft.TRADEDETAIL:n=this.TradeDetailFormat(r);break;case ft.RESEARCH:n=this.ResearchFormat(r);break;case ft.PFORECAST:n=this.PerformanceForecastFormat(r);break;default:n=this.DefaultFormat(r)}a+=n}var o="<div class='title-length'>"+a+"</div>";return t.length>8&&(o+="<div class='total-list'>共"+t.length+"条</div>"),this.Text=o,!0},this.DefaultFormat=function(t){var e=Te.FormatDateString(t.Date);return Te.IsNumber(t.Time)&&(e+=" "+Te.FormatTimeString(t.Time)),"<span>"+e+"&nbsp;&nbsp;&nbsp;"+t.Title+"</span>"},this.BlockTradingFormat=function(t){var e=t.ExtendData;return"<span><i class='date-tipbox'>"+Te.FormatDateString(t.Date)+"</i>&nbsp;&nbsp;<i class='tipBoxTitle'>成交价:&nbsp;"+e.Price.toFixed(2)+"</i><i class='tipBoxTitle'>收盘价:&nbsp;"+e.ClosePrice.toFixed(2)+"</i><br/><i class='rate-discount tipBoxTitle'>溢折价率:&nbsp;<strong style='color:"+this.GetColor(e.Premium.toFixed(2))+"'>"+e.Premium.toFixed(2)+"%</strong></i><i class='tipBoxTitle'>成交量(万股):&nbsp;"+e.Vol.toFixed(2)+"</i></span>"},this.TradeDetailFormat=function(t){var e=t.ExtendData.Detail,a=Te.FormatDateString(t.Date),i=[];for(var r in e)i+="<i>"+e[r].TypeExplain+"</i><br/>";return"<span><i class='trade-time'>"+a+"&nbsp;&nbsp;&nbsp;上榜原因:&nbsp;&nbsp;</i><i class='reason-list'>"+i+"</i><br/><i class='trade-detall'>一周后涨幅:&nbsp;<strong style='color:"+this.GetColor(t.ExtendData.FWeek.Week1.toFixed(2))+"'>"+t.ExtendData.FWeek.Week1.toFixed(2)+"%</strong>&nbsp;&nbsp;&nbsp;四周后涨幅:&nbsp;<strong style='color:"+this.GetColor(t.ExtendData.FWeek.Week4.toFixed(2))+";'>"+t.ExtendData.FWeek.Week4.toFixed(2)+"%</strong></i></span>"},this.ResearchFormat=function(t){var e=t.ExtendData.Level,a="";if(0==e.length)a="<i>一般调研</i>";else{for(var i in e)0==e[i]?a+="<i style='color:#00a0e9'>证券代表&nbsp;&nbsp;&nbsp;</i>":1==e[i]?a+="<i>董秘&nbsp;&nbsp;&nbsp;</i>":2==e[i]?a+="<i style='color:#00a0e9'>总经理&nbsp;&nbsp;&nbsp;</i>":3==e[i]&&(a+="<i style='color:#00a0e9'>董事长&nbsp;&nbsp;&nbsp;</i>");a="接待:&nbsp;&nbsp;&nbsp;"+a}var r="";return t.ExtendData.Type&&"其他"!=t.ExtendData.Type&&(r="&nbsp;&nbsp;&nbsp;<i>"+t.ExtendData.Type+"</i>",0==e.length&&(a="")),"<span>"+Te.FormatDateString(t.Date)+"&nbsp;&nbsp;&nbsp;"+r+a+"</span>"},this.PerformanceForecastFormat=function(t){var e,a=t.ExtendData.ReportDate,i=parseInt(a/1e4),r=a%1e4;1231==r?e="年报":331==r?e="一季度报":630==r?e="半年度报":930==r&&(e="三季度报");var n="";return t.ExtendData.FWeek&&(null!=t.ExtendData.FWeek.Week1&&(n+="一周后涨幅:<i class='increase' style='color:"+this.GetColor(t.ExtendData.FWeek.Week1.toFixed(2))+"'>"+t.ExtendData.FWeek.Week1.toFixed(2)+"%</i>"),null!=t.ExtendData.FWeek.Week4&&(n+="&nbsp;四周后涨幅:<i class='increase' style='color:"+this.GetColor(t.ExtendData.FWeek.Week4.toFixed(2))+"'>"+t.ExtendData.FWeek.Week4.toFixed(2)+"%</i>"),n.length>0&&(n="<br/>&nbsp;&nbsp;<i class='prorecast-week'>"+n+"</i>")),"<span>"+Te.FormatDateString(t.Date)+"&nbsp;&nbsp;"+i+e+t.Title+"&nbsp;"+n+"</span>"},this.GetColor=function(t){return t>0?this.UpColor:t<0?this.DownColor:this.UnchagneColor}}}}],["IconDataStringFormat",{Create:function(){return new function(){this.newMethod=Me,this.newMethod(),delete this.newMethod,this.Width=200,this.Operator=function(){if(!this.Value||!this.Value.Data)return!1;var t=this.Value.Data;return!!t.Item&&!!t.Item.Text&&(this.Text=t.Item.Text,!0)}}}}],["ChartOXDataStringFormat",{Create:function(){return new function(){this.newMethod=Me,this.newMethod(),delete this.newMethod,this.Width=200,this.Period=0,this.Operator=function(){var t,e,a=this.Value.Data;if(!a||!a.Data)return!1;if(pt.IsDayPeriod(this.Period,!0)){if((t=Te.FormatDateString(a.Data.Start.Date))==(e=Te.FormatDateString(a.Data.End.Date)))return this.Text="<span class='tooltip-minuteinfo-content'>"+t+"</span>",!0;var i="<span class='tooltip-minuteinfo-content'>起始时间:"+t+"</span>",r="<span class='tooltip-minuteinfo-content'>结束时间:"+e+"</span>";return this.Text=i+"<br>"+r,!0}return!!pt.IsMinutePeriod(this.Period,!0)&&(i="<span class='tooltip-minuteinfo-content'>起始时间:"+(t=Te.FormatDateString(a.Data.Start.Date))+" "+Te.FormatTimeString(a.Data.Start.Time,"HH:MM")+"</span>",r="<span class='tooltip-minuteinfo-content'>结束时间:"+(e=Te.FormatDateString(a.Data.End.Date))+" "+Te.FormatTimeString(a.Data.End.Time,"HH:MM")+"</span>",this.Text=i+"<br>"+r,!0)}}}}],["ScatterPlotDataStringFormat",{Create:function(){return new function(){this.newMethod=Me,this.newMethod(),delete this.newMethod,this.Width=200,this.Operator=function(){var t=this.Value.Data;if(!t||!t.Data)return!1;if(!Te.IsNonEmptyArray(t.Data.Tooltip))return!1;this.Text="";for(var e=0;e<t.Data.Tooltip.length;++e){var a="<span class='tooltip-minuteinfo-content'>"+t.Data.Tooltip[e]+"</span>";this.Text+=a+"<br>"}return!0}}}}],["ChartDrawSVGDataStringFormat",{Create:function(){return new function(){this.newMethod=Me,this.newMethod(),delete this.newMethod,this.Width=200,this.Operator=function(){if(!this.Value||!this.Value.Data)return!1;var t=this.Value.Data;return!(!t.Item||!t.Item.Tooltip||!t.Item.Tooltip.Text||(this.Text=t.Item.Tooltip.Text,0))}}}}],["CorssCursor_XStringFormat",{Create:function(){return new Ne}}],["CorssCursor_YStringFormat",{Create:function(){return new Oe}}],["CorssCursor_Minute_XStringFormat",{Create:function(){return new Pe}}]]),this.Create=function(t){return this.DataMap.has(t)?this.DataMap.get(t).Create():null}};function Be(){this.Frame,this.Data=new Array,this.Canvas,this.IsDynamic=!1,this.Position=0,this.CursorIndex,this.LastPoint,this.Font=ia.TitleFont,this.Title,this.TitleColor=ia.DefaultTextColor,this.ClassName="IChartTitlePainting",this.DrawStatus,this.GetEventCallback,this.GlobalOption,this.ReloadResource=function(){this.Font=ia.TitleFont,this.TitleColor=ia.DefaultTextColor}}var ke=["不复权","前复权","后复权"];function Ge(){this.newMethod=Be,this.newMethod(),delete this.newMethod,this.ClassName="DynamicKLineTitlePainting",this.IsDynamic=!0,this.IsShow=!0,this.Period,this.UpColor=ia.UpTextColor,this.DownColor=ia.DownTextColor,this.UnchagneColor=ia.UnchagneTextColor,this.VolColor=ia.Title.VolColor,this.AmountColor=ia.Title.AmountColor,this.DateTimeColor=ia.Title.DateTimeColor,this.NameColor=ia.Title.NameColor,this.SettingColor=ia.Title.SettingColor,this.TurnoverRateColor=ia.Title.TurnoverRateColor,this.PositionColor=ia.Title.PositionColor,this.Symbol,this.Name,this.SpaceWidth=2*A(),this.OverlayChartPaint,this.IsShowName=!0,this.IsShowSettingInfo=!0,this.IsShowDateTime=!0,this.LanguageID=ra.LANGUAGE_CHINESE_ID,this.OnDrawEvent,this.OnMouseMoveEvent,this.HQChart,this.ReloadResource=function(){this.Font=ia.TitleFont,this.TitleColor=ia.DefaultTextColor,this.UpColor=ia.UpTextColor,this.DownColor=ia.DownTextColor,this.UnchagneColor=ia.UnchagneTextColor,this.VolColor=ia.Title.VolColor,this.AmountColor=ia.Title.AmountColor,this.DateTimeColor=ia.Title.DateTimeColor,this.NameColor=ia.Title.NameColor,this.SettingColor=ia.Title.SettingColor,this.TurnoverRateColor=ia.Title.TurnoverRateColor,this.PositionColor=ia.Title.PositionColor},this.GetCurrentKLineData=function(){if(null==this.CursorIndex||!this.Data)return null;if(this.Data.length<=0)return null;var t=this.CursorIndex;t=parseInt(t.toFixed(0));var e=this.Data.DataOffset+t;return e>=this.Data.Data.length&&(e=this.Data.Data.length-1),e<0?null:this.Data.Data[e]},this.GetFormatTitle=function(t){if(t&&t.Data){var e=Ga(this.Symbol),a=this.Symbol.toUpperCase(),i=t.Data,r=[],n={AryText:r};if(this.IsShowName&&r.push({Text:this.Name,Color:this.NameColor}),this.IsShowSettingInfo){var o="",s="("+(o=this.Data.Period>vt&&this.Data.Period<=gt?this.Data.Period-vt+na.GetText("自定义分钟",this.LanguageID):this.Data.Period>mt&&this.Data.Period<=Dt?this.Data.Period-mt+na.GetText("自定义日线",this.LanguageID):this.Data.Period>St&&this.Data.Period<=Tt?this.Data.Period-St+na.GetText("自定义秒",this.LanguageID):na.GetText(pt.GetPeriodName(this.Data.Period),this.LanguageID))+" "+na.GetText(ke[this.Data.Right],this.LanguageID)+")";Ea.IsEnableRight(this.Data.Period,this.Symbol,this.HQChart.RightFormula)||(s="("+o+")"),r.push({Text:s,Color:this.SettingColor})}if((s=this.GetKLineCalculateTitle())&&r.push({Text:s,Color:this.NameColor}),this.IsShowDateTime){s=Te.FormatDateString(i.Date);r.push({Text:s,Color:this.DateTimeColor})}var h=pt.IsTickPeriod(this.Period);if(pt.IsMinutePeriod(this.Period,!0)&&Te.IsNumber(i.Time)){s=Te.FormatTimeString(i.Time);r.push({Text:s,Color:this.DateTimeColor})}else if(pt.IsSecondPeriod(this.Period)&&Te.IsNumber(i.Time)){s=Te.FormatTimeString(i.Time,"HH:MM:SS");r.push({Text:s,Color:this.DateTimeColor})}else if(h){s=Te.FormatTimeString(i.Time,"HH:MM:SS");r.push({Text:s,Color:this.DateTimeColor})}if(h){var l=this.GetColor(i.Open,i.YClose);s=na.GetText("KTitle-Price",this.LanguageID)+i.Open.toFixed(e);if(r.push({Text:s,Color:l}),Te.IsNumber(i.YClose)&&0!=i.YClose){var u=(i.Close-i.YClose)/i.YClose*100;l=this.GetColor(u,0),s=na.GetText("KTitle-Increase",this.LanguageID)+u.toFixed(2)+"%";r.push({Text:s,Color:l})}return n}if(i.IsNonTrade)return n;var c=null;if(this.GetEventCallback&&(c=this.GetEventCallback(w.ON_CUSTOM_UNCHANGE_KLINE_TITLE_COLOR)),Te.IsNumber(i.Open)){l=this.GetColor(i.Open,i.YClose),s=na.GetText("KTitle-Open",this.LanguageID)+i.Open.toFixed(e);if(i.Open==i.YClose&&c){var f={Item:i,TitleName:"KTitle-Open",DefaultColor:l,TitleColor:null};this.OnUnchangeTitleColor(c,f)&&(l=f.TitleColor)}r.push({Text:s,Color:l})}if(Te.IsNumber(i.High)){l=this.GetColor(i.High,i.YClose),s=na.GetText("KTitle-High",this.LanguageID)+i.High.toFixed(e);if(i.High==i.YClose&&c){f={Item:i,TitleName:"KTitle-High",DefaultColor:l,TitleColor:null};this.OnUnchangeTitleColor(c,f)&&(l=f.TitleColor)}r.push({Text:s,Color:l})}if(Te.IsNumber(i.Low)){l=this.GetColor(i.Low,i.YClose),s=na.GetText("KTitle-Low",this.LanguageID)+i.Low.toFixed(e);if(i.Low==i.YClose&&c){f={Item:i,TitleName:"KTitle-Low",DefaultColor:l,TitleColor:null};this.OnUnchangeTitleColor(c,f)&&(l=f.TitleColor)}r.push({Text:s,Color:l})}if(Te.IsNumber(i.Close)){l=this.GetColor(i.Close,i.YClose),s=na.GetText("KTitle-Close",this.LanguageID)+i.Close.toFixed(e);if(i.Close==i.YClose&&c){f={Item:i,TitleName:"KTitle-Close",DefaultColor:l,TitleColor:null};this.OnUnchangeTitleColor(c,f)&&(l=f.TitleColor)}r.push({Text:s,Color:l})}if(i.YFClose>0&&Ea.IsChinaFutures(a)){u=(i.Close-i.YFClose)/i.YFClose*100,l=this.GetColor(u,0),s=na.GetText("KTitle-Increase",this.LanguageID)+u.toFixed(2)+"%";r.push({Text:s,Color:l})}else if(i.YClose>0){u=(i.Close-i.YClose)/i.YClose*100,l=this.GetColor(u,0),s=na.GetText("KTitle-Increase",this.LanguageID)+u.toFixed(2)+"%";r.push({Text:s,Color:l})}if(Te.IsNumber(i.Vol)){var d=i.Vol;a&&Ea.IsSHSZ(a)&&(d/=100);s=na.GetText("KTitle-Vol",this.LanguageID)+Te.FromatIntegerString(d,2,this.LanguageID);r.push({Text:s,Color:this.VolColor})}if(Te.IsNumber(i.Amount)){s=na.GetText("KTitle-Amount",this.LanguageID)+Te.FormatValueString(i.Amount,2,this.LanguageID);r.push({Text:s,Color:this.AmountColor})}if(Ea.IsSHSZStockA(this.Symbol)&&i.FlowCapital>0){u=i.Vol/i.FlowCapital*100,s=na.GetText("KTitle-Exchange",this.LanguageID)+Te.FormatValueString(u,2,this.LanguageID)+"%";r.push({Text:s,Color:this.TurnoverRateColor})}if(Ea.IsFutures(a)&&Te.IsNumber(i.Position)){s=na.GetText("KTitle-Position",this.LanguageID)+i.Position;r.push({Text:s,Color:this.PositionColor})}if(Te.IsNonEmptyArray(this.OverlayChartPaint))for(var C=0;C<this.OverlayChartPaint.length;++C){if((i=this.OverlayChartPaint[C]).Symbol&&i.Title){var p=i.Color;s="["+i.Title+"]";r.push({Text:s,Color:p})}}return n}},this.DrawItem=function(t){var e=!0===this.Frame.IsHScreen,a=this.Frame.ChartBorder.GetLeft(),i=this.Frame.ChartBorder.GetTop()-this.Frame.ChartBorder.Top/2,r=(this.Frame.ChartBorder.GetRight(),A());if(e){if(this.Frame.ChartBorder.Right<5*r)return;a=2,i=this.Frame.ChartBorder.Right/2,this.Frame.ChartBorder.GetHeight();var n=this.Frame.ChartBorder.GetChartWidth(),o=this.Frame.ChartBorder.GetTop();this.Canvas.translate(n,o),this.Canvas.rotate(90*Math.PI/180)}else if(this.Frame.ChartBorder.Top<5*r)return;this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font;var s={Left:a,Bottom:i,IsHScreen:e},h=this.GetFormatTitle({Data:t});if(h&&Te.IsNonEmptyArray(h.AryText))for(var l=0;l<h.AryText.length;++l){t=h.AryText[l];if(!this.DrawText(t.Text,t.Color,s))break}},this.Draw=function(){if(this.IsShow)if(null==this.CursorIndex||!this.Data||this.Data.length<=0)this.OnDrawEventCallback(null);else{this.Canvas.font=this.Font,this.SpaceWidth=this.Canvas.measureText("0").width;var t=this.CursorIndex;t=parseInt(t.toFixed(0));var e=this.Data.DataOffset+t;if(e>=this.Data.Data.length&&(e=this.Data.Data.length-1),e<0)this.OnDrawEventCallback(null);else{var a=this.Data.Data[e];this.OnDrawEventCallback(a),this.Canvas.save(),this.DrawItem(a),this.Canvas.restore()}}},this.OnDrawEventCallback=function(t){var e=this.OnDrawEvent&&this.OnDrawEvent.Callback,a=this.OnMouseMoveEvent&&this.OnMouseMoveEvent.Callback;if(e||a){var i={Draw:t,Name:this.ClassName};if(this.Data&&this.Data.Data){var r=Math.abs(this.CursorIndex);r=parseInt(r.toFixed(0));var n=this.Data.DataOffset+r,o=this.Data.Data.length;i.DataIndex=n,i.DataCount=o}if(Te.IsNonEmptyArray(this.OverlayChartPaint)){i.OverlayStock=[];for(var s=0;s<this.OverlayChartPaint.length;++s){var h=this.OverlayChartPaint[s];h.Symbol&&h.Title&&i.OverlayStock.push({Symbol:h.Symbol,Name:h.Title})}}e&&this.OnDrawEvent.Callback(this.OnDrawEvent,i,this),a&&this.OnMouseMoveEvent.Callback(this.OnMouseMoveEvent,i,this)}},this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor},this.OnUnchangeTitleColor=function(t,e){return!(!t||!t.Callback)&&(e.ClassName=this.ClassName,t.Callback(t,e,this),!(!e||!e.TitleColor))},this.DrawText=function(t,e,a){if(!t)return!0;var i=!0===this.Frame.IsHScreen,r=this.Frame.ChartBorder.GetRight();i&&(r=this.Frame.ChartBorder.GetHeight()),this.Canvas.fillStyle=e;var n=this.Canvas.measureText(t).width;return!(a.Left+n>r)&&(this.IsShow&&this.Canvas.fillText(t,a.Left,a.Bottom,n),a.Left+=n+this.SpaceWidth,!0)},this.GetKLineCalculateTitle=function(){if(!this.HQChart)return null;var t=this.HQChart.GetKLineCalulate();return t&&t.GetTitle?t.GetTitle():null}}function Ve(){this.newMethod=Ge,this.newMethod(),delete this.newMethod,this.ClassName="DynamicMinuteTitlePainting",this.SpaceWidth=1*A(),this.YClose,this.IsShowDate=!1,this.IsShowTime=!0,this.IsShowName=!0,this.IsShowAveragePrice=!0,this.OverlayChartPaint,this.LanguageID=ra.LANGUAGE_CHINESE_ID,this.LastShowData,this.OnDrawEvent,this.PointInfo=null,this.IsAlwaysShowLastData=!1,this.ShowLastDataFormat=0,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.TitleBaseLine=1,this.TimeFormat,this.CallAuctionShowTitle=new c.default(["MTitle-AC-Price","MTitle-AC-Vol","MTitle-AC-NotMatchVol","MTitle-AC-Increase","MTitle-AC-AvPrice"]),this.GetCurrentKLineData=function(){if(this.LastShowData)return this.LastShowData;if(null==this.CursorIndex||!this.Data)return null;if(this.Data.length<=0)return null;var t=Math.abs(this.CursorIndex);t=parseInt(t.toFixed(0));var e=this.Data.DataOffset+t;return e>=this.Data.Data.length&&(e=this.Data.Data.length-1),e<0?null:this.Data.Data[e]},this.GetCurrentAuctionData=function(){var t=!0===this.Frame.IsHScreen,e={ClientPos:this.PointInfo.ClientPos,X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y};{if(2==this.PointInfo.ClientPos)return this.BeforeOpenData&&this.CallAcutionXOperator?(this.CallAcutionXOperator.Value=t?this.PointInfo.Point.Y:this.PointInfo.Point.X,this.CallAcutionXOperator.Point={X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y},this.CallAcutionXOperator.ClientPos=this.PointInfo.ClientPos,this.CallAcutionXOperator.Operator()?((r={Explain:"BeforeOpen",Data:null,DataIndex:null,DataTotalCount:this.BeforeOpenData.TotalCount}).DataIndex=this.CallAcutionXOperator.DataIndex,r.Data=this.CallAcutionXOperator.Item,r.Ver=this.BeforeOpenData.Ver,r):e):e;if(3==this.PointInfo.ClientPos){return this.AfterCloseData&&this.CallAcutionXOperator?(this.CallAcutionXOperator.Value=t?this.PointInfo.Point.Y:this.PointInfo.Point.X,this.CallAcutionXOperator.Point={X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y},this.CallAcutionXOperator.ClientPos=this.PointInfo.ClientPos,this.CallAcutionXOperator.Operator()?((r={Explain:"AfterClose",Data:null,DataIndex:null,DataTotalCount:this.AfterCloseData.TotalCount}).DataIndex=this.CallAcutionXOperator.DataIndex,r.Data=this.CallAcutionXOperator.Item,r.Ver=this.AfterCloseData.Ver,r):e):e}else{if(this.PointInfo.ClientPos>=200&&this.PointInfo.ClientPos<=299){if(!this.MultiDayBeforeOpenData||!Te.IsNonEmptyArray(this.MultiDayBeforeOpenData))return e;var a=1==this.Frame.IsHScreen?this.PointInfo.Point.Y:this.PointInfo.Point.X;if(this.CallAcutionXOperator.Value=a,this.CallAcutionXOperator.Point={X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y},this.CallAcutionXOperator.ClientPos=this.PointInfo.ClientPos,!this.CallAcutionXOperator.Operator())return e;var i=this.MultiDayBeforeOpenData[this.CallAcutionXOperator.DayIndex];return(r={Explain:"MultiDayBeforeOpen",Data:null,DataIndex:null}).DataIndex=this.CallAcutionXOperator.DataIndex,r.DayIndex=this.CallAcutionXOperator.DayIndex,r.Data=this.CallAcutionXOperator.Item,r.Ver=i.Ver,r}if(this.PointInfo.ClientPos>=300&&this.PointInfo.ClientPos<=399){if(!this.MultiDayAfterCloseData||!Te.IsNonEmptyArray(this.MultiDayAfterCloseData))return e;a=1==this.Frame.IsHScreen?this.PointInfo.Point.Y:this.PointInfo.Point.X;if(this.CallAcutionXOperator.Value=a,this.CallAcutionXOperator.Point={X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y},this.CallAcutionXOperator.ClientPos=this.PointInfo.ClientPos,!this.CallAcutionXOperator.Operator())return e;var r;i=this.MultiDayAfterCloseData[this.CallAcutionXOperator.DayIndex];return(r={Explain:"MultiDayAfterClose",Data:null,DataIndex:null}).DataIndex=this.CallAcutionXOperator.DataIndex,r.DayIndex=this.CallAcutionXOperator.DayIndex,r.Data=this.CallAcutionXOperator.Item,r.Ver=i.Ver,r}}}return e},this.GetLatestKLineData=function(t){var e,a=null,i=1;Te.IsNonEmptyArray(this.MultiDayBeforeOpenData)?(n=this.MultiDayBeforeOpenData[this.MultiDayBeforeOpenData.length-1])&&Te.IsNonEmptyArray(n.Data)&&(i=n.Ver,a=n.Data[n.Data.length-1],e="MultiDayBeforeOpen"):this.BeforeOpenData&&Te.IsNonEmptyArray(this.BeforeOpenData.Data)&&(a=this.BeforeOpenData.Data[this.BeforeOpenData.Data.length-1],i=this.BeforeOpenData.Ver,e="BeforeOpen");var r,n,o=null,s=1;Te.IsNonEmptyArray(this.MultiDayAfterCloseData)?(n=this.MultiDayAfterCloseData[this.MultiDayAfterCloseData.length-1])&&Te.IsNonEmptyArray(n.Data)&&(s=n.Ver,o=n.Data[n.Data.length-1],r="MultiDayAfterClose",n.Data.length==n.TotalCount&&(o=null)):this.AfterOpenData&&Te.IsNonEmptyArray(this.AfterOpenData.Data)&&(o=this.AfterOpenData.Data[this.AfterOpenData.Data.length-1],s=this.AfterOpenData.Ver,r="AfterClose");var h=null;if(this.Data&&Te.IsNonEmptyArray(this.Data.Data)){var l=this.Data.Data.length;h=this.Data.Data[l-1]}return a||o||h?t?h?a&&h&&(a.Date>h.Date||a.Date==h.Date&&a.Time>h.Time&&1==s)?{Type:2,Data:a,Ver:i,Explain:e}:o&&h&&o.Date>=h.Date?{Type:1,Data:o,Ver:s,Explain:r}:{Type:0,Data:h}:{Type:1,Data:a,Ver:i,Explain:e}:{Type:0,Data:h}:null},this.GetFormatTitle=function(t){if(t&&t.Data){var e=Ga(this.Symbol),a=t.Data,i=t.IsLastOne,r=[];if(this.IsShowName&&r.push({Text:this.Name,Color:this.NameColor}),this.IsShowDate||this.IsShowTime){var n=!1;if(i&&1==this.ShowLastDataFormat&&this.Data&&this.Data.UpdateTime&&Te.IsNumber(this.Data.UpdateTime.Date)&&Te.IsNumber(this.Data.UpdateTime.Time)){var o=Te.FormatTimeString(this.Data.UpdateTime.Time,"HH:MM:SS");r.push({Text:o,Color:this.DateTimeColor}),n=!0}if(!n)if(this.TimeFormat){var s=null,h=null;o=null;this.IsShowDate&&(s=Te.FormatDateString("YYYY-MM-DD",a.Date)),this.IsShowTime&&(h=Te.FormatTimeString(a.Time,this.TimeFormat)),s&&h?o=s+" "+h:s?o=s:h&&(o=h),o&&r.push({Text:o,Color:this.DateTimeColor})}else{o=Te.FormatDateTimeString(a.DateTime,this.IsShowDate,this.IsShowTime);r.push({Text:o,Color:this.DateTimeColor})}}var l=a.Close,u=a.Increase,c=a.Vol,f=a.Amount;if(Te.IsNumber(l)){var d=this.GetColor(l,this.YClose);o=na.GetText("MTitle-Close",this.LanguageID)+l.toFixed(e);r.push({Text:o,Color:d})}if(Te.IsNumber(u)){d=this.GetColor(u,0),o=na.GetText("MTitle-Increase",this.LanguageID)+u.toFixed(2)+"%";r.push({Text:o,Color:d})}var C=!0,p=this.Symbol.toUpperCase();if(Ea.IsET(p)&&!Ea.IsETShowAvPrice(p)?C=!1:Ea.IsShowAvPrice&&!Ea.IsShowAvPrice(p)&&(C=!1),Te.IsNumber(a.AvPrice)&&C&&this.IsShowAveragePrice){d=this.GetColor(a.AvPrice,this.YClose),o=na.GetText("MTitle-AvPrice",this.LanguageID)+a.AvPrice.toFixed(e);r.push({Text:o,Color:d})}if(Te.IsNumber(c)){o=na.GetText("MTitle-Vol",this.LanguageID)+Te.FromatIntegerString(c,2,this.LanguageID);r.push({Text:o,Color:this.VolColor})}if(Te.IsNumber(f)){o=na.GetText("MTitle-Amount",this.LanguageID)+Te.FormatValueString(f,2,this.LanguageID);r.push({Text:o,Color:this.AmountColor})}if(Te.IsNumber(a.Position)){o=na.GetText("MTitle-Position",this.LanguageID)+Te.FromatIntegerString(a.Position,2,this.LanguageID);r.push({Text:o,Color:this.VolColor})}if(i&&0==this.ShowLastDataFormat&&this.Data&&this.Data.UpdateTime&&Te.IsNumber(this.Data.UpdateTime.Date)&&Te.IsNumber(this.Data.UpdateTime.Time)){o=na.GetText("MTitle-UpdateTime",this.LanguageID)+Te.FormatTimeString(this.Data.UpdateTime.Time,"HH:MM:SS");r.push({Text:o,Color:this.DateTimeColor})}if(Te.IsNonEmptyArray(this.OverlayChartPaint))for(var m=0;m<this.OverlayChartPaint.length;++m){if((a=this.OverlayChartPaint[m]).Symbol&&a.Title){var D=a.Color;o="["+a.Title+"]";r.push({Text:o,Color:D})}}return{AryText:r}}},this.DrawItem=function(t,e){if(t){var a=A(),i=!0===this.Frame.IsHScreen,r=this.Frame.GetBorder(),n=r.Left,o=r.Top-this.Frame.ChartBorder.Top/2;Ga(this.Symbol);if(this.Canvas.font=this.Font,i){if(this.Frame.ChartBorder.Right<5*a)return;n=2,o=this.Frame.ChartBorder.Right/2;var s=r.ChartWidth,h=r.Top;this.Canvas.translate(s,h),this.Canvas.rotate(90*Math.PI/180)}else if(this.Frame.ChartBorder.Top<5*a)return;if(this.Canvas.textAlign="left",0==this.TitleBaseLine)this.Canvas.textBaseline="top",o=2*a;else if(2==this.TitleBaseLine){this.Canvas.textBaseline="bottom";o=r.Top}else this.Canvas.textBaseline="middle";var l={Left:n,Bottom:o,IsHScreen:i},u=this.GetFormatTitle({Data:t,IsLastOne:e});if(u&&Te.IsNonEmptyArray(u.AryText))for(var c=0;c<u.AryText.length;++c){t=u.AryText[c];if(!this.DrawText(t.Text,t.Color,l))break}}},this.FormatCallAuctionTitle=function(t){var e=[],a=Ga(this.Symbol);if(this.IsShowName&&e.push({Text:this.Name,Color:this.NameColor}),t&&t.Data){var i,r,n=t.Data;if(r=Te.FormatDateString(n.Date),i=1==t.Ver?Te.FormatTimeString(n.Time,"HH:MM"):Te.FormatTimeString(n.Time,"HH:MM:SS"),h="MultiDayBeforeOpen"==t.Explain||"MultiDayAfterClose"==t.Explain?r+" "+i:i,e.push({Text:h,Color:this.DateTimeColor}),Te.IsNumber(n.Price)&&this.CallAuctionShowTitle.has("MTitle-AC-Price")){var o=this.GetColor(n.Price,this.YClose),s="MTitle-AC-Price";1==t.Ver&&(s="MTitle-Close");var h=na.GetText(s,this.LanguageID)+n.Price.toFixed(a);e.push({Text:h,Color:o})}if(Te.IsPlusNumber(this.YClose)&&Te.IsNumber(n.Price)&&this.CallAuctionShowTitle.has("MTitle-AC-Increase")){var l=(n.Price-this.YClose)/this.YClose*100;o=this.GetColor(l,0),s="MTitle-AC-Increase";1==t.Ver&&(s="MTitle-Increase");h=na.GetText(s,this.LanguageID)+l.toFixed(2)+"%";e.push({Text:h,Color:o})}if(Te.IsNumber(n.AvPrice)&&this.CallAuctionShowTitle.has("MTitle-AC-AvPrice")){o=this.GetColor(n.AvPrice,this.YClose),h=na.GetText("MTitle-AC-AvPrice",this.LanguageID)+n.AvPrice.toFixed(a);e.push({Text:h,Color:o})}if(Te.IsNumber(n.Vol[0])&&this.CallAuctionShowTitle.has("MTitle-AC-Vol")){s="MTitle-AC-Vol";1==t.Ver&&(s="MTitle-Vol");h=na.GetText(s,this.LanguageID)+Te.FromatIntegerString(n.Vol[0],2);e.push({Text:h,Color:this.VolColor})}if(Te.IsNumber(n.Vol[1])&&this.CallAuctionShowTitle.has("MTitle-AC-NotMatchVol")){h=na.GetText("MTitle-AC-NotMatchVol",this.LanguageID)+Te.FromatIntegerString(n.Vol[1],2);e.push({Text:h,Color:this.VolColor})}if(n.ExtendData&&Te.IsNonEmptyArray(n.ExtendData.Amount)){var u=n.ExtendData.Amount;if(Te.IsNumber(u[0])&&this.CallAuctionShowTitle.has("MTitle-AC-Amount")){h=na.GetText("MTitle-AC-Amount",this.LanguageID)+Te.FromatIntegerString(u[0],2);e.push({Text:h,Color:this.AmountColor})}if(Te.IsNumber(u[1])&&this.CallAuctionShowTitle.has("MTitle-AC-NotMatchAmount")){h=na.GetText("MTitle-AC-NotMatchAmount",this.LanguageID)+Te.FromatIntegerString(u[1],2);e.push({Text:h,Color:this.AmountColor})}}}return{AryText:e}},this.DrawCallAuction=function(){var t=!0===this.Frame.IsHScreen,e=this.Frame.GetBorder(),a=A(),i=e.Left,r=e.Top-this.Frame.ChartBorder.Top/2,n=!0;if(t){if(this.Frame.ChartBorder.Right<5*a)return;i=2,r=this.Frame.ChartBorder.Right/2;var o=e.ChartWidth,s=e.Top;this.Canvas.translate(o,s),this.Canvas.rotate(90*Math.PI/180)}else this.Frame.ChartBorder.Top<5&&(n=!1);if(this.Canvas.textAlign="left",this.Canvas.font=this.Font,0==this.TitleBaseLine)this.Canvas.textBaseline="top",r=2*a;else if(2==this.TitleBaseLine){this.Canvas.textBaseline="bottom";r=e.Top}else this.Canvas.textBaseline="middle";var h={Left:i,Bottom:r,IsHScreen:t},l=this.GetCurrentAuctionData(),u=this.FormatCallAuctionTitle(l);if(n&&u&&Te.IsNonEmptyArray(u.AryText))for(var c=0;c<u.AryText.length;++c){var f=u.AryText[c];if(!this.DrawText(f.Text,f.Color,h))break}this.OnDrawCallAuctionEventCallback(l)},this.OnDrawCallAuctionEventCallback=function(t){if(this.OnDrawEvent&&this.OnDrawEvent.Callback){var e={Draw:t,Name:this.ClassName};this.OnDrawEvent.Callback(this.OnDrawEvent,e,this)}if(this.OnMouseMoveEvent&&this.OnMouseMoveEvent.Callback){e={Draw:t,Name:this.ClassName};this.OnMouseMoveEvent.Callback(this.OnDrawEvent,e,this)}},this.DrawNone=function(){this.OnDrawEventCallback(null),this.IsAlwaysShowLastData&&(this.Canvas.save(),this.DrawLastDataItem(),this.Canvas.restore())},this.Draw=function(){if((this.LastShowData=null,this.GlobalOption=this.Frame.GlobalOption,!this.IsShow)&&!(this.OnDrawEvent&&this.OnDrawEvent.Callback||this.OnMouseMoveEvent&&this.OnMouseMoveEvent.Callback))return;if(this.PointInfo&&(2==this.PointInfo.ClientPos||3==this.PointInfo.ClientPos||this.PointInfo.ClientPos>=200&&this.PointInfo.ClientPos<=299||this.PointInfo.ClientPos>=300&&this.PointInfo.ClientPos<=399))return this.Canvas.save(),this.DrawCallAuction(),void this.Canvas.restore();if(!this.Data||!this.Data.Data||this.Data.Data.length<=0)this.DrawNone();else if(null!=this.CursorIndex||this.GlobalOption&&this.GlobalOption.IsDisplayLatest){this.Canvas.font=this.Font,this.SpaceWidth=this.Canvas.measureText("0").width;var t=!1;if(this.DrawStatus&&this.DrawStatus.IsTitleShowLatestData){var e=this.DrawStatus;!Te.IsNumber(e.FrameID)||e.FrameID<0?t=!0:e.CorssCursorTouchEnd&&0==e.IsOnTouch&&(t=!0)}else this.GlobalOption&&this.GlobalOption.IsDisplayLatest&&(t=!0);var a=!1;if(t){var i=null,r=this.GetLatestKLineData(!0);r&&0==r.Type&&(i=r.Data),a=!0}else{var n=this.CursorIndex,o=(n=parseInt(n.toFixed(0)))+this.Data.DataOffset;o>=this.Data.Data.length&&(o=this.Data.Data.length-1);i=this.Data.Data[o];o==this.Data.Data.length-1&&(a=!0)}this.LastShowData=i,this.Canvas.save(),this.OnDrawEventCallback(i),this.IsAlwaysShowLastData?this.DrawLastDataItem():this.DrawItem(i,a),this.Canvas.restore()}else this.DrawNone()},this.DrawCallAuctionItem=function(t,e){if(t){var a=t.Data,i=(t.Ver,!0===this.Frame.IsHScreen),r=this.Frame.GetBorder(),n=r.Left,o=r.Top-this.Frame.ChartBorder.Top/2,s=!0;if(i){n=2,o=this.Frame.ChartBorder.Right/2;var h=r.ChartWidth,l=r.Top;this.Canvas.translate(h,l),this.Canvas.rotate(90*Math.PI/180)}else this.Frame.ChartBorder.Top<5&&(s=!1);if(this.Canvas.textAlign="left",this.Canvas.font=this.Font,0==this.TitleBaseLine)this.Canvas.textBaseline="top",o=2*A();else if(2==this.TitleBaseLine){this.Canvas.textBaseline="bottom";o=r.Top}else this.Canvas.textBaseline="middle";var u={Left:n,Bottom:o,IsHScreen:i},c=this.FormatCallAuctionTitle(t);if(s&&c&&Te.IsNonEmptyArray(c.AryText))for(var f=0;f<c.AryText.length;++f){a=c.AryText[f];if(!this.DrawText(a.Text,a.Color,u))break}}},this.DrawLastDataItem=function(){var t=this.GetLatestKLineData(!0);t&&(0==t.Type?this.DrawItem(t.Data,!0):1!=t.Type&&2!=t.Type||this.DrawCallAuctionItem(t,!0))}}var He={DEFAULT:1,ORIGINAL:2,INTEGER:3,THOUSANDS:21};function Ye(t,e,a){this.Data=t,this.Name=e,this.Color=a,this.DataType,this.ChartClassName,this.StringFormat=He.DEFAULT,this.FloatPrecision=2,this.IsShow=!0,this.Callback}function Xe(){this.newMethod=Be,this.newMethod(),delete this.newMethod,this.ClassName="DynamicChartTitlePainting",this.IsDynamic=!0,this.Data=[],this.Explain,this.ColorIndex,this.IsShowColorIndexTitle=!0,this.IsShowUpDownArrow=!0,this.IsShowIndexName=!0,this.IsShowIndexTitle=!0,this.IsShowNameArrow=!1,this.TradeIndex,this.IsShowTradeIndexTitle=!0,this.OverlayIndex=new C.default,this.IsShowOverlayIndexName=!0,this.OverlayIndexType={Position:0,LineSpace:5,BGColor:ia.OverlayIndexTitleBGColor},this.LanguageID=ra.LANGUAGE_CHINESE_ID,this.TitleRect,this.IsDrawTitleBG=!1,this.BGColor=ia.IndexTitleBGColor,this.BGBorderColor=ia.IndexTitleBorderColor,this.BGBorderMoveOnColor=ia.IndexTitleBorderMoveOnColor,this.BorderRoundRadius=2,this.OnDrawEvent,this.ParamSpace=2,this.TitleSpace=2,this.TitleColor=ia.IndexTitleColor,this.SelectedColor=ia.IndexTitleSelectedColor,this.IsKLineFrame=!1,this.Identify,this.SelectedChart,this.ArgumentsText,this.MerginLeft=ia.IndexTitleMerginLeft,this.Buttons=[],this.DynamicTitle={OutName:null,OutValue:null},this.OverlayDynamicTitle=new C.default,this.ReloadResource=function(){this.Font=ia.TitleFont,this.TitleColor=ia.DefaultTextColor,this.OverlayIndexType.BGColor=ia.OverlayIndexTitleBGColor},this.SetDynamicTitleData=function(t,e,a){a.OutName?a.OutName.clear():a.OutName=new C.default,a.OutValue?a.OutValue.clear():a.OutValue=new C.default;var i=new C.default;for(var r in e){var n=e[r];i.set("{"+n.Name+"}",n)}for(var r in t){if((n=t[r]).DynamicName){var o=n.DynamicName.match(/{\w*}/i);if(!o||o.length<=0)a.OutName.set(n.Name,n.DynamicName);else{for(var s=n.DynamicName,h=!0,l=0;l<o.length;++l){var u=o[l];if(!i.has(u)){h=!1;break}var c=i.get(u).Value;s=s.replace(u,c.toString())}h&&a.OutName.set(n.Name,s)}}n.DynamicValue&&a.OutValue.set(n.Name,n.DynamicValue)}},this.SetDynamicTitle=function(t,e,a){if(Te.IsString(a)){var i=null;this.OverlayDynamicTitle.has(a)?i=this.OverlayDynamicTitle.get(a):(i={OutName:null,OutValue:null},this.OverlayDynamicTitle.set(a,i)),this.SetDynamicTitleData(t,e,i)}else this.SetDynamicTitleData(t,e,this.DynamicTitle)},this.GetDynamicOutName=function(t,e){if(Te.IsString(e)){if(!this.OverlayDynamicTitle.has(e))return null;var a=this.OverlayDynamicTitle.get(e).OutName}else a=this.DynamicTitle.OutName;return!a||a.size<=0?null:a.has(t)?a.get(t):null},this.GetDynamicOutValue=function(t,e){var a=this.DynamicTitle.OutValue;if(!a||a.size<=0)return null;if(!a.has(t))return null;var i=a.get(t);return i=i.replace("{Value}",e)},this.IsClickTitle=function(t,e){return!!this.TitleRect&&(t>this.TitleRect.Left&&t<this.TitleRect.Left+this.TitleRect.Width&&e>this.TitleRect.Top&&e<this.TitleRect.Top+this.TitleRect.Height)},this.FormatValue=function(t,e){return e.StringFormat==He.DEFAULT?Te.FormatValueString(t,e.FloatPrecision,this.LanguageID):e.StringFormat==He.THOUSANDS?Te.FormatValueThousandsString(t,e.FloatPrecision):e.StringFormat==He.ORIGINAL?t.toFixed(e.FloatPrecision).toString():e.StringFormat==He.INTEGER?Te.FromatIntegerString(t,e.FloatPrecision,this.LanguageID):void 0},this.FormatMultiReport=function(t,e){var a="";for(var i in t){var r=t[i],n=r.Quarter,o=r.Year,s=r.Value;switch(a.length>0&&(a+=","),a+=o.toString(),n){case 1:a+="一季报 ";break;case 2:a+="半年报 ";break;case 3:a+="三季报 ";break;case 4:a+="年报 "}a+=this.FormatValue(s,e)}return a},this.FromatMultiDataLine=function(t,e){var a="";if(Array.isArray(t))for(var i=0;i<t.length;++i){var r=t[i];if(0!=r.Type&&Te.IsNumber(r.Value)){var n=this.FormatValue(r.Value,e);a.length>0&&(a+=","),a+=n}}else 0!=t.Type&&Te.IsNumber(t.Value)&&(a=this.FormatValue(t.Value,e));return a.length<=0?null:a},this.FromatStackedBarTitle=function(t,e){if(!Te.IsNonEmptyArray(t))return null;if(!Te.IsNonEmptyArray(e.Color))return null;for(var a=[],i=0;i<t.length;++i){var r=t[i];if(Te.IsNumber(r)){var n={Text:r.toFixed(2)};e.Name&&e.Name[i]&&(n.Name=e.Name[i]),n.Color=e.Color[i],a.push(n)}}return a.length<=0?null:a},this.ForamtMultiLineTitle=function(t,e){if(!Te.IsNonEmptyArray(e.Lines))return null;for(var a=[],i=0;i<e.Lines.length;++i)for(var r=e.Lines[i],n=0;n<r.Point.length;++n){if((o=r.Point[n]).Index==t){var o={Text:o.Value.toFixed(2)};0==a.length&&(o.Name=e.Name),o.Color=r.Color,a.push(o);break}}return Te.IsNonEmptyArray(a)?a:null},this.ForamtMultiPointTitle=function(t,e){if(!Te.IsNonEmptyArray(e.PointGroup))return null;for(var a=[],i=0;i<e.PointGroup.length;++i)for(var r=e.PointGroup[i],n=0;n<r.Point.length;++n){if((o=r.Point[n]).Index==t){var o={Text:o.Value.toFixed(2)};0==a.length&&(o.Name=e.Name),o.Color=r.BGColor,a.push(o);break}}return Te.IsNonEmptyArray(a)?a:null},this.FormatVPVRTitle=function(t,e){var a=e.Chart,i=[];if(0==a.VolType){var r={Text:" Up/Down ",Color:this.TitleColor};i.push(r)}else{r={Text:" Total ",Color:this.TitleColor};i.push(r)}if(!Te.IsNumber(t.Y))return i;var n=this.Frame.ChartBorder.GetTopEx(),o=this.Frame.ChartBorder.GetBottomEx();if(t.Y<n||t.Y>o)return i;for(var s=this.Frame.GetYData(t.Y),h=null,l=0;l<e.Data.Data.length;++l){if(s>=(r=e.Data.Data[l]).Price-e.Data.PriceOffset/2&&s<r.Price+e.Data.PriceOffset/2){h=r;break}}if(!h)return null;if(0==a.VolType){var u=0;for(l=0;l<h.Vol.length;++l){var c=h.Vol[l];if(Te.IsNumber(c.Value)){r={Text:Te.FormatVolString(c.Value,this.LanguageID)};u+=c.Value,Te.IsNumber(c.ColorID)?r.Color=a.BarColor[c.ColorID]:c.Color&&(r.Color=c.Color),i.push(r)}}r={Text:Te.FormatVolString(u,this.LanguageID),Color:this.TitleColor};i.push(r)}else if(h.TotalVol&&Te.IsNumber(h.TotalVol.Value)){r={Text:Te.FormatVolString(h.TotalVol.Value,this.LanguageID)};Te.IsNumber(h.TotalVol.ColorID)?r.Color=a.BarColor[h.TotalVol.ColorID]:h.TotalVol.Color&&(r.Color=h.TotalVol.Color),i.push(r)}return i},this.IsShowLastData=function(){var t=!1;if(this.DrawStatus&&this.DrawStatus.IsTitleShowLatestData){var e=this.DrawStatus;!Te.IsNumber(e.FrameID)||e.FrameID<0?t=!0:e.CorssCursorTouchEnd&&0==e.IsOnTouch&&(t=!0)}else this.GlobalOption&&this.GlobalOption.IsDisplayLatest&&(t=!0);return t},this.OnDrawTitleEvent=function(){var t=this.GetEventCallback(w.ON_INDEXTITLE_DRAW);if(t){var e={Index:null,Data:this.Data,Title:this.Title,FrameID:this.Frame.Identify,OverlayIndex:this.OverlayIndex};if(Te.IsNumber(this.CursorIndex)){var a=Math.abs(this.CursorIndex);a=parseInt(a.toFixed(0)),e.Index=a}var i=A(),r=this.Frame.GetBorder();e.Left=r.LeftEx/i,e.Top=r.Top/i,e.Right=r.RightEx/i,t.Callback(t,e,this)}},this.IsSelectedChart=function(t){return!!t&&(!!this.SelectedChart&&(!!this.SelectedChart.Selected&&this.SelectedChart.Selected.Identify==t))},this.Draw=function(t,e){if(this.Buttons=[],!this.Frame.IsMinSize&&(this.IsKLineFrame="KLineFrame"==this.Frame.ClassName||"KLineHScreenFrame"==this.Frame.ClassName,this.IsDrawTitleBG=this.Frame.IsDrawTitleBG,this.IsShowNameArrow=this.Frame.IsShowNameArrow,this.IsShowUpDownArrow=this.Frame.IsShowTitleArraw,this.IsShowIndexName=this.Frame.IsShowIndexName,this.IsShowOverlayIndexName=this.Frame.IsShowOverlayIndexName,this.OverlayIndexType.Position=this.Frame.OverlayIndexType.Position,this.OverlayIndexType.LineSpace=this.Frame.OverlayIndexType.LineSpace,this.ParamSpace=this.Frame.IndexParamSpace,this.TitleSpace=this.Frame.IndexTitleSpace,this.TitleRect=null,this.GlobalOption=this.Frame.GlobalOption,this.OnDrawTitleEvent(),0!=this.Frame.IsShowIndexTitle&&this.Data&&!(this.Frame.ChartBorder.TitleHeight<5)&&(null!=this.CursorIndex||this.GlobalOption&&this.GlobalOption.IsDisplayLatest))){if(!0===this.Frame.IsHScreen)return this.Canvas.save(),this.HScreenDraw(),void this.Canvas.restore();var a=this.Frame.ChartBorder.GetLeft()+this.MerginLeft,i=this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.TitleHeight/2,r=this.Frame.ChartBorder.GetRight(),n={Width:0,YCenter:i};this.DrawToolbar(n,t,e),a+=n.Width,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font;var o=A();if(this.Title&&this.IsShowIndexName)if(this.IsDrawTitleBG){var s={Left:a,YCenter:i,Width:0};this.DrawNameButton(s,t,e),this.Buttons.push({ID:b.INDEX_NAME_BUTTON,Rect:s,FrameID:this.Frame.Identify,Type:2}),this.IsSelectedChart(this.Identify)&&this.DrawSelectedLine(a,i,h),this.TitleRect=s,a+=s.Width+3*o,a+=this.TitleSpace}else{var h=this.Canvas.measureText(this.Title).width+2;this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(this.Title,a,i,h),this.IsSelectedChart(this.Identify)&&this.DrawSelectedLine(a,i,h),a+=h,a+=this.TitleSpace}if(this.ArgumentsText&&this.IsShowIndexName){h=this.Canvas.measureText(this.ArgumentsText).width+2;this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(this.ArgumentsText,a,i,h),a+=h,a+=this.TitleSpace}var l=this.IsShowLastData(),u=this.Frame.GetLockRect();if(u){var c=Math.abs(this.CursorIndex);if(this.IsKLineFrame&&(c=this.CursorIndex),this.Frame.GetXFromIndex(c.toFixed(0))>=u.Left)return;if(l)return}for(var f=0;f<this.Data.length;++f){var d=this.Data[f],C=this.GetTitleItem(d,l,f);if(C){var p=C.Text,m=C.ArrayText;if(m)for(var D=0;D<m.length;++D){var v=m[D];I=v.Name?v.Name+":"+v.Text:v.Text;var g=this.ParamSpace*A();if(a+(h=this.Canvas.measureText(I).width+g)>r)break;if(v.BG){var S=this.Canvas.measureText("擎").width+2,T={Left:a,Top:i-S/2,Width:h=this.Canvas.measureText(I).width+2,Height:S};this.Canvas.fillStyle=v.BG,this.Canvas.fillRect(T.Left,T.Top-1,T.Width,T.Height),this.Canvas.fillStyle=v.Color,this.Canvas.fillText(I,T.Left+1,i,h),a+=h+g}else this.Canvas.fillStyle=v.Color,this.Canvas.fillText(I,a,i,h),a+=h}else{this.Canvas.fillStyle=d.Color;var I=p;if(d.Name){var y=this.GetDynamicOutName(d.Name);I=y?y+":"+p:d.Name+":"+p}g=this.ParamSpace*A();if(a+(h=this.Canvas.measureText(I).width+g)>r)break;this.Canvas.fillText(I,a,i,h),a+=h}}}if(this.Explain){this.Canvas.fillStyle=this.TitleColor;I="说明:"+this.Explain;a+(h=this.Canvas.measureText(I).width+2)<r&&(this.Canvas.fillText(I,a,i,h),a+=h)}if(this.ColorIndex&&this.IsShowColorIndexTitle){this.Canvas.fillStyle=ia.Title.ColorIndexColor;var x=this.ColorIndex.Name+this.ColorIndex.Param;h=this.Canvas.measureText(x).width+2;this.Canvas.fillText(x,a,i,h),a+=h}if(this.TradeIndex&&this.IsShowTradeIndexTitle){this.Canvas.fillStyle=ia.Title.TradeIndexColor;x=this.TradeIndex.Name+this.TradeIndex.Param,h=this.Canvas.measureText(x).width+2;this.Canvas.fillText(x,a,i,h),a+=h}1==this.OverlayIndexType.Position?this.Frame.ChartBorder.IsShowTitleOnly||this.DrawOverlayIndexSingleLine(t,e):this.DrawOverlayIndex(a+10*A())}},this.GetTitleItem=function(t,e,a){if(!t||!t.Data||!t.Data.Data)return null;if(Array.isArray(t.Data.Data)&&t.Data.Data.length<=0)return null;if(!1===t.IsShow)return null;var i=null,r=null,n=null,o=null;if("StraightLine"==t.DataType)n=t.Data.Data[0],i=this.FormatValue(n,t);else{if("ChartVolProfileVisibleRange"==t.ChartClassName)return(r=this.FormatVPVRTitle(this.LastPoint,t))?{Text:null,ArrayText:r}:null;if(e)var s=t.Data.Data.length-1;else{var h=Math.abs(this.CursorIndex);if(h=parseInt(h.toFixed(0)),this.IsKLineFrame&&(h=this.CursorIndex),(s=t.Data.DataOffset+h)>=t.Data.Data.length&&(s=t.Data.Data.length-1),s<0)return null}if("ChartMultiLine"==t.DataType)return(r=this.ForamtMultiLineTitle(s,t))?{Text:null,ArrayText:r}:null;if("ChartMultiPoint"==t.DataType)return(r=this.ForamtMultiPointTitle(s,t))?{Text:null,ArrayText:r}:null;if(null==(n=t.Data.Data[s])&&"ChartStepLine"==t.ChartClassName){if(!(o=this.GetPreVaildItem(t.Data.Data,s)))return null;if(preText=this.FormatValue(o.Item,t),t.Name)(f=this.GetDynamicOutValue(t.Name,preText))&&(preText=f);return{Text:i="--("+preText+")",ArrayText:r}}if(null==n)return null;if("HistoryData-Vol"==t.DataType)n=n.Vol,i=this.FormatValue(n,t);else if("MultiReport"==t.DataType)i=this.FormatMultiReport(n,t);else if("MULTI_POINT_LINE"==t.DataType){if(!(i=this.FromatMultiDataLine(n,t)))return null}else{if("ChartStackedBar"==t.DataType)return(r=this.FromatStackedBarTitle(n,t))?{Text:null,ArrayText:r}:null;if(oi.Has(t.DataType)){var l=oi.Get(t.DataType);if(l&&l.FormatTitleCallback)return l.FormatTitleCallback(n,t,s)}else{if(this.GetEventCallback){var u=this.GetEventCallback(w.ON_FORMAT_INDEX_OUT_TEXT);if(u){var c={Item:t,Index:a,Data:this.Data,FrameID:this.Frame.Identify,DataIndex:s,Value:n,Out:null};if(u.Callback(u,c,this),c.Out)return c.Out}}var f,d=null;if(this.IsShowUpDownArrow){var C=null;s-1>=0&&(C=t.Data.Data[s-1]),Te.IsNumber(C)&&(d=C>n?"↓":C<n?"↑":"→")}if(i=this.FormatValue(n,t),t.Name)(f=this.GetDynamicOutValue(t.Name,i))&&(i=f);d&&(i+=d)}}}return{Text:i,ArrayText:r}},this.GetPreVaildItem=function(t,e){for(var a=e;a>=0;--a){var i=t[a];if(i)return{Item:i,Index:a}}return null},this.DrawSelectedLine=function(t,e,a){this.Canvas.save();var i=this.GetFontHeight();this.Canvas.strokeStyle=this.SelectedColor;var r=B(4,e+i/2);this.Canvas.lineWidth=4,this.Canvas.beginPath(),this.Canvas.moveTo(t,r),this.Canvas.lineTo(t+a,r),this.Canvas.stroke(),this.Canvas.restore()},this.DrawOverlayIndexSingleLine=function(t,e){var a=A(),i=this.Frame.GetBorder();if(!0===this.Frame.IsHScreen)var r=1,n=2*a,o=this.Frame.ChartBorder.GetHeight(),s=this.Frame.ChartBorder.GetWidthEx();else n=i.TopTitle+2*a,r=i.Left+this.MerginLeft,o=i.Right,s=i.Bottom;var h=this.OverlayIndexType.LineSpace*a,l=r,u=n,c=O(this.Canvas,this.Font,"擎");u=n+c/2;var d=!0,C=!1,p=void 0;try{for(var m,D=(0,f.default)(this.OverlayIndex);!(d=(m=D.next()).done);d=!0){var v=(y=m.value)[1],g=y[0],S={Width:0,YCenter:u,ID:g};if(this.DrawOverlayToolbar(v,S,t,e),v.Frame.IsShowIndexTitle){if(l=r+S.Width,this.Canvas.font=this.Font,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",v.Title&&this.IsShowOverlayIndexName){if(l+(N=this.Canvas.measureText(v.Title).width+2)<o){if(this.OverlayIndexType.BGColor){this.Canvas.fillStyle=this.OverlayIndexType.BGColor;var T={Left:l,Top:u-c/2,Width:N,Height:c+h};this.Canvas.fillRect(T.Left,T.Top,T.Width,T.Height)}this.IsSelectedChart(g)&&this.DrawSelectedLine(l,u,N,v.Title),this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(v.Title,l,u,N)}l+=N}for(var I=0;I<v.Data.length;++I){var y=v.Data[I];if(y&&y.Data&&y.Data.Data&&y.Name&&!(y.Data.Data.length<=0)){var x=null,w=null,F=null;if("StraightLine"==y.DataType)x=y.Data.Data[0],w=this.FormatValue(x,y);else{var E=Math.abs(this.CursorIndex-.5);E=parseInt(E.toFixed(0)),this.IsKLineFrame&&(E=this.CursorIndex);var b=y.Data.DataOffset+E;if(b>=y.Data.Data.length&&(b=y.Data.Data.length-1),b<0)continue;if(null==(x=y.Data.Data[b]))continue;if("HistoryData-Vol"==y.DataType)x=x.Vol,w=this.FormatValue(x,y);else if("MultiReport"==y.DataType)w=this.FormatMultiReport(x,y);else if("ChartStackedBar"==y.DataType){if(!(F=this.FromatStackedBarTitle(x,y)))continue}else w=this.FormatValue(x,y)}if(F)for(var L=0;L<F.length;++L){var M=F[L];if(P=M.Name?M.Name+":"+M.Text:M.Text,l+(N=this.Canvas.measureText(P).width+2)>o)break;if(this.OverlayIndexType.BGColor){this.Canvas.fillStyle=this.OverlayIndexType.BGColor;T={Left:l,Top:u-c/2,Width:N,Height:c+h};this.Canvas.fillRect(T.Left,T.Top,T.Width,T.Height)}this.Canvas.fillStyle=M.Color,this.Canvas.fillText(P,l,u,N),l+=N}else{var N,P=w;if(y.Name){var R=this.GetDynamicOutName(y.Name,g);P=R?R+":"+w:y.Name+":"+w}if(l+(N=this.Canvas.measureText(P).width+2)>o)break;if(this.OverlayIndexType.BGColor){this.Canvas.fillStyle=this.OverlayIndexType.BGColor;T={Left:l,Top:u-c/2,Width:N,Height:c+h};this.Canvas.fillRect(T.Left,T.Top,T.Width,T.Height)}this.Canvas.fillStyle=y.Color,this.Canvas.fillText(P,l,u,N),l+=N}}}if((u+=c+h)+c+h>=s)break}}}catch(t){C=!0,p=t}finally{try{!d&&D.return&&D.return()}finally{if(C)throw p}}},this.DrawOverlayIndex=function(t){var e=this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.TitleHeight/2,a=this.Frame.ChartBorder.GetRight();if(!0===this.Frame.IsHScreen&&(e=-this.Frame.ChartBorder.TitleHeight/2,a=this.Frame.ChartBorder.GetHeight()),!(t>a)){var i=5*A(),r=t,n=!0,o=!1,s=void 0;try{for(var h,l=(0,f.default)(this.OverlayIndex);!(n=(h=l.next()).done);n=!0){t+=i;var u=(C=h.value)[1],c=C[0];if(u.Title&&this.IsShowOverlayIndexName){if(this.Canvas.fillStyle=this.TitleColor,r=t,(t+=g=this.Canvas.measureText(u.Title).width+2)>a)break;this.Canvas.fillText(u.Title,r,e,g),this.IsSelectedChart(c)&&this.DrawSelectedLine(r,e,g)}for(var d in u.Data){var C=u.Data[d];if(C&&C.Data&&C.Data.Data&&C.Name&&!(C.Data.Data.length<=0)){var p=null,m=null;if("StraightLine"==C.DataType)p=C.Data.Data[0],m=this.FormatValue(p,C);else{var D=Math.abs(this.CursorIndex-.5);D=parseInt(D.toFixed(0)),this.IsKLineFrame&&(D=this.CursorIndex);var v=C.Data.DataOffset+D;if(v>=C.Data.Data.length&&(v=C.Data.Data.length-1),v<0)continue;if(null==(p=C.Data.Data[v]))continue;"HistoryData-Vol"==C.DataType?(p=p.Vol,m=this.FormatValue(p,C)):m="MultiReport"==C.DataType?this.FormatMultiReport(p,C):this.FormatValue(p,C)}this.Canvas.fillStyle=C.Color;var g,S=C.Name+":"+m;if(r=t,(t+=g=this.Canvas.measureText(S).width+2)>a)break;this.Canvas.fillText(S,r,e,g)}}if(t>a)break}}catch(t){o=!0,s=t}finally{try{!n&&l.return&&l.return()}finally{if(o)throw s}}}},this.HScreenDraw=function(){var t=this.Frame.ChartBorder.GetHScreenBorder(),e=this.Frame.ChartBorder.GetRightTitle(),a=t.TopEx;this.Canvas.translate(e,a),this.Canvas.rotate(90*Math.PI/180);var i=1,r=-this.Frame.ChartBorder.TitleHeight/2,n=this.Frame.ChartBorder.GetHeight();this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font;var o=A();if(this.Title&&this.IsShowIndexName){var s=this.Canvas.measureText(this.Title).width+2;if(this.IsDrawTitleBG){var h=this.Title;this.IsShowNameArrow&&(h+="▼");s=this.Canvas.measureText(h).width;var l=this.Canvas.measureText("擎").width+4*o,u=s+4*o;this.TitleRect={Top:t.Top,Left:this.Frame.ChartBorder.GetRightTitle()+this.Frame.ChartBorder.TitleHeight/2-l/2,Width:l,Height:u},this.Canvas.fillStyle=this.BGColor;var c={Left:i,Top:r-l/2,Width:u,Height:l};this.Canvas.fillRect(c.Left,c.Top,c.Width,c.Height),this.BGBorderColor&&(this.Canvas.strokeStyle=this.BGBorderColor,this.Canvas.strokeRect(_(c.Left),_(c.Top),k(c.Width),k(c.Height))),this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(h,i+2*o,r,s),i+=u+2*o,i+=this.TitleSpace}else this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(this.Title,i,r,s),i+=s,i+=this.TitleSpace}if(this.ArgumentsText&&this.IsShowIndexName){s=this.Canvas.measureText(this.ArgumentsText).width+2;this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(this.ArgumentsText,i,r,s),i+=s,i+=this.TitleSpace}var f=this.IsShowLastData(),d=this.Frame.GetLockRect();if(d){var C=Math.abs(this.CursorIndex-.5);if(this.IsKLineFrame&&(C=this.CursorIndex),this.Frame.GetXFromIndex(C.toFixed(0))>=d.Top)return;if(f)return}for(var p in this.Data){var m=this.Data[p],D=this.GetTitleItem(m,f);if(D){var v=D.Text,g=D.ArrayText;if(g)for(var S=0;S<g.length;++S){var T=g[S];y=T.Name?T.Name+":"+T.Text:T.Text;var I=this.ParamSpace*A();if(i+(s=this.Canvas.measureText(y).width+I)>n)break;this.Canvas.fillStyle=T.Color,this.Canvas.fillText(y,i,r,s),i+=s}else{this.Canvas.fillStyle=m.Color;var y=v;if(m.Name){var x=this.GetDynamicOutName(m.Name);y=x?x+":"+v:m.Name+":"+v}I=this.ParamSpace*A();if(i+(s=this.Canvas.measureText(y).width+I)>n)break;this.Canvas.fillText(y,i,r,s),i+=s}}}if(this.Explain){this.Canvas.fillStyle=this.TitleColor;y="说明:"+this.Explain;i+(s=this.Canvas.measureText(y).width+2)<n&&(this.Canvas.fillText(y,i,r,s),i+=s)}1==this.OverlayIndexType.Position?this.Frame.ChartBorder.IsShowTitleOnly||this.DrawOverlayIndexSingleLine():this.DrawOverlayIndex(i+5*A())},this.OnDrawEventCallback=function(t){if(this.OnDrawEvent&&this.OnDrawEvent.Callback){var e={Draw:t,Name:"DynamicChartTitlePainting"};this.OnDrawEvent.Callback(this.OnDrawEvent,e,this)}},this.GetFontHeight=function(t){return O(this.Canvas,t,"擎")},this.DrawNameButton=function(t,e,a){var i=A(),r=this.Title;this.IsShowNameArrow&&(r+="▼");var n=this.Canvas.measureText(r).width,o=this.Canvas.measureText("擎").width+4*i,s=this.BorderRoundRadius*i,h=n+4*i+2*s;t.Top=t.YCenter-o/2-1,t.Width=h,t.Height=o,t.Right=t.Left+t.Width,t.Bottom=t.Top+t.Height;var l=this.BGBorderColor;if(e&&e.X>=t.Left&&e.X<t.Right&&e.Y>=t.Top&&e.Y<=t.Bottom&&(this.BGBorderMoveOnColor&&(l=this.BGBorderMoveOnColor),a)){var u={ID:b.INDEX_NAME_BUTTON};a.MouseOnToolbar={ID:"IndexNameButton",Rect:t,Item:u,Frame:this.Frame,Point:{X:e.X,Y:e.Y}}}this.Canvas.beginPath(),this.Canvas.roundRect(_(t.Left),_(t.Top),k(t.Width),k(t.Height),[s]),this.Canvas.closePath(),this.Canvas.fillStyle=this.BGColor,this.Canvas.fill(),l&&(this.Canvas.strokeStyle=l,this.Canvas.stroke()),this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(r,t.Left+s+2*i,t.YCenter,n)},this.DrawButton=function(t,e,a,i){var r=t.Style.Size;Te.IsNumber(t.Style.YMoveOffset)&&(e.YCenter+=t.Style.YMoveOffset);var n=r+"px "+t.Style.Family;e.Top=e.YCenter-r/2,e.Width=r+t.Style.MerginLeft,e.Height=r,e.Bottom=e.Top+e.Height,e.Right=e.Left+e.Width;var o=t.Style.Color;return a&&a.X>=e.Left&&a.X<e.Right&&a.Y>=e.Top&&a.Y<=e.Bottom&&(o=t.Style.MoveOnColor,i&&(i.MouseOnToolbar={ID:"TitleButton",Rect:e,Item:t,Frame:this.Frame,Point:{X:a.X,Y:a.Y}})),this.Canvas.fillStyle=o,this.Canvas.font=n,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(t.Style.Text,e.Left,e.YCenter),!0},this.DrawToolbar=function(t,e,a){if(t.Width=0,this.Frame&&this.Frame.GetLeftToolbar){var i=this.Frame.GetLeftToolbar();if(Te.IsNonEmptyArray(i))if(!0===this.Frame.IsHScreen);else{for(var r=this.Frame.GetBorder(),n=(r.Right,r.Left+3),o=t.YCenter,s=0;s<i.length;++s){var h=i[s],l={Left:n,YCenter:o};this.DrawButton(h,l,e,a),this.Buttons.push({ID:h.ID,Rect:l,FrameID:this.Frame.Identify,Type:0}),n=l.Right,t.Width+=l.Width}t.Width>0&&(t.Width+=3)}}},this.DrawOverlayToolbar=function(t,e,a,i){if(e.Width=0,t&&t.Frame&&t.Frame.GetLeftToolbar){var r=t.Frame,n=r.GetLeftToolbar({Overlay:t,OverlayID:e.ID});if(Te.IsNonEmptyArray(n))if(!0===this.Frame.IsHScreen);else{for(var o=r.GetBorder(),s=(o.Right,o.Left+3),h=e.YCenter,l=0;l<n.length;++l){var u=n[l],c={Left:s,YCenter:h};this.DrawButton(u,c,a,i),this.Buttons.push({ID:u.ID,Rect:c,FrameID:this.Frame.Identify,Type:1,OverlayID:e.ID,Title:t.Title}),s=c.Right,e.Width+=c.Width}e.Width>0&&(e.Width+=3)}}},this.PtInButtons=function(t,e){for(var a=0;a<this.Buttons.length;++a){var i=this.Buttons[a];if(i.Rect){var r=i.Rect;if(t>r.Left&&t<r.Right&&e>r.Top&&e<r.Bottom){var n={ID:i.ID,Rect:r,FrameID:i.FrameID,Type:i.Type};return 1==i.Type&&(n.Title=i.Title,n.OverlayID=i.OverlayID),n}}}return null}}function We(){this.Frame,this.Canvas,this.Point=new Array,this.Value=new Array,this.LinePoint=[],this.PointCount=2,this.Status=0,this.PointStatus=0,this.MovePointIndex=null,this.ClassName="IChartDrawPicture",this.FinishedCallback,this.Guid=P(),this.Symbol,this.Period,this.Right,this.IsSelected=!1,this.Option,this.EnableMove=!0,this.EnableSave=!0,this.EnableCtrlMove=!1,this.OnlyMoveXIndex=!1,this.IsSupportMagnet=!1,this.IsDrawFirst=!1,this.IsShowYCoordinate=!1,this.LineColor=ia.DrawPicture.LineColor[0],this.LineWidth=2,this.BackupLineWidth=null,this.AreaColor="rgba(25,25,25,0.4)",this.PointColor=ia.DrawPicture.PointColor[0],this.MoveOnPointColor=ia.DrawPicture.PointColor[1],this.PointBGColor=ia.DrawPicture.PointColor[2],this.PointRadius=5,this.SquareSize=8,this.PointType=ia.DrawPicture.PointType,this.IsShowPoint=ia.DrawPicture.IsShowPoint,this.LimitFrameID,this.SetLastPoint=null,this.Update=null,this.GetActiveDrawPicture=null,this.GetYCoordinatePoint=null,this.Draw=function(){},this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.LineWidth>0&&(this.LineWidth=t.LineWidth),t.AreaColor&&(this.AreaColor=t.AreaColor),t.PointColor&&(this.PointColor=t.PointColor),t.MoveOnPointColor&&(this.SelectPointColor=t.PointColor),t.PointRadius&&(this.PointRadius=t.PointRadius),Te.IsNumber(t.SquareSize)&&(this.SquareSize=t.SquareSize),Te.IsBool(t.IsShowPoint)&&(this.IsShowPoint=t.IsShowPoint),Te.IsNumber(t.LimitFrameID)&&(this.LimitFrameID=t.LimitFrameID),Te.IsBool(t.EnableCtrlMove)&&(this.EnableCtrlMove=t.EnableCtrlMove),Te.IsBool(t.IsShowYCoordinate)&&(this.IsShowYCoordinate=t.IsShowYCoordinate))},this.ReloadResource=function(t){t||(this.PointColor=ia.DrawPicture.PointColor[0],this.MoveOnPointColor=ia.DrawPicture.PointColor[1],this.PointBGColor=ia.DrawPicture.PointColor[2])},this.SetLineWidth=function(){this.BackupLineWidth=null,this.LineWidth>0&&(this.BackupLineWidth=this.Canvas.lineWidth,this.Canvas.lineWidth=this.LineWidth*A())},this.GetFontHeight=function(t){return O(this.Canvas,t,"擎")},this.RestoreLineWidth=function(){null!=this.BackupLineWidth&&(this.Canvas.lineWidth=this.BackupLineWidth)},this.PointMagnetKLine=function(){if(!this.IsSupportMagnet)return!1;if(!this.Frame)return!1;if("MinuteFrame"==this.Frame.ClassName||"MinuteHScreenFrame"==this.Frame.Class)return!1;if(0!=this.Frame.Identify)return!1;var t=-1;if(2==this.Status?t=1:1==this.Status?t=0:Te.IsNumber(this.MovePointIndex)&&(t=this.MovePointIndex),t<0)return!1;if(this.Option&&this.Option.Magnet&&this.Option.Magnet.Enable){var e={IsFixedX:!1,Magnet:{Enable:!0,PointIndex:t,Distance:this.Option.Magnet.Distance,Type:this.Option.Magnet.Type}};return this.AdjustPoint(this.Point,e)}return!1},this.PointToValue=function(){return!!this.Frame&&("MinuteFrame"==this.Frame.ClassName||"MinuteHScreenFrame"==this.Frame.Class?this.PointToValue_Minute():this.PointToValue_KLine())},this.PointToKLine=function(t){if(!this.Frame)return null;var e=this.Frame.Data;if(!e)return null;var a=[];if(this.Frame.IsHScreen)for(var i in t){var r=t[i],n={XValue:s=parseInt(this.Frame.GetXData(r.Y))+e.DataOffset,YValue:this.Frame.GetYData(r.X)},o=e.Data[s];n.DateTime={Date:o.Date},Te.IsNumber(o.Time)&&(n.DateTime.Time=o.Time),a[i]=n}else for(var i in t){r=t[i];var s,h=parseInt(this.Frame.GetXData(r.X,!1));(s=h+e.DataOffset)<0?s=0:s>=e.Data.length&&(h=(s=e.Data.length-1)-e.DataOffset);n={XValue:s,YValue:this.Frame.GetYData(r.Y,!1),XIndex:h},o=e.Data[s];n.DateTime={Date:o.Date},Te.IsNumber(o.Time)&&(n.DateTime.Time=o.Time),a[i]=n}return a},this.PointToValue_KLine=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;if(this.Frame.IsHScreen)for(var e in this.Point){var a=this.Point[e],i={XValue:n=parseInt(this.Frame.GetXData(a.Y,!1))+t.DataOffset,YValue:this.Frame.GetYData(a.X,!1)},r=t.Data[n];i.DateTime={Date:r.Date},Te.IsNumber(r.Time)&&(i.DateTime.Time=r.Time),this.Value[e]=i}else for(var e in this.Point){var n;a=this.Point[e];(n=parseInt(this.Frame.GetXData(a.X,!1))+t.DataOffset)<0?n=0:n>=t.Data.length&&(n=t.Data.length-1);i={XValue:n,YValue:this.Frame.GetYData(a.Y,!1)},r=t.Data[n];i.DateTime={Date:r.Date},Te.IsNumber(r.Time)&&(i.DateTime.Time=r.Time),this.Value[e]=i}return!0},this.PointToValue_Minute=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;if(this.Frame.IsHScreen)for(var e=0;e<this.Point.length;++e){var a=this.Point[e],i={XValue:o=parseInt(this.Frame.GetXData(a.Y)),YValue:s=this.Frame.GetYData(a.X)},r=t.Data[o];i.DateTime={Date:r.Date,Time:r.Time},this.Value[e]=i}else{var n=La.GetTimeData(this.Symbol);for(e=0;e<this.Point.length;++e){a=this.Point[e];var o=parseInt(this.Frame.GetXData(a.X)),s=this.Frame.GetYData(a.Y);if(o>=t.Data.length){var h=o%n.length,l=t.Data.length-1,u=(i={XValue:o,YValue:s},r=t.Data[l],n[h]);i.DateTime={Date:r.Date,Time:u},this.Value[e]=i}else{i={XValue:o,YValue:s},r=t.Data[o];i.DateTime={Date:r.Date,Time:r.Time},this.Value[e]=i}}}return!0},this.IsPointIn=function(t,e,a){return!1},this.ValueToPoint=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;var e=this.Frame.IsHScreen;this.Point=[];for(var a=0;a<this.Value.length;++a){var i=this.Value[a],r=new V;e?(r.Y=this.Frame.GetXFromIndex(i.XValue-t.DataOffset,!1),r.X=this.Frame.GetYFromData(i.YValue,!1)):(r.X=this.Frame.GetXFromIndex(i.XValue-t.DataOffset,!1),r.Y=this.Frame.GetYFromData(i.YValue,!1)),this.Point[a]=r}},this.UpdateXValue=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;for(var e=[],a=0;a<this.Value.length;++a){var i=this.Value[a];if(!i.DateTime)break;var r={Date:i.DateTime.Date};Te.IsNumber(i.DateTime.Time)&&(r.Time=i.DateTime.Time),e[a]=r}for(var a in t.FindDataIndexByDateTime(e),e){var n=e[a],o=this.Value[a];n.Index>=0&&(o.XValue=n.Index)}},this.Move=function(t,e){if(20!=this.Status)return fasle;if(!this.Frame)return!1;if(!this.Frame.Data)return!1;if(null==this.MovePointIndex)return!1;var a=parseInt(this.MovePointIndex);if(100===a)for(var i in this.Point)this.Point[i].X+=t,this.Point[i].Y+=e;else{if(0!==a&&1!==a&&2!==a&&3!==a&&4!==a&&5!==a)return!1;a<this.Point.length&&(this.Point[a].X+=t,this.Point[a].Y+=e)}},this.ClipFrame=function(){if(this.Frame.IsHScreen)var t=this.Frame.ChartBorder.GetLeftEx(),e=this.Frame.ChartBorder.GetTop(),a=this.Frame.ChartBorder.GetWidthEx(),i=this.Frame.ChartBorder.GetHeight();else t=this.Frame.ChartBorder.GetLeft(),e=this.Frame.ChartBorder.GetTopEx(),a=this.Frame.ChartBorder.GetWidth(),i=this.Frame.ChartBorder.GetHeightEx();this.Canvas.save(),this.Canvas.beginPath(),this.Canvas.rect(t,e,a,i),this.Canvas.clip()},this.CalculateDrawPoint=function(t){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var e=[];if(10==this.Status){var a=this.Frame.Data;if(!a)return null;for(var i=this.Frame.XPointCount,r=0,n=this.Frame.IsHScreen,o=0;o<this.Value.length;++o){var s=(l=this.Value[o]).XValue-a.DataOffset;(s<0||s>=i)&&++r;var h=new V;n?(h.Y=this.Frame.GetXFromIndex(l.XValue-a.DataOffset,!1),h.X=this.Frame.GetYFromData(l.YValue,!1)):(h.X=this.Frame.GetXFromIndex(l.XValue-a.DataOffset,!1),h.Y=this.Frame.GetYFromData(l.YValue,!1)),e.push(h)}if(t&&!0===t.IsCheckX&&r==this.Value.length)return null}else{for(o=0;o<this.Point.length;++o){var l=this.Point[o];e.push({X:l.X,Y:l.Y})}if(this.OnlyMoveXIndex){t={IsFixedX:this.OnlyMoveXIndex};if(D.Chart.Log("[IChartDrawPicture::CalculateDrawPoint] Status="+this.Status+" MovePointIndex="+this.MovePointIndex+" Identify="+this.Frame.Identify),this.Option&&this.Option.Magnet&&this.Option.Magnet.Enable&&this.IsSupportMagnet&&0==this.Frame.Identify){var u=-1;2==this.Status&&(u=1),Te.IsNumber(this.MovePointIndex)&&(u=this.MovePointIndex),u>=0&&(t.Magnet={Enable:!0,PointIndex:u,Distance:this.Option.Magnet.Distance,Type:this.Option.Magnet.Type})}this.AdjustPoint(e,t)}}return e},this.AdjustPoint=function(t,e){return!!this.Frame&&("MinuteFrame"!=this.Frame.ClassName&&"MinuteHScreenFrame"!=this.Frame.Class&&this.AdjustPoint_KLine(t,e))},this.AdjustPoint_KLine=function(t,e){if(!e)return!1;if(!this.Frame)return!1;var a=this.Frame.Data;if(!a)return!1;if(this.Frame.IsHScreen)for(var i=0;i<t.length;++i)var r=t[i],n=parseInt(this.Frame.GetXData(r.Y))+a.DataOffset;else for(i=0;i<t.length;++i){r=t[i];var o=parseInt(this.Frame.GetXData(r.X,!1));if((n=o+a.DataOffset)<0?n=0:n>=a.Data.length&&(n=a.Data.length-1),e.IsFixedX&&(o=n-a.DataOffset,r.X=this.Frame.GetXFromIndex(o,!1)),e.Magnet&&e.Magnet.Enable&&i==e.Magnet.PointIndex){for(var s=a.Data[n],h=[s.Open,s.High,s.Low,s.Close],l=null,u=null,c=0;c<h.length;++c){var f=this.Frame.GetYFromData(h[c]),d=Math.abs(r.Y-f);(!Te.IsNumber(l)||l>d)&&(l=d,u=f)}1==e.Magnet.Type?Te.IsNumber(u)&&(r.Y=u):l<e.Magnet.Distance&&Te.IsNumber(u)&&(r.Y=u)}}},this.IsYValueInFrame=function(t){return!!this.Frame&&!(t>this.Frame.HorizontalMax||t<this.Frame.HorizontalMin)},this.DrawPoint=function(t){if(Te.IsNonEmptyArray(t)){var e=this.PointColor,a=!1;if(this.IsShowPoint);else if(this.GetActiveDrawPicture){var i=this.GetActiveDrawPicture();if(i.Move.Guid!=this.Guid&&i.Select.Guid!=this.Guid&&i.MoveOn.Guid!=this.Guid)return;i.Select.Guid!=this.Guid&&i.MoveOn.Guid==this.Guid&&(a=!0,e=this.MoveOnPointColor)}this.ClipFrame();var r=A();this.Canvas.fillStyle=e,2==this.PointType&&(this.Canvas.fillStyle=this.PointBGColor,this.Canvas.strokeStyle=this.PointColor,this.Canvas.lineWidth=a?1*r:2*r);for(var n=0;n<t.length;++n){var o=t[n];if(1==this.PointType){var s=this.SquareSize*r,h=o.X-s/2,l=o.Y-s/2;this.Canvas.fillRect(h,l,s,s)}else if(2==this.PointType){var u=new Path2D;u.arc(o.X,o.Y,this.PointRadius*r,0,360,!1),this.Canvas.fill(u),this.Canvas.stroke(u)}else this.Canvas.beginPath(),this.Canvas.arc(o.X,o.Y,this.PointRadius*r,0,360,!1),this.Canvas.fill(),this.Canvas.closePath()}this.Canvas.restore()}},this.CalculateExtendLinePoint=function(t,e){var a={},i=(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetRight(),this.Frame.ChartBorder.GetTopEx()),r=this.Frame.ChartBorder.GetBottom(),n=e.X-t.X,o=e.Y-t.Y;if(n>0){var s=n*(l=r-t.Y)/o;(h=new V).X=t.X+s,h.Y=r,a.End=h;s=n*(l=e.Y-i)/o;(u=new V).Y=i,u.X=e.X-s,a.Start=u}else{var h,l=r-t.Y;s=Math.abs(n)*l/o;(h=new V).X=t.X-s,h.Y=r,a.End=h;var u;l=e.Y-i,s=Math.abs(n)*l/o;(u=new V).Y=i,u.X=e.X+s,a.Start=u}return a},this.CalculateExtendLineEndPoint=function(t){var e=this.Frame.ChartBorder.GetLeft(),a=this.Frame.ChartBorder.GetRight(),i=this.Frame.ChartBorder.GetBottomEx(),r=this.Frame.ChartBorder.GetTopEx(),n=t[1].X-t[0].X,o=t[1].Y-t[0].Y;if(n>0){var s,h;if((s=(a-t[0].X)*o/n+t[0].Y)>=r&&s<=i)return(h=new V).X=a,h.Y=s,h;if(o>0){var l=n*(i-t[0].Y)/o+t[0].X;return(u=new V).X=l,u.Y=i,u}l=n*(r-t[0].Y)/o+t[0].X;return(u=new V).X=l,u.Y=r,u}if((s=(t[0].X-e)*o/Math.abs(n)+t[0].Y)>=r&&s<=i)return(h=new V).X=e,h.Y=s,h;if(o>0){l=n*(i-t[0].Y)/o+t[0].X;return(u=new V).X=l,u.Y=i,u}var u;l=n*(r-t[0].Y)/o+t[0].X;return(u=new V).X=l,u.Y=r,u},this.IsPointInXYValue=function(t,e,a){if(!this.Frame)return-1;var i=this.Frame.Data;if(!i)return-1;if(!this.Value)return-1;var r=5;a&&Te.IsNumber(a.Zoom)?r+=a.Zoom:this.Option&&Te.IsNumber(this.Option.Zoom)&&(r+=this.Option.Zoom);var n=this.Frame.IsHScreen;r*=A();for(var o=0;o<this.Value.length;++o){var s=this.Value[o],h=new V;if(n?(h.Y=this.Frame.GetXFromIndex(s.XValue-i.DataOffset),h.X=this.Frame.GetYFromData(s.YValue)):(h.X=this.Frame.GetXFromIndex(s.XValue-i.DataOffset),h.Y=this.Frame.GetYFromData(s.YValue)),this.Canvas.beginPath(),this.Canvas.arc(h.X,h.Y,r,0,360),this.Canvas.isPointInPath(t,e))return o}return-1},this.IsPointInLine=function(t,e,a){if(!this.LinePoint)return-1;var i=5;a&&Te.IsNumber(a.Zoom)?i+=a.Zoom:this.Option&&Te.IsNumber(this.Option.Zoom)&&(i+=this.Option.Zoom),i*=A();for(var r=0;r<this.LinePoint.length;++r){var n=this.LinePoint[r],o=n.Start,s=n.End;if(this.Canvas.beginPath(),o.X==s.X?(this.Canvas.moveTo(o.X-i,o.Y),this.Canvas.lineTo(o.X+i,o.Y),this.Canvas.lineTo(s.X+i,s.Y),this.Canvas.lineTo(s.X-i,s.Y)):(this.Canvas.moveTo(o.X,o.Y+i),this.Canvas.lineTo(o.X,o.Y-i),this.Canvas.lineTo(s.X,s.Y-i),this.Canvas.lineTo(s.X,s.Y+i)),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return r}return-1},this.IsPointIn_XYValue_Line=function(t,e,a){if(10!=this.Status)return-1;var i=this.IsPointInXYValue(t,e,a);return i>=0?i:(i=this.IsPointInLine(t,e,a))>=0?100:-1},this.DrawLine=function(t,e,a){a&&this.Canvas.setLineDash([5,10]),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke(),a&&this.Canvas.setLineDash([])},this.CreateLineData=function(t,e){var a={Start:new V,End:new V};return a.Start.Y=t.Y,a.Start.X=t.X,a.End.Y=e.Y,a.End.X=e.X,a},this.ExportStorageData=function(){for(var t={ClassName:this.ClassName,Symbol:this.Symbol,Guid:this.Guid,Period:this.Period,Value:[],FrameID:this.Frame.Identify,LineColor:this.LineColor,AreaColor:this.AreaColor,LineWidth:this.LineWidth,Right:this.Right,EnableSave:this.EnableSave,IsShowYCoordinate:this.IsShowYCoordinate},e=0;e<this.Value.length;++e){var a=this.Value[e];t.Value.push({XValue:a.XValue,YValue:a.YValue,DateTime:a.DateTime})}return this.Text&&(t.Text=this.Text),this.FontOption&&(t.FontOption=this.FontOption),t},this.ExportBaseData=function(){var t={ClassName:this.ClassName,Guid:this.Guid,FrameID:this.Frame.Identify,Symbol:this.Symbol,Period:this.Period,Right:this.Right,LineColor:this.LineColor,LineWidth:this.LineWidth,EnableSave:this.EnableSave,IsShowYCoordinate:this.IsShowYCoordinate};return this.AreaColor&&(t.AreaColor=this.AreaColor),this.Text&&(t.Text=this.Text),this.FontOption&&(t.FontOption={},this.SetFont(t.FontOption,this.FontOption)),t},this.IsFrameMinSize=function(){return this.Frame&&this.Frame.IsMinSize},this.PointRange=function(t){if(!Te.IsNonEmptyArray(t))return null;if(1==t.length)return{Points:[{X:t[0].X,Y:t[0].Y}]};for(var e=t[0].X,a=e,i=t[0].Y,r=i,n=[{X:t[0].X,Y:t[0].Y}],o=1;o<t.length;++o)e<t[o].X&&(e=t[o].X),a>t[o].X&&(a=t[o].X),i<t[o].Y&&(i=t[o].Y),r>t[o].Y&&(r=t[o].Y),n.push({X:t[o].X,Y:t[o].Y});return{X:{Max:{X:e},Min:{X:a}},Y:{Max:{Y:i},Min:{Y:r}},Points:n}},this.GetXYCoordinate_default=function(){if(this.IsFrameMinSize())return null;var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});return this.PointRange(t)},this.GetXYCoordinate=function(){return null},this.CopyData_default=function(){if(!this.Frame)return null;var t=this.ExportStorageData();if(!t)return null;var e=0;if("MinuteFrame"==this.Frame.ClassName||"MinuteHScreenFrame"==this.Frame.Class);else{var a=this.Frame.Data;if(!a)return null;e=a.DataOffset}for(var i=this.Frame.ChartBorder.GetHeight(),r=this.Frame.ChartBorder.GetBottomEx()-this.Point[0].Y,n=0;n<t.Value.length;++n){var o=t.Value[n],s=this.Point[n];if(o.XIndex=o.XValue-e+1,0==n)o.XOffset=0,o.YOffset=0;else{var h=t.Value[n-1],l=this.Point[n-1];o.XOffset=o.XValue-h.XValue,o.YOffset=s.Y-l.Y}}return t.DataOffset=e,t.YFristScale=r/i,t.Height=i,t},this.SetFont=function(t,e){e&&t&&(e.Family&&(t.Family=e.Family),e.Weight&&(t.Weight=e.Weight),e.Style&&(t.Style=e.Style),Te.IsNumber(e.Size)&&(t.Size=e.Size))},this.GetFontString=function(t){var e=16*A()+"px 微软雅黑";if(!t||!t.Family||!Te.IsPlusNumber(t.Size))return e;var a="";return t.Color&&(a+=t.Color+" "),t.Style&&(a+=t.Style+" "),t.Weight&&(a+=t.Weight+" "),a+=t.Size*A()+"px ",a+=t.Family},this.GetMultiLineText=function(t,e,a,i){if(a&&(this.Canvas.font=a),(u=this.Canvas.measureText(t).width)<=e)return{AryText:[{Text:t}]};for(var r=this.Canvas.measureText("擎").width,n=parseInt(e/r),o=0,s=[];o<t.length-1;){var h=n,l=o+h;l>=t.length&&(h=(l=t.length-1)-o);var u,c=t.slice(o,o+h);if((u=this.Canvas.measureText(c).width)>e){for(var f=h;f>=0;--f)if(c=t.slice(o,o+f),(u=this.Canvas.measureText(c).width)<e){s.push({Text:c}),o+=f;break}}else if(u<e){var d=!1;for(f=h;f+o<=t.length;++f)if(c=t.slice(o,o+f),(u=this.Canvas.measureText(c).width)>e){c=t.slice(o,o+f-1),s.push({Text:c}),o+=f-1,d=!0;break}d||(s.push({Text:c}),o=t.length-1)}else s.push({Text:c}),o+=h}return{AryText:s}},this.CloneArrayText=function(t){if(!Te.IsNonEmptyArray(t))return[];for(var e=[],a=0;a<t.length;++a){var i=t[a];i&&e.push({Text:i.Text})}return e},this.CalculateAngle=function(t,e,a,i){var r=Math.abs(t-a),n=Math.abs(e-i),o=r/Math.sqrt(Math.pow(r,2)+Math.pow(n,2)),s=Math.acos(o),h=180/(Math.PI/s);return a==t&&i<e?90:a==t&&i>e?270:a>t&&i==e?0:a<t&&i==e?180:a>t&&i>e?360-h:a<t&&i>e?180+h:a<t&&i<e?180-h:h}}function Ue(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureWaveMW",this.PointCount=5,this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.IsHScreen=!1,this.Draw=function(){if(this.LinePoint=[],this.Frame&&!this.IsFrameMinSize()){this.IsHScreen=this.Frame.IsHScreen;var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){for(var e in this.AreaColor=We.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.CalculateLines(t),this.SetLineWidth(),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.CalculateLines=function(t){if(this.Frame&&!(t.length<2))if(2==this.Status){(n={Start:new V,End:new V}).Start.Y=t[0].Y,n.Start.X=t[0].X,n.End.Y=t[1].Y,n.End.X=t[1].X,this.LinePoint.push(n);var e=t[1].X-t[0].X,a=t[1].Y-t[0].Y;n={Start:new V,End:new V},this.IsHScreen?(n.Start.Y=t[1].Y,n.Start.X=t[1].X,n.End.Y=t[1].Y+a,n.End.X=t[0].X):(n.Start.Y=t[1].Y,n.Start.X=t[1].X,n.End.Y=t[0].Y,n.End.X=t[1].X+e),this.LinePoint.push(n);var i=n.End;(r=new V).X=i.X,r.Y=i.Y,this.Point[2]=r,n={Start:new V,End:new V},this.IsHScreen?(n.Start.Y=i.Y,n.Start.X=i.X,n.End.Y=i.Y+a,n.End.X=t[1].X):(n.Start.Y=i.Y,n.Start.X=i.X,n.End.Y=t[1].Y,n.End.X=i.X+e),this.LinePoint.push(n);i=n.End;(r=new V).X=i.X,r.Y=i.Y,this.Point[3]=r,n={Start:new V,End:new V},this.IsHScreen?(n.Start.Y=i.Y,n.Start.X=i.X,n.End.Y=i.Y+a,n.End.X=t[0].X):(n.Start.Y=i.Y,n.Start.X=i.X,n.End.Y=t[0].Y,n.End.X=i.X+e),this.LinePoint.push(n);var r;i=n.End;(r=new V).X=i.X,r.Y=i.Y,this.Point[4]=r,this.PointCount=this.Point.length}else if(5==t.length){var n;(n={Start:new V,End:new V}).Start.Y=t[0].Y,n.Start.X=t[0].X,n.End.Y=t[1].Y,n.End.X=t[1].X,this.LinePoint.push(n),(n={Start:new V,End:new V}).Start.Y=t[1].Y,n.Start.X=t[1].X,n.End.Y=t[2].Y,n.End.X=t[2].X,this.LinePoint.push(n),(n={Start:new V,End:new V}).Start.Y=t[2].Y,n.Start.X=t[2].X,n.End.Y=t[3].Y,n.End.X=t[3].X,this.LinePoint.push(n),(n={Start:new V,End:new V}).Start.Y=t[3].Y,n.Start.X=t[3].X,n.End.Y=t[4].Y,n.End.X=t[4].X,this.LinePoint.push(n)}}}function Ke(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureParallelLines",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.PointCount=3,this.LastPoint,this.CenterLine={LineDash:[2*A(),3*A()],Line:null,IsShow:!1},this.Super_SetOption=this.SetOption,this.Super_ExportStorageData=this.ExportStorageData,this.SetOption=function(t){if(this.Super_SetOption&&this.Super_SetOption(t),t&&t.CenterLine){var e=t.CenterLine;Te.IsNonEmptyArray(e.LineDash)&&(this.CenterLine.LineDash=e.LineDash.slice(0)),Te.IsBool(e.IsShow)&&(this.CenterLine.IsShow=e.IsShow)}},this.ExportStorageData=function(){var t;return this.Super_ExportStorageData&&(t=this.Super_ExportStorageData(),this.CenterLine&&(t.CenterLine={IsShow:this.CenterLine.IsShow,LineDash:this.CenterLine.LineDash.slice(0)})),t},this.Draw=function(){if(this.LinePoint=[],this.CenterLine.Line=null,!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!1});if(t){this.AreaColor=We.ColorToRGBA(this.LineColor,.3);var e=t.slice(0);for(var a in this.CalculateLines(e),this.ClipFrame(),this.DrawArea(),this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}if(this.CenterLine.IsShow&&this.CenterLine.Line){i=this.CenterLine.Line;this.Canvas.setLineDash(this.CenterLine.LineDash),this.DrawLine(i.Start,i.End),this.Canvas.setLineDash([])}this.DrawPoint(e),this.Canvas.restore()}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.DrawArea=function(){2==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[1].Start.X,this.LinePoint[1].Start.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new V;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a)}else if(3==t.length){a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a);var i=t[2].X-t[1].X,r=t[2].Y-t[1].Y,n=new V,o=new V;n.X=t[0].X+i,n.Y=t[0].Y+r,o.X=t[1].X+i,o.Y=t[1].Y+r,a=this.CalculateExtendLinePoint(n,o),this.LinePoint.push(a);n=new V,o=new V;n.X=t[0].X+i/2,n.Y=t[0].Y+r/2,o.X=t[1].X+i/2,o.Y=t[1].Y+r/2,a=this.CalculateExtendLinePoint(n,o),this.CenterLine.Line=a}}}function ze(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawFlatTop",this.IsPointIn=this.IsPointIn_XYValue_Line,this.PointCount=3,this.LastPoint,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.AreaColor=We.ColorToRGBA(this.LineColor,.3);var e=t.slice(0);this.CalculateLines(e),this.ClipFrame();for(var a=0;a<this.LinePoint.length;++a){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}this.DrawArea(),this.DrawPoint(e),this.Canvas.restore()}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.DrawArea=function(){2==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[1].Start.X,this.LinePoint[1].Start.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=t[1],a=new V;a.X=e.X,a.Y=this.LastPoint.Y,t[2]=a}if(2==t.length)this.LinePoint.push({Start:t[0],End:t[1]});else if(3==t.length){this.LinePoint.push({Start:t[0],End:t[1]});var i=t[2];i.X=t[1].X;var r={X:t[0].X,Y:i.Y},n={X:t[1].X,Y:i.Y};this.LinePoint.push({Start:r,End:n})}}}function Je(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureIconFont",this.PointCount=1,this.Text="",this.FontOption={Family:"iconfont",Size:24},this.TextRect=null,this.SettingMenu,this.Angle=0,this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.FontOption&&t.FontOption.Size>0&&(this.FontOption.Size=t.FontOption.Size),Te.IsNumber(t.Angle)&&(this.Angle=t.Angle))},this.Draw=function(){if(this.TextRect=null,!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&1==t.length){var e=this.GetTextFont();if(e){this.ClipFrame();var a=this.Frame.IsHScreen,i=A();this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.font=e,a?(this.Canvas.translate(t[0].X,t[0].Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.Text,0,0)):0!=this.Angle?(this.Canvas.translate(t[0].X,t[0].Y),this.Canvas.rotate(this.Angle*(Math.PI/180)),this.Canvas.fillText(this.Text,0,0)):this.Canvas.fillText(this.Text,t[0].X,t[0].Y);var r=this.Canvas.measureText(this.Text).width;this.TextRect={},this.TextRect.Left=t[0].X-r/2,this.TextRect.Top=t[0].Y-this.FontOption.Size*i,this.TextRect.Width=r,this.TextRect.Height=this.FontOption.Size*i,this.Canvas.restore()}}}},this.GetTextFont=function(){if(!this.FontOption||!this.FontOption.Family||this.FontOption.Size<=0)return null;var t="";return this.FontOption.Size>=0&&(t+=this.FontOption.Size*A()+"px "),t+=this.FontOption.Family},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;if(!this.Frame.Data)return-1;if(!this.TextRect)return-1;var a=0;return this.Option&&this.Option.Zoom>=1&&(a=this.Option.Zoom*A()),this.Canvas.beginPath(),this.Canvas.rect(this.TextRect.Left-a,this.TextRect.Top-a,this.TextRect.Width+2*a,this.TextRect.Height+2*a),this.Canvas.isPointInPath(t,e)?100:-1}}function je(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureGannFan",this.IsPointIn=this.IsPointIn_XYValue_Line,this.LinePoint=[],this.Font=16*A()+"px 微软雅黑",this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.AreaColor=We.ColorToRGBA(this.LineColor,.3),this.ClipFrame();var e=this.GetQuadrant(t[0],t[1]);if(this.SetLineWidth(),1===e||4===e){for(var a in this.CalculateLines(t[0],t[1],e),this.DrawArea(),this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End,i.IsDottedLine)}for(var a in this.LinePoint){(i=this.LinePoint[a]).Text&&i.PtEnd&&this.DrawTitle(i.PtEnd,i.Text)}}else this.DrawLine(t[0],t[1],!1);this.RestoreLineWidth(),this.Canvas.restore(),this.DrawPoint(t)}}},this.GetQuadrant=function(t,e){return t.X<e.X&&t.Y>e.Y?1:t.X<e.X&&t.Y>e.Y?2:t.X<e.X&&t.Y<e.Y?4:3},this.DrawLine=function(t,e,a){a&&this.Canvas.setLineDash([5,10]),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke(),a&&this.Canvas.setLineDash([])},this.DrawTitle=function(t,e){this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.Canvas.font=this.Font,this.Canvas.fillText(e,t.X,t.Y)},this.DrawArea=function(){var t=null,e=null;for(var a in this.LinePoint){var i=this.LinePoint[a];"1:8"==i.Text?t=this.LinePoint[a]:"8:1"==i.Text&&(e=this.LinePoint[a])}t&&e&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.End.X,t.End.Y),this.Canvas.lineTo(t.Start.X,t.Start.Y),this.Canvas.lineTo(e.End.X,e.End.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t,e,a){if(!this.Frame)return!1;this.Frame.ChartBorder.GetTopEx(),this.Frame.ChartBorder.GetRight(),this.Frame.ChartBorder.GetBottom();var i=[.5,1/3,.25,.125,2/3],r=["1:2","1:3","1:4","1:8","2:3"],n=["2:1","3:1","4:1","8:1","3:2"],o=new V,s=new V;o.X=t.X,o.Y=t.Y,s.X=e.X,s.Y=e.Y;var h=Math.abs(t.X-e.X),l=Math.abs(t.Y-e.Y);if(1===a){var u={Start:o,End:(f=this.CalculateExtendLinePoint(t,e)).Start,IsDottedLine:!1,PtEnd:s,Text:"1:1"};for(var c in this.LinePoint.push(u),i){if(h>5){(u={Start:o,End:null,IsDottedLine:!1,PtEnd:new V,Text:r[c]}).PtEnd.Y=e.Y,u.PtEnd.X=t.X+h*i[c];var f=this.CalculateExtendLinePoint(u.Start,u.PtEnd);u.End=f.Start,this.LinePoint.push(u)}if(l>5){(u={Start:o,End:null,IsDottedLine:!1,PtEnd:new V,Text:n[c]}).PtEnd.Y=t.Y-l*i[c],u.PtEnd.X=e.X;f=this.CalculateExtendLinePoint(u.Start,u.PtEnd);u.End=f.Start,this.LinePoint.push(u)}}}else{if(4!=a)return!1;u={Start:o,End:(f=this.CalculateExtendLinePoint(t,e)).End,IsDottedLine:!1,PtEnd:s,Text:"1:1"};for(var c in this.LinePoint.push(u),i){if(h>5){(u={Start:o,End:null,IsDottedLine:!1,PtEnd:new V,Text:r[c]}).PtEnd.Y=e.Y,u.PtEnd.X=t.X+h*i[c];f=this.CalculateExtendLinePoint(u.Start,u.PtEnd);u.End=f.End,this.LinePoint.push(u)}if(l>5){(u={Start:o,End:null,IsDottedLine:!1,PtEnd:new V,Text:n[c]}).PtEnd.Y=t.Y+l*i[c],u.PtEnd.X=e.X;f=this.CalculateExtendLinePoint(u.Start,u.PtEnd);u.End=f.End,this.LinePoint.push(u)}}}return!0}}function qe(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureGoldenSection",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Font=14*A()+"px 微软雅黑",this.GetSectionData=function(){return[0,.236,.382,.5,.618,.8,1,1.236,1.382,1.5,1.618,1.8,2]},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();if(t&&2==t.length){for(var e in this.AreaColor=We.ColorToRGBA(this.LineColor,.3),this.CalculateLines(t[0],t[1]),this.ClipFrame(),this.SetLineWidth(),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End,a.IsDottedLine)}for(var e in this.RestoreLineWidth(),this.LinePoint){(a=this.LinePoint[e]).Text&&this.DrawTitle(a.Start,a.Text)}this.DrawPoint(t),this.Canvas.restore()}}},this.CalculateHSCreenLines=function(t,e){for(var a=this.GetSectionData(),i=this.Frame.ChartBorder.GetTop(),r=this.Frame.ChartBorder.GetBottom(),n=t.X-e.X,o=0;o<a.length;++o){var s=n*a[o],h={Start:new V,End:new V};h.Start.X=t.X-s,h.Start.Y=i,h.End.X=t.X-s,h.End.Y=r;var l="";l=0==o?"Base ":(100*a[o]).toFixed(2)+"% ",l+=this.Frame.GetYData(h.Start.X).toFixed(2),h.Text=l,this.LinePoint.push(h)}},this.CalculateLines=function(t,e){if(this.Frame.IsHScreen)this.CalculateHSCreenLines(t,e);else for(var a=this.GetSectionData(),i=this.Frame.ChartBorder.GetLeft(),r=this.Frame.ChartBorder.GetRight(),n=t.Y-e.Y,o=0;o<a.length;++o){var s=n*a[o],h={Start:new V,End:new V};h.Start.Y=t.Y-s,h.Start.X=i,h.End.Y=t.Y-s,h.End.X=r;var l="";l=0==o?"Base ":(100*a[o]).toFixed(2)+"% ",l+=this.Frame.GetYData(h.Start.Y).toFixed(2),h.Text=l,this.LinePoint.push(h)}},this.DrawLine=function(t,e){this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke()},this.DrawTitle=function(t,e){this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.Canvas.font=this.Font,this.Frame.IsHScreen?(this.Canvas.save(),this.Canvas.translate(t.X,t.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(e,0,0),this.Canvas.restore()):this.Canvas.fillText(e,t.X,t.Y)}}function Ze(t){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawLinearRegression",this.PointCount=2,this.IsPointIn=this.IsPointIn_XYValue_Line,this.ChartBorder,this.Lines=[],this.IsShowMaxMinLine=!1,this.IsShowExtendLine=!1,this.ExtendLineDash=[5,5],this.MaxPoint,this.MinPoint,t&&(1==t.IsShowMaxMinLine&&(this.IsShowMaxMinLine=!0),1==t.IsShowExtendLine&&(this.IsShowExtendLine=!0)),this.ImportStorageData=function(t){1==t.IsShowMaxMinLine&&(this.IsShowMaxMinLine=!0),1==t.IsShowExtendLine&&(this.IsShowExtendLine=!0),t.Lines&&(this.Lines=t.Lines),t.MaxPoint&&t.MinPoint&&(this.MaxPoint=t.MaxPoint,this.MinPoint=t.MinPoint)},this.Super_ExportStorageData=this.ExportStorageData,this.ExportStorageData=function(){var t;return this.Super_ExportStorageData&&((t=this.Super_ExportStorageData()).IsShowMaxMinLine=this.IsShowMaxMinLine,t.IsShowExtendLine=this.IsShowExtendLine,t.Lines=this.Lines,this.IsShowMaxMinLine&&(t.MaxPoint=this.MaxPoint,t.MinPoint=this.MinPoint)),t},this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){this.Point[0]={X:this.Lines[0].X,Y:this.Lines[0].Y},this.Point[1]={X:this.Lines[this.Lines.length-1].X,Y:this.Lines[this.Lines.length-1].Y},this.PointToValue_Backup()},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame(),this.ChartBorder=this.Frame.ChartBorder,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor;var e=t[0],a=t[1];if(10==this.Status)this.DrawLinearLines();else{var i=this.ChartBorder.GetTopEx(),r=this.ChartBorder.GetBottomEx(),n=this.PointToKLine([e,a]),o=this.Calculate(n);this.Lines=o.Points,this.MaxPoint=o.Max,this.MinPoint=o.Min,this.DrawLinearLines(),this.Canvas.beginPath(),this.Canvas.moveTo(e.X,i),this.Canvas.lineTo(e.X,r),this.Canvas.moveTo(a.X,i),this.Canvas.lineTo(a.X,r),this.Canvas.stroke()}this.RestoreLineWidth();var s={Start:e,End:a};this.LinePoint.push(s),this.DrawPoint(t),this.Canvas.restore()}else 10==this.Status&&(this.ClipFrame(),this.ChartBorder=this.Frame.ChartBorder,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.DrawLinearLines(),this.RestoreLineWidth(),this.Canvas.restore())}},this.Calculate=function(t){var e=t[0],a=t[1];e.XValue>a.XValue&&(e=t[1],a=t[0]);var i,r,n,o,s=a.XValue-e.XValue+1,h=this.Frame.Data.Data,l=a.XValue,u=0,c=0,f=0,d=0;for(n=0,g=s;n<s&&n<=l;++n,--g)u+=g,c+=h[l-n].Close;for(u/=s,c/=s,n=0,g=s;n<s&&n<=l;++n,--g)f+=(g-u)*(h[l-n].Close-c),d+=(g-u)*(g-u);i=c-u*(r=f/d);var C=[],p=null,m=null;for(n=0,o=s;n<s&&n<=l;++n,--o){var D=a.XIndex-n,v=a.XValue-n,g=this.Frame.GetXFromIndex(D),S=r*o+i,T=this.Frame.GetYFromData(S,!1),I={X:g,Y:T,XValue:v,YValue:S};C.push(I),(null==p||p.High<h[v].High)&&(p={X:g,Y:T,XValue:v,YValue:S,High:h[v].High}),(null==m||m.Low>h[v].Low)&&(m={X:g,Y:T,XValue:v,YValue:S,Low:h[v].Low})}return{Points:C,Slope:r,Const:i,Max:p,Min:m}},this.DrawLinearLines=function(){if(!this.Frame)return null;var t=this.Frame.Data;if(!t)return null;var e=this.Frame.XPointCount,a=t.DataOffset,i=this.Frame.IsHScreen,r=[];for(var n in this.Lines){var o=(h=this.Lines[n]).XValue-a;if(!(o<0||o>=e)){var s={};i||(s.X=this.Frame.GetXFromIndex(o,!1),s.Y=this.Frame.GetYFromData(h.YValue,!1),s.YValue=h.YValue),r.push(s)}}if(r.length>1){for(var n in r){var h=r[n];0==n?(this.Canvas.beginPath(),this.Canvas.moveTo(h.X,h.Y)):(this.Canvas.lineTo(h.X,h.Y),n==r.length-1&&this.Canvas.stroke())}this.DrawExtendLine(r)}if(this.IsShowMaxMinLine&&r.length>1&&this.MaxPoint&&this.MinPoint){var l=this.MaxPoint.High-this.MaxPoint.YValue;for(var n in r){(h=r[n]).Y=this.Frame.GetYFromData(h.YValue+l,!1),0==n?(this.Canvas.beginPath(),this.Canvas.moveTo(h.X,h.Y)):(this.Canvas.lineTo(h.X,h.Y),n==r.length-1&&this.Canvas.stroke())}this.DrawExtendLine(r);var u=this.MinPoint.Low-this.MinPoint.YValue;for(var n in r){(h=r[n]).Y=this.Frame.GetYFromData(h.YValue+u,!1),0==n?(this.Canvas.beginPath(),this.Canvas.moveTo(h.X,h.Y)):(this.Canvas.lineTo(h.X,h.Y),n==r.length-1&&this.Canvas.stroke())}this.DrawExtendLine(r)}},this.DrawExtendLine=function(t){if(this.IsShowExtendLine){var e,a=t[0],i=t[t.length-1];e=i.X>a.X?[a,i]:[i,a];var r=this.CalculateExtendLineEndPoint(e);this.Canvas.beginPath(),this.Canvas.moveTo(i.X,i.Y),this.Canvas.lineTo(r.X,r.Y),this.Canvas.setLineDash(this.ExtendLineDash),this.Canvas.stroke(),this.Canvas.setLineDash([])}}}function Qe(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawTwoPointDemo",this.PointCount=2,this.Font=16*A()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.PointInfo=[],this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){this.OnFinish(),this.PointToValue_Backup()},this.OnFinish=function(){for(var t in this.PointInfo){var e=this.PointInfo[t];e&&e.Point&&Te.IsNumber(e.Point.Y2)&&(this.Point[t].Y=this.PointInfo[t].Point.Y2)}},this.Draw=function(){if(this.LinePoint=[],this.PointInfo=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.IsHScreen=this.Frame.IsHScreen,this.ClipFrame(),this.SetLineWidth();t[0],t[1];if(this.CalculatePointInfo(t),10==this.Status)this.DrawEx();else for(var e=1;e<t.length;++e)this.DrawLine(t[e-1],t[e]);this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.CalculatePointInfo=function(t){if(this.Frame&&this.Frame.Data){var e=this.PointToKLine(t);if(3==this.PointCount&&2==this.PointStatus&&this.LastPoint)(n=new V).X=this.LastPoint.X,n.Y=this.LastPoint.Y,t[2]=n;var a=this.Frame.Data;for(var i in e){var r=e[i],n=t[i],o={KItem:a.Data[r.XValue],Data:r,Point:{X:n.X,Y:n.Y}};this.PointInfo.push(o)}this.CalculateYPoint(),D.Chart.Log("[ChartDrawTwoPointDemo::CalculateLines] kPoint",this.PointInfo)}},this.CalculateYPoint=function(){var t=this.PointInfo[0],e=this.Frame.GetYFromData(t.KItem.Low,!1);t.Point.Y2=e;var a=this.PointInfo[1],i=this.Frame.GetYFromData(a.KItem.High,!1);a.Point.Y2=i},this.DrawEx=function(){var t=this.PointInfo[0],e=this.PointInfo[1],a=(this.Frame.ChartBorder.GetRight(),{X:t.Point.X,Y:t.Point.Y2}),i={X:e.Point.X,Y:e.Point.Y2};this.DrawLine(a,i),this.LinePoint.push({Start:a,End:i}),this.Canvas.setLineDash([5,5]);var r=.09*e.KItem.YClose+e.KItem.High,n=this.Frame.GetYFromData(r,!1);this.DrawLine({X:this.ToFixedPoint(i.X),Y:i.Y},{X:this.ToFixedPoint(i.X),Y:n}),this.Canvas.textAlign="right",this.Canvas.textBaseline="center",this.Canvas.fillStyle="rgb(33,45,100)";for(var o=3;o>0;--o){var s=e.KItem.YClose*(.03*o)+e.KItem.High;n=this.Frame.GetYFromData(s,!1);n=this.ToFixedPoint(n),this.DrawLine({X:i.X,Y:n},{X:i.X+100,Y:n}),this.Canvas.fillText(s.toFixed(2),i.X-5,n)}this.Canvas.setLineDash([])},this.ToFixedPoint=function(t,e){return Te.IsNumber(e)||(e=this.LineWidth),B(e,t)}}function $e(){this.newMethod=Qe,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawThreePointDemo",this.PointCount=3,this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.CalculateYPoint=function(){var t;for(var e in this.PointInfo){var a=this.PointInfo[e];t=0==e||2==e?this.Frame.GetYFromData(a.KItem.Low,!1):this.Frame.GetYFromData(a.KItem.High,!1),a.Point.Y2=t}},this.DrawEx=function(){var t=this.PointInfo[0],e=this.PointInfo[1],a=this.PointInfo[2],i=this.Frame.ChartBorder,r=(i.GetRight(),i.GetLeft(),{X:t.Point.X,Y:t.Point.Y2}),n={X:e.Point.X,Y:e.Point.Y2},o={X:a.Point.X,Y:a.Point.Y2};this.DrawLine(r,n),this.DrawLine(n,o),this.LinePoint.push({Start:r,End:n}),this.LinePoint.push({Start:n,End:o}),this.Canvas.setLineDash([5,5]);var s=.09*a.KItem.YClose+a.KItem.High,h=this.Frame.GetYFromData(s,!1);this.DrawLine({X:this.ToFixedPoint(o.X),Y:o.Y},{X:this.ToFixedPoint(o.X),Y:h}),this.Canvas.textAlign="right",this.Canvas.textBaseline="center",this.Canvas.fillStyle="rgb(33,45,100)";for(var l=3;l>0;--l){var u=a.KItem.YClose*(.03*l)+a.KItem.High;h=this.Frame.GetYFromData(u,!1);h=this.ToFixedPoint(h),this.DrawLine({X:o.X,Y:h},{X:o.X+100,Y:h}),this.Canvas.fillText(u.toFixed(2),o.X-5,h)}this.Canvas.setLineDash([])}}function ta(){this.DrawData=new C.default,this.StorageKey,this.GetEventCallback,this.Load=function(t){if(t){this.StorageKey=t;var e=localStorage[this.StorageKey];if(D.Chart.Log("[ChartDrawStorage::Load] Load to localStorage, key="+this.StorageKey+", cache="+e),e&&"string"==typeof e){var a=JSON.parse(e);for(var i in a){var r=a[i],n=new C.default;for(var o in r.Value){var s=r.Value[o];n.set(s.Key,s.Value)}this.DrawData.set(r.Key,n)}}}},this.Save=function(){if(this.StorageKey){var t=[],e=!0,a=!1,i=void 0;try{for(var r,n=(0,f.default)(this.DrawData);!(e=(r=n.next()).done);e=!0){var o=r.value,s=o[0],h=o[1],l={Key:s,Value:[]},u=!0,c=!1,C=void 0;try{for(var p,m=(0,f.default)(h);!(u=(p=m.next()).done);u=!0){var v=p.value;v[1]&&!1===v[1].EnableSave||l.Value.push({Key:v[0],Value:v[1]})}}catch(t){c=!0,C=t}finally{try{!u&&m.return&&m.return()}finally{if(c)throw C}}Te.IsNonEmptyArray(l.Value)&&t.push(l)}}catch(t){a=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw i}}D.Chart.Log("[ChartDrawStorage::Save] save to localStorage, key="+this.StorageKey);var g=(0,d.default)(t);localStorage[this.StorageKey]=g}},this.GetItemKey=function(t){return t.Symbol+"-"+t.Period},this.SaveDrawData=function(t){var e=this.GetItemKey(t),a=t.ExportStorageData();if(a){if(this.DrawData.has(e))D.Chart.Log("[ChartDrawStorage::SaveDrawData] Upate: key, drawPicture, data",e,t,a),this.DrawData.get(e).set(a.Guid,a);else{D.Chart.Log("[ChartDrawStorage::SaveDrawData] Insert: key, drawPicture, data",e,t,a);var i=new C.default;i.set(a.Guid,a),this.DrawData.set(e,i)}D.Chart.Log("[ChartDrawStorage::SaveDrawData] All draw data： ",this.DrawData),this.Save()}},this.DeleteDrawData=function(t){var e=this.GetItemKey(t);if(this.DrawData.has(e)){var a=this.DrawData.get(e);a.has(t.Guid)&&(a.delete(t.Guid),this.Save())}},this.Clear=function(){this.DrawData=new C.default,this.Save()},this.GetDrawData=function(t){var e=[],a=this.GetItemKey(t);if(!this.DrawData.has(a))return e;var i=this.DrawData.get(a),r=!0,n=!1,o=void 0;try{for(var s,h=(0,f.default)(i);!(r=(s=h.next()).done);r=!0){var l=s.value;e.push(l[1])}}catch(t){n=!0,o=t}finally{try{!r&&h.return&&h.return()}finally{if(n)throw o}}return e}}function ea(){this.Data=[[1e-6,2e-6,1e-6,1e-7],[2e-6,4e-6,2e-6,2e-7],[4e-6,5e-6,4e-6,1e-7],[5e-6,1e-5,5e-6,5e-7],[1e-5,2e-5,1e-5,1e-6],[2e-5,4e-5,2e-5,2e-6],[4e-5,5e-5,4e-5,1e-6],[5e-5,1e-4,5e-5,5e-6],[1e-4,2e-4,1e-4,1e-5],[2e-4,4e-4,2e-4,2e-5],[4e-4,5e-4,4e-4,1e-5],[5e-4,.001,5e-4,5e-5],[.001,.002,.001,1e-4],[.002,.004,.002,2e-4],[.004,.005,.004,1e-4],[.005,.01,.005,5e-4],[.01,.02,.01,.001],[.02,.04,.02,.002],[.04,.05,.04,.001],[.05,.1,.05,.005],[.1,.2,.1,.01],[.2,.4,.2,.02],[.4,.5,.4,.01],[.5,1,.5,.05],[1,2,.5,.05],[2,4,.5,.05],[4,5,.5,.05],[5,10,.5,.05],[10,20,10,2],[20,40,20,5],[40,50,40,2],[50,100,50,10],[100,200,100,10],[200,400,200,20],[400,500,400,10],[500,1e3,500,50],[1e3,2e3,1e3,50],[2e3,4e3,2e3,50],[4e3,5e3,4e3,50],[5e3,1e4,5e3,100],[1e4,2e4,1e4,1e3],[2e4,4e4,1e4,1e3],[4e4,5e4,1e4,1e3],[5e4,1e5,1e4,1e3],[1e5,2e5,1e5,1e4],[2e5,4e5,1e5,1e4],[4e5,5e5,1e5,1e4],[5e5,1e6,1e5,1e4],[1e6,2e6,1e6,1e5],[2e6,4e6,1e6,1e5],[4e6,5e6,1e6,1e5],[5e6,1e7,1e6,1e5],[1e7,2e7,1e7,1e6],[2e7,4e7,1e7,1e6],[4e7,5e7,1e7,1e6],[5e7,1e8,1e7,1e6],[1e8,2e8,1e8,1e7],[2e8,4e8,1e8,1e7],[4e8,5e8,1e8,1e7],[5e8,1e9,1e8,1e7],[1e9,2e9,1e9,1e8],[2e9,4e9,1e9,1e8],[4e9,5e9,1e9,1e8],[5e9,1e10,1e9,1e8]],this.Find=function(t){for(var e in this.Data){var a=this.Data[e];if(t>a[0]&&t<=a[1]){var i={};return i.FixInterval=a[2],i.Increase=a[3],i}}return null}}function aa(){this.TooltipBGColor="rgb(255, 255, 255)",this.TooltipAlpha=.92,this.SelectRectBGColor="rgba(1,130,212,0.06)",this.UpBarColor="rgb(238,21,21)",this.DownBarColor="rgb(25,158,0)",this.UnchagneBarColor="rgb(0,0,0)",this.EmptyBarBGColor="rgb(255,255,255)",this.HighLowBarColor="rgb(41,98,255)",this.HLCArea={HighLineColor:"rgb(242,54,69)",LowLineColor:"rgb(8,153,129)",CloseLineColor:"rgb(224,227,227)",LineWidth:2*A(),UpAreaColor:"rgba(253,214,218, 0.5)",DownAreaColor:"rgba(205,235,230, 0.5)"},this.Minute={},this.Minute.VolBarColor=null,this.Minute.VolTitleColor="rgb(105,105,105)",this.Minute.PriceColor="rgb(50,171,205)",this.Minute.PriceLineWidth=1*A(),this.Minute.AreaPriceColor="rgba(50,171,205,0.1)",this.Minute.AvPriceColor="rgb(238,127,9)",this.Minute.PositionColor="rgb(218,165,32)",this.Minute.FrameSplitTextColor=null,this.Minute.Before={BGColor:"rgba(240,240,240,0.7)",LineColor:"rgb(50,171,205)",VolColor:["rgb(192,192,0)"],AvPriceColor:"rgb(190,190,190)",Point:{Color:"rgb(65,105,225)",Radius:2*A()},CloseIcon:{Family:"iconfont",Text:"",Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Size:12*A()}},this.Minute.After={BGColor:"rgba(240,240,240,0.7)",LineColor:"rgb(50,171,205)",VolColor:["rgb(192,192,0)"],AvPriceColor:"rgb(190,190,190)",Point:{Color:"rgb(65,105,225)",Radius:2*A()}},this.DefaultTextColor="rgb(43,54,69)",this.DefaultTextFont=14*A()+"px 微软雅黑",this.TitleFont=13*A()+"px 微软雅黑",this.IndexTitleBGColor="rgb(250,250,250)",this.IndexTitleBorderColor="rgb(180,180,180)",this.IndexTitleBorderMoveOnColor="rgb(0,0,0)",this.IndexTitleColor="rgb(43,54,69)",this.IndexTitleSelectedColor="rgb(65,105,225)",this.OverlayIndexTitleBGColor="rgba(255,255,255,0.7)",this.IndexTitleMerginLeft=1,this.Title={TradeIndexColor:"rgb(105,105,105)",ColorIndexColor:"rgb(112,128,144)",VolColor:"rgb(43,54,69)",AmountColor:"rgb(43,54,69)",DateTimeColor:"rgb(43,54,69)",SettingColor:"rgb(43,54,69)",NameColor:"rgb(43,54,69)",TurnoverRateColor:"rgb(43,54,69)",PositionColor:"rgb(43,54,69)"},this.UpTextColor="rgb(238,21,21)",this.DownTextColor="rgb(25,158,0)",this.UnchagneTextColor="rgb(0,0,0)",this.CloseLineColor="rgb(0,191,255)",this.CloseLineAreaColor=["rgba(0,191,255,0.8)","rgba(0,191,255,0.2)"],this.CloseLineWidth=2,this.FrameBorderPen="rgb(225,236,242)",this.MultiDayBorderPen="rgb(225,236,242)",this.FrameSplitPen="rgb(225,236,242)",this.FrameDotSplitPen="rgb(105,105,105)",this.FrameYLineDash=null,this.FrameXLineDash=null,this.FrameSplitTextColor="rgb(117,125,129)",this.FrameSplitTextFont=14*A()+"px 微软雅黑",this.FrameTitleBGColor="rgb(246,251,253)",this.Frame={XBottomOffset:1*A(),YTopOffset:2*A(),YTextPadding:[2,2]},this.ToolbarButtonStyle=0,this.FrameLogo={TextColor:"rgb(178,34,34)",Font:"bold "+16*A()+"px 微软雅黑",Text:"*仅学习使用*"},this.Frame.PercentageText={PriceColor:"rgb(117,125,129)",PercentageColor:"rgb(117,125,129)",SplitColor:"rgb(117,125,129)",Font:14*A()+"px 微软雅黑"},this.FrameLogarithmic={OpenPriceFont:"bold "+14*A()+"px 微软雅黑",MinInterval:45*A()},this.FrameSplitIncrease={Increase:.1},this.FrameSplitAverage={Count:4},this.FrameGoldenSection={Golden:[0,.191,.382,.5,.618,.809,1]},this.FrameLatestPrice={TextColor:"rgb(255,255,255)",UpBarColor:"rgb(238,21,21)",DownBarColor:"rgb(25,158,0)",UnchagneBarColor:"rgb(0,0,0)",BGAlpha:.6,EmptyBGColor:"rgb(255,255,255)",OverlayTextColor:"rgb(255,255,255)"},this.FrameMargin=4,this.FrameLeftMargin=2,this.FrameRightMargin=2,this.DragSubFrameBorder={TopBorderHeight:6*A(),MinFrameHeight:50*A()},this.OverlayFrame={BolderPen:"rgb(190,190,190)",TitleColor:"rgb(105,105,105)",TitleFont:11*A()+"px arial"},this.CorssCursorBGColor="rgb(43,54,69)",this.CorssCursorTextColor="rgb(255,255,255)",this.CorssCursorTextFont=14*A()+"px 微软雅黑",this.CorssCursorHPenColor="rgb(130,130,130)",this.CorssCursorVPenColor="rgb(130,130,130)",this.CorssCursorXRangeBGColor="rgba(100,149,237,0.3)",this.CorssCursor={RightButton:{BGColor:"rgb(43,54,69)",PenColor:"rgb(255,255,255)",Icon:{Text:"",Color:"rgb(255,255,255)",Family:"iconfont",Size:18}}},this.LockBGColor="rgb(220, 220, 220)",this.LockTextColor="rgb(210, 34, 34)",this.Domain="https://opensource.zealink.com",this.CacheDomain="https://opensourcecache.zealink.com",this.PyIndexDomain="https://py.zealink.com",this.KLine={MaxMin:{Font:12*A()+"px 微软雅黑",Color:"rgb(43,54,69)",RightArrow:"→",LeftArrow:"←",HighYOffset:0,LowYOffset:0},Info:{Investor:{ApiUrl:"/API/NewsInteract",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#1c65db"}},Announcement:{ApiUrl:"/API/ReportList",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#f5a521"},IconFont2:{Family:"iconfont",Text:"",HScreenText:"",Color:"#ed7520"}},Pforecast:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#986cad"}},Research:{ApiUrl:"/API/InvestorRelationsList",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#19b1b7"}},BlockTrading:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#f39f7c"}},TradeDetail:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#b22626"}},IconLibrary:{Family:"iconfont",Icon:[{Text:"",HScreenText:"",Color:"#f39f7c"},{Text:"",HScreenText:"",Color:"#19b1b7"},{Text:"",HScreenText:"",Color:"#b22626"},{Text:"",HScreenText:"",Color:"#ed7520"}]}},NumIcon:{Color:"rgb(251,80,80)",Family:"iconfont",Text:["","","","","","","","","","","","","","","","","","","","",""]},TradeIcon:{Family:"iconfont",Buy:{Color:"rgb(255,15,4)",Text:"",HScreenText:""},Sell:{Color:"rgb(64,122,22)",Text:"",HScreenText:""}}},this.VirtualKLine={Color:"rgb(100,100,100)",LineDash:[2,2]},this.OrderFlow={UpColor:{BG:"rgb(223,191,180)",Border:"rgb(196,84,86)"},DownColor:{BG:"rgb(176,212,184)",Border:"rgb(66,94,74)"},UnchagneColor:{BG:"rgb(216,221,177)",Border:"rgb(209,172,129)"},Text:{Color:"rgb(92,96,89)",Family:"Arial",FontMaxSize:18,MaxValue:"8888"},Line:{UpDownColor:"rgb(0,0,0)",MiddleColor:"rgb(211,211,211)"},AlwaysShowOrderText:!0,POCGBColor:"rgba(178,34,34,0.8)",AskBarColor:"rgb(14,209,69)",BidBarColor:"rgb(236,28,36)"},this.OrderFlow_Style2={BarWidth:10,UpColor:"rgb(241,55,63)",DownColor:"rgb(75,105,150)",UnchagneColor:"rgb(79,79,79)"},this.OrderFlow_Style3={BarWidth:20,UpColor:"rgb(241,55,63)",DownColor:"rgb(75,105,150)",UnchagneColor:"rgb(79,79,79)"},this.Index={},this.Index.LineColor=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],this.OverlaySymbol={Random:0},this.OverlaySymbol.Color=["rgb(38,198,218)","rgb(103,58,183)","rgb(0,191,165)","rgb(130,177,255)"],this.Index.StockHistoryDayApiUrl="https://opensource.zealink.com/API/StockHistoryDay",this.Index.MarketLongShortApiUrl="https://opensource.zealink.com/API/FactorTiming",this.Index.MarketAttentionApiUrl="https://opensource.zealink.com/API/MarketAttention",this.Index.MarketHeatApiUrl="https://opensource.zealink.com/API/MarketHeat",this.Index.CustomIndexHeatApiUrl="https://opensource.zealink.com/API/QuadrantCalculate",this.Index.NotSupport={Font:14*A()+"px 微软雅黑",TextColor:"rgb(52,52,52)"},this.Buttons={CloseOverlayIndex:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"",Size:12*A(),MerginLeft:3},CloseWindow:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"",Size:13*A(),MerginLeft:4},ChangeIndex:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"",Size:13*A(),MerginLeft:4},OverlayIndex:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"",Size:13*A(),MerginLeft:4},ModifyIndexParam:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"",Size:13*A(),MerginLeft:4},MaxMinWindow:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"",Size:13*A(),MerginLeft:4},TitleWindow:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"",Size:13*A(),MerginLeft:4},ExportData:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"",Size:13*A(),MerginLeft:4},Tooltip:{Font:14*A()+"px 微软雅黑",Color:"rgb(255,255,255)",ColorBG:"rgb(42,46,57)",ColorBorder:"rgb(0,0,0)"}},this.DrawPicture={LineColor:["rgb(41,98,255)"],PointColor:["rgb(41,98,255)","rgb(89,135,255)","rgb(255,255,255)"],XYCoordinate:{BGColor:"rgba(203,216,255,0.5)",TextBGColor:"rgb(52,101,255)",TextColor:"rgb(255,255,255)",Font:14*A()+"px 微软雅黑"},PointType:2,IsShowPoint:!1},this.ChartOX={Family:"iconfont",Up:{Color:"rgb(178,34,34)",Text:""},Down:{Color:"rgb(0,206,209)",Text:""},SquareLineColor:"rgb(119,136,153)"},this.KLineTrain={Font:"bold 14px arial",LastDataIcon:{Color:"rgb(0,0,205)",Text:"⬇"},BuyIcon:{Color:"rgb(0,205,102 )",Text:"B"},SellIcon:{Color:"rgb(255,127,36 )",Text:"S"},IconFont:{Family:"iconfont",Buy:{Text:"",HScreenText:"",Color:"rgb(255,140,0)"},Sell:{Text:"",HScreenText:"",Color:"rgb(6,79,18)"},Last:{Text:"",HScreenText:"",Color:"rgb(55,0,255)"}}},this.ChartKLineTable={TextFont:{Family:"Arial",FontMaxSize:25},ItemMergin:{Left:5,Right:5,Top:4,Bottom:2}},this.TooltipPaint={BGColor:"rgba(250,250,250,0.8)",BorderColor:"rgb(120,120,120)",TitleColor:"rgb(79, 79, 79)",TitleFont:13*A()+"px 微软雅黑",DateTimeColor:"rgb(105 105 105)",VolColor:"rgb(255, 185, 15)",AmountColor:"rgb(79, 79, 79)"},this.PCTooltipPaint={BGColor:"rgba(250,250,250)",BorderColor:"rgb(120,120,120)",TitleColor:"rgb(60,60,60)",TitleFont:12*A()+"px 微软雅黑",DateTimeColor:"rgb(60,60,60)",VolColor:"rgb(60,60,60)",AmountColor:"rgb(60,60,60)"},this.PCTooltip={LineHeight:25},this.Barrage={Font:16*A()+"px 微软雅黑",Height:20,Color:"RGB(109,109,109)"},this.MinuteInfo={TextColor:"rgb(84,143,255)",Font:14*A()+"px 微软雅黑",PointColor:"rgb(38,113,254)",LineColor:"rgb(120,167,255)",TextBGColor:"rgba(255,255,255,0.8)"},this.ChartDrawRuler={TitleColor:null},this.ChartDrawWaveRuler={RulerWidth:10,RulerLineWidth:1,MaxScaleRuler:2,Font:14*A()+"px 微软雅黑",ScaleRuler:[{Value:0,Text:"0.0%"},{Value:.382,Text:"38.2%"},{Value:.618,Text:"61.8%"},{Value:1,Text:"100%"},{Value:1.618,Text:"161.8%"},{Value:2,Text:"200%"}]},this.ChartDrawWaveRuler2Point={RulerWidth:20,RulerLineWidth:1,MaxScaleRuler:2,Font:14*A()+"px 微软雅黑",ScaleRuler:[{Value:0,Text:"base"},{Value:.618,Text:"61.8%"},{Value:1,Text:"100%"},{Value:1.618,Text:"161.8%"}]},this.ChartDrawVolProfile={BGColor:"rgba(244,250,254,0.8)",BorderColor:"rgba(255,255,255)",VolLineColor:"rgb(232,5,9)",UpVolColor:"rgba(103,179,238, 0.24)",DownVolColor:"rgba(237,208,105,0.24)",AreaUpColor:"rgb(103,179,238,0.7)",AreaDonwColor:"rgba(237,208,105,0.7)",Text:{Color:"rgb(0,0,0)",Family:"Arial",FontMaxSize:18,FontMinSize:6}},this.ChartVolProfileVisibleRange={VolLineColor:"rgb(232,5,9)",VolLineFont:14*A()+"px 微软雅黑",VolLineTextColor:"rgb(255,255,255)",UpVolColor:"rgba(103,179,238, 0.24)",DownVolColor:"rgba(237,208,105,0.24)",AreaUpColor:"rgb(103,179,238,0.7)",AreaDonwColor:"rgba(237,208,105,0.7)",Text:{Color:"rgb(0,0,0)",Family:"Arial",FontMaxSize:18,FontMinSize:6},VAHLineColor:"rgb(0,0,255)",VAHTextColor:"rgb(255,255,255)",VALLineColor:"rgb(0,0,255)",VALTextColor:"rgb(255,255,255)",VAFont:14*A()+"px 微软雅黑"},this.ChartDrawNote={Text:"",FontOption:{Family:"iconfont",Size:32},NoteFontOption:{Family:"微软雅黑",Size:12,Weight:null,Style:null},NoteWidth:200,NoteMargin:{Left:5,Top:5,Bottom:5,Right:5},NoteBGColor:"rgba(104,114,255,0.7)",NoteTextColor:"rgb(240,240,240)",NoteBorderColor:"rgb(220,220,220)",LineSpace:3,ArrowSize:10},this.ChartDrawAnchoredText={TextMargin:{Left:5,Top:5,Bottom:5,Right:5},BGColor:"rgba(104,114,255,0.7)",BorderColor:"rgb(220,220,220)",TextColor:"rgb(0,0,0)",FontOption:{Family:"微软雅黑",Size:12,Weight:null,Style:null},LineSpace:2,TextMaxWidth:-1},this.ChartDrawPriceLabel={TextMargin:{Left:10,Top:5,Bottom:5,Right:10},BGColor:"rgba(104,114,255,0.7)",BorderColor:"rgb(220,220,220)",TextColor:"rgb(0,0,0)",FontOption:{Family:"微软雅黑",Size:14,Weight:null,Style:null}},this.ChartDrawPriceNote={TextMargin:{Left:10,Top:5,Bottom:5,Right:10},BGColor:"rgba(104,114,255,0.7)",BorderColor:"rgb(220,220,220)",TextColor:"rgb(0,0,0)",FontOption:{Family:"微软雅黑",Size:14,Weight:null,Style:null}},this.DRAWICON={Icon:{MaxSize:24,MinSize:12,YOffset:0,Zoom:{Type:1,Value:1}},Text:{MaxSize:50,MinSize:12,YOffset:0,Zoom:{Type:1,Value:1},FontName:"Arial"}},this.DRAWTEXT={MaxSize:30,MinSize:20,YOffset:0,Zoom:{Type:1,Value:1},FontName:"微软雅黑"},this.DRAWNUMBER={MaxSize:30,MinSize:20,YOffset:0,Zoom:{Type:1,Value:1},FontName:"微软雅黑"},this.DRAWABOVE={YOffset:0},this.DRAWTEXT_FIX={Font:14*A()+"px 微软雅黑"},this.DRAWNUMBER_FIX={Font:14*A()+"px 微软雅黑"},this.DOTLINE={LineDash:[3,5]},this.DRAWSL={PixelWidth:15},this.CIRCLEDOT={Radius:1.3*A()},this.TIPICON={Family:"iconfont",TextFont:A()+"px 微软雅黑",Size:10*A(),Color:"rgb(255,165,0)"},this.POINTDOT={Radius:2*A()},this.DepthMapPaint={LineColor:"rgba(255,185,15)",AreaColor:["rgba(255,185,15,0.8)","rgba(255,185,15,0.4)"],TextColor:"rgba(255,255,255)",TextBGColor:"rgb(43,54,69)"},this.KLineYAxisBGPaint={Font:12*A()+"px 微软雅黑",LineColor:"rgb(117,125,129)",DiffValutTextColor:"rgb(117,125,129)",DiffValueBGColor:"rgb(251,140,1)"},this.StockChip={InfoColor:"rgb(0,0,0)",DayInfoColor:"rgb(255,255,255)",DefaultButton:{Color:"rgb(128,128,128)",MoveOnColor:"rgb(30,144,255)",SelectedColor:"rgb(255,0,0)",Family:"iconfont",Text:"",Size:13*A(),MerginLeft:4},LongButton:{Color:"rgb(128,128,128)",MoveOnColor:"rgb(30,144,255)",SelectedColor:"rgb(255,128,0)",Family:"iconfont",Text:"",Size:13*A(),MerginLeft:4},RecentButton:{Color:"rgb(128,128,128)",MoveOnColor:"rgb(30,144,255)",SelectedColor:"rgb(0,0,204)",Family:"iconfont",Text:"",Size:13*A(),MerginLeft:4}},this.DepthChart={BidColor:{Line:"rgb(82,176,123)",Area:"rgba(82,176,123,0.8)"},AskColor:{Line:"rgb(207,76,89)",Area:"rgba(207,76,89, 0.8)"},LineWidth:4},this.DepthCorss={BidColor:{Line:"rgb(82,176,123)"},AskColor:{Line:"rgb(207,76,89)"},LineWidth:2,LineDash:[3,3],Tooltip:{BGColor:"rgba(236,240,245, 0.8)",TextColor:"rgb(130,140,151)",Border:{Top:5,Left:20,Right:20,Bottom:5,ItemSpace:5},Font:14*A()+"px 微软雅黑"}},this.RectSelect={LineColor:"rgb(64,64,64)",LineWidth:1*A(),LineDotted:[3,3],AreaColor:"rgba(234,234,234,0.5)",SubAreaColor:"rgba(105,105,105,0.5)",RangeTextColor:"rgb(248,248,255)",RangeTextFont:14*A()+"px 微软雅黑",RangeTextBGColor:"rgb(43,54,69)",RangeTextSubColor:"rgb(255,255,255)",RangeTextSubFont:12*A()+"px 微软雅黑",RangeTextSubBGColor:"rgb(54,54,54)"},this.SelectedChart={LineWidth:1,LineColor:"rgb(55,100,100)",Radius:4,MinSpace:200,BGColor:"rgb(255,255,255)"},this.DragMovePaint={TextColor:"rgb(0,0,0)",Font:14*A()+"px 微软雅黑"},this.DealList={BorderColor:"rgb(192,192,192)",Header:{Color:"RGB(60,60,60)",Mergin:{Left:5,Right:5,Top:4,Bottom:2},Font:{Size:12,Name:"微软雅黑"}},Row:{Mergin:{Top:2,Bottom:2},Font:{Size:15,Name:"微软雅黑"},BarMergin:{Top:2,Left:3,Right:3,Bottom:2}},FieldColor:{Vol:"rgb(90,90,90)",Time:"rgb(60,60,60)",Deal:"rgb(90,90,90)",Index:"rgb(60,60,60)",BarTitle:"rgb(60,60,60)",Text:"rgb(60,60,60)",Bar:["rgb(255,0,0)","rgb(34,139,34)","rgb(119,136,153)","rgb(75,0,130)","rgb(65,105,225)","rgb(255,215,0)","rgb(255,0,255)","rgb(128,128,0)"]},UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(0,0,0)"},this.Report={BorderColor:"rgb(192,192,192)",SelectedColor:"rgb(180,240,240)",Header:{Color:"rgb(60,60,60)",SortColor:"rgb(255,0,0)",Mergin:{Left:5,Right:5,Top:4,Bottom:2},Font:{Size:12,Name:"微软雅黑"}},Item:{Mergin:{Top:2,Bottom:0,Left:5,Right:5},Font:{Size:15,Name:"微软雅黑"},BarMergin:{Top:2,Left:3,Right:3,Bottom:2},NameFont:{Size:14,Name:"微软雅黑"},SymbolFont:{Size:12,Name:"微软雅黑"}},FixedItem:{Font:{Size:15,Name:"微软雅黑"}},LimitBorder:{Color:"rgb(180,180,180)",Mergin:{Top:1,Bottom:1,Left:0,Right:0}},LimitColor:{UpColor:"rgb(255,0,0)",DownColor:"rgb(0,128,0)",TextColor:"rgb(250,250,250)"},FieldColor:{Index:"rgb(60,60,60)",Symbol:"rgb(60,60,60)",Name:"rgb(60,60,60)",Vol:"rgb(90,90,90)",Amount:"rgb(90,90,90)",Text:"rgb(60,60,60)"},UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(90,90,90)",CloseLine:{CloseColor:"rgb(30,144,255)",YCloseColor:"rgba(105,105,105,0.5)",AreaColor:"rgba(0,191,255,0.2)"},KLine:{UpColor:"rgb(255,0,0)",DownColor:"rgb(0,128,0)",UnchagneColor:"rgb(90,90,90)",DataWidth:16,DistanceWidth:3},Tab:{Font:{Size:12,Name:"微软雅黑"},ScrollBarWidth:100,ButtonColor:"rgb(252,252,252)",BarColor:"rgb(180,180,180)",BorderColor:"rgb(180,180,180)",Mergin:{Left:5,Right:5,Top:4,Bottom:2},TabTitleColor:"rgb(60,60,60)",TabSelectedTitleColor:"rgb(0,0,0)",TabSelectedBGColor:"rgb(252,252,252)",TabMoveOnTitleColor:"rgb(0,0,0)",TabBGColor:"rgb(220,220,220)"},PageInfo:{Font:{Size:15,Name:"微软雅黑"},TextColor:"rgb(0,0,0)",BGColor:"rgba(180,180,180,0.5)",Mergin:{Left:5,Right:5,Top:4,Bottom:2}},DragRow:{Color:"rgba(190,190,190,0.8)",TextColor:"rgba(0,0, 0, 0.8)",MoveRowColor:"rgb(240,128,128)",SrcRowColor:"rgb(180,240,240)"}},this.Keyboard={BorderColor:"rgb(192,192,192)",SelectedColor:"rgb(180,240,240)",TextColor:"rgb(0,0,0)",Item:{Mergin:{Top:2,Bottom:0,Left:1,Right:1},Font:{Size:15,Name:"微软雅黑"},BarMergin:{Top:2,Left:0,Right:0,Bottom:2},NameFont:{Size:14,Name:"微软雅黑"},SymbolFont:{Size:12,Name:"微软雅黑"}}},this.ScrollBar={BorderColor:"rgb(192,192,192)",XSplitTextFont:12*A()+"px 微软雅黑",XSplitTextColor:"rgb(0,0,0)",XSplitLineColor:"rgba(0,0,0,0.8)",BGChart:{Color:"rgb(135,206,250)",LineWidth:1,AreaColor:"rgba(135,206,250,0.5)"},Slider:{DateFont:14*A()+"px 微软雅黑",DateColor:"rgb(0,0,0)",BarColor:"rgb(207,207,207)",BarAreaColor:"rgba(232,232,232,0.65)"}},this.SetStyle=function(t){var e=function(t,e){t&&(t.Color&&(e.Color=t.Color),t.MoveOnColor&&(e.MoveOnColor=t.MoveOnColor),t.SelectedColor&&(e.SelectedColor=t.SelectedColor),t.Family&&(e.Family=t.Family),t.Text&&(e.Text=t.Text),Te.IsNumber(t.Size)&&(e.Size=t.Size),Te.IsNumber(t.MerginLeft)&&(e.MerginLeft=t.MerginLeft))};(t.TooltipBGColor&&(this.TooltipBGColor=t.TooltipBGColor),t.TooltipAlpha&&(this.TooltipAlpha=t.TooltipAlpha),t.SelectRectBGColor&&(this.SelectRectBGColor=t.SelectRectBGColor),t.UpBarColor&&(this.UpBarColor=t.UpBarColor),t.DownBarColor&&(this.DownBarColor=t.DownBarColor),t.UnchagneBarColor&&(this.UnchagneBarColor=t.UnchagneBarColor),t.EmptyBarBGColor&&(this.EmptyBarBGColor=t.EmptyBarBGColor),t.HighLowBarColor&&(this.HighLowBarColor=t.HighLowBarColor),t.HLCArea)&&((a=t.HLCArea).HighLineColor&&(this.HLCArea.HighLineColor=a.HighLineColor),a.LowLineColor&&(this.HLCArea.LowLineColor=a.LowLineColor),a.CloseLineColor&&(this.HLCArea.CloseLineColor=a.CloseLineColor),a.UpAreaColor&&(this.HLCArea.UpAreaColor=a.UpAreaColor),a.DownAreaColor&&(this.HLCArea.DownAreaColor=a.DownAreaColor),Te.IsNumber(a.LineWidth)&&(this.HLCArea.LineWidth=a.LineWidth));if(t.Minute){if(t.Minute.VolBarColor&&(this.Minute.VolBarColor=t.Minute.VolBarColor),t.Minute.VolTitleColor&&(this.Minute.VolTitleColor=t.Minute.VolTitleColor),t.Minute.PriceColor&&(this.Minute.PriceColor=t.Minute.PriceColor),Te.IsNumber(t.Minute.PriceLineWidth)&&(this.Minute.PriceLineWidth=t.Minute.PriceLineWidth),t.Minute.AvPriceColor&&(this.Minute.AvPriceColor=t.Minute.AvPriceColor),t.Minute.AreaPriceColor&&(this.Minute.AreaPriceColor=t.Minute.AreaPriceColor),t.Minute.PositionColor&&(this.Minute.PositionColor=t.Minute.PositionColor),t.Minute.FrameSplitTextColor&&(this.Minute.FrameSplitTextColor=t.Minute.FrameSplitTextColor),t.Minute.Before)(a=t.Minute.Before).BGColor&&(this.Minute.Before.BGColor=a.BGColor),a.LineColor&&(this.Minute.Before.LineColor=a.LineColor),a.VolColor&&(this.Minute.Before.VolColor=a.VolColor),a.AvPriceColor&&(this.Minute.Before.AvPriceColor=a.AvPriceColor),a.CloseIcon&&e(a.CloseIcon,this.Minute.Before.CloseIcon),a.Point&&(a.Point.Color&&(this.Minute.Before.Point.Color=a.Point.Color),a.Point.Radius&&(this.Minute.Before.Point.Radius=a.Point.Radius));if(t.Minute.After)(a=t.Minute.After).BGColor&&(this.Minute.After.BGColor=a.BGColor),a.LineColor&&(this.Minute.After.LineColor=a.LineColor),a.VolColor&&(this.Minute.After.VolColor=a.VolColor),a.AvPriceColor&&(this.Minute.After.AvPriceColor=a.AvPriceColor),a.Point&&(a.Point.Color&&(this.Minute.After.Point.Color=a.Point.Color),a.Point.Radius&&(this.Minute.After.Point.Radius=a.Point.Radius))}(t.DefaultTextColor&&(this.DefaultTextColor=t.DefaultTextColor),t.DefaultTextFont&&(this.DefaultTextFont=t.DefaultTextFont),t.TitleFont&&(this.TitleFont=t.TitleFont),t.IndexTitleBGColor&&(this.IndexTitleBGColor=t.IndexTitleBGColor),t.IndexTitleBorderColor&&(this.IndexTitleBorderColor=t.IndexTitleBorderColor),t.IndexTitleBorderMoveOnColor&&(this.IndexTitleBorderMoveOnColor=t.IndexTitleBorderMoveOnColor),t.IndexTitleColor&&(this.IndexTitleColor=t.IndexTitleColor),t.IndexTitleSelectedColor&&(this.IndexTitleSelectedColor=t.IndexTitleSelectedColor),t.OverlayIndexTitleBGColor&&(this.OverlayIndexTitleBGColor=t.OverlayIndexTitleBGColor),t.UpTextColor&&(this.UpTextColor=t.UpTextColor),t.DownTextColor&&(this.DownTextColor=t.DownTextColor),t.UnchagneTextColor&&(this.UnchagneTextColor=t.UnchagneTextColor),t.CloseLineColor&&(this.CloseLineColor=t.CloseLineColor),t.CloseLineAreaColor&&(this.CloseLineAreaColor=t.CloseLineAreaColor),t.CloseLineWidth&&(this.CloseLineWidth=t.CloseLineWidth),t.FrameBorderPen&&(this.FrameBorderPen=t.FrameBorderPen),t.MultiDayBorderPen&&(this.MultiDayBorderPen=t.MultiDayBorderPen),t.FrameSplitPen&&(this.FrameSplitPen=t.FrameSplitPen),t.FrameDotSplitPen&&(this.FrameDotSplitPen=t.FrameDotSplitPen),t.FrameSplitTextColor&&(this.FrameSplitTextColor=t.FrameSplitTextColor),t.FrameSplitTextFont&&(this.FrameSplitTextFont=t.FrameSplitTextFont),t.FrameTitleBGColor&&(this.FrameTitleBGColor=t.FrameTitleBGColor),Te.IsNumber(t.IndexTitleMerginLeft)&&(this.IndexTitleMerginLeft=t.IndexTitleMerginLeft),t.Frame)&&(t.Frame.XBottomOffset&&(this.Frame.XBottomOffset=t.Frame.XBottomOffset),t.Frame.YTopOffset&&(this.Frame.YTopOffset=t.Frame.YTopOffset),t.Frame.PercentageText&&((a=t.Frame.PercentageText).PriceColor&&(this.Frame.PercentageText.PriceColor=a.PriceColor),a.PercentageColor&&(this.Frame.PercentageText.PercentageColor=a.PercentageColor),a.SplitColor&&(this.Frame.PercentageText.SplitColor=a.SplitColor),a.Font&&(this.Frame.PercentageText.Font=a.Font)));if(Te.IsNumber(t.ToolbarButtonStyle)&&(this.ToolbarButtonStyle=t.ToolbarButtonStyle),t.FrameLatestPrice){var a=t.FrameLatestPrice;t.FrameLatestPrice.TextColor&&(this.FrameLatestPrice.TextColor=t.FrameLatestPrice.TextColor),t.FrameLatestPrice.UpBarColor&&(this.FrameLatestPrice.UpBarColor=t.FrameLatestPrice.UpBarColor),t.FrameLatestPrice.DownBarColor&&(this.FrameLatestPrice.DownBarColor=t.FrameLatestPrice.DownBarColor),t.FrameLatestPrice.UnchagneBarColor&&(this.FrameLatestPrice.UnchagneBarColor=t.FrameLatestPrice.UnchagneBarColor),t.FrameLatestPrice.BGAlpha&&(this.FrameLatestPrice.BGAlpha=t.FrameLatestPrice.BGAlpha),t.FrameLatestPrice.OverlayTextColor&&(this.FrameLatestPrice.OverlayTextColor=t.FrameLatestPrice.OverlayTextColor),a.EmptyBGColor&&(this.FrameLatestPrice.EmptyBGColor=a.EmptyBGColor)}(t.CorssCursorBGColor&&(this.CorssCursorBGColor=t.CorssCursorBGColor),t.CorssCursorTextColor&&(this.CorssCursorTextColor=t.CorssCursorTextColor),t.CorssCursorTextFont&&(this.CorssCursorTextFont=t.CorssCursorTextFont),t.CorssCursorVPenColor&&(this.CorssCursorVPenColor=t.CorssCursorVPenColor),t.CorssCursorHPenColor&&(this.CorssCursorHPenColor=t.CorssCursorHPenColor),t.CorssCursorBorderColor&&(this.CorssCursorBorderColor=t.CorssCursorBorderColor),t.CorssCursorXRangeBGColor&&(this.CorssCursorXRangeBGColor=t.CorssCursorXRangeBGColor),t.CorssCursor&&t.CorssCursor.RightButton)&&((a=t.CorssCursor.RightButton).BGColor&&(this.CorssCursor.RightButton.BGColor=a.BGColor),a.PenColor&&(this.CorssCursor.RightButton.PenColor=a.PenColor),a.Icon&&(this.CorssCursor.RightButton.Icon=a.Icon));(t.KLine&&(this.KLine=t.KLine),t.VirtualKLine)&&((a=t.VirtualKLine).Color&&(this.VirtualKLine.Color=a.Color),a.LineDash&&(this.VirtualKLine.LineDash=a.LineDash));(t.Index&&(t.Index.LineColor&&(this.Index.LineColor=t.Index.LineColor),t.Index.NotSupport&&(this.Index.NotSupport=t.Index.NotSupport)),t.ColorArray&&(this.ColorArray=t.ColorArray),t.DrawPicture)&&((a=t.DrawPicture).LineColor&&(this.DrawPicture.LineColor=a.LineColor),a.PointColor&&(this.DrawPicture.PointColor=a.PointColor),a.XYCoordinate&&(this.DrawPicture.XYCoordinate=a.XYCoordinate),Te.IsNumber(a.PointType)&&(this.DrawPicture.PointType=a.PointType),Te.IsBool(a.IsShowPoint)&&(this.DrawPicture.IsShowPoint=a.IsShowPoint));(t.TooltipPaint&&(t.TooltipPaint.BGColor&&(this.TooltipPaint.BGColor=t.TooltipPaint.BGColor),t.TooltipPaint.BorderColor&&(this.TooltipPaint.BorderColor=t.TooltipPaint.BorderColor),t.TooltipPaint.TitleColor&&(this.TooltipPaint.TitleColor=t.TooltipPaint.TitleColor),t.TooltipPaint.TitleFont&&(this.TooltipPaint.TitleFont=t.TooltipPaint.TitleFont),t.TooltipPaint.DateTimeColor&&(this.TooltipPaint.DateTimeColor=t.TooltipPaint.DateTimeColor),t.TooltipPaint.VolColor&&(this.TooltipPaint.VolColor=t.TooltipPaint.VolColor),t.TooltipPaint.AmountColor&&(this.TooltipPaint.AmountColor=t.TooltipPaint.AmountColor)),t.PCTooltipPaint)&&((a=t.PCTooltipPaint).BGColor&&(this.PCTooltipPaint.BGColor=a.BGColor),a.BorderColor&&(this.PCTooltipPaint.BorderColor=a.BorderColor),a.TitleColor&&(this.PCTooltipPaint.TitleColor=a.TitleColor),a.TitleFont&&(this.PCTooltipPaint.TitleFont=a.TitleFont),a.DateTimeColor&&(this.PCTooltipPaint.DateTimeColor=a.DateTimeColor),a.VolColor&&(this.PCTooltipPaint.VolColor=a.VolColor),a.AmountColor&&(this.PCTooltipPaint.AmountColor=a.AmountColor));if(t.MinuteInfo&&(t.MinuteInfo.TextColor&&(this.MinuteInfo.TextColor=t.MinuteInfo.TextColor),t.MinuteInfo.Font&&(this.MinuteInfo.Font=t.MinuteInfo.Font),t.MinuteInfo.PointColor&&(this.MinuteInfo.PointColor=t.MinuteInfo.PointColor),t.MinuteInfo.LineColor&&(this.MinuteInfo.LineColor=t.MinuteInfo.LineColor),t.MinuteInfo.TextBGColor&&(this.MinuteInfo.TextBGColor=t.MinuteInfo.TextBGColor)),t.Title&&(t.Title.TradeIndexColor&&(this.Title.TradeIndexColor=t.Title.TradeIndexColor),t.Title.ColorIndexColor&&(this.Title.ColorIndexColor=t.Title.ColorIndexColor),t.Title.VolColor&&(this.Title.VolColor=t.Title.VolColor),t.Title.AmountColor&&(this.Title.AmountColor=t.Title.AmountColor),t.Title.DateTimeColor&&(this.Title.DateTimeColor=t.Title.DateTimeColor),t.Title.NameColor&&(this.Title.NameColor=t.Title.NameColor),t.Title.SettingColor&&(this.Title.SettingColor=t.Title.SettingColor),t.Title.TurnoverRateColor&&(this.Title.TurnoverRateColor=t.Title.TurnoverRateColor),t.Title.PositionColor&&(this.Title.PositionColor=t.Title.PositionColor)),t.DRAWICON){if(t.DRAWICON.Icon){var a=t.DRAWICON.Icon;Te.IsPlusNumber(a.MaxSize)&&(this.DRAWICON.Icon.MaxSize=a.MaxSize),Te.IsPlusNumber(a.MinSize)&&(this.DRAWICON.Icon.MinSize=a.MinSize),a.Zoom&&(this.DRAWICON.Icon.Zoom=a.Zoom),Te.IsNumber(a.YOffset)&&(this.DRAWICON.Icon.YOffset=a.YOffset)}if(t.DRAWICON.Text){var a=t.DRAWICON.Text;Te.IsPlusNumber(a.MaxSize)&&(this.DRAWICON.Text.MaxSize=a.MaxSize),Te.IsPlusNumber(a.MinSize)&&(this.DRAWICON.Text.MinSize=a.MinSize),a.Zoom&&(this.DRAWICON.Text.Zoom=a.Zoom),a.FontName&&(this.DRAWICON.Text.FontName=a.FontName),Te.IsNumber(a.YOffset)&&(this.DRAWICON.Text.YOffset=a.YOffset)}}if(t.DRAWTEXT){var a=t.DRAWTEXT;Te.IsPlusNumber(a.MaxSize)&&(this.DRAWICON.MaxSize=a.MaxSize),Te.IsPlusNumber(a.MinSize)&&(this.DRAWICON.MinSize=a.MinSize),a.Zoom&&(this.DRAWTEXT.Zoom=a.Zoom),a.FontName&&(this.DRAWTEXT.FontName=a.FontName),Te.IsNumber(a.YOffset)&&(this.DRAWTEXT.YOffset=a.YOffset)}t.DRAWTEXT_FIX&&((a=t.DRAWTEXT_FIX).Font&&(this.DRAWTEXT_FIX.Font=a.Font));t.DRAWNUMBER_FIX&&((a=t.DRAWNUMBER_FIX).Font&&(this.DRAWNUMBER_FIX.Font=a.Font));if(t.DRAWNUMBER){var a=t.DRAWNUMBER;Te.IsPlusNumber(a.MaxSize)&&(this.DRAWNUMBER.MaxSize=a.MaxSize),Te.IsPlusNumber(a.MinSize)&&(this.DRAWNUMBER.MinSize=a.MinSize),a.Zoom&&(this.DRAWNUMBER.Zoom=a.Zoom),a.FontName&&(this.DRAWNUMBER.FontName=a.FontName),Te.IsNumber(a.YOffset)&&(this.DRAWNUMBER.YOffset=a.YOffset)}if(t.DRAWABOVE){var a=t.DRAWABOVE;Te.IsNumber(a.YOffset)&&(this.DRAWABOVE.YOffset=a.YOffset)}(t.DOTLINE&&(this.DOTLINE=t.DOTLINE),t.DRAWSL&&(this.DOTLINE=t.DRAWSL),t.DragSubFrameBorder&&(this.DragSubFrameBorder=t.DragSubFrameBorder),t.DepthMapPaint)&&((a=t.DepthMapPaint).LineColor&&(this.DepthMapPaint.LineColor=a.LineColor),a.AreaColor&&(this.DepthMapPaint.AreaColor=a.AreaColor),a.TextColor&&(this.DepthMapPaint.TextColor=a.TextColor),a.TextBGColor&&(this.DepthMapPaint.TextBGColor=a.TextBGColor));t.KLineYAxisBGPaint&&((a=t.KLineYAxisBGPaint).Font&&(this.KLineYAxisBGPaint.Font=a.Font),a.LineColor&&(this.KLineYAxisBGPaint.LineColor=a.LineColor),a.DiffValutTextColor&&(this.KLineYAxisBGPaint.DiffValutTextColor=a.DiffValutTextColor),a.DiffValueBGColor&&(this.KLineYAxisBGPaint.DiffValueBGColor=a.DiffValueBGColor));t.StockChip&&((a=t.StockChip).InfoColor&&(this.StockChip.InfoColor=a.InfoColor),a.DayInfoColor&&(this.StockChip.DayInfoColor=a.DayInfoColor),a.DefaultButton&&e(a.DefaultButton,this.StockChip.DefaultButton),a.LongButton&&e(a.LongButton,this.StockChip.LongButton),a.RecentButton&&e(a.RecentButton,this.StockChip.RecentButton));t.DepthChart&&((a=t.DepthChart).BidColor&&(a.BidColor.Line&&(this.DepthChart.BidColor.Line=a.BidColor.Line),a.BidColor.Area&&(this.DepthChart.BidColor.Area=a.BidColor.Area)),a.AskColor&&(a.AskColor.Line&&(this.DepthChart.AskColor.Line=a.AskColor.Line),a.AskColor.Area&&(this.DepthChart.AskColor.Area=a.AskColor.Area)),a.LineWidth&&(this.DepthChart.LineWidth=a.LineWidth));if(t.DepthCorss&&((a=t.DepthCorss).BidColor&&a.BidColor.Line&&(this.DepthCorss.BidColor.Line=a.BidColor.Line),a.AskColor&&a.AskColor.Line&&(this.DepthCorss.AskColor.Line=a.AskColor.Line),a.LineWidth&&(this.DepthCorss.LineWidth=a.LineWidth),a.LineDash&&(this.DepthCorss.LineDash=a.LineDash),a.Tooltip)){var i=a.Tooltip;i.BGColor&&(this.DepthCorss.Tooltip.BGColor=i.BGColor),i.TextColor&&(this.DepthCorss.Tooltip.TextColor=i.TextColor),i.Font&&(this.DepthCorss.Tooltip.Font=i.Font),i.LineHeight&&(this.DepthCorss.Tooltip.LineHeight=i.LineHeight);var r=i.Border;Te.IsNumber(r.Top)&&(this.DepthCorss.Tooltip.Border.Top=r.Top),Te.IsNumber(r.Bottom)&&(this.DepthCorss.Tooltip.Border.Bottom=r.Bottom),Te.IsNumber(r.Left)&&(this.DepthCorss.Tooltip.Border.Left=r.Left),Te.IsNumber(r.Right)&&(this.DepthCorss.Tooltip.Border.Right=r.Right),Te.IsNumber(r.ItemSpace)&&(this.DepthCorss.Tooltip.Border.ItemSpace=r.ItemSpace)}if(t.CIRCLEDOT){a=t.CIRCLEDOT;Te.IsNumber(a.Radius)&&(this.CIRCLEDOT.Radius=a.Radius)}if(t.POINTDOT){a=t.POINTDOT;Te.IsNumber(a.Radius)&&(this.POINTDOT.Radius=a.Radius)}t.RectSelect&&((a=t.RectSelect).LineColor&&(this.RectSelect.LineColor=a.LineColor),a.LineWidth>0&&(this.RectSelect.LineWidth=a.LineWidth),a.LineDotted&&(this.RectSelect.LineDotted=a.LineDotted),a.AreaColor&&(this.RectSelect.AreaColor=a.AreaColor),a.SubAreaColor&&(this.RectSelect.SubAreaColor=a.SubAreaColor),a.RangeTextColor&&(this.RectSelect.RangeTextColor=a.RangeTextColor),a.RangeTextFont&&(this.RectSelect.RangeTextFont=a.RangeTextFont),a.RangeTextBGColor&&(this.RectSelect.RangeTextBGColor=a.RangeTextBGColor),a.RangeTextSubColor&&(this.RectSelect.RangeTextSubColor=a.RangeTextSubColor),a.RangeTextSubFont&&(this.RectSelect.RangeTextSubFont=a.RangeTextSubFont),a.RangeTextSubBGColor&&(this.RectSelect.RangeTextSubBGColor=a.RangeTextSubBGColor));(t.OrderFlow&&((a=t.OrderFlow).UpColor&&(this.OrderFlow.UpColor=a.UpColor),a.DownColor&&(this.OrderFlow.DownColor=a.DownColor),a.UnchagneColor&&(this.OrderFlow.UnchagneColor=a.UnchagneColor),a.Text&&(this.OrderFlow.Text=a.Text),a.Line&&(this.OrderFlow.Line=a.Line)),t.OrderFlow_Style2&&((a=t.OrderFlow_Style2).UpColor&&(this.OrderFlow_Style2.UpColor=a.UpColor),a.DownColor&&(this.OrderFlow_Style2.DownColor=a.DownColor),a.UnchagneColor&&(this.OrderFlow_Style2.UnchagneColor=a.UnchagneColor),Te.IsNumber(a.BarWidth)&&(this.OrderFlow_Style2.BarWidth=a.BarWidth)),t.ChartOX)&&((a=t.ChartOX).Family&&(this.ChartOX.Family=a.Family),a.Up&&(this.ChartOX.Up=a.Up),a.Down&&(this.ChartOX.Down=a.Down),a.SquareLineColor&&(this.ChartOX.SquareLineColor=a.SquareLineColor));if(t.DealList){if((a=t.DealList).BorderColor&&(this.DealList.BorderColor=a.BorderColor),a.UpTextColor&&(this.DealList.UpTextColor=a.UpTextColor),a.DownTextColor&&(this.DealList.DownTextColor=a.DownTextColor),a.UnchagneTextColor&&(this.DealList.UnchagneTextColor=a.UnchagneTextColor),a.CloseLineColor&&(this.DealList.CloseLineColor=a.CloseLineColor),a.Header){if((c=a.Header).Color&&(this.DealList.Header.Color=c.Color),c.Mergin){var n=c.Mergin;Te.IsNumber(n.Left)&&(this.DealList.Header.Mergin.Left=n.Left),Te.IsNumber(n.Right)&&(this.DealList.Header.Mergin.Left=n.Right),Te.IsNumber(n.Top)&&(this.DealList.Header.Mergin.Top=n.Top),Te.IsNumber(n.Bottom)&&(this.DealList.Header.Mergin.Bottom=n.Bottom)}if(c.Font)(C=c.Font).Name&&(this.DealList.Header.Font.Name=C.Name),Te.IsNumber(C.Size)&&(this.DealList.Header.Font.Size=C.Size)}if(a.Row){if((f=a.Row).Mergin){n=f.Mergin;Te.IsNumber(n.Top)&&(this.DealList.Row.Mergin.Top=n.Top),Te.IsNumber(n.Bottom)&&(this.DealList.Row.Mergin.Bottom=n.Bottom)}if(f.Font)(C=f.Font).Name&&(this.DealList.Row.Font.Name=C.Name),Te.IsNumber(C.Size)&&(this.DealList.Row.Font.Size=C.Size);if(f.BarMergin){n=f.BarMergin;Te.IsNumber(n.Left)&&(this.DealList.Row.BarMergin.Left=n.Left),Te.IsNumber(n.Top)&&(this.DealList.Row.BarMergin.Top=n.Top),Te.IsNumber(n.Right)&&(this.DealList.Row.BarMergin.Right=n.Right),Te.IsNumber(n.Bottom)&&(this.DealList.Row.BarMergin.Bottom=n.Bottom)}}if(a.FieldColor)if((h=a.FieldColor).Vol&&(this.DealList.FieldColor.Vol=h.Vol),h.Time&&(this.DealList.FieldColor.Time=h.Time),h.Deal&&(this.DealList.FieldColor.Deal=h.Deal),h.Index&&(this.DealList.FieldColor.Index=h.Index),h.BarTitle&&(this.DealList.FieldColor.BarTitle=h.BarTitle),h.Text&&(this.DealList.FieldColor.Text=h.Text),Te.IsNonEmptyArray(h.Bar))for(var o=0;o<h.Bar.length;++o)this.DealList.FieldColor.Bar[o]=h.Bar[o]}if(t.Report){var s,h;if((a=t.Report).BorderColor&&(this.Report.BorderColor=a.BorderColor),a.UpTextColor&&(this.Report.UpTextColor=a.UpTextColor),a.DownTextColor&&(this.Report.DownTextColor=a.DownTextColor),a.UnchagneTextColor&&(this.Report.UnchagneTextColor=a.UnchagneTextColor),a.BorderColor&&(this.Report.SelectedColor=a.SelectedColor),a.CloseLine){var l=a.CloseLine;l.CloseColor&&(this.Report.CloseLine.CloseColor=l.CloseColor),l.YCloseColor&&(this.Report.CloseLine.YCloseColor=l.YCloseColor),l.AreaColor&&(this.Report.CloseLine.AreaColor=l.AreaColor)}if(a.KLine){var u=a.KLine;u.UpColor&&(this.Report.KLine.UpColor=u.UpColor),u.DownColor&&(this.Report.KLine.DownColor=u.DownColor),u.UnchagneColor&&(this.Report.KLine.UnchagneColor=u.UnchagneColor),Te.IsNumber(u.DataWidth)&&(this.Report.KLine.DataWidth=u.DataWidth),Te.IsNumber(u.DistanceWidth)&&(this.Report.KLine.DistanceWidth=u.DistanceWidth)}if(a.Header){var c;if((c=a.Header).Color&&(this.Report.Header.Color=c.Color),c.SortColor&&(this.Report.Header.SortColor=c.SortColor),c.Mergin){n=c.Mergin;Te.IsNumber(n.Left)&&(this.Report.Header.Mergin.Left=n.Left),Te.IsNumber(n.Right)&&(this.Report.Header.Mergin.Left=n.Right),Te.IsNumber(n.Top)&&(this.Report.Header.Mergin.Top=n.Top),Te.IsNumber(n.Bottom)&&(this.Report.Header.Mergin.Bottom=n.Bottom)}if(c.Font)(C=c.Font).Name&&(this.Report.Header.Font.Name=C.Name),Te.IsNumber(C.Size)&&(this.Report.Header.Font.Size=C.Size)}if(a.Item){var f;if((f=a.Item).Mergin){n=f.Mergin;Te.IsNumber(n.Left)&&(this.Report.Item.Mergin.Left=n.Left),Te.IsNumber(n.Right)&&(this.Report.Item.Mergin.Right=n.Right),Te.IsNumber(n.Top)&&(this.Report.Item.Mergin.Top=n.Top),Te.IsNumber(n.Bottom)&&(this.Report.Item.Mergin.Bottom=n.Bottom)}if(f.Font)(C=f.Font).Name&&(this.Report.Item.Font.Name=C.Name),Te.IsNumber(C.Size)&&(this.Report.Item.Font.Size=C.Size);if(f.BarMergin){n=f.BarMergin;Te.IsNumber(n.Left)&&(this.Report.Item.BarMergin.Left=n.Left),Te.IsNumber(n.Top)&&(this.Report.Item.BarMergin.Top=n.Top),Te.IsNumber(n.Right)&&(this.Report.Item.BarMergin.Right=n.Right),Te.IsNumber(n.Bottom)&&(this.Report.Item.BarMergin.Bottom=n.Bottom)}if(f.NameFont)(C=f.NameFont).Name&&(this.Report.Item.NameFont.Name=C.Name),Te.IsNumber(C.Size)&&(this.Report.Item.NameFont.Size=C.Size);if(f.SymbolFont)(C=f.SymbolFont).Name&&(this.Report.Item.SymbolFont.Name=C.Name),Te.IsNumber(C.Size)&&(this.Report.Item.SymbolFont.Size=C.Size)}if(a.FixedItem)if((f=a.FixedItem).Font)(C=f.Font).Name&&(this.Report.FixedItem.Font.Name=C.Name),Te.IsNumber(C.Size)&&(this.Report.FixedItem.Font.Size=C.Size);if(a.LimitBorder)if((s=a.LimitBorder).Color&&(this.Report.LimitBorder.Color=s.Color),s.Mergin){n=s.Mergin;Te.IsNumber(n.Left)&&(this.Report.LimitBorder.Mergin.Left=n.Left),Te.IsNumber(n.Top)&&(this.Report.LimitBorder.Mergin.Top=n.Top),Te.IsNumber(n.Right)&&(this.Report.LimitBorder.Mergin.Right=n.Right),Te.IsNumber(n.Bottom)&&(this.Report.LimitBorder.Mergin.Bottom=n.Bottom)}if(a.LimitColor)(s=a.LimitColor).UpColor&&(this.Report.LimitColor.UpColor=s.UpColor),s.DownColor&&(this.Report.LimitColor.DownColor=s.DownColor),s.TextColor&&(this.Report.LimitColor.UpColor=s.TextColor);if(a.FieldColor)if((h=a.FieldColor).Name&&(this.Report.FieldColor.Name=h.Name),h.Symbol&&(this.Report.FieldColor.Symbol=h.Symbol),h.Vol&&(this.Report.FieldColor.Vol=h.Vol),h.Amount&&(this.Report.FieldColor.Amount=h.Amount),h.Index&&(this.Report.FieldColor.Index=h.Index),h.BarTitle&&(this.Report.FieldColor.BarTitle=h.BarTitle),h.Text&&(this.Report.FieldColor.Text=h.Text),Te.IsNonEmptyArray(h.Bar))for(o=0;o<h.Bar.length;++o)this.Report.FieldColor.Bar[o]=h.Bar[o];if(a.Tab){var d=a.Tab;if(d.Font)(C=d.Font).Name&&(this.Report.Tab.Font.Name=C.Name),Te.IsNumber(C.Size)&&(this.Report.Tab.Font.Size=C.Size);Te.IsNumber(d.ScrollBarWidth)&&(this.Report.Tab.ScrollBarWidth=d.ScrollBarWidth),d.ButtonColor&&(this.Report.Tab.ButtonColor=d.ButtonColor),d.BarColor&&(this.Report.Tab.BarColor=d.BarColor),d.BorderColor&&(this.Report.Tab.BorderColor=d.BorderColor),d.TabTitleColor&&(this.Report.Tab.TabTitleColor=d.TabTitleColor),d.TabSelectedTitleColor&&(this.Report.Tab.TabSelectedTitleColor=d.TabSelectedTitleColor),d.TabSelectedBGColor&&(this.Report.Tab.TabSelectedBGColor=d.TabSelectedBGColor),d.TabMoveOnTitleColor&&(this.Report.Tab.TabMoveOnTitleColor=d.TabMoveOnTitleColor),d.TabBGColor&&(this.Report.Tab.TabBGColor=d.TabBGColor)}if(a.PageInfo){var C,p=a.PageInfo;if(p.Font)(C=p.Font).Name&&(this.Report.PageInfo.Font.Name=C.Name),Te.IsNumber(C.Size)&&(this.Report.PageInfo.Font.Size=C.Size);if(p.TextColor&&(this.Report.PageInfo.TextColor=p.TextColor),p.BGColor&&(this.Report.PageInfo.BGColor=p.BGColor),p.Mergin){n=p.Mergin;Te.IsNumber(n.Left)&&(this.Report.PageInfo.Mergin.Left=n.Left),Te.IsNumber(n.Top)&&(this.Report.PageInfo.Mergin.Top=n.Top),Te.IsNumber(n.Right)&&(this.Report.PageInfo.Mergin.Right=n.Right),Te.IsNumber(n.Bottom)&&(this.Report.PageInfo.Mergin.Bottom=n.Bottom)}}if(a.DragRow){var m=a.DragRow;m.Color&&(this.Report.DragRow.Color=m.Color),m.TextColor&&(this.Report.DragRow.TextColor=m.TextColor),m.MoveRowColor&&(this.Report.DragRow.MoveRowColor=m.MoveRowColor),m.SrcRowColor&&(this.Report.DragRow.SrcRowColor=m.SrcRowColor)}}if(t.SelectedChart){a=t.SelectedChart;Te.IsNumber(a.LineWidth)&&(this.SelectedChart.LineWidth=a.LineWidth),Te.IsNumber(a.Radius)&&(this.SelectedChart.Radius=a.Radius),Te.IsNumber(a.MinSpace)&&(this.SelectedChart.MinSpace=a.MinSpace),a.LineColor&&(this.SelectedChart.LineColor=a.LineColor),a.LineColor&&(this.SelectedChart.BGColor=a.BGColor)}t.DragMovePaint&&((a=t.DragMovePaint).TextColor&&(this.DragMovePaint.TextColor=a.TextColor),a.Font&&(this.DragMovePaint.Font=a.Font));if(Te.IsNumber(t.ToolbarButtonStyle)&&(this.ToolbarButtonStyle=t.ToolbarButtonStyle),t.Buttons){var D=t.Buttons;e(D.CloseOverlayIndex,this.Buttons.CloseOverlayIndex),e(D.CloseWindow,this.Buttons.CloseWindow),e(D.ChangeIndex,this.Buttons.ChangeIndex),e(D.OverlayIndex,this.Buttons.OverlayIndex),e(D.ModifyIndexParam,this.Buttons.ModifyIndexParam),e(D.MaxMinWindow,this.Buttons.MaxMinWindow),e(D.TitleWindow,this.Buttons.TitleWindow),e(D.ExportData,this.Buttons.ExportData)}t.ChartDrawVolProfile&&((a=t.ChartDrawVolProfile).UpVolColor&&(this.ChartDrawVolProfile.UpVolColor=a.UpVolColor),a.DownVolColor&&(this.ChartDrawVolProfile.DownVolColor=a.DownVolColor),a.AreaUpColor&&(this.ChartDrawVolProfile.AreaUpColor=a.AreaUpColor),a.AreaDonwColor&&(this.ChartDrawVolProfile.AreaDonwColor=a.AreaDonwColor),a.BGColor&&(this.ChartDrawVolProfile.BGColor=a.BGColor),a.BorderColor&&(this.ChartDrawVolProfile.BorderColor=a.BorderColor),a.VolLineColor&&(this.ChartDrawVolProfile.VolLineColor=a.VolLineColor),a.Text&&(a.Text.Color&&(this.ChartDrawVolProfile.Text.Color=a.Text.Color),a.Text.Family&&(this.ChartDrawVolProfile.Text.Family=a.Text.Family),Te.IsNumber(a.Text.FontMaxSize)&&(this.ChartDrawVolProfile.Text.FontMaxSize=a.Text.FontMaxSize),Te.IsNumber(a.Text.FontMinSize)&&(this.ChartDrawVolProfile.Text.FontMinSize=a.Text.FontMinSize)));if(!0===t.DisableLogo&&this.FrameLogo&&(this.FrameLogo.Text=null),t.ScrollBar){var v;if((a=t.ScrollBar).BorderColor&&(this.ScrollBar.BorderColor=a.BorderColor),a.XSplitTextFont&&(this.ScrollBar.XSplitTextFont=a.XSplitTextFont),a.XSplitTextColor&&(this.ScrollBar.XSplitTextColor=a.XSplitTextColor),a.XSplitLineColor&&(this.ScrollBar.XSplitLineColor=a.XSplitLineColor),a.Slider)(v=a.Slider).DateFont&&(this.ScrollBar.Slider.DateFont=v.DateFont),v.DateColor&&(this.ScrollBar.Slider.DateColor=v.DateColor),v.BarColor&&(this.ScrollBar.Slider.BarColor=v.BarColor),v.BarAreaColor&&(this.ScrollBar.Slider.BarAreaColor=v.BarAreaColor);if(a.BGChart)(v=a.BGChart).Color&&(this.ScrollBar.BGChart.Color=v.Color),v.AreaColor&&(this.ScrollBar.BGChart.AreaColor=v.AreaColor),Te.IsPlusNumber(v.LineWidth)&&(this.ScrollBar.BGChart.LineWidth=v.LineWidth)}}}We.ColorToRGBA=function(t,e){if(/^(rgb|RGB)/.test(t)){for(var a="#",i=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),r=0;r<i.length;r++){var n=Number(i[r]).toString(16);"0"===n&&(n+=n),a+=n}t=a}return"rgba("+parseInt("0x"+t.slice(1,3))+","+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+","+e+")"},We.RGBToHex=function(t){var e=t.indexOf(",")>-1?",":" ",a=(+(t=t.substr(4).split(")")[0].split(e))[0]).toString(16),i=(+t[1]).toString(16),r=(+t[2]).toString(16);return 1==a.length&&(a="0"+a),1==i.length&&(i="0"+i),1==r.length&&(r="0"+r),"#"+a+i+r},We.ArrayDrawPricture=[{Name:"线段",ClassName:"ChartDrawPictureLine",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.IsShowYCoordinate=!1,this.CopyData=this.CopyData_default,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth();var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}},this.GetYCoordinatePoint=function(){if(this.IsFrameMinSize())return null;if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;if(10!=this.Status)return null;for(var t=[],e=0;e<this.Value.length;++e){var a=this.Value[e],i=this.Frame.GetYFromData(a.YValue,!1);t.push({Y:i,YValue:a.YValue,Item:a,Color:this.PointColor})}return t}}}},{Name:"射线",ClassName:"ChartDrawPictureHaflLine",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureHaflLine",this.GetXYCoordinate=this.GetXYCoordinate_default,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.FullLine,this.IsPointIn=function(t,e,a){var i=this.IsPointIn_XYValue_Line(t,e,a);if(i>=0)return i;if(!this.FullLine)return i;var r=this.FullLine.Start,n=this.FullLine.End,o=A(),s=5*o;return this.Canvas.beginPath(),r.X==n.X?(this.Canvas.moveTo(r.X-s,r.Y),this.Canvas.lineTo(r.X+s,r.Y),this.Canvas.lineTo(n.X+s,n.Y),this.Canvas.lineTo(n.X-s,n.Y)):(this.Canvas.moveTo(r.X,r.Y+s),this.Canvas.lineTo(r.X,r.Y-s),this.Canvas.lineTo(n.X,n.Y-s),this.Canvas.lineTo(n.X,n.Y+s)),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e)?100:i},this.Draw=function(){if(this.LinePoint=[],this.FullLine=null,!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!1});if(t&&2==t.length){var e=t[0],a=t[1];this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y),this.Canvas.lineTo(t[1].X,t[1].Y);var i=this.CalculateExtendLineEndPoint(t);this.Canvas.lineTo(i.X,i.Y),this.Canvas.stroke(),this.RestoreLineWidth();var r={Start:e,End:a};this.LinePoint.push(r),this.DrawPoint(t),this.Canvas.restore(),this.FullLine={Start:t[0],End:i}}}}}}},{Name:"箭头",ClassName:"ChartDrawArrowLine",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawArrowLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.ArrawLineWidth=5,this.ArrawLength=15,this.ArrawAngle=35,this.GetXYCoordinate=this.GetXYCoordinate_default,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1],i=this.ArrawAngle,r=this.ArrawLength,n=180*Math.atan2(e.Y-a.Y,e.X-a.X)/Math.PI,o=(n+i)*Math.PI/180,s=(n-i)*Math.PI/180,h=r*Math.cos(o),l=r*Math.sin(o),u=r*Math.cos(s),c=r*Math.sin(s);this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.Canvas.beginPath();var f=a.X+h,d=a.Y+l;this.Canvas.moveTo(f,d),this.Canvas.lineTo(a.X,a.Y),f=a.X+u,d=a.Y+c,this.Canvas.lineTo(f,d),this.Canvas.lineWidth=this.ArrawLineWidth*A(),this.Canvas.stroke(),this.RestoreLineWidth();var C={Start:e,End:a};this.LinePoint.push(C),this.DrawPoint([t[0]]),this.Canvas.restore()}}}}}},{Name:"水平线",ClassName:"ChartDrawPictureHorizontalLine",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.Super_SetOption=this.SetOption,this.Super_ExportStorageData=this.ExportStorageData,this.Label,this.SetOption=function(t){this.Super_SetOption&&this.Super_SetOption(t),t&&t.Label&&(this.Label=t.Label)},this.ExportStorageData=function(){var t;return this.Super_ExportStorageData&&(t=this.Super_ExportStorageData(),this.Label&&(t.Label=this.Label)),t},this.PointCount=1,this.ClassName="ChartDrawPictureHorizontalLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Font=16*A()+"px 微软雅黑",this.GetXYCoordinate=function(){if(this.IsFrameMinSize())return null;var t=this.CalculateDrawPoint();return this.PointRange(t)},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();if(t&&1==t.length&&this.Frame&&1==this.Value.length){if(!this.IsYValueInFrame(this.Value[0].YValue))return null;var e=this.Frame.IsHScreen,a=this.Frame.ChartBorder.GetLeft(),i=this.Frame.ChartBorder.GetRight();e&&(a=this.Frame.ChartBorder.GetTop(),i=this.Frame.ChartBorder.GetBottom()),this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),e?(this.Canvas.moveTo(t[0].X,a),this.Canvas.lineTo(t[0].X,i)):(this.Canvas.moveTo(a,t[0].Y),this.Canvas.lineTo(i,t[0].Y)),this.Canvas.stroke(),this.RestoreLineWidth();var r={Start:new V,End:new V};if(e?(r.Start.X=t[0].X,r.Start.Y=a,r.End.X=t[0].X,r.End.Y=i):(r.Start.X=a,r.Start.Y=t[0].Y,r.End.X=i,r.End.Y=t[0].Y),this.LinePoint.push(r),this.DrawPoint(t),this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font,e){this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var n=t[0].X,o=a;this.Canvas.translate(n,o),this.Canvas.rotate(90*Math.PI/180);var s=this.Frame.GetYData(t[0].X),h=s.toFixed(2);this.Label&&(0==this.Label.Position?h=this.Label.Text+s.toFixed(2):1==this.Label.Position&&(h=s.toFixed(2)+this.Label.Text)),this.Canvas.fillText(h,0,0)}else{this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var s=this.Frame.GetYData(t[0].Y),h=s.toFixed(2);this.Label&&(0==this.Label.Position?h=this.Label.Text+s.toFixed(2):1==this.Label.Position&&(h=s.toFixed(2)+this.Label.Text)),this.Canvas.fillText(h,a,t[0].Y)}this.Canvas.restore()}}}}}},{Name:"趋势线",ClassName:"ChartDrawPictureTrendLine",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureTrendLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!1});if(t&&2==t.length){var e=t[0],a=t[1],i=this.CalculateExtendLinePoint(e,a);this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),this.Canvas.moveTo(i.Start.X,i.Start.Y),this.Canvas.lineTo(i.End.X,i.End.Y),this.Canvas.stroke(),this.RestoreLineWidth();var r={Start:e,End:a};this.LinePoint.push(r),this.DrawPoint(t),this.Canvas.restore()}}}}}},{Name:"矩形",ClassName:"ChartDrawPictureRect",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureRect",this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});t&&2==t.length&&(this.AreaColor=We.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),this.Canvas.rect(t[0].X,t[0].Y,t[1].X-t[0].X,t[1].Y-t[0].Y),this.Canvas.stroke(),this.RestoreLineWidth(),this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.fillRect(t[0].X,t[0].Y,t[1].X-t[0].X,t[1].Y-t[0].Y),this.Canvas.restore(),this.DrawPoint(t))}},this.IsPointIn=function(t,e,a){if(this.IsFrameMinSize())return-1;if(!this.Frame||10!=this.Status)return-1;var i=this.Frame.Data;if(!i)return-1;var r=this.IsPointInXYValue(t,e,a);if(r>=0)return r;var n=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(!n||2!=n.length)return-1;var o=[{X:n[0].X,Y:n[0].Y},{X:n[1].X,Y:n[0].Y}];return this.IsPointInLine(o,t,e,a)?100:(o=[{X:n[1].X,Y:n[0].Y},{X:n[1].X,Y:n[1].Y}],this.IsPointInLine2(o,t,e,a)?100:(o=[{X:n[1].X,Y:n[1].Y},{X:n[0].X,Y:n[1].Y}],this.IsPointInLine(o,t,e,a)?100:(o=[{X:n[0].X,Y:n[1].Y},{X:n[0].X,Y:n[0].Y}],this.IsPointInLine2(o,t,e,a)?100:-1)))},this.IsPointInLine=function(t,e,a,i){var r=5;i&&Te.IsNumber(i.Zoom)?r+=i.Zoom:this.Option&&Te.IsNumber(this.Option.Zoom)&&(r+=this.Option.Zoom);var n=A();if(r*=n,this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y+r),this.Canvas.lineTo(t[0].X,t[0].Y-r),this.Canvas.lineTo(t[1].X,t[1].Y-r),this.Canvas.lineTo(t[1].X,t[1].Y+r),this.Canvas.closePath(),this.Canvas.isPointInPath(e,a))return!0},this.IsPointInLine2=function(t,e,a,i){var r=5;i&&Te.IsNumber(i.Zoom)?r+=i.Zoom:this.Option&&Te.IsNumber(this.Option.Zoom)&&(r+=this.Option.Zoom);var n=A();if(r*=n,this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X-r,t[0].Y),this.Canvas.lineTo(t[0].X+r,t[0].Y),this.Canvas.lineTo(t[1].X+r,t[1].Y),this.Canvas.lineTo(t[1].X-r,t[1].Y),this.Canvas.closePath(),this.Canvas.isPointInPath(e,a))return!0}}}},{Name:"圆弧线",ClassName:"ChartDrawPictureArc",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureArc",this.Draw=function(){if(!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();if(t&&2==t.length){if(this.ClipFrame(),this.SetLineWidth(),t[0].X<t[1].X&&t[0].Y>t[1].Y){var e=t[1].X-t[0].X,a=t[0].Y-t[1].Y,i=e>a?1/e:1/a,r=t[0].X,n=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var o=1.5*Math.PI;o<2*Math.PI;o+=i)this.Canvas.lineTo(r+e*Math.cos(o),n+a*Math.sin(o)*-1);for(var s=0;s<=.5*Math.PI;s+=i)this.Canvas.lineTo(r+e*Math.cos(s),n+a*Math.sin(s)*-1)}else if(t[0].X>t[1].X&&t[0].Y>t[1].Y){var e=t[0].X-t[1].X,a=t[0].Y-t[1].Y,i=e>a?1/e:1/a,r=t[1].X,n=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var o=0;o<=Math.PI;o+=i)this.Canvas.lineTo(r+e*Math.cos(o),n+a*Math.sin(o)*-1)}else if(t[0].X>t[1].X&&t[0].Y<t[1].Y){var e=t[0].X-t[1].X,a=t[1].Y-t[0].Y,i=e>a?1/e:1/a,r=t[0].X,n=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var o=.5*Math.PI;o<=1.5*Math.PI;o+=i)this.Canvas.lineTo(r+e*Math.cos(o),n+a*Math.sin(o)*-1)}else if(t[0].X<t[1].X&&t[0].Y<t[1].Y){var e=t[1].X-t[0].X,a=t[1].Y-t[0].Y,i=e>a?1/e:1/a,r=t[1].X,n=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var o=Math.PI;o<=2*Math.PI;o+=i)this.Canvas.lineTo(r+e*Math.cos(o),n+a*Math.sin(o)*-1)}this.Canvas.strokeStyle=this.LineColor,this.Canvas.stroke(),this.RestoreLineWidth(),this.Canvas.restore(),this.DrawPoint(t)}}},this.IsPointIn=function(t,e,a){if(this.IsFrameMinSize())return-1;if(!this.Frame||10!=this.Status)return-1;var i=this.Frame.Data;if(!i)return-1;var r=this.IsPointInXYValue(t,e,a);if(r>=0)return r;var n=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(!n||2!=n.length)return-1;var o=[{X:n[0].X,Y:n[0].Y},{X:n[1].X,Y:n[1].Y}];return this.IsPointInArc(o,t,e)?100:-1},this.IsPointInArc=function(t,e,a){if(2!=t.length)return!1;if(t[0].X<t[1].X&&t[0].Y>t[1].Y){var i=t[1].X-t[0].X,r=t[0].Y-t[1].Y,n=i>r?1/i:1/r,o=.8*i,s=.8*r,h=o>s?1/o:1/s,l=t[0].X,u=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var c=1.5*Math.PI;c<2*Math.PI;c+=n)this.Canvas.lineTo(l+i*Math.cos(c),u+r*Math.sin(c)*-1);for(var f=0;f<=.5*Math.PI;f+=n)this.Canvas.lineTo(l+i*Math.cos(f),u+r*Math.sin(f)*-1);for(var d=.5*Math.PI;d>=0;d-=h)this.Canvas.lineTo(l+o*Math.cos(d),u+s*Math.sin(f)*-1);for(var C=2*Math.PI;C>=1.5*Math.PI;C-=h)this.Canvas.lineTo(l+o*Math.cos(C),u+s*Math.sin(C)*-1);this.Canvas.closePath()}else if(t[0].X>t[1].X&&t[0].Y>t[1].Y){var i=t[0].X-t[1].X,r=t[0].Y-t[1].Y,n=i>r?1/i:1/r,o=.8*i,s=.8*r,h=o>s?1/o:1/s,l=t[1].X,u=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var c=0;c<=Math.PI;c+=n)this.Canvas.lineTo(l+i*Math.cos(c),u+r*Math.sin(c)*-1);for(var f=Math.PI;f>=0;f-=h)this.Canvas.lineTo(l+o*Math.cos(f),u+s*Math.sin(f)*-1);this.Canvas.closePath()}else if(t[0].X>t[1].X&&t[0].Y<t[1].Y){var i=t[0].X-t[1].X,r=t[1].Y-t[0].Y,n=i>r?1/i:1/r,o=.8*i,s=.8*r,h=o>s?1/o:1/s,l=t[0].X,u=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var c=.5*Math.PI;c<=1.5*Math.PI;c+=n)this.Canvas.lineTo(l+i*Math.cos(c),u+r*Math.sin(c)*-1);for(var f=1.5*Math.PI;f>=.5*Math.PI;f-=h)this.Canvas.lineTo(l+o*Math.cos(f),u+s*Math.sin(f)*-1);this.Canvas.closePath()}else if(t[0].X<t[1].X&&t[0].Y<t[1].Y){var i=t[1].X-t[0].X,r=t[1].Y-t[0].Y,n=i>r?1/i:1/r,o=.8*i,s=.8*r,h=o>s?1/o:1/s,l=t[1].X,u=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var c=Math.PI;c<=2*Math.PI;c+=n)this.Canvas.lineTo(l+i*Math.cos(c),u+r*Math.sin(c)*-1);for(var f=2*Math.PI;f>=Math.PI;f-=h)this.Canvas.lineTo(l+o*Math.cos(f),u+s*Math.sin(f)*-1);this.Canvas.closePath()}return!!this.Canvas.isPointInPath(e,a)}}}},{Name:"M头W底",ClassName:"ChartDrawPictureWaveMW",Create:function(){return new Ue}},{Name:"头肩型",ClassName:"ChartDrawHeadShouldersBT",Create:function(){return new function(){this.newMethod=Ue,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawHeadShouldersBT",this.CalculateLines_Backup=this.CalculateLines,this.CalculateLines=function(t){if(this.Frame&&!(t.length<2)){if(2!=this.Status)return this.CalculateLines_Backup(t);var e={Start:new V,End:new V};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e);var a=t[1].X-t[0].X,i=t[1].Y-t[0].Y;e={Start:new V,End:new V},this.IsHScreen?(e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[1].Y+i,e.End.X=t[0].X-a):(e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[0].Y-i,e.End.X=t[1].X+a),this.LinePoint.push(e);var r=e.End,n=new V;n.X=r.X,n.Y=r.Y,this.Point[2]=n,e={Start:new V,End:new V},this.IsHScreen?(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=r.Y+i,e.End.X=t[1].X):(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=t[1].Y,e.End.X=r.X+a),this.LinePoint.push(e);var r=e.End,n=new V;n.X=r.X,n.Y=r.Y,this.Point[3]=n,e={Start:new V,End:new V},this.IsHScreen?(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=r.Y+i,e.End.X=t[0].X):(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=t[0].Y,e.End.X=r.X+a),this.LinePoint.push(e);var r=e.End,n=new V;n.X=r.X,n.Y=r.Y,this.Point[4]=n,this.PointCount=this.Point.length}}}}},{Name:"平行线",ClassName:"ChartDrawPictureParallelLines",Create:function(){return new Ke}},{Name:"平行通道",ClassName:"ChartDrawPictureParallelChannel",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureParallelChannel",this.ChannelWidth=50,this.AreaColor="rgba(25,25,25,0.4)",this.LinePoint=[],this.CenterLine={LineDash:[2*A(),3*A()],Line:null,IsShow:!1},this.Super_SetOption=this.SetOption,this.ExportStorageData=function(){var t=this.ExportBaseData();t.ChannelWidth=this.ChannelWidth,t.Value=[];for(var e=0;e<this.Value.length&&e<2;++e){var a=this.Value[e];t.Value.push({XValue:a.XValue,YValue:a.YValue,DateTime:a.DateTime})}return this.CenterLine&&(t.CenterLine={IsShow:this.CenterLine.IsShow,LineDash:this.CenterLine.LineDash.slice(0)}),t},this.SetOption=function(t){if(this.Super_SetOption&&this.Super_SetOption(t),t&&(Te.IsNumber(t.ChannelWidth)&&(this.ChannelWidth=t.ChannelWidth),t.CenterLine)){var e=t.CenterLine;Te.IsNonEmptyArray(e.LineDash)&&(this.CenterLine.LineDash=e.LineDash.slice(0)),Te.IsBool(e.IsShow)&&(this.CenterLine.IsShow=e.IsShow)}},this.CalculateDrawPoint=function(){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var t=this.Frame.Data;if(!t)return null;var e=[];if(10==this.Status)for(var a=0;a<2;++a){var i=this.Value[a],r=new V;r.X=this.Frame.GetXFromIndex(i.XValue-t.DataOffset,!1),r.Y=this.Frame.GetYFromData(i.YValue,!1),e.push(r)}else for(var a=0;a<this.Point.length;++a){var i=this.Point[a],r=new V;r.X=i.X,r.Y=i.Y,e.push(r)}if(e.length>=2){var n={Start:new V,End:new V};if(n.Start.X=e[0].X,n.Start.Y=e[0].Y,n.End.X=e[1].X,n.End.Y=e[1].Y,this.LinePoint.push(n),3==e.length||10==this.Status){var o=n.End.X-n.Start.X,s=n.End.Y-n.Start.Y,h=Math.atan(Math.abs(o/s)),l=this.ChannelWidth/Math.sin(h);(n={Start:new V,End:new V}).Start.X=e[0].X,n.Start.Y=e[0].Y-l,n.End.X=e[1].X,n.End.Y=e[1].Y-l,this.LinePoint.push(n);var u=new V;u.X=n.Start.X+(n.End.X-n.Start.X)/2,u.Y=n.Start.Y+(n.End.Y-n.Start.Y)/2,e[3]=u,this.Point[2]=u;var c=parseInt(this.Frame.GetXData(u.X))+t.DataOffset,f=this.Frame.GetYData(u.Y);this.Value[2]={XValue:c,YValue:f},this.PointCount=this.Point.length,(n={Start:new V,End:new V}).Start.X=e[0].X,n.Start.Y=e[0].Y-l/2,n.End.X=e[1].X,n.End.Y=e[1].Y-l/2,this.CenterLine.Line=n}}return e},this.DrawArea=function(t,e,a,i){this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.lineTo(i.X,i.Y),this.Canvas.closePath(),this.Canvas.fill()},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();if(t){this.AreaColor=We.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),2==this.LinePoint.length&&this.DrawArea(this.LinePoint[0].Start,this.LinePoint[0].End,this.LinePoint[1].End,this.LinePoint[1].Start);for(var e=0;e<this.LinePoint.length;++e){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}if(this.CenterLine.IsShow&&this.CenterLine.Line){var a=this.CenterLine.Line;this.Canvas.setLineDash(this.CenterLine.LineDash),this.DrawLine(a.Start,a.End),this.Canvas.setLineDash([])}this.Canvas.restore(),this.DrawPoint(t)}}},this.Move=function(t,e){if(20!=this.Status)return fasle;if(!this.Frame)return!1;var a=this.Frame.Data;if(!a)return!1;if(100==this.MovePointIndex)for(var i=0;i<this.Point.length;++i)this.Point[i].X+=t,this.Point[i].Y+=e;else if(0==this.MovePointIndex||1==this.MovePointIndex)this.MovePointIndex<this.Point.length&&(this.Point[this.MovePointIndex].X+=t,this.Point[this.MovePointIndex].Y+=e);else if(2==this.MovePointIndex){this.Point[this.MovePointIndex].X+=t,this.Point[this.MovePointIndex].Y+=e;var r=this.Point[1].X-this.Point[0].X,n=this.Point[1].Y-this.Point[0].Y,o=Math.atan(Math.abs(r/n)),s=this.ChannelWidth/Math.sin(o)-e;this.ChannelWidth=Math.sin(o)*s}},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;var a=this.Frame.Data;if(!a)return-1;for(var i=0;i<this.Value.length;++i){var r=this.Value[i],n=new V;if(i<2)n.X=this.Frame.GetXFromIndex(r.XValue-a.DataOffset),n.Y=this.Frame.GetYFromData(r.YValue);else{if(i>=this.Point.length)continue;n.X=this.Point[i].X,n.Y=this.Point[i].Y}if(this.Canvas.beginPath(),this.Canvas.arc(n.X,n.Y,5,0,360),this.Canvas.isPointInPath(t,e))return i}for(var i in this.LinePoint){var r=this.LinePoint[i],o=r.Start,s=r.End;if(this.Canvas.beginPath(),this.Canvas.moveTo(o.X,o.Y+5),this.Canvas.lineTo(o.X,o.Y-5),this.Canvas.lineTo(s.X,s.Y-5),this.Canvas.lineTo(s.X,s.Y+5),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return 100}return-1}}}},{Name:"价格通道线",ClassName:"ChartDrawPicturePriceChannel",Create:function(){return new function(){this.newMethod=Ke,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPicturePriceChannel",this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new V;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a)}else if(3==t.length){var a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a);var i=t[2].X-t[1].X,r=t[2].Y-t[1].Y,n=new V,o=new V;n.X=t[0].X+i,n.Y=t[0].Y+r,o.X=t[1].X+i,o.Y=t[1].Y+r,a=this.CalculateExtendLinePoint(n,o),this.LinePoint.push(a);var n=new V,o=new V;n.X=t[0].X-i,n.Y=t[0].Y-r,o.X=t[1].X-i,o.Y=t[1].Y-r,a=this.CalculateExtendLinePoint(n,o),this.LinePoint.push(a)}},this.DrawArea=function(){3==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[1].Start.X,this.LinePoint[1].Start.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[2].End.X,this.LinePoint[2].End.Y),this.Canvas.lineTo(this.LinePoint[2].Start.X,this.LinePoint[2].Start.Y),this.Canvas.closePath(),this.Canvas.fill())}}}},{Name:"文本",ClassName:"ChartDrawPictureText",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureText",this.Text="文本",this.PointCount=1,this.FontOption={Family:"微软雅黑",Size:20,Weight:null,Style:null},this.TextRect=null,this.IsInitialized=!1,this.SettingMenu,this.HQChart,this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.Text&&(this.Text=t.Text),t.FontOption&&(this.FontOption=t.FontOption))},this.Draw=function(t){if(this.TextRect=null,!this.IsFrameMinSize()){var e=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(e&&1==e.length){this.ClipFrame(),this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.Canvas.font=this.GetTextFont(),this.Canvas.fillText(this.Text,e[0].X,e[0].Y);var a=this.Canvas.measureText(this.Text).width,i=this.FontOption.Size*A();this.TextRect={},this.TextRect.Left=e[0].X-a/2,this.TextRect.Top=e[0].Y-i,this.TextRect.Width=a,this.TextRect.Height=i,this.Canvas.restore(),!1===this.IsInitialized&&(this.SetTextOption(),this.IsInitialized=!0)}}},this.GetTextFont=function(){var t=16*A()+"px 微软雅黑";if(!this.FontOption||!this.FontOption.Family||this.FontOption.Size<=0)return t;var e="";return this.FontOption.Color&&(e+=this.FontOption.Color+" "),this.FontOption.Style&&(e+=this.FontOption.Style+" "),this.FontOption.Weight&&(e+=this.FontOption.Weight+" "),this.FontOption.Size>=0&&(e+=this.FontOption.Size*A()+"px "),e+=this.FontOption.Family},this.SetTextOption=function(){D.Chart.Log("[ChartDrawPictureText::SetTextOption]"),this.SettingMenu||(this.SettingMenu=new Fa(this.Frame.ChartBorder.UIElement.parentNode)),this.SettingMenu.ChartPicture=this,this.SettingMenu.HQChart=this.HQChart,this.SettingMenu.Position={Left:this.TextRect.Left+this.TextRect.Width,Top:this.TextRect.Top},this.SettingMenu.DoModal()},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;var a=this.Frame.Data;return a&&this.TextRect?(this.Canvas.beginPath(),this.Canvas.rect(this.TextRect.Left,this.TextRect.Top,this.TextRect.Width,this.TextRect.Height),this.Canvas.isPointInPath(t,e)?100:-1):-1}}}},{Name:"江恩角度线",ClassName:"ChartDrawPictureGannFan",Create:function(){return new je}},{Name:"阻速线",ClassName:"ChartDrawPictureResistanceLine",Create:function(){return new function(){this.newMethod=je,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureResistanceLine",this.CalculateLines=function(t,e,a){if(!this.Frame)return!1;this.Frame.ChartBorder.GetTopEx(),this.Frame.ChartBorder.GetRight(),this.Frame.ChartBorder.GetBottom();var i=[1/3,2/3],r=["3:1","3:2"],n=new V,o=new V;n.X=t.X,n.Y=t.Y,o.X=e.X,o.Y=e.Y;Math.abs(t.X-e.X);var s=Math.abs(t.Y-e.Y);if(1===a){var h=this.CalculateExtendLinePoint(t,e),l={Start:n,End:h.Start,IsDottedLine:!1,PtEnd:o,Text:"1:1"};for(var u in this.LinePoint.push(l),i)if(s>5){(l={Start:n,End:null,IsDottedLine:!1,PtEnd:new V,Text:r[u]}).PtEnd.Y=t.Y-s*i[u],l.PtEnd.X=e.X;var h=this.CalculateExtendLinePoint(l.Start,l.PtEnd);l.End=h.Start,this.LinePoint.push(l)}}else{if(4!=a)return!1;var h=this.CalculateExtendLinePoint(t,e),l={Start:n,End:h.End,IsDottedLine:!1,PtEnd:o,Text:"1:1"};for(var u in this.LinePoint.push(l),i)if(s>5){(l={Start:n,End:null,IsDottedLine:!1,PtEnd:new V,Text:r[u]}).PtEnd.Y=t.Y+s*i[u],l.PtEnd.X=e.X;var h=this.CalculateExtendLinePoint(l.Start,l.PtEnd);l.End=h.End,this.LinePoint.push(l)}}return!0},this.DrawArea=function(){var t=null,e=null;for(var a in this.LinePoint){var i=this.LinePoint[a];"1:1"==i.Text?t=this.LinePoint[a]:"3:1"==i.Text&&(e=this.LinePoint[a])}t&&e&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.End.X,t.End.Y),this.Canvas.lineTo(t.Start.X,t.Start.Y),this.Canvas.lineTo(e.End.X,e.End.Y),this.Canvas.closePath(),this.Canvas.fill())}}}},{Name:"黄金分割",ClassName:"ChartDrawPictureGoldenSection",Create:function(){return new qe}},{Name:"百分比线",ClassName:"ChartDrawPicturePercentage",Create:function(){return new function(){this.newMethod=qe,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPicturePercentage",this.GetSectionData=function(){return[0,.25,.333,.5,1]}}}},{Name:"波段线",ClassName:"ChartDrawPictureWaveBand",Create:function(){return new function(){this.newMethod=qe,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureWaveBand",this.GetSectionData=function(){return[0,.125,.25,.375,.5,.625,.75,.875,1]}}}},{Name:"三角形",ClassName:"ChartDrawPictureTriangle",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureTriangle",this.PointCount=3,this.Font=16*A()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.LastPoint,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){var e=t.slice(0);for(var a in this.AreaColor=We.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.CalculateLines(e),this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}this.DrawArea(e),this.DrawPoint(e),this.DrawTitle(e),this.Canvas.restore()}}},this.DrawArea=function(t){3==t.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y),this.Canvas.lineTo(t[1].X,t[1].Y),this.Canvas.lineTo(t[2].X,t[2].Y),this.Canvas.lineTo(t[0].X,t[0].Y),this.Canvas.closePath(),this.Canvas.fill())},this.DrawTitle=function(t){this.Status},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new V;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2===t.length){var a={Start:new V,End:new V};a.Start.Y=t[0].Y,a.Start.X=t[0].X,a.End.Y=t[1].Y,a.End.X=t[1].X,this.LinePoint.push(a)}else if(3===t.length){var a={Start:new V,End:new V};a.Start.Y=t[0].Y,a.Start.X=t[0].X,a.End.Y=t[1].Y,a.End.X=t[1].X,this.LinePoint.push(a),(a={Start:new V,End:new V}).Start.Y=t[1].Y,a.Start.X=t[1].X,a.End.Y=t[2].Y,a.End.X=t[2].X,this.LinePoint.push(a),(a={Start:new V,End:new V}).Start.Y=t[2].Y,a.Start.X=t[2].X,a.End.Y=t[0].Y,a.End.X=t[0].X,this.LinePoint.push(a)}}}}},{Name:"对称角度",ClassName:"ChartDrawPictureSymmetryAngle",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureSymmetryAngle",this.PointCount=2,this.Font=16*A()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){for(var e in this.AreaColor=We.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.CalculateLines(t),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}this.DrawArea(),this.DrawPoint(t),this.DrawTitle(t),this.Canvas.restore()}}},this.CalculateLines=function(t){if(2==t.length&&this.Frame){var e={Start:new V,End:new V};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e),(e={Start:new V,End:new V}).Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[0].X,this.LinePoint.push(e);var a=t[0].X-t[1].X;(e={Start:new V,End:new V}).Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[0].X+a,this.LinePoint.push(e)}},this.DrawArea=function(){3==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[2].End.X,this.LinePoint[2].End.Y),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.closePath(),this.Canvas.fill())},this.DrawTitle=function(t){this.Status}}}},{Name:"圆",ClassName:"ChartDrawPictureCircle",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureCircle",this.PointCount=2,this.CircleData,this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.AreaColor=We.ColorToRGBA(this.LineColor,.3),this.ClipFrame();var e=t[0].X-t[1].X,a=t[0].Y-t[1].Y,i=Math.sqrt(e*e+a*a);this.Canvas.fillStyle=this.AreaColor,this.Canvas.strokeStyle=this.LineColor,this.DrawLine(t[0],t[1]),this.Canvas.beginPath(),this.Canvas.arc(t[0].X,t[0].Y,i,0,2*Math.PI),this.Canvas.stroke(),this.Canvas.fill(),this.CircleData={X:t[0].X,Y:t[0].Y,R:i},this.DrawPoint(t),this.Canvas.restore()}}},this.IsPointIn=function(t,e,a){if(this.IsFrameMinSize())return-1;if(10!=this.Status)return-1;var i=this.IsPointInXYValue(t,e,a);if(i>=0)return i;if(this.CircleData&&this.CircleData.R>8){var r=this.CircleData.X-t,n=this.CircleData.Y-e,o=Math.sqrt(r*r+n*n);if(o<this.CircleData.R&&o>this.CircleData.R-8)return 100}return-1}}}},{Name:"平行四边形",ClassName:"ChartDrawPictureQuadrangle",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureQuadrangle",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.PointCount=3,this.LastPoint,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.AreaColor=We.ColorToRGBA(this.LineColor,.3);var e=t.slice(0);for(var a in this.CalculateLines(e),this.ClipFrame(),this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}this.DrawArea(),this.DrawPoint(e),this.Canvas.restore()}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.DrawArea=function(){4==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[2].End.X,this.LinePoint[2].End.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new V;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CreateLineData(t[0],t[1]);this.LinePoint.push(a)}else if(3==t.length){var a=this.CreateLineData(t[0],t[1]);this.LinePoint.push(a);var a=this.CreateLineData(t[1],t[2]);this.LinePoint.push(a);var i=t[2].X-t[1].X,r=t[2].Y-t[1].Y,n=new V;n.X=t[0].X+i,n.Y=t[0].Y+r;var a=this.CreateLineData(t[2],n);this.LinePoint.push(a);var a=this.CreateLineData(n,t[0]);this.LinePoint.push(a)}}}}},{Name:"斐波那契周期线",ClassName:"ChartDrawPictureFibonacci",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureFibonacci",this.PointCount=1,this.Font=14*A()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();if(t&&(this.CalculateLines(),!(this.LinePoint.length<=0))){for(var e in this.ClipFrame(),this.SetLineWidth(),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End),this.DrawTitle(a.Start,a.Title)}this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.DrawTitle=function(t,e){this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.font=this.Font,this.Frame.IsHScreen?(this.Canvas.save(),this.Canvas.translate(t.X,t.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(e,2,10),this.Canvas.restore()):this.Canvas.fillText(e,t.X+2,t.Y+10)},this.CalculateHSCreenLines=function(){var t=this.Frame.Data;if(t){var e=null;if(10==this.Status){if(1!=this.Value.length)return;e=this.Value[0].XValue}else{if(1!=this.Point.length)return;e=parseInt(this.Frame.GetXData(this.Point[0].Y))+t.DataOffset}for(var a=this.Frame.ChartBorder.GetRightEx(),i=this.Frame.ChartBorder.GetLeftEx(),r=this.Frame.XPointCount,n=[1,2,3,5,8,13,21,34,55,89,144,233],o=0;o<n.length;++o){var s=e+n[o],h=s-t.DataOffset;if(!(h<0||h>=r)){var l=this.Frame.GetXFromIndex(s-t.DataOffset,!1),u={Start:new V,End:new V,Title:n[o]};u.Start.X=a,u.Start.Y=l,u.End.X=i,u.End.Y=l,this.LinePoint.push(u)}}}},this.CalculateLines=function(){if(!(this.Status<2)&&this.Frame){var t=this.Frame.Data;if(t)if(this.Frame.IsHScreen)this.CalculateHSCreenLines();else{var e=null;if(10==this.Status){if(1!=this.Value.length)return;e=this.Value[0].XValue}else{if(1!=this.Point.length)return;e=parseInt(this.Frame.GetXData(this.Point[0].X))+t.DataOffset}for(var a=this.Frame.ChartBorder.GetTopEx(),i=this.Frame.ChartBorder.GetBottom(),r=this.Frame.XPointCount,n=[1,2,3,5,8,13,21,34,55,89,144,233],o=0;o<n.length;++o){var s=e+n[o],h=s-t.DataOffset;if(!(h<0||h>=r)){var l=this.Frame.GetXFromIndex(s-t.DataOffset,!1),u={Start:new V,End:new V,Title:n[o]};u.Start.Y=a,u.Start.X=l,u.End.Y=i,u.End.X=l,this.LinePoint.push(u)}}}}}}}},{Name:"线形回归线",ClassName:"ChartDrawLinearRegression",Create:function(){return new Ze}},{Name:"线形回归带",ClassName:"ChartDrawLinearRegression",Create:function(){return new Ze({IsShowMaxMinLine:!0})}},{Name:"延长线形回归带",ClassName:"ChartDrawLinearRegression",Create:function(){return new Ze({IsShowMaxMinLine:!0,IsShowExtendLine:!0})}},{Name:"尺子",ClassName:"ChartDrawRuler",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawRuler",this.PointCount=2,this.Font=16*A()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.TitleColor=ia.ChartDrawRuler.TitleColor,this.IsHScreen=!1,this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.IsHScreen=this.Frame.IsHScreen,this.ClipFrame();var e=t[0],a=t[1],i=this.PointToKLine([e,a]),r=this.Calculate(i),n=Te.IsNumber(r.Increase)?r.Increase.toFixed(2)+"%":"--",o=Te.IsNumber(r.Risefall)?r.Risefall.toFixed(2):"--",s="间距:"+r.Count+" 涨跌:"+o+" 涨幅:"+n;this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth();var h={Start:e,End:a};this.LinePoint.push(h),this.DrawPoint(t),this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.font=this.Font,this.TitleColor?this.Canvas.fillStyle=this.TitleColor:Te.IsNumber(r.Increase)?r.Increase>0?this.Canvas.fillStyle=ia.UpTextColor:r.Increase<0?this.Canvas.fillStyle=ia.DownTextColor:this.Canvas.fillStyle=ia.UnchagneTextColor:this.Canvas.fillStyle=ia.UnchagneTextColor;var l=3*A(),u=e.X,c=e.Y;this.IsHScreen?(this.Canvas.translate(u+l,c+l),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(s,0,0)):this.Canvas.fillText(s,u+l,c-l),this.Canvas.restore()}},this.Calculate=function(t){var e=t[0],a=t[1];e.XValue>a.XValue&&(e=t[1],a=t[0]);for(var i,r,n,o,s,h=this.Frame.Data.Data,l=0,u=e.XValue;u<=a.XValue;++u,++l){var c=h[u];0==l?(o=c.YClose,i=c.Open,s=c.Close,n=c.Low,r=c.High):(s=c.Close,n>c.Low&&(n=c.Low),r<c.High&&(r=c.High))}if(!Te.IsPlusNumber(o)){var f=e.XValue-1;f>=0&&f<h.length&&(o=h[f].Close)}var d={YClose:o,Open:i,High:r,Low:n,Close:s,Count:l};return Te.IsPlusNumber(o)&&(d.Increase=(s-o)/o*100,d.Risefall=s-o),d}}}},{Name:"标价线",ClassName:"ChartDrawPriceLine",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPriceLine",this.Font=16*A()+"px 微软雅黑",this.PointCount=1,this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!0});if(t&&1==t.length){this.IsHScreen=this.Frame.IsHScreen;var e=t[0],a=this.Frame.ChartBorder;if(this.IsHScreen){var i=a.GetLeftEx(),r=a.GetRightEx();if(e.X<i||e.X>r)return;var n=a.GetBottom(),o={X:e.X,Y:n},s=this.Frame.GetYData(e.X,!1)}else{var n=a.GetBottomEx(),h=a.GetTopEx();if(e.Y<h||e.Y>n)return;var r=a.GetRight(),o={X:r,Y:e.Y},s=this.Frame.GetYData(e.Y,!1)}this.ClipFrame(),this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(o.X,o.Y),this.Canvas.stroke(),this.RestoreLineWidth();var l={Start:e,End:o};this.LinePoint.push(l),this.DrawPoint(t),this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font;var u=2*A(),c=e.X,f=e.Y;this.IsHScreen?(this.Canvas.translate(c+u,f+u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(s.toFixed(2),0,0)):this.Canvas.fillText(s.toFixed(2),c+u,f-u),this.Canvas.restore()}}}}}},{Name:"标价线2",ClassName:"ChartDrawPriceLineV2",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPriceLineV2",this.Font=12*A()+"px 微软雅黑",this.PointCount=1,this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.LineWidth=1,this.IsDrawFirst=!0,this.TextColor="rgb(255,255,255)",this.Title,this.Super_SetOption=this.SetOption,this.SetOption=function(t){this.Super_SetOption&&this.Super_SetOption(t),t&&(t.TextColor&&(this.TextColor=t.TextColor),t.Title&&(this.Title=t.Title))},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!0});if(t&&1==t.length&&this.IsYValueInFrame(this.Value[0].YValue)){this.IsHScreen=this.Frame.IsHScreen;var e=this.Frame.ChartBorder,a=this.Frame.GetBorder();if(this.IsHScreen){var i=a.LeftEx,r=a.RightEx,n=a.Bottom,o=a.Top,s={X:t[0].X,Y:o};if(s.X<i||s.X>r)return;var h={X:t[0].X,Y:n},l=this.Frame.GetYData(s.X,!1)}else{var n=a.BottomEx,o=a.TopTitle,i=a.Left,r=a.Right,s={X:i,Y:t[0].Y};if(s.Y<o||s.Y>n)return;var h={X:r,Y:t[0].Y},l=this.Frame.GetYData(s.Y,!1)}this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(_(s.X),_(s.Y)),this.Canvas.lineTo(_(h.X),_(h.Y)),this.Canvas.stroke(),this.RestoreLineWidth();var u={Start:s,End:h};this.LinePoint.push(u);var c=A();this.Canvas.font=this.Font;var f=2*c,d=h.X,C=h.Y;this.Canvas.textBaseline="middle",this.Canvas.textAlign="left";var p=this.GetFontHeight(),m=l.toFixed(2),D=this.Canvas.measureText(m).width+2*f;if(this.IsHScreen){if(e.Bottom>10)var v={Left:d-p/2,Top:C,Width:p,Height:D};else var v={Left:d-p/2,Top:C-=D,Width:p,Height:D};if(this.Canvas.fillStyle=this.LineColor,this.Canvas.fillRect(v.Left,v.Top,v.Width,v.Height),this.Canvas.save(),this.Canvas.translate(d,C+1*c),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(m,0,0),this.Canvas.restore(),this.Title){var D=this.Canvas.measureText(this.Title).width+2*c;if(e.Bottom>10)var g={Left:v.Left,Top:n-D-1*c,Width:p,Height:D};else var g={Left:v.Left,Top:v.Top-D-1*c,Width:p,Height:D};this.Canvas.fillStyle=this.LineColor,this.Canvas.fillRect(g.Left,g.Top,g.Width,g.Height),this.Canvas.save(),this.Canvas.translate(d,g.Top+1*c),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(this.Title,0,0),this.Canvas.restore()}}else{if(e.Right>10){var v={Left:d,Top:C-p/2-1*c,Width:D,Height:p};v.Left+v.Width>a.ChartWidth&&(v.Left=a.ChartWidth-v.Width-2*c)}else var v={Left:d-D,Top:C-p/2-1*c,Width:D,Height:p};if(this.Canvas.fillStyle=this.LineColor,this.Canvas.fillRect(v.Left,v.Top,v.Width,v.Height),this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(m,v.Left+f,C),this.Title){var D=this.Canvas.measureText(this.Title).width+2*c;if(e.Right>10){var g={Left:r-D-1*c,Top:v.Top,Width:D,Height:p};v.Left!=r&&(g.Left=v.Left-D-1*c)}else var g={Left:v.Left-D,Top:v.Top,Width:D,Height:p};this.Canvas.fillStyle=this.LineColor,this.Canvas.fillRect(g.Left,g.Top,g.Width,g.Height),this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(this.Title,g.Left+1*c,C)}}}}},this.DrawPrice=function(){}}}},{Name:"垂直线",ClassName:"ChartDrawVerticalLine",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawVerticalLine",this.PointCount=1,this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.Frame&&this.Frame.Data){var t=this.Frame.Data,e=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(e&&1==e.length){this.IsHScreen=this.Frame.IsHScreen;var a=e[0],i=this.Frame.ChartBorder;if(this.IsHScreen){var r=Math.round(this.Frame.GetXData(a.Y,!1))+t.DataOffset;r<0?r=0:r>=t.Data.length&&(r=t.Data.length-1);var n=this.Frame.GetXFromIndex(r-t.DataOffset,!1);n=B(this.LineWidth,n);var o=i.GetLeftEx(),s=i.GetRightEx(),h={X:o,Y:n},l={X:s,Y:n}}else{var r=Math.round(this.Frame.GetXData(a.X,!1))+t.DataOffset;r<0?r=0:r>=t.Data.length&&(r=t.Data.length-1);var u=this.Frame.GetXFromIndex(r-t.DataOffset,!1);u=B(this.LineWidth,u);var c=i.GetTopEx(),f=i.GetBottomEx(),h={X:u,Y:c},l={X:u,Y:f}}this.ClipFrame(),this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(h.X,h.Y),this.Canvas.lineTo(l.X,l.Y),this.Canvas.stroke(),this.RestoreLineWidth();var d={Start:h,End:l};this.LinePoint.push(d),10==this.Status&&this.DrawPoint(e),this.Canvas.restore()}}}}}},{Name:"波浪尺",ClassName:"ChartDrawWaveRuler",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawWaveRuler",this.PointCount=3,this.Font=16*A()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.LastPoint,this.LinePoint,this.ScaleRuler=ia.ChartDrawWaveRuler.ScaleRuler,this.RulerWidth=ia.ChartDrawWaveRuler.RulerWidth,this.RulerLineWidth=ia.ChartDrawWaveRuler.RulerLineWidth,this.MaxScaleRuler=ia.ChartDrawWaveRuler.MaxScaleRuler,this.Font=ia.ChartDrawWaveRuler.MaxScaleRuler,this.IsHScreen=!1,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){for(var e in this.IsHScreen=this.Frame.IsHScreen,this.CalculateLines(t),this.ClipFrame(),this.SetLineWidth(),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}3==t.length&&this.DrawWaveRuler(t),this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new V;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a={Start:{X:t[0].X,Y:t[0].Y},End:{X:t[1].X,Y:t[1].Y}};this.LinePoint.push(a)}else if(3==t.length){var a={Start:{X:t[0].X,Y:t[0].Y},End:{X:t[1].X,Y:t[1].Y}};this.LinePoint.push(a),a={Start:{X:t[1].X,Y:t[1].Y},End:{X:t[2].X,Y:t[2].Y}},this.LinePoint.push(a)}},this.DrawWaveRuler=function(t){var e=t[1],a=t[0],i=t[2],r=this.RulerLineWidth*A();this.Canvas.lineWidth=r,this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font;var n=this.RulerWidth*A();if(this.IsHScreen){var o=a.X-e.X,s={X:i.X-this.MaxScaleRuler*o,Y:i.Y};this.DrawLine(i,s),this.LinePoint.push({Start:i,End:s});var h=i.Y-n/2,l=i.Y+n/2}else{var o=a.Y-e.Y,s={X:B(r,i.X),Y:i.Y-this.MaxScaleRuler*o};this.DrawLine({X:B(r,i.X),Y:i.Y},s),this.LinePoint.push({Start:i,End:s});var u=i.X-n/2,c=i.X+n/2}var f=4*A();for(var d in this.ScaleRuler){var C=this.ScaleRuler[d];if(this.IsHScreen){var u=i.X-C.Value*o,p=this.Frame.GetYData(u,!1);this.DrawLine({X:u,Y:h},{X:u,Y:l});var m=p.toFixed(2)+"  "+(C.Text?C.Text:C.Value.toFixed(3));this.Canvas.save(),this.Canvas.translate(u,i.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(m,f,0),this.Canvas.restore()}else{var h=i.Y-C.Value*o,p=this.Frame.GetYData(h,!1);this.DrawLine({X:u,Y:B(r,h)},{X:c,Y:B(r,h)});var m=p.toFixed(2)+"  "+(C.Text?C.Text:C.Value.toFixed(3));this.Canvas.fillText(m,c+f,h)}}}}}},{Name:"AB波浪尺",ClassName:"ChartDrawWaveRuler2Point",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawWaveRuler2Point",this.PointCount=2,this.Font=14*A()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.PointRate=[510,517,511.4],this.LinePoint,this.CPoint,this.ScaleRuler=ia.ChartDrawWaveRuler2Point.ScaleRuler,this.RulerWidth=ia.ChartDrawWaveRuler2Point.RulerWidth,this.RulerLineWidth=ia.ChartDrawWaveRuler2Point.RulerLineWidth,this.MaxScaleRuler=ia.ChartDrawWaveRuler2Point.MaxScaleRuler,this.Font=ia.ChartDrawWaveRuler2Point.MaxScaleRuler,this.IsHScreen=!1,this.Super_SetOption=this.SetOption,this.SetOption=function(t){this.Super_SetOption&&this.Super_SetOption(t),t&&t.PointRate&&(this.PointRate=t.PointRate)},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){for(var e in this.IsHScreen=this.Frame.IsHScreen,this.CalculateLines(t),this.ClipFrame(),this.SetLineWidth(),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}var i=[t[0],t[1],this.CPoint];this.DrawWaveRuler(i),this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.CalculateLines=function(t){var e={Start:{X:t[0].X,Y:t[0].Y},End:{X:t[1].X,Y:t[1].Y}};this.LinePoint.push(e);var a=t[0].Y,i=t[1].Y,r=this.PointRate[1]-this.PointRate[0],n=this.PointRate[2]-this.PointRate[0],o=a-(a-i)*n/r;this.CPoint={X:t[1].X,Y:o}},this.DrawWaveRuler=function(t){var e=t[1],a=t[0],i=t[2],r=this.RulerLineWidth*A();this.Canvas.lineWidth=r,this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font;var n=this.RulerWidth*A();if(this.IsHScreen){var o=a.X-e.X,s={X:i.X-this.MaxScaleRuler*o,Y:i.Y};this.DrawLine(i,s),this.LinePoint.push({Start:i,End:s});var h=i.Y-n/2,l=i.Y+n/2}else{var o=a.Y-e.Y,s={X:B(r,i.X),Y:i.Y-this.MaxScaleRuler*o};this.DrawLine({X:B(r,i.X),Y:i.Y},s),this.LinePoint.push({Start:i,End:s});var u=i.X,c=i.X+n}var f=4*A();for(var d in this.ScaleRuler){var C=this.ScaleRuler[d];if(this.IsHScreen){var u=i.X-C.Value*o,p=this.Frame.GetYData(u,!1);this.DrawLine({X:u,Y:h},{X:u,Y:l});var m=p.toFixed(2)+"  "+(C.Text?C.Text:C.Value.toFixed(3));this.Canvas.save(),this.Canvas.translate(u,i.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(m,f,0),this.Canvas.restore()}else{var h=i.Y-C.Value*o,p=this.Frame.GetYData(h,!1);this.DrawLine({X:u,Y:B(r,h)},{X:c,Y:B(r,h)});var m=p.toFixed(2)+"  "+(C.Text?C.Text:C.Value.toFixed(3));this.Canvas.fillText(m,c+f,h)}}}}}},{Name:"箱型线",ClassName:"ChartDrawBox",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawBox",this.PointCount=2,this.Font=16*A()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.AvPriceLineDash=[5*A(),5*A()],this.KLineBorder,this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){this.Point[0]={X:this.KLineBorder.Left,Y:this.KLineBorder.Top},this.Point[1]={X:this.KLineBorder.Right,Y:this.KLineBorder.Bottom},this.PointToValue_Backup()},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.IsHScreen=this.Frame.IsHScreen,this.ClipFrame();var e=t[0],a=t[1],i=this.PointToKLine([e,a]);D.Chart.Log("[ChartDrawBox::Draw] kPoint",i);var r=this.Calculate(i);D.Chart.Log("[ChartDrawBox::Draw] kDataInfo",r);var n,o=this.GetKLineBorder(t,r);if(this.KLineBorder=o,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.strokeRect(k(o.Left),k(o.Top),k(o.Right-o.Left),k(o.Bottom-o.Top)),r.Amount>0&&r.Vol>0){var s=r.Amount/r.Vol;if(n="均价"+s.toFixed(2),this.Canvas.beginPath(),this.IsHScreen){var h=this.Frame.GetYFromData(s,!1);this.Canvas.moveTo(B(this.Canvas.lineWidth,h),o.Top),this.Canvas.lineTo(B(this.Canvas.lineWidth,h),o.Bottom)}else{var l=this.Frame.GetYFromData(s,!1);this.Canvas.moveTo(o.Left,B(this.Canvas.lineWidth,l)),this.Canvas.lineTo(o.Right,B(this.Canvas.lineWidth,l))}this.Canvas.setLineDash(this.AvPriceLineDash),this.Canvas.stroke(),this.Canvas.setLineDash([])}this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.textBaseline="top",this.Canvas.textAlign="left",this.Canvas.font=this.Font,this.Canvas.fillStyle=this.LineColor;var u=2*A(),c="K线数"+r.Count;this.IsHScreen?this.DrawText(c,o.Right,o.Top,u,u):this.DrawText(c,o.Left,o.Top,u,u),n&&(this.IsHScreen?this.DrawText(n,h,o.Top,u,u):this.DrawText(n,o.Left,l,u,u));var f=Te.IsNumber(r.YClose)?r.YClose:r.Open,d=(r.Close-f)/f*100;c=d.toFixed(2)+"%",this.IsHScreen?this.DrawText(c,o.Right,o.Bottom,u,u):this.DrawText(c,o.Right,o.Top,u,u),d=r.Close-f,c=""+d.toFixed(2),this.Canvas.textBaseline="bottom",this.IsHScreen?this.DrawText(c,o.Left,o.Bottom,u,0):this.DrawText(c,o.Right,o.Bottom,u,0),this.Canvas.restore()}}},this.Calculate=function(t){var e=t[0],a=t[1];e.XValue>a.XValue&&(e=t[1],a=t[0]);for(var i,r,n,o,s,h=this.Frame.Data.Data,l=0,u=0,c=0,f=e.XValue;f<=a.XValue;++f,++c){var d=h[f];0==c?(o=d.YClose,i=d.Open,s=d.Close,n=d.Low,r=d.High):(s=d.Close,n>d.Low&&(n=d.Low),r<d.High&&(r=d.High)),l+=d.Vol,u+=d.Amount}var C={YClose:o,Open:i,High:r,Low:n,Close:s,Count:c,Vol:l,Amount:u};return C},this.GetKLineBorder=function(t,e){var a=t[0],i=t[1],r=this.Frame.Data;if(this.IsHScreen){var n=Math.round(this.Frame.GetXData(a.Y,!1))+r.DataOffset;n<0?n=0:n>=r.Data.length&&(n=r.Data.length-1);var o=this.Frame.GetXFromIndex(n-r.DataOffset,!1);(n=Math.round(this.Frame.GetXData(i.Y,!1))+r.DataOffset)<0?n=0:n>=r.Data.length&&(n=r.Data.length-1);var s=this.Frame.GetXFromIndex(n-r.DataOffset,!1),h=this.Frame.GetYFromData(e.High,!1),l=this.Frame.GetYFromData(e.Low,!1),u={Left:l,Top:o,Right:h,Bottom:s};return this.LinePoint.push({Start:{X:l,Y:o},End:{X:s,Y:o}}),this.LinePoint.push({Start:{X:l,Y:s},End:{X:s,Y:s}}),this.LinePoint.push({Start:{X:l,Y:o},End:{X:l,Y:s}}),this.LinePoint.push({Start:{X:h,Y:o},End:{X:h,Y:s}}),u}var n=Math.round(this.Frame.GetXData(a.X,!1))+r.DataOffset;n<0?n=0:n>=r.Data.length&&(n=r.Data.length-1);var c=this.Frame.GetXFromIndex(n-r.DataOffset,!1);(n=Math.round(this.Frame.GetXData(i.X,!1))+r.DataOffset)<0?n=0:n>=r.Data.length&&(n=r.Data.length-1);var f=this.Frame.GetXFromIndex(n-r.DataOffset,!1),d=this.Frame.GetYFromData(e.High,!1),C=this.Frame.GetYFromData(e.Low,!1),u={Left:c,Top:d,Right:f,Bottom:C};return this.LinePoint.push({Start:{X:c,Y:d},End:{X:f,Y:d}}),this.LinePoint.push({Start:{X:c,Y:C},End:{X:f,Y:C}}),this.LinePoint.push({Start:{X:c,Y:d},End:{X:c,Y:C}}),this.LinePoint.push({Start:{X:f,Y:d},End:{X:f,Y:C}}),u},this.DrawText=function(t,e,a,i,r){this.IsHScreen?(this.Canvas.save(),this.Canvas.translate(e,a),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,i,r),this.Canvas.restore()):this.Canvas.fillText(t,e+i,a+r)}}}},{Name:"2点画图例子",ClassName:"ChartDrawTwoPointDemo",Create:function(){return new Qe}},{Name:"3点画图例子",ClassName:"ChartDrawThreePointDemo",Create:function(){return new $e}},{Name:"水平线段",ClassName:"ChartDrawHLineSegment",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawHLineSegment",this.PointCount=2,this.IsPointIn=this.IsPointIn_XYValue_Line,this.ChartBorder,this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){this.Frame.IsHScreen?this.Point[1].X=this.Point[0].X:this.Point[1].Y=this.Point[0].Y,this.PointToValue_Backup()},this.GetXYCoordinate=function(){if(this.IsFrameMinSize())return null;var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!0});return this.PointRange(t)},this.Draw=function(){if(this.Frame&&(this.IsHScreen=this.Frame.IsHScreen,this.LinePoint=[],!this.IsFrameMinSize())){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame(),this.ChartBorder=this.Frame.ChartBorder,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor;var e=t[0],a=t[1];10==this.Status?this.DrawLine(e,a,!1):this.DrawVerticalLine(e,a),this.RestoreLineWidth();var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}},this.DrawVerticalLine=function(t,e){var a=this.Frame.Data;if(this.IsHScreen){var i=this.ChartBorder.GetLeft(),r=this.ChartBorder.GetRight(),n=Math.round(this.Frame.GetXData(t.Y,!1))+a.DataOffset;n<0?n=0:n>=a.Data.length&&(n=a.Data.length-1);var o=this.Frame.GetXFromIndex(n-a.DataOffset,!1);(n=Math.round(this.Frame.GetXData(e.Y,!1))+a.DataOffset)<0?n=0:n>=a.Data.length&&(n=a.Data.length-1);var s=this.Frame.GetXFromIndex(n-a.DataOffset,!1);this.Canvas.beginPath(),this.Canvas.moveTo(i,o),this.Canvas.lineTo(r,o),this.Canvas.moveTo(i,s),this.Canvas.lineTo(r,s),this.Canvas.stroke(),this.Canvas.beginPath(),this.Canvas.moveTo(t.X,o),this.Canvas.lineTo(t.X,s),this.Canvas.stroke()}else{var h=this.ChartBorder.GetTopEx(),l=this.ChartBorder.GetBottomEx(),n=Math.round(this.Frame.GetXData(t.X,!1))+a.DataOffset;n<0?n=0:n>=a.Data.length&&(n=a.Data.length-1);var u=this.Frame.GetXFromIndex(n-a.DataOffset,!1);(n=Math.round(this.Frame.GetXData(e.X,!1))+a.DataOffset)<0?n=0:n>=a.Data.length&&(n=a.Data.length-1);var c=this.Frame.GetXFromIndex(n-a.DataOffset,!1);this.Canvas.beginPath(),this.Canvas.moveTo(u,h),this.Canvas.lineTo(u,l),this.Canvas.moveTo(c,h),this.Canvas.lineTo(c,l),this.Canvas.stroke(),this.Canvas.beginPath(),this.Canvas.moveTo(u,t.Y),this.Canvas.lineTo(c,t.Y),this.Canvas.stroke()}}}}},{Name:"平行射线",ClassName:"ChartDrawParallelRaysLines",Create:function(){return new function(){this.newMethod=Ke,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawParallelRaysLines",this.DrawArea=function(){},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new V;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CalculateExtendLineEndPoint([t[0],t[1]]);this.LinePoint.push({Start:t[0],End:a})}else if(3==t.length){var a=this.CalculateExtendLineEndPoint([t[0],t[1]]);this.LinePoint.push({Start:t[0],End:a});var i=t[2].X-t[1].X,r=t[2].Y-t[1].Y,n=new V,o=new V;n.X=t[0].X+i,n.Y=t[0].Y+r,o.X=t[1].X+i,o.Y=t[1].Y+r,a=this.CalculateExtendLineEndPoint([n,o]),this.LinePoint.push({Start:t[2],End:a})}}}}},{ClassName:"ChartDrawPictureIconFont",Create:function(){return new Je}},{Name:"涂鸦线段",ClassName:"ChartDrawGraffitiLine",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawGraffitiLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=null,this.PointCount=2,this.PointToValue=function(){if(!this.Frame)return!1;var t=this.Frame.IsHScreen;if(t)for(var e=0;e<this.Point.length;++e){var a=this.Point[e],i=this.Frame.GetYData(a.X),r={XValue:a.Y,YValue:i};this.Value[e]=r}else for(var e=0;e<this.Point.length;++e){var a=this.Point[e],i=this.Frame.GetYData(a.Y),r={XValue:a.X,YValue:i};this.Value[e]=r}return!0},this.ValueToPoint=function(){if(!this.Frame)return!1;var t=this.Frame.IsHScreen;for(var e in this.Point=[],this.Value){var a=this.Value[e],i=new V;t?(i.Y=a.XValue,i.X=this.Frame.GetYFromData(a.YValue)):(i.X=a.XValue,i.Y=this.Frame.GetYFromData(a.YValue,!1)),this.Point[e]=i}},this.UpdateXValue=function(){},this.CalculateDrawPoint=function(t){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var e=[];if(10==this.Status){var a=this.Frame.IsHScreen;for(var i in this.Value){var r=this.Value[i],n=new V;a?(n.Y=r.XValue,n.X=this.Frame.GetYFromData(r.YValue,!1)):(n.X=r.XValue,n.Y=this.Frame.GetYFromData(r.YValue,!1)),e.push(n)}}else e=this.Point;return e},this.IsPointInXYValue=function(t,e,a){if(!this.Frame)return-1;if(!this.Value)return-1;var i=5;a&&Te.IsNumber(a.Zoom)?i+=a.Zoom:this.Option&&Te.IsNumber(this.Option.Zoom)&&(i+=this.Option.Zoom);var r=this.Frame.IsHScreen;i*=A();for(var n=0;n<this.Value.length;++n){var o=this.Value[n],s=new V;if(r?(s.Y=o.XValue,s.X,this.Frame.GetYFromData(o.YValue)):(s.X=o.XValue,s.Y=this.Frame.GetYFromData(o.YValue)),this.Canvas.beginPath(),this.Canvas.arc(s.X,s.Y,i,0,360),this.Canvas.isPointInPath(t,e))return n}return-1},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth();var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}}}}},{Name:"固定范围成交量分布图",ClassName:"ChartDrawVolProfile",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawVolProfile",this.PointCount=2,this.IsPointIn=this.IsPointIn_XYValue_Line,this.ChartBorder,this.GetXYCoordinate=this.GetXYCoordinate_default,this.IsShowText=!0,this.VolType=0,this.BarPosition=0,this.VolFont,this.VAVol=60,this.BarWidthRate=.3,this.Data,this.MaxVol,this.MaxVolPrice,this.DataStatus=0,this.BGColor=ia.ChartDrawVolProfile.BGColor,this.BorderColor=ia.ChartDrawVolProfile.BorderColor,this.VolLineColor=ia.ChartDrawVolProfile.VolLineColor,this.TextConfig=(0,u.default)({Color:ia.ChartDrawVolProfile.Text.Color,Family:ia.ChartDrawVolProfile.Text.Family,FontMaxSize:ia.ChartDrawVolProfile.Text.FontMaxSize,FontMinSize:ia.ChartDrawVolProfile.Text.FontMinSize},"Color",ia.ChartDrawVolProfile.Text.Color),this.BarColor=[ia.ChartDrawVolProfile.UpVolColor,ia.ChartDrawVolProfile.DownVolColor,ia.ChartDrawVolProfile.AreaUpColor,ia.ChartDrawVolProfile.AreaDonwColor],this.Super_SetOption=this.SetOption,this.SetOption=function(t){this.Super_SetOption&&this.Super_SetOption(t),t&&(t.BGColor&&(this.BGColor=t.BGColor),t.BorderColor&&(this.BGColor=t.BorderColor),t.VolLineColor&&(this.BGColor=t.VolLineColor),t.UpVolColor&&(this.BarColor[0]=t.UpVolColor),t.DownVolColor&&(this.BarColor[1]=t.DownVolColor),t.AreaUpColor&&(this.BarColor[2]=t.AreaUpColor),t.AreaDonwColor&&(this.BarColor[3]=t.AreaDonwColor),Te.IsNumber(t.BarWidthRate)&&(this.BarWidthRate=t.BarWidthRate),Te.IsBool(t.IsShowText)&&(this.IsShowText=t.IsShowText),Te.IsNumber(t.VolType)&&(this.VolType=t.VolType),Te.IsNumber(t.BarPosition)&&(this.BarPosition=t.BarPosition),Te.IsNumber(t.VAVol)&&(this.VAVol=t.VAVol))},this.OnFinish=function(){this.RequestVolumeProfileData()},this.OnMoveFinish=function(){this.RequestVolumeProfileData()},this.IsDrawMain=function(){if(!this.GetActiveDrawPicture)return!0;var t=this.GetActiveDrawPicture();return t.Select.Guid!=this.Guid},this.RequestVolumeProfileData=function(){var t=this.Value[0],e=this.Value[1];t.XValue>e.XValue&&(t=this.Value[1],e=this.Value[0]);var a={Start:{Date:t.DateTime.Date,DataIndex:t.XValue},End:{Date:e.DateTime.Date,DataIndex:e.XValue},Chart:this};Te.IsNumber(t.DateTime.Time)&&(a.Start.Time=t.DateTime.Time),Te.IsNumber(e.DateTime.Time)&&(a.End.Time=e.DateTime.Time),a.ValueAreaVol=this.VAVol,this.DataStatus=0,this.HQChart&&this.HQChart.RequestVolumeProfileData&&this.HQChart.RequestVolumeProfileData(a)},this.OnRecvVolumeProfileData=function(t){if(t&&Te.IsNonEmptyArray(t.Data)){for(var e=0,a=0,i=null,r=0,n=0;r<t.Data.length;++r){var o=t.Data[r];for(a=0,n=0;n<o.Vol.length;++n){var s=o.Vol[n];Te.IsNumber(s.Value)&&(a+=s.Value)}e<a&&(e=a,i=o.Price)}if(this.MaxVolPrice=i,this.MaxVol=e,!(this.MaxVolPrice<=0||this.MaxVol<=0)&&Te.IsNumber(t.MaxPrice)&&Te.IsNumber(t.MinPrice)){var h=this.Frame.GetYFromData(t.MaxPrice,!1),l=this.Frame.GetYFromData(t.MinPrice,!1);this.Point[0].Y=h,this.Point[1].Y=l,this.PointToValue(),this.Data=t,this.DataStatus=1}}},this.Draw=function(){if(this.VolFont=null,this.IsDrawMain()||this.MainDraw(),!this.IsFrameMinSize()){this.Frame&&(this.ChartBorder=this.Frame.ChartBorder);var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame(),this.SetLineWidth();var e=t[0],a=t[1];10==this.Status?0==this.DataStatus&&this.DrawLineBorder(e,a):this.DrawLineBorder(e,a),this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.MainDraw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&1==this.DataStatus&&10==this.Status){this.ClipFrame();this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});this.DrawVolBar(),this.Canvas.restore()}},this.DrawLineBorder=function(t,e){this.Canvas.strokeStyle=this.LineColor;var a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetBottomEx();this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.moveTo(t.X,a),this.Canvas.lineTo(t.X,i),this.Canvas.moveTo(e.X,a),this.Canvas.lineTo(e.X,i),this.Canvas.stroke()},this.DrawVolBar=function(){var t=this.Value[0],e=this.Value[1];t.XValue>e.XValue&&(t=this.Value[1],e=this.Value[0]);var a=this.GetKDataOffset(),i=this.GetPriceYOffset(this.Data.PriceOffset),r=this.Frame.GetXFromIndex(t.XValue-a,!1),n=this.Frame.GetXFromIndex(e.XValue-a,!1),o=this.Frame.GetYFromData(this.Data.MaxPrice)-i/2,s=this.Frame.GetYFromData(this.Data.MinPrice)+i/2,h=n-r,l=s-o,u=h*this.BarWidthRate;if(this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(r,o,h,l),this.MaxVolPrice>=this.Frame.HorizontalMin&&this.MaxVolPrice<=this.Frame.HorizontalMax){var c=B(2,this.Frame.GetYFromData(this.MaxVolPrice,!1));this.Canvas.lineWidth=2,this.Canvas.strokeStyle=this.VolLineColor,this.Canvas.beginPath(),this.Canvas.moveTo(r,c),this.Canvas.lineTo(n,c),this.Canvas.stroke();var f={Start:{X:r,Y:c},End:{X:n,Y:c}};this.LinePoint.push(f)}this.IsShowText&&(this.VolFont=this.GetDynamicVolTextFont(i,u),this.VolFont&&(this.Canvas.font=this.VolFont));for(var d=0;d<this.Data.Data.length;++d){var C=this.Data.Data[d];C.Price<this.Frame.HorizontalMin||C.Price>this.Frame.HorizontalMax||this.DrawVolBarItem(C,r,n,u,i)}},this.DrawVolBarItem=function(t,e,a,i,r){var n=e,o=a,s=this.Frame.GetYFromData(t.Price)-r/2,h=r-1;if(h<1&&(h=1),1==this.VolType){if(!t.TotalVol)return;if(!Te.IsNumber(t.TotalVol.Value))return;var l=t.TotalVol.Value*i/this.MaxVol;if(Te.IsNumber(t.TotalVol.ColorID)?f=this.BarColor[t.TotalVol.ColorID]:t.TotalVol.Color&&(f=t.TotalVol.Color),this.Canvas.fillStyle=f,1==this.BarPosition?this.Canvas.fillRect(o,k(s),-l,k(h)):this.Canvas.fillRect(n,k(s),l,k(h)),this.IsShowText&&this.VolFont){var u=Te.FormatVolString(t.TotalVol.Value,this.HQChart.LanguageID);this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextConfig.Color,1==this.BarPosition?(this.Canvas.textAlign="right",this.Canvas.fillText(u,a-5,s+r/2)):(this.Canvas.textAlign="left",this.Canvas.fillText(u,e+5,s+r/2))}}else{for(var u="",c=0;c<t.Vol.length;++c){var f,d=t.Vol[c];if(Te.IsNumber(d.Value))if(Te.IsNumber(d.ColorID)?f=this.BarColor[d.ColorID]:d.Color&&(f=d.Color),f){var l=d.Value*i/this.MaxVol;this.Canvas.fillStyle=f,1==this.BarPosition?(this.Canvas.fillRect(o,k(s),-l,k(h)),o-=l):(this.Canvas.fillRect(n,k(s),l,k(h)),n+=l);var C=Te.FormatVolString(d.Value,this.HQChart.LanguageID);u.length>0&&(u+="x"),u+=C}}this.IsShowText&&this.VolFont&&(this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextConfig.Color,1==this.BarPosition?(this.Canvas.textAlign="right",this.Canvas.fillText(u,a-5,s+r/2)):(this.Canvas.textAlign="left",this.Canvas.fillText(u,e+5,s+r/2)))}},this.GetKDataOffset=function(){var t=this.HQChart.ChartPaint[0].Data;return t.DataOffset},this.GetPriceYOffset=function(t){var e=this.Frame,a=e.ChartBorder.GetHeightEx()*t/(e.HorizontalMax-e.HorizontalMin);return a},this.GetDynamicVolTextFont=function(t,e,a){var i=parseInt(t)-2;if(t<5&&(i=parseInt(t)),i>this.TextConfig.FontMaxSize?i=this.TextConfig.FontMaxSize:i<=0&&(i=1),i<this.TextConfig.FontMinSize)return null;var r=this.FormatFontString(i,this.TextConfig.Family,a);return r},this.FormatFontString=function(t,e,a){var i;return a?a.Weight&&(i=a.Weight+" "+t+"px "+e):i=t+"px "+e,i}}}},{Name:"DisjointChannel",ClassName:"ChartDrawDisjontChannel",Create:function(){return new function(){this.newMethod=ze,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawDisjontChannel",this.IsPointIn=this.IsPointIn_XYValue_Line,this.PointCount=3,this.LastPoint}}},{Name:"FlatTop",ClassName:"ChartDrawDisjontChannel",Create:function(){return new ze}},{Name:"水平线2",ClassName:"ChartDrawHLine",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.Super_SetOption=this.SetOption,this.Super_ExportStorageData=this.ExportStorageData,this.LineWidth=1,this.Precision=2,this.ValueTextColor="rgb(250,250,250)",this.IsShowCorssCursor=!0,this.GetLabelCallback,this.PointCount=1,this.ClassName="ChartDrawHLine",this.Font=14*A()+"px 微软雅黑",this.TextFont=12*A()+"px 微软雅黑",this.RightSpaceWidth=50,this.ButtonPosition=0,this.ButtonBGColor="rgb(190,190,190)",this.ButtonSpace=3,this.Button={CloseIcon:{Text:"",Color:"rgb(255,255,255)",Family:"iconfont",Size:16},SettingIcon:{Text:"",Color:"rgb(255,255,255)",Family:"iconfont",Size:16}},this.AryButton=[],this.ExtendData,this.ColseButtonSize=0,this.SettingButtonSize=0,this.ButtonBGWidth=0,this.SetOption=function(t){if(this.Super_SetOption&&this.Super_SetOption(t),t){if(t.GetLabelCallback&&(this.GetLabelCallback=t.GetLabelCallback),Te.IsNumber(t.Precision)&&(this.Precision=t.Precision),Te.IsNumber(t.Precision)&&(this.Precision=t.Precision),t.Font&&(this.Font=t.Font),t.ValueTextColor&&(this.ValueTextColor=t.ValueTextColor),Te.IsNumber(t.ButtonPosition)&&(this.ButtonPosition=t.ButtonPosition),Te.IsNumber(t.RightSpaceWidth)&&(this.RightSpaceWidth=t.RightSpaceWidth),t.Button){var e=t.Button;e.CloseIcon&&(this.Button.CloseIcon=G(e.CloseIcon)),e.SettingIcon&&(this.Button.SettingIcon=G(e.SettingIcon))}t.ExtendData&&(this.ExtendData=t.ExtendData)}},this.ExportStorageData=function(){var t;return this.Super_ExportStorageData&&(t=this.Super_ExportStorageData(),this.Label&&(t.Label=this.Label)),t},this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=function(){if(this.IsFrameMinSize())return null;var t=this.CalculateDrawPoint();return this.PointRange(t)},this.IsDrawMain=function(){if(!this.GetActiveDrawPicture)return!0;var t=this.GetActiveDrawPicture();return t.Select.Guid!=this.Guid},this.MainDraw=function(){this.Draw()},this.Draw=function(t,e){if(this.LinePoint=[],this.AryButton=[],this.ColseButtonSize=0,this.SettingButtonSize=0,this.ButtonBGWidth=0,!this.IsFrameMinSize()){var a=this.CalculateDrawPoint();if(a&&1==a.length&&this.Frame&&1==this.Value.length){if(!this.IsYValueInFrame(this.Value[0].YValue))return null;var i=this.Frame.IsHScreen,r=this.Frame.ChartBorder.GetLeft(),n=this.Frame.ChartBorder.GetRight();i&&(r=this.Frame.ChartBorder.GetTop(),n=this.Frame.ChartBorder.GetBottom()),this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),i?(this.Canvas.moveTo(a[0].X,r),this.Canvas.lineTo(a[0].X,n)):(this.Canvas.moveTo(r,_(a[0].Y)),this.Canvas.lineTo(n,_(a[0].Y))),this.Canvas.stroke(),this.RestoreLineWidth();var o,s={Start:new V,End:new V};i?(s.Start.X=a[0].X,s.Start.Y=r,s.End.X=a[0].X,s.End.Y=n):(s.Start.X=r,s.Start.Y=a[0].Y,s.End.X=n,s.End.Y=a[0].Y),this.LinePoint.push(s),this.GetLabelCallback&&(o=this.GetLabelCallback(this)),o&&this.DrawLab(o,a[0].Y);var h=r+(n-r)/2,l={X:h,Y:a[0].Y};this.DrawPoint([l]),this.Canvas.restore();var u={};if(this.CalculateButtonSize(),this.DrawValueText(a[0].Y,u,o),o&&this.DrawRightLab(o,u),t&&e)for(var c=0;c<this.AryButton.length;++c){var f=this.AryButton[c],d=f.Rect;if(t.X>=d.Left&&t.X<d.Right&&t.Y>=d.Top&&t.Y<=d.Bottom){e.MouseOnToolbar={Rect:d,Item:f,Frame:this.Frame,Point:{X:t.X,Y:t.Y}};break}}}}},this.CalculateLabSize=function(t){this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.font=this.TextFont;var e=this.Canvas.measureText("擎").width+2,a=0,i=0,r=0,n=0;Te.IsNumber(t.LineSpace)&&(n=t.LineSpace);for(var a=0,i=0,r=0,o=0,s=0;s<t.AryText.length;++s){var h=t.AryText[s];h.NameWidth=0,h.TextWidth=0,h.Name&&(h.NameWidth=this.Canvas.measureText(h.Name).width+2),h.Text&&(h.TextWidth=this.Canvas.measureText(h.Text).width+2),a<h.NameWidth&&(a=h.NameWidth),i<h.TextWidth&&(i=h.TextWidth);var l=h.NameWidth+h.TextWidth;o<l&&(o=l),++r}var u={Width:o,Height:r*(e+n)+n,NameWidth:a,TextWidth:i,LineHeight:e};return u},this.DrawLab=function(t,e){if(t&&Te.IsNonEmptyArray(t.AryText)&&2!==t.Position){this.Frame.ChartBorder.GetLeft();var a=this.Frame.ChartBorder.GetRight(),i=this.CalculateLabSize(t),r=a-i.Width,n=e-i.Height-1;if(t.BGColor){this.Canvas.fillStyle=t.BGColor;var o=e-i.Height-4;this.Canvas.fillRect(k(r),k(o),k(a+r),k(e-o))}for(var s=n,h=0;h<t.AryText.length;++h){var l=t.AryText[h];l.Name&&(this.Canvas.fillStyle=l.NameColor,this.Canvas.fillText(l.Name,r+1,s+1)),l.Text&&(this.Canvas.fillStyle=l.TextColor,this.Canvas.fillText(l.Text,r+i.NameWidth+1,s+1)),s+=i.LineHeight}}},this.DrawRightLab=function(t,e){if(t&&Te.IsNonEmptyArray(t.AryText)&&2==t.Position){var a=this.CalculateLabSize(t),i=e.Right-a.Width,r=e.Bottom,n=0;if(Te.IsNumber(t.LineSpace)&&(n=t.LineSpace),t.BGColor){this.Canvas.fillStyle=t.BGColor;var o=r;this.Canvas.fillRect(k(i),k(o),k(a.Width),k(a.Height))}var s=r+1+n;this.Canvas.textBaseline="top";for(var h=0;h<t.AryText.length;++h){var l=t.AryText[h];l.Name&&(this.Canvas.textAlign="left",this.Canvas.fillStyle=l.NameColor,this.Canvas.fillText(l.Name,i+1,s+1)),l.Text&&(this.Canvas.textAlign="right",this.Canvas.fillStyle=l.TextColor,this.Canvas.fillText(l.Text,e.Right-1,s+1)),s+=a.LineHeight+n}}},this.DrawValueText=function(t,e,a){this.Frame.ChartBorder.GetLeft();var i=this.Frame.ChartBorder.GetRight();this.RightSpaceWidth>0&&(this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(i,_(t)),this.Canvas.lineTo(i+this.RightSpaceWidth,_(t)),this.Canvas.stroke());var r=this.Frame.GetYData(t),n=r.toFixed(this.Precision);a&&a.PriceSuffixText&&(n+=a.PriceSuffixText),this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font;var o=this.Canvas.measureText(n).width,s=this.GetFontHeight(),h={Left:i+this.RightSpaceWidth,Top:t-s/2,Width:o+4,Height:s};h.Right=h.Left+h.Width,h.Bottom=h.Top+h.Height,1==this.ButtonPosition?this.Canvas.fillRect(k(h.Left),k(h.Top),k(h.Width+this.ButtonBGWidth),k(h.Height)):this.Canvas.fillRect(k(h.Left),k(h.Top),k(h.Width),k(h.Height)),this.Canvas.fillStyle=this.ValueTextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(n,h.Left+2,t),e.Left=h.Left,e.Top=h.Top,e.Bottom=h.Bottom,e.Right=h.Right,this.DrawButton(h.Top,h.Right,s,e)},this.CalculateButtonSize=function(){var t=A();if(this.Button.SettingIcon){var e=this.Button.SettingIcon,a=e.Size*t+"px "+e.Family;this.Canvas.font=a;var i=this.Canvas.measureText(e.Text).width;this.SettingButtonSize=i}if(this.Button.CloseIcon){var e=this.Button.CloseIcon,a=e.Size*t+"px "+e.Family;this.Canvas.font=a;var i=this.Canvas.measureText(e.Text).width;this.ColseButtonSize=i}if(!(this.ColseButtonSize<=0&&this.SettingButtonSize<=0)){var r=0;this.SettingButtonSize>0&&(r+=this.SettingButtonSize),this.ColseButtonSize>0&&(r>0&&(r+=this.ButtonSpace),r+=this.ColseButtonSize),r+=4,this.ButtonBGWidth=r}},this.DrawButton=function(t,e,a,i){if(!(this.ColseButtonSize<=0&&this.SettingButtonSize<=0)){1==this.ButtonPosition&&(t-=a),this.Canvas.fillStyle=this.LineColor;var r=e,n={Left:e,Top:t,Width:this.ButtonBGWidth,Height:a};n.Right=n.Left+n.Width,n.Bottom=n.Top+n.Height,this.Canvas.fillStyle=this.ButtonBGColor,this.Canvas.fillRect(k(n.Left),k(n.Top),k(n.Width),k(n.Height)),r+=1;var o=A();if(this.Button.SettingIcon){var s={Left:r,Top:t,Width:this.SettingButtonSize,Height:a};s.Right=s.Left+s.Width,s.Bottom=s.Top+s.Height;var h=s.Top+s.Height/2,l=s.Left+s.Width/2,u=this.Button.SettingIcon;this.Canvas.font=u.Size*o+"px "+u.Family,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=u.Color,this.Canvas.fillText(this.Button.SettingIcon.Text,l,h),this.AryButton.push({Rect:s,ID:b.DRAW_PICTURE_SETTING}),r=s.Right+this.ButtonSpace}if(this.Button.CloseIcon){var s={Left:r,Top:t,Width:this.ColseButtonSize,Height:a};s.Right=s.Left+s.Width,s.Bottom=s.Top+s.Height;var h=s.Top+s.Height/2,l=s.Left+s.Width/2,u=this.Button.CloseIcon;this.Canvas.font=u.Size*o+"px "+u.Family,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=u.Color,this.Canvas.fillText(this.Button.CloseIcon.Text,l,h),this.AryButton.push({Rect:s,ID:b.DRAW_PICTURE_DELETE}),r=s.Right}i.Right=n.Right}},this.PtInButtons=function(t,e){for(var a=0;a<this.AryButton.length;++a){var i=this.AryButton[a];if(i.Rect){var r=i.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.Left,r.Top,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return{ID:i.ID,Rect:r}}}return null}}}},{Name:"Note",ClassName:"ChartDrawNote",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawNote",this.PointCount=1,this.Text=ia.ChartDrawNote.Text,this.FontOption={Family:ia.ChartDrawNote.FontOption.Family,Size:ia.ChartDrawNote.FontOption.Size},this.AryNoteText=[{Text:"输入内容 ......"}],this.NoteFontOption={Family:ia.ChartDrawNote.NoteFontOption.Family,Size:ia.ChartDrawNote.NoteFontOption.Size,Weight:ia.ChartDrawNote.NoteFontOption.Weight,Style:ia.ChartDrawNote.NoteFontOption.Style},this.NoteWidth=ia.ChartDrawNote.NoteWidth,this.NoteMargin={Left:ia.ChartDrawNote.NoteMargin.Left,Top:ia.ChartDrawNote.NoteMargin.Top,Bottom:ia.ChartDrawNote.NoteMargin.Bottom,Right:ia.ChartDrawNote.NoteMargin.Right},this.NoteBGColor=ia.ChartDrawNote.NoteBGColor,this.NoteTextColor=ia.ChartDrawNote.NoteTextColor,this.NoteBorderColor=ia.ChartDrawNote.NoteBorderColor,this.LineSpace=ia.ChartDrawNote.LineSpace,this.ArrowSize=ia.ChartDrawNote.ArrowSize,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!1,this.PtButtom,this.PtTop,this.TextRect=null,this.PtCenter,this.SetOption_Backup=this.SetOption,this.SetOption=function(t){if(this.SetOption_Backup(t),t){if(t.Text&&(this.Text=t.Text),t.FontOption&&this.SetFont(this.FontOption,t.FontOption),t.NoteFontOption&&this.SetFont(this.NoteFontOption,t.NoteFontOption),Te.IsNumber(t.NoteWidth)&&(this.NoteWidth=t.NoteWidth),t.NoteMargin){var e=t.NoteMargin;Te.IsNumber(e.Left)&&(this.NoteMargin.Left=e.Left),Te.IsNumber(e.Top)&&(this.NoteMargin.Top=e.Top),Te.IsNumber(e.Bottom)&&(this.NoteMargin.Bottom=e.Bottom),Te.IsNumber(e.Right)&&(this.NoteMargin.Right=e.Right)}t.NoteBGColor&&(this.NoteBGColor=t.NoteBGColor),t.NoteTextColor&&(this.NoteTextColor=t.NoteTextColor),t.NoteBorderColor&&(this.NoteBorderColor=t.NoteBorderColor),Te.IsNumber(t.LineSpace)&&(this.LineSpace=t.LineSpace),Te.IsNumber(t.ArrowSize)&&(this.ArrowSize=t.ArrowSize),Te.IsNonEmptyArray(t.AryNoteText)&&(this.AryNoteText=this.CloneArrayText(t.AryNoteText))}},this.ExportStorageData=function(){var t=this.ExportBaseData();if(t.Value=[],this.Value&&this.Value[0]){var e=this.Value[0];t.Value.push({XValue:e.XValue,YValue:e.YValue,DateTime:e.DateTime})}return t.NoteFont=this.NoteFont,t.NoteWidth=this.NoteWidth,t.NoteBGColor=this.NoteBGColor,t.NoteTextColor=this.NoteTextColor,t.NoteBorderColor=this.NoteBorderColor,t.LineSpace=this.LineSpace,t.ArrowSize=this.ArrowSize,t.NoteMargin={Left:this.NoteMargin.Left,Top:this.NoteMargin.Right,Bottom:this.NoteMargin.Bottom,Right:this.NoteMargin.Right},t.AryNoteText=this.CloneArrayText(this.AryNoteText),t},this.ImportStorageData=function(t){if(t.NoteFont&&(this.NoteFont=t.NoteFont),Te.IsNumber(t.NoteWidth)&&(this.NoteWidth=t.NoteWidth),t.NoteMargin){var e=t.NoteMargin;Te.IsNumber(e.Left)&&(this.NoteMargin.Left=e.Left),Te.IsNumber(e.Top)&&(this.NoteMargin.Top=e.Top),Te.IsNumber(e.Bottom)&&(this.NoteMargin.Bottom=e.Bottom),Te.IsNumber(e.Right)&&(this.NoteMargin.Right=e.Right)}t.NoteBGColor&&(this.NoteBGColor=t.NoteBGColor),t.NoteTextColor&&(this.NoteTextColor=t.NoteTextColor),this.NoteBorderColor=t.NoteBorderColor,Te.IsNumber(t.LineSpace)&&(this.LineSpace=t.LineSpace),Te.IsNumber(t.ArrowSize)&&(this.ArrowSize=t.ArrowSize),this.AryNoteText=this.CloneArrayText(t.AryNoteText)},this.Draw=function(){if(this.PtButtom=null,this.PtTop=null,this.TextRect=null,this.PtCenter=null,!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&1==t.length){var e=this.GetTextFont();if(e){this.ClipFrame();var a=this.Frame.IsHScreen,i=A();if(this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.font=e,a){this.Canvas.translate(t[0].X,t[0].Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.Text,0,0),this.PtButtom={X:t[0].X,Y:t[0].Y+this.FontOption.Size*i/2+2},this.PtTop={X:t[0].X,Y:t[0].Y-this.FontOption.Size*i/2-2},this.PtCenter=t[0];var r={X:t[0].X-this.FontOption.Size*i/2-2,Y:t[0].Y}}else{this.Canvas.fillText(this.Text,t[0].X,t[0].Y),this.PtButtom={X:t[0].X,Y:t[0].Y+this.FontOption.Size*i/2+2},this.PtTop={X:t[0].X,Y:t[0].Y-this.FontOption.Size*i/2-2};var r={X:this.PtButtom.X,Y:this.PtButtom.Y}}var n=this.Canvas.measureText(this.Text).width;this.TextRect={},this.TextRect.Left=t[0].X-n/2,this.TextRect.Top=t[0].Y-this.FontOption.Size*i/2,this.TextRect.Width=n,this.TextRect.Height=this.FontOption.Size*i,this.IsShowNoteText()&&this.DrawText(),this.Canvas.restore(),this.DrawPoint([r])}}}},this.DrawText=function(){this.Canvas.font=this.GetFontString(this.NoteFontOption);var t=0,e=this.Canvas.measureText("擎").width,a=this.Frame.GetBorder(),i=A(),r=this.Frame.IsHScreen,n=this.NoteWidth,o=[];if(Te.IsNonEmptyArray(this.AryNoteText))for(var s=0;s<this.AryNoteText.length;++s){var h=this.AryNoteText[s];if(h)if(t>0&&(t+=this.LineSpace),h.Text){var l=this.GetMultiLineText(h.Text,n);if(l&&Te.IsNonEmptyArray(l.AryText))for(var u=0;u<l.AryText.length;++u){u>0&&(t+=this.LineSpace);var c=l.AryText[u];o.push(c),t+=e}}else o.push({Text:""}),t+=e}else t=e;var f={Width:n+this.NoteMargin.Left+this.NoteMargin.Right,Height:t+this.NoteMargin.Top+this.NoteMargin.Bottom,ArrowType:0};r?(f.Left=this.PtTop.X-f.Width/2-this.PtCenter.X,f.Top=this.PtTop.Y-f.Height-this.ArrowSize-this.PtCenter.Y,f.Right=f.Left+f.Width,f.Bottom=f.Top+f.Height,f.Arrow={X:this.PtTop.X-this.PtCenter.X,Y:this.PtTop.Y-this.PtCenter.Y},this.PtCenter.X+t+this.FontOption.Size*i/2+2+this.ArrowSize>a.RightEx&&(f.Top=this.PtButtom.Y+this.ArrowSize+this.PointRadius*i-this.PtCenter.Y,f.Bottom=f.Top+f.Height,f.Arrow.X=this.PtButtom.X-this.PtCenter.X,f.Arrow.Y=this.PtButtom.Y-this.PtCenter.Y,f.ArrowType=1)):(f.Left=this.PtTop.X-f.Width/2,f.Top=this.PtTop.Y-f.Height-this.ArrowSize,f.Right=f.Left+f.Width,f.Bottom=f.Top+f.Height,f.Arrow={X:this.PtTop.X,Y:this.PtTop.Y},f.Left<a.Left?(f.Left=a.Left,f.Right=f.Left+f.Width):f.Right>a.Right&&(f.Right=a.Right,f.Left=f.Right-f.Width),f.Top<a.TopEx&&(f.Top=this.PtButtom.Y+this.ArrowSize+this.PointRadius*i,f.Bottom=f.Top+f.Height,f.Arrow.X=this.PtButtom.X,f.Arrow.Y=this.PtButtom.Y,f.ArrowType=1)),this.DrawNoteBG(f),this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.fillStyle=this.NoteTextColor;for(var d=f.Left+this.NoteMargin.Left,C=f.Top+this.NoteMargin.Top,s=0;s<o.length;++s){var h=o[s];h&&(h.Text?(this.Canvas.fillText(h.Text,d,C),C+=e):C+=e,C+=this.LineSpace)}},this.DrawNoteBG=function(t){if(this.Canvas.fillStyle=this.NoteBGColor,0==t.ArrowType||1==t.ArrowType){var e=new Path2D;if(0==t.ArrowType){e.moveTo(t.Left,t.Bottom),e.lineTo(t.Left,t.Top),e.lineTo(t.Right,t.Top),e.lineTo(t.Right,t.Bottom);var a=t.Arrow.X+.6*this.ArrowSize;e.lineTo(a,t.Bottom),e.lineTo(t.Arrow.X,t.Arrow.Y);var a=t.Arrow.X-.6*this.ArrowSize;e.lineTo(a,t.Bottom)}else{e.moveTo(t.Left,t.Top),e.lineTo(t.Left,t.Bottom),e.lineTo(t.Right,t.Bottom),e.lineTo(t.Right,t.Top);var a=t.Arrow.X+.6*this.ArrowSize;e.lineTo(a,t.Top),e.lineTo(t.Arrow.X,t.Arrow.Y);var a=t.Arrow.X-.6*this.ArrowSize;e.lineTo(a,t.Top)}e.closePath(),this.Canvas.fill(e),this.NoteBorderColor&&(this.Canvas.strokeStyle=this.NoteBorderColor,this.Canvas.stroke(e))}else this.Canvas.fillRect(t.Left,t.Top,t.Width,t.Height)},this.IsShowNoteText=function(){if(this.GetActiveDrawPicture){var t=this.GetActiveDrawPicture();return t.Move.Guid==this.Guid||t.Select.Guid==this.Guid||t.MoveOn.Guid==this.Guid}return!1},this.GetTextFont=function(){if(!this.FontOption||!this.FontOption.Family||this.FontOption.Size<=0)return null;var t="";return this.FontOption.Size>=0&&(t+=this.FontOption.Size*A()+"px "),t+=this.FontOption.Family},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;var a=this.Frame.Data;if(!a)return-1;if(!this.TextRect)return-1;var i=0;this.Option&&this.Option.Zoom>=1&&(i=this.Option.Zoom*A());var r={Left:this.TextRect.Left-i,Top:this.TextRect.Top-i,Width:this.TextRect.Width+2*i,Height:this.TextRect.Height+2*i};return r.Right=r.Left+r.Width,r.Bottom=r.Top+r.Height,t>r.Left&&t<r.Right&&e>r.Top&&e<r.Bottom?100:-1},this.GetCursorType=function(t){return 100==t?"pointer":null}}}},{Name:"AnchoredText",ClassName:"ChartDrawAnchoredText",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawAnchoredText",this.PointCount=1,this.AryText=[{Text:"输入内容"}],this.TextColor=ia.ChartDrawAnchoredText.TextColor,this.FontOption={Family:ia.ChartDrawAnchoredText.FontOption.Family,Size:ia.ChartDrawAnchoredText.FontOption.Size,Weight:ia.ChartDrawAnchoredText.FontOption.Weight,Style:ia.ChartDrawAnchoredText.FontOption.Style},this.TextMaxWidth=ia.ChartDrawAnchoredText.TextMaxWidth,this.LineSpace=ia.ChartDrawAnchoredText.LineSpace,this.BGColor=ia.ChartDrawAnchoredText.BGColor,this.BorderColor=ia.ChartDrawAnchoredText.BorderColor,this.TextMargin={Left:ia.ChartDrawAnchoredText.TextMargin.Left,Top:ia.ChartDrawAnchoredText.TextMargin.Top,Bottom:ia.ChartDrawAnchoredText.TextMargin.Bottom,Right:ia.ChartDrawAnchoredText.TextMargin.Right},this.TextRect,this.SetOption=function(t){t&&(t.TextColor&&(this.TextColor=t.TextColor),t.Text&&(this.Text=t.Text),t.FontOption&&this.SetFont(this.FontOption,t.FontOption),Te.IsNumber(t.TextMaxWidth)&&(this.TextMaxWidth=t.TextMaxWidth),Te.IsNonEmptyArray(t.AryText)&&(this.AryText=this.CloneArrayText(t.AryText)))},this.ExportStorageData=function(){var t=this.ExportBaseData(),e=this.Value[0];return t.Value=[{XValue:e.XValue,YValue:e.YValue}],t.FontOption={},this.SetFont(t.FontOption,this.FontOption),t.BGColor=this.BGColor,t.TextColor=this.TextColor,t.BorderColor=this.BorderColor,t.LineSpace=this.LineSpace,t.TextMaxWidth=this.TextMaxWidth,t.TextMargin={Left:this.TextMargin.Left,Top:this.TextMargin.Right,Bottom:this.TextMargin.Bottom,Right:this.TextMargin.Right},t.AryText=this.CloneArrayText(this.AryText),t},this.ImportStorageData=function(t){if(t.TextMargin){var e=t.TextMargin;Te.IsNumber(e.Left)&&(this.TextMargin.Left=e.Left),Te.IsNumber(e.Top)&&(this.TextMargin.Top=e.Top),Te.IsNumber(e.Bottom)&&(this.TextMargin.Bottom=e.Bottom),Te.IsNumber(e.Right)&&(this.TextMargin.Right=e.Right)}t.TextColor&&(this.TextColor=t.TextColor),this.BGColor=t.BGColor,this.BorderColor=t.BorderColor,this.TextMaxWidth=t.TextMaxWidth,Te.IsNumber(t.LineSpace)&&(this.LineSpace=t.LineSpace),this.AryText=this.CloneArrayText(t.AryText)},this.Draw=function(){if(this.TextRect=null,!(this.Status<2)&&1==this.Point.length&&this.Frame&&!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();t&&1==t.length&&(this.ClipFrame(),this.DrawMultiLineText(t[0]),this.Canvas.restore())}},this.ValueToPoint=function(){if(!this.Frame)return!1;var t=this.Value[0],e=this.XYValueToPoint(t.XValue,t.YValue);this.Point=[e]},this.PointToValue=function(){if(!this.Frame)return!1;var t=this.Frame.GetBorder(),e=this.Frame.IsHScreen;if(e){var a=t.LeftEx,i=t.Top,r=t.RightEx-a,n=t.Bottom-i,o=this.Point[0],s=(o.X-a)/r,h=(o.Y-i)/n;this.Value[0]={XValue:h,YValue:s}}else{var a=t.Left,i=t.TopEx,r=t.Right-a,n=t.BottomEx-i,o=this.Point[0],h=(o.X-a)/r,s=(o.Y-i)/n;this.Value[0]={XValue:h,YValue:s}}},this.XYValueToPoint=function(t,e){if(!this.Frame)return null;var a=this.Frame.IsHScreen,i=this.Frame.GetBorder();if(a){var r=i.LeftEx,n=i.Top,o=i.RightEx-r,s=i.Bottom-n,h=e*o+r,l=t*s+n;return{X:h,Y:l}}var r=i.Left,n=i.TopEx,o=i.Right-r,s=i.BottomEx-n,h=t*o+r,l=e*s+n;return{X:h,Y:l}},this.CalculateDrawPoint=function(t){if(this.Status<2)return null;if(1!=this.Point.length||!this.Frame)return null;var e=[];if(10==this.Status){var a=this.Value[0],i=this.XYValueToPoint(a.XValue,a.YValue);e.push(i)}else e=this.Point;return e},this.DrawMultiLineText=function(t){if(Te.IsNonEmptyArray(this.AryText)){var e=0;this.Canvas.font=this.GetFontString(this.FontOption);var a=this.Canvas.measureText("擎").width,i=(this.Frame.GetBorder(),A(),this.Frame.IsHScreen),r={X:t.X,Y:t.Y};i&&(this.Canvas.translate(r.X,r.Y),this.Canvas.rotate(90*Math.PI/180),r.X=0,r.Y=0);for(var n=[],o=0,s=0;s<this.AryText.length;++s){var h=this.AryText[s];if(h)if(e>0&&(e+=this.LineSpace),this.TextMaxWidth>50&&h.Text){var l=this.GetMultiLineText(h.Text,this.TextMaxWidth);if(l&&Te.IsNonEmptyArray(l.AryText))for(var u=0;u<l.AryText.length;++u){u>0&&(e+=this.LineSpace);var c=l.AryText[u];n.push(c),e+=a}}else{if(h.Text){var f=this.Canvas.measureText(h.Text).width+2;o<f&&(o=f)}n.push({Text:h.Text}),e+=a}}this.TextMaxWidth>50&&(o=this.TextMaxWidth);var d={Left:r.X,Bottom:r.Y,Height:e+this.TextMargin.Top+this.TextMargin.Bottom,Width:o+this.TextMargin.Left+this.TextMargin.Right};d.Top=d.Bottom-d.Height,d.Right=d.Left+d.Width,this.DrawBG(d),this.Canvas.fillStyle=this.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="top";for(var C=d.Left+this.TextMargin.Left,p=d.Top+this.TextMargin.Top,s=0;s<n.length;++s){var h=n[s];h&&(h.Text?(this.Canvas.fillText(h.Text,C,p),p+=a):p+=a,p+=this.LineSpace)}i&&(d.Left=t.X,d.Top=t.Y,d.Width=e+this.TextMargin.Top+this.TextMargin.Bottom,d.Height=o+this.TextMargin.Left+this.TextMargin.Right,d.Right=d.Left+d.Width,d.Bottom=d.Top+d.Height),this.TextRect=d;var m={X:d.Left+d.Width/2,Y:d.Bottom};this.DrawPoint([m])}},this.DrawBG=function(t){if(this.BGColor||this.BorderColor){var e=new Path2D;e.rect(t.Left,t.Top,t.Width,t.Height),this.BGColor&&(this.Canvas.fillStyle=this.BGColor,this.Canvas.fill(e)),this.BorderColor&&(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.stroke(e))}},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;if(!this.TextRect)return-1;var a=this.TextRect;return t>a.Left&&t<a.Right&&e>a.Top&&e<a.Bottom?100:-1},this.GetCursorType=function(t){return 100==t?"pointer":null}}}},{Name:"PriceLabel",ClassName:"ChartDrawPriceLabel",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPriceLabel",this.PointCount=1,this.OnlyMoveXIndex=!0,this.TextColor=ia.ChartDrawPriceLabel.TextColor,this.FontOption={Family:ia.ChartDrawPriceLabel.FontOption.Family,Size:ia.ChartDrawPriceLabel.FontOption.Size,Weight:ia.ChartDrawPriceLabel.FontOption.Weight,Style:ia.ChartDrawPriceLabel.FontOption.Style},this.BGColor=ia.ChartDrawPriceLabel.BGColor,this.BorderColor=ia.ChartDrawPriceLabel.BorderColor,this.LabelOffset={X:10,Y:20},this.TextMargin={Left:ia.ChartDrawPriceLabel.TextMargin.Left,Top:ia.ChartDrawPriceLabel.TextMargin.Top,Bottom:ia.ChartDrawPriceLabel.TextMargin.Bottom,Right:ia.ChartDrawPriceLabel.TextMargin.Right},this.TextRect,this.SetOption=function(t){if(t&&(t.TextColor&&(this.TextColor=t.TextColor),t.BGColor&&(this.BGColor=t.BGColor),t.BorderColor&&(this.BorderColor=t.BorderColor),t.FontOption&&this.SetFont(this.FontOption,t.FontOption),t.LabelOffset)){var e=t.LabelOffset;Te.IsNumber(e.X)&&(this.LabelOffset.X=e.X),Te.IsNumber(e.Y)&&(this.LabelOffset.Y=e.Y)}},this.ExportStorageData=function(){var t=this.ExportBaseData(),e=this.Value[0];return t.Value=[{XValue:e.XValue,YValue:e.YValue}],t.BGColor=this.BGColor,t.TextColor=this.TextColor,t.BorderColor=this.BorderColor,t.TextMargin={Left:this.TextMargin.Left,Top:this.TextMargin.Right,Bottom:this.TextMargin.Bottom,Right:this.TextMargin.Right},t},this.ImportStorageData=function(t){if(t.TextMargin){var e=t.TextMargin;Te.IsNumber(e.Left)&&(this.TextMargin.Left=e.Left),Te.IsNumber(e.Top)&&(this.TextMargin.Top=e.Top),Te.IsNumber(e.Bottom)&&(this.TextMargin.Bottom=e.Bottom),Te.IsNumber(e.Right)&&(this.TextMargin.Right=e.Right)}t.TextColor&&(this.TextColor=t.TextColor),this.BGColor=t.BGColor,this.BorderColor=t.BorderColor},this.Draw=function(){if(this.TextRect=null,!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&1==t.length){var e=t[0];this.ClipFrame(),this.DrawPriceLabel(e),this.Canvas.restore(),this.DrawPoint([e])}}},this.DrawPriceLabel=function(t){var e=this.GetFontString(this.FontOption);if(e){var a,i,r=this.Frame.IsHScreen,n=(A(),0);r?(this.Canvas.translate(t.X,t.Y),this.Canvas.rotate(90*Math.PI/180),a={X:0,Y:0},i=this.Frame.GetYData(t.X,!1),n=1):(a={X:t.X,Y:t.Y},i=this.Frame.GetYData(t.Y,!1));var o=2;this.Symbol&&0==this.Frame.Identify&&(o=Ga(this.Symbol));var s=i.toFixed(o);this.Canvas.font=e;var h=a.X+this.LabelOffset.X,l=a.Y-this.LabelOffset.Y,u=this.Canvas.measureText("擎").width,c=this.Canvas.measureText(s).width,f={Left:h,Bottom:l,Width:c+this.TextMargin.Left+this.TextMargin.Right,Height:u+this.TextMargin.Top+this.TextMargin.Bottom};f.Top=f.Bottom-f.Height,f.Right=f.Left+f.Width,this.DrawBG(f,a);var d=f.Left+f.Width/2,C=f.Top+f.Height/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(s,d,C+n),r?(this.TextRect={Left:t.X+this.LabelOffset.Y,Top:t.Y+this.LabelOffset.X,Width:u+this.TextMargin.Top+this.TextMargin.Bottom,Height:c+this.TextMargin.Left+this.TextMargin.Right},this.TextRect.Right=this.TextRect.Left+this.TextRect.Width,this.TextRect.Bottom=this.TextRect.Top+this.TextRect.Height):this.TextRect=f}},this.DrawBG=function(t,e){var a=A(),i=new Path2D;i.moveTo(t.Left,t.Bottom),i.lineTo(t.Left,t.Top),i.lineTo(t.Right,t.Top),i.lineTo(t.Right,t.Bottom);var r=t.Left+15*a;i.lineTo(r,t.Bottom),i.lineTo(e.X,e.Y),r=t.Left+5*a,i.lineTo(r,t.Bottom),i.closePath(),this.BGColor&&(this.Canvas.fillStyle=this.BGColor,this.Canvas.fill(i)),this.BorderColor&&(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.stroke(i)),this.BGColor&&(this.Canvas.beginPath(),this.Canvas.arc(e.X,e.Y,2*a,0,360,!1),this.Canvas.fillStyle=this.BGColor,this.Canvas.fill())},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;if(!this.TextRect)return-1;var a=this.TextRect;return t>a.Left&&t<a.Right&&e>a.Top&&e<a.Bottom?100:-1},this.GetCursorType=function(t){return 100==t?"pointer":null}}}},{Name:"PriceNote",ClassName:"ChartDrawPriceNote",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPriceNote",this.PointCount=2,this.GetXYCoordinate=this.GetXYCoordinate_default,this.IsPointIn=this.IsPointIn_XYValue_Line,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.FontOption={Family:ia.ChartDrawPriceNote.FontOption.Family,Size:ia.ChartDrawPriceNote.FontOption.Size,Weight:ia.ChartDrawPriceNote.FontOption.Weight,Style:ia.ChartDrawPriceNote.FontOption.Style},this.TextMargin={Left:ia.ChartDrawPriceNote.TextMargin.Left,Top:ia.ChartDrawPriceNote.TextMargin.Top,Bottom:ia.ChartDrawPriceNote.TextMargin.Bottom,Right:ia.ChartDrawPriceNote.TextMargin.Right},this.BGColor=ia.ChartDrawPriceNote.BGColor,this.BorderColor=ia.ChartDrawPriceNote.BorderColor,this.TextColor=ia.ChartDrawPriceNote.TextColor,this.BorderRoundRadius=3,this.TextRect,this.SetOption=function(t){t&&(t.TextColor&&(this.TextColor=t.TextColor),t.BGColor&&(this.BGColor=t.BGColor),t.BorderColor&&(this.BorderColor=t.BorderColor),t.FontOption&&this.SetFont(this.FontOption,t.FontOption))},this.ExportStorageData=function(){var t=this.ExportBaseData();t.Value=[];for(var e=0;e<this.Value.length;++e){var a=this.Value[e];t.Value.push({XValue:a.XValue,YValue:a.YValue})}return t.BGColor=this.BGColor,t.TextColor=this.TextColor,t.BorderColor=this.BorderColor,t.TextMargin={Left:this.TextMargin.Left,Top:this.TextMargin.Right,Bottom:this.TextMargin.Bottom,Right:this.TextMargin.Right},t},this.ImportStorageData=function(t){if(t.TextMargin){var e=t.TextMargin;Te.IsNumber(e.Left)&&(this.TextMargin.Left=e.Left),Te.IsNumber(e.Top)&&(this.TextMargin.Top=e.Top),Te.IsNumber(e.Bottom)&&(this.TextMargin.Bottom=e.Bottom),Te.IsNumber(e.Right)&&(this.TextMargin.Right=e.Right)}t.TextColor&&(this.TextColor=t.TextColor),this.BGColor=t.BGColor,this.BorderColor=t.BorderColor},this.Draw=function(){if(this.LinePoint=[],this.TextRect=null,!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.LineWidth=1,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth(),this.DrawPriceLabel(e,a);var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}},this.DrawPriceLabel=function(t,e){var a=this.GetFontString(this.FontOption);if(a){var i=2;this.Symbol&&0==this.Frame.Identify&&(i=Ga(this.Symbol));var r=A(),n={X:e.X,Y:e.Y},o=this.Frame.GetYData(t.Y,!1),s=o.toFixed(i),h=this.Canvas.measureText("擎").width,l=this.Canvas.measureText(s).width,u=this.CalculateAngle(t.X,t.Y,e.X,e.Y);if(u>=0&&u<=45||u>=315&&u<=360){var c=n.X,f=n.Y,d={Left:c,Bottom:f,Width:l+this.TextMargin.Left+this.TextMargin.Right,Height:h+this.TextMargin.Top+this.TextMargin.Bottom};d.Bottom=f+d.Height/2,d.Top=d.Bottom-d.Height,d.Right=d.Left+d.Width}else if(u>45&&u<=135){var c=n.X,f=n.Y,d={Left:c,Bottom:f,Width:l+this.TextMargin.Left+this.TextMargin.Right,Height:h+this.TextMargin.Top+this.TextMargin.Bottom};d.Left=c-d.Width/2,d.Top=d.Bottom-d.Height,d.Right=d.Left+d.Width}else if(u>=135&&u<=225){var c=n.X,f=n.Y,d={Width:l+this.TextMargin.Left+this.TextMargin.Right,Height:h+this.TextMargin.Top+this.TextMargin.Bottom};d.Bottom=f+d.Height/2,d.Top=d.Bottom-d.Height,d.Right=c,d.Left=d.Right-d.Width}else{if(!(u>=225&&u<=315))return;var c=n.X,C=n.Y,d={Width:l+this.TextMargin.Left+this.TextMargin.Right,Height:h+this.TextMargin.Top+this.TextMargin.Bottom};d.Top=C,d.Bottom=d.Top+d.Height,d.Left=c-d.Width/2,d.Right=d.Left-d.Width}this.DrawBG(d),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor;var p=d.Left+this.TextMargin.Left,m=d.Top+d.Height/2;this.Canvas.fillText(s,p,m+0),this.BGColor&&(this.Canvas.beginPath(),this.Canvas.arc(t.X,t.Y,2*r,0,360,!1),this.Canvas.fillStyle=this.BGColor,this.Canvas.fill()),this.TextRect=d}},this.DrawBG=function(t){if(t){var e=A(),a=this.BorderRoundRadius*e,i=new Path2D;i.roundRect(_(t.Left),_(t.Top),k(t.Width),k(t.Height),[a]),this.BGColor&&(this.Canvas.fillStyle=this.BGColor,this.Canvas.fill(i)),this.BorderColor&&(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.stroke(i))}},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;if(!this.TextRect)return-1;var a=this.TextRect;return t>a.Left&&t<a.Right&&e>a.Top&&e<a.Bottom?1:this.IsPointIn_XYValue_Line(t,e)}}}},{Name:"FibWedge",ClassName:"ChartDrawFibWedge",Create:function(){return new function(){this.newMethod=We,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawFibWedge",this.PointCount=3,this.Font=12*A()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.PointToValue_Default=this.PointToValue,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.LastPoint,this.AreaConfig={AryData:[{Value:.236,Color:"rgb(242,52,69)",Enable:!0},{Value:.382,Color:"rgb(255,152,0)",Enable:!0},{Value:.5,Color:"rgb(76,175,80)",Enable:!0},{Value:.618,Color:"rgb(8,153,129)",Enable:!0},{Value:.786,Color:"rgb(0,188,212)",Enable:!0},{Value:1,Color:"rgb(120,123,134)",Enable:!0},{Value:1.618,Color:"rgb(41,98,255)",Enable:!1},{Value:2.618,Color:"rgb(242,54,69)",Enable:!1}],Opacity:.3},this.TextAngle,this.Radius,this.CalculateHypotenuse=function(t,e){var a=t.X-e.X,i=t.Y-e.Y,r=Math.sqrt(a*a+i*i);return r},this.MagnetXY=function(t){var e={IsFixedX:this.OnlyMoveXIndex};if(this.Option&&this.Option.Magnet&&this.Option.Magnet.Enable&&this.IsSupportMagnet&&0==this.Frame.Identify){var a=-1;2==this.Status&&(a=1),Te.IsNumber(this.MovePointIndex)&&(a=this.MovePointIndex),a>=0&&(e.Magnet={Enable:!0,PointIndex:a,Distance:this.Option.Magnet.Distance,Type:this.Option.Magnet.Type})}this.AdjustPoint(t,e)},this.CalculateAllPoint=function(t,e,a){var i=[];i.push({X:t.X,Y:t.Y}),i.push({X:e.X,Y:e.Y}),this.MagnetXY(i),i.push({X:a.X,Y:a.Y});var r=this.CalculateHypotenuse(i[0],i[1]),n=i[0].X-i[2].X,o=i[0].Y-i[2].Y,s=Math.sqrt(n*n+o*o),h=n*r/s,l=o*r/s;return i[2].X=i[0].X-h,i[2].Y=i[0].Y-l,i},this.ValueToPoint_V2=function(t){if(!Te.IsNonEmptyArray(t))return null;if(!this.Frame)return null;var e=this.Frame.Data;if(!e)return null;for(var a=this.Frame.IsHScreen,i=[],r=0;r<t.length;++r){var n=t[r],o=new V;a?(o.Y=this.Frame.GetXFromIndex(n.XValue-e.DataOffset,!1),o.X=this.Frame.GetYFromData(n.YValue,!1)):(o.X=this.Frame.GetXFromIndex(n.XValue-e.DataOffset,!1),o.Y=this.Frame.GetYFromData(n.YValue,!1)),i[r]=o}return i},this.CalculateDrawPoint=function(t){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var e=[];if(2==this.Status)if(2==this.PointStatus&&this.LastPoint)e=this.CalculateAllPoint(this.Point[0],this.Point[1],this.LastPoint);else{for(var a=0;a<this.Point.length&&a<2;++a){var i=this.Point[a];e.push({X:i.X,Y:i.Y})}this.MagnetXY(e)}else if(10==this.Status){var r=this.Frame.Data;if(!r)return null;for(var n=this.Frame.XPointCount,o=this.Frame.IsHScreen,a=0;a<this.Value.length;++a){var i=this.Value[a],s=i.XValue-r.DataOffset;(s<0||s>=n)&&0;var h=new V;o?(h.Y=this.Frame.GetXFromIndex(i.XValue-r.DataOffset,!1),h.X=this.Frame.GetYFromData(i.YValue,!1)):(h.X=this.Frame.GetXFromIndex(i.XValue-r.DataOffset,!1),h.Y=this.Frame.GetYFromData(i.YValue,!1)),e.push(h)}}else 20==this.Status&&(e=this.CalculateAllPoint(this.Point[0],this.Point[1],this.Point[2]));return e},this.Draw=function(){if(this.LinePoint=[],this.TextAngle=null,this.Radius=null,!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!1});if(Te.IsNonEmptyArray(t)){var e=t.slice(0);this.CalculateLines(e),this.ClipFrame(),this.DrawArea(e),this.DrawLines(this.LinePoint),this.DrawPoint(e),this.DrawTitle(e),this.Canvas.restore()}}},this.DrawArea=function(t){if(3==t.length&&this.AreaConfig&&Te.IsNonEmptyArray(this.AreaConfig.AryData)){var e=t[0],a=this.CalculateHypotenuse(e,t[1]),i=this.CalculateAngle(e.X,e.Y,t[1].X,t[1].Y),r=this.CalculateAngle(e.X,e.Y,t[2].X,t[2].Y),n=i-r;if(n<0&&(n+=360),n>180){var o=i;i=r,r=o}var s=i-(i-r)/2;i-r<0&&(s-=180);for(var h=null,l=0;l<this.AreaConfig.AryData.length;++l){var u=this.AreaConfig.AryData[l];if(u.Enable){var c=a*u.Value,f=u.Color,d=We.ColorToRGBA(f,this.AreaConfig.Opacity),C=new Path2D;Te.IsNumber(h)?(C.arc(e.X,e.Y,h,Math.PI/180*(360-i),Math.PI/180*(360-r)),C.arc(e.X,e.Y,c,Math.PI/180*(360-r),Math.PI/180*(360-i),!0)):(C.moveTo(e.X,e.Y),C.arc(e.X,e.Y,c,Math.PI/180*(360-i),Math.PI/180*(360-r))),this.Canvas.fillStyle=d,this.Canvas.fill(C),h=c}}for(var l=0;l<this.AreaConfig.AryData.length;++l){var u=this.AreaConfig.AryData[l];if(u.Enable){var c=a*u.Value,f=u.Color,C=new Path2D;C.arc(e.X,e.Y,c,Math.PI/180*(360-i),Math.PI/180*(360-r)),this.Canvas.strokeStyle=f,this.Canvas.stroke(C)}}this.Radius=a,this.TextAngle=s}},this.DrawTitle=function(t){if(3==t.length&&this.AreaConfig&&Te.IsNonEmptyArray(this.AreaConfig.AryData)){var e=t[0],a=Math.PI/180*(360-this.TextAngle);this.Canvas.font=this.Font;for(var i=0;i<this.AreaConfig.AryData.length;++i){var r=this.AreaConfig.AryData[i];if(r.Enable){var n=this.Radius*r.Value,o=r.Color,s=""+r.Value,h=Math.sin(a)*n+e.Y,l=Math.cos(a)*n+e.X;this.Canvas.fillStyle=o,this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.fillText(s,l+2,h+2)}}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.DrawLines=function(t){if(Te.IsNonEmptyArray(t))for(var e=0;e<t.length;++e){var a=t[e];this.DrawLine(a.Start,a.End)}},this.CalculateLines=function(t){if(2===t.length){var e={Start:new V,End:new V};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e)}else if(3===t.length){var e={Start:new V,End:new V};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e),(e={Start:new V,End:new V}).Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[2].Y,e.End.X=t[2].X,this.LinePoint.push(e)}},this.IsPointIn=function(t,e,a){if(10!=this.Status)return-1;var i=this.IsPointInXYValue(t,e,this.AryPoint,a);return i>=0?i:(i=this.IsPointInLine(t,e,a))>=0?100:-1},this.IsPointInDots=function(t,e,a,i){if(!Te.IsNonEmptyArray(a))return-1;if(!this.Frame)return-1;var r=this.Frame.Data;if(!r)return-1;if(!this.Value)return-1;var n=5;i&&Te.IsNumber(i.Zoom)?n+=i.Zoom:this.Option&&Te.IsNumber(this.Option.Zoom)&&(n+=this.Option.Zoom);this.Frame.IsHScreen;n*=A();for(var o=0;o<a.length;++o){var s=a[o],h=new Path2D;if(h.arc(s.X,s.Y,n,0,360),this.Canvas.isPointInPath(h,t,e))return o}return-1},this.GetCursorType=function(t){return 2==t?"ns-resize":null},this.PointToValue=function(){if(!this.Frame)return!1;var t=this.Point[2],e={X:t.X,Y:t.Y};if(!this.PointToValue_Default())return!1;var a=[this.Value[0],this.Value[1]],i=this.ValueToPoint_V2(a),r=this.CalculateHypotenuse(i[0],i[1]),n=i[0].X-e.X,o=i[0].Y-e.Y,s=Math.sqrt(n*n+o*o),h=n*r/s,l=o*r/s;this.Point[2].X=i[0].X-h,this.Point[2].Y=i[0].Y-l;var a=this.PointToValue_V2([this.Point[2]],{Type:1});return!!a&&(this.Value[2]=a[0],!0)},this.PointToValue_V2=function(t,e){return this.Frame?"MinuteFrame"==this.Frame.ClassName||"MinuteHScreenFrame"==this.Frame.Class?this.PointToValue_Minute_V2(t,e):this.PointToValue_KLine_V2(t,e):null},this.PointToValue_KLine_V2=function(t,e){if(!Te.IsNonEmptyArray(t))return null;if(!this.Frame)return null;var a=this.Frame.Data;if(!a)return null;var i=[],r=this.Frame.IsHScreen;if(r)for(var n=0;n<t.length;++n){var o=t[n],s=this.Frame.GetXData(o.Y,!1)+a.DataOffset,h=this.Frame.GetYData(o.X,!1),l={XValue:s,YValue:h,Type:1};i[n]=l}else for(var n=0;n<t.length;++n){var o=t[n],s=this.Frame.GetXData(o.X,!1)+a.DataOffset,h=this.Frame.GetYData(o.Y,!1),l={XValue:s,YValue:h,Type:1};i[n]=l}return i}}}}],We.MapIonFont=new C.default([["icon-arrow_up",{Text:"",Color:"#318757",Family:"iconfont"}],["icon-arrow_down",{Text:"",Color:"#db563e",Family:"iconfont"}],["icon-arrow_right",{Text:"",Color:"#318757",Family:"iconfont"}],["icon-arrow_left",{Text:"",Color:"#318757",Family:"iconfont"}]]),We.GetDrawPictureByName=function(t){for(var e in We.ArrayDrawPricture){var a=We.ArrayDrawPricture[e];if(a.Name==t)return a}return null},We.GetDrawPictureByClassName=function(t){for(var e in We.ArrayDrawPricture){var a=We.ArrayDrawPricture[e];if(a.ClassName==t)return a}return null},We.RegisterDrawPicture=function(t){if(!t.Name||!t.ClassName||!t.Create)return!1;var e={Name:t.Name,ClassName:t.ClassName,Create:t.Create};return We.ArrayDrawPricture.push(e),D.Chart.Log("[IChartDrawPicture.RegisterDrawPicture] registered new draw picture class. item=",e),!0},We.RegisterIonFont=function(t){if(!t.Name||!t.Text||!t.Family)return!1;var e=We.MapIonFont.has(t.Name);return We.MapIonFont.set(t.Name,t),D.Chart.Log("[IChartDrawPicture.RegisterIonFont] registered new icon font, obj=, isOverwirte=",t,e),!0},We.CreateChartDrawPicture=function(t){var e=We.GetDrawPictureByClassName(t.ClassName);if(!e)return null;var a=e.Create();return t.Period>=0&&(a.Period=t.Period),t.Right>=0&&(a.Right=t.Right),t.Guid&&(a.Guid=t.Guid),t.Symbol&&(a.Symbol=t.Symbol),t.Value&&(a.Value=t.Value),t.Text&&(a.Text=t.Text),t.LineColor&&(a.LineColor=t.LineColor),t.AreaColor&&(a.AreaColor=t.AreaColor),t.FontOption&&(a.FontOption=t.FontOption),t.Label&&(a.Label=t.Label),t.LineWidth>0&&(a.LineWidth=t.LineWidth),!1===t.EnableMove&&(a.EnableMove=t.EnableMove),Te.IsBool(t.EnableSave)&&(a.EnableSave=t.EnableSave),Te.IsNumber(t.ChannelWidth)&&(a.ChannelWidth=t.ChannelWidth),Te.IsBool(t.IsShowYCoordinate)&&(a.IsShowYCoordinate=t.IsShowYCoordinate),a.SetOption&&a.SetOption(t),a};var ia=new aa,ra={LANGUAGE_CHINESE_ID:0,LANGUAGE_ENGLISH_ID:1,LANGUAGE_TRADITIONAL_CHINESE_ID:2};var na=new function(){this.TextResource=new C.default([["Tooltip-Open",{CN:"开:",EN:"O:",TC:"開"}],["Tooltip-High",{CN:"高:",EN:"H:",TC:"高"}],["Tooltip-Low",{CN:"低:",EN:"L:",TC:"低"}],["Tooltip-Close",{CN:"收:",EN:"C:",TC:"收"}],["Tooltip-Increase",{CN:"幅:",EN:"I:",TC:"幅"}],["Tooltip-Vol",{CN:"量:",EN:"V:",TC:"量"}],["Tooltip-Amount",{CN:"额:",EN:"A:",TC:"額"}],["Tooltip-AvPrice",{CN:"均:",EN:"AP:",TC:"均"}],["Tooltip-Price",{CN:"价:",EN:"P:",TC:"價"}],["Tooltip-Exchange",{CN:"换:",EN:"E:",TC:"換"}],["Tooltip-Position",{CN:"持:",EN:"P:",TC:"持"}],["DivTooltip-Open",{CN:"开盘:",EN:"Open:",TC:"開盤"}],["DivTooltip-High",{CN:"最高:",EN:"High:",TC:"最高"}],["DivTooltip-Low",{CN:"最低:",EN:"Low:",TC:"最低"}],["DivTooltip-Close",{CN:"收盘:",EN:"Close:",TC:"收盤"}],["DivTooltip-Increase",{CN:"涨幅:",EN:"Increase:",TC:"漲幅"}],["DivTooltip-Vol",{CN:"数量:",EN:"Volume:",TC:"數量"}],["DivTooltip-Amount",{CN:"金额:",EN:"Amount:",TC:"金額"}],["DivTooltip-Exchange",{CN:"换手:",EN:"Exchange:",TC:"換手"}],["DivTooltip-Position",{CN:"持仓:",EN:"Position:",TC:"持倉"}],["DivTooltip-Price",{CN:"价格:",EN:"Open:",TC:"價格"}],["PCTooltip-Date",{CN:"日期",EN:"Date",TC:"日期"}],["PCTooltip-Time",{CN:"时间",EN:"Time",TC:"時間"}],["PCTooltip-Price",{CN:"价格",EN:"Price:",TC:"價格"}],["PCTooltip-AvPrice",{CN:"均价",EN:"AVPrice:",TC:"均價"}],["PCTooltip-Increase",{CN:"涨幅",EN:"Increase:",TC:"漲幅"}],["PCTooltip-Vol",{CN:"成交量",EN:"Volume:",TC:"成交量"}],["PCTooltip-Amount",{CN:"成交额",EN:"Amount:",TC:"成交額"}],["PCTooltip-AC-Price",{CN:"匹配价:",EN:"Price:",TC:"匹配價"}],["PCTooltip-AC-Increase",{CN:"竞价涨幅:",EN:"Increase:",TC:"競價漲幅"}],["PCTooltip-AC-Vol",{CN:"匹配量:",EN:"V:",TC:"匹配量"}],["PCTooltip-AC-NotMatchVol",{CN:"未匹配量:",EN:"NV:",TC:"未匹配量"}],["KTitle-Open",{CN:"开:",EN:"O:",TC:"開"}],["KTitle-High",{CN:"高:",EN:"H:",TC:"高"}],["KTitle-Low",{CN:"低:",EN:"L:",TC:"低"}],["KTitle-Close",{CN:"收:",EN:"C:",TC:"收"}],["KTitle-Increase",{CN:"幅:",EN:"I:",TC:"幅"}],["KTitle-Vol",{CN:"量:",EN:"V:",TC:"量"}],["KTitle-Amount",{CN:"额:",EN:"A:",TC:"額"}],["KTitle-Exchange",{CN:"换:",EN:"E:",TC:"換"}],["KTitle-Position",{CN:"持:",EN:"P:",TC:"持"}],["KTitle-Price",{CN:"价:",EN:"Price:",TC:"價"}],["MTitle-AC-Price",{CN:"匹配价:",EN:"C:",TC:"匹配價"}],["MTitle-AC-AvPrice",{CN:"匹配均价:",EN:"C:",TC:"匹配均價"}],["MTitle-AC-Increase",{CN:"竞价涨幅:",EN:"I:",TC:"競價漲幅"}],["MTitle-AC-Vol",{CN:"匹配量:",EN:"V:",TC:"匹配量"}],["MTitle-AC-NotMatchVol",{CN:"未匹配量:",EN:"NV:",TC:"未匹配量"}],["MTitle-AC-Amount",{CN:"匹配量金额:",EN:"A:",TC:"匹配量金额"}],["MTitle-AC-NotMatchAmount",{CN:"未匹配量金额:",EN:"NA:",TC:"未匹配量金额"}],["MTitle-Close",{CN:"价:",EN:"C:",TC:"價"}],["MTitle-AvPrice",{CN:"均:",EN:"AC:",TC:"均"}],["MTitle-Increase",{CN:"幅:",EN:"I:",TC:"幅"}],["MTitle-Vol",{CN:"量:",EN:"V:",TC:"量"}],["MTitle-Amount",{CN:"额:",EN:"A:",TC:"額"}],["MTitle-Position",{CN:"持:",EN:"P:",TC:"持"}],["MTitle-UpdateTime",{CN:"更新:",EN:"Update:",TC:"更新:"}],["日线",{CN:"日线",EN:"1D",TC:"日綫"}],["周线",{CN:"周线",EN:"1W",TC:"周綫"}],["双周",{CN:"双周",EN:"2W",TC:"雙周"}],["月线",{CN:"月线",EN:"1M",TC:"月綫"}],["半年",{CN:"半年",EN:"HY",TC:"半年"}],["年线",{CN:"年线",EN:"1Y",TC:"年綫"}],["1分",{CN:"1分",EN:"1Min",TC:"1分"}],["5分",{CN:"5分",EN:"5Min",TC:"5分"}],["15分",{CN:"15分",EN:"15Min",TC:"15分"}],["30分",{CN:"30分",EN:"30Min",TC:"30分"}],["60分",{CN:"60分",EN:"60Min",TC:"60分"}],["季线",{CN:"季线",EN:"1Q",TC:"季綫"}],["分笔",{CN:"分笔",EN:"Tick",TC:"分筆"}],["2小时",{CN:"2小时",EN:"2H",TC:"2小時"}],["4小时",{CN:"4小时",EN:"4H",TC:"4小時"}],["不复权",{CN:"不复权",EN:"No Right",TC:"不復權"}],["前复权",{CN:"前复权",EN:"Pro Right",TC:"前復權"}],["后复权",{CN:"后复权",EN:"Post Right",TC:"后復權"}],["日",{CN:"日",EN:"Sun.",TC:"日"}],["一",{CN:"一",EN:"Mon.",TC:"壹"}],["二",{CN:"二",EN:"Tues.",TC:"貳"}],["三",{CN:"三",EN:"Wed.",TC:"叁"}],["四",{CN:"四",EN:"Thur.",TC:"肆"}],["五",{CN:"五",EN:"Fri.",TC:"伍"}],["六",{CN:"六",EN:"Sat.",TC:"陸"}],["1月",{CN:"1月",EN:"Jan",TC:"1月"}],["2月",{CN:"2月",EN:"Feb",TC:"2月"}],["3月",{CN:"3月",EN:"Mar",TC:"3月"}],["4月",{CN:"4月",EN:"Apr",TC:"4月"}],["5月",{CN:"5月",EN:"May",TC:"5月"}],["6月",{CN:"6月",EN:"Jun",TC:"6月"}],["7月",{CN:"7月",EN:"Jul",TC:"7月"}],["8月",{CN:"8月",EN:"Aug",TC:"8月"}],["9月",{CN:"9月",EN:"Sept",TC:"9月"}],["10月",{CN:"10月",EN:"Oct",TC:"10月"}],["11月",{CN:"11月",EN:"Nov",TC:"11月"}],["12月",{CN:"12月",EN:"Dec",TC:"12月"}],["自定义分钟",{CN:"分",EN:"Min",TC:"分"}],["自定义日线",{CN:"日",EN:"D",TC:"日"}],["自定义秒",{CN:"秒",EN:"S",TC:"秒"}],["MVol-Vol",{CN:"成交量",EN:"Volume",TC:"成交量"}],["MVol-Position",{CN:"持仓量",EN:"Position",TC:"持倉量"}],["Depth-Price",{CN:"委托价",EN:"Price",TC:"委托價"}],["Depth-Sum",{CN:"累计",EN:"Sum",TC:"累計"}],["Toolbar-"+b.MODIFY_INDEX_PARAM,{CN:"调整指标参数",EN:"Change indicator parameters",TC:"调整指标参数"}],["Toolbar-"+b.CHANGE_INDEX,{CN:"选择指标",EN:"Change indicator",TC:"切换指标"}],["Toolbar-"+b.CLOSE_INDEX_WINDOW,{CN:"关闭窗口",EN:"Delete window",TC:"关闭指标窗口"}],["Toolbar-"+b.OVERLAY_INDEX,{CN:"叠加指标",EN:"Overlay indicator",TC:"叠加指标"}],["Toolbar-"+b.MODIFY_OVERLAY_INDEX_PARAM,{CN:"调整叠加指标参数",EN:"Change overlay indicator parameters",TC:"调整叠加指标参数"}],["Toolbar-"+b.MAX_MIN_WINDOW,{CN:"最大化",EN:"Maximize",TC:"最大化"}],["Toolbar-"+b.TITLE_WINDOW,{CN:"折叠窗口",EN:"Collapse window",TC:"折叠窗口"}],["Toolbar-"+b.EXPORT_DATA,{CN:"数据导出",EN:"Export data",TC:"数据导出"}],["Toolbar-"+b.CLOSE_BEFOREOPEN_ID,{CN:"关闭集合竞价",EN:"Close call auction",TC:"关闭集合竞价"}],["Toolbar-"+b.CLOSE_OVERLAY_INDEX,{CN:"关闭叠加指标",EN:"Delte overlay indicator",TC:"关闭叠加指标"}],["Toolbar-"+b.CHIP_RECENT,{CN:"近期成本分布",EN:"Recent chip",TC:"近期成本分布"}],["Toolbar-"+b.CHIP_LONG,{CN:"远期成本分布",EN:"Long chip",TC:"远期成本分布"}],["Toolbar-"+b.CHIP_DEFULT,{CN:"默认筹码分布",EN:"Default chip",TC:"默认筹码分布"}],["Toolbar-"+b.DRAW_PICTURE_DELETE,{CN:"删除",EN:"Delete",TC:"删除"}],["Toolbar-"+b.DRAW_PICTURE_SETTING,{CN:"设置",EN:"Setting",TC:"设置"}]]),this.GetText=function(t,e){var a=this.TextResource.get(t);if(!a)return"";switch(e){case ra.LANGUAGE_CHINESE_ID:return a.CN;case ra.LANGUAGE_ENGLISH_ID:return a.EN;case ra.LANGUAGE_TRADITIONAL_CHINESE_ID:return a.TC;default:return a.CN}},this.SetTextResource=function(t,e){this.TextResource.set(t,e)},this.GetLanguageID=function(t){var e=null;switch(t){case"EN":e=ra.LANGUAGE_ENGLISH_ID;break;case"CN":e=ra.LANGUAGE_CHINESE_ID;break;case"TC":e=ra.LANGUAGE_TRADITIONAL_CHINESE_ID}return e}};function oa(){}function sa(){}oa.Get=function(t){return new C.default([["市场多空",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=ma,this.newMethod("Long-Short"),delete this.newMethod,this.Index=new Array(new pa("多头区域",null),new pa("空头区域",null),new pa("市场多空指标",null)),this.Index[0].LineColor=ia.UpBarColor,this.Index[1].LineColor=ia.DownBarColor,this.Index[2].LineColor=ia.Index.LineColor[0],this.LongShortData,this.CreateChart=function(t){if(2==t){var e=new At;return e.LineWidth=2,e}return new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartStraightLine",this.Color="rgb(255,193,37)",this.Draw=function(){if(this.Data&&this.Data.Data&&1==this.Data.Data.length){this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight();var t=this.ChartFrame.XPointCount,e=this.Data.Data[0],a=this.ChartFrame.GetYFromData(e),i=this.ChartFrame.GetXFromIndex(0),r=this.ChartFrame.GetXFromIndex(t-1),n=parseInt(a.toString())+.5;this.Canvas.beginPath(),this.Canvas.moveTo(i,n),this.Canvas.lineTo(r,n),this.Canvas.strokeStyle=this.Color,this.Canvas.stroke()}},this.GetMaxMin=function(){this.ChartFrame.XPointCount;var t={Min:null,Max:null};return this.Data&&this.Data.Data?1!=this.Data.Data.length?t:(t.Min=this.Data.Data[0],t.Max=this.Data.Data[0],t):t}}},this.GetOutData=function(){return{LongShortData:this.LongShortData}},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};return this.LongShortData=[],r.HQChart.Period>0?(this.NotSupport(r.HQChart,r.WindowIndex,"不支持周期切换"),r.HQChart.Draw(),this.SendEvent(t,e,a,"不支持周期切换"),!1):(v.HttpRequest({url:ia.Index.MarketLongShortApiUrl,data:{},type:"post",dataType:"json",async:!0,success:function(n){i.RecvData(n,r),i.SendEvent(t,e,a)}}),!0)},this.RecvData=function(t,e){if(!(t.data.length<=0)){var a=new Array;for(var i in t.data){var r=t.data[i],n=new ct;n.Date=r[0],n.Value=r[1],a.push(n)}var o=e.HistoryData.GetFittingData(a),s=new pt;s.Data=o,s.Period=e.HQChart.Period,s.Right=e.HQChart.Right,this.LongShortData=s.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay();if(i.length!=this.Index.length)return!1;i[2].Data.Data=this.LongShortData,i[0].Data.Data[0]=8,i[1].Data.Data[0]=1;var n=e+1;if(r){this.OverlayIndex.Frame.Frame.YSpecificMaxMin={Max:9,Min:0,Count:3};var o=t.TitlePaint[n];for(var s in o.OverlayIndex.set(this.OverlayIndex.Identify,{Data:[],Title:""}),i){var h=new Ye(i[s].Data,this.Index[s].Name,this.Index[s].LineColor);2!=s&&(h.DataType="StraightLine"),o.OverlayIndex.get(this.OverlayIndex.Identify).Data[s]=h}}else for(var s in t.Frame.SubFrame[e].Frame.YSpecificMaxMin={Max:9,Min:0,Count:3},i)t.TitlePaint[n].Data[s]=new Ye(i[s].Data,this.Index[s].Name,this.Index[s].LineColor),2!=s&&(t.TitlePaint[n].Data[s].DataType="StraightLine");return!0}}}}],["市场择时",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=ma,this.newMethod("Market-Timing"),delete this.newMethod,this.Index=new Array(new pa("因子择时",null)),this.TimingData,this.TitleColor=ia.FrameSplitTextColor,this.CreateChart=function(t){return new Jt},this.GetOutData=function(){return{TimingData:this.TimingData}},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};return this.LongShortData=[],r.HQChart.Period>0?(this.NotSupport(r.HQChart,r.WindowIndex,"不支持周期切换"),r.HQChart.Draw(),this.SendEvent(t,e,a,"不支持周期切换"),!1):(v.HttpRequest({url:ia.Index.MarketLongShortApiUrl,data:{},type:"post",dataType:"json",async:!0,success:function(n){i.RecvData(n,r),i.SendEvent(t,e,a)}}),!0)},this.RecvData=function(t,e){if(!(t.data.length<=0)){var a=new Array;for(var i in t.data){var r=t.data[i],n=new ct;n.Date=r[0],n.Value=r[2],a.push(n)}var o=e.HistoryData.GetFittingData(a),s=new pt;s.Data=o,s.Period=e.HQChart.Period,s.Right=e.HQChart.Right,this.TimingData=s.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay();if(i.length!=this.Index.length)return!1;i[0].Data.Data=this.TimingData,i[0].NotSupportMessage=null;var n=e+1;if(r){var o=t.TitlePaint[n];for(var s in o.OverlayIndex.set(this.OverlayIndex.Identify,{Data:[],Title:""}),i){var h=new Ye(i[s].Data,this.Index[s].Name,this.Index[s].LineColor);h.StringFormat=He.THOUSANDS,h.FloatPrecision=0,o.OverlayIndex.get(this.OverlayIndex.Identify).Data[s]=h}}else for(var s in i)t.TitlePaint[n].Data[s]=new Ye(i[s].Data,this.Index[s].Name,this.TitleColor),t.TitlePaint[n].Data[s].StringFormat=He.THOUSANDS,t.TitlePaint[n].Data[s].FloatPrecision=0;return!0}}}}],["市场关注度",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=ma,this.newMethod("Market-Attention"),delete this.newMethod,this.Index=new Array(new pa("市场关注度",null)),this.Data,this.TitleColor=ia.FrameSplitTextColor,this.ApiUrl=ia.Index.MarketAttentionApiUrl,this.CreateChart=function(t){return new Jt},this.GetOutData=function(){return{Data:this.Data}},this.SetFrame=function(t,e,a){var i=this.IsOverlay();i?this.OverlayIndex.Frame.Frame.YSpecificMaxMin={Max:6,Min:0,Count:3}:t.Frame.SubFrame[e].Frame.YSpecificMaxMin={Max:6,Min:0,Count:3}},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};return this.Data=[],r.HQChart.Period>0?(this.NotSupport(r.HQChart,r.WindowIndex,"不支持周期切换"),r.HQChart.Draw(),this.SendEvent(t,e,a,"不支持周期切换"),!1):(v.HttpRequest({url:this.ApiUrl,data:{symbol:r.HQChart.Symbol,startdate:20100101},type:"post",dataType:"json",async:!0,success:function(n){i.RecvData(n,r),i.SendEvent(t,e,a)}}),!0)},this.RecvData=function(t,e){if(!(t.date.length<0)){var a=new Array;for(var i in t.date){var r=new ct;r.Date=t.date[i],r.Value=t.value[i],a.push(r)}var n=e.HistoryData.GetFittingData(a),o=new pt;o.Data=n,o.Period=e.HQChart.Period,o.Right=e.HQChart.Right,this.Data=o.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),this.SetFrame(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay();if(i.length!=this.Index.length)return!1;i[0].Data.Data=this.Data,i[0].NotSupportMessage=null;var n=e+1;if(r){var o=t.TitlePaint[n];for(var s in o.OverlayIndex.set(this.OverlayIndex.Identify,{Data:[],Title:""}),i){var h=new Ye(i[s].Data,this.Index[s].Name,this.Index[s].LineColor);h.StringFormat=He.THOUSANDS,h.FloatPrecision=0,o.OverlayIndex.get(this.OverlayIndex.Identify).Data[s]=h}}else for(var s in i)t.TitlePaint[n].Data[s]=new Ye(i[s].Data,this.Index[s].Name,this.TitleColor),t.TitlePaint[n].Data[s].StringFormat=He.THOUSANDS,t.TitlePaint[n].Data[s].FloatPrecision=0;return!0}}}}],["指数热度",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=ma,this.newMethod("Market-Heat"),delete this.newMethod,this.Index=new Array(new pa("热度",5),new pa("MA",10),new pa("MA",null)),this.Data,this.ApiUrl=ia.Index.MarketHeatApiUrl,this.Index[0].LineColor=ia.FrameSplitTextColor,this.Index[1].LineColor=ia.Index.LineColor[0],this.Index[2].LineColor=ia.Index.LineColor[1],this.CreateChart=function(t){return 0==t?new Jt:new At},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};return this.Data=[],r.HQChart.Period>0?(this.NotSupport(r.HQChart,r.WindowIndex,"不支持周期切换"),r.HQChart.Draw(),!1):(v.HttpRequest({url:this.ApiUrl,data:{symbol:r.HQChart.Symbol,startdate:20100101},type:"post",dataType:"json",async:!0,success:function(t){i.RecvData(t,r)}}),!0)},this.RecvData=function(t,e){if(!(t.date.length<0)){var a=new Array;for(var i in t.date){var r=new ct;r.Date=t.date[i],r.Value=t.value[i],a.push(r)}var n=e.HistoryData.GetFittingData(a),o=new pt;o.Data=n,o.Period=e.HQChart.Period,o.Right=e.HQChart.Right,this.Data=o.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay();if(i.length!=this.Index.length)return!1;i[0].Data.Data=this.Data,i[0].NotSupportMessage=null;var n=sa.MA(this.Data,this.Index[0].Param);i[1].Data.Data=n;var o=sa.MA(this.Data,this.Index[1].Param);i[2].Data.Data=o;var s=e+1;if(r){var h=t.TitlePaint[s];for(var l in h.OverlayIndex.set(this.OverlayIndex.Identify,{Data:[],Title:""}),i){var u="";u=0==l?t.Name+this.Index[l].Name:"MA"+this.Index[l-1].Param;var c=new Ye(i[l].Data,u,this.Index[l].LineColor);c.StringFormat=He.DEFAULT,c.FloatPrecision=2,h.OverlayIndex.get(this.OverlayIndex.Identify).Data[l]=c}}else for(var l in i){var u="";u=0==l?t.Name+this.Index[l].Name:"MA"+this.Index[l-1].Param,t.TitlePaint[s].Data[l]=new Ye(i[l].Data,u,this.Index[l].LineColor),t.TitlePaint[s].Data[l].StringFormat=He.DEFAULT,t.TitlePaint[s].Data[l].FloatPrecision=2}return!0}}}}],["财务粉饰",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=ma,this.newMethod("财务粉饰"),delete this.newMethod,this.Index=new Array(new pa("区域",null),new pa("系数",null)),this.Data,this.ApiUrl=ia.Index.StockHistoryDayApiUrl,this.Index[0].LineColor=ia.Index.LineColor[0],this.Index[1].LineColor="rgb(105,105,105)",this.CreateChart=function(t){return 0==t?new Ut:new Ht},this.GetOutData=function(){return{Data:this.Data}},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};if(this.Data=[],2!=r.HQChart.Period)return this.NotSupport(r.HQChart,r.WindowIndex,"只支持月线"),r.HQChart.Draw(),this.SendEvent(t,e,a,"只支持月线"),!1;return v.HttpRequest({url:this.ApiUrl,data:{symbol:[r.HQChart.Symbol],field:["finance.benford","announcement2.quarter","announcement1.quarter","announcement3.quarter","announcement4.quarter"],condition:[{item:["date","int32","gte","20130101"]},{item:["announcement1.year","int32","gte",0,"announcement2.year","int32","gte",0,"announcement3.year","int32","gte",0,"announcement4.year","int32","gte",0,"or"]}]},type:"post",dataType:"json",async:!0,success:function(n){i.RecvData(n,r),i.SendEvent(t,e,a)}}),!0},this.JsonDataToMapSingleData=function(t){var e=t.stock[0].stockday,a=new C.default;for(var i in e){var r=e[i],n=new ct;if(n.Date=r.date,n.Value=new Array,null!=r.finance1&&null!=r.announcement1){var o=r.announcement1.year,s=r.announcement1.quarter,h=r.finance1.benford;n.Value.push({Year:o,Quarter:s,Value:h})}if(null!=r.finance2&&null!=r.announcement2){var l=r.announcement2.year,u=r.announcement2.quarter,c=r.finance2.benford;n.Value.push({Year:l,Quarter:u,Value:c})}if(null!=r.finance3&&null!=r.announcement3){var d=r.announcement3.year,p=r.announcement3.quarter,m=r.finance3.benford;n.Value.push({Year:d,Quarter:p,Value:m})}if(null!=r.finance4&&null!=r.announcement4){var D=r.announcement4.year,v=r.announcement4.quarter,g=r.finance4.benford;n.Value.push({Year:D,Quarter:v,Value:g})}a.set(n.Date,n)}var S=new Array,T=!0,I=!1,y=void 0;try{for(var x,w=(0,f.default)(a);!(T=(x=w.next()).done);T=!0){var r=x.value;S.push(r[1])}}catch(t){I=!0,y=t}finally{try{!T&&w.return&&w.return()}finally{if(I)throw y}}return S},this.RecvData=function(t,e){if(D.Chart.Log(t),!(null==t.stock||t.stock.length<=0)){var a=this.JsonDataToMapSingleData(t),i=e.HistoryData.GetFittingMonthData(a),r=new pt;r.Data=i,r.Period=e.HQChart.Period,r.Right=e.HQChart.Right,this.Data=r.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e);if(i.length!=this.Index.length)return!1;i[0].NotSupportMessage=null,i[0].Data.Data=[{Value:0,Value2:.2,Color:"rgb(50,205,50)",Title:"安全区",TitleColor:"rgb(245,255 ,250)"},{Value:.2,Value2:.4,Color:"rgb(255,140,0)",Title:"预警区",TitleColor:"rgb(245,255 ,250)"},{Value:.4,Value2:1,Color:"rgb(255,106,106)",Title:"警示区",TitleColor:"rgb(245,255 ,250)"}],i[1].Data.Data=this.Data,t.Frame.SubFrame[e].Frame.YSpecificMaxMin={Max:1,Min:0,Count:3};var r=e+1;return t.TitlePaint[r].Data[1]=new Ye(i[1].Data,this.Index[1].Name,this.Index[1].LineColor),t.TitlePaint[r].Data[1].DataType="MultiReport",t.TitlePaint[r].Title=this.FormatIndexTitle(),!0}}}}],["自定义指数热度",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=ma,this.newMethod("Market-Heat"),delete this.newMethod,this.Index=new Array(new pa("区域",3),new pa("热度指数",10),new pa("MA",5),new pa("MA",10)),this.Data,this.ApiUrl=ia.Index.CustomIndexHeatApiUrl,this.Index[1].LineColor=ia.Index.LineColor[1],this.Index[2].LineColor=ia.Index.LineColor[2],this.Index[3].LineColor=ia.Index.LineColor[3],this.Create=function(t,e){for(var a in this.Index){var i=null;0==a?i=new Ut:(i=new At).Color=this.Index[a].LineColor,i.Canvas=t.Canvas,i.Name=this.Name+"-"+a.toString(),i.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,i.ChartFrame=t.Frame.SubFrame[e].Frame,t.ChartPaint.push(i)}},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};return this.Data=[],r.HQChart.Period>0?(this.NotSupport(r.HQChart,r.WindowIndex,"不支持周期切换"),r.HQChart.Draw(),!1):(v.HttpRequest({url:this.ApiUrl,data:{stock:r.HQChart.CustomStock,date:{startdate:r.HQChart.QueryDate.Start,enddate:r.HQChart.QueryDate.End},day:[this.Index[0].Param,this.Index[1].Param]},type:"post",dataType:"json",async:!0,success:function(t){i.RecvData(t,r)}}),!0)},this.RecvData=function(t,e){if(!(null==t.data||t.data.length<0)){var a=new Array;for(var i in t.data){var r=t.data[i],n=new ct;n.Date=r[0],n.Value=r[1],a.push(n)}var o=e.HistoryData.GetFittingData(a),s=new pt;s.Data=o,s.Period=e.HQChart.Period,s.Right=e.HQChart.Right,this.Data=s.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=t.GetChartPaint(e);if(i.length!=this.Index.length)return!1;i[0].NotSupportMessage=null,i[0].Data.Data=[{Value:0,Value2:.2,Color:"rgb(50,205,50)",Title:"热度1",TitleColor:"rgb(245,255 ,250)"},{Value:.2,Value2:.4,Color:"rgb(255,140,0)",Title:"热度2",TitleColor:"rgb(245,255 ,250)"},{Value:.4,Value2:.8,Color:"rgb(255,106,106)",Title:"热度3",TitleColor:"rgb(245,255 ,250)"},{Value:.8,Value2:1,Color:"rgb(208, 32 ,144)",Title:"热度4",TitleColor:"rgb(245,255 ,250)"}],i[1].Data.Data=this.Data;var r=sa.MA(this.Data,this.Index[2].Param);i[2].Data.Data=r;var n=sa.MA(this.Data,this.Index[3].Param);i[3].Data.Data=n,t.Frame.SubFrame[e].Frame.YSpecificMaxMin={Max:1,Min:0,Count:3};for(var o=e+1,s=1;s<i.length;++s){var h=this.Index[s].Name;"MA"==h&&(h="MA"+this.Index[s].Param),t.TitlePaint[o].Data[s]=new Ye(i[s].Data,h,this.Index[s].LineColor),t.TitlePaint[o].Data[s].StringFormat=He.DEFAULT,t.TitlePaint[o].Data[s].FloatPrecision=2}return t.TitlePaint[o].Title="热度("+this.Index[0].Param+","+this.Index[1].Param+","+this.Index[2].Param+","+this.Index[3].Param+")",!0}}},Name:"自定义指数热度"}],["CJL",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=ma,this.newMethod("CJL"),delete this.newMethod,this.Index=new Array(new pa("VOL",null),new pa("OPID",null)),this.Index[0].LineColor=ia.Index.LineColor[0],this.Index[1].LineColor=ia.Index.LineColor[1],this.CreateChart=function(t){if(0==t){var e=new kt;return e}if(1==t){var e=new Ot;return e.LineWidth=1*A(),e}},this.RequestData=function(t,e,a){return this.BindData(t,e,a),t.UpdataDataoffset(),t.UpdateFrameMaxMin(),t.Draw(),!0},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay();if(i.length!=this.Index.length)return!1;var n=a.GetVol(),o=a.GetPosition();i[0].HistoryData=a,i[0].Data.Data=n,i[1].Data.Data=o;var s=e+1;if(r){var h=t.TitlePaint[s];for(var l in h.OverlayIndex.set(this.OverlayIndex.Identify,{Data:[],Title:""}),i){var u=new Ye(i[l].Data,this.Index[l].Name,this.Index[l].LineColor);h.OverlayIndex.get(this.OverlayIndex.Identify).Data[l]=u}}else t.TitlePaint[s].Data[0]=new Ye(i[0].Data,this.Index[0].Name,this.Index[0].LineColor),t.TitlePaint[s].Data[1]=new Ye(i[1].Data,this.Index[1].Name,this.Index[1].LineColor),t.TitlePaint[s].Title=this.Name;return!0}}}}],["OX",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=ma,this.newMethod("OX"),delete this.newMethod,this.ClassName="JSIndex_OX",this.IsUsePageData=!0,this.BlockSize=.5,this.Arguments=[{Name:"Reversal",Value:3}],this.SetArgs=function(t){if(t&&Te.IsNonEmptyArray(t))for(var e=0;e<t.length;++e){var a=t[e];"Reversal"==a.Name&&this.SetParamValue(a.Name,a.Value)}},this.SetParamValue=function(t,e){for(var a=0;a<this.Arguments.length;++a){var i=this.Arguments[a];i.Name==t&&(i.Value=e)}},this.GetParamValue=function(t){for(var e=0;e<this.Arguments.length;++e){var a=this.Arguments[e];if(a.Name==t)return a.Value}},this.RequestData=function(t,e,a){return this.BindData(t,e,a),t.UpdataDataoffset(),t.UpdateFrameMaxMin(),t.Draw(),!0},this.CreatePaints=function(t,e){var a=null,i=this.IsOverlay();i?(a=this.OverlayIndex.Frame.Frame,this.OverlayIndex.Frame.ChartPaint=[]):(a=t.Frame.SubFrame[e].Frame,t.DeleteIndexPaint(e));var r=[],n=new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartOX",this.Font,this.Family=ia.ChartOX.Family,this.Color=[ia.ChartOX.Up.Color,ia.ChartOX.Down.Color],this.Text=[ia.ChartOX.Up.Text,ia.ChartOX.Down.Text],this.IsHScreen=!1,this.SquareSize=10,this.OXData=null,this.SquareLineColor=ia.ChartOX.SquareLineColor,this.TooltipData=[],this.CalcualteSquare=function(){var t;if(this.IsHScreen)var e=(t=this.ChartBorder.GetHScreenBorder()).LeftEx,a=t.RightEx;else e=(t=this.ChartBorder.GetBorder()).TopEx,a=t.BottomEx;this.SquareSize=(a-e)/(this.OXData.Max-this.OXData.Min)*this.OXData.BlockSize;var i=parseInt(this.SquareSize);this.Font=i+"px "+this.Family},this.DrawSquares=function(){if(this.Canvas.beginPath(),this.Canvas.strokeStyle=this.SquareLineColor,this.IsHScreen)var t=(a=this.ChartBorder.GetHScreenBorder()).Top,e=a.Bottom;else{t=(a=this.ChartBorder.GetBorder()).Left,e=a.Right;var a,i=a.TopEx,r=a.BottomEx}for(var n=this.OXData.StartPrice;n<this.OXData.Max;n+=this.OXData.BlockSize){var o=this.ChartFrame.GetYFromData(n);this.IsHScreen?(this.Canvas.moveTo(_(o),a.Top),this.Canvas.lineTo(_(o),a.Bottom)):(this.Canvas.moveTo(t,_(o)),this.Canvas.lineTo(e,_(o)))}for(n=this.OXData.StartPrice;n>this.OXData.Min;n-=this.OXData.BlockSize)o=this.ChartFrame.GetYFromData(n),this.IsHScreen?(this.Canvas.moveTo(_(o),a.Top),this.Canvas.lineTo(_(o),a.Bottom)):(this.Canvas.moveTo(t,_(o)),this.Canvas.lineTo(e,_(o)));for(var s=t+ia.FrameLeftMargin;s<e;s+=this.SquareSize)this.IsHScreen?(this.Canvas.moveTo(a.LeftEx,_(s)),this.Canvas.lineTo(a.RightEx,_(s))):(this.Canvas.moveTo(_(s),i),this.Canvas.lineTo(_(s),r));this.Canvas.stroke()},this.Draw=function(){if(this.TooltipData=[],!this.ChartFrame.IsMinSize)if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.OXData&&this.OXData.Data)if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.CalcualteSquare(),this.DrawSquares(),this.IsHScreen){var t=this.ChartBorder.GetTop(),e=this.ChartBorder.GetBottom(),a=t+ia.FrameLeftMargin;this.Canvas.textBaseline="middle",this.Canvas.textAlign="center",this.Canvas.font=this.Font;for(var i=0;i<this.OXData.Data.length&&!(a>e);++i,a+=this.SquareSize){var r=this.OXData.Data[i];this.Canvas.fillStyle=this.Color[r.Type];var n=this.Text[r.Type];if(Te.IsNonEmptyArray(r.Data))for(var o=0;o<r.Data.length;++o){var s=r.Data[o],h=this.ChartFrame.GetYFromData(s+this.OXData.BlockSize/2);this.Canvas.fillText(n,h,a+this.SquareSize/2)}}}else for(t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=t+ia.FrameLeftMargin,this.Canvas.textBaseline="middle",this.Canvas.textAlign="center",this.Canvas.font=this.Font,i=0;i<this.OXData.Data.length&&!(a>e);++i,a+=this.SquareSize){r=this.OXData.Data[i],this.Canvas.fillStyle=this.Color[r.Type],n=this.Text[r.Type];var l={X:a,Width:this.SquareSize},u=null,c=null;if(Te.IsNonEmptyArray(r.Data)){for(o=0;o<r.Data.length;++o)s=r.Data[o],h=this.ChartFrame.GetYFromData(s+this.OXData.BlockSize/2),this.Canvas.fillText(n,a+this.SquareSize/2,h),null==u?u=s:u<s&&(u=s),null==c?c=s:c>s&&(c=s);l.Y=this.ChartFrame.GetYFromData(u+this.OXData.BlockSize),l.Height=this.ChartFrame.GetYFromData(c)-l.Y;var f={Data:r,Rect:l};this.TooltipData.push(f)}}},this.GetTooltipData=function(t,e,a){for(var i in this.TooltipData){var r=this.TooltipData[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return D.Chart.Log("[ChartOX::GetTooltipData] item ",r),a.Data=r,a.ChartPaint=this,a.Type=5,!0}}return!1},this.GetMaxMin=function(){var t={Min:null,Max:null};return this.OXData&&(Te.IsNumber(this.OXData.Max)&&(t.Max=this.OXData.Max),Te.IsNumber(this.OXData.Min)&&(t.Min=this.OXData.Min)),t}};return n.Canvas=t.Canvas,n.Name=this.Name+"-0",n.ChartBorder=a.ChartBorder,n.ChartFrame=a,i?this.OverlayIndex.Frame.ChartPaint.push(n):t.ChartPaint.push(n),r.push(n),r},this.CalculateBlockSize=function(t,e){var a=t-e;return a<=5?.25:a<=20?.5:a<=100?1:a<=200?2:a<=500?5:a<=1e3?10:50},this.Calculate=function(t,e){if(!t.ChartPaint[0])return null;var a=t.ChartPaint[0].ShowRange;if(!a)return null;if(!Te.IsNonEmptyArray(e.Data))return null;for(var i=null,r=null,n=null,o=a.Start;o<=a.End&&o<e.Data.length;++o){var s=e.Data[o];null==i?Te.IsNumber(s.High)&&(i=s.High):Te.IsNumber(s.High)&&i<s.High&&(i=s.High),null==r?Te.IsNumber(s.Low)&&(r=s.Low):Te.IsNumber(s.Low)&&r>s.Low&&(r=s.Low),null==n&&Te.IsNumber(s.High)&&(n=s.High)}var h=this.GetParamValue("Reversal"),l=this.CalculateBlockSize(i,r);this.BlockSize=l;for(var u={Max:i+l,Min:r-l,StartPrice:n,Data:[],BlockSize:l},c=1,f=n,d={Type:0,Data:[],Start:null,End:null},o=a.Start,C=0;o<=a.End&&o<e.Data.length;++o){var s=e.Data[o];if(1==c){if(s.High>=f+l){var p=parseInt((s.High-f)/l);for(C=0;C<p;++C)f+=l,d.Data.push(f)}else if(s.Low<=f-l*h){c=0,d&&Te.IsNonEmptyArray(d.Data)&&u.Data.push(d),d={Type:1,Data:[],Start:null,End:null};var p=parseInt((f-s.Low)/l);for(C=0;C<p;++C)f-=l,d.Data.push(f)}}else if(s.Low<=f-l){var p=parseInt((f-s.Low)/l);for(C=0;C<p;++C)f-=l,d.Data.push(f)}else if(s.High>=f+l*h){c=1,d&&Te.IsNonEmptyArray(d.Data)&&u.Data.push(d),d={Type:0,Data:[],Start:null,End:null};var p=parseInt((s.High-f)/l);for(C=0;C<p;++C)f+=l,d.Data.push(f)}null==d.Start&&(d.Start=s),d.End=s}return d&&Te.IsNonEmptyArray(d.Data)&&u.Data.push(d),u},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay(),n=t.GetEventCallback(w.ON_CALCULATE_INDEX_OX);if(n&&n.Callback){var o={HQChart:t,WidnowIndex:e,HisData:a,OXData:null};n.Callback(n,o,this),i[0].OXData=o.OXData}else i[0].OXData=this.Calculate(t,a);var s=this.BlockSize,h=this.GetParamValue("Reversal"),l=this.Name+" BlockSize="+s+" Reversal="+h,u=e+1;if(r){var c=t.TitlePaint[u];c.OverlayIndex.set(this.OverlayIndex.Identify,{Data:[],Title:""})}else t.TitlePaint[u].Title=l;return!0}}}}],["可视范围成交量分布图",{IsMainIndex:!0,Create:function(t){return new function(t){this.newMethod=ma,this.newMethod("VRVR"),delete this.newMethod,this.ClassName="VolProfileVisibleRangeIndex",this.IsUsePageData=!0,this.ChartVolProfile,this.HQChart,this.WindowIndex,this.RequestTimer=null,this.DelayRequestFrequency=500,this.VolType=0,this.BarPosition=1,this.BarWidthRate=.3,this.Arguments=[{Name:"VAVol",Value:70},{Name:"BarPosition",Value:0}],this.SetArgs=function(t){if(t&&Te.IsNonEmptyArray(t))for(var e=0;e<t.length;++e){var a=t[e];"VAVol"==a.Name?this.SetParamValue(a.Name,a.Value):"BarPosition"==a.Name&&this.SetParamValue(a.Name,a.Value)}},this.SetParamValue=function(t,e){for(var a=0;a<this.Arguments.length;++a){var i=this.Arguments[a];i.Name==t&&(i.Value=e)}},t&&(Te.IsNumber(t.VolType)&&(this.VolType=t.VolType),Te.IsNumber(t.BarWidthRate)&&(this.BarWidthRate=t.BarWidthRate),Te.IsNumber(t.DelayRequestFrequency)&&(this.DelayRequestFrequency=t.DelayRequestFrequency),t.Args&&this.SetArgs(t.Args),Te.IsNumber(t.BarPosition)&&(this.BarPosition=t.BarPosition,this.SetParamValue("BarPosition",this.BarPosition)));this.GetParamValue=function(t){for(var e=0;e<this.Arguments.length;++e){var a=this.Arguments[e];if(a.Name==t)return a.Value}},this.Create=function(t,e){this.HQChart=t,this.WindowIndex=e},this.CreateChart=function(t,e){var a=null,i=this.IsOverlay();i?(a=this.OverlayIndex.Frame.Frame,this.OverlayIndex.Frame.ChartPaint=[]):(a=t.Frame.SubFrame[e].Frame,t.DeleteIndexPaint(e));var r=[],n=new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartVolProfileVisibleRange",this.IsDrawFirst=!0,this.IsShowText=!0,this.VolType=0,this.BarPosition=1,this.BarWidthRate=.3,this.VolFont,this.HQChart,this.IsDestroy=!1,this.Data=null,this.MaxVol,this.MaxVolPrice,this.VolLineColor=ia.ChartVolProfileVisibleRange.VolLineColor,this.VolLineFont=ia.ChartVolProfileVisibleRange.VolLineFont,this.VolLineTextColor=ia.ChartVolProfileVisibleRange.VolLineTextColor,this.VAHLineColor=ia.ChartVolProfileVisibleRange.VAHLineColor,this.VAHTextColor=ia.ChartVolProfileVisibleRange.VAHTextColor,this.VALLineColor=ia.ChartVolProfileVisibleRange.VALLineColor,this.VALTextColor=ia.ChartVolProfileVisibleRange.VALTextColor,this.VAFont=ia.ChartVolProfileVisibleRange.VAFont,this.TextConfig=(0,u.default)({Color:ia.ChartVolProfileVisibleRange.Text.Color,Family:ia.ChartVolProfileVisibleRange.Text.Family,FontMaxSize:ia.ChartVolProfileVisibleRange.Text.FontMaxSize,FontMinSize:ia.ChartVolProfileVisibleRange.Text.FontMinSize},"Color",ia.ChartVolProfileVisibleRange.Text.Color),this.BarColor=[ia.ChartVolProfileVisibleRange.UpVolColor,ia.ChartVolProfileVisibleRange.DownVolColor,ia.ChartVolProfileVisibleRange.AreaUpColor,ia.ChartVolProfileVisibleRange.AreaDonwColor],this.MaxVolLine,this.OnDestroy=function(){this.IsDestroy=!0},this.SetOption=function(t){t&&(Te.IsBool(t.IsShowText)&&(this.IsShowText=t.IsShowText),Te.IsNumber(t.VolType)&&(this.IsShowText=t.VolType),Te.IsNumber(t.BarPosition)&&(this.BarPosition=t.BarPosition),Te.IsNumber(t.BarWidthRate)&&(this.IsShowText=t.BarWidthRate))},this.PtInChart=function(t,e){return this.MaxVolLine&&t>=this.MaxVolLine.Start.X&&t<=this.MaxVolLine.End.X&&e>=this.MaxVolLine.Start.Y-5&&e<this.MaxVolLine.Start.Y+5?{Identify:this.Identify,Chart:this}:null},this.SetSelectedStatus=function(t){this.IsDrawFirst=0==t},this.DrawSelectedStatus=function(){var t=this.SelectedRadius,e=A();if(this.Canvas.save(),this.MaxVolLine){this.Canvas.lineWidth=this.SelectedLineWidth*e,this.Canvas.strokeStyle=this.SelectedLineColor,this.SelectedBGColor&&(this.Canvas.fillStyle=this.SelectedBGColor);for(var a=(this.MaxVolLine.End.X-this.MaxVolLine.Start.X)/6,i=[],r=this.MaxVolLine.Start.X+a;r<this.MaxVolLine.End.X;r+=a)i.push({X:r,Y:this.MaxVolLine.Start.Y});for(var n=0;n<i.length;++n){var o=i[n];this.Canvas.beginPath(),this.Canvas.arc(o.X,o.Y,t,0,360,!1),this.Canvas.closePath(),this.SelectedBGColor&&this.Canvas.fill(),this.Canvas.stroke()}}this.Canvas.restore()},this.Draw=function(){this.VolFont=null,this.MaxVolLine=null,this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.ChartFrame.IsMinSize||(this.NotSupportMessage?this.DrawNotSupportmessage():this.Data&&this.Data.Data&&(this.Canvas.save(),this.DrawVolBar(),this.Canvas.restore()))},this.DrawPriceLine=function(){var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=A(),i=[],r=this.MaxVolPrice;Te.IsNumber(this.Data.MaxVolPrice)&&(r=this.Data.MaxVolPrice),r>=this.ChartFrame.HorizontalMin&&r<=this.ChartFrame.HorizontalMax&&i.push({Price:r,Font:this.VolLineFont,LineColor:this.VolLineColor,LineWidth:2,TextColor:this.VolLineTextColor,Type:1}),Te.IsNumber(this.Data.VAHPrice)&&this.Data.VAHPrice>=this.ChartFrame.HorizontalMin&&this.Data.VAHPrice<=this.ChartFrame.HorizontalMax&&i.push({Price:this.Data.VAHPrice,Font:this.VAFont,LineColor:this.VAHLineColor,LineWidth:2,TextColor:this.VAHTextColor,Type:2}),Te.IsNumber(this.Data.VALPrice)&&this.Data.VALPrice>=this.ChartFrame.HorizontalMin&&this.Data.VALPrice<=this.ChartFrame.HorizontalMax&&i.push({Price:this.Data.VALPrice,Font:this.VAFont,LineColor:this.VALLineColor,LineWidth:2,TextColor:this.VALTextColor,Type:3});for(var n=0;n<i.length;++n){var o=i[n],s=B(o.LineWidth,this.ChartFrame.GetYFromData(o.Price,!1));if(this.Canvas.lineWidth=o.LineWidth,this.Canvas.strokeStyle=o.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t,s),this.Canvas.lineTo(e,s),this.Canvas.stroke(),1==o.Type&&(this.MaxVolLine={Start:{X:t,Y:s},End:{X:e,Y:s}}),this.ChartBorder.Right>10){var h=Ga(this.HQChart.Symbol),l=o.Price.toFixed(h);this.Canvas.font=o.Font,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var u=this.GetFontHeight(),c=this.Canvas.measureText(l).width+2*a;this.Canvas.fillStyle=o.LineColor,this.Canvas.fillRect(e,s-u/2,c,u),this.Canvas.fillStyle=o.TextColor,this.Canvas.fillText(l,e+1*a,s)}}},this.DrawVolBar=function(){var t=this.GetPriceYOffset(this.Data.PriceOffset),e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=(this.ChartFrame.GetYFromData(this.Data.MaxPrice),this.ChartFrame.GetYFromData(this.Data.MinPrice),(a-e)*this.BarWidthRate);this.IsShowText&&(this.VolFont=this.GetDynamicVolTextFont(t,i),this.VolFont&&(this.Canvas.font=this.VolFont));for(var r=0;r<this.Data.Data.length;++r){var n=this.Data.Data[r];n.Price<this.ChartFrame.HorizontalMin||n.Price>this.ChartFrame.HorizontalMax||this.DrawVolBarItem(n,e,a,i,t)}this.DrawPriceLine()},this.DrawVolBarItem=function(t,e,a,i,r){var n=e,o=a,s=this.ChartFrame.GetYFromData(t.Price)-r/2,h=r-1;if(h<1&&(h=1),1==this.VolType){if(!t.TotalVol)return;if(!Te.IsNumber(t.TotalVol.Value))return;var l=t.TotalVol.Value*i/this.MaxVol;if(Te.IsNumber(t.TotalVol.ColorID)?f=this.BarColor[t.TotalVol.ColorID]:t.TotalVol.Color&&(f=t.TotalVol.Color),this.Canvas.fillStyle=f,1==this.BarPosition?this.Canvas.fillRect(o,k(s),-l,k(h)):this.Canvas.fillRect(n,k(s),l,k(h)),this.IsShowText&&this.VolFont){var u=Te.FormatVolString(t.TotalVol.Value,this.HQChart.LanguageID);this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextConfig.Color,1==this.BarPosition?(this.Canvas.textAlign="right",this.Canvas.fillText(u,a-5,s+r/2)):(this.Canvas.textAlign="left",this.Canvas.fillText(u,e+5,s+r/2))}}else{u="";for(var c=0;c<t.Vol.length;++c){var f,d=t.Vol[c];if(Te.IsNumber(d.Value)&&(Te.IsNumber(d.ColorID)?f=this.BarColor[d.ColorID]:d.Color&&(f=d.Color),f)){l=d.Value*i/this.MaxVol,this.Canvas.fillStyle=f,1==this.BarPosition?(this.Canvas.fillRect(o,k(s),-l,k(h)),o-=l):(this.Canvas.fillRect(n,k(s),l,k(h)),n+=l);var C=Te.FormatVolString(d.Value,this.HQChart.LanguageID);u.length>0&&(u+="x"),u+=C}}this.IsShowText&&this.VolFont&&(this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextConfig.Color,1==this.BarPosition?(this.Canvas.textAlign="right",this.Canvas.fillText(u,a-5,s+r/2)):(this.Canvas.textAlign="left",this.Canvas.fillText(u,e+5,s+r/2)))}},this.GetPriceYOffset=function(t){var e=this.ChartFrame;return e.ChartBorder.GetHeightEx()*t/(e.HorizontalMax-e.HorizontalMin)},this.GetDynamicVolTextFont=function(t,e,a){var i=parseInt(t)-2;return t<5&&(i=parseInt(t)),i>this.TextConfig.FontMaxSize?i=this.TextConfig.FontMaxSize:i<=0&&(i=1),i<this.TextConfig.FontMinSize?null:this.FormatFontString(i,this.TextConfig.Family,a)},this.FormatFontString=function(t,e,a){var i;return a?a.Weight&&(i=a.Weight+" "+t+"px "+e):i=t+"px "+e,i},this.GetMaxMin=function(){return{Min:null,Max:null}}};return n.Canvas=t.Canvas,n.Name=this.Name+"-0",n.ChartBorder=a.ChartBorder,n.ChartFrame=a,n.HQChart=this.HQChart,n.Identify=this.Guid,n.SetOption(this),i?this.OverlayIndex.Frame.ChartPaint.push(n):t.ChartPaint.push(n),r.push(n),this.ChartVolProfile=n,r},this.CancelRequestTimer=function(){this.RequestTimer&&(clearTimeout(this.RequestTimer),this.RequestTimer=null)},this.RequestData=function(t,e,a,i){var r=this;this.CancelRequestTimer();var n=function(){var e=t.ChartPaint[0],a=e.Data;if(a&&!Te.IsNonEmptyArray(!a.Data)){var i=e.DrawKRange;if(i&&Te.IsNumber(i.Start)&&Te.IsNumber(i.End)){var n=a.Data[i.Start],o=a.Data[i.End],s={Start:{Date:n.Date,DataIndex:i.Start},End:{Date:o.Date,DataIndex:i.End},Chart:r};Te.IsNumber(n.Time)&&(s.Start.Time=n.Time),Te.IsNumber(o.Time)&&(s.End.Time=o.Time),s.ValueAreaVol=r.Arguments[0].Value,r.Arguments[1].Value>0?r.BarPosition=1:r.BarPosition=0,r.ChartVolProfile&&r.ChartVolProfile.SetOption({BarPosition:r.BarPosition}),r.DataStatus=0,t&&t.RequestVolumeProfileData&&t.RequestVolumeProfileData(s)}}};return i&&1==i.Type?this.RequestTimer=setTimeout(function(){n()},this.DelayRequestFrequency):n(),!0},this.OnRecvVolumeProfileData=function(t){return this.BindData(t),this.HQChart.UpdataDataoffset(),this.HQChart.UpdateFrameMaxMin(),this.HQChart.Draw(),!0},this.BindData=function(t){this.ChartVolProfile&&1!=this.ChartVolProfile.IsDestroy||this.CreateChart(this.HQChart,this.WindowIndex);var e=this.ChartVolProfile;if(e.Data=null,t&&Te.IsNonEmptyArray(t.Data)&&Te.IsNumber(t.MaxPrice)&&Te.IsNumber(t.MinPrice)){for(var a=0,i=0,r=null,n=0,o=0;n<t.Data.length;++n){var s=t.Data[n];for(i=0,o=0;o<s.Vol.length;++o){var h=s.Vol[o];Te.IsNumber(h.Value)&&(i+=h.Value)}a<i&&(a=i,r=s.Price)}if(!(this.maxVolPrice<=0||this.maxVol<=0)){e.MaxVolPrice=r,e.MaxVol=a,e.MaxPrice=t.MaxPrice,e.MinPrice=t.MinPrice,e.Data=t;var l=this.WindowIndex+1;this.HQChart.TitlePaint[l].Title="VPVR",this.HQChart.TitlePaint[l].Identify=this.Guid;var u=new Ye(e.Data,"VPVR",e.Data);u.ChartClassName="ChartVolProfileVisibleRange",u.Chart=e,this.HQChart.TitlePaint[l].Data[0]=u}}}}(t)}}]]).get(t)},sa.EMA=function(t,e){var a=[],i=0;if(i>=t.length)return a;for(;i<t.length&&(null==t[i]||isNaN(t[i]));++i);var r=i,n=i+1;a[r]=t[r];for(var o=i+1;o<t.length;++o,++r,++n)a[n]=(2*t[n]+(e-1)*a[r])/(e+1);return a},sa.SMA=function(t,e,a){for(var i=[],r=0,n=null;r<t.length;++r)if(null!=t[r]&&!isNaN(t[r])){n=t[r],i[r]=n;break}for(++r;r<t.length;++r)i[r]=(a*t[r]+(e-a)*n)/e,n=i[r];return i},sa.DMA=function(t,e){var a=[];if(t.length<0||t.length!=e.length)return a;for(var i=0;i<t.length;++i)if(null!=t[i]&&!isNaN(t[i])&&null!=e[i]&&!isNaN(e[i])){a[i]=t[i];break}for(i+=1;i<t.length;++i)null==t[i]||null==e[i]?a[i]=null:t[i]<1?a[i]=e[i]*t[i]+(1-e[i])*a[i-1]:a[i]=t[i];return a},sa.HHV=function(t,e){var a=[];if(e>t.length)return a;for(var i=-1e4,r=e,n=0;r<t.length;++r,++n){if(r<e+i)i=t[r]<t[i]?i:r;else for(n=1+(i=r-e+1);n<=r;++n)t[n]>t[i]&&(i=n);a[r]=t[i]}return a},sa.LLV=function(t,e){var a=[];if(e>t.length)return a;for(var i=-1e4,r=e;r<t.length;++r,++n){if(r<e+i)i=t[r]>t[i]?i:r;else for(var n=1+(i=r-e+1);n<=r;++n)t[n]<t[i]&&(i=n);a[r]=t[i]}return a},sa.REF=function(t,e){var a=[];if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(0,t.length-e);for(var i=0;i<e;++i)a.unshift(null);return a},sa.REFDATE=function(t,e){var a=[];if(t.length<=0)return a;for(var i in e=t.length-1,t)a[i]=t[e];return a},sa.SUM=function(t,e){var a=[];if(0==e){a[0]=t[0];for(var i=1;i<t.length;++i)a[i]=a[i-1]+t[i]}else{i=e-1;for(var r=0;i<t.length;++i,++r)for(var n=0;n<e;++n)0==n?a[i]=t[n+r]:a[i]+=t[n+r]}return a},sa.ARRAY_SUBTRACT=function(t,e){var a=[];if("number"==typeof e)for(var i in t)null==t[i]||isNaN(t[i])?a[i]=null:a[i]=t[i]-e;else{var r=Math.max(t.length,e.length);for(i=0;i<r;++i)i<t.length&&i<e.length?null==t[i]||null==e[i]?a[i]=null:a[i]=t[i]-e[i]:a[i]=null}return a},sa.ARRAY_GT=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]>e?1:0;else{var r=Math.max(t.length,e.length);for(i=0;i<r;++i)i<t.length&&i<e.length?a[i]=t[i]>e[i]?1:0:a[i]=null}return a},sa.ARRAY_GTE=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]>=e?1:0;else{var r=Math.max(t.length,e.length);for(i=0;i<r;++i)i<t.length&&i<e.length?a[i]=t[i]>=e[i]?1:0:a[i]=null}return a},sa.ARRAY_LT=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]<e?1:0;else{var r=Math.max(t.length,e.length);for(i=0;i<r;++i)i<t.length&&i<e.length?a[i]=t[i]<e[i]?1:0:a[i]=null}return a},sa.ARRAY_LTE=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]<=e?1:0;else{var r=Math.max(t.length,e.length);for(i=0;i<r;++i)i<t.length&&i<e.length?a[i]=t[i]<=e[i]?1:0:a[i]=null}return a},sa.ARRAY_EQ=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]==e?1:0;else{var r=Math.max(t.length,e.length);for(i=0;i<r;++i)i<t.length&&i<e.length?a[i]=t[i]==e[i]?1:0:a[i]=null}return a},sa.ARRAY_IF=function(t,e,a){var i=[],r=["number"==typeof e,"number"==typeof a];for(var n in t)t[n]?i[n]=r[0]?e:e[n]:i[n]=r[1]?a:a[n];return i},sa.ARRAY_AND=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]&&e?1:0;else{var r=Math.max(t.length,e.length);for(i=0;i<r;++i)i<t.length&&i<e.length?a[i]=t[i]&&e[i]?1:0:a[i]=0}return a},sa.ARRAY_OR=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]||e?1:0;else{var r=Math.max(t.length,e.length);for(i=0;i<r;++i)i<t.length&&t[i]?a[i]=1:i<e.length&&e[i]?a[i]=1:a[i]=0}return a},sa.ARRAY_MULTIPLY=function(t,e){if(2==arguments.length){var a=[];if("number"==typeof e)for(var i in t)null==t[i]||isNaN(t[i])?a[i]=null:a[i]=t[i]*e;else{var r=Math.max(t.length,e.length);for(i=0;i<r;++i)i<t.length&&i<e.length?a[i]=t[i]*e[i]:a[i]=null}return a}for(a=sa.ARRAY_MULTIPLY(arguments[0],arguments[1]),i=2;i<arguments.length;++i)a=sa.ARRAY_MULTIPLY(a,arguments[i]);return a},sa.ARRAY_DIVIDE=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]/e;else{var r=Math.max(t.length,e.length);for(i=0;i<r;++i)i<t.length&&i<e.length?null==t[i]||null==e[i]||isNaN(t[i])||isNaN(e[i])?a[i]=null:0==e[i]?a[i]=null:a[i]=t[i]/e[i]:a[i]=null}return a},sa.ARRAY_ADD=function(t,e){if(2==arguments.length){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]+e;else{var r=Math.max(t.length,e.length);for(i=0;i<r;++i)i<t.length&&i<e.length?null==t[i]||null==e[i]||isNaN(t[i])||isNaN(e[i])?a[i]=null:a[i]=t[i]+e[i]:a[i]=null}return a}for(a=sa.ARRAY_ADD(arguments[0],arguments[1]),i=2;i<arguments.length;++i)a=sa.ARRAY_ADD(a,arguments[i]);return a},sa.MAX=function(t,e){var a=[];if("number"==typeof e)for(var i in t)null==t[i]?a[i]=null:a[i]=Math.max(t[i],e);else{var r=Math.max(t.length,e.length);for(i=0;i<r;++i)i<t.length&&i<e.length?null==t[i]||null==e[i]?a[i]=null:a[i]=Math.max(t[i],e[i]):a[i]=null}return a},sa.MIN=function(t,e){var a=[];if("number"==typeof e)for(var i in t)null==t[i]?a[i]=null:a[i]=Math.min(t[i],e);else{var r=Math.max(t.length,e.length);for(i=0;i<r;++i)i<t.length&&i<e.length?null==t[i]||null==e[i]?a[i]=null:a[i]=Math.min(t[i],e[i]):a[i]=null}return a},sa.ABS=function(t){var e=[];for(var a in t)null==t[a]?e[a]=null:e[a]=Math.abs(t[a]);return e},sa.MA=function(t,e){for(var a=[],i=0,r=t.length;i<r;i++)if(i<e)a[i]=null;else{for(var n=0,o=0;o<e;o++)n+=t[i-o];a[i]=n/e}return a},sa.EXPMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=e;i<t.length;++i)if(null!=t[i]){a[i]=t[i];break}for(i+=1;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},sa.EXPMEMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=0;i<t.length&&(!t[i]||isNaN(t[i]));++i);for(var r=0,n=0;i<t.length&&n<e;++n,++i)t[i]&&!isNaN(t[i])?r+=t[i]:r+=t[i-1];for(a[i-1]=r/e;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},sa.STD=function(t,e){for(var a=[],i=0,r=[],n=e-1;n<t.length;++n){i=0;for(var o=0;o<e;++o)i+=t[n-o];r[n]=i/e}for(n=e-1;n<t.length;++n){i=0;for(o=0;o<e;++o)i+=Math.pow(t[n-o]-r[n],2);a[n]=Math.sqrt(i/e)}return a},sa.AVEDEV=function(t,e){for(var a=[],i=0,r=[],n=e-1;n<t.length;++n){i=0;for(var o=0;o<e;++o)i+=t[n-o];r[n]=i/e}for(n=e-1;n<t.length;++n){i=0;for(o=0;o<e;++o)i+=Math.abs(t[n-o]-r[n]);a[n]=i/e}return a},sa.COUNT=function(t,e){for(var a=[],i=e-1;i<t.length;++i){for(var r=0,n=0;n<e;++n)t[i-n]&&++r;a[i]=r}return a},sa.CROSS=function(t,e){var a=[];if(t.length!=e.length)return[];for(var i=0;i<t.length&&(null==t[i]||isNaN(t[i])||null==e[i]||!isNaN(e[i]));++i);for(++i;i<t.length;++i)a[i]=t[i]>e[i]&&t[i-1]<e[i-1]?1:0;return a},sa.MULAR=function(t,e){var a=[];if(t.length<e)return a;for(var i=e;i<t.length;++i)if(null!=t[i]&&!isNaN(t[i])){a[i]=t[i];break}for(++i;i<t.length;++i)a[i]=a[i-1]*t[i];return a},sa.STICKLINE=function(t,e,a){var i=[];if(t.length<=0)return i;var r="number"==typeof e,n="number"==typeof a;for(var o in t)if(i[o]=null,!isNaN(t[o])&&t[o])if(r&&n)i[o]={Value:e,Value2:a};else if(r&&!n){if(isNaN(a[o]))continue;i[o]={Value:e,Value2:a[o]}}else if(!r&&n){if(isNaN(e[o]))continue;i[o]={Value:e[o],Value2:a}}else{if(isNaN(e[o])||isNaN(a[o]))continue;i[o]={Value:e[o],Value2:a[o]}}return i};var ha=new function(){this.DataMap=new C.default([["RenkoCalculate",{Create:function(){return new function(){this.BrickSize=.05,this.SourceData,this.LastData,this.ATR={Count:14,BrickSize:.05},this.BrickSizeType=1,this.Symbol,this.FloatPrecision=2,this.ClassName="RenkoCalculate",this.SetOption=function(t){if(t&&(Te.IsNumber(t.BrickSize)&&(this.BrickSize=t.BrickSize),Te.IsNumber(t.BrickSizeType)&&(this.BrickSizeType=t.BrickSizeType),t.ATR)){var e=t.ATR;Te.IsNumber(e.Count)&&(this.ATR.Count=e.Count)}},this.CalculateByClose=function(t){var e=new pt;if(e.Data=[],e.Right=t.Right,e.Period=t.Period,e.DataType=t.DataType,e.Symbol=t.symbol,!Te.IsNonEmptyArray(t.Data))return e;var a=this.BrickSize;1==this.BrickSizeType&&(a=this.ATR.BrickSize);var i=t.Data[0];this.LastData=st.Copy(i);for(var r=1;r<t.Data.length;){var i=t.Data[r],n=i.Close-this.LastData.Close,o=i.Close-this.LastData.Open;if(Math.abs(n)>=a&&Math.abs(o)>=a){var s=0;if(n>0||o>0){var h=this.LastData.Close,l=Math.max(this.LastData.Close,this.LastData.Open),u=l+a,c=u,f=l;s=i.Vol}else{var h=this.LastData.Close,l=Math.min(this.LastData.Close,this.LastData.Open),u=l-a,c=l,f=u;s=i.Vol}var d=new st;d.Date=i.Date,d.Time=i.Time,d.YClose=h,d.Open=l,d.High=c,d.Low=f,d.Close=u,d.Vol=this.LastData.Vol+s,e.Data.push(d),this.LastData.YClose=d.YClose,this.LastData.Open=d.Open,this.LastData.High=d.High,this.LastData.Low=d.Low,this.LastData.Close=d.Close,this.LastData.Date=d.Date,this.LastData.Time=d.Time,this.LastData.Vol=0}else this.LastData.Vol+=i.Vol,++r}return e},this.RecvHistoryData=function(t,e){return this.Symbol=e.Symbol,this.SourceData=t,this.FloatPrecision=Ga(this.Symbol),1==this.BrickSizeType&&this.CalculateATR(),this.CalculateByClose(t)},this.Clear=function(){this.SourceData=null,this.LastData=null,this.Symbol=null},this.GetTitle=function(){if(1==this.BrickSizeType)var t="Renko [ATR("+this.ATR.Count+"), "+this.ATR.BrickSize+"]";else var t="Renko [Traditional, "+this.BrickSize+"]";return t},this.CalculateATR=function(){if(Te.IsNonEmptyArray(this.SourceData.Data)){for(var t=this.SourceData.Data,e=t.length,a=[],i=e-1,r=0;i>=0&&r<this.ATR.Count;--i,++r){var n=t[i],o=Math.max(n.High-n.Low,n.High-n.Close,n.Close-n.Low);a.push(o)}for(var s=0,i=0;i<a.length;++i)s+=a[i];var h=s/a.length,o=h.toFixed(this.FloatPrecision);this.ATR.BrickSize=parseFloat(o)}}}}}],["HeikinAshiCalculate",{Create:function(){return new function(){this.SourceData,this.Symbol,this.FloatPrecision=2,this.ClassName="HeikinAshiCalculate",this.Clear=function(){this.SourceData=null,this.LastData=null,this.Symbol=null},this.RecvHistoryData=function(t,e){return this.Symbol=e.Symbol,this.SourceData=t,this.FloatPrecision=Ga(this.Symbol),this.Calculate(t)},this.GetTitle=function(){return"Heikin Ashi"},this.Calculate=function(t){var e=new pt;if(e.Data=[],e.Right=t.Right,e.Period=t.Period,e.DataType=t.DataType,e.Symbol=t.symbol,!Te.IsNonEmptyArray(t.Data))return e;for(var a=null,i=null,r=0;r<t.Data.length;++r){var n=t.Data[r],o=st.Copy(n);a?(o.Close=(n.Close+n.Open+n.High+n.Low)/4,o.Open=(a.Close+a.Open)/2,o.YClose=i,o.High=Math.max(o.Close,o.Open,n.High),o.Low=Math.min(o.Close,o.Open,n.Low),i=o.Close):(o.Open=(n.Close+n.Open)/2,o.Close=(n.Close+n.Open+n.High+n.Low)/4,i=o.Close),a=n,e.Data.push(o)}return e}}}}],["LineBreakCalcuate",{Create:function(){return new function(){this.SourceData,this.Symbol,this.FloatPrecision=2,this.LineCount=3,this.ClassName="LineBreakCalcuate",this.Clear=function(){this.SourceData=null,this.LastData=null,this.Symbol=null},this.GetTitle=function(){return"Line Break ["+this.LineCount+"]"},this.RecvHistoryData=function(t,e){return this.Symbol=e.Symbol,this.SourceData=t,this.FloatPrecision=Ga(this.Symbol),this.CalculateByClose(t)},this.CalculatePreviousKLine=function(t){for(var e=0;e<t.Data.length;++e){var a=t.Data[e];0==e?(t.High=a.High,t.Low=a.Low):(t.High<a.High&&(t.High=a.High),t.Low<a.Low&&(t.Low=a.Low)),t.Date=a.Date,t.Time=a.Time,t.Vol+=a.Vol,t.Amount+=a.Amount}},this.CalculateByClose=function(t){var e=new pt;if(e.Data=[],e.Right=t.Right,e.Period=t.Period,e.DataType=t.DataType,e.Symbol=t.symbol,!Te.IsNonEmptyArray(t.Data))return e;for(var a=0,i={High:null,Low:null,Date:null,Time:null,Direction:0};a<t.Data.length&&a<this.LineCount;++a){var r=t.Data[a];0==n?(i.High=r.High,i.Low=r.Low):(i.High<r.High&&(i.High=r.High),i.Low>r.Low&&(i.Low=r.Low)),i.Date=r.Date,i.Time=r.Time,i.Vol+=r.Vol,i.Amount+=r.Amount}for(var n=a;n<t.Data.length;++n){var r=t.Data[n];if(r.Close>i.High){var o=new st;o.YClose=i.Low,o.Open=i.High,o.Close=r.Close,o.Low=Math.min(o.Open,o.Close),o.High=Math.max(o.Open,o.Close),o.Date=r.Date,o.Time=r.Time,o.Vol=r.Vol,o.Amount=r.Amount,o.Direction=1,e.Data.push(o),i=o}else if(r.Close<i.Low){var o=new st;o.YClose=i.High,o.Open=i.Low,o.Close=r.Close,o.Low=Math.min(o.Open,o.Close),o.High=Math.max(o.Open,o.Close),o.Date=r.Date,o.Time=r.Time,o.Vol=r.Vol,o.Amount=r.Amount,o.Direction=2,e.Data.push(o),i=o}else i&&(1==i.Direction||i.Direction,i.Vol+=r.Vol,i.Amount+=r.Amount)}return e}}}}]]),this.Create=function(t){return this.DataMap.has(t)?this.DataMap.get(t).Create():null}};function la(t,e){this.newMethod=M,this.newMethod(t,e),delete this.newMethod,this.ClassName="KLineChartContainer",this.WindowIndex=new Array,this.ColorIndex,this.TradeIndex,this.Symbol,this.Name,this.Period=0,this.IsApiPeriod=!1,this.Right=0,this.RightFormula=0,this.SourceData,this.MaxRequestDataCount=3e3,this.MaxRequestMinuteDayCount=5,this.PageSize=200,this.KLineDrawType=0,this.ScriptErrorCallback,this.FlowCapitalReady=!1,this.EnableFlowCapital={},this.EnableZoomUpDown=null,this.ChartDrawStorage=new ta,this.ChartDrawStorageCache=null,this.RightSpaceCount=0,this.SourceDataLimit=new C.default,this.CtrlMoveStep=5,this.CustomShow=null,this.OverlayIndexFrameWidth=60,this.ZoomType=0,this.IsZoomLockRight=!1,this.KLineSize=null,this.Page={Day:{Enable:!1,Index:0,Finish:!1},Minute:{Enable:!1,Index:0,Finish:!1}},this.DragDownload={Day:{Enable:!1,IsEnd:!1,Status:0},Minute:{Enable:!1,IsEnd:!1,Status:0},Tick:{Enable:!1,IsEnd:!1,Status:0}},this.IsAutoUpdate=!1,this.AutoUpdateFrequency=3e4,this.AutoUpdateTimer,this.KLineApiUrl=ia.Domain+"/API/KLine2",this.MinuteKLineApiUrl=ia.Domain+"/API/KLine3",this.DragMinuteKLineApiUrl=ia.Domain+"/API/KLine4",this.DragKLineApiUrl=ia.Domain+"/API/KLine5",this.RealtimeApiUrl=ia.Domain+"/API/Stock",this.KLineMatchUrl=ia.Domain+"/API/KLineMatch",this.StockHistoryDayApiUrl=ia.Domain+"/API/StockHistoryDay",this.TickApiUrl=ia.Domain+"/API/StockDetail",this.MinuteDialog,this.RightMenu,this.BeforeBindMainData=null,this.AfterBindMainData=null,this.KLineCalculate=null,this.KLineCalcOption=new C.default,this.ScrollBar=null,this.GetKLineCalulate=function(){var t,e=this.GetKLineDrawType();if(10==e)t="RenkoCalculate";else if(11==e)t="HeikinAshiCalculate";else{if(12!=e)return null;t="LineBreakCalcuate"}if((!this.KLineCalculate||this.KLineCalculate.ClassName!=t)&&(this.KLineCalculate=ha.Create(t),this.KLineCalculate.SetOption&&this.KLineCalcOption.has(t))){var a=this.KLineCalcOption.get(t);this.KLineCalculate.SetOption(a)}return this.KLineCalculate},this.SetKLineCalcOption=function(t,e){this.KLineCalcOption.set(t,e),this.KLineCalculate&&this.KLineCalculate.ClassName==t&&this.KLineCalculate.SetOption&&this.KLineCalculate.SetOption(e)},this.ClearKLineCaluate=function(){this.KLineCalculate&&this.KLineCalculate.Clear&&this.KLineCalculate.Clear()},this.ResetDragDownload=function(){this.DragDownload.Day.Status=0,this.DragDownload.Day.IsEnd=!1,this.DragDownload.Minute.Status=0,this.DragDownload.Minute.IsEnd=!1,this.DragDownload.Tick.Status=0,this.DragDownload.Tick.IsEnd=!1},this.ResetPage=function(){this.Page.Day.Finish=!1,this.Page.Day.Index=0,this.Page.Minute.Finish=!1,this.Page.Minute.Index=0},this.AddCustomKLine=function(t,e){var a=this.ChartPaint[0];if(a&&t){if(a.CustomKLine||(a.CustomKLine=new C.default),Array.isArray(t))for(var i=0;i<t.length;++i){var r=t[i];a.CustomKLine.set(r.Key,r.Data)}else t&&a.CustomKLine.set(t.Key,t.Data);e&&1==e.Draw&&this.Draw()}},this.ClearCustomKLine=function(t){var e=this.ChartPaint[0];e&&(e.ClearCustomKLine(),t&&1==t.Draw&&this.Draw())},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::StopAutoUpdate"),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.SandTableOperator=function(t){switch(t.ID){case 1:this.StopAutoUpdate(),t.Data&&this.ManualUpdateKData(t);break;case 2:this.ManualUpdateKData(t);break;case 3:t.IsAutoUpdate&&(this.IsAutoUpdate=t.IsAutoUpdate),this.ChangeSymbol(this.Symbol)}},this.ManualUpdateKData=function(t){var e=t.Data,a=e.length,i=new pt;i.Data=e,i.Period=this.Period,i.Right=this.Right,i.Symbol=this.Symbol,this.UpdateMainData(i,a),this.BindInstructionIndexData(i);for(var r=0;r<this.Frame.SubFrame.length;++r)this.BindIndexData(r,i);if(Te.IsNumber(t.DataOffset)&&t.DataOffset>=0){var n=null;(n=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data)&&(n.DataOffset=t.DataOffset)}this.UpdataDataoffset(),this.UpdatePointByCursorIndex(1),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.SendManualKLineUpdateEvent(i)},this.GetKDataInfo=function(){if(!this.ChartPaint[0])return null;var t=this.ChartPaint[0],e={};return t.Data&&t.Data.Data&&(e.Data=t.Data.CloneData("HistoryData")),e.ShowRange=t.ShowRange,e.Period=this.Period,e.RightSpaceCount=this.RightSpaceCount,e},this.ChartOperator=function(t){var e=t.ID;if(e===F.OP_SCROLL_LEFT||e===F.OP_SCROLL_RIGHT){var a=e===F.OP_SCROLL_LEFT,i=1;t.Step>0&&(i=t.Step);var r=this.GetMoveOneStepWidth();this.DataMove(i*r,a)?(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw()):e===F.OP_SCROLL_RIGHT&&this.DragDownloadData&&this.DragDownloadData()}else if(e===F.OP_ZOOM_IN||e===F.OP_ZOOM_OUT){var n={};if(n.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),e===F.OP_ZOOM_IN){if(!this.Frame.ZoomUp(n))return}else if(!this.Frame.ZoomDown(n))return;this.CursorIndex=n.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw()}else if(e===F.OP_GOTO_HOME){if(!(d=this.ChartOperator_Temp_GetHistroyData()))return;var o=this.Frame.SubFrame[0].Frame.XPointCount;o-=this.RightSpaceCount;var s=d.Data.length-o;d.DataOffset=s,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,D.Chart.Log("[KLineChartContainer::ChartOperator] OP_GOTO_HOME, dataOffset="+d.DataOffset+" CursorIndex="+this.CursorIndex+" PageSize="+o),this.ChartOperator_Temp_Update()}else if(e===F.OP_GOTO_END){if(!(d=this.ChartOperator_Temp_GetHistroyData()))return;d.DataOffset=0,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,D.Chart.Log("[KLineChartContainer::ChartOperator] OP_GOTO_END "),this.ChartOperator_Temp_Update()}else if(e==F.OP_LEFT_ZOOM_IN||e==F.OP_LEFT_ZOOM_OUT){if(!(d=this.ChartOperator_Temp_GetHistroyData()))return;var h=d.Data.length,l=(o=this.Frame.SubFrame[0].Frame.XPointCount,d.DataOffset);if(e==F.OP_LEFT_ZOOM_IN){if(Te.IsNumber(t.Step)){if(o>=h)return;if((i=t.Step)>l&&(i=l),o+i>h&&(i=h-o),i<=0)return;o+=i,d.DataOffset-=i}}else if(e==F.OP_LEFT_ZOOM_OUT){var u=this.GetMaxMinPageSize().Min;if(Te.IsNumber(t.Step)){if(o<u)return;if(o-(i=t.Step)<u&&(i=o-u),i<=0)return;o-=i,d.DataOffset+=i}}for(var c in this.Frame.SubFrame){(N=this.Frame.SubFrame[c].Frame).XPointCount=o}d.DataOffset<0&&(d.DataOffset=0),this.ChartOperator_Temp_Update()}else if(e==F.OP_RIGHT_ZOOM_IN||e==F.OP_RIGHT_ZOOM_OUT){if(!(d=this.ChartOperator_Temp_GetHistroyData()))return;h=d.Data.length,o=this.Frame.SubFrame[0].Frame.XPointCount,l=d.DataOffset;if(e==F.OP_RIGHT_ZOOM_IN){if(Te.IsNumber(t.Step)){if(o>=h)return;var f=h-(l+o);if(f<=0)return;if((i=t.Step)>f&&(i=f),i<=0)return;o+=i}}else if(e==F.OP_RIGHT_ZOOM_OUT){u=this.GetMaxMinPageSize().Min;if(Te.IsNumber(t.Step)){if(o<u)return;if((i=t.Step)>o&&(i=o),o-i<u&&(i=o-u),i<=0)return;o-=i}}for(var c in this.Frame.SubFrame){(N=this.Frame.SubFrame[c].Frame).XPointCount=o}d.DataOffset<0&&(d.DataOffset=0),this.ChartOperator_Temp_Update()}else{if(e==F.OP_SET_SELECTRECT){if(!this.ChartPaint[0])return!1;if(!this.ChartPaint[0].Data)return!1;var d=this.ChartOperator_Temp_GetHistroyData();if(!Te.IsNonEmptyArray(d.Data))return!1;if(!(v=this.GetRectSelectPaint()))return!1;if(!pt.IsDayPeriod(this.Period,!0))return!1;for(c=0;c<d.Data.length;++c){if((N=d.Data[c]).Date==t.Start.Date&&(g={KItem:N,DataIndex:c}),N.Date==t.End.Date&&(S={KItem:N,DataIndex:c}),t.SubClient&&t.SubClient.Start&&N.Date==t.SubClient.Start.Date&&(T={KItem:N,DataIndex:c}),t.SubClient&&t.SubClient.End&&N.Date==t.SubClient.End.Date&&(I={KItem:N,DataIndex:c}),g&&S)break}if(!g||!S)return D.Chart.Warn("[KLineChartContainer::ChartOperator][OP_SET_SELECTRECT] can't find date. firstPoint, secondPoint, obj",g,S,t),!1;v.SetPoint(g.KItem,{Index:0,DataIndex:g.DataIndex}),v.SetPoint(S.KItem,{Index:1,DataIndex:S.DataIndex}),T&&I&&(v.SetPoint(T.KItem,{Index:3,DataIndex:T.DataIndex}),v.SetPoint(I.KItem,{Index:4,DataIndex:I.DataIndex})),Te.IsBool(t.PreventClose)&&(v.PreventClose=t.PreventClose);var C=!1,p=this.ChartPaint[0].DrawKRange;if(p&&(p.Start>=g.DataIndex&&p.Start>=S.DataIndex||p.End<=g.DataIndex&&p.End<=S.DataIndex)){var m=g.DataIndex;h=d.Data.length;m+(o=this.ChartPaint[0].ShowRange.ShowCount)>h&&(m=h-o),m<0&&(m=0),d.DataOffset=m,C=!0}return C?this.ChartOperator_Temp_Update():this.Draw(),!0}if(e==F.OP_SET_SUB_SELECTRECT){if(!this.ChartPaint[0])return!1;if(!this.ChartPaint[0].Data)return!1;var v,g,S,T,I;d=this.ChartOperator_Temp_GetHistroyData();if(!Te.IsNonEmptyArray(d.Data))return!1;if(!(v=this.GetRectSelectPaint()))return!1;if(!pt.IsDayPeriod(this.Period,!0))return!1;for(c=0;c<d.Data.length;++c){if((N=d.Data[c]).Date==t.Start.Date&&(g={KItem:N,DataIndex:c}),N.Date==t.End.Date&&(S={KItem:N,DataIndex:c}),g&&S)break}return g&&S?(v.SetPoint(g.KItem,{Index:3,DataIndex:g.DataIndex}),v.SetPoint(S.KItem,{Index:4,DataIndex:S.DataIndex}),this.Draw(),!0):(D.Chart.Warn("[KLineChartContainer::ChartOperator][OP_SET_SUB_SELECTRECT] can't find date. firstPoint, secondPoint, obj",g,S,t),!1)}if(e==F.OP_SCROOLBAR_SLIDER_CHANGED){if(!(d=this.ChartOperator_Temp_GetHistroyData()))return;if(0==t.Type)d.DataOffset=t.Start.Index,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,this.ChartOperator_Temp_Update();else if(1==t.Type||2==t.Type){t.Start.Index,o=t.End.Index-t.Start.Index+1,d.Data[t.Start.Index],d.Data[t.End.Index];this.Frame.SetXShowCount(o),d.DataOffset=t.Start.Index,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,this.ChartOperator_Temp_Update()}}else if(e==w.OP_GOTO){if(!Te.IsNumber(t.Date))return;if(!(d=this.ChartOperator_Temp_GetHistroyData()))return;s=null;if(pt.IsDayPeriod(this.Period,!0))for(c=0;c<d.Data.length;++c){if((N=d.Data[c]).Date>=t.Date){s=c;break}}else if(pt.IsMinutePeriod(this.Period,!0)){var y=t.Time;if(Te.IsPlusNumber(y))for(c=0;c<d.Data.length;++c){if((N=d.Data[c]).Date>t.Date||N.Date==t.Date&&N.Time>=y){s=c;break}}else for(c=0;c<d.Data.length;++c){if((N=d.Data[c]).Date>=t.Date){s=c;break}}}if(null===s)return void D.Chart.Log("[KLineChartContainer::ChartOperator] OP_GOTO can't find date="+t.Date+" time="+t.Time);var x=this.Frame.SubFrame[0].Frame.XPointCount,E=x;t.PageSize>0&&(E=t.PageSize),E!=x&&this.Frame.SetXShowCount(E),d.DataOffset=s,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,this.ChartOperator_Temp_Update()}else if(e==F.OP_CORSSCURSOR_GOTO){if(!Te.IsNumber(t.Date))return;var b=Te.IsNumber(t.Time),L=this.GetChartStatus();if(!L)return;if(!(d=this.ChartOperator_Temp_GetHistroyData()))return;for(var M=-1,O=(c=d.DataOffset,0);c<d.Data.length&&O<L.KLine.PageSize;++c,++O){var N=d.Data[c];if(b){if(N.Date==t.Date&&N.Time==t.Time){N,M=O,c;break}}else if(N.Date==t.Date){N,M=O,c;break}}if(M<0)return;if(!this.Frame||!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return!1;var P=this.Frame.SubFrame[0].Frame,R=P.GetXFromIndex(M),_=P.GetYFromData(N.Close),B={X:R,Y:_,IsInClient:this.IsMouseOnClient(R,_)};this.LastMouseStatus.OnMouseMove=B,this.LastMouseStatus.MoveOnPoint={X:R,Y:_};var k=this.GetEventCallback(w.ON_MOUSE_MOVE),G=this.TitlePaint[0];k&&G&&(G.OnMouseMoveEvent=k);var V=A(),H={};H.clientX=R/V+this.UIElement.getBoundingClientRect().left,H.clientY=_/V+this.UIElement.getBoundingClientRect().top,this.MoveOnPoint={X:R,Y:_},this.OnMouseMove(R,_,H),this.LastMouseStatus.MoveOnPoint=null,G&&(G.OnMouseMoveEvent=null)}}},this.ChartOperator_Temp_GetHistroyData=function(){return(this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data)||null},this.ChartOperator_Temp_Update=function(){this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex()},this.OnWheel=function(t){if(D.Chart.Log("[KLineChartContainer::OnWheel]",t),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e,a=A(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a;this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),e=this.Canvas.isPointInPath(i,r);var n=t.wheelDelta;Te.IsObjectExist(t.wheelDelta)||(n=-.01*t.deltaY);var o=!0;if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Wheel&&(o=!1),this.SourceData&&this.SourceData.Data)if(e&&n<0&&o)(s={ZoomType:this.ZoomType,IsLockRight:this.IsZoomLockRight}).Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),this.Frame.ZoomDown(s)&&(this.CursorIndex=s.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.OnKLinePageChange("wheel"));else if(e&&n>0&&o){var s;(s={ZoomType:this.ZoomType,IsLockRight:this.IsZoomLockRight}).Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),this.Frame.ZoomUp(s)&&(D.Chart.Log("[KLineChartContainer::OnWheel] cursorIndex ",s),this.CursorIndex=s.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.OnKLinePageChange("wheel"))}e&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}},this.Create=function(t,e){var a=this;for(var i in this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new be,this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=_e.Create("CorssCursor_XStringFormat"),this.ChartCorssCursor.StringFormatX.GetEventCallback=function(t){return a.GetEventCallback(t)},this.ChartCorssCursor.StringFormatX.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY=_e.Create("CorssCursor_YStringFormat"),this.ChartCorssCursor.StringFormatY.GetEventCallback=function(t){return a.GetEventCallback(t)},this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY.ExtendChartPaint=this.ExtendChartPaint,this.ChartSplashPaint=new Le,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.HQChart=this,this.Frame=new nt,this.Frame.ChartBorder=new X,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.Frame.GetExtendChartRightWidth=function(){return a.GetExtendChartRightWidth()},this.Frame.GetExtendChartByClassName=function(t){return a.GetExtendChartByClassName(t)},this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine(),this.CreateExtendChart("RectSelectPaint",e?e.SelectRect:null),this.EnableIndexChartDrag&&this.CreateExtendChart("DragMovePaint"),this.Frame.SubFrame){var r=new Xe;r.Frame=this.Frame.SubFrame[i].Frame,r.Canvas=this.Canvas,r.LanguageID=this.LanguageID,r.GetEventCallback=function(t){return a.GetEventCallback(t)},r.SelectedChart=this.SelectedChart,this.TitlePaint.push(r)}this.ChartCorssCursor.StringFormatX.Frame=this.Frame.SubFrame[0].Frame,this.ChartCorssCursor.StringFormatY.Frame=this.Frame;var n=!0,o=!0;if(e&&e.Listener){var s=e.Listener;!1===s.KeyDown&&(n=!1,D.Chart.Log("[KLineChartContainer::Create] not register keydown event.")),!1===s.Wheel&&(o=!1,D.Chart.Log("[KLineChartContainer::Create] not register wheel event."))}n&&this.UIElement.addEventListener("keydown",function(t){a.OnKeyDown(t)},!0),o&&this.UIElement.addEventListener("wheel",function(t){a.OnWheel(t)},!0)},this.OnCustomKeyDown=function(t,e){return 37==t&&e.ctrlKey?(this.MoveCorssCursorLeft(this.CtrlMoveStep),!0):!(39!=t||!e.ctrlKey)&&(this.MoveCorssCursorRight(this.CtrlMoveStep),!0)},this.MoveCorssCursorLeft=function(t){var e=null;if(e=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data)if(e.DataOffset<=0&&this.CursorIndex<=0)this.DragDownloadData&&this.DragDownloadData();else{if(this.CursorIndex-t<0)return e.DataOffset-=t,e.DataOffset<0&&(e.DataOffset=0,this.CursorIndex=0),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),void this.OnKLinePageChange("keydown");this.CursorIndex-=t,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown()}},this.MoveCorssCursorRight=function(t){var e=null;if(e=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data){var a=0;if(a=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,!(this.CursorIndex+e.DataOffset+1>=e.Data.length)){var i=!1;if(this.CursorIndex+t+e.DataOffset+1>e.Data.length&&(t=e.Data.length-1-e.DataOffset-this.CursorIndex,i=!0),this.CursorIndex+t>=a){var r=this.CursorIndex+t-(a-1);return e.DataOffset+=r,i&&(this.CursorIndex=a-1),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),void this.OnKLinePageChange("keydown")}this.CursorIndex+=t,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown()}}},this.GetKLineChart=function(){return this.ChartPaint[0]?this.ChartPaint[0]:null},this.CreateChildWindow=function(t){for(var e=this,a=0;a<t;++a){var i=new X;i.UIElement=this.UIElement;var r=W.Create("KLineFrame",{ID:a});if(r.Canvas=this.Canvas,r.ChartBorder=i,r.Identify=a,r.RightSpaceCount=this.RightSpaceCount,r.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ModifyIndexDialog&&(r.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(r.ChangeIndexEvent=this.ChangeIndexDialog.DoModal),r.HorizontalMax=20,r.HorizontalMin=10,0==a){r.YSplitOperator=new Ie,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),r.YSplitOperator.FrameSplitData2=this.FrameSplitData.get("double"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},r.YSplitOperator.GetKLineChartCallback=function(){return e.GetKLineChart()},r.YSplitOperator.HQChart=this;var n=A();i.BottomSpace=15*n,i.TopSpace=15*n,r.GetEventCallback=function(t){return e.GetEventCallback(t)}}else r.YSplitOperator=new ye,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),r.YSplitOperator.LanguageID=this.LanguageID,r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},r.YSplitOperator.GetKLineChartCallback=function(){return e.GetKLineChart()},r.YSplitOperator.HQChart=this;r.YSplitOperator.Frame=r,r.YSplitOperator.ChartBorder=i,r.XSplitOperator=new xe,r.XSplitOperator.Frame=r,r.XSplitOperator.ChartBorder=i,r.XSplitOperator.LanguageID=this.LanguageID,r.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},a!=t-1&&(r.XSplitOperator.ShowText=!1);for(var o=r.HorizontalMin;o<=r.HorizontalMax;o+=1)r.HorizontalInfo[o]=new Y,r.HorizontalInfo[o].Value=o,0==a&&o==r.HorizontalMin||(r.HorizontalInfo[o].Message[1]=o.toString(),r.HorizontalInfo[o].Font="14px 微软雅黑");var s=new it;s.Frame=r,s.Height=0==a?20:10,this.Frame.SubFrame[a]=s}},this.CreateSubFrameItem=function(t){var e=this,a=new X;a.UIElement=this.UIElement;var i=new $;i.Canvas=this.Canvas,i.ChartBorder=a,i.Identify=t,i.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ModifyIndexDialog&&(i.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(i.ChangeIndexEvent=this.ChangeIndexDialog.DoModal),i.HorizontalMax=20,i.HorizontalMin=10,i.YSplitOperator=new ye,i.YSplitOperator.LanguageID=this.LanguageID,i.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),i.YSplitOperator.Frame=i,i.YSplitOperator.ChartBorder=a,i.XSplitOperator=new xe,i.XSplitOperator.Frame=i,i.XSplitOperator.ChartBorder=a,i.XSplitOperator.ShowText=!1,i.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},i.YSplitOperator.GetKLineChartCallback=function(){return e.GetKLineChart()},i.YSplitOperator.HQChart=this,i.XSplitOperator.Symbol=this.Symbol,i.XSplitOperator.Period=this.Period;var r=this.Frame.SubFrame[0].Frame.XPointCount;i.XPointCount=r,i.Data=this.ChartPaint[0].Data;for(var n=i.HorizontalMin;n<=i.HorizontalMax;n+=1)i.HorizontalInfo[n]=new Y,i.HorizontalInfo[n].Value=n,i.HorizontalInfo[n].Message[1]=n.toString(),i.HorizontalInfo[n].Font="14px 微软雅黑";var o=new it;return o.Frame=i,o.Height=10,o},this.CreateMainKLine=function(){var t=this,e=xt.Create("ChartKLine");e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.Name="Main-KLine",e.DrawType=this.KLineDrawType,e.Identify="Main-KLine",e.GetEventCallback=function(e){return t.GetEventCallback(e)},this.ChartPaint[0]=e,this.TitlePaint[0]=new Ge,this.TitlePaint[0].Frame=this.Frame.SubFrame[0].Frame,this.TitlePaint[0].Canvas=this.Canvas,this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.TitlePaint[0].LanguageID=this.LanguageID,this.TitlePaint[0].HQChart=this,this.TitlePaint[0].GetEventCallback=function(e){return t.GetEventCallback(e)}},this.BindMainData=function(t,e){(this.ChartPaint[0].Data=t,this.ChartPaint[0].Symbol=this.Symbol,this.KLineSize)&&(null==this.KLineSize.DataWidth?e=this.Frame.SubFrame[0].Frame.XPointCount-this.RightSpaceCount:(e=this.Frame.SetDataWidth(this.KLineSize.DataWidth).XPointCount-this.RightSpaceCount,this.KLineSize.DataWidth=null));for(var a in this.Frame.SubFrame){(i=this.Frame.SubFrame[a].Frame).XPointCount=e+this.RightSpaceCount,i.Data=this.ChartPaint[0].Data,i.XSplitOperator.Symbol=this.Symbol,i.XSplitOperator.Period=this.Period}for(var a in this.TitlePaint[0].Data=this.ChartPaint[0].Data,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=this.Name,this.TitlePaint[0].Period=this.Period,this.ChartCorssCursor.StringFormatX.Data=this.ChartPaint[0].Data,this.Frame.Data=this.ChartPaint[0].Data,this.OverlayChartPaint){var i;(i=this.OverlayChartPaint[a]).MainData=this.ChartPaint[0].Data}var r=t.Data.length-e;r<0&&(r=0),this.ChartPaint[0].Data.DataOffset=r,this.ChartPaint[0].Period=this.Period,this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.CursorIndex=e,this.CursorIndex+r>=t.Data.length&&(this.CursorIndex=t.Data.length-1-r),this.CursorIndex<0&&(this.CursorIndex=0),this.CustomShow&&(this.SetCustomShow(this.CustomShow,t),this.CustomShow=null)},this.UpdateMainData=function(t,e){var a=null;if(this.Frame.Data?this.Frame.SubFrame&&this.Frame.SubFrame[0]&&(a=this.Frame.SubFrame[0].Frame.Data):a=this.Frame.Data,a){var i=this.Frame.SubFrame[0].Frame.XPointCount,r=0;for(var n in e>0&&t.Data.length>e?(r=t.Data.length-e,D.Chart.Log("[KLineChartContainer::UpdateMainData]  [count="+e+"->"+t.Data.length+"], [newDataCount="+r+"], [Pagesize="+i+"]")):0==e&&t.Data.length>i&&(r=t.Data.length-i,D.Chart.Log("[KLineChartContainer::UpdateMainData] history data is empty. [count="+e+"->"+t.Data.length+"], [newDataCount="+r+"], [Pagesize="+i+"]")),this.ChartPaint[0].Data=t,this.ChartPaint[0].Symbol=this.Symbol,t.Data.length>i&&(this.ChartPaint[0].Data.DataOffset=a.DataOffset+r),this.Frame.SubFrame){(o=this.Frame.SubFrame[n].Frame).Data=this.ChartPaint[0].Data,0==n&&(o.YSplitOperator.Symbol=this.Symbol,o.YSplitOperator.Data=this.ChartPaint[0].Data,o.YSplitOperator.Period=this.Period)}for(var n in this.TitlePaint[0].Data=this.ChartPaint[0].Data,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=this.Name,this.ChartCorssCursor.StringFormatX.Data=this.ChartPaint[0].Data,this.Frame.Data=this.ChartPaint[0].Data,this.OverlayChartPaint){var o;(o=this.OverlayChartPaint[n]).MainData=this.ChartPaint[0].Data}this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol}},this.SetCustomShow=function(t,e){if(t&&t.Date&&!(t.Date<19910101)){for(var a=t.Date,i=null,r=0;r<e.Data.length;++r){if(e.Data[r].Date>=a){i=r;break}}if(null!==i){var n=e.Data.length-i;t.PageSize>0&&(n=t.PageSize);var o=n,s=this.GetMaxMinPageSize();for(var r in n>s.Max?o=s.Max:n<s.Min&&(o=s.Min),this.Frame.SubFrame){this.Frame.SubFrame[r].Frame.XPointCount=o}this.ChartPaint[0].Data.DataOffset=i,this.CursorIndex=0}else D.Chart.Log("[KLineChartContainer::SetCustomShow] Can't find first date="+a)}},this.OnDragSelectRectMouseUp=function(t){var e=this.GetRectSelectPaint();if(e){var a=e.GetSelectRectData();if(a){var i=A(),r=this.ChartCorssCursor,n=r.LastPoint.X/i,o=r.LastPoint.Y/i,s=!0,h=this.GetEventCallback(w.ON_DRAG_SELECT_RECT_MOUSEUP);if(h){var l={X:n,Y:o,SelectData:a,RectSelectPaint:e,IsShowMenu:!1};h.Callback(h,l,this),s=l.IsShowMenu}s&&this.SelectRectRightMenu&&(t.data={Chart:this,X:n,Y:o,SelectData:a,RectSelectPaint:e},this.SelectRectRightMenu.DoModal(t))}}},this.OnDragSubSelectRectMouseUp=function(t){var e=this.GetRectSelectPaint();if(e&&e.GetSelectRectData()){var a=A(),i=this.ChartCorssCursor,r=i.LastPoint.X/a,n=i.LastPoint.Y/a,o=this.GetEventCallback(w.ON_DRAG_SUB_SELECT_RECT_MOUSEUP);if(o){var s={X:r,Y:n,SubSelectData:{Start:e.SubClient.FirstPoint,End:e.SubClient.SecondPoint},RectSelectPaint:e};o.Callback(o,s,this)}}},this.ShowSelectData=function(t){this.HideSelectRect(),this.SelectRectRightMenu&&this.SelectRectRightMenu.Hide(),D.Chart.Log("[KLineChartContainer::ShowSelectData] selectData",t);var e=t.Start,a=t.End-t.Start+1;for(var i in D.Chart.Log("[KLineChartContainer::ShowSelectData] DataOffset="+e+", ShowCount="+a),this.Frame.SubFrame){this.Frame.SubFrame[i].Frame.XPointCount=a}this.ChartPaint[0].Data.DataOffset=e,this.CursorIndex=0,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex()},this.OnMarkRectSelect=function(t){var e=this.ChartCorssCursor;if(e&&0!=e.Status&&Te.IsNumber(e.CursorIndex)&&this.ChartPaint[0]&&this.ChartPaint[0].Data){var a=this.GetRectSelectPaint();if(a){var i=e.CursorIndex;D.Chart.Log("[KLineChartContainer::OnMarkRectSelect] dataIndex",i);var r=this.ChartPaint[0].Data,n=(i=parseInt(i.toFixed(0)))+r.DataOffset;n>=r.Data.length&&(n=r.Data.length-1);var o=r.Data[n];if(D.Chart.Log("[KLineChartContainer::OnMarkRectSelect] item",o),this.SetRectSelectData(o,n)){var s=a.GetPointCount(),h=A();if(1==s){if((u=this.GetEventCallback(w.ON_KEYDOWN_SELECT_RECT_FIRST))&&u.Callback){var l={X:e.LastPoint.X/h,Y:e.LastPoint.Y/h,Item:o,Index:n,RectSelectPaint:a};u.Callback(u,l,this)}}else if(2==s){var u,c=a.GetSelectRectData(),f=!0;if((u=this.GetEventCallback(w.ON_KEYDOWN_SELECT_RECT))&&u.Callback){l={X:e.LastPoint.X/h,Y:e.LastPoint.Y/h,SelectData:c,RectSelectPaint:a,IsShowMenu:!0};u.Callback(u,l,this),f=l.IsShowMenu}f&&this.SelectRectRightMenu&&(t.data={Chart:this,X:e.LastPoint.X/h,Y:e.LastPoint.Y/h,SelectData:c,RectSelectPaint:a},this.SelectRectRightMenu.DoModal(t))}this.Draw()}}}},this.CreateWindowIndex=function(t){this.WindowIndex[t].Create(this,t)},this.BindIndexData=function(t,e,a){this.WindowIndex[t]&&("function"!=typeof this.WindowIndex[t].RequestData?"function"!=typeof this.WindowIndex[t].ExecuteScript?this.WindowIndex[t].BindData(this,t,e):this.WindowIndex[t].ExecuteScript(this,t,e):this.WindowIndex[t].RequestData(this,t,e,a))},this.BindOverlayIndexData=function(t,e,a){t.Script&&("function"!=typeof t.Script.RequestData?"function"!=typeof t.Script.ExecuteScript?t.Script.BindData(this,e,a):t.Script.ExecuteScript(this,e,a):t.Script.RequestData(this,e,a))},this.BindInstructionIndexData=function(t){this.ColorIndex&&"function"==typeof this.ColorIndex.ExecuteScript&&this.ColorIndex.ExecuteScript(this,0,t),this.TradeIndex&&"function"==typeof this.TradeIndex.ExecuteScript&&this.TradeIndex.ExecuteScript(this,0,t)},this.GetChartPaint=function(t){var e=new Array;for(var a in this.ChartPaint)if(0!=a){var i=this.ChartPaint[a];i.ChartFrame==this.Frame.SubFrame[t].Frame&&e.push(i)}return e},this.AutoUpdateEvent=function(t,e){var a=t?w.RECV_START_AUTOUPDATE:w.RECV_STOP_AUTOUPDATE;if(this.mapEvent.has(a)){var i=this,r=this.mapEvent.get(a),n={Stock:{Symbol:this.Symbol,Name:this.Name,Right:this.Right,Period:this.Period},Explain:e};t&&(n.Callback=function(t){pt.IsDayPeriod(i.Period,!0)?i.RecvRealtimeData(t):pt.IsMinutePeriod(i.Period,!0)?i.RecvMinuteRealtimeData(t):pt.IsSecondPeriod(i.Period)&&i.RecvMinuteRealtimeData(t)}),r.Callback(r,n,this)}},this.SendKLineUpdateEvent=function(t){var e=this.GetEventCallback(w.RECV_KLINE_UPDATE_DATA);if(e&&e.Callback){var a={HistoryData:t,Stock:{Symbol:this.Symbol,Name:this.Name}};return e.Callback(e,a,this),!0}return!1},this.SendManualKLineUpdateEvent=function(t){var e=this.GetEventCallback(w.RECV_KLINE_MANUAL_UPDATE_DATA);if(e&&e.Callback){var a={HistoryData:t,Stock:{Symbol:this.Symbol,Name:this.Name}};return e.Callback(e,a,this),!0}return!1},this.GetKLineDrawType=function(){return this.KLineDrawType},this.RequestHistoryData=function(){var t=this;if(this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.FlowCapitalReady=!1,this.ResetPage(),this.ResetDragDownload(),this.Draw(),this.NetworkFilter){var e=this.GetKLineDrawType(),a={Name:"KLineChartContainer::RequestHistoryData",Explain:"日K数据",Request:{Url:t.KLineApiUrl,Type:"POST",Data:{symbol:t.Symbol,count:t.MaxRequestDataCount,field:["name","symbol","yclose","open","price","high","low","vol"],period:this.Period,right:this.Right,klineDrawType:e}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryData(e);var a=t.Page.Day;1==a.Enable&&0==a.Finish?t.RequestHistoryPageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::RequestHistoryData"),t.AutoUpdate())}),1==a.PreventDefault)return}v.HttpRequest({url:this.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryData(e);var a=t.Page.Day;1==a.Enable&&0==a.Finish?t.RequestHistoryPageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::RequestHistoryData"),t.AutoUpdate())}})},this.BindAllOverlayIndexData=function(t){if(this.Frame&&this.Frame.SubFrame)for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e];for(var i in a.OverlayIndex){var r=a.OverlayIndex[i];this.BindOverlayIndexData(r,e,t)}}},this.RecvHistoryData=function(t){if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)D.Chart.Warn("[KLineChartContainer::RecvHistoryData] recv data symbol not match. HQChart["+this.Symbol+"] , Recv["+t.symbol+"]");else{var e=la.JsonDataToHistoryData(t),a=new pt;a.Data=e,a.DataType=0,a.Symbol=t.symbol,this.SourceData=a,this.BeforeBindMainData&&this.BeforeBindMainData("RecvHistoryData");var i=new pt;if(i.Data=e,i.Right=this.Right,i.Period=this.Period,i.DataType=0,i.Symbol=t.symbol,i.Right>0&&!this.IsApiPeriod){var r=i.GetRightData(i.Right,{AlgorithmType:this.RightFormula});i.Data=r}if(pt.IsDayPeriod(i.Period,!1)&&!this.IsApiPeriod){var n=i.GetPeriodData(i.Period);i.Data=n}var o,s=this.GetKLineCalulate();if(s)i=s.RecvHistoryData(i,{Symbol:this.Symbol,Function:"RecvHistoryData"}),this.FlowCapitalReady=!0;this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(i,this.PageSize),this.AfterBindMainData&&this.AfterBindMainData("RecvHistoryData"),this.Frame.SetSizeChage(!0),this.Frame.SubFrame[0]&&(o=this.Frame.SubFrame[0].Frame),o&&o.YSplitOperator&&(o.YSplitOperator.Symbol=this.Symbol,o.YSplitOperator.Data=this.ChartPaint[0].Data,o.YSplitOperator.Period=this.Period);var h=this.Page.Day;(0==h.Enable||1==h.Enable&&1==h.Finish)&&(this.ReqeustKLineInfoData({FunctionName:"RecvHistoryData"}),this.RequestFlowCapitalData(),this.RequestOverlayHistoryData(),this.CreateChartDrawPictureByStorage()),h.Enable&&(h.Index=1),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.UpdatePointByCursorIndex(2),this.Draw(),this.BindInstructionIndexData(i);for(var l=0;l<this.Frame.SubFrame.length;++l)this.BindIndexData(l,i);if(this.BindAllOverlayIndexData(i),this.mapEvent.has(w.RECV_HISTROY_DATA)){var u=this.mapEvent.get(w.RECV_HISTROY_DATA);t={HistoryData:i,Stock:{Symbol:this.Symbol,Name:this.Name}};u.Callback(u,t,this)}}},this.RequestHistoryPageData=function(){var t=this;if(this.NetworkFilter){var e=this.SourceData.Data[0],a={Name:"KLineChartContainer::RequestHistoryPageData",Explain:"日K数据分页",Request:{Url:"none",Type:"POST",Data:{symbol:t.Symbol,index:t.Page.Day.Index,field:["name","symbol","yclose","open","price","high","low","vol"],firstDate:e.Date,first:{date:e.Date}}},Page:t.Page.Day,Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.RecvHistoryPageData(e);var a=t.Page.Day;1==a.Enable&&0==a.Finish?t.RequestHistoryPageData():t.AutoUpdate()}),1==a.PreventDefault)return}setTimeout(function(){var e=t.Page.Day;e.Finish=!0;var a={data:[[20150218,12.54,12.5,12.74,11.95,12.27,117632441,1459671045],[20150219,12.27,12.1,12.23,11.9,12.23,95889423,1157078548],[20150220,12.23,12.17,12.17,11.9,12.05,67763439,815652761]],symbol:t.Symbol,name:t.Name};t.RecvHistoryPageData(a),1==e.Enable&&0==e.Finish?t.RequestHistoryPageData():t.AutoUpdate()},500)},this.RecvHistoryPageData=function(t){if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)D.Chart.Warn("[KLineChartContainer::RecvHistoryPageData] recv data symbol not match. HQChart["+this.Symbol+"] , Recv["+t.symbol+"]");else{var e=la.JsonDataToHistoryData(t),a=this.GetHistoryDataCount();for(var i in e){var r=e[i];this.SourceData.Data.splice(i,0,r)}var n=new pt;if(n.Data=this.SourceData.Data,n.Period=this.Period,n.Right=this.Right,n.DataType=this.SourceData.DataType,n.Right>0&&n.Period<=3){var o=n.GetRightData(n.Right,{AlgorithmType:this.RightFormula});n.Data=o}if(pt.IsDayPeriod(n.Period,!1)||pt.IsMinutePeriod(n.Period,!1)){var s=n.GetPeriodData(n.Period);n.Data=s}this.UpdateMainData(n,a),this.BindInstructionIndexData(n);for(i=0;i<this.Frame.SubFrame.length;++i)this.BindIndexData(i,n);var h=this.Page.Day;++h.Index,1==h.Enable&&1==h.Finish&&(this.RequestFlowCapitalData(),this.RequestOverlayHistoryData(),this.CreateChartDrawPictureByStorage()),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.ReqeustHistoryMinuteData=function(){var t=this;if(this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.FlowCapitalReady=!1,this.ResetPage(),this.ResetDragDownload(),this.Draw(),this.NetworkFilter){var e=this.GetKLineDrawType(),a={Name:"KLineChartContainer::ReqeustHistoryMinuteData",Explain:"1分钟K线数据",Request:{Url:t.MinuteKLineApiUrl,Type:"POST",Data:{symbol:t.Symbol,count:t.MaxRequestMinuteDayCount,field:["name","symbol","yclose","open","price","high","low","vol"],period:this.Period,right:this.Right,klineDrawType:e}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMinuteHistoryData(e);var a=t.Page.Minute;1==a.Enable&&0==a.Finish?t.ReqeustHistoryMinutePageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::ReqeustHistoryMinuteData"),t.AutoUpdate())}),1==a.PreventDefault)return}v.HttpRequest({url:this.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMinuteHistoryData(e);var a=t.Page.Minute;1==a.Enable&&0==a.Finish?t.ReqeustHistoryMinutePageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::ReqeustHistoryMinuteData"),t.AutoUpdate())}})},this.RecvMinuteHistoryData=function(t){if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)D.Chart.Warn("[KLineChartContainer::RecvMinuteHistoryData] recv data symbol not match. HQChart["+this.Symbol+"] , Recv["+t.symbol+"]");else{var e=la.JsonDataToMinuteHistoryData(t),a=new pt;a.Data=e,a.DataType=1,a.Symbol=t.symbol,this.SourceData=a,this.BeforeBindMainData&&this.BeforeBindMainData("RecvMinuteHistoryData");var i=new pt;if(i.Data=e,i.Right=this.Right,i.Period=this.Period,i.DataType=1,i.Symbol=t.symbol,i.Right>0&&!this.IsApiPeriod&&this.RightFormula>=1){var r=i.GetRightData(i.Right,{AlgorithmType:this.RightFormula});i.Data=r}if(pt.IsMinutePeriod(i.Period,!1)&&!this.IsApiPeriod){var n=i.GetPeriodData(i.Period);i.Data=n}var o,s=this.GetKLineCalulate();if(s)i=s.RecvHistoryData(i,{Symbol:this.Symbol,Function:"RecvMinuteHistoryData"}),this.FlowCapitalReady=!0;for(var h in this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(i,this.PageSize),this.AfterBindMainData&&this.AfterBindMainData("RecvMinuteHistoryData"),this.Frame.SetSizeChage(!0),this.Frame.SubFrame[0]&&(o=this.Frame.SubFrame[0].Frame),o&&o.YSplitOperator&&(o.YSplitOperator.Symbol=this.Symbol,o.YSplitOperator.Data=this.ChartPaint[0].Data,o.YSplitOperator.Period=this.Period),this.OverlayChartPaint){this.OverlayChartPaint[h].Data=null}var l=this.Page.Minute;(0==l.Enable||1==l.Enable&&1==l.Finish)&&(this.ReqeustKLineInfoData({FunctionName:"RecvMinuteHistoryData"}),this.RequestFlowCapitalData(),this.RequestOverlayHistoryMinuteData(),this.CreateChartDrawPictureByStorage()),l.Enable&&++l.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(2),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.BindInstructionIndexData(i);for(h=0;h<this.Frame.SubFrame.length;++h)this.BindIndexData(h,i);if(this.BindAllOverlayIndexData(i),this.mapEvent.has(w.RECV_HISTROY_DATA)){var u=this.mapEvent.get(w.RECV_HISTROY_DATA);t={HistoryData:i,Stock:{Symbol:this.Symbol,Name:this.Name}};u.Callback(u,t,this)}}},this.ReqeustHistoryMinutePageData=function(){var t=this;if(this.NetworkFilter){var e=this.SourceData.Data[0],a={Name:"KLineChartContainer::RecvHistoryMinutePageData",Explain:"1分钟K线数据分页",Request:{Url:"none",Type:"POST",Data:{symbol:t.Symbol,index:t.Page.Minute.Index,field:["name","symbol","yclose","open","price","high","low","vol"],firstDate:e.Date,first:{date:e.Date,time:e.Time}}},Page:t.Page.Minute,Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.RecvHistoryMinutePageData(e);var a=t.Page.Minute;1==a.Enable&&0==a.Finish?t.ReqeustHistoryMinutePageData():t.AutoUpdate()}),1==a.PreventDefault)return}setTimeout(function(){var e=t.Page.Minute;e.Finish=!0;t.RecvHistoryMinutePageData({data:[[20190906,14.58,14.71,14.71,14.71,14.71,1096425,16128411,925],[20190906,14.71,14.73,14.74,14.71,14.71,2154859,31731820,930],[20190906,14.71,14.71,14.71,14.68,14.69,1427516,20989208,931],[20190906,14.69,14.69,14.71,14.68,14.7,1680503,24694143,932],[20190906,14.7,14.69,14.7,14.65,14.65,1315900,19310964,933],[20190906,14.65,14.66,14.69,14.65,14.68,702955,10313842,934],[20190906,14.68,14.7,14.71,14.67,14.67,1735266,25495875,935],[20190906,14.67,14.68,14.7,14.67,14.67,739e3,10845398,936],[20190906,14.67,14.67,14.68,14.67,14.68,389800,5721266,937],[20190906,14.68,14.68,14.7,14.68,14.69,648477,9527859,938],[20190906,14.69,14.7,14.71,14.69,14.7,1128400,16589794,939],[20190906,14.7,14.7,14.71,14.69,14.71,714858,10509708,940],[20190906,14.71,14.71,14.71,14.69,14.69,401500,5900477,941],[20190906,14.69,14.69,14.71,14.69,14.69,1165684,17131034,942],[20190906,14.69,14.69,14.7,14.67,14.67,498516,7321024,943],[20190906,14.67,14.68,14.68,14.67,14.67,350126,5139012,944],[20190906,14.67,14.67,14.69,14.67,14.69,561600,8246789,945]]}),1==e.Enable&&0==e.Finish?t.ReqeustHistoryMinutePageData():t.AutoUpdate()},500)},this.RecvHistoryMinutePageData=function(t){if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)D.Chart.Warn("[KLineChartContainer::RecvHistoryMinutePageData] recv data symbol not match. HQChart["+this.Symbol+"] , Recv["+t.symbol+"]");else{var e=la.JsonDataToMinuteHistoryData(t),a=this.GetHistoryDataCount();for(var i in e){var r=e[i];this.SourceData.Data.splice(i,0,r)}var n=new pt;if(n.Data=this.SourceData.Data,n.Period=this.Period,n.Right=this.Right,n.DataType=this.SourceData.DataType,n.Right>0&&pt.IsDayPeriod(n.Period,!1)){var o=n.GetRightData(n.Right,{AlgorithmType:this.RightFormula});n.Data=o}if(pt.IsDayPeriod(n.Period,!1)||pt.IsMinutePeriod(n.Period,!1)){var s=n.GetPeriodData(n.Period);n.Data=s}this.UpdateMainData(n,a),this.BindInstructionIndexData(n);for(i=0;i<this.Frame.SubFrame.length;++i)this.BindIndexData(i,n);var h=this.Page.Minute;(0==h.Enable||1==h.Enable&&1==h.Finish)&&(this.RequestFlowCapitalData(),this.CreateChartDrawPictureByStorage()),h.Enable&&++h.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.RequestRealtimeData=function(){var t=this,e=[t.Symbol];for(var a in this.OverlayChartPaint){var i=this.OverlayChartPaint[a];i.Symbol&&(i.MainData&&i.Status==Lt.STATUS_FINISHED_ID&&e.push(i.Symbol))}if(this.NetworkFilter){var r=this.GetKLineDrawType(),n={Name:"KLineChartContainer::RequestRealtimeData",Explain:"当天最新日线数据",Request:{Url:t.RealtimeApiUrl,Data:{symbol:e,field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time"],period:this.Period,right:this.Right,klineDrawType:r},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(e){t.RecvRealtimeData(e),t.AutoUpdate()}),1==n.PreventDefault)return}v.HttpRequest({url:this.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time"],symbol:e,start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.RecvRealtimeData(e),t.AutoUpdate()}})},this.RecvRealtimeData=function(t){if(1!=this.IsOnTouch){var e=la.JsonDataToRealtimeData(t,this.Symbol);if(e){var a=this.SourceData.Data[this.SourceData.Data.length-1],i=this.GetHistoryDataCount();if(0==this.SourceData.Data.length){var r=new st;st.CopyTo(r,e),this.SourceData.Data.push(r)}else if(a.Date==e.Date)D.Chart.Log("[KLineChartContainer::RecvRealtimeData] update kline by realtime data",e),st.CopyTo(a,e);else if(a.Date<e.Date){D.Chart.Log("[KLineChartContainer::RecvRealtimeData] insert kline by realtime data",e);r=new st;st.CopyTo(r,e),!Te.IsNumber(r.YClose)&&this.SourceData.Data.length>0&&(r.YClose=this.SourceData.Data[this.SourceData.Data.length-1].YClose),this.SourceData.Data.push(r)}else{for(var n=!1,o=this.SourceData.Data,s=o.length-1;s>=0;--s){var h=o[s];if(h.Date==e.Date){st.CopyTo(h,e),n=!0;break}}if(!n)return}var l=new pt;if(l.Data=this.SourceData.Data,l.Period=this.Period,l.Right=this.Right,l.DataType=this.SourceData.DataType,l.Symbol=this.Symbol,l.Right>0&&pt.IsDayPeriod(l.Period,!0)&&Ea.IsSHSZStockA(this.Symbol)&&!this.IsApiPeriod){var u=l.GetRightData(l.Right,{AlgorithmType:this.RightFormula});l.Data=u}if(!this.IsApiPeriod&&(pt.IsDayPeriod(l.Period,!1)||pt.IsMinutePeriod(l.Period,!1))){var c=l.GetPeriodData(l.Period);l.Data=c}var f=this.GetKLineCalulate();if(f)l=f.RecvHistoryData(l,{Symbol:this.Symbol,Function:"RecvRealtimeData"}),this.FlowCapitalReady=!0;this.UpdateMainData(l,i),this.UpdateOverlayRealtimeData(t),this.BindInstructionIndexData(l);for(s=0;s<this.Frame.SubFrame.length;++s)this.BindIndexData(s,l);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(1),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.SendKLineUpdateEvent(l),this.BindAllOverlayIndexData(l)}}},this.UpdateOverlayRealtimeData=function(t){if(Te.IsNonEmptyArray(this.OverlayChartPaint))for(var e=0;e<this.OverlayChartPaint.length;++e){var a=this.OverlayChartPaint[e];if(a.Symbol&&(a.MainData&&a.Status==Lt.STATUS_FINISHED_ID)){var i=la.JsonDataToRealtimeData(t,a.Symbol);if(i){var r=a.SourceData,n=r.Data[r.Data.length-1];if(n.Date==i.Date)D.Chart.Log("[KLineChartContainer::UpdateOverlayRealtimeData] update kline by minute data",i),n.Close=i.Close,n.High=i.High,n.Low=i.Low,n.Vol=i.Vol,n.Amount=i.Amount;else{if(!(a.Date<i.Date))continue;D.Chart.Log("[KLineChartContainer::UpdateOverlayRealtimeData] insert kline by minute data",i);var o=new st;o.YClose=i.YClose,o.Open=i.Open,o.Close=i.Close,o.High=i.High,o.Low=i.Low,o.Vol=i.Vol,o.Amount=i.Amount,o.Date=i.Date,r.Data.push(o)}var s=new pt;if(s.Data=r.Data,s.Period=this.Period,s.Right=this.Right,s.DataType=0,s.Right>0&&Ea.IsSHSZStockA(t.symbol)&&!this.IsApiPeriod){var h=s.GetRightData(s.Right,{AlgorithmType:this.RightFormula});s.Data=h}var l=this.SourceData.GetOverlayData(s.Data,this.IsApiPeriod);if(s.Data=l,pt.IsDayPeriod(s.Period,!1)&&!this.IsApiPeriod){var u=s.GetPeriodData(s.Period);s.Data=u}a.Data=s}}}},this.RequestMinuteRealtimeData=function(){var t=this,e=[t.Symbol];for(var a in this.OverlayChartPaint){var i=this.OverlayChartPaint[a];i.Symbol&&(i.MainData&&i.Status==Lt.STATUS_FINISHED_ID&&e.push(i.Symbol))}if(this.NetworkFilter){var r=this.GetKLineDrawType(),n={Name:"KLineChartContainer::RequestMinuteRealtimeData",Explain:"当天1分钟K线数据",Request:{Url:t.RealtimeApiUrl,Data:{symbol:e,field:["name","symbol","price","yclose","minutecount","minute","date","time"],period:this.Period,right:this.Right,klineDrawType:r},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(e){t.RecvMinuteRealtimeData(e),t.AutoUpdate()}),1==n.PreventDefault)return}v.HttpRequest({url:this.RealtimeApiUrl,data:{field:["name","symbol","price","yclose","minutecount","minute","date","time"],symbol:e,start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMinuteRealtimeData(e),t.AutoUpdate()}})},this.SetSourceDatatLimit=function(t){for(var e in this.SourceDataLimit=new C.default,t){var a=t[e];this.SourceDataLimit.set(a.Period,a.MaxCount),D.Chart.Log("[KLineChartContainer::SetSourceDatatLimit] Period="+a.Period+", MaxCount="+a.MaxCount)}},this.ReduceSourceData=function(){if(this.SourceDataLimit&&this.SourceDataLimit.has(this.Period)){var t=this.SourceDataLimit.get(this.Period),e=null;if(this.Frame.Data?this.Frame.SubFrame&&this.Frame.SubFrame[0]&&(e=this.Frame.SubFrame[0].Frame.Data):e=this.Frame.Data,e&&!(t<50)){for(var a=e.DataOffset,i=0;this.SourceData.Data.length>t;)this.SourceData.Data.shift(),--a,++i;i>0&&(a<0&&(a=0),e.DataOffset=a,D.Chart.Log("[KLineChartContainer::ReduceSourceData] remove data "+i+", dataOffset="+a))}}},this.RecvMinuteRealtimeDataV2=function(t){if(1!=this.IsOnTouch)if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)D.Chart.Warn("[KLineChartContainer::RecvMinuteRealtimeDataV2] recv data symbol not match. HQChart["+this.Symbol+"] , Recv["+t.symbol+"]");else{var e=la.JsonDataToMinuteHistoryData(t);if(e&&!(e.length<=0)){this.IsApiPeriod&&this.ReduceSourceData();var a=this.GetHistoryDataCount();if(this.SourceData&&this.SourceData.MergeMinuteData(e)){D.Chart.Log("[KLineChartContainer::RecvMinuteRealtimeDataV2] update kline by 1 minute data ["+a+"->"+this.SourceData.Data.length+"]");var i=new pt;if(i.Data=this.SourceData.Data,i.Period=this.Period,i.Right=this.Right,i.DataType=this.SourceData.DataType,i.Symbol=this.Symbol,i.Right>0&&!this.IsApiPeriod&&this.RightFormula>=1){var r=i.GetRightData(i.Right,{AlgorithmType:this.RightFormula});i.Data=r}if((pt.IsDayPeriod(i.Period,!1)||pt.IsMinutePeriod(i.Period,!1))&&!this.IsApiPeriod){var n=i.GetPeriodData(i.Period);i.Data=n}var o=this.GetKLineCalulate();if(o)i=o.RecvHistoryData(i,{Symbol:this.Symbol,Function:"RecvMinuteRealtimeDataV2"}),this.FlowCapitalReady=!0;this.UpdateMainData(i,a),this.BindInstructionIndexData(i);for(var s=0;s<this.Frame.SubFrame.length;++s)this.BindIndexData(s,i);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(1),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.SendKLineUpdateEvent(i),this.BindAllOverlayIndexData(i)}}}},this.RecvMinuteRealtimeData=function(t){if(1!=this.IsOnTouch)if(2!=t.ver){var e=la.JsonDataToMinuteRealtimeData(t,this.Symbol);if(e){this.IsApiPeriod&&this.ReduceSourceData();var a=this.GetHistoryDataCount(),i=this.SourceData.Data.length;if(this.SourceData.MergeMinuteData(e)){D.Chart.Log("[KLineChartContainer::RecvMinuteRealtimeData] update kline by 1 minute data ["+i+"->"+this.SourceData.Data.length+"]");var r=new pt;if(r.Data=this.SourceData.Data,r.Period=this.Period,r.Right=this.Right,r.DataType=this.SourceData.DataType,r.Symbol=this.Symbol,r.Right>0&&!this.IsApiPeriod&&this.RightFormula>=1){var n=r.GetRightData(r.Right,{AlgorithmType:this.RightFormula});r.Data=n}if((pt.IsDayPeriod(r.Period,!1)||pt.IsMinutePeriod(r.Period,!1))&&!this.IsApiPeriod){var o=r.GetPeriodData(r.Period);r.Data=o}var s=this.GetKLineCalulate();if(s)r=s.RecvHistoryData(r,{Symbol:this.Symbol,Function:"RecvMinuteRealtimeData"}),this.FlowCapitalReady=!0;this.UpdateMainData(r,a),this.UpdateOverlayMinuteRealtimeData(t),this.BindInstructionIndexData(r);for(var h=0;h<this.Frame.SubFrame.length;++h)this.BindIndexData(h,r);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(1),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.SendKLineUpdateEvent(r),this.BindAllOverlayIndexData(r)}}}else this.RecvMinuteRealtimeDataV2(t)},this.UpdateOverlayMinuteRealtimeData=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol&&(a.MainData&&a.Status==Lt.STATUS_FINISHED_ID)){if(2==t.ver)var i=la.JsonDataToMinuteRealtimeDataV2(t,a.Symbol);else i=la.JsonDataToMinuteRealtimeData(t,a.Symbol);if(i){var r=a.SourceData;if(!r.MergeMinuteData(i))return;var n=new pt;n.Data=r.Data,n.Period=this.Period,n.Right=this.Right,n.DataType=0;var o=this.SourceData.GetOverlayMinuteData(n.Data,this.IsApiPeriod);if(n.Data=o,pt.IsMinutePeriod(n.Period,!1)&&!this.IsApiPeriod){var s=n.GetPeriodData(n.Period);n.Data=s}a.Data=n}}}},this.GetHistoryDataCount=function(){var t=null;return this.Frame.Data?this.Frame.SubFrame&&this.Frame.SubFrame[0]&&(t=this.Frame.SubFrame[0].Frame.Data):t=this.Frame.Data,t?t.Data.length:-1},this.GetRequestDataCount=function(){var t={MaxRequestDataCount:this.MaxRequestDataCount,MaxRequestMinuteDayCount:this.MaxRequestMinuteDayCount};if(!this.SourceData||!this.SourceData.Data||this.SourceData.Data.length<=0)return t;if(pt.IsDayPeriod(this.Period,!0))(a=this.SourceData.Data.length)>t.MaxRequestDataCount&&(t.MaxRequestDataCount=a);else if(pt.IsMinutePeriod(this.Period,!0)){var e,a=0;for(var i in this.SourceData.Data){var r=this.SourceData.Data[i];r.Date!=e&&++a,e=r.Date}a>t.MaxRequestMinuteDayCount&&(t.MaxRequestMinuteDayCount=a)}return t},this.RequestTickData=function(){var t=this;this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),t.ChartSplashPaint.EnableSplash(!0),t.Draw();var e=ia.CacheDomain+"/cache/dealday/today/"+t.Symbol+".json";if(this.NetworkFilter){var a={Name:"KLineChartContainer::RequestTickData",Explain:"当天分笔数据",Request:{Url:e,Data:{symbol:t.Symbol},Type:"GET"},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvTickData(e),t.AutoUpdate()}),1==a.PreventDefault)return}v.HttpRequest({url:e,data:{symbol:t.Symbol},type:"get",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvTickData(e),t.AutoUpdate(1)},error:function(e,a){t.ChartSplashPaint.EnableSplash(!1),t.AutoUpdate()}})},this.RecvTickData=function(t){if(2==t.ver)var e=la.JsonDataToTickDataV2(t);else e=la.JsonDataToTickData(t);var a=new pt;a.Data=e,a.DataType=2,this.SourceData=a,this.BeforeBindMainData&&this.BeforeBindMainData("RecvTickData");var i,r=new pt;r.Data=e,r.Right=this.Right,r.Period=this.Period,r.DataType=2,this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(r,this.PageSize),this.AfterBindMainData&&this.AfterBindMainData("RecvTickData"),this.BindInstructionIndexData(r);for(var n=0;n<this.Frame.SubFrame.length;++n)0==n&&(i=this.Frame.SubFrame[n].Frame),this.BindIndexData(n,r);if(i&&i.YSplitOperator&&(i.YSplitOperator.Symbol=this.Symbol,i.YSplitOperator.Data=this.ChartPaint[0].Data,i.YSplitOperator.Period=this.Period,i.YSplitOperator.KLineChart=this.ChartPaint[0]),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex(),this.BindAllOverlayIndexData(r),this.mapEvent.has(w.RECV_HISTROY_DATA)){var o=this.mapEvent.get(w.RECV_HISTROY_DATA);t={HistoryData:r,Stock:{Symbol:this.Symbol,Name:this.Name}};o.Callback(o,t,this)}},this.RequestTickRealtimeData=function(){var t=this,e=0;if(this.SourceData&&this.SourceData.Data&&(e=this.SourceData.Data.length),this.NetworkFilter){var a={Name:"KLineChartContainer::RequestTickRealtimeData",Explain:"当天最新分笔数据",Request:{Url:t.TickApiUrl,Data:{symbol:t.Symbol,start:e,end:e+1e3},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvTickRealtimeData(e),t.AutoUpdate()}),1==a.PreventDefault)return}v.HttpRequest({url:t.TickApiUrl,data:{symbol:t.Symbol,start:e-10,end:e+1e3},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvTickRealtimeData(e),t.AutoUpdate()}})},this.RecvTickRealtimeData=function(t){if(2==t.ver)var e=la.JsonDataToTickDataV2(t);else e=la.JsonDataToTickData(t);if(e&&!(e.length<=0)){var a=!1;1==t.redraw&&(a=!0);var i=this.SourceData.Data,r=this.SourceData.Data.length,n=0;i.length>0&&(n=i[i.length-1].Time);var o=0;for(var s in e){var h=e[s];h.Time<=n||(i.push(h),++o)}if(!(o<=0&&0==a)){var l=new pt;l.Data=i,l.Right=this.Right,l.Period=this.Period,l.DataType=2,this.Symbol=t.symbol,this.Name=t.name,this.UpdateMainData(l,r),this.BindInstructionIndexData(l);for(s=0;s<this.Frame.SubFrame.length;++s)this.BindIndexData(s,l);this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex(),this.BindAllOverlayIndexData(l)}}},this.ClearIndexPaint=function(){if(this.Frame&&this.Frame.SubFrame)for(var t=0;t<this.Frame.SubFrame.length;++t){this.DeleteIndexPaint(t,!0);var e=this.Frame.SubFrame[t];if(Te.IsNonEmptyArray(e.OverlayIndex))for(var a=0;a<e.OverlayIndex.length;++a){for(var i=e.OverlayIndex[a],r=0;r<i.ChartPaint.length;++r){var n=i.ChartPaint[r];n&&n.OnDestroy&&n.OnDestroy()}i.ChartPaint=[]}}for(t=1;t<this.TitlePaint.length;++t){(e=this.TitlePaint[t]).OverlayIndex=new C.default}},this.ChangePeriod=function(t,e){var a={Period:this.Period,Right:this.Right,KLineDrawType:this.KLineDrawType},i=!1,r=!1,n=null;if(e&&(e.KLine&&(Te.IsNumber(e.KLine.DrawType)&&(i=!0),Te.IsNumber(e.KLine.Right)&&(n=e.KLine.Right)),1==e.Reload&&(r=!0)),this.Period!=t||0!=r){i&&this.ChangeKLineDrawType(e.KLine.DrawType,!1);var o=!0;if(this.SourceData){o=!1;if(t>mt&&t<=Dt)0!=this.SourceData.DataType&&(o=!0);else if(t>vt&&t<=gt||t>St&&t<=Tt)1!=this.SourceData.DataType?o=!0:pt.IsSecondPeriod(t)&&(o=!0);else switch(t){case 0:case 1:case 2:case 3:case 9:case 21:0!=this.SourceData.DataType&&(o=!0);break;case 4:case 5:case 6:case 7:case 8:case 11:case 12:1!=this.SourceData.DataType&&(o=!0);break;case 10:2!=this.SourceData.DataType&&(o=!0)}}this.Period=t,null!=n&&(this.Right=n),this.ReloadChartDrawPicture(),this.ClearRectSelect(!0),this.Frame.ClearUpDonwFrameYData(),this.ClearCustomKLine();var s=this.GetKLineDrawType();10!=s&&11!=s&&12!=s||(o=!0);var h=this.GetEventCallback(w.ON_CHANGE_KLINE_PERIOD);if(h&&h.Callback){var l={IsApiPeriod:this.IsApiPeriod,Old:a,Now:{Period:this.Period,Right:this.Right,KLineDrawType:this.KLineDrawType},IsDataTypeChange:o};h.Callback(h,l,this),o=l.IsDataTypeChange}0!=o||this.IsApiPeriod?(this.ClearIndexPaint(),pt.IsDayPeriod(this.Period,!0)?(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangePeriod"),this.ResetScrollBar(),this.ResetOverlaySymbolStatus(),this.RequestHistoryData()):pt.IsMinutePeriod(this.Period,!0)||pt.IsSecondPeriod(this.Period)?(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangePeriod"),this.ResetScrollBar(),this.ResetOverlaySymbolStatus(),this.ReqeustHistoryMinuteData()):pt.IsTickPeriod(this.Period)&&(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangePeriod"),this.ResetScrollBar(),this.RequestTickData())):this.Update({UpdateCursorIndexType:2})}else i&&this.ChangeKLineDrawType(e.KLine.DrawType)},this.ChangeRight=function(t){if(Ea.IsEnableRight(this.Period,this.Symbol,this.RightFormula)){var e=this.Symbol.toUpperCase();Ea.IsBIT(e)||t<0||t>2||this.Right!=t&&(this.Right=t,this.IsApiPeriod?pt.IsDayPeriod(this.Period,!0)?(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeRight"),this.ClearIndexPaint(),this.ResetOverlaySymbolStatus(),this.ResetScrollBar(),this.RequestHistoryData()):(pt.IsMinutePeriod(this.Period,!0)||pt.IsSecondPeriod(this.Period))&&(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeRight"),this.ClearIndexPaint(),this.ResetOverlaySymbolStatus(),this.ResetScrollBar(),this.ReqeustHistoryMinuteData()):this.Update())}},this.SetFirstShowDate=function(t){if(t&&t.Date){var e={ID:F.OP_GOTO,Date:t.Date};Te.IsNumber(t.Time)&&(e.Time=t.Time),Te.IsNumber(t.PageSize)&&(e.PageSize=t.PageSize),this.ChartOperator(e)}},this.DeleteIndexPaint=function(t,e){var a=new Array;for(var i in this.ChartPaint){var r=this.ChartPaint[i];0==i||r.ChartFrame!=this.Frame.SubFrame[t].Frame?a.push(r):!0===e&&r&&r.OnDestroy&&r.OnDestroy()}var n=this.Frame.SubFrame[t].Frame;n.YSpecificMaxMin=null,n.IsLocked=!1,n.YSplitScale=null,n.YSplitOperator.SplitType=n.YSplitOperator.DefaultSplitType,this.ChartPaint=a;var o=t+1;this.TitlePaint[o].Data=[],this.TitlePaint[o].Title=null},this.ShowKLine=function(t){this.ChartPaint.length<=0||!this.ChartPaint[0]||(this.ChartPaint[0].IsShow=t)},this.SetInstructionData=function(t,e){if(!(this.ChartPaint.length<=0)&&this.ChartPaint[0]){var a=this.TitlePaint[1];2==t?(this.ChartPaint[0].ColorData=e.Data,a&&(a.ColorIndex={Name:e.Name,Param:e.Param})):1==t&&(this.ChartPaint[0].TradeData={Sell:e.Sell,Buy:e.Buy,Name:e.Name,Param:e.Param},a&&(a.TradeIndex={Name:e.Name,Param:e.Param}))}},this.ChangeInstructionIndex=function(t,e){var a=(new T).Get(t);a&&(1!=a.InstructionType&&2!=a.InstructionType||(e&&e.Args&&(a.Args=e.Args),a.ID=t,this.ChangeInstructionScriptIndex(a)))},this.ChangeInstructionScriptIndex=function(t){if(1==t.InstructionType)this.TradeIndex=new si(t.Name,t.Script,t.Args,t);else{if(2!=t.InstructionType)return;this.ColorIndex=new si(t.Name,t.Script,t.Args,t)}var e=this.ChartPaint[0].Data;this.BindInstructionIndexData(e),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.CancelInstructionIndex=function(){if(!(this.ChartPaint.length<=0)&&this.ChartPaint[0]){this.ColorIndex=null,this.TradeIndex=null,this.ChartPaint[0].ColorData=null,this.ChartPaint[0].TradeData=null;var t=this.TitlePaint[1];t&&(t.TradeIndex=null,t.ColorIndex=null),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.SetFrameToolbar=function(t,e){if(e&&this.Frame.SubFrame[t]&&this.Frame.SubFrame[t].Frame){var a=this.Frame.SubFrame[t].Frame,i=!1;Te.IsBool(e.Modify)&&(a.ModifyIndex=e.Modify,i=!0),Te.IsBool(e.Change)&&(a.ChangeIndex=e.Change,i=!0),Te.IsBool(e.Close)&&(a.CloseIndex=e.Close,i=!0),Te.IsBool(e.Overlay)&&(a.OverlayIndex=e.Overlay,i=!0),i&&(a.SizeChange=!0,a.ToolbarRect=null,a.DrawToolbar())}},this.ChangeScriptIndex=function(t,e,a){this.DeleteIndexPaint(t,!0),this.WindowIndex[t]=new si(e.Name,e.Script,e.Args,e),a&&a.Window&&this.SetFrameToolbar(t,a.Window),this.Frame.ClearUpDonwFrameYData({Index:t});var i=this.ChartPaint[0].Data;this.BindIndexData(t,i),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.OnKLinePageChange=function(t){if(this.ChartPaint[0]){for(var e=this.ChartPaint[0].Data,a=0;a<this.WindowIndex.length;++a){(i=this.WindowIndex[a])&&(!0===i.IsUsePageData&&this.BindIndexData(a,e,{Type:1}))}for(a=0;a<this.Frame.SubFrame.length;++a)for(var i=this.Frame.SubFrame[a],r=0;r<i.OverlayIndex.length;++r){var n=i.OverlayIndex[r];n&&n.Script&&1==n.Script.IsUsePageData&&this.BindOverlayIndexData(n,a,e)}}},this.ChangeAPIIndex=function(t,e){this.DeleteIndexPaint(t,!0);var a=e.API;this.WindowIndex[t]=new li(a.Name,a.Script,a.Args,e),e&&e.Window&&this.SetFrameToolbar(t,e.Window),this.Frame.ClearUpDonwFrameYData({Index:t});var i=this.ChartPaint[0].Data;this.BindIndexData(t,i),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangeIndex=function(t,e,a){if(a&&a.API)return this.ChangeAPIIndex(t,a);var i=oa.Get(e);if(!i){var r=(new T).Get(e);if(!r)return;r.IsMainIndex?t=0:0==t&&(t=1);var n=r;return a&&(a.FloatPrecision>=0&&(n.FloatPrecision=a.FloatPrecision),a.StringFormat>0&&(n.StringFormat=a.StringFormat),a.Args&&(n.Args=a.Args),a.TitleFont&&(n.TitleFont=a.TitleFont),a.IsShortTitle&&(n.IsShortTitle=a.IsShortTitle),a.Lock&&(n.Lock=a.Lock)),this.ChangeScriptIndex(t,n,a)}i.IsMainIndex?t>0&&(t=0):0==t&&(t=1);var o=new Array;for(var s in this.ChartPaint){var h=this.ChartPaint[s];0!=s&&h.ChartFrame==this.Frame.SubFrame[t].Frame||o.push(h)}this.Frame.SubFrame[t].Frame.YSpecificMaxMin=null,this.Frame.SubFrame[t].Frame.IsLocked=!1,this.Frame.SubFrame[t].Frame.YSplitScale=null,this.ChartPaint=o;var l=t+1;this.TitlePaint[l].Data=[],this.TitlePaint[l].Title=null,this.WindowIndex[t]=i.Create(a),this.CreateWindowIndex(t);var u=this.ChartPaint[0].Data;this.BindIndexData(t,u),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangePyScriptIndex=function(t,e){this.DeleteIndexPaint(t),this.WindowIndex[t]=new Da(e.Name,e.Script,e.Args,e);var a=this.ChartPaint[0].Data;this.BindIndexData(t,a),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.AddOverlayIndex=function(t){var e=this.CreateOverlayWindowsIndex(t);if(e){var a=this.ChartPaint[0].Data;this.BindOverlayIndexData(e,t.WindowIndex,a),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.CreateOverlayWindowsIndex=function(t){var e=this,a=t.IndexName,i=t.WindowIndex,r=null,n=null,o=null;if(t.API)r=t.API;else if(t.Script)n={Script:t.Script,ID:t.indexName,Name:t.indexName},t.Name&&(n.Name=t.Name);else{if(!(n=(new T).Get(a))&&!(o=oa.Get(a)))return console.warn("[KLineChartContainer::CreateOverlayIndex] can not find index["+a+"]"),null}var s=this.Frame.SubFrame[i];s.Interval=this.OverlayIndexFrameWidth;var h=new rt;t.Identify&&(h.Identify=t.Identify);var l="KLineChartHScreenContainer"===this.ClassName?new at:new tt;if(l.Canvas=this.Canvas,l.MainFrame=s.Frame,l.ChartBorder=s.Frame.ChartBorder,l.GetEventCallback=function(t){return e.GetEventCallback(t)},!0===t.ShowRightText?l.IsShow=!0:!1===t.ShowRightText&&(l.IsShow=!1),Te.IsBool(t.ShowToolbar)&&(l.IsShowToolbar=t.ShowToolbar),Te.IsBool(t.IsShareY)&&(l.IsShareY=t.IsShareY),Te.IsBool(t.IsShowIndexTitle)&&(l.IsShowIndexTitle=t.IsShowIndexTitle),Te.IsBool(t.IsCalculateYMaxMin)&&(l.IsCalculateYMaxMin=t.IsCalculateYMaxMin),l.YSplitOperator=new ye,l.YSplitOperator.LanguageID=this.LanguageID,l.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),l.YSplitOperator.Frame=l,l.YSplitOperator.ChartBorder=l.ChartBorder,l.YSplitOperator.SplitCount=s.Frame.YSplitOperator.SplitCount,l.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},l.YSplitOperator.GetKLineChartCallback=function(){return e.GetKLineChart()},l.YSplitOperator.OverlayIndex=h,l.YSplitOperator.HQChart=this,l.YSplitOperator.OverlayIdentify=h.Identify,t.Frame){var u=t.Frame;u.Custom&&(l.YSplitOperator.Custom=u.Custom),Te.IsBool(u.IsYDrawMainFrame)&&(l.IsYDrawMainFrame=u.IsYDrawMainFrame),Te.IsBool(u.IsShowToolbar)&&(l.IsShowToolbar=u.IsShowToolbar)}if(h.Frame=l,r){var c=new li(r.Name,r.Script,r.Args,t,!0);c.OverlayIndex={IsOverlay:!0,Identify:h.Identify,WindowIndex:i,Frame:h},h.Script=c}else if(n){var f=n.Args;t.Args&&(f=t.Args);var d={Name:n.Name,Script:n.Script,Args:f,ID:a,KLineType:n.KLineType,YSpecificMaxMin:n.YSpecificMaxMin,YSplitScale:n.YSplitScale,FloatPrecision:n.FloatPrecision,Condition:n.Condition,OutName:n.OutName};Te.IsNumber(t.FloatPrecision)&&(d.FloatPrecision=t.FloatPrecision),(C=new hi(d.Name,d.Script,d.Args,d)).OverlayIndex={IsOverlay:!0,Identify:h.Identify,WindowIndex:i,Frame:h},h.Script=C}else{var C;(C=o.Create()).OverlayIndex={IsOverlay:!0,Identify:h.Identify,WindowIndex:i,Frame:h},C.Create(this,i),h.Script=C}return s.OverlayIndex.push(h),h},this.DeleteOverlayWindowsIndex=function(t){this.DeleteOverlayIndex(t,null)&&(this.Frame.ResetXYSplit(!0),this.Draw())},this.ChangeKLineDrawType=function(t,e,a){if(this.KLineDrawType!=t||a){var i=this.KLineDrawType;this.KLineDrawType=t;var r=new c.default([5,7,8,10,11,12]);if(r.has(i)||r.has(t)){var n=this.ChartPaint[0];return n&&(n.DrawType=this.KLineDrawType),this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeKLineDrawType"),void(pt.IsDayPeriod(this.Period,!0)?(this.ResetOverlaySymbolStatus(),this.RequestHistoryData()):(pt.IsMinutePeriod(this.Period,!0)||pt.IsSecondPeriod(this.Period))&&(this.ResetOverlaySymbolStatus(),this.ReqeustHistoryMinuteData()))}for(var o=0;o<this.ChartPaint.length;++o){var s=this.ChartPaint[o];0==o?(s.DrawType=this.KLineDrawType,a&&Te.IsBool(a.IsThinAKBar)&&(s.IsThinAKBar=a.IsThinAKBar)):"ChartVolStick"==s.ClassName&&(s.KLineDrawType=this.KLineDrawType)}for(var o in this.OverlayChartPaint){(s=this.OverlayChartPaint[o]).DrawType=this.KLineDrawType}0!=e&&(this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw())}},this.ChangeCoordinateType=function(t){if((this.Frame||this.Frame.SubFrame)&&this.Frame.SubFrame.length){if(Te.IsNumber(t)){var e=t;if(2==e)this.Frame.SubFrame[0].Frame.CoordinateType=1;else if(1==e)this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=e;else if(0==e)this.Frame.SubFrame[0].Frame.CoordinateType=0,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=0;else{if(3!=e)return;this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=2}}else t.Type>=0&&t.Type<=5&&(this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=t.Type),!0===t.IsReverse?this.Frame.SubFrame[0].Frame.CoordinateType=1:0==t.IsReverse&&(this.Frame.SubFrame[0].Frame.CoordinateType=0);this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.ChangeIndexWindowCount=function(t,e){var a=this;if(!(t<=0)&&this.Frame.SubFrame.length!=t){this.Frame.RestoreIndexWindows();var i=this.Frame.SubFrame.length;if(i>t){for(var r=i-1;r>=t;--r)this.DeleteIndexPaint(r),this.Frame.SubFrame[r].Frame.ClearToolbar();this.Frame.SubFrame.splice(t,i-t),this.WindowIndex.splice(t,i-t);for(r=0;r<this.Frame.SubFrame.length;++r){var n=this.Frame.SubFrame[r].Frame;r==this.Frame.SubFrame.length-1?n.XSplitOperator.ShowText=!0:n.XSplitOperator.ShowText=!1}this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}else{var o=A();for(r=i;r<t;++r){(C=this.CreateSubFrameItem(r)).Frame.ChartBorder.TitleHeight*=o,this.Frame.SubFrame[r]=C;var s=new Xe;s.Frame=this.Frame.SubFrame[r].Frame,s.Canvas=this.Canvas,s.LanguageID=this.LanguageID,s.GetEventCallback=function(t){return a.GetEventCallback(t)},s.SelectedChart=this.SelectedChart,this.TitlePaint[r+1]=s}for(r=0;r<this.Frame.SubFrame.length;++r){n=this.Frame.SubFrame[r].Frame;r==this.Frame.SubFrame.length-1?n.XSplitOperator.ShowText=!0:n.XSplitOperator.ShowText=!1}this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw();var h=[{Index:"RSI"},{Index:"MACD"},{Index:"VOL"},{Index:"UOS"},{Index:"CHO"},{Index:"BRAR"}];e&&e.Windows.length>0&&(h=e.Windows);var l=new T;for(r=i;r<t;++r){var u=(n=h[r%h.length]).Index,c=l.Get(u),f=c.Args;n.Args&&(f=n.Args);var d={Name:c.Name,Script:c.Script,Args:f,ID:n.Index,KLineType:c.KLineType,YSpecificMaxMin:c.YSpecificMaxMin,YSplitScale:c.YSplitScale,FloatPrecision:c.FloatPrecision,Condition:c.Condition,OutName:c.OutName};this.WindowIndex[r]=new si(d.Name,d.Script,d.Args,d);var C=this.Frame.SubFrame[r];null!=n.Modify&&(this.Frame.SubFrame[r].Frame.ModifyIndex=n.Modify),null!=n.Change&&(this.Frame.SubFrame[r].Frame.ChangeIndex=n.Change),null!=n.Close&&(this.Frame.SubFrame[r].Frame.CloseIndex=n.Close),null!=n.Overlay&&(chart.Frame.SubFrame[r].Frame.OverlayIndex=n.Overlay),1==n.IsDrawTitleBG&&(this.Frame.SubFrame[r].Frame.IsDrawTitleBG=n.IsDrawTitleBG),Te.IsBool(n.IsShowNameArrow)&&(this.Frame.SubFrame[r].Frame.IsShowNameArrow=n.IsShowNameArrow),Te.IsNumber(n.TitleHeight)?this.Frame.SubFrame[r].Frame.ChartBorder.TitleHeight=n.TitleHeight:n.TitleHeight=this.Frame.SubFrame[r].Frame.ChartBorder.TitleHeight,0==n.IsShowTitleArraw&&(this.Frame.SubFrame[r].Frame.IsShowTitleArraw=!1),0==n.IsShowIndexName&&(this.Frame.SubFrame[r].Frame.IsShowIndexName=!1),0==n.IsShowOverlayIndexName&&(this.Frame.SubFrame[r].Frame.IsShowOverlayIndexName=!1),Te.IsNumber(n.IndexParamSpace)&&(this.Frame.SubFrame[r].Frame.IndexParamSpace=n.IndexParamSpace),Te.IsNumber(n.IndexTitleSpace)&&(this.Frame.SubFrame[r].Frame.IndexTitleSpace=n.IndexTitleSpace),0==n.IsShowXLine&&(this.Frame.SubFrame[r].Frame.IsShowXLine=!1),0==n.IsShowYLine&&(this.Frame.SubFrame[r].Frame.IsShowYLine=!1),Te.IsBool(n.IsShowIndexTitle)&&(this.Frame.SubFrame[r].Frame.IsShowIndexTitle=n.IsShowIndexTitle),Te.IsBool(n.IsShowLeftText)&&(C.Frame.IsShowYText[0]=n.IsShowLeftText,C.Frame.YSplitOperator.IsShowLeftText=n.IsShowLeftText),Te.IsBool(n.IsShowRightText)&&(C.Frame.IsShowYText[1]=n.IsShowRightText,C.Frame.YSplitOperator.IsShowRightText=n.IsShowRightText),n.OverlayIndexType&&(Te.IsNumber(n.OverlayIndexType.Position)&&(C.Frame.OverlayIndexType.Position=n.OverlayIndexType.Position),Te.IsNumber(n.OverlayIndexType.LineSpace)&&(C.Frame.OverlayIndexType.LineSpace=n.OverlayIndexType.LineSpace));var p=this.ChartPaint[0].Data;this.BindIndexData(r,p)}}}},this.ChangeIndexTemplate=function(t){var e=this;if(t.Windows){var a=t.Windows.length;if(!(a<=0)){var i=this.Frame.SubFrame.length,r=null,n=null;t.KLine&&(Te.IsNumber(t.KLine.Period)&&t.KLine.Period!=this.Period&&(r=t.KLine.Period),Te.IsNumber(t.KLine.Right)&&t.KLine.Right!=this.Right&&(n=t.KLine.Right));for(var o=null!=r||null!=n,s=0;s<i;++s){this.DeleteIndexPaint(s);var h=this.Frame.SubFrame[s];h.YSpecificMaxMin=null,h.IsLocked=!1,h.YSplitScale=null}if(i>a){for(s=i-1;s>=a;--s)this.Frame.SubFrame[s].Frame.ClearToolbar();this.Frame.SubFrame.splice(a,i-a),this.WindowIndex.splice(a,i-a)}else for(s=i;s<a;++s){var l=this.CreateSubFrameItem(s);this.Frame.SubFrame[s]=l;var u=new Xe;u.Frame=this.Frame.SubFrame[s].Frame,u.Canvas=this.Canvas,u.LanguageID=this.LanguageID,u.GetEventCallback=function(t){return e.GetEventCallback(t)},u.SelectedChart=this.SelectedChart,this.TitlePaint[s+1]=u}var c=new T;for(s=0;s<a;++s){var f=s,d=t.Windows[s],C=null;t.Frame&&t.Frame.length>s&&(C=t.Frame[s]);var p=f+1;if(this.TitlePaint[p].Data=[],this.TitlePaint[p].Title=null,d.Script)this.WindowIndex[s]=new si(d.Name,d.Script,d.Args,d);else if(d.API){var m=d.API;this.WindowIndex[f]=new li(m.Name,m.Script,m.Args,d)}else{var D=d.Index,v=oa.Get(D);if(v)this.WindowIndex[s]=v.Create(),this.CreateWindowIndex(f);else{var g=c.Get(D);if(g){var S=g.Args;t.Windows[s].Args&&(S=t.Windows[s].Args);var I={Name:g.Name,Script:g.Script,Args:S,ID:D,KLineType:g.KLineType,YSpecificMaxMin:g.YSpecificMaxMin,YSplitScale:g.YSplitScale,FloatPrecision:g.FloatPrecision,Condition:g.Condition,OutName:g.OutName};d.TitleFont&&(I.TitleFont=d.TitleFont),this.WindowIndex[s]=new si(I.Name,I.Script,I.Args,I)}}}this.SetSubFrameAttribute(this.Frame.SubFrame[s],d,C)}for(s=0;s<this.Frame.SubFrame.length;++s){d=this.Frame.SubFrame[s].Frame;s==this.Frame.SubFrame.length-1?d.XSplitOperator.ShowText=!0:d.XSplitOperator.ShowText=!1}if(o)this.Frame.SetSizeChage(!0),null!=r?this.ChangePeriod(r,t):null!=n&&this.ChangeRight(n);else{var y=this.ChartPaint[0].Data;for(s=0;s<a;++s)this.BindIndexData(s,y);this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}}}},this.RemoveIndexWindow=function(t,e){if(D.Chart.Log("[KLineChartContainer::RemoveIndexWindow] remove id",t),0!=t){if(this.Frame.SubFrame&&!(t>=this.Frame.SubFrame.length)){this.Frame.RestoreIndexWindows();var a=this.Frame.SubFrame[t].Frame;this.DeleteIndexPaint(t),this.Frame.SubFrame[t].Frame.ClearToolbar(),this.Frame.SubFrame.splice(t,1),this.WindowIndex.splice(t,1),this.TitlePaint.splice(t+1,1);for(var i=0;i<this.Frame.SubFrame.length;++i){var r=this.Frame.SubFrame[i].Frame;i==this.Frame.SubFrame.length-1?r.XSplitOperator.ShowText=!0:r.XSplitOperator.ShowText=!1,r.Identify=i}if(this.ChartDrawPicture.length>0){var n=[];for(var i in this.ChartDrawPicture){(r=this.ChartDrawPicture[i]).Frame!=a&&n.push(r)}this.ChartDrawPicture=n}this.Frame.SetSizeChage(!0),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw()}}else e&&e.DeleteMainIndex&&(this.DeleteIndexPaint(t),this.WindowIndex[t]=null,this.Frame.SetSizeChage(!0),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw())},this.GetIndexInfo=function(){var t=[];for(var e in this.WindowIndex){var a=this.WindowIndex[e],i={Name:a.Name};if(a.ID&&(i.ID=a.ID),a.Arguments)for(var e in i.Args=[],a.Arguments){var r=a.Arguments[e];i.Args.push({Name:r.Name,Value:r.Value})}t.push(i)}return t},this.CreateExtendChart=function(t,e){var a;switch(t){case"筹码分布":return(a=new function(){this.newMethod=Ce,this.newMethod(),delete this.newMethod,this.Name="筹码分布",this.ClassName="StockChip",this.HQChart,this.PenBorder=ia.FrameBorderPen,this.ColorProfit="rgb(255,0,0)",this.ColorNoProfit="rgb(90,141,248)",this.ColorAveragePrice="rgb(0,139,0)",this.ColorBG="rgb(190,190,190)",this.PixelRatio=A(),this.ShowType=0,this.IsDynamic=!0,this.ClientRect={},this.Font=ia.TitleFont,this.InfoColor=ia.StockChip.InfoColor,this.DayInfoColor=ia.StockChip.DayInfoColor,this.LineHeight=16,this.Left=50*this.PixelRatio,this.IsShowX=!1,this.ShowXCount=3,this.Width=150*this.PixelRatio,this.CalculateType=0,this.PriceZoom=100,this.NotSupportMessage="不支持筹码图",this.Buttons=[],this.DefaultButton=G(ia.StockChip.DefaultButton),this.LongButton=G(ia.StockChip.LongButton),this.RecentButton=G(ia.StockChip.RecentButton),this.ButtonTooltip=G(ia.Buttons.Tooltip),this.DAY_COLOR=[["rgb(255,0,0)","rgb(255,128,128)","rgb(255,0,128)","rgb(255,100,0)","rgb(192,128,0)","rgb(255,192,0)"],["rgb(120,80,225)","rgb(160,160,225)","rgb(80,80,255)","rgb(120,120,255)","rgb(32,64,192)","rgb(0,64,128)"]],this.SetOption=function(t){t&&(t.ShowType>0&&(this.ShowType=t.ShowType),t.IsShowX&&(this.IsShowX=t.IsShowX),t.ShowXCount>0&&(this.ShowXCount=t.ShowXCount),t.Width>100&&(this.Width=t.Width*A()),t.CalculateType>0&&(this.CalculateType=t.CalculateType),Te.IsNumber(t.PriceZoom)&&(this.PriceZoom=t.PriceZoom))},this.ReloadResource=function(t){this.PenBorder=ia.FrameBorderPen,this.Font=ia.TitleFont,this.InfoColor=ia.StockChip.InfoColor,this.DayInfoColor=ia.StockChip.DayInfoColor,this.DefaultButton=G(ia.StockChip.DefaultButton),this.LongButton=G(ia.StockChip.LongButton),this.RecentButton=G(ia.StockChip.RecentButton),this.ButtonTooltip=G(ia.Buttons.Tooltip)},this.Draw=function(){this.PixelRatio=A();var t=_(this.ChartBorder.GetRight()+this.Left),e=_(this.ChartBorder.GetTop()),a=_(t+this.Width-1*this.PixelRatio)-t,i=_(this.ChartBorder.GetBottom())-e;if(this.ClientRect={Left:t,Top:e,Width:a,Height:i},pt.IsTickPeriod(this.HQChart.Period)){this.Canvas.font=this.Font,this.Canvas.fillStyle=this.InfoColor;var r=t+a/2,n=e+i/2;return this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.NotSupportMessage,r,n),void this.DrawBorder()}this.CalculateChip()?(this.DrawFrame(),this.DrawAllChip(),1!=this.ShowType&&2!=this.ShowType||this.DrawDayChip(),this.CalculateCast(),this.DrawChipInfo()):D.Chart.Log("[StockChip::Draw] no data"),this.DrawBorder(),this.SizeChange=!1},this.DrawChipInfo=function(){var t=this.ClientRect.Top+this.ClientRect.Height-1,e=this.ClientRect.Left+2,a=this.ClientRect.Left+this.ClientRect.Width;this.Canvas.font=this.Font,this.Canvas.fillStyle=this.InfoColor,this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left";var i=this.LineHeight*A(),r="70%成本价 --.--";Te.IsNonEmptyArray(this.Data.Cast)&&(r="70%成本价"+this.Data.Cast[1].MinPrice.toFixed(2)+"-"+this.Data.Cast[1].MaxPrice.toFixed(2)+"集中"+this.Data.Cast[1].Rate.toFixed(2)+"%"),this.Canvas.fillText(r,e,t),t-=i,r="90%成本价 --.--",Te.IsNonEmptyArray(this.Data.Cast)&&(r="90%成本价"+this.Data.Cast[0].MinPrice.toFixed(2)+"-"+this.Data.Cast[0].MaxPrice.toFixed(2)+"集中"+this.Data.Cast[0].Rate.toFixed(2)+"%"),this.Canvas.fillText(r,e,t),t-=i,r="平均成本："+this.Data.ChipInfo.AveragePrice.toFixed(2)+"元",this.Canvas.fillText(r,e,t),t-=i,r=+this.Data.YPrice.toFixed(2)+"处获利盘："+this.Data.ChipInfo.YProfitRate.toFixed(2)+"%",this.Canvas.fillText(r,e,t),t-=i,r="获利比例：",this.Canvas.fillText(r,e,t);var n=e+(s=this.Canvas.measureText(r).width+2),o=a-5-n;if(this.Canvas.strokeStyle=this.ColorNoProfit,this.Canvas.strokeRect(n,t-i,o,i),this.Canvas.strokeStyle=this.ColorProfit,this.Canvas.strokeRect(n,t-i,o*(this.Data.ChipInfo.ProfitRate/100),i),r=this.Data.ChipInfo.ProfitRate.toFixed(2)+"%",this.Canvas.textAlign="center",this.Canvas.fillText(r,n+o/2,t),t-=i,this.Canvas.textAlign="left",r="成本分布,日期："+Te.FormatDateString(this.Data.SelectData.Date),this.Data.SelectData.Time&&(r+=" "+Te.FormatTimeString(this.Data.SelectData.Time)),this.Canvas.fillText(r,e,t),t-=i,1==this.ShowType||2==this.ShowType){a=this.ClientRect.Left+this.ClientRect.Width-1,this.Canvas.textAlign="right";var s=50;for(var h in this.Data.DayChip.sort(function(t,e){return e.Day-t.Day}),this.Data.DayChip){var l=this.Data.DayChip[h],u=0;this.Data.ChipInfo&&this.Data.ChipInfo.Vol>0&&(u=l.Vol/this.Data.ChipInfo.Vol*100),r=l.Day+"周期"+(1==this.ShowType?"前":"内")+"成本"+(Te.IsNumber(u)?u.toFixed(2)+"%":"--.--%"),0==h&&(s=this.Canvas.measureText(r).width+8),this.Canvas.fillStyle=l.Color,this.Canvas.fillRect(a-s,t-i,s,i),this.Canvas.fillStyle=this.DayInfoColor,this.Canvas.fillText(r,a,t),t-=i}}},this.DrawDayChip=function(){var t=this.HQChart.Frame.SubFrame[0].Frame;for(var e in this.Data.DayChip){var a=[],i=this.Data.DayChip[e].Chip;if(i){for(var r=0,n=0;n<i.length;++n){var o=i[n];if(o){r+=o;var s=(n+this.Data.MinPrice)/100,h=t.GetYFromData(s),l=o/this.Data.MaxVol*this.ClientRect.Width+this.ClientRect.Left;a.push({X:l,Y:h})}}this.Data.DayChip[e].Vol=r,this.DrawArea(a,this.Data.DayChip[e].Color)}}},this.DrawToolbar=function(t,e){this.Buttons=[],this.ClientRect.Left;for(var a=this.ClientRect.Left+this.ClientRect.Width,i=this.ClientRect.Top+this.ChartBorder.TitleHeight/2,r=[{ID:b.CHIP_RECENT,Style:this.RecentButton,ShowType:2},{ID:b.CHIP_LONG,Style:this.LongButton,ShowType:1},{ID:b.CHIP_DEFULT,Style:this.DefaultButton,ShowType:0}],n=0;n<r.length;++n){var o=r[n],s=o.Style.Size,h=a-s-o.Style.MerginLeft,l=s+"px "+o.Style.Family,u={Left:h,Top:i-s/2,Right:h+s+o.Style.MerginLeft,Bottom:i+s/2,Width:s+o.Style.MerginLeft,Height:s},c=o.Style.Color,f={ID:o.ID,Rect:u};this.ShowType==o.ShowType?(c=o.Style.SelectedColor,e&&t&&t.X>=u.Left&&t.X<u.Right&&t.Y>=u.Top&&t.Y<=u.Bottom&&(e.MouseOnToolbar={Rect:u,Item:f,Frame:this,Point:{X:t.X,Y:t.Y}})):t&&t.X>=u.Left&&t.X<u.Right&&t.Y>=u.Top&&t.Y<=u.Bottom&&(c=o.Style.MoveOnColor,e&&(e.MouseOnToolbar={Rect:u,Item:f,Frame:this,Point:{X:t.X,Y:t.Y}})),this.Canvas.fillStyle=c,this.Canvas.font=l,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(o.Style.Text,h,i),this.Buttons.push(f),a=h}},this.DrawToolbarTooltip=function(t){if(t){this.ClientRect.Left;var e=this.ClientRect.Left+this.ClientRect.Width,a="Toolbar-"+t.Item.ID;if(text=na.GetText(a,0),text){var i=t.Rect,r=i.Left+i.Width/2;this.Canvas.font=this.ButtonTooltip.Font,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var n=this.Canvas.measureText(text).width+8,o=this.GetFontHeight()+8,s=r-n/2,h=i.Top-o;h<0&&(h=i.Bottom+1),s+n>e&&(s=e-n-2),this.Canvas.fillStyle=this.ButtonTooltip.ColorBG,this.Canvas.fillRect(s,h,n,o),this.Canvas.fillStyle=this.ButtonTooltip.Color,this.Canvas.fillText(text,s+4,h+o/2)}}},this.PtInButtons=function(t,e){for(var a=0;a<this.Buttons.length;++a){var i=this.Buttons[a];if(i.Rect){var r=i.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.Left,r.Top,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return{ID:i.ID,Rect:r}}}return null},this.DrawAllChip=function(){for(var t=this.HQChart.Frame.SubFrame[0].Frame,e=this.Data.SelectData.Close,a=[],i=[],r=0,n=0,o=0,s=0,h=this.Data.YPrice,l=t.HorizontalMax,u=t.HorizontalMin,c=1,f=0;f<this.Data.AllChip.length;++f)(d=this.Data.AllChip[f])&&(r+=d,n+=(C=(f+this.Data.MinPrice)/this.PriceZoom)*d,C<h&&(s+=d),C<e&&(o+=d),C<=l&&C>=u&&c<d&&(c=d));for(this.Data.MaxVol=c,f=0;f<this.Data.AllChip.length;++f){var d,C;if((d=this.Data.AllChip[f])&&!((C=(f+this.Data.MinPrice)/this.PriceZoom)>l||C<u)){var p=t.GetYFromData(C),m=d/this.Data.MaxVol*this.ClientRect.Width+this.ClientRect.Left;C<e?a.push({X:m,Y:p}):i.push({X:m,Y:p})}}if(this.Data.ChipInfo={Vol:r,AveragePrice:n/r,ProfitVol:o,ProfitRate:r>0?o/r*100:0,YProfitRate:r>0?s/r*100:0},0==this.ShowType){this.DrawLines(a,this.ColorProfit),this.DrawLines(i,this.ColorNoProfit);var D=this.Data.ChipInfo.AveragePrice;D>0&&D<=l&&D>=u&&(D=D.toFixed(2),this.DrawAveragePriceLine(a,i,t.GetYFromData(D),this.ColorAveragePrice))}else this.DrawLines(a,this.ColorBG),this.DrawLines(i,this.ColorBG)},this.CalculateCast=function(){if(this.Data.ChipInfo&&this.Data.ChipInfo.Vol){for(var t=[{Start:.05,End:.95,MaxPrice:0,MinPrice:0,Rate:0},{Start:.15,End:.85,MaxPrice:0,MinPrice:0,Rate:0}],e=(this.Data.ChipInfo.AveragePrice,this.Data.ChipInfo.ProfitVol),a=0,i=0,r=0;i<this.Data.AllChip.length&&4!=r;++i){var n=this.Data.AllChip[i];if(!(n<=0)){var o=(i+this.Data.MinPrice)/this.PriceZoom,s=(a+=n)/e;for(var h in t){var l=t[h];l.MinPrice<=0&&s>l.Start&&(l.MinPrice=o,++r),l.MaxPrice<=0&&s>l.End&&(l.MaxPrice=o,++r)}}}for(var i in t){var u=t[i],c=u.MaxPrice+u.MinPrice;c&&(u.Rate=Math.abs(u.MaxPrice-u.MinPrice)/c*100)}this.Data.Cast=t}},this.DrawArea=function(t,e){if(!(t.length<=0)){for(var a in this.Canvas.fillStyle=e,this.Canvas.beginPath(),this.Canvas.moveTo(this.ClientRect.Left,t[0].Y),t){var i=t[a];this.Canvas.lineTo(i.X,i.Y)}this.Canvas.lineTo(this.ClientRect.Left,t[t.length-1].Y),this.Canvas.fill()}},this.DrawLines=function(t,e){if(!(t.length<=0)){for(var a in this.Canvas.strokeStyle=e,this.Canvas.beginPath(),t){var i=t[a];this.Canvas.moveTo(this.ClientRect.Left,i.Y),this.Canvas.lineTo(i.X,i.Y)}this.Canvas.stroke()}},this.DrawAveragePriceLine=function(t,e,a,i){for(var r in t)if((n=t[r]).Y==a)return this.Canvas.strokeStyle=i,this.Canvas.beginPath(),this.Canvas.moveTo(this.ClientRect.Left,n.Y),this.Canvas.lineTo(n.X,n.Y),void this.Canvas.stroke();for(var r in e){var n;if((n=e[r]).Y==a)return this.Canvas.strokeStyle=i,this.Canvas.beginPath(),this.Canvas.moveTo(this.ClientRect.Left,n.Y),this.Canvas.lineTo(n.X,n.Y),void this.Canvas.stroke()}},this.DrawBorder=function(){this.Canvas.strokeStyle=this.PenBorder,this.Canvas.strokeRect(this.ClientRect.Left,this.ClientRect.Top,this.ClientRect.Width,this.ClientRect.Height)},this.EvenlyDistribute=function(t,e){var a=e.Low,i=e.High,r=e.MaxPrice,n=e.MinPrice,o=1;if(i-a!=0){for(var s=e.Vol/(i-a),h=a;h<=i&&h<=r;++h){var l=h-n;t[l]+=s,o<t[l]&&(o=t[l])}e.MaxVol=o}},this.TriangleDistribute=function(t,e){for(var a=e.Low,i=e.High,r=(e.MaxPrice,e.MinPrice),n=1,o=3.1415926535,s=(i-a)/2+a,h=0,l=[],u=a+1,c=1;u<=s;++u,++c)h+=f=Math.tan(45*o/180)*c,l.push({Index:u-r,Value:f});for(u=i-1,c=1;u>s;--u,++c){var f;h+=f=Math.tan(45*o/180)*c,l.push({Index:u-r,Value:f})}if(h>0){for(u=0;u<l.length;++u){var d=l[u];t[d.Index]+=d.Value*e.Vol/h,n<t[d.Index]&&(n=t[d.Index])}e.MaxVol=n}},this.CalculateDistribute=function(t,e){1==this.CalculateType?this.TriangleDistribute(t,e):this.EvenlyDistribute(t,e)},this.CalculateChip=function(){if(!this.HQChart)return!1;if(!this.HQChart.FlowCapitalReady)return!1;var t=this.HQChart.Symbol;if(!t)return!1;if(Ea.IsSHSZIndex(t))return!1;var e=this.HQChart.ChartPaint[0].Data,a=e.DataOffset+parseInt(this.HQChart.CursorIndex);a>=e.Data.length&&(a=e.Data.length-1);var i=e.Data[a],r=i.Close,n=this.HQChart.LastPoint.Y;n&&(r=this.HQChart.Frame.SubFrame[0].Frame.GetYData(n));for(var o,s,h=[],l=1,u=a;u>=0;--u){var c=1;(S=e.Data[u]).FlowCapital>0&&(c=S.Vol/S.FlowCapital);var f={Vol:u==a?S.Vol*c:S.Vol*l,High:S.High,Low:S.Low};h.push(f),l*=1-1*c,(!o||o<S.High)&&(o=S.High),(!s||s>S.Low)&&(s=S.Low)}if(!o||!s)return!0;for(var d=this.PriceZoom,C=(o=parseInt(o*d))-(s=parseInt(s*d)),p=new Array,m=0;m<=C;++m)p.push(0);var D,v=[];if(2==this.ShowType)for(var g in v=[{Day:100,Color:this.DAY_COLOR[1][5]},{Day:60,Color:this.DAY_COLOR[1][4]},{Day:30,Color:this.DAY_COLOR[1][3]},{Day:20,Color:this.DAY_COLOR[1][2]},{Day:10,Color:this.DAY_COLOR[1][1]},{Day:5,Color:this.DAY_COLOR[1][0]}],h){var S=h[g],T=parseInt(S.High*d),I=parseInt(S.Low*d),y=S.Vol;if(T-I>0&&(y=S.Vol/(T-I)),!(y<=1e-9)){for(var x=0;x<v.length;++x)if(g==v[x].Day){v[x].Chip=p.slice(0);break}D={Low:I,High:T,Vol:S.Vol,MaxPrice:o,MinPrice:s},this.CalculateDistribute(p,D)}}else if(1==this.ShowType){v=[{Day:5,Color:this.DAY_COLOR[0][0]},{Day:10,Color:this.DAY_COLOR[0][1]},{Day:20,Color:this.DAY_COLOR[0][2]},{Day:30,Color:this.DAY_COLOR[0][3]},{Day:60,Color:this.DAY_COLOR[0][4]},{Day:100,Color:this.DAY_COLOR[0][5]}];for(var w=h.length-1;w>=0;--w)if(S=h[w],T=parseInt(S.High*d),I=parseInt(S.Low*d),y=S.Vol,T-I>0&&(y=S.Vol/(T-I)),!(y<=1e-9)){for(x=0;x<v.length;++x)if(w==v[x].Day){v[x].Chip=p.slice(0);break}D={Low:I,High:T,Vol:S.Vol,MaxPrice:o,MinPrice:s},this.CalculateDistribute(p,D)}}else for(var F in h)S=h[F],T=parseInt(S.High*d),I=parseInt(S.Low*d),y=S.Vol,T-I>0&&(y=S.Vol/(T-I)),y<=1e-9||(D={Low:I,High:T,Vol:S.Vol,MaxPrice:o,MinPrice:s},this.CalculateDistribute(p,D));return!!D&&(this.Data={AllChip:p,MaxVol:D.MaxVol,MaxPrice:o,MinPrice:s,SelectData:i,DayChip:v,YPrice:r},!0)},this.DrawFrame=function(){if(0!=this.IsShowX&&!(this.Data.MaxVol<=0)){var t=1!==this.HQChart.Frame.SubFrame.length,e=_(this.HQChart.Frame.SubFrame[0].Frame.ChartBorder.GetBottomEx()+1);t||(e=this.ClientRect.Top+this.ClientRect.Height);var a=this.ClientRect.Left,i=a+this.ClientRect.Width;this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),t&&(this.Canvas.moveTo(a,e),this.Canvas.lineTo(i,e));var r=this.ShowXCount,n=this.Data.MaxVol,o=Math.floor(n/r);this.Canvas.font=this.Font,this.Canvas.textBaseline="top",this.Canvas.fillStyle=this.InfoColor,A();for(var s=1;s<=r;++s){var h=o*s,l=h/this.Data.MaxVol*this.ClientRect.Width+this.ClientRect.Left;if(l=_(l),s==r){this.Canvas.textAlign="right";var u=Te.FormatValueString(n,1);this.Canvas.fillText(u,l,e+2)}else{this.Canvas.moveTo(l,this.ClientRect.Top),this.Canvas.lineTo(l,e),this.Canvas.textAlign="center",u=Te.FormatValueString(h,1);var c=this.Canvas.measureText(u).width;this.Canvas.fillText(u,Math.floor(l-.25*c),e+2)}}this.Canvas.stroke()}}}).Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.Left=this.Frame.ChartBorder.Right,a.SetOption(e),this.ExtendChartPaint.push(a),this.Frame.ChartBorder.Right+=a.Width,a;case"画图工具":return(a=new De).Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.Left=this.Frame.ChartBorder.Right,a.SetOption(e),this.ExtendChartPaint.push(a),this.Frame.ChartBorder.Right+=a.Width,a;case"KLineTooltip":return(a=e.Create&&"function"==typeof e.Create?e.Create():new pe).Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,e.LanguageID=this.LanguageID,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"深度图":return(a=new function(){this.newMethod=Ce,this.newMethod(),delete this.newMethod,this.ClassName="DepthMapPaint",this.LineColor=ia.DepthMapPaint.LineColor,this.AreaColor=G(ia.DepthMapPaint.AreaColor),this.TextColor=ia.DepthMapPaint.TextColor,this.TextBGColor=ia.DepthMapPaint.TextBGColor,this.FrameID=0,this.ID=P(),this.IsDynamic=!1,this.IsCallbackDraw=!0,this.YRange,this.WidthRate=.8,this.IsShow=!0,this.SetOption=function(t){t.FrameID>0&&(this.FrameID=t.FrameID),Te.IsObjectExist(t.ID)&&(this.ID=t.ID),t.IsShowCorssCursor&&(this.IsShowCorssCursor=t.IsShowCorssCursor),Te.IsNumber(t.WidthRate)&&(this.WidthRate=t.WidthRate)},this.Draw=function(){if(this.Data&&Te.IsNonEmptyArray(this.Data)&&this.ChartFrame&&this.ChartFrame.SubFrame&&!(this.ChartFrame.SubFrame.length<=this.FrameID)){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.SubFrame[this.FrameID].Frame.ChartBorder,a=e.GetHeightEx(),i=e.GetRight(),r=e.GetTopEx(),n=e.GetBottomEx(),o=this.ChartBorder.Right*this.WidthRate;t&&(i=e.GetBottom(),r=e.GetRight(),n=e.GetLeft(),(o=this.Width)>this.ChartBorder.Bottom&&(o=this.ChartBorder.Bottom));var s={Left:i,Top:r,Right:i+o,Bottom:n,Height:a,Width:o};this.YRange={Max:null,Min:0};for(var h=0;h<this.Data.length;++h){var l=this.Data[h];this.CalculateYRange(l,this.YRange)}for(h=0;h<this.Data.length;++h)(l=this.Data[h]).Height>0&&l.Height<=1?s.Height=a*l.Height:s.Height=a,1==l.Type?(s.Top=r,s.Bottom=r+s.Height,this.DrawUpArea(l,s)):2==l.Type?(s.Bottom=n,s.Top=s.Bottom-s.Height,this.DrawDownArea(l,s)):(s.Top=r,s.Bottom=n,this.DrawDefaultArea(l,s))}},this.CalculateYRange=function(t,e){for(var a in t.Data){var i=t.Data[a];(null==e.Max||e.Max<i.Y)&&(e.Max=i.Y),(null==e.Min||e.Min>i.Y)&&(e.Min=i.Y)}},this.GetXFromData=function(t,e,a){var i=e.Width*(t-a.Min)/(a.Max-a.Min);return e.Left+i},this.GetYFromData=function(t,e,a,i){if(i){var r=e.Height*(t-a.Min)/(a.Max-a.Min);return e.Bottom-r}return r=e.Height*(t-a.Min)/(a.Max-a.Min),e.Top+r},this.DrawDefaultArea=function(t,e){for(var a=this.ChartFrame.SubFrame[this.FrameID].Frame,i=t.Range&&t.Range.Y?t.Range.Y:this.YRange,r=[],n=0;n<t.Data.length;++n){var o=t.Data[n],s=this.GetXFromData(o.Y,e,i);if(!(o.X>a.HorizontalMax||o.X<a.HorizontalMin)){var h=a.GetYFromData(o.X);r.push({X:s,Y:h})}}var l=t.LineColor?t.LineColor:this.LineColor,u=t.AreaColor?t.AreaColor:this.AreaColor;r.length>0&&(1==t.DrawType?this.DrawHLine(r,l,e):this.DrawLine(r,l,u,e))},this.DrawUpArea=function(t,e){var a=[];for(var i in t.Data){var r=t.Data[i],n=this.GetXFromData(r.Y,e,t.Range.Y),o=this.GetYFromData(r.X,e,t.Range.X,t.IsASC);a.push({X:n,Y:o})}var s=t.LineColor?t.LineColor:this.LineColor,h=t.AreaColor?t.AreaColor:this.AreaColor;a.length>0&&this.DrawLine(a,s,h,e)},this.DrawDownArea=function(t,e){var a=[];for(var i in t.Data){var r=t.Data[i],n=this.GetXFromData(r.Y,e,t.Range.Y),o=this.GetYFromData(r.X,e,t.Range.X,t.IsASC);a.push({X:n,Y:o})}var s=t.LineColor?t.LineColor:this.LineColor,h=t.AreaColor?t.AreaColor:this.AreaColor;a.length>0&&this.DrawLine(a,s,h,e)},this.DrawHLine=function(t,e,a){var i=!0===this.ChartFrame.IsHScreen;this.Canvas.strokeStyle=e,this.Canvas.beginPath();for(var r=0,n=0;n<t.length;++n){var o=t[n];i||(this.Canvas.moveTo(a.Left,o.Y),this.Canvas.lineTo(o.X,o.Y)),++r}r>0&&this.Canvas.stroke()},this.DrawLine=function(t,e,a,i){var r=!0===this.ChartFrame.IsHScreen,n=!0,o=0;for(var s in this.Canvas.strokeStyle=e,t){var h=t[s];n?(this.Canvas.beginPath(),r?this.Canvas.moveTo(h.Y,h.X):this.Canvas.moveTo(h.X,h.Y),n=!1):r?this.Canvas.lineTo(h.Y,h.X):this.Canvas.lineTo(h.X,h.Y),++o}o>0&&this.Canvas.stroke();var l=t[0],u=t[t.length-1];if(r?(this.Canvas.lineTo(u.Y,i.Left),this.Canvas.lineTo(l.Y,i.Left)):(this.Canvas.lineTo(i.Left,u.Y),this.Canvas.lineTo(i.Left,l.Y)),this.Canvas.closePath(),Array.isArray(a))if(r){var c=this.Canvas.createLinearGradient(this.ChartBorder.GetRightEx(),this.ChartBorder.GetTop(),this.ChartBorder.GetLeft(),this.ChartBorder.GetTop());c.addColorStop(0,a[0]),c.addColorStop(1,a[1]),this.Canvas.fillStyle=c}else{var f=this.Canvas.createLinearGradient(i.Right,i.Top,i.Left,i.Top),d=1/a.length;for(s=0;s<a.length;++s)f.addColorStop(s*d,a[s]);this.Canvas.fillStyle=f}else this.Canvas.fillStyle=a;this.Canvas.fill()},this.GetYValueByXValue=function(t,e){for(var a=[],i=Ae[e],r=0;r<this.Data.length;++r){var n=this.Data[r];if(0==n.Type&&n.Data&&!(n.Data.length<0)&&0!=n.IsShowCorssCursor){for(var o=!1,s=0;s<n.Data.length;++s){var h=n.Data[s];if(parseInt(h.X*i)==t){o=!0;var l={X:h.X,Y:h.Y,TextColor:n.TextColor?n.TextColor:this.TextColor,TextBGColor:n.TextBGColor?n.TextBGColor:this.TextBGColor};h.YText&&(l.YText=h.YText),a.push(l);break}}if(!o){var u=n.Data[0],c=n.Data[n.Data.length-1];t>u.X*i&&t<c.X*i&&a.push({X:null,Y:null,TextColor:n.TextColor?n.TextColor:this.TextColor,TextBGColor:n.TextBGColor?n.TextBGColor:this.TextBGColor})}}}return a}}).Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"K线Y轴背景图":return(a=new function(){this.newMethod=Ce,this.newMethod(),delete this.newMethod,this.ClassName="KLineYAxisBGPaint",this.SplitData=[],this.Font=ia.KLineYAxisBGPaint.Font,this.FrameID=0,this.ID=P(),this.IsDynamic=!1,this.IsCallbackDraw=!0,this.IsShow=!0,this.BGWidth=50,this.LineColor=ia.KLineYAxisBGPaint.LineColor,this.DiffValutTextColor=ia.KLineYAxisBGPaint.DiffValutTextColor,this.DiffValueBGColor=ia.KLineYAxisBGPaint.DiffValueBGColor,this.KLineFrame,this.KLineData,this.Range={Max:null,Min:null},this.SetOption=function(t){t&&Te.IsNonEmptyArray(t.SplitData)&&(this.SplitData=t.SplitData)},this.Draw=function(){if(this.IsShow&&this.ChartFrame&&this.ChartFrame.SubFrame&&!(this.ChartFrame.SubFrame.length<=this.FrameID)){var t=this.HQChart.ChartPaint[0];if(t&&!0!==this.ChartFrame.IsHScreen){this.KLineFrame=this.ChartFrame.SubFrame[this.FrameID].Frame;var e=this.KLineFrame.ChartBorder,a=this.KLineFrame.DataWidth,i=this.KLineFrame.DistanceWidth,r=this.KLineFrame.XPointCount,n=e.GetBorder(),o=n.LeftEx+i/2+ia.FrameLeftMargin,s=n.RightEx;this.KLineData=t.Data;for(var h=null,l=null,u=this.KLineData.DataOffset,c=0;u<this.KLineData.Data.length&&c<r;++u,++c,o+=a+i){var f=this.KLineData.Data[u];if(null!=f.Open&&null!=f.High&&null!=f.Low&&null!=f.Close){if(o+a>s)break;(null==h||h<f.High)&&(h=f.High),(null==l||l>f.Low)&&(l=f.Low)}}Te.IsNumber(h)&&Te.IsNumber(l)&&(this.Range.Max=h,this.Range.Min=l,this.DrawBackground())}}},this.DrawBackground=function(){var t=this.Range.Min,e=this.KLineFrame.ChartBorder.GetBorder(),a=this.KLineFrame.GetYFromData(t,!1),i=e.Right,r=i+this.BGWidth;this.Canvas.font=this.Font,this.Canvas.textBaseline="top",this.Canvas.textAlign="left";for(var n=0;n<this.SplitData.length;++n){var o=this.SplitData[n];if(o.Value+t>this.KLineFrame.HorizontalMax)break;var s=this.KLineFrame.GetYFromData(t+o.Value,!1);this.Canvas.fillStyle=o.Color,this.Canvas.fillRect(k(i),k(s),k(r-i),k(a-s)),o.Text&&o.TextColor&&(this.Canvas.fillStyle=o.TextColor,this.Canvas.fillText(o.Text,r+1,s)),a=s}var h=this.Range.Max-this.Range.Min,l=Ga(this.HQChart.Symbol),u=h.toFixed(l),c=this.KLineFrame.GetYFromData(this.Range.Max,!1);this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(_(i),_(c)),this.Canvas.lineTo(_(r),_(c)),this.Canvas.stroke();var f=this.Canvas.measureText(u).width+4,d=this.Canvas.measureText("擎").width+2,C={Left:r+1,Top:c-d,Width:f,Height:d};this.DiffValueBGColor&&(this.Canvas.fillStyle=this.DiffValueBGColor,this.Canvas.fillRect(C.Left,C.Top,C.Width,C.Height)),this.Canvas.textBaseline="bottom",this.Canvas.fillStyle=this.DiffValutTextColor,this.Canvas.fillText(u,C.Left+1,c)}}).Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"背景图":return(a=new function(){this.newMethod=Ce,this.newMethod(),delete this.newMethod,this.ClassName="BackgroundPaint",this.IsDynamic=!1,this.IsCallbackDraw=!0,this.FrameID=0,this.Data,this.ID=P(),this.ChartSubFrame,this.ChartBorder,this.KData,this.Period,this.XPointCount=0,this.SetOption=function(t){t.FrameID>0&&(this.FrameID=t.FrameID),Te.IsObjectExist(t.ID)&&(this.ID=t.ID)},this.Draw=function(){if(this.Data&&this.HQChart&&this.ChartFrame&&this.ChartFrame.SubFrame&&!(this.ChartFrame.SubFrame.length<=this.FrameID)){var t=this.HQChart.ChartPaint[0];if(t&&t.Data&&(this.ChartSubFrame=this.ChartFrame.SubFrame[this.FrameID].Frame,this.ChartBorder=this.ChartSubFrame.ChartBorder,this.KData=t.Data,this.Period=this.HQChart.Period,this.KData&&!(this.KData.Data.length<=0))){var e=!0===this.ChartSubFrame.IsHScreen;this.XPointCount=this.ChartSubFrame.XPointCount;var a=this.ChartSubFrame.XPointCount,i=this.KData.Data[this.KData.DataOffset],r=this.KData.DataOffset+a-1;r>=this.KData.Data.length&&(r=this.KData.Data.length-1);var n=this.KData.Data[r],o=this.GetShowData(i,n);if(o&&!(o.length<=0)){var s=this.BuildKLineMap(),h=this.ChartBorder.GetBottomEx(),l=this.ChartBorder.GetTopEx(),u=this.ChartBorder.GetHeightEx();for(var c in e&&(l=this.ChartBorder.GetRightEx(),h=this.ChartBorder.GetLeftEx(),u=this.ChartBorder.GetWidthEx()),o){var f=o[c],d=this.GetBGCoordinate(f,s);if(d){if(Array.isArray(f.Color)){var C;C=e?this.Canvas.createLinearGradient(h,d.Left,l,d.Left):this.Canvas.createLinearGradient(d.Left,l,d.Left,h);var p=1/f.Color.length;for(var c in f.Color)C.addColorStop(c*p,f.Color[c]);this.Canvas.fillStyle=C}else this.Canvas.fillStyle=f.Color;e?this.Canvas.fillRect(k(h),k(d.Left),k(u),k(d.Width)):this.Canvas.fillRect(k(d.Left),k(l),k(d.Width),k(u))}}}}}},this.GetShowData=function(t,e){var a=[];for(var i in this.Data){var r=this.Data[i],n={};r.Start.Date>=t.Date&&r.Start.Date<=e.Date&&(n.Start=r.Start),r.End.Date>=t.Date&&r.End.Date<=e.Date&&(n.End=r.End),(n.Start||n.End)&&(n.Color=r.Color,a.push(n))}return a},this.BuildKLineMap=function(){var t=!0===this.ChartSubFrame.IsHScreen,e=this.ChartSubFrame.DataWidth,a=this.ChartSubFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+ia.FrameLeftMargin;t&&(i=this.ChartBorder.GetTop()+a/2+ia.FrameLeftMargin);var r=this.ChartBorder.GetRight();t&&(r=this.ChartBorder.GetBottom());for(var n={Data:new C.default,Start:null,End:null},o=this.KData.DataOffset,s=0;o<this.KData.Data.length&&s<this.XPointCount;++o,++s,i+=e+a){var h=this.KData.Data[o],l=i,u=i+e;if(u>r)break;var c=l+(u-l)/2;0==s&&(n.XLeft=l),n.XRight=u;var f={Index:o,ShowIndex:s,X:c,Right:u,Left:l,Date:h.Date};if(pt.IsMinutePeriod(this.Period,!0)){var d="Date:"+h.Date+" Time:"+h.Time;f.Time=h.Time}else d="Date:"+h.Date;n.Data.set(d,f),0==s&&(n.Start=f),n.End=f}return n},this.GetBGCoordinate=function(t,e){var a,i=null,r=null,n=pt.IsMinutePeriod(this.Period,!0),o=!1;if(n?t.Start&&t.End&&t.Start.Date==t.End.Date&&t.Start.Time==t.End.Time&&(o=!0):t.Start&&t.End&&t.Start.Date==t.End.Date&&(o=!0),o){if(n)var s="Date:"+t.Start.Date+" Time:"+t.Start.Time;else s="Date:"+t.Start.Date;return e.Data.has(s)?{Left:i=(a=e.Data.get(s)).Left,Right:r=a.Right,Width:r-i}:null}if(t.Start)if(s=n?"Date:"+t.Start.Date+" Time:"+t.Start.Time:"Date:"+t.Start.Date,e.Data.has(s))i=(a=e.Data.get(s)).Left;else if(n)if(t.Start.Date<e.Start.Date||t.Start.Date==e.Start.Date&&t.Start.Time<=e.Start.Time)i=e.Start.Left;else{var h=!0,l=!1,u=void 0;try{for(var c,d=(0,f.default)(e.Data);!(h=(c=d.next()).done);h=!0)if((M=c.value[1]).Date>t.Start.Date||M.Date==t.Start.Date&&M.Time>t.Start.Time){i=M.Left;break}}catch(t){l=!0,u=t}finally{try{!h&&d.return&&d.return()}finally{if(l)throw u}}}else if(t.Start.Date<=e.Start.Date)i=e.Start.Left;else{var C=!0,p=!1,m=void 0;try{for(var D,v=(0,f.default)(e.Data);!(C=(D=v.next()).done);C=!0)if((M=D.value[1]).Date>t.Start.Date){i=M.Left;break}}catch(t){p=!0,m=t}finally{try{!C&&v.return&&v.return()}finally{if(p)throw m}}}else i=e.XLeft;if(t.End)if(s=n?"Date:"+t.End.Date+" Time:"+t.End.Time:"Date:"+t.End.Date,e.Data.has(s))r=(a=e.Data.get(s)).Right;else if(n)if(t.End.Date<e.End.Date||t.End.Date==e.End.Date&&t.End.Time>=e.End.Time)r=e.End.Right;else{var g=null,S=!0,T=!1,I=void 0;try{for(var y,x=(0,f.default)(e.Data);!(S=(y=x.next()).done);S=!0){if((M=y.value[1]).Date>t.End.Date||M.Date==t.End.Date&&M.Time>t.End.Time){r=g;break}g=M.Right}}catch(t){T=!0,I=t}finally{try{!S&&x.return&&x.return()}finally{if(T)throw I}}}else if(t.End.Date<=e.End.Date)r=e.End.Right;else{g=null;var w=!0,F=!1,E=void 0;try{for(var b,L=(0,f.default)(e.Data);!(w=(b=L.next()).done);w=!0){var M;if((M=b.value[1]).Date>t.End.Date){r=g;break}g=M.Right}}catch(t){F=!0,E=t}finally{try{!w&&L.return&&L.return()}finally{if(F)throw E}}}else r=e.XRight;return null==i||null==r?null:{Left:i,Right:r,Width:r-i}}}).Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"FrameSplitPaint":return(a=new ve).Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a;default:return(a=de.Create(t))?(a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a):null}},this.OnTouchFinished=function(){if(this.DragMode==E.CLICK_TOUCH_MODE_ID){if(1==this.TouchStatus.CorssCursorShow&&this.TouchDrawCount>0)return;return this.TouchStatus.CorssCursorShow=!1,void this.DrawDynamicInfo()}if(!0===this.EnableClickModel){if(1==this.ClickModel.IsShowCorssCursor&&this.TouchDrawCount>0)return;return this.ClickModel.IsShowCorssCursor=!1,void this.DrawDynamicInfo()}if(!0!==this.CorssCursorTouchEnd)for(var t in this.ExtendChartPaint){"KLineTooltipPaint"===this.ExtendChartPaint[t].ClassName&&this.DrawDynamicInfo()}else this.TouchDrawCount>0&&this.DrawDynamicInfo()},this.LockIndex=function(t){if(t&&t.IndexName)for(var e in this.WindowIndex){var a=this.WindowIndex[e];if(a||conintue,a.Name==t.IndexName){a.SetLock(t),this.Update();break}}},this.TryClickLock=function(t,e){for(var a=0;a<this.Frame.SubFrame.length;++a){var i=this.Frame.SubFrame[a];if(i.Frame.IsLocked&&i.Frame.LockPaint){var r=new It;if(i.Frame.LockPaint.GetTooltipData(t,e,r))return r.HQChart=this,r.Data.Callback&&r.Data.Callback(r),!0}}return!1},this.TryClickIndexTitle=function(t,e){for(var a in this.TitlePaint){var i=this.TitlePaint[a];if(i.IsClickTitle&&i.IsClickTitle(t,e)){var r={Point:{X:t,Y:e},Title:i.Title,FrameID:i.Frame.Identify};D.Chart.Log("[KLineChartContainer::TryClickIndexTitle] click title ",r);var n=this.GetEventCallback(w.ON_CLICK_INDEXTITLE);return n&&n.Callback&&n.Callback(n,r,this),!0}}return!1},this.SetSizeChange=function(t){for(var e in this.Frame.SetSizeChage(t),this.ExtendChartPaint){this.ExtendChartPaint[e].SizeChange=t}},this.SetSizeChage=this.SetSizeChange,this.Update=function(t){if(this.SourceData){var e;if(this.BeforeBindMainData&&this.BeforeBindMainData("Update"),(o=new pt).Data=this.SourceData.Data,o.Period=this.Period,o.Right=this.Right,o.DataType=this.SourceData.DataType,o.Symbol=this.Symbol,o.Right>0&&pt.IsDayPeriod(o.Period,!0)){var a=o.GetRightData(o.Right,{AlgorithmType:this.RightFormula});o.Data=a}else if(o.Right>0&&pt.IsMinutePeriod(o.Period,!0)&&this.RightFormula>=1){a=o.GetRightData(o.Right,{AlgorithmType:this.RightFormula});o.Data=a}if(pt.IsDayPeriod(o.Period,!1)||pt.IsMinutePeriod(o.Period,!1)){var i=o.GetPeriodData(o.Period);o.Data=i}this.BindMainData(o,this.PageSize),this.AfterBindMainData&&this.AfterBindMainData("Update");for(var r=0;r<this.Frame.SubFrame.length;++r)0==r&&(e=this.Frame.SubFrame[r].Frame),this.BindIndexData(r,o);for(var r in e&&e.YSplitOperator&&(e.YSplitOperator.Symbol=this.Symbol,e.YSplitOperator.Data=this.ChartPaint[0].Data,e.YSplitOperator.Period=this.Period),this.OverlayChartPaint){if((s=this.OverlayChartPaint[r]).SourceData)if(pt.IsMinutePeriod(this.Period,!0)){(o=new pt).Data=s.SourceData.Data,o.Period=this.Period,o.Right=this.Right;var n=this.SourceData.GetOverlayMinuteData(o.Data,this.IsApiPeriod);if(o.Data=n,pt.IsMinutePeriod(o.Period,!1)&&!this.IsApiPeriod){i=o.GetPeriodData(o.Period);o.Data=i}s.Data=o}else{var o;if((o=new pt).Data=s.SourceData.Data,o.Period=this.Period,o.Right=this.Right,o.Right>0&&Ea.IsSHSZStockA(s.Symbol)){a=o.GetRightData(o.Right,{AlgorithmType:this.RightFormula});o.Data=a}n=this.SourceData.GetOverlayData(o.Data,this.IsApiPeriod);if(o.Data=n,pt.IsDayPeriod(o.Period,!1)&&!this.IsApiPeriod){i=o.GetPeriodData(o.Period);o.Data=i}s.Data=o}}this.ReqeustKLineInfoData({FunctionName:"Update"}),this.CreateChartDrawPictureByStorage(),this.UpdataDataoffset(),t&&t.UpdateCursorIndexType>0?this.UpdatePointByCursorIndex(t.UpdateCursorIndexType):this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw();for(r=0;r<this.Frame.SubFrame.length;++r){var s=this.Frame.SubFrame[r];for(var h in s.OverlayIndex){var l=s.OverlayIndex[h];this.BindOverlayIndexData(l,r,o)}}}},this.ChangeSymbol=function(t,e){if(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeSymbol"),this.ClearRectSelect(!0),this.ClearCustomKLine(),this.ClearKLineCaluate(),this.HideTooltip(),this.ResetScrollBar(),this.Symbol=t,t){if(e&&e.KLine){var a=e.KLine;Te.IsNumber(a.Right)&&(this.Right=a.Right),Te.IsNumber(a.Period)&&(this.Period=a.Period)}if(Ea.IsSHSZIndex(t)&&(this.Right=0),this.ClearIndexPaint(),e&&e.Windows&&Array.isArray(e.Windows)&&e.Windows.length>0){var i=e.Windows,r=new T;for(var n in i){if(n>=this.WindowIndex.length)break;if(a=i[n])if(a.Script)this.WindowIndex[n]=new si(a.Name,a.Script,a.Args,a);else if(a.API){var o=a.API;this.WindowIndex[n]=new li(o.Name,o.Script,o.Args,a)}else{var s=a.Index,h=r.Get(s);if(h){h.Args;a.Args&&(h.Args=a.Args),h.ID=s,this.WindowIndex[n]=new si(h.Name,h.Script,h.Args,h)}}}}this.ReloadChartDrawPicture(),this.Frame.ClearUpDonwFrameYData(),pt.IsDayPeriod(this.Period,!0)?this.RequestHistoryData():pt.IsMinutePeriod(this.Period,!0)||pt.IsSecondPeriod(this.Period)?this.ReqeustHistoryMinuteData():pt.IsTickPeriod(this.Period)&&this.RequestTickData()}else this.DrawEmpty()},this.ReqeustKLineInfoData=function(t){if(t&&"RecvDragDayData"==t.FunctionName)t.Update=!0;else{if(this.ChartPaint.length>0)this.ChartPaint[0].InfoData=new C.default;t.Update=!1}if(Te.IsNonEmptyArray(this.ChartInfo))for(var e=0;e<this.ChartInfo.length;++e)this.ChartInfo[e].RequestData(this,t)},this.SetKLineInfo=function(t,e){for(var a in this.ChartInfo=[],t){var i=ga.Get(t[a]);if(i){var r=i.Create();r.MaxRequestDataCount=this.MaxRequestDataCount,this.ChartInfo.push(r)}}1==e&&this.ReqeustKLineInfoData({FunctionName:"SetKLineInfo"})},this.AddKLineInfo=function(t,e){var a=ga.GetClassInfo(t);if(a){for(var i in this.ChartInfo){if((r=this.ChartInfo[i]).ClassName==a.ClassName)return}var r,n=ga.Get(t);if(n)(r=n.Create()).MaxRequestDataCount=this.MaxRequestDataCount,this.ChartInfo.push(r),1==e&&r.RequestData(this)}else console.warn("[KLineChartContainer::AddKLineInfo] can't find infoname=",t)},this.DeleteKLineInfo=function(t){var e=ga.GetClassInfo(t);if(e)for(var a in this.ChartInfo){if(this.ChartInfo[a].ClassName==e.ClassName){this.ChartInfo.splice(a,1),this.UpdataChartInfo(),this.Draw();break}}else console.warn("[KLineChartContainer::DeleteKLineInfo] can't find infoname=",t)},this.ClearKLineInfo=function(){!this.ChartInfo||this.ChartInfo.length<=0||(this.ChartInfo=[],this.ChartPaint[0].InfoData=null,this.Draw())},this.OverlaySymbol=function(t,e){for(var a in this.OverlayChartPaint){if(this.OverlayChartPaint[a].Symbol===t)return console.warn("[KLineChartContainer::OverlaySymbol] overlay symbol="+t+" exist."),!1}var i=new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartOverlayKLine",this.Color="rgb(65,105,225)",this.MainData,this.SourceData,this.Title,this.DrawType=0,this.CustomDrawType=null,this.Status=Lt.STATUS_NONE_ID,this.IsDelete=!1,this.CloseLineWidth=ia.CloseLineWidth,this.ShowRange={},this.DrawKRange={Start:null,End:null},this.YInfoType=4,this.SetOption=function(t){t&&(Te.IsNumber(t.DrawType)&&(this.CustomDrawType=t.DrawType),Te.IsNumber(t.YInfoType)&&(this.YInfoType=t.YInfoType))},this.DrawKBar=function(t){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+2;e&&(r=this.ChartBorder.GetTop()+i/2+2);var n=this.ChartBorder.GetRight();e&&(n=this.ChartBorder.GetBottom());var o=this.ChartFrame.XPointCount,s=this.DrawType;null!=this.CustomDrawType&&(s=this.CustomDrawType);var h=!0,l=null;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=o,this.ShowRange.FirstOpen=t,this.DrawKRange.Start=this.Data.DataOffset;for(var u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<o;++u,++c,r+=a+i,++this.ShowRange.DataCount){var f=this.Data.Data[u];if(f&&null!=f.Open&&null!=f.High&&null!=f.Low&&null!=f.Close){null==l&&(l=f.Open,this.ShowRange.FirstOverlayOpen=f.Open),h&&(this.Canvas.strokeStyle=this.Color,this.Canvas.fillStyle=this.Color,this.Canvas.beginPath(),h=!1);var d=r,C=r+a;if(C>n)break;var p=d+(C-d)/2,m=this.GetYFromData(f.Low/l*t,!1),D=this.GetYFromData(f.High/l*t,!1),v=this.GetYFromData(f.Open/l*t,!1),g=this.GetYFromData(f.Close/l*t,!1),S=D;this.DrawKRange.End=u,f.Open<f.Close?a>=4?(f.High>f.Close?(e?(this.Canvas.moveTo(_(S),_(p)),this.Canvas.lineTo(_(3==this.DrawType?Math.max(g,v):g),_(p))):(this.Canvas.moveTo(_(p),_(S)),this.Canvas.lineTo(_(p),_(3==this.DrawType?Math.min(g,v):g))),S=g):S=g,e?Math.abs(v-S)<1?this.Canvas.fillRect(k(S),k(d),1,k(a)):3==s?this.Canvas.rect(_(S),_(d),k(v-S),k(a)):this.Canvas.fillRect(k(S),k(d),k(v-S),k(a)):Math.abs(v-S)<1?this.Canvas.fillRect(k(d),k(S),k(a),1):3==s?this.Canvas.rect(_(d),_(S),k(a),k(v-S)):this.Canvas.fillRect(k(d),k(S),k(a),k(v-S)),f.Open>f.Low&&(e?(this.Canvas.moveTo(_(3==this.DrawType?Math.min(g,v):S),_(p)),this.Canvas.lineTo(_(m),_(p))):(this.Canvas.moveTo(_(p),_(3==this.DrawType?Math.max(g,v):S)),this.Canvas.lineTo(_(p),_(m))))):e?(this.Canvas.moveTo(D,_(p)),this.Canvas.lineTo(m,_(p))):(this.Canvas.moveTo(_(p),D),this.Canvas.lineTo(_(p),m)):f.Open>f.Close?a>=4?(f.High>f.Close?(e?(this.Canvas.moveTo(_(S),_(p)),this.Canvas.lineTo(_(v),_(p))):(this.Canvas.moveTo(_(p),_(S)),this.Canvas.lineTo(_(p),_(v))),S=v):S=v,e?Math.abs(g-S)<1?this.Canvas.fillRect(k(S),k(d),1,k(a)):this.Canvas.fillRect(k(S),k(d),k(g-S),k(a)):Math.abs(g-S)<1?this.Canvas.fillRect(k(d),k(S),k(a),1):this.Canvas.fillRect(k(d),k(S),k(a),k(g-S)),f.Open>f.Low&&(e?(this.Canvas.moveTo(_(S),_(p)),this.Canvas.lineTo(_(m),_(p))):(this.Canvas.moveTo(_(p),_(S)),this.Canvas.lineTo(_(p),_(m))))):e?(this.Canvas.moveTo(D,_(p)),this.Canvas.lineTo(m,_(p))):(this.Canvas.moveTo(_(p),D),this.Canvas.lineTo(_(p),m)):a>=4?(f.High>f.Close?(e?(this.Canvas.moveTo(S,_(p)),this.Canvas.lineTo(v,_(p))):(this.Canvas.moveTo(_(p),S),this.Canvas.lineTo(_(p),v)),S=v):S=v,e?(this.Canvas.moveTo(_(S),_(d)),this.Canvas.lineTo(_(S),_(C))):(this.Canvas.moveTo(_(d),_(S)),this.Canvas.lineTo(_(C),_(S))),f.Open>f.Low&&(e?(this.Canvas.moveTo(_(S),_(p)),this.Canvas.lineTo(_(m),_(p))):(this.Canvas.moveTo(_(p),_(S)),this.Canvas.lineTo(_(p),_(m))))):e?(this.Canvas.moveTo(D,_(p)),this.Canvas.lineTo(m,_(p))):(this.Canvas.moveTo(_(p),D),this.Canvas.lineTo(_(p),m));var T=Math.min(m,D,v,g),I=new yt(d,T,a,Math.max(m,D,v,g)-T);this.TooltipRect.push([u,I])}}0==h&&this.Canvas.stroke()},this.DrawAKLine=function(t){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+2;e&&(r=this.ChartBorder.GetTop()+i/2+2);var n=this.ChartBorder.GetRight();e&&(n=this.ChartBorder.GetBottom());var o=this.ChartFrame.XPointCount,s=null;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=o,this.ShowRange.FirstOpen=t,this.DrawKRange.Start=this.Data.DataOffset,this.Canvas.strokeStyle=this.Color;for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<o;++h,++l,r+=a+i,++this.ShowRange.DataCount){var u=this.Data.Data[h];if(null!=u.Open&&null!=u.High&&null!=u.Low&&null!=u.Close){null==s&&(s=u.Open,this.ShowRange.FirstOverlayOpen=u.Open);var c=r,f=r+a;if(f>n)break;var d=c+(f-c)/2,C=this.GetYFromData(u.Low/s*t,!1),p=this.GetYFromData(u.High/s*t,!1),m=this.GetYFromData(u.Open/s*t,!1),D=this.GetYFromData(u.Close/s*t,!1);this.DrawKRange.End=h,this.Canvas.beginPath(),e?(this.Canvas.moveTo(p,_(d)),this.Canvas.lineTo(C,_(d))):(this.Canvas.moveTo(_(d),p),this.Canvas.lineTo(_(d),C)),this.Canvas.stroke(),a>=4&&(this.Canvas.beginPath(),e?(this.Canvas.moveTo(_(m),c),this.Canvas.lineTo(_(m),d)):(this.Canvas.moveTo(c,_(m)),this.Canvas.lineTo(d,_(m))),this.Canvas.stroke(),this.Canvas.beginPath(),e?(this.Canvas.moveTo(_(D),f),this.Canvas.lineTo(_(D),d)):(this.Canvas.moveTo(f,_(D)),this.Canvas.lineTo(d,_(D))),this.Canvas.stroke())}}},this.DrawCloseLine=function(t){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+2;e&&(r=this.ChartBorder.GetTop()+i/2+2);var n=this.ChartBorder.GetRight();e&&(n=this.ChartBorder.GetBottom());var o=this.ChartFrame.XPointCount,s=null,h=!0;this.Canvas.strokeStyle=this.Color,Te.IsNumber(this.CloseLineWidth)&&(this.Canvas.lineWidth=this.CloseLineWidth),this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=o,this.ShowRange.FirstOpen=t,this.DrawKRange.Start=this.Data.DataOffset,this.Canvas.beginPath();for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<o;++l,++u,r+=a+i,++this.ShowRange.DataCount){var c=this.Data.Data[l];if(null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){null==s&&(s=c.Open,this.ShowRange.FirstOverlayOpen=c.Open);var f=r+a;if(f>n)break;var d=r+(f-r)/2,C=this.GetYFromData(c.Close/s*t,!1);this.DrawKRange.End=l,h?(e?this.Canvas.moveTo(C,d):this.Canvas.moveTo(d,C),h=!1):e?this.Canvas.lineTo(C,d):this.Canvas.lineTo(d,C)}}0==h&&this.Canvas.stroke()},this.GetFirstOpen=function(){if(!this.MainData||!this.Data)return null;for(var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=0;e<this.MainData.Data.length&&a<t;++e,++a){var i=this.MainData.Data[e];if(null!=i.Open&&null!=i.High&&null!=i.Low&&null!=i.Close)return i.Open}return null},this.Draw=function(){if(this.TooltipRect=[],this.InfoTooltipRect=[],this.DrawKRange={Start:null,End:null},this.MainData&&this.Data){this.ChartFrame.XPointCount;var t=this.GetFirstOpen();if(null!=t){var e=this.DrawType;null!=this.CustomDrawType&&(e=this.CustomDrawType),this.Canvas.save(),this.ClipClient(this.ChartFrame.IsHScreen),1==e?this.DrawCloseLine(t):2==e?this.DrawAKLine(t):this.DrawKBar(t),this.Canvas.restore()}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={Max:null,Min:null};if(!this.MainData||!this.Data)return e;for(var a=null,i=this.Data.DataOffset,r=0;i<this.MainData.Data.length&&r<t;++i,++r)if(null!=(h=this.MainData.Data[i]).Open&&null!=h.High&&null!=h.Low&&null!=h.Close){a=h.Close;break}if(null==a)return e;var n,o,s=null;for(i=this.Data.DataOffset,r=0;i<this.Data.Data.length&&r<t;++i,++r){var h;(h=this.Data.Data[i])&&null!=h.Open&&null!=h.High&&null!=h.Low&&null!=h.Close&&(null==s&&(s=h.Open),n=h.High/s*a,o=h.Low/s*a,null==e.Max&&(e.Max=n),null==e.Min&&(e.Min=o),e.Max<n&&(e.Max=n),e.Min>o&&(e.Min=o))}return e},this.GetTooltipData=function(t,e,a){for(var i in this.TooltipRect){var r=this.TooltipRect[i][1];if(this.Canvas.beginPath(),this.Canvas.rect(r.X,r.Y,r.Width,r.Height),this.Canvas.isPointInPath(t,e)){var n=this.TooltipRect[i][0];return a.Data=this.Data.Data[n],a.ChartPaint=this,!0}}return!1},this.PtInChart=function(t,e){var a=this.DrawType;return Te.IsNumber(this.CustomDrawType)&&(a=this.CustomDrawType),1==a||4==a?null:this.PtInKBar(t,e,{OverlayKLine:!0})},this.DrawSelectedStatus=function(){this.DrawLinePoint({OverlayKLine:!0})}};return i.Canvas=this.Canvas,i.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,i.ChartFrame=this.Frame.SubFrame[0].Frame,i.Name="Overlay-KLine",i.DrawType=this.KLineDrawType,i.Symbol=t,i.Identify="Overlay-KLine-"+t,e&&e.Color?i.Color=e.Color:i.Color=ia.OverlaySymbol.Color[ia.OverlaySymbol.Random%ia.OverlaySymbol.Color.length],i.SetOption(e),++ia.OverlaySymbol.Random,this.ChartPaint[0]&&this.ChartPaint[0].Data&&this.SourceData&&(i.MainData=this.ChartPaint[0].Data),this.OverlayChartPaint.push(i),pt.IsDayPeriod(this.Period,!0)?this.RequestOverlayHistoryData():pt.IsMinutePeriod(this.Period,!0)&&this.RequestOverlayHistoryMinuteData(),!0},this.RequestOverlayHistoryData=function(){var t=this;if(this.OverlayChartPaint.length&&this.SourceData&&this.SourceData.Data)for(var e=this,a=this.GetRequestDataCount(),i=this.SourceData.Data[0].Date,r=function(){var r=t.OverlayChartPaint[n];if(!r.MainData)return"continue";if(r.Status!=Lt.STATUS_NONE_ID)return"continue";var s=r.Symbol;return s?(r.Status=Lt.STATUS_REQUESTDATA_ID,t.NetworkFilter&&(o={Name:"KLineChartContainer::RequestOverlayHistoryData",Explain:"叠加股票日K线数据",Request:{Url:e.KLineApiUrl,Data:{symbol:s,count:a.MaxRequestDataCount,first:{date:i},field:["name","symbol","yclose","open","price","high","vol","amount"]},Type:"POST"},Self:t,PreventDefault:!1},t.NetworkFilter(o,function(t){r.Status=Lt.STATUS_RECVDATA_ID,e.RecvOverlayHistoryData(t,r)}),1==o.PreventDefault)?"continue":void v.HttpRequest({url:t.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high"],symbol:s,start:-1,count:a.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){r.Status=Lt.STATUS_RECVDATA_ID,e.RecvOverlayHistoryData(t,r)}})):"continue"},n=0;n<this.OverlayChartPaint.length;++n){var o;r()}},this.RecvOverlayHistoryData=function(t,e){if(!e.IsDelete){var a=la.JsonDataToHistoryData(t),i=new pt;i.Data=a,i.DataType=0;var r=new pt;if(r.Data=a,r.Period=this.Period,r.Right=this.Right,r.DataType=0,r.Right>0&&Ea.IsSHSZStockA(t.symbol)&&!this.IsApiPeriod){var n=r.GetRightData(r.Right,{AlgorithmType:this.RightFormula});r.Data=n}var o=this.SourceData.GetOverlayData(r.Data,this.IsApiPeriod);if(r.Data=o,pt.IsDayPeriod(r.Period,!1)&&!this.IsApiPeriod){var s=r.GetPeriodData(r.Period);r.Data=s}e.Data=r,e.SourceData=i,e.Title=t.name,e.Symbol=t.symbol,e.Status=Lt.STATUS_FINISHED_ID,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=1,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.RequestOverlayHistoryMinuteData=function(){var t=this;if(this.OverlayChartPaint.length&&this.SourceData&&this.SourceData.Data)for(var e=this,a=this.GetRequestDataCount(),i=this.SourceData.Data[0].Date,r=this.SourceData.Data[0].Time,n=function(){var n=t.OverlayChartPaint[o];if(!n.MainData)return"continue";if(n.Status!=Lt.STATUS_NONE_ID)return"continue";var h=n.Symbol;return h?(n.Status=Lt.STATUS_REQUESTDATA_ID,t.NetworkFilter&&(s={Name:"KLineChartContainer::RequestOverlayHistoryMinuteData",Explain:"叠加股票分钟K线数据",Request:{Url:e.MinuteKLineApiUrl,Data:{symbol:h,count:a.MaxRequestMinuteDayCount,first:{date:i,time:r},field:["name","symbol","yclose","open","price","high","vol","amount"]},Type:"POST"},Self:t,PreventDefault:!1},t.NetworkFilter(s,function(t){n.Status=Lt.STATUS_RECVDATA_ID,e.RecvOveralyHistoryMinuteData(t,n)}),1==s.PreventDefault)?"continue":void v.HttpRequest({url:t.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","vol","amount"],symbol:h,start:-1,count:a.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(t){n.Status=Lt.STATUS_RECVDATA_ID,e.RecvOveralyHistoryMinuteData(t,n)}})):"continue"},o=0;o<this.OverlayChartPaint.length;++o){var s;n()}},this.RecvOveralyHistoryMinuteData=function(t,e){if(this.EnableVerifyRecvData&&t.symbol!=e.Symbol)D.Chart.Warn("[MinuteChartContainer::RecvOveralyHistoryMinuteData] recv data symbol not match. paint["+e.Symbol+"] , Recv["+t.symbol+"]");else{var a=la.JsonDataToMinuteHistoryData(t);if(a){var i=new pt;i.Data=a,i.DataType=1;var r=new pt;r.Data=a,r.Period=this.Period,r.Right=this.Right,r.DataType=1;var n=this.SourceData.GetOverlayMinuteData(r.Data,this.IsApiPeriod);if(r.Data=n,pt.IsMinutePeriod(r.Period,!1)&&!this.IsApiPeriod){var o=r.GetPeriodData(r.Period);r.Data=o}e.Data=r,e.SourceData=i,e.Title=t.name,e.Symbol=t.symbol,e.Status=Lt.STATUS_FINISHED_ID,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=1,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}},this.ResetOverlaySymbolStatus=function(){for(var t in this.OverlayChartPaint){this.OverlayChartPaint[t].Status=Lt.STATUS_NONE_ID}},this.ClearOverlaySymbol=function(){for(var t in this.OverlayChartPaint){this.OverlayChartPaint[t].IsDelete=!0}this.OverlayChartPaint=[],this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=0,this.UpdateFrameMaxMin(),this.Draw()},this.DeleteOverlaySymbol=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol===t)return a.IsDelete=!0,this.OverlayChartPaint.splice(e,1),this.OverlayChartPaint.length<=0&&(this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=0),this.UpdateFrameMaxMin(),this.Draw(),!0}return console.warn("[KLineChartContainer::DeleteOverlaySymbol] overlay symbol="+t+" not exist."),!1},this.RequestFlowCapitalData=function(){if(this.Symbol&&1!=this.FlowCapitalReady){var t=this.Symbol.toUpperCase(),e=!0;if((Ea.IsBIT(t)||Ea.IsFutures(t))&&(e=!1),this.EnableFlowCapital&&Ea.IsBIT(t)&&1==this.EnableFlowCapital.BIT&&(e=!0),!e)return D.Chart.Log("[KLineChartContainer::RequestFlowCapitalData] symbol="+this.Symbol+" not need download data."),void(this.FlowCapitalReady=!0);var a=this,i=["name","date","symbol","capital.a"];if(this.NetworkFilter){var r={Name:"KLineChartContainer::RequestFlowCapitalData",Explain:"流通股本数据",Request:{Url:a.StockHistoryDayApiUrl,Data:{symbol:[this.Symbol],orderfield:"date",field:i},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,function(t){a.RecvFlowCapitalData(t)}),1==r.PreventDefault)return}v.HttpRequest({url:this.StockHistoryDayApiUrl,data:{field:i,symbol:[this.Symbol],orderfield:"date"},type:"post",dataType:"json",async:!0,success:function(t){a.RecvFlowCapitalData(t)}})}},this.RecvFlowCapitalData=function(t){if(t.stock&&1==t.stock.length){var e=t.stock[0];if(this.EnableVerifyRecvData&&e.symbol!=this.Symbol)D.Chart.Warn("[MinuteChartContainer::RecvFlowCapitalData] recv data symbol not match. HQChart["+this.Symbol+"] , Recv["+e.symbol+"]");else{var a=new Array;for(var i in e.stockday){var r=e.stockday[i],n=new ct;n.Date=r.date;var o=r.capital;o&&(o.a>0&&(n.Value=o.a,a.push(n)))}if(this.IsApiPeriod){var s=this.ChartPaint[0].Data,h=null;if(pt.IsMinutePeriod(this.Period,!0)?h=s.GetMinuteFittingFinanceData(a):pt.IsDayPeriod(this.Period,!0)&&(h=s.GetFittingFinanceData(a)),h&&s.Data&&h.length==s.Data.length)for(var l in s.Data){r=s.Data[l];h[l]&&Te.IsNumber(h[l].Value)&&(r.FlowCapital=h[l].Value)}}else if(pt.IsMinutePeriod(this.Period,!0)){for(h=this.SourceData.GetMinuteFittingFinanceData(a),l=0;l<this.SourceData.Data.length;++l){r=this.SourceData.Data[l];h[l]&&Te.IsNumber(h[l].Value)&&(r.FlowCapital=h[l].Value)}var u=this.ChartPaint[0].Data;if((C=new pt).Data=this.SourceData.Data,u.Right>0&&this.RightFormula>=1){var c=C.GetRightData(u.Right,{AlgorithmType:this.RightFormula});C.Data=c}if(pt.IsMinutePeriod(u.Period,!1)){var f=C.GetPeriodData(u.Period);C.Data=f}u.Data=C.Data}else{h=this.SourceData.GetFittingFinanceData(a);for(var d in this.SourceData.Data){r=this.SourceData.Data[d];h[d]&&Te.IsNumber(h[d].Value)&&(r.FlowCapital=h[d].Value)}var C;u=this.ChartPaint[0].Data;if((C=new pt).Data=this.SourceData.Data,u.Right>0){c=C.GetRightData(u.Right,{AlgorithmType:this.RightFormula});C.Data=c}if(pt.IsDayPeriod(u.Period,!1)){f=C.GetPeriodData(u.Period);C.Data=f}u.Data=C.Data}this.FlowCapitalReady=!0;var p=!1;for(var l in this.ExtendChartPaint){if("StockChip"==(r=this.ExtendChartPaint[l]).ClassName){p=!0;break}}p&&this.Draw()}}},this.CreateChartDrawPicture=function(t,e,a){var i=null,r=We.GetDrawPictureByName(t);if(r&&("ChartDrawPictureText"!=(i=r.Create()).ClassName&&"ChartDrawVolProfile"!=i.ClassName||(i.HQChart=this)),!i&&We.MapIonFont.has(t)){var n=We.MapIonFont.get(t);(i=new Je).FontOption.Family=n.Family,i.Text=n.Text,n.Color&&(i.LineColor=n.Color)}if(!i)return!1;i.Canvas=this.Canvas,i.Status=0,i.Symbol=this.Symbol,i.Period=this.Period,i.Right=this.Right,i.Option=this.ChartDrawOption,a&&(i.FinishedCallback=a),e&&i.SetOption(e);var o=this;return i.Update=function(){o.DrawDynamicInfo()},i.GetActiveDrawPicture=function(){return o.GetActiveDrawPicture()},this.CurrentChartDrawPicture=i,!0},this.AddChartDrawPicture=function(t){if(!t)return null;if(t.FrameID<0||t.FrameID>=this.Frame.SubFrame.length)return null;var e=this,a=We.GetDrawPictureByClassName(t.ClassName);if(!a)return null;var i=a.Create();return i.Canvas=this.Canvas,i.Status=10,i.Frame=this.Frame.SubFrame[t.FrameID].Frame,i.Symbol=this.Symbol,i.Period=this.Period,i.Right=this.Right,i.Option=this.ChartDrawOption,t.Value&&(i.Value=t.Value),t.Guid&&(i.Guid=t.Guid),i.ImportStorageData&&i.ImportStorageData(t),i.SetOption(t),t.EnableUpdateXValue&&i.UpdateXValue(),i.ValueToPoint(),i.GetActiveDrawPicture=function(){return e.GetActiveDrawPicture()},"ChartDrawPictureText"===i.ClassName&&(i.IsInitialized=!0),this.ChartDrawPicture.push(i),this.DrawDynamicInfo(),i},this.PasteChartDrawPicture=function(t,e,a){if(!t||!t.ClassName)return null;if(e<0||e>=this.Frame.SubFrame.length)return null;var i=We.GetDrawPictureByClassName(t.ClassName);if(!i)return null;var r=i.Create();if(!r)return null;var n=this;return r.Canvas=this.Canvas,r.Status=10,r.Frame=this.Frame.SubFrame[e].Frame,r.Symbol=this.Symbol,r.Period=this.Period,r.Right=this.Right,r.Option=this.ChartDrawOption,r.GetActiveDrawPicture=function(){return n.GetActiveDrawPicture()},r.SetOption&&r.SetOption(t),this.RandomDrawPictureValue(r,t),r.PointToValue(),"ChartDrawPictureText"===r.ClassName&&(r.IsInitialized=!0),this.ChartDrawPicture.push(r),this.ChartDrawStorage&&this.ChartDrawStorage.SaveDrawData(r),this.DrawDynamicInfo(),r},this.RandomDrawPictureValue=function(t,e){if(Te.IsNonEmptyArray(e.Value)){var a=this.GetKLineChart();if(!a||!a.Data||!Te.IsNumber(a.Data.DataOffset)||a.Data.DataOffset<0)return null;if(!Te.IsNonEmptyArray(a.Data.Data))return null;var i=a.Data.Data,r=(a.Data.DataOffset,a.Data.DataOffset+a.ChartFrame.XPointCount-1);r>=i.length&&(r=i.length-1);var n=t.Frame.ChartBorder.GetHeight(),o=(t.Frame.HorizontalMax,t.Frame.HorizontalMin,t.Frame.ChartBorder.GetBottomEx()-n*e.YFristScale),s=5,h=2,l=Math.floor(Math.random()*(s-h+1))+h,u=e.Value[0].XIndex+l;t.Value=[];for(var c=0;c<e.Value.length;++c){var f=e.Value[c];t.Value[c]={XValue:u+f.XOffset},t.Point[c]={Y:o+f.YOffset,X:t.Frame.GetXFromIndex(u+f.XOffset,!1)}}}},this.MoveChartDrawPicture=function(t,e,a,i){var r=this.CurrentChartDrawPicture;if(!r)return!1;var n=A();a&&(n=1);var o=t*n,s=e*n;return r.Move(o,s,i),!0},this.UpdateChartDrawXValue=function(){for(var t in this.ChartDrawPicture){this.ChartDrawPicture[t].UpdateXValue()}},this.OnRightMenu=function(t,e,a){var i=A();if(this.RightMenu){var r=this.Frame.PtInFrame(t*i,e*i);a.data={Chart:this,FrameID:r},this.RightMenu.DoModal(a)}var n=this.GetEventCallback(w.ON_CONTEXT_MENU);if(n){var o={X:t,Y:e,Event:a,FrameID:r=this.Frame.PtInFrame(t*i,e*i)};n.Callback(n,o,this)}},this.ReloadChartDrawPicture=function(){if(this.ChartDrawPicture=[],this.ChartDrawStorageCache,this.ChartDrawStorage){this.ChartDrawStorageCache=this.ChartDrawStorage.GetDrawData({Symbol:this.Symbol,Period:this.Period});var t=this.GetEventCallback(w.ON_LOAD_DRAWPICTURE);if(t&&t.Callback){var e={Symbol:this.Symbol,Period:this.Period,DrawStorage:this.ChartDrawStorage,ChartDrawStorageCache:this.ChartDrawStorageCache};t.Callback(t,e,this)}}},this.CreateChartDrawPictureByStorage=function(){if(Te.IsNonEmptyArray(this.ChartDrawStorageCache)){for(var t=0;t<this.ChartDrawStorageCache.length;++t){var e=this.ChartDrawStorageCache[t];if(!(e.FrameID<0||!this.Frame.SubFrame||this.Frame.SubFrame.length<e.FrameID)){var a=We.CreateChartDrawPicture(e);if(a){a.Canvas=this.Canvas,a.Status=10,a.Frame=this.Frame.SubFrame[e.FrameID].Frame,a.Option=this.ChartDrawOption,a.ImportStorageData&&a.ImportStorageData(e),a.UpdateXValue(),a.ValueToPoint();var i=this;a.GetActiveDrawPicture=function(){return i.GetActiveDrawPicture()},"ChartDrawPictureText"===a.ClassName&&(a.IsInitialized=!0),this.ChartDrawPicture.push(a)}}}this.ChartDrawStorageCache=null}},this.RequestKLineMatch=function(t,e){var a=this,i=e.Scope,r=e.WaitDialog;D.Chart.Log("[KLineChartContainer::RequestKLineMatch",t,i);for(var n=new Array,o=new Array,s=t.Start;s<t.End&&s<t.Data.Data.length;++s){var h=t.Data.Data[s];n.push(h.Date),o.push(h.Close)}var l={Stock:t.Stock,Index:{Start:t.Start,End:t.End},Date:{Start:n[0],End:n[n.length-1]},Minsimilar:i.Minsimilar,Plate:i.Plate,DayRegion:300};p.default.ajax({url:this.KLineMatchUrl,data:{userid:"guest",plate:i.Plate,period:this.Period,right:this.Right,dayregion:l.DayRegion,minsimilar:i.Minsimilar,sampledate:n,samplevalue:o},type:"post",dataType:"json",async:!0,success:function(t){r&&r.Close(),a.RecvKLineMatchData(t,l)},error:function(t,e,a){console.warn("[KLineChartContainer::RequestKLineMatch] failed",t,e,a),r&&r.Close()}})},this.RecvKLineMatchData=function(t,e){D.Chart.Log("[KLineChartContainer::RecvKLineMatchData] recv",t,e);var a=[];for(var i in t.match){if((s=t.match[i]).symbol!=e.Stock.Symbol)for(var r in s.data){var n=s.data[r],o={Symbol:s.symbol,Name:s.name,Similar:n.similar,Start:n.start,End:n.end};a.push(o)}}if(a.sort(function(t,e){return e.Similar-t.Similar}),D.Chart.Log("[KLineChartContainer::RecvKLineMatchData] filterData",a),this.mapEvent.has(w.RECV_KLINE_MATCH)){var s;t={Sample:e,Match:a,Source:t};(s=this.mapEvent.get(w.RECV_KLINE_MATCH)).Callback(s,t,this)}else{var h=new function(t){this.newMethod=xa,this.newMethod(t),delete this.newMethod,this.MatchData,this.Sample,this.Dialog,this.HQChart,this.PageData,this.Close=function(){this.DivElement.removeChild(this.Dialog)},this.Create=function(){this.ID=P();var t=document.createElement("div");t.className="jchart-kline-match-box",t.id=this.ID,t.innerHTML="<div class='parameter jchart-kline-match-box'>\n            <div class='parameter-header'>\n                <span>形态匹配</span>\n                <strong id='close' class='icon iconfont icon-close'></strong>\n            </div>\n            <div class='parameter-content'>\n                <p class='dataCount'></p>\n                <table class='matchTable'>\n                    <thead>\n                        <tr>\n                            <td>股票名称</td>\n                            <td>匹配度</td>\n                            <td>时间段</td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                    </tbody>\n                </table>\n                <div class='pagination' data-current='1'></div>\n            </div>\n            <div class='parameter-footer'>\n                <button id='close' class='submit' >确定</button>\n            </div>\n        </div>".trim(),this.DivElement.appendChild(t),this.Dialog=t,(0,p.default)("#"+this.ID+" #close").click({divBox:this},function(t){t.data.divBox.Close()})},this.BindData=function(){D.Chart.Log("[KLineMatchDialog::BindData] 形态源: "+this.Sample.Stock.Name+" 区间:"+this.Sample.Date.Start+" - "+this.Sample.Date.End);var t=this.MatchData.length+1,e={NewData:{},MetaData:[],PageCount:0,Count:t},a=0;(0,p.default)("#"+this.ID+" .dataCount").html("个数："+t);for(var i=0;i<t;i++){var r={};if(0==i)r={Symbol:this.Sample.Stock.Symbol,Name:this.Sample.Stock.Name,Rate:"形态源",Color:"red",Date:this.Sample.Date.Start+"-"+this.Sample.Date.End};else{var n=this.MatchData[i-1];r={Symbol:n.Symbol,Name:n.Name,Rate:Number(100*n.Similar).toFixed(2),Color:"",Date:n.Start+"-"+n.End}}e.MetaData.push(r)}a=e.Count%10==0?e.Count/10:Math.floor(e.Count/10)+1,e.PageCount=a,this.PaginationMetaData(e),this.PageData=e,D.Chart.Log("[KLineMatchDialog::DoModal pageData]",e),this.RenderDom(1),this.PaginationInit("#"+this.ID,e.PageCount,this.paginationCallback)},this.RenderDom=function(t){var e=this.PageData.NewData[t];D.Chart.Log("[KLineMatchDialog::RenderDom currentPageData]",e);for(var a="",i=0;i<e.length;i++)a+=("<tr>\n                        <td class="+e[i].Color+">"+e[i].Name+"</td>\n                        <td class="+e[i].Color+">"+e[i].Rate+"</td>\n                        <td class="+e[i].Color+">"+e[i].Date+"</td>\n                    </tr>").trim();(0,p.default)("#"+this.ID+" .matchTable tbody").html(a)};var e=this;this.paginationCallback=function(t){e.RenderDom(t),e.PaginationInit("#"+e.ID,e.PageData.PageCount,e.paginationCallback)},this.PaginationInit=function(t,e,a){var i="",r=(0,p.default)(t+" .pagination").data("current"),n=0;if(r<5)if(e>=5)for(var o=0;o<5;o++)i+=o+1!=r?"<span>"+(o+1)+"</span>":"<span class='active'>"+(o+1)+"</span>";else for(var o=0;o<e;o++)i+=o+1!=r?"<span>"+(o+1)+"</span>":"<span class='active'>"+(o+1)+"</span>";else{n=r+1>e?r:r+1;for(var s=r-3;s<=n;s++)i+=s!=r?"<span>"+s+"</span>":"<span class='active'>"+s+"</span>"}i="<span class='beforePage'>上一页</span>"+i+"<span class='nextPage'>下一页</span>",(0,p.default)(t+" .pagination").html(i),(0,p.default)(t+" .pagination span").bind("click",{maxpage:e,Callback:a},this.PaginationCurrentIndex)},this.PaginationCurrentIndex=function(t){var e=(0,p.default)(this).text();D.Chart.Log("[::PaginationCurrentIndex text]",e);var a=Number((0,p.default)(this).parent().data("current")),i=t.data.maxpage,r=t.data.Callback,n=1;n="上一页"===e?1===a?a:a-1:"下一页"===e?a===i?a:a+1:Number(e),(0,p.default)(this).parent().data("current",n),r(n)},this.PaginationMetaData=function(t){for(var e={},a=t.MetaData,i=t.PageCount,r=0;r<i;r++){for(var n=[],o=0;o<10;o++){var s=10*r+o;if(!(s<=a.length-1))break;var h=a[s];n.push(h)}e[r+1]=n}t.NewData=e},this.DoModal=function(t){var e=t.data.Chart;null==this.ID&&this.Create(),this.MatchData=t.data.MatchData,this.Sample=t.data.Sample,this.HQChart=e,this.BindData();var a=e.Frame.ChartBorder,i=(R(),a.GetWidth()/2),r=a.GetHeight()/2;this.Show(i,r,200,200)}}(this.Frame.ChartBorder.UIElement.parentNode),l={data:{Chart:this,MatchData:a,Sample:e,Source:t}};h.DoModal(l)}},this.UpdataChartInfo=function(){var t=null;if(0==this.Period)for(var e in t=new C.default,this.ChartInfo){var a=this.ChartInfo[e].Data;for(var i in a){var r=a[i];t.has(r.Date.toString())?t.get(r.Date.toString()).Data.push(r):t.set(r.Date.toString(),{Data:new Array(r)})}}else if(pt.IsDayPeriod(this.Period,!1)){if(t=new C.default,(l=this.ChartPaint[0].Data)&&l.Data&&l.Data.length>0){var n=l.Data[0],o=[];for(var e in this.ChartInfo){var s=this.ChartInfo[e];for(var i in s.Data){(r=s.Data[i]).Date>=n.Date&&o.push(r)}}o.sort(function(t,e){return t.Date-e.Date});for(e=0;e<l.Data.length;){var h=l.Data[e];if(o.length<=0)break;s=o[0];h.Date<s.Date?++e:(t.has(h.Date.toString())?t.get(h.Date.toString()).Data.push(s):t.set(h.Date.toString(),{Data:new Array(s)}),o.shift())}}}else if(pt.IsMinutePeriod(this.Period,!0)){var l;if(t=new C.default,(l=this.ChartPaint[0].Data)&&l.Data&&l.Data.length>0){var u=l.Data[0];for(o=[],e=0,i=0;e<this.ChartInfo.length;++e){s=this.ChartInfo[e];for(i=0;i<s.Data.length;++i){((r=s.Data[i]).Date>=u.Date||r.Date==u.Date&&r.Time>=u.Time)&&o.push(r)}}o.sort(function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date});for(e=0;e<l.Data.length;){h=l.Data[e];if(o.length<=0)break;s=o[0];if(h.Date<s.Date||h.Date==s.Date&&h.Time<s.Time)++e;else{var c=h.Date+"-"+h.Time;t.has(c)?t.get(c).Data.push(s):t.set(c,{Data:new Array(s)}),o.shift()}}}}this.ChartPaint[0].InfoData=t},this.UpdateWindowIndex=function(t){var e=new pt;if(e.Data=this.SourceData.Data,e.Period=this.Period,e.Right=this.Right,this.IsApiPeriod);else{if(e.Right>0){var a=e.GetRightData(e.Right,{AlgorithmType:this.RightFormula});e.Data=a}if(pt.IsDayPeriod(e.Period,!1)||pt.IsMinutePeriod(e.Period,!1)){var i=e.GetPeriodData(e.Period);e.Data=i}}if("function"==typeof this.WindowIndex[t].ExecuteScript){var r=this.ChartPaint[0].Data;this.WindowIndex[t].ExecuteScript(this,t,r)}else if("function"==typeof this.WindowIndex[t].RequestData){r=this.ChartPaint[0].Data;this.WindowIndex[t].RequestData(this,t,r,null)}else this.WindowIndex[t].BindData(this,t,e);this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.GetOverlayIndexByIdentify=function(t){for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e];if(Te.IsNonEmptyArray(a.OverlayIndex))for(var i=0;i<a.OverlayIndex.length;++i){var r=a.OverlayIndex[i];if(r.Identify===t)return{OverlayItem:r,WindowIndex:e}}}return null},this.UpdateOverlayIndex=function(t){var e=this.GetOverlayIndexByIdentify(t);if(null!=e){if(this.ChartPaint[0]){var a=this.ChartPaint[0].Data;a&&this.BindOverlayIndexData(e.OverlayItem,e.WindowIndex,a)}}else console.warn("[KLineChartContainer::UpdateOverlayIndex] can't find overlay index. [identify="+t+"]")},this.ChangeWindowIndexParam=function(t){this.WindowIndex[t].Index[0].Param+=1,this.WindowIndex[t].Index[1].Param+=1,this.UpdateWindowIndex(t)},this.OnDoubleClick=function(t,e,a){if(this.EnableYDrag&&(this.EnableYDrag.Left||this.EnableYDrag.Right)&&this.Frame&&this.Frame.PtInFrameY){var i=A(),r=(t=(a.clientX-this.UIElement.getBoundingClientRect().left)*i,e=(a.clientY-this.UIElement.getBoundingClientRect().top)*i,this.Frame.PtInFrameY(t,e));r&&r.Index>=0&&0==r.IsOverlay&&this.CancelZoomUpDownFrameY(r)}var n;this.SelectedChart.EnableSelected&&(n=this.PtInChart(t,e));var o={SelectedChart:n};if(this.DBClickEvent(o,a),!n&&this.EnableZoomIndexWindow){var s=this.Frame.PtInFrame(t,e);if(D.Chart.Log("[KLineChartContainer::OnDoubleClick] frameId",s),s>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(s,{X:t,Y:e}))return this.Frame.SetSizeChage(!0),this.Draw(),!0}var h=null;if(this.mapEvent.has(w.DBCLICK_KLINE)&&(h=this.mapEvent.get(w.DBCLICK_KLINE)),this.MinuteDialog||h){var l=new It;if(this.PtInChartPaintTooltip(t,e,l)&&l.Data){if(h){null!=this.ClickChartTimer&&(clearTimeout(this.ClickChartTimer),this.ClickChartTimer=null);var u={Tooltip:l,Stock:{Symbol:this.Symbol,Name:this.Name},X:a.clientX,Y:a.clientY};h.Callback(h,u,this)}this.MinuteDialog&&(a.data={Chart:this,Tooltip:l},this.MinuteDialog.DoModal(a))}}},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=void 0)},this.AutoUpdate=function(t){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var e=this,a=Ea.GetMarketStatus(this.Symbol);if(0!=a&&3!=a){var i=this.AutoUpdateFrequency;1==a?this.AutoUpdateTimer=setTimeout(function(){e.AutoUpdate()},i):2==a&&(this.AutoUpdateTimer=setTimeout(function(){pt.IsDayPeriod(e.Period,!0)?e.RequestRealtimeData():pt.IsMinutePeriod(e.Period,!0)||pt.IsSecondPeriod(e.Period)?e.RequestMinuteRealtimeData():pt.IsTickPeriod(e.Period)&&e.RequestTickRealtimeData()},i))}else this.AutoUpdateTimer=setTimeout(function(){e.AutoUpdate()},2e4)}},this.GetMaxMinPageSize=function(){var t={},e=this.Frame.ChartBorder.GetWidth(),a=Ft[Ft.length-1][0]+Ft[Ft.length-1][1];return t.Max=parseInt(e/a)-2,a=Ft[0][0]+Ft[0][1],t.Min=parseInt(e/a)-2,D.Chart.Log("[KLineChartContainer::GetMaxMinPageSize] Max="+t.Max+" Min="+t.Min),t},this.GetChartStatus=function(){var t=this.Frame.SubFrame[0].Frame;if(!t)return null;var e=t.Data;if(!e)return null;var a={KLine:{},Zoom:{}};return a.KLine.Count=e.Data.length,a.KLine.Offset=e.DataOffset,a.KLine.PageSize=t.XPointCount,a.Zoom.Index=t.ZoomIndex,a.Zoom.Max=Ft.length,a},this.DragDownloadData=function(){var t=null;if(!(t=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data))return!1;if(!(t.DataOffset>0))if(pt.IsMinutePeriod(this.Period,!0)||pt.IsSecondPeriod(this.Period)){if(D.Chart.Log("[KLineChartContainer.DragDownloadData] Minute:[Enable="+this.DragDownload.Minute.Enable+", IsEnd="+this.DragDownload.Minute.IsEnd+", Status="+this.DragDownload.Minute.Status+", Period="+this.Period+"]"),!this.DragDownload.Minute.Enable)return;if(this.DragDownload.Minute.IsEnd)return;if(0!=this.DragDownload.Minute.Status)return;this.RequestDragMinuteData()}else if(pt.IsDayPeriod(this.Period,!0)){if(D.Chart.Log("[KLineChartContainer.DragDownloadData] Day:[Enable="+this.DragDownload.Minute.Enable+", IsEnd="+this.DragDownload.Minute.IsEnd+", Status="+this.DragDownload.Minute.Status+"]"),!this.DragDownload.Day.Enable)return;if(this.DragDownload.Day.IsEnd)return;if(0!=this.DragDownload.Day.Status)return;this.RequestDragDayData()}else if(pt.IsTickPeriod(this.Period)){if(D.Chart.Log("[KLineChartContainer.DragDownloadData] Tick:[Enable="+this.DragDownload.Tick.Enable+", IsEnd="+this.DragDownload.Tick.IsEnd+", Status="+this.DragDownload.Tick.Status+"]"),!this.DragDownload.Tick.Enable)return;if(this.DragDownload.Tick.IsEnd)return;if(0!=this.DragDownload.Tick.Status)return;this.RequestDragTickData()}},this.RequestDragTickData=function(){D.Chart.Log("[KLineChartContainer.RequestDragTickData] not finished.")},this.RequestDragMinuteData=function(){var t=this;this.AutoUpdateEvent(!1,"KLineChartContainer::RequestDragMinuteData"),this.CancelAutoUpdate();var e=this.DragDownload.Minute;e.Status=1;var a=this.SourceData.Data[0],i={field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,enddate:a.Date,endtime:a.Time,count:t.MaxRequestMinuteDayCount,first:{date:a.Date,time:a.Time}};if(Te.IsNonEmptyArray(this.OverlayChartPaint)){i.overlay=[];for(var r=0;r<this.OverlayChartPaint.length;++r){var n=this.OverlayChartPaint[r];i.overlay.push({symbol:n.Symbol})}}if(this.NetworkFilter){var o={Name:"KLineChartContainer::RequestDragMinuteData",Explain:"拖拽分钟|秒K线数据下载",Request:{Url:this.DragMinuteKLineApiUrl,Type:"POST",Data:i,Period:this.Period,Right:this.Right},DragDownload:e,Self:this,PreventDefault:!1};if(this.NetworkFilter(o,function(a){t.RecvDragMinuteData(a),e.Status=0,t.AutoUpdateEvent(!0,"KLineChartContainer::RequestDragMinuteData"),t.AutoUpdate()}),1==o.PreventDefault)return}v.HttpRequest({url:this.DragMinuteKLineApiUrl,data:i,type:"post",dataType:"json",async:!0,success:function(a){t.RecvDragMinuteData(a),e.Status=0,t.AutoUpdateEvent(!0,"KLineChartContainer::RequestDragMinuteData"),t.AutoUpdate()}})},this.RecvDragMinuteData=function(t){var e=la.JsonDataToMinuteHistoryData(t);if(!e||e.length<=0)this.DragDownload.Minute.IsEnd=!0;else{for(var a=this.GetHistoryDataCount(),i=this.SourceData.Data[0],r=null,n=e.length-1;n>=0;--n){var o=e[n];if(i.Date>o.Date||i.Date==o.Date&&i.Time>o.Time){r=n;break}if(i.Date==o.Date&&i.Time==o.Time){i.YClose=o.YClose,r=n-1;break}}if(!(null==r&&r<0)){for(n=0;n<e.length&&n<=r;++n){o=e[n];this.SourceData.Data.splice(n,0,o)}var s=new pt;if(s.Data=this.SourceData.Data,s.Period=this.Period,s.Right=this.Right,s.DataType=this.SourceData.DataType,s.Symbol=this.Symbol,!this.IsApiPeriod&&(pt.IsDayPeriod(s.Period,!1)||pt.IsMinutePeriod(s.Period,!1))){var h=s.GetPeriodData(s.Period);s.Data=h}var l=this.GetKLineCalulate();if(l)s=l.RecvHistoryData(s,{Symbol:this.Symbol,Function:"RecvDragMinuteData"}),this.FlowCapitalReady=!0;this.UpdateMainData(s,a),this.UpdateOverlayDragMinuteData(t),this.BindInstructionIndexData(s);for(n=0;n<this.Frame.SubFrame.length;++n)this.BindIndexData(n,s);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.UpdateChartDrawXValue(),this.Draw(),this.BindAllOverlayIndexData(s)}}},this.UpdateOverlayDragMinuteData=function(t){if(Te.IsNonEmptyArray(this.OverlayChartPaint)){var e=t.overlay;if(Te.IsNonEmptyArray(e))for(var a=0;a<this.OverlayChartPaint.length;++a){var i=this.OverlayChartPaint[a];if(i.Symbol&&(i.MainData&&i.Status==Lt.STATUS_FINISHED_ID)){for(var r=null,n=0;n<e.length;++n){var o=e[n];if(o.symbol==i.Symbol){r=o;break}}if(r){var s=la.JsonDataToMinuteHistoryData(r),h=i.SourceData,l=h.Data[0],u=null;for(n=s.length-1;n>=0;--n){var c=s[n];if(l.Date>c.Date){u=n;break}if(l.Date==c.Date&&l.Time>c.Time){u=n;break}if(l.Date==c.Date&&l.Time==c.Time){l.YClose=c.YClose,u=n-1;break}}if(!(null==u&&u<0)){for(n=0;n<s.length&&n<=u;++n){c=s[n];h.Data.splice(n,0,c)}var f=new pt;f.Data=h.Data,f.Period=this.Period,f.Right=this.Right,f.DataType=0;var d=this.SourceData.GetOverlayMinuteData(f.Data,this.IsApiPeriod);if(f.Data=d,pt.IsMinutePeriod(f.Period,!1)&&!this.IsApiPeriod){var C=f.GetPeriodData(f.Period);f.Data=C}i.Data=f}}}}}},this.RequestDragDayData=function(){var t=this;this.AutoUpdateEvent(!1,"KLineChartContainer::RequestDragDayData"),this.CancelAutoUpdate();var e=this.DragDownload.Day;e.Status=1;var a=this.SourceData.Data[0],i={field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,enddate:a.Date,count:t.MaxRequestDataCount,first:{date:a.Date}};if(Te.IsNonEmptyArray(this.OverlayChartPaint)){i.overlay=[];for(var r=0;r<this.OverlayChartPaint.length;++r){var n=this.OverlayChartPaint[r];i.overlay.push({symbol:n.Symbol})}}if(this.NetworkFilter){var o={Name:"KLineChartContainer::RequestDragDayData",Explain:"拖拽日K数据下载",Request:{Url:this.DragKLineApiUrl,Type:"POST",Data:i,Period:this.Period,Right:this.Right},DragDownload:e,Self:this,PreventDefault:!1};if(this.NetworkFilter(o,function(a){t.RecvDragDayData(a),e.Status=0,t.AutoUpdateEvent(!0,"KLineChartContainer::RequestDragDayData"),t.AutoUpdate()}),1==o.PreventDefault)return}v.HttpRequest({url:this.DragKLineApiUrl,data:i,type:"post",dataType:"json",async:!0,success:function(a){t.RecvDragDayData(a),e.Status=0,t.AutoUpdateEvent(!0,"KLineChartContainer::RequestDragDayData"),t.AutoUpdate()}})},this.RecvDragDayData=function(t){var e=la.JsonDataToHistoryData(t);if(!e||e.length<=0)return this.DragDownload.Day.IsEnd=!0,void D.Chart.Log("[KLineChartContainer.RecvDragDayData] "+this.Symbol+" data end.");for(var a=this.GetHistoryDataCount(),i=this.SourceData.Data[0],r=null,n=e.length-1;n>=0;--n){var o=e[n];if(i.Date>o.Date){r=n;break}if(i.Date==o.Date){i.YClose=o.YClose,r=n-1;break}}if(!(null==r&&r<0)){for(n=0;n<e.length&&n<=r;++n){o=e[n];this.SourceData.Data.splice(n,0,o)}var s=new pt;if(s.Data=this.SourceData.Data,s.Period=this.Period,s.Right=this.Right,s.DataType=this.SourceData.DataType,s.Symbol=this.Symbol,!this.IsApiPeriod&&(pt.IsDayPeriod(s.Period,!1)||pt.IsMinutePeriod(s.Period,!1))){var h=s.GetPeriodData(s.Period);s.Data=h}var l=this.GetKLineCalulate();if(l)s=l.RecvHistoryData(s,{Symbol:this.Symbol,Function:"RecvDragDayData"}),this.FlowCapitalReady=!0;this.UpdateMainData(s,a),this.UpdateOverlayDragDayData(t),this.BindInstructionIndexData(s);for(n=0;n<this.Frame.SubFrame.length;++n)this.BindIndexData(n,s);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.UpdateChartDrawXValue(),this.Draw(),this.ReqeustKLineInfoData({FunctionName:"RecvDragDayData",StartDate:i.Date}),this.BindAllOverlayIndexData(s)}},this.UpdateOverlayDragDayData=function(t){if(Te.IsNonEmptyArray(this.OverlayChartPaint)){var e=t.overlay;if(Te.IsNonEmptyArray(e))for(var a=0;a<this.OverlayChartPaint.length;++a){var i=this.OverlayChartPaint[a];if(i.Symbol&&(i.MainData&&i.Status==Lt.STATUS_FINISHED_ID)){for(var r=null,n=0;n<e.length;++n){var o=e[n];if(o.symbol==i.Symbol){r=o;break}}if(r){var s=la.JsonDataToHistoryData(r),h=i.SourceData,l=h.Data[0],u=null;for(n=s.length-1;n>=0;--n){var c=s[n];if(l.Date>c.Date){u=n;break}if(l.Date==c.Date){l.YClose=c.YClose,u=n-1;break}}if(!(null==u&&u<0)){for(n=0;n<s.length&&n<=u;++n){c=s[n];h.Data.splice(n,0,c)}var f=new pt;if(f.Data=h.Data,f.Period=this.Period,f.Right=this.Right,f.DataType=0,f.Right>0&&Ea.IsSHSZStockA(r.symbol)&&!this.IsApiPeriod){var d=f.GetRightData(f.Right,{AlgorithmType:this.RightFormula});f.Data=d}var C=this.SourceData.GetOverlayData(f.Data,this.IsApiPeriod);if(f.Data=C,pt.IsDayPeriod(f.Period,!1)&&!this.IsApiPeriod){var p=f.GetPeriodData(f.Period);f.Data=p}i.Data=f}}}}}},this.SetCustomVerical=function(t,e){if(this.Frame&&!(t>=this.Frame.SubFrame.length)){var a=this.Frame.SubFrame[t];a.Frame&&(a.Frame.CustomVerticalInfo=e)}},this.OnSize=function(){if(this.Frame&&this.Frame.OnSize){var t=this.Frame.OnSize();this.Frame.SetSizeChage(!0),t.Changed&&(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(2),this.UpdateFrameMaxMin()),this.Draw()}},this.ClickFrameButton=function(t,e){var a=this.GetEventCallback(w.ON_CLICK_FRAME_TOOLBAR);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}if(t.ID==b.CLOSE_OVERLAY_INDEX)(r=t.IndexID)&&this.DeleteOverlayWindowsIndex(r);else if(t.ID==b.MODIFY_OVERLAY_INDEX_PARAM){var r=t.IndexID,n=t.Frame;e.data={Chart:this,Identify:r,IsOverlay:!0},n.ModifyIndexEvent&&n.ModifyIndexEvent(e)}else if(t.ID==b.CLOSE_INDEX_WINDOW){n=t.Frame;this.RemoveIndexWindow(n.Identify)}else if(t.ID==b.CHANGE_INDEX){n=t.Frame;e.data={Chart:this,Identify:n.Identify,IsOverlay:!1},n.ChangeIndexEvent&&n.ChangeIndexEvent(e)}else if(t.ID==b.MODIFY_INDEX_PARAM){n=t.Frame;e.data={Chart:this,Identify:n.Identify,IsOverlay:!1},n.ModifyIndexEvent&&n.ModifyIndexEvent(e)}else if(t.ID==b.OVERLAY_INDEX){n=t.Frame;e.data={Chart:this,Identify:n.Identify,IsOverlay:!0},n.ChangeIndexEvent&&n.ChangeIndexEvent(e)}else if(t.ID==b.MAX_MIN_WINDOW){r=t.IndexID,n=t.Frame;(o=t.FrameID)>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(o,null)&&(this.Frame.SetSizeChage(!0),this.Draw())}else if(t.ID==b.TITLE_WINDOW){r=t.IndexID,n=t.Frame;var o=t.FrameID;this.ShowIndexTitleOnly(o)&&(this.Frame.SetSizeChage(!0),this.Draw())}else if(t.ID==b.EXPORT_DATA){if(!(i=this.ExportData({Type:"CSV"})))return;var s=Date.now(),h="hqchart_"+this.Symbol+"_"+s+".csv",l=document.createElement("a"),u=new Blob([i],{type:"text/csv"});l.href=URL.createObjectURL(u),document.body.appendChild(l),l.setAttribute("download",h),l.click(),document.body.removeChild(l)}},this.ClickTitleButton=function(t,e){var a=this.GetEventCallback(w.ON_CLICK_TITLE_BUTTON);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}},this.ClickExtendChartButton=function(t,e){var a=this.GetEventCallback(w.ON_CLICK_EXTENDCHART_BUTTON);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}t.ID==b.CHIP_DEFULT?(t.Chart.ShowType=0,this.Draw()):t.ID==b.CHIP_LONG?(t.Chart.ShowType=1,this.Draw()):t.ID==b.CHIP_RECENT&&(t.Chart.ShowType=2,this.Draw())},this.RequestVolumeProfileData=function(t){var e=this,a=t.Chart;if(this.NetworkFilter){var i={Name:"KLineChartContainer::RequestVolumeProfileData",Explain:"成交量分布图下载",Request:{Period:this.Period,Right:this.Right,Start:t.Start,End:t.End,Symbol:this.Symbol,ValueAreaVol:t.ValueAreaVol},Self:this,VolProfile:a,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvVolumeProfileData(t,a)}),1==i.PreventDefault)return}},this.RecvVolumeProfileData=function(t,e){e.OnRecvVolumeProfileData(t),this.Draw()},this.ExportMainData=function(t,e){return t.ExportKLineData(e)},this.UpdateScrollBar=function(){if(this.ScrollBar){var t=this.GetChartStatus();if(t){var e=this.ChartPaint[0].Data,a=t.KLine.Offset,i={Start:a,End:a+t.KLine.PageSize-1,Data:e,Draw:!0,RightSpaceCount:this.RightSpaceCount};if(this.Frame&&this.Frame.ChartBorder){var r=this.Frame.ChartBorder;i.Border={Left:r.Left,Right:r.Right}}this.ScrollBar.UpdateSlider(i)}}},this.ResetScrollBar=function(){this.ScrollBar&&this.ScrollBar.Reset({Draw:!0})}}function ua(t){this.newMethod=M,this.newMethod(t),delete this.newMethod,this.ClassName="MinuteChartContainer",this.WindowIndex=new Array,this.Symbol,this.Name,this.SourceData,this.IndexBindData,this.IsAutoUpdate=!0,this.AutoUpdateFrequency=3e4,this.AutoUpdateTimer,this.TradeDate=0,this.DayCount=1,this.DayData,this.LimitPrice,this.IsShowBeforeData=!1,this.BeforeOpenData=null,this.IsBeforeData=!1,this.IsShowAfterData=!1,this.AfterCloseData=null,this.IsAfterData=!1,this.ShareAfterVol=0,this.ExtendWidth={Left:120,Right:120},this.IsShowLead=!0,this.IsShowMultiDayBeforeData=!1,this.MultiDayBeforeOpenData=null,this.IsShowMultiDayAfterData=!1,this.MultiDayAfterCloseData=null,this.MultiDayExtendWidth={Left:20,Right:20},this.ChartDrawStorage=new ta,this.ChartDrawStorageCache=null,this.MinuteApiUrl=ia.Domain+"/API/Stock",this.HistoryMinuteApiUrl=ia.Domain+"/API/StockMinuteData",this.ColorLineData,this.EnableSelectRect=!1,this.SelectRectDialog=null,this.CorssCursorIndex={DayIndex:-1,DataIndex:-1,Point:{X:-1,Y:-1},Type:-1},this.EnableNewIndex=!1,this.DayOffset={Offset:0,ShowDayCount:-1,DataOffset:0,DayCount:1},this.PageInfo={Enable:!1,Offset:-8888,ShowDayCount:4},this.SetCallCationDataBorder=function(t){if(t){var e={Left:t.Left?this.ExtendWidth.Left:0,Right:t.Right?this.ExtendWidth.Right:0};if(this.Frame.SetExtendWidth(e),t.MultiDay){var a=t.MultiDay,i={Left:a.Left?this.MultiDayExtendWidth.Left:0,Right:a.Right?this.MultiDayExtendWidth.Right:0};this.Frame.SetMultiDayMinuteWidth(i)}}},this.ReloadChartPaint=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&(a.ReloadResource&&a.ReloadResource(t),0==e?"Minute-Line"==a.Name&&(a.Color=ia.Minute.PriceColor,a.AreaColor=ia.Minute.AreaPriceColor):1==e?"Minute-Average-Line"==a.Name&&(a.Color=ia.Minute.AvPriceColor):2==e&&"Minute-Vol-Bar"==a.Name&&(a.Color=ia.Minute.VolBarColor))}},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.ClickFrameButton=function(t,e){var a=this.GetEventCallback(w.ON_CLICK_FRAME_TOOLBAR);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}if(t.ID==b.CLOSE_BEFOREOPEN_ID&&this.ShowCallAuctionData({Left:!1,Right:!1,MultiDay:{Left:!1,Right:!1}}),t.ID==b.CLOSE_OVERLAY_INDEX)(r=t.IndexID)&&this.DeleteOverlayWindowsIndex(r);else if(t.ID==b.MODIFY_OVERLAY_INDEX_PARAM){var r=t.IndexID,n=t.Frame;e.data={Chart:this,Identify:r,IsOverlay:!0},n.ModifyIndexEvent&&n.ModifyIndexEvent(e)}else if(t.ID==b.CLOSE_INDEX_WINDOW){n=t.Frame;this.RemoveIndexWindow(n.Identify)}else if(t.ID==b.CHANGE_INDEX){n=t.Frame;e.data={Chart:this,Identify:n.Identify,IsOverlay:!1},n.ChangeIndexEvent&&n.ChangeIndexEvent(e)}else if(t.ID==b.MODIFY_INDEX_PARAM){n=t.Frame;e.data={Chart:this,Identify:n.Identify,IsOverlay:!1},n.ModifyIndexEvent&&n.ModifyIndexEvent(e)}else if(t.ID==b.OVERLAY_INDEX){n=t.Frame;e.data={Chart:this,Identify:n.Identify,IsOverlay:!0},n.ChangeIndexEvent&&n.ChangeIndexEvent(e)}else if(t.ID==b.MAX_MIN_WINDOW){r=t.IndexID,n=t.Frame;(o=t.FrameID)>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(o,null)&&(this.Frame.SetSizeChage(!0),this.Draw())}else if(t.ID==b.TITLE_WINDOW){r=t.IndexID,n=t.Frame;var o=t.FrameID;this.ShowIndexTitleOnly(o)&&(this.Frame.SetSizeChage(!0),this.Draw())}else if(t.ID==b.EXPORT_DATA){if(!(i=this.ExportData({Type:"CSV"})))return;var s=Date.now(),h="hqchart_"+this.Symbol+"_"+s+".csv",l=document.createElement("a"),u=new Blob([i],{type:"text/csv"});l.href=URL.createObjectURL(u),document.body.appendChild(l),l.setAttribute("download",h),l.click(),document.body.removeChild(l)}},this.ChartOperator=function(t){var e=t.ID;if(e===F.OP_SCROLL_LEFT||e===F.OP_SCROLL_RIGHT){if(1==this.DayCount)return!1;if(!this.PageInfo.Enable)return!1;if(!this.DayData)return!1;var a=e===F.OP_SCROLL_LEFT,i=1;if(t.Step>0&&(i=t.Step),!this.DayOffset)return!1;if(a){var r=this.DayOffset.Offset;if((r+=i)+this.DayOffset.ShowDayCount>this.DayOffset.DayCount&&(r=this.DayOffset.DayCount-this.DayOffset.ShowDayCount),r==this.DayOffset.Offset)return!1;this.DayOffset.Offset=r}else{r=this.DayOffset.Offset;if((r-=i)<0&&(r=0),r==this.DayOffset.Offset)return!1;this.DayOffset.Offset=r}return this.UpdateHistoryMinuteUI(null),this.SendPageChangedEvent(),!0}if(e==F.OP_SCROLL_GOTO){if(1==this.DayCount)return!1;if(!this.PageInfo.Enable)return!1;if(!this.DayData)return!1;if(Te.IsNumber(t.ShowDayCount)&&(this.PageInfo.ShowDayCount=t.ShowDayCount,this.DayOffset.ShowDayCount=t.ShowDayCount),Te.IsNumber(t.Offset)){r=t.Offset;if(this.DayOffset.ShowDayCount>0&&r+this.DayOffset.ShowDayCount>=this.DayOffset.DayCount&&(r=this.DayOffset.DayCount-this.DayOffset.ShowDayCount),r==this.DayOffset.Offset)return!1;this.DayOffset.Offset=r}return this.UpdateHistoryMinuteUI(null),this.SendPageChangedEvent(),!0}if(e==F.OP_CORSSCURSOR_GOTO){if(!this.SourceData)return!1;if(!this.Frame||!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return!1;var n=this.Frame.SubFrame[0].Frame;if(!Te.IsNonEmptyArray(this.SourceData.Data))return!1;if(Te.IsNumber(t.Time)&&Te.IsNumber(t.Date)){for(var o=-1,s=null,h=null,l=0;l<this.SourceData.Data.length;++l){var u=this.SourceData.Data[l];if(Te.IsNumber(u.Close)&&(h=u.Close),u.Time==t.Time&&u.Date==t.Date){o=l,s=u.Close;break}}if(o<0&&1==this.DayCount&&!(Te.IsNumber(t.Type)&&t.Type>0)){var c=La.GetTimeData(this.Symbol);for(l=0;l<c.length;++l)if(c[l]==t.Time){o=l,s=h;break}}if(o<0){if(1==t.Type){var f={X:m=-1,Y:D=-1,IsInClient:this.IsMouseOnClient(m,D)};this.LastMouseStatus.OnMouseMove=f,this.LastMouseStatus.MoveOnPoint={X:m,Y:D};var d=this.GetEventCallback(w.ON_MOUSE_MOVE),C=this.TitlePaint[0];d&&C&&(C.OnMouseMoveEvent=d);var p={clientX:m,clientY:D};this.MoveOnPoint={X:m,Y:D},this.OnMouseMove(m,D,p),this.LastMouseStatus.MoveOnPoint=null,C&&(C.OnMouseMoveEvent=null)}return}}var m,D;f={X:m=n.GetXFromIndex(o),Y:D=n.GetYFromData(s),IsInClient:this.IsMouseOnClient(m,D)};this.LastMouseStatus.OnMouseMove=f,this.LastMouseStatus.MoveOnPoint={X:m,Y:D};d=this.GetEventCallback(w.ON_MOUSE_MOVE),C=this.TitlePaint[0];d&&C&&(C.OnMouseMoveEvent=d),this.MoveOnPoint={X:m,Y:D},this.OnMouseMove(m,D,{}),this.LastMouseStatus.MoveOnPoint=null,C&&(C.OnMouseMoveEvent=null)}},this.SendPageChangedEvent=function(){var t=this.GetEventCallback(w.ON_MINUTE_PAGE_CHANGED);if(t&&t.Callback){var e={DayOffset:this.DayOffset,DayData:this.DayData};t.Callback(t,e,this)}},this.IsMouseOnClient=function(t,e){var a=this.Frame.IsHScreen?this.Frame.ChartBorder.GetHScreenBorder():this.Frame.ChartBorder.GetBorder(),i=a.Left,r=a.Top,n=a.Right,o=a.Bottom;return t>=i&&t<=n&&e>=r&&e<=o},this.OnDragMode_One=function(e,a){var i=this.MouseDrag,r=e.X,n=e.Y;if(this.RectSelectDrag&&this.RectSelectDrag.Index>=0){if(r<5)return;var o={X:a.clientX,Y:a.clientY,PointIndex:this.RectSelectDrag.Index,Name:"MoveRectSelectLine"};this.MoveRectSelectPoint(o)&&(i.LastMove.X=a.clientX,this.Draw())}else{if(r<5&&n<5)return;if(!this.EnableSelectRect)return;this.UIElement.style.cursor="default";var s=i.Click.X-t.getBoundingClientRect().left,h=i.Click.Y-t.getBoundingClientRect().top,l=a.clientX-t.getBoundingClientRect().left,u=a.clientY-t.getBoundingClientRect().top;this.ShowSelectRect(s,h,l,u),i.LastMove.X=a.clientX,i.LastMove.Y=a.clientY}},this.OnMinuteSelectRectMouseUp=function(e){var a=this.MouseDrag;a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY;var i=new H,r=A();if(i.XStart=(a.Click.X-t.getBoundingClientRect().left)*r,i.YStart=(a.Click.Y-t.getBoundingClientRect().top)*r,i.XEnd=(a.LastMove.X-t.getBoundingClientRect().left)*r,i.YEnd=(a.LastMove.Y-t.getBoundingClientRect().top)*r,i.JSChartContainer=this,i.Stock={Symbol:this.Symbol,Name:this.Name},this.EnableSelectRect&&!this.BorderDrag&&this.GetSelectRectData(i)){var n=this.GetEventCallback(w.ON_SELECT_RECT),o=this.GetRectSelectPaint(),s=!0;if(n&&n.Callback){var h={X:a.LastMove.X-t.getBoundingClientRect().left,Y:a.LastMove.Y-t.getBoundingClientRect().top,SelectData:i,RectSelectPaint:o};n.Callback(n,h,this),s=!1}s&&this.SelectRectDialog?(e.data={Chart:this,X:a.LastMove.X-t.getBoundingClientRect().left,Y:a.LastMove.Y-t.getBoundingClientRect().top,SelectData:i,RectSelectPaint:o},this.SelectRectDialog.DoModal(e)):(this.HideSelectRect(),this.UpdateSelectRect(i.Start,i.End))}else this.TryClickPaintEvent(w.ON_CLICKUP_CHART_PAINT,this.ClickDownPoint,e),this.ClickEvent(e)},this.OnDragSelectRectMouseUp=function(t){var e=this.GetRectSelectPaint();if(e){var a=e.GetSelectRectData();if(a){var i=A(),r=this.ChartCorssCursor,n=r.LastPoint.X/i,o=r.LastPoint.Y/i,s=!0,h=this.GetEventCallback(w.ON_DRAG_SELECT_RECT_MOUSEUP);if(h){var l={X:n,Y:o,SelectData:a,RectSelectPaint:e,IsShowDialog:!1};h.Callback(h,l,this),s=l.IsShowDialog}s&&this.SelectRectDialog&&(t.data={Chart:this,X:n,Y:o,SelectData:a,RectSelectPaint:e},this.SelectRectDialog.DoModal(t))}}},this.UpdateSelectRect=function(t,e){if(this.SourceData&&this.SourceData.Data){var a=this.GetRectSelectPaint();if(a){var i=this.SourceData;if(i&&Te.IsNonEmptyArray(i.Data)){var r=i.Data.length,n=i.Data[t];e>=r&&(e=r-1);var o=i.Data[e];D.Chart.Log("[MinuteChartContainer::UpdateSelectRect]",n,o),a.SetPoint(n,{Index:0}),a.SetPoint(o,{Index:1}),this.Draw()}}}},this.MoveRectSelectPoint=function(e){var a=this.GetRectSelectPaint();if(!a)return!1;if(!this.SourceData||!this.SourceData.Data)return!1;var i=this.SourceData;if(!this.Frame.SubFrame[0])return!1;var r=this.Frame.SubFrame[0].Frame,n=A(),o=(e.X-t.getBoundingClientRect().left)*n,s=r.GetXData(o),h=(s=parseInt(s.toFixed(0)))+i.DataOffset;h>=i.Data.length&&(h=i.Data.length-1);var l=i.Data[h];if(D.Chart.Log("[MinuteChartContainer::MoveRectSelectPoint] point, item",e.PointIndex,l),!a.SetPoint(l,{Index:e.PointIndex}))return!1;var u=this.GetEventCallback(w.ON_DRAG_SELECT_RECT);if(u){var c=a.GetSelectRectData(),f={X:e.X,Y:e.Y,SelectData:c,RectSelectPaint:a};u.Callback(u,f,this)}return!0},this.GetLastCursorIndex=function(t){if(1==t.DataType)for(var e=t.Data.length-1;e>=0;--e){if((r=t.Data[e])&&r.DayItem&&r.DayItem.Data)return t.IndexData.DayIndex=0,t.IndexData.DataIndex=r.DayItem.Data.length-1,void(t.IndexData.Type=r.Type)}else if(2==t.DataType)for(e=t.Data.length-1;e>=0;--e)for(var a=t.Data[e],i=a.length-1;i>=0;--i){var r;if((r=a[i])&&r.DayItem&&r.DayItem.Data)return t.IndexData.DayIndex=e,t.IndexData.DataIndex=r.DayItem.Data.length-1,void(t.IndexData.Type=r.Type)}},this.GetFirstCursorIndex=function(t){if(1==t.DataType)for(var e=0;e<t.Data.length;++e){if((r=t.Data[e])&&r.DayItem&&r.DayItem.Data)return t.IndexData.DayIndex=0,t.IndexData.DataIndex=0,void(t.IndexData.Type=r.Type)}else if(2==t.DataType)for(e=0;e<t.Data.length;++e)for(var a=t.Data[e],i=0;i<a.length;++i){var r;if((r=a[i])&&r.DayItem&&r.DayItem.Data)return t.IndexData.DayIndex=e,t.IndexData.DataIndex=0,void(t.IndexData.Type=r.Type)}},this.GetAfterCloseData=function(){var t=null;return this.AfterCloseData&&this.IsShowAfterData&&(t=this.AfterCloseData),t},this.GetBeforeOpenData=function(){var t=null;return this.BeforeOpenData&&this.IsShowBeforeData&&(t=this.BeforeOpenData),t},this.MoveCorssCursorIndex=function(t){if(!this.EnableNewIndex)return!1;if(!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return!1;var e=this.Frame.SubFrame[0].Frame;if(1==this.CorssCursorIndex.Type||2==this.CorssCursorIndex.Type||3==this.CorssCursorIndex.Type||-1==this.CorssCursorIndex.Type){var a=[],i=this.GetBeforeOpenData();a.push({DayItem:i,Type:2});i=null;this.SourceData&&(i=this.SourceData),a.push({DayItem:i,Type:1});i=this.GetAfterCloseData();a.push({DayItem:i,Type:3});var r={DataType:1,Data:a,IndexData:this.CorssCursorIndex,Point:{X:null,Y:null}},n=1;if(t.IsMoveLeft){if(this.CorssCursorIndex.DayIndex<0&&this.CorssCursorIndex.DataIndex<0&&(this.GetLastCursorIndex(r),n=0),e.MoveXIndexLeft(n,r)){this.LastPoint.X=r.Point.X,this.LastPoint.Y=r.Point.Y,1==this.CorssCursorIndex.Type&&(this.CursorIndex=this.CorssCursorIndex.CursorIndex);t={ParentFunction:"MoveCorssCursorIndex",Point:{X:r.Point.X,Y:r.Point.Y},IsPhone:!1,ClientPos:this.CorssCursorIndex.Type};this.DrawDynamicInfo(t)}}else if(this.CorssCursorIndex.DayIndex<0&&this.CorssCursorIndex.DataIndex<0&&(this.GetFirstCursorIndex(r),n=0),e.MoveXIndexRight(n,r)){this.LastPoint.X=r.Point.X,this.LastPoint.Y=r.Point.Y,1==this.CorssCursorIndex.Type&&(this.CursorIndex=this.CorssCursorIndex.CursorIndex);t={ParentFunction:"MoveCorssCursorIndex",Point:{X:r.Point.X,Y:r.Point.Y},IsPhone:!1,ClientPos:this.CorssCursorIndex.Type};this.DrawDynamicInfo(t)}}else if(10==this.CorssCursorIndex.Type||20==this.CorssCursorIndex.Type||30==this.CorssCursorIndex.Type||-2==this.CorssCursorIndex.Type){a=[];var o=0,s=this.DayData.length;this.DayOffset&&(Te.IsNumber(this.DayOffset.Offset)&&(o=this.DayOffset.Offset),Te.IsNumber(this.DayOffset.ShowDayCount)&&(s=this.DayOffset.ShowDayCount));for(var h=o,l=0;h<this.DayData.length&&l<s;++h,++l){var u=[];i=null;this.MultiDayBeforeOpenData&&this.IsShowMultiDayBeforeData&&(i=this.MultiDayBeforeOpenData[h]),u.push({DayItem:i,Type:20});i=null;this.DayData&&(i=this.DayData[this.DayData.length-1-h]),u.push({DayItem:i,Type:10});i=null;this.MultiDayAfterCloseData&&this.IsShowMultiDayAfterData&&(i=this.MultiDayAfterCloseData[h]),u.push({DayItem:i,Type:30}),a.push(u)}r={DataType:2,Data:a,IndexData:this.CorssCursorIndex,Point:{X:null,Y:null}},n=1;if(t.IsMoveLeft){if(this.CorssCursorIndex.DayIndex<0&&this.CorssCursorIndex.DataIndex<0&&(this.GetLastCursorIndex(r),n=0),e.MoveXIndexLeft(n,r)){this.LastPoint.X=r.Point.X,this.LastPoint.Y=r.Point.Y,10==this.CorssCursorIndex.Type&&(this.CursorIndex=this.CorssCursorIndex.CursorIndex);t={ParentFunction:"MoveCorssCursorIndex",Point:{X:r.Point.X,Y:r.Point.Y},IsPhone:!1,ClientPos:null};10==this.CorssCursorIndex.Type?t.ClientPos=1:20==this.CorssCursorIndex.Type?t.ClientPos=this.CorssCursorIndex.DayIndex+200:30==this.CorssCursorIndex.Type&&(t.ClientPos=this.CorssCursorIndex.DayIndex+300),this.DrawDynamicInfo(t)}}else if(this.CorssCursorIndex.DayIndex<0&&this.CorssCursorIndex.DataIndex<0&&(this.GetFirstCursorIndex(r),n=0),e.MoveXIndexRight(n,r)){this.LastPoint.X=r.Point.X,this.LastPoint.Y=r.Point.Y,10==this.CorssCursorIndex.Type&&(this.CursorIndex=this.CorssCursorIndex.CursorIndex);t={ParentFunction:"MoveCorssCursorIndex",Point:{X:r.Point.X,Y:r.Point.Y},IsPhone:!1,ClientPos:null};10==this.CorssCursorIndex.Type?t.ClientPos=1:20==this.CorssCursorIndex.Type?t.ClientPos=this.CorssCursorIndex.DayIndex+200:30==this.CorssCursorIndex.Type&&(t.ClientPos=this.CorssCursorIndex.DayIndex+300),this.DrawDynamicInfo(t)}}},this.SetCorssCursorIndex=function(t){if(this.EnableNewIndex&&(D.Chart.Log("[MinuteChartContainer::SetCorssCursorIndex] option ",t),"OnMouseMove"==t.ParentFunction)){this.CorssCursorIndex.Point.X=t.Point.X,this.CorssCursorIndex.Point.Y=t.Point.Y;var e=this.PtInClient_V2(t.Point.X,t.Point.Y);if(D.Chart.Log("[MinuteChartContainer::SetCorssCursorIndex] clientPos ",e),e<=0)return void(this.CorssCursorIndex={DayIndex:-1,DataIndex:-1,Point:{X:-1,Y:-1},Type:e});if(!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return void(this.CorssCursorIndex={DayIndex:-1,DataIndex:-1,Point:{X:-1,Y:-1},Type:-1});var a=this.Frame.SubFrame[0].Frame;if(1==e||2==e||3==e){if(this.CorssCursorIndex.DayIndex=0,this.CorssCursorIndex.Type=e,2==e)a.GetLeftExtendXValidData(t.Point.X,{Data:this.BeforeOpenData,IndexData:this.CorssCursorIndex});else if(3==e)a.GetRightExtendXValidData(t.Point.X,{Data:this.AfterCloseData,IndexData:this.CorssCursorIndex});else if(1==e){var i=a.GetXData(t.Point.X);this.CorssCursorIndex.DataIndex=parseInt(i.toFixed(0))}}else if(e>=100&&e<=199){this.CorssCursorIndex.DayIndex=e-100,this.CorssCursorIndex.Type=10;i=a.GetXData(t.Point.X);var r=parseInt(i.toFixed(0));this.CorssCursorIndex.DataIndex=r%a.MinuteCount}else if(e>=200&&e<=299){this.CorssCursorIndex.DayIndex=e-200,this.CorssCursorIndex.Type=20;var n=this.MultiDayBeforeOpenData;if(this.DayOffset){var o=0,s=this.MultiDayBeforeOpenData.length;Te.IsNumber(this.DayOffset.Offset)&&(o=this.DayOffset.Offset),Te.IsNumber(this.DayOffset.ShowDayCount)&&(s=this.DayOffset.ShowDayCount),n=this.MultiDayBeforeOpenData.slice(o,o+s)}a.GetLeftExtendXValidData(t.Point.X,{Data:n,IndexData:this.CorssCursorIndex})}else if(e>=300&&e<=399){this.CorssCursorIndex.DayIndex=e-300,this.CorssCursorIndex.Type=30;n=this.MultiDayAfterCloseData;if(this.DayOffset&&this.MultiDayAfterCloseData){o=0,s=this.MultiDayAfterCloseData.length;Te.IsNumber(this.DayOffset.Offset)&&(o=this.DayOffset.Offset),Te.IsNumber(this.DayOffset.ShowDayCount)&&(s=this.DayOffset.ShowDayCount),n=this.MultiDayAfterCloseData.slice(o,o+s)}a.GetRightExtendXValidData(t.Point.X,{Data:n,IndexData:this.CorssCursorIndex})}this.LastPoint.X=this.CorssCursorIndex.Point.X,t.Point.X=this.CorssCursorIndex.Point.X}},this.PtInClient_V2=function(t,e){if(this.Canvas.beginPath(),!0===this.Frame.IsHScreen){var a=this.Frame.ChartBorder.GetHScreenBorder();this.Canvas.rect(a.Left,a.TopEx,a.Right-a.Left,a.BottomEx-a.TopEx)}else{if((a=this.Frame.ChartBorder.GetBorder()).DayBorder){for(var i=0;i<a.DayBorder.length;++i){var r=a.DayBorder[i];if(this.Canvas.beginPath(),this.Canvas.rect(r.LeftEx,a.TopEx,r.RightEx-r.LeftEx,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 100+i;if(this.Canvas.beginPath(),this.Canvas.rect(r.Left,a.TopEx,r.LeftEx-r.Left,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 200+i;if(this.Canvas.beginPath(),this.Canvas.rect(r.RightEx,a.TopEx,r.Right-r.RightEx,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 300+i}return-2}this.Canvas.rect(a.LeftEx,a.Top,a.RightEx-a.LeftEx,a.Bottom-a.Top)}return this.Canvas.isPointInPath(t,e)?1:this.Frame.ChartBorder.LeftExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.Top,a.Right-a.Left,a.TopEx-a.Top):this.Canvas.rect(a.Left,a.Top,a.LeftEx-a.Left,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?2:this.Frame.ChartBorder.RightExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.BottomEx,a.Right-a.Left,a.Bottom-a.BottomEx):this.Canvas.rect(a.RightEx,a.Top,a.Right-a.RightEx,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?3:-1},this.OnTouchStart=function(e){if(0!=this.DragMode&&(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash)&&(this.IsOnTouch=!0,this.TouchDrawCount=0,this.PhonePinch=null,this.StopDragTimer(),0==this.EnableScrollUpDown&&e.preventDefault(),this.IsPhoneDragging(e))){var a={Click:{},LastMove:{}},i=this.GetToucheData(e,this.IsForceLandscape),r=this.PointAbsoluteToRelative(i[0].clientX,i[0].clientY,!0);if(this.TryClickLock||this.TryClickIndexTitle){var n=r.X,o=r.Y;if(this.TryClickLock&&this.TryClickLock(n,o))return;if(this.TryClickIndexTitle&&this.TryClickIndexTitle(n,o))return}a.Click.X=i[0].clientX,a.Click.Y=i[0].clientY,a.LastMove.X=i[0].clientX,a.LastMove.Y=i[0].clientY;var s=this,h=function(){if(!0===s.ChartCorssCursor.IsShow){var i=A(),r=a.Click.X-t.getBoundingClientRect().left*i,n=a.Click.Y-t.getBoundingClientRect().top*i;s.OnMouseMove(r,n,e)}};if(this.ChartDrawOption.IsLockScreen){if(this.MouseDrag=a,this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.IsSelected=!1),this.SelectChartDrawPicture=null,this.CurrentChartDrawPicture)return 2==this.CurrentChartDrawPicture.Status?this.SetChartDrawPictureThirdPoint(a.Click.X,a.Click.Y,!0):(this.SetChartDrawPictureFirstPoint(a.Click.X,a.Click.Y,!0),this.FinishChartDrawPicturePoint()&&this.DrawDynamicInfo({Corss:!1,Tooltip:!1})),void(e.cancelable&&e.preventDefault());var l={};A();if(l.X=i[0].clientX-t.getBoundingClientRect().left,l.Y=i[0].clientY-t.getBoundingClientRect().top,this.GetChartDrawPictureByPoint(l)){l.ChartDrawPicture.Status=20,l.ChartDrawPicture.ValueToPoint(),l.ChartDrawPicture.MovePointIndex=l.PointIndex,l.ChartDrawPicture.IsSelected=!0,this.CurrentChartDrawPicture=l.ChartDrawPicture,this.SelectChartDrawPicture=l.ChartDrawPicture;var u=this.GetEventCallback(w.ON_CLICK_DRAWPICTURE);if(u&&u.Callback){var c={DrawPicture:l.ChartDrawPicture};u.Callback(u,c,this)}return void(e.cancelable&&e.preventDefault())}}else 1==this.EnableScrollUpDown&&(this.DragTimer=setTimeout(function(){if(a.Click.X==a.LastMove.X&&a.Click.Y==a.LastMove.Y){s.MouseDrag;s.MouseDrag=null,h(),s.PreventTouchEvent(e)}},800)),this.MouseDrag=a,this.PhoneTouchInfo={Start:{X:i[0].clientX,Y:i[0].clientY},End:{X:i[0].clientX,Y:i[0].clientY}},this.SelectChartDrawPicture=null,0==this.EnableScrollUpDown&&h();this.EnableZoomIndexWindow&&(this.PhoneDBClick.AddTouchStart(i[0].clientX,i[0].clientY,Date.now()),D.Chart.Log("[MinuteChartContainer::OnTouchStart] PhoneDBClick ",this.PhoneDBClick)),this.TouchEvent({EventID:w.ON_PHONE_TOUCH,FunctionName:"OnTouchStart"},e)}},this.OnTouchMove=function(e){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var a=this.GetToucheData(e,this.IsForceLandscape);if(this.IsPhoneDragging(e)){var i=this.MouseDrag;if(null==i){var r=A(),n=a[0].clientX-t.getBoundingClientRect().left*r,o=a[0].clientY-t.getBoundingClientRect().top*r;this.OnMouseMove(n,o,e)}else{var s=this.GetMoveAngle(i.LastMove,{X:a[0].clientX,Y:a[0].clientY}),h=Math.abs(i.LastMove.X-a[0].clientX),l=Math.abs(i.LastMove.Y-a[0].clientY);if(h=parseInt(h),this.CurrentChartDrawPicture){var u=this.CurrentChartDrawPicture;if(1==u.Status||2==u.Status){if(h<5&&l<5)return;this.SetChartDrawPictureSecondPoint(a[0].clientX,a[0].clientY,!0)&&this.DrawDynamicInfo()}else if(3==u.Status)this.SetChartDrawPictureThirdPoint(a[0].clientX,a[0].clientY,!0)&&this.DrawDynamicInfo();else if(20==u.Status){if(h<5&&l<5)return;this.MoveChartDrawPicture(a[0].clientX-i.LastMove.X,a[0].clientY-i.LastMove.Y,!0)&&this.DrawDynamicInfo()}i.LastMove.X=a[0].clientX,i.LastMove.Y=a[0].clientY}else{if((l>0&&h<=3||s<=this.TouchMoveMinAngle)&&1==this.EnableScrollUpDown)return void this.StopDragTimer();this.PreventTouchEvent(e),this.MouseDrag=null;r=A(),n=a[0].clientX-t.getBoundingClientRect().left*r,o=a[0].clientY-t.getBoundingClientRect().top*r;this.OnMouseMove(n,o,e)}}this.PhoneTouchInfo&&(this.PhoneTouchInfo.End.X=a[0].clientX,this.PhoneTouchInfo.End.Y=a[0].clientY)}0==this.EnableScrollUpDown?e.preventDefault():null==i?this.PreventTouchEvent(e):this.StopDragTimer()}},this.OnTouchEnd=function(t){if(D.Chart.Log("[MinuteChartContainer::OnTouchEnd]",t),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){if(this.CurrentChartDrawPicture){var e=this.CurrentChartDrawPicture;2==e.Status||1==e.Status||3==e.Status?(e.PointStatus=e.Status,this.FinishChartDrawPicturePoint()?this.DrawDynamicInfo():!1):20==e.Status&&this.FinishMoveChartDrawPicture()&&this.DrawDynamicInfo()}if(this.EnableZoomIndexWindow){var a=Date.now();this.PhoneDBClick.AddTouchEnd(a),this.PhoneDBClick.IsVaildDBClick()&&(this.OnTouchDBClick(this.PhoneDBClick.Start),this.PhoneDBClick.Clear())}this.IsOnTouch=!1,this.StopDragTimer(),this.TouchEvent({EventID:w.ON_PHONE_TOUCH,FunctionName:"OnTouchEnd"},t),this.OnTouchFinished(),this.TouchDrawCount=0}},this.OnKeyDown=function(t){if(this.StopDisplayLatest(),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){switch(t.keyCode?t.keyCode:t.which){case 37:if(this.EnableNewIndex)this.MoveCorssCursorIndex({IsMoveLeft:!0});else{if(!Te.IsNumber(this.CursorIndex)){var e=0;e=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,this.CursorIndex=e-1}if(this.CursorIndex=parseInt(this.CursorIndex),this.CursorIndex<=.99999){if(!this.DataMoveLeft())break;this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw()}else--this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo()}break;case 39:if(this.EnableNewIndex)this.MoveCorssCursorIndex({IsMoveLeft:!1});else{e=0;if(e=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,Te.IsNumber(this.CursorIndex)||(this.CursorIndex=0),this.CursorIndex=parseInt(this.CursorIndex),this.CursorIndex+1>=e){if(!this.DataMoveRight())break;this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw()}else{var a=null;if(!(a=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data))break;if(this.CursorIndex+a.DataOffset+1>=a.Data.length)break;++this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo()}}break;case 46:if(this.SelectChartDrawPicture){var i=this.SelectChartDrawPicture;D.Chart.Log(i,"drawPicturedrawPicturedrawPicture"),this.SelectChartDrawPicture=null,this.ClearChartDrawPicture(i)}else if(this.SelectedChart&&this.SelectedChart.Selected.Identify){var r=this.GetSelectedChartInfo(this.SelectedChart.Selected);r&&(r.Type==ge.OVERLAY_INDEX?this.DeleteOverlayWindowsIndex(r.IndexID):r.Type==ge.OVERLAY_MINUTE&&this.DeleteOverlaySymbol(r.Symbol))}break;case 32:this.OnMarkRectSelect(t);break;case 33:if(this.PageInfo.Enable){var n={ID:F.OP_SCROLL_LEFT,Step:this.PageInfo.ShowDayCount};this.ChartOperator(n)}break;case 34:if(this.PageInfo.Enable){n={ID:F.OP_SCROLL_RIGHT,Step:this.PageInfo.ShowDayCount};this.ChartOperator(n)}break;default:return}t.preventDefault?t.preventDefault():t.returnValue=!1}},this.OnMarkRectSelect=function(t){var e=this.ChartCorssCursor;if(e&&0!=e.Status&&Te.IsNumber(e.CursorIndex)&&this.SourceData&&this.SourceData.Data){var a=this.GetRectSelectPaint();if(a){var i=e.CursorIndex;D.Chart.Log("[MinuteChartContainer::OnMarkRectSelect] dataIndex",i);var r=this.SourceData,n=(i=parseInt(i.toFixed(0)))+r.DataOffset;n>=r.Data.length&&(n=r.Data.length-1);var o=r.Data[n];if(D.Chart.Log("[MinuteChartContainer::OnMarkRectSelect] item",o),this.SetRectSelectData(o)){var s=a.GetPointCount(),h=A();if(1==s){if((u=this.GetEventCallback(w.ON_KEYDOWN_SELECT_RECT_FIRST))&&u.Callback){var l={X:e.LastPoint.X/h,Y:e.LastPoint.Y/h,Item:o,Index:n,RectSelectPaint:a};u.Callback(u,l,this)}}else if(2==s){var u,c=a.GetSelectRectData();if((u=this.GetEventCallback(w.ON_KEYDOWN_SELECT_RECT))&&u.Callback){l={X:e.LastPoint.X/h,Y:e.LastPoint.Y/h,SelectData:c,RectSelectPaint:a};u.Callback(u,l,this)}this.SelectRectDialog&&(t.data={Chart:this,X:e.LastPoint.X/h,Y:e.LastPoint.Y/h,SelectData:c,RectSelectPaint:a},this.SelectRectDialog.DoModal(t))}this.Draw()}}}},this.OnRightMenu=function(t,e,a){if(this.RightMenu){var i=this.Frame.PtInFrame(t,e);a.data={Chart:this,FrameID:i},this.RightMenu.DoModal(a)}var r=this.GetEventCallback(w.ON_CONTEXT_MENU);if(r){var n={X:t,Y:e,Event:a,FrameID:i=this.Frame.PtInFrame(t,e)};r.Callback(r,n,this)}},this.OnWheel=function(t){D.Chart.Log("[MinuteChartContainer::OnWheel]",t)},this.OnDoubleClick=function(t,e,a){var i;D.Chart.Log("[MinuteChartContainer::OnDoubleClick]",a),null!=this.ClickChartTimer&&(clearTimeout(this.ClickChartTimer),this.ClickChartTimer=null),this.SelectedChart.EnableSelected&&(i=this.PtInChart(t,e));var r={SelectedChart:i};if(this.DBClickEvent(r,a),!i&&this.EnableZoomIndexWindow){var n=this.Frame.PtInFrame(t,e);D.Chart.Log("[MinuteChartContainer::OnDoubleClick] frameId",n),n>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(n,{X:t,Y:e})&&(this.Frame.SetSizeChage(!0),this.Draw())}},this.GetDataItem=function(t){if(!t)return null;if(!Te.IsNumber(t.Index))return null;if(!this.SourceData||!this.SourceData.Data)return null;var e=this.SourceData,a=t.ClientPos;if(2==a||3==a||a>=200&&a<=299||a>=300&&a<=399){if(!this.ChartCorssCursor||!this.ChartCorssCursor.CallAcutionXOperator)return null;var i=!0===this.Frame.IsHScreen,r=this.ChartCorssCursor.CallAcutionXOperator;if(r.Value=i?t.Point.Y:t.Point.X,r.Point={X:t.Point.X,Y:t.Point.Y},r.ClientPos=a,2==a){if(!this.BeforeOpenData)return null}else if(3==a){if(!this.AfterCloseData)return null}else if(a>=200&&a<=299){if(!this.MultiDayBeforeOpenData||!Te.IsNonEmptyArray(this.MultiDayBeforeOpenData))return}else if(a>=300&&tclientPos<=399&&(!this.MultiDayAfterCloseData||!Te.IsNonEmptyArray(this.MultiDayAfterCloseData)))return;return r.Operator()?{Type:a,Item:r.Item,Index:r.DataIndex}:null}var n=parseInt(t.Index.toFixed(0))+e.DataOffset;return n>=e.Data.length?null:{Type:a,Item:e.Data[n],Index:n}},this.UpdatePointByCursorIndex=function(){this.LastPoint.X=this.Frame.GetXFromIndex(this.CursorIndex);var t=this.CursorIndex;t=parseInt(t.toFixed(0));var e=this.Frame.SourceData;if(!(e.DataOffset+t>=e.Data.length)){var a=e.Data[e.DataOffset+t],i=null;i=a.Before?a.Before.Close:a.Close,this.LastPoint.Y=this.Frame.GetYFromData(i)}},this.Create=function(t,e){var a=this;for(var i in this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new be,this.ChartCorssCursor.PtInClient=function(t,e){return a.PtInClient(t,e)},this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=_e.Create("CorssCursor_Minute_XStringFormat"),this.ChartCorssCursor.StringFormatX.GetEventCallback=function(t){return a.GetEventCallback(t)},this.ChartCorssCursor.StringFormatY=_e.Create("CorssCursor_YStringFormat"),this.ChartCorssCursor.StringFormatY.GetEventCallback=function(t){return a.GetEventCallback(t)},this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY.ShareAfterVol=this.ShareAfterVol,this.ChartCorssCursor.CallAcutionXOperator=new Ee,this.ChartSplashPaint=new Le,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.HQChart=this,this.Frame=new nt,this.Frame.ChartBorder=new X,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=25,this.Frame.ChartBorder.TitleHeight=0,this.Frame.ChartBorder.Left=50,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.Frame.GetExtendChartRightWidth=function(){return a.GetExtendChartRightWidth()},this.Frame.ZoomStartWindowIndex=2,this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine(),this.CreateExtendChart("RectSelectPaint",e?e.SelectRect:null),this.EnableIndexChartDrag&&this.CreateExtendChart("DragMovePaint"),this.Frame.SubFrame){var r=new Xe;r.Frame=this.Frame.SubFrame[i].Frame,r.Canvas=this.Canvas,r.LanguageID=this.LanguageID,r.GetEventCallback=function(t){return a.GetEventCallback(t)},r.SelectedChart=this.SelectedChart,this.TitlePaint.push(r)}this.ChartCorssCursor.StringFormatX.Frame=this.Frame.SubFrame[0].Frame,this.ChartCorssCursor.StringFormatY.Frame=this.Frame,this.ChartCorssCursor.CallAcutionXOperator&&(this.ChartCorssCursor.CallAcutionXOperator.Frame=this.Frame.SubFrame[0].Frame);var n=!0,o=!0;if(e&&e.Listener){var s=e.Listener;!1===s.KeyDown&&(n=!1,D.Chart.Log("[MinuteChartContainer::Create] not register keydown event.")),!1===s.Wheel&&(o=!1,D.Chart.Log("[MinuteChartContainer::Create] not register wheel event."))}n&&this.UIElement.addEventListener("keydown",function(t){a.OnKeyDown(t)},!0),o&&this.UIElement.addEventListener("wheel",function(t){a.OnWheel(t)},!0)},this.CreateChildWindow=function(t){for(var e=this,a=0;a<t;++a){var i=new X;i.UIElement=this.UIElement;var r=new J;r.Canvas=this.Canvas,r.ChartBorder=i,r.Identify=a,r.GlobalOption=this.GlobalOption,a<2&&(r.ChartBorder.TitleHeight=0),r.XPointCount=243,a>=2&&(this.ModifyIndexDialog&&(r.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(r.ChangeIndexEvent=this.ChangeIndexDialog.DoModal));var n=[9,8,7,6,5,4,3,2,1];for(var o in r.HorizontalMax=n[0],r.HorizontalMin=n[n.length-1],0==a?(r.YSplitOperator=new we,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},r.YSplitOperator.DayOffset=this.DayOffset,r.YSplitOperator.GlobalOption=this.GlobalOption,r.YSplitOperator.HQChart=this):(r.YSplitOperator=new ye,r.YSplitOperator.LanguageID=this.LanguageID,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},1==a&&(r.YSplitOperator.ShareAfterVol=this.ShareAfterVol)),r.YSplitOperator.Frame=r,r.YSplitOperator.ChartBorder=i,r.XSplitOperator=new Fe,r.XSplitOperator.Frame=r,r.XSplitOperator.ChartBorder=i,r.XSplitOperator.DayOffset=this.DayOffset,r.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},a!=t-1&&(r.XSplitOperator.ShowText=!1),r.XSplitOperator.Operator(),n)r.HorizontalInfo[o]=new Y,r.HorizontalInfo[o].Value=n[o],0==a&&o==r.HorizontalMin||(r.HorizontalInfo[o].Message[1]=n[o].toString(),r.HorizontalInfo[o].Font="14px 微软雅黑");var s=new it;s.Frame=r,s.Height=0==a?20:10,this.Frame.SubFrame[a]=s}},this.CreateSubFrameItem=function(t,e){var a=this,i=new X;if(i.UIElement=this.UIElement,e&&e.ChartBorder&&e.ChartBorder.MultiDayMinute){var r=e.ChartBorder.MultiDayMinute;i.MultiDayMinute.Count=r.Count,i.MultiDayMinute.Left=r.Left,i.MultiDayMinute.Right=r.Right}var n=new J;n.Canvas=this.Canvas,n.ChartBorder=i,n.Identify=t,n.XPointCount=243,n.GlobalOption=this.GlobalOption,t>=2&&(this.ModifyIndexDialog&&(n.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(n.ChangeIndexEvent=this.ChangeIndexDialog.DoModal));var o=[9,8,7,6,5,4,3,2,1];n.HorizontalMax=o[0],n.HorizontalMin=o[o.length-1],n.YSplitOperator=new ye,n.YSplitOperator.LanguageID=this.LanguageID,n.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),n.YSplitOperator.Frame=n,n.YSplitOperator.ChartBorder=i,n.XSplitOperator=new Fe,n.XSplitOperator.Frame=n,n.XSplitOperator.ChartBorder=i,n.XSplitOperator.ShowText=!1,n.XSplitOperator.DayOffset=this.DayOffset,n.XSplitOperator.GetEventCallback=function(t){return a.GetEventCallback(t)},n.YSplitOperator.GetEventCallback=function(t){return a.GetEventCallback(t)},n.XSplitOperator.Symbol=this.Symbol,this.DayCount>1&&(n.XSplitOperator.DayCount=this.DayData.length,n.XSplitOperator.DayData=this.DayData,n.DayCount=this.DayData.length);var s=this.Frame.SubFrame[0].Frame.XPointCount;for(var h in n.XPointCount=s,n.Data=this.ChartPaint[0].Data,o)n.HorizontalInfo[h]=new Y,n.HorizontalInfo[h].Value=o[h],n.HorizontalInfo[h].Message[1]=o[h].toString(),n.HorizontalInfo[h].Font="14px 微软雅黑";var l=new it;return l.Frame=n,l.Height=10,l},this.AddNewSubFrame=function(t){var e=this,a=this.Frame.SubFrame[0].Frame,i=this.Frame.SubFrame.length,r=this.CreateSubFrameItem(i,a),n=A();r.Frame.ChartBorder.TitleHeight*=n,this.Frame.SubFrame[i]=r;var o=new Xe;o.Frame=this.Frame.SubFrame[i].Frame,o.Canvas=this.Canvas,o.LanguageID=this.LanguageID,o.GetEventCallback=function(t){return e.GetEventCallback(t)},this.TitlePaint[i+1]=o,this.SetSubFrameOption(r,t);for(var s=0;s<this.Frame.SubFrame.length;++s){var h=this.Frame.SubFrame[s].Frame;s==this.Frame.SubFrame.length-1?h.XSplitOperator.ShowText=!0:h.XSplitOperator.ShowText=!1}return this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.UpdateXShowText&&this.UpdateXShowText(),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw(),i},this.UpdateXShowText=function(){for(var t=!0,e=this.Frame.SubFrame.length-1;e>=0;--e){var a=this.Frame.SubFrame[e].Frame,i=this.Frame.SubFrame[e];t?(a.XSplitOperator.ShowText=!0,i.Height>0&&(t=!1)):a.XSplitOperator.ShowText=!1}},this.DeleteIndexPaint=function(t,e){var a=new Array;for(var i in this.ChartPaint){var r=this.ChartPaint[i];0==i||r.ChartFrame!=this.Frame.SubFrame[t].Frame?a.push(r):!0===e&&r&&r.OnDestroy&&r.OnDestroy()}var n=this.Frame.SubFrame[t].Frame;n.YSpecificMaxMin=null,n.IsLocked=!1,n.YSplitOperator.SplitType=n.YSplitOperator.DefaultSplitType,this.ChartPaint=a;var o=t+1;this.TitlePaint[o].Data=[],this.TitlePaint[o].Title=null},this.CreateStockInfo=function(){this.ExtendChartPaint[0]=new function(){this.newMethod=Ce,this.newMethod(),delete this.newMethod,this.Left=80,this.Right=1,this.Top=1,this.Bottom=1,this.BorderColor=ia.FrameBorderPen,this.Symbol,this.Name,this.TitleFont=["14px 微软雅黑"],this.Draw=function(){var t=this.ChartBorder.GetRight()+this.Left,e=this.ChartBorder.GetChartWidth()-this.Right,a=this.Top+18,i=t+(e-t)/2;this.Symbol&&this.Name&&(this.Canvas.font=this.TitleFont[0],this.Canvas.textAlign="right",this.Canvas.textBaseline="bottom",this.Canvas.fillText(this.Symbol,i-2,a),this.Canvas.textAlign="left",this.Canvas.fillText(this.Name,i+2,a)),this.Canvas.strokeStyle=this.BorderColor,this.Canvas.moveTo(t,a),this.Canvas.lineTo(e,a),this.Canvas.stroke(),a+=30,this.DrawBorder()},this.DrawBorder=function(){var t=this.ChartBorder.GetRight()+this.Left,e=this.ChartBorder.GetChartWidth()-this.Right,a=this.Top,i=this.ChartBorder.GetChartHeight()-this.Bottom;this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(t,a,e-t,i-a)}},this.ExtendChartPaint[0].Canvas=this.Canvas,this.ExtendChartPaint[0].ChartBorder=this.Frame.ChartBorder,this.ExtendChartPaint[0].ChartFrame=this.Frame,this.Frame.ChartBorder.Right=300},this.CreateMainKLine=function(){var t=this,e=xt.Create("ChartMinutePriceLine");e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.Name="Minute-Line",e.Identify="Minute-Line",e.Color=ia.Minute.PriceColor,e.LineWidth=ia.Minute.PriceLineWidth,e.AreaColor=ia.Minute.AreaPriceColor,e.GetEventCallback=function(e){return t.GetEventCallback(e)},this.ChartPaint[0]=e;var a=new Kt;a.Canvas=this.Canvas,a.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,a.ChartFrame=this.Frame.SubFrame[0].Frame,a.Name="Minute-Average-Line",a.Identify="Minute-Average-Line",a.Color=ia.Minute.AvPriceColor,a.IsDrawArea=!1,this.ChartPaint[1]=a;var i=xt.Create("ChartMinuteVolumBar");i.Color=ia.Minute.VolBarColor,i.Canvas=this.Canvas,i.ChartBorder=this.Frame.SubFrame[1].Frame.ChartBorder,i.ChartFrame=this.Frame.SubFrame[1].Frame,i.Name="Minute-Vol-Bar",i.Identify="Minute-Vol-Bar",i.ShareAfterVol=this.ShareAfterVol,this.ChartPaint[2]=i,this.TitlePaint[0]=new Ve,this.TitlePaint[0].Frame=this.Frame.SubFrame[0].Frame,this.TitlePaint[0].Canvas=this.Canvas,this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.TitlePaint[0].LanguageID=this.LanguageID,this.TitlePaint[0].CallAcutionXOperator=new Ee,this.TitlePaint[0].CallAcutionXOperator.Frame=this.Frame.SubFrame[0].Frame},this.ChangeScriptIndex=function(t,e,a){this.DeleteIndexPaint(t,!0),this.WindowIndex[t]=new si(e.Name,e.Script,e.Args,e);var i=this.SourceData;this.BindIndexData(t,i),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangeAPIIndex=function(t,e){this.DeleteIndexPaint(t,!0);var a=e.API;this.WindowIndex[t]=new li(a.Name,a.Script,a.Args,e),e&&e.Window&&this.SetFrameToolbar(t,e.Window),this.Frame.ClearUpDonwFrameYData({Index:t});var i=this.ChartPaint[0].Data;this.BindIndexData(t,i),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangeIndex=function(t,e,a){if(!(this.Frame.SubFrame.length<3)){if(a&&a.API)return this.ChangeAPIIndex(t,a);var i=(new T).Get(e);if(i){t<2&&(t=2),t>=this.Frame.SubFrame.length&&(t=2);var r={Name:i.Name,Script:i.Script,Args:i.Args,ID:e,KLineType:i.KLineType,YSpecificMaxMin:i.YSpecificMaxMin,YSplitScale:i.YSplitScale,FloatPrecision:i.FloatPrecision,Condition:i.Condition,StringFormat:i.StringFormat,OutName:i.OutName};return a&&(a.FloatPrecision>=0&&(r.FloatPrecision=a.FloatPrecision),a.StringFormat>0&&(r.StringFormat=a.StringFormat),a.Args&&(r.Args=a.Args),Te.IsNumber(a.YSplitType)&&(r.YSplitType=a.YSplitType),a.Lock&&(r.Lock=a.Lock)),this.ChangeScriptIndex(t,r,a)}}},this.ChangeIndexWindowCount=function(t){var e=this;if(!(t<2)&&this.Frame.SubFrame.length!=t){var a=this.Frame.SubFrame.length;if(a>t){for(var i=a-1;i>=t;--i){this.DeleteIndexPaint(i),(f=this.Frame.SubFrame[i].Frame).ClearToolbar&&f.ClearToolbar()}this.Frame.SubFrame.splice(t,a-t),this.WindowIndex.splice(t,a-t)}else{var r=this.Frame.SubFrame[0].Frame;for(i=a;i<t;++i){var n=this.CreateSubFrameItem(i,r);this.Frame.SubFrame[i]=n;var o=new Xe;o.Frame=this.Frame.SubFrame[i].Frame,o.Canvas=this.Canvas,o.LanguageID=this.LanguageID,o.GetEventCallback=function(t){return e.GetEventCallback(t)},o.SelectedChart=this.SelectedChart,this.TitlePaint[i+1]=o}var s=["RSI","MACD","DMA","DMI","KDJ","WR"],h=new T;for(i=a;i<t;++i){var l=s[i%s.length],u=h.Get(l);this.WindowIndex[i]=new si(u.Name,u.Script,u.Args,u);var c=this.SourceData;this.BindIndexData(i,c)}for(i=0;i<this.Frame.SubFrame.length;++i){var f=this.Frame.SubFrame[i].Frame;i==this.Frame.SubFrame.length-1?f.XSplitOperator.ShowText=!0:f.XSplitOperator.ShowText=!1}this.UpdataDataoffset()}this.UpdateXShowText(),this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}},this.ChangeIndexTemplate=function(t){var e=this;if(Array.isArray(t.Windows)){var a=t.Windows.length,i=this.Frame.SubFrame.length;a+=2;var r=null;Te.IsNumber(t.DayCount)&&t.DayCount!=this.DayCount&&(r=t.DayCount);for(var n=null!=r,o=2;o<i;++o){this.DeleteIndexPaint(o);var s=this.Frame.SubFrame[o];s.YSpecificMaxMin=null,s.IsLocked=!1,s.YSplitScale=null}if(i>a){for(o=i-1;o>=a;--o)this.Frame.SubFrame[o].Frame.ClearToolbar();this.Frame.SubFrame.splice(a,i-a),this.WindowIndex.splice(a,i-a)}else for(o=i;o<a;++o){var h=this.CreateSubFrameItem(o);this.Frame.SubFrame[o]=h;var l=new Xe;l.Frame=this.Frame.SubFrame[o].Frame,l.Canvas=this.Canvas,l.LanguageID=this.LanguageID,l.GetEventCallback=function(t){return e.GetEventCallback(t)},l.SelectedChart=this.SelectedChart,this.TitlePaint[o+1]=l}var u=new T;for(o=0;o<a;++o){var c=o,f=null,d=null;t.Frame&&t.Frame.length>o&&(d=t.Frame[c]),c>=2&&(f=t.Windows[c-2]);var C=c+1;if(this.TitlePaint[C].Data=[],this.TitlePaint[C].Title=null,f)if(f.Script)this.WindowIndex[c]=new si(f.Name,f.Script,f.Args,f);else if(f.API){var p=f.API;this.WindowIndex[c]=new li(p.Name,p.Script,p.Args,f)}else{var m=f.Index,D=oa.Get(m);if(D)this.WindowIndex[c]=D.Create(),this.CreateWindowIndex(c);else{var v=u.Get(m);if(v){var g=v.Args;f.Args&&(g=f.Args);var S={Name:v.Name,Script:v.Script,Args:g,ID:m,KLineType:v.KLineType,YSpecificMaxMin:v.YSpecificMaxMin,YSplitScale:v.YSplitScale,FloatPrecision:v.FloatPrecision,Condition:v.Condition,OutName:v.OutName};f.TitleFont&&(S.TitleFont=f.TitleFont),this.WindowIndex[c]=new si(S.Name,S.Script,S.Args,S)}}}this.SetSubFrameAttribute(this.Frame.SubFrame[c],f,d)}for(o=0;o<this.Frame.SubFrame.length;++o){f=this.Frame.SubFrame[o].Frame;o==this.Frame.SubFrame.length-1?f.XSplitOperator.ShowText=!0:f.XSplitOperator.ShowText=!1}if(n)this.Frame.SetSizeChage(!0),null!=r&&this.ChangeDayCount(r);else{var I=this.SourceData;for(o=0;o<a;++o)this.BindIndexData(o,I);this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.UpdateXShowText&&this.UpdateXShowText(),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}}},this.RemoveIndexWindow=function(t){if(D.Chart.Log("[MinuteChartContainer::RemoveIndexWindow] remove id",t),!(t<2)&&this.Frame.SubFrame&&!(t>=this.Frame.SubFrame.length)){this.Frame.RestoreIndexWindows();this.Frame.SubFrame[t].Frame;this.DeleteIndexPaint(t),this.Frame.SubFrame[t].Frame.ClearToolbar(),this.Frame.SubFrame.splice(t,1),this.WindowIndex.splice(t,1),this.TitlePaint.splice(t+1,1);for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e].Frame;e==this.Frame.SubFrame.length-1?a.XSplitOperator.ShowText=!0:a.XSplitOperator.ShowText=!1,a.Identify=e}this.Frame.SetSizeChage(!0),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw()}},this.AutoUpdateEvent=function(t,e){var a=t?w.RECV_START_AUTOUPDATE:w.RECV_STOP_AUTOUPDATE;if(this.mapEvent.has(a)){var i=this,r=this.mapEvent.get(a),n={Stock:{Symbol:this.Symbol,Name:this.Name,DayCount:this.DayCount},Explain:e};t&&(n.Callback=function(t){i.RecvMinuteData(t)}),r.Callback(r,n,this)}},this.ClearIndexPaint=function(){if(this.Frame&&this.Frame.SubFrame)for(var t=0;t<this.Frame.SubFrame.length;++t){t>=2&&this.DeleteIndexPaint(t,!0);var e=this.Frame.SubFrame[t];if(Te.IsNonEmptyArray(e.OverlayIndex))for(var a=0;a<e.OverlayIndex.length;++a){for(var i=e.OverlayIndex[a],r=0;r<i.ChartPaint.length;++r){var n=i.ChartPaint[r];n&&n.OnDestroy&&n.OnDestroy()}i.ChartPaint=[]}}for(t=1;t<this.TitlePaint.length;++t){(e=this.TitlePaint[t]).OverlayIndex=new C.default}},this.ResetDayOffset=function(){this.PageInfo.Enable?(this.DayOffset.Offset=this.PageInfo.Offset,this.DayOffset.ShowDayCount=this.PageInfo.ShowDayCount):(this.DayOffset.Offset=0,this.DayOffset.ShowDayCount=-1),this.DayOffset.PageInfo=null},this.ChangeSymbol=function(t,e){if(this.StopDisplayLatest(),this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"MinuteChartContainer::ChangeSymbol"),this.Symbol=t,this.ResetDayOffset(),this.ClearIndexPaint(),this.ResetOverlaySymbolStatus(),this.ReloadChartDrawPicture(),e&&(Te.IsNumber(e.DayCount)&&(this.DayCount=e.DayCount),Te.IsNonEmptyArray(e.Windows)))for(var a=new T,i=0;i<e.Windows.length;++i){var r=2+i;if(r>=this.WindowIndex.length)break;var n=e.Windows[i];if(n)if(n.Script)this.WindowIndex[r]=new si(n.Name,n.Script,n.Args,n);else if(n.API){var o=n.API;this.WindowIndex[r]=new li(o.Name,o.Script,o.Args,n)}else{var s=n.Index,h=a.Get(s);if(h){h.Args;n.Args&&(h.Args=n.Args),h.ID=s,this.WindowIndex[r]=new si(h.Name,h.Script,h.Args,h)}}}!t||this.DayCount<=0?this.DrawEmpty():(this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw(),this.RequestData())},this.SetPageInfo=function(t){t&&(Te.IsBool(t.Enable)&&(this.PageInfo.Enable=t.Enable),Te.IsNumber(t.Offset)&&(this.PageInfo.Offset=t.Offset),Te.IsNumber(t.ShowDayCount)&&(this.PageInfo.ShowDayCount=t.ShowDayCount))},this.ClearMinuteData=function(){this.SourceData=null,this.DayData=null,this.BeforeOpenData=null,this.AfterCloseData=null,this.MultiDayBeforeOpenData=null,this.MultiDayAfterCloseData=null},this.ChangeDayCount=function(t,e){t<0||(this.StopDisplayLatest(),this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"MinuteChartContainer::ChangeDayCount"),this.DayCount=t,this.ClearMinuteData(),e&&e.PageInfo&&(this.SetPageInfo(e.PageInfo),this.ResetDayOffset()),this.DayCount>1?this.ChartDrawPicture=[]:this.ReloadChartDrawPicture(),this.ClearIndexPaint(),this.ResetOverlaySymbolStatus(),this.RequestData())},this.OverlaySymbol=function(t,e){for(var a in this.OverlayChartPaint){if(this.OverlayChartPaint[a].Symbol==t)return console.warn("[MinuteChartContainer::OverlaySymbol] overlay symbol="+t+" exist."),!1}var i=new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.Color="rgb(65,105,225)",this.MainData,this.MainYClose,this.SourceData,this.ClassName="ChartOverlayMinutePriceLine",this.Title,this.Symbol,this.YClose,this.Status=Lt.STATUS_NONE_ID,this.OverlayType=0,this.IsCalcuateMaxMin=!0,this.SetOption=function(t){t&&(Te.IsNumber(t.OverlayType)&&(this.OverlayType=t.OverlayType),Te.IsBool(t.IsCalcuateMaxMin)&&(this.IsCalcuateMaxMin=t.IsCalcuateMaxMin))},this.PtInChart=function(t,e){var a={MinuteOverlayPrice:!0,YClose:this.YClose,MainYClose:this.MainYClose,OverlayType:this.OverlayType};return this.PtInLine(t,e,a)},this.DrawSelectedStatus=function(){var t={MinuteOverlayPrice:!0,YClose:this.YClose,MainYClose:this.MainYClose,OverlayType:this.OverlayType};this.DrawLinePoint(t)},this.Draw=function(){if(this.Data)if(this.NotSupportMessage)this.DrawNotSupportmessage();else{var t=!0===this.ChartFrame.IsHScreen;this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight(),!0===t&&this.ChartBorder.GetBottom();var e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount;this.Canvas.save(),this.ClipClient(t);for(var i=!0,r=0,n=0,o=this.Data.DataOffset+0,s=0;o<this.Data.Data.length&&s<e;++o,++s){var h=this.Data.Data[o].Close;if(null!=h){n=h,0==this.OverlayType&&(n=h/this.YClose*this.MainYClose);var l=this.ChartFrame.GetXFromIndex(s),u=this.ChartFrame.GetYFromData(n,!1);i?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(u,l):this.Canvas.moveTo(l,u),i=!1):t?this.Canvas.lineTo(u,l):this.Canvas.lineTo(l,u),++r>=a&&(i=!0,this.Canvas.stroke(),r=0)}}r>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};if(!this.IsCalcuateMaxMin)return e;if(null==this.YClose)return e;e.Min=this.MainYClose,e.Max=this.MainYClose;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a].Close;null!=r&&(0==this.OverlayType&&(r=r/this.YClose*this.MainYClose),null==e.Max&&(e.Max=r),null==e.Min&&(e.Min=r),e.Max<r&&(e.Max=r),e.Min>r&&(e.Min=r))}return e},this.GetTooltipData=function(t,e,a){var i=!0===this.ChartFrame.IsHScreen;if(i)return!1;if(!this.IsShow)return!1;if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return!1;if(!Te.IsNumber(this.YClose)||!Te.IsNumber(this.MainYClose))return!1;if(1!=this.ChartBorder.PtInClient(t,e,this.Canvas,i))return!1;var r=this.Data,n=this.ChartFrame.GetXData(t),o=Math.ceil(n),s=Math.floor(n);if(o>=r.Data.length||s>=r.Data.length)return!1;if(o==s)r.Data[s];else{var h=r.Data[s].Close;h=h/this.YClose*this.MainYClose;var l=r.Data[o].Close;l=l/this.YClose*this.MainYClose;var u={X:this.ChartFrame.GetXFromIndex(s),Y:this.ChartFrame.GetYFromData(h)},c={X:this.ChartFrame.GetXFromIndex(o),Y:this.ChartFrame.GetYFromData(l)};if(this.Canvas.beginPath(),this.Canvas.moveTo(u.X,u.Y+5),this.Canvas.lineTo(u.X,u.Y-5),this.Canvas.lineTo(c.X,c.Y-5),this.Canvas.lineTo(c.X,c.Y+5),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return a.Data={Index:n,Start:{Index:s,Item:r.Data[s]},End:{Index:o,Value:r.Data[o]}},a.ChartPaint=this,a.Type=6,!0}return!1}};return i.Canvas=this.Canvas,i.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,i.ChartFrame=this.Frame.SubFrame[0].Frame,i.Name="Overlay-Minute",i.Symbol=t,i.Identify="Overlay-Minute-"+t,e&&e.Color?i.Color=e.Color:i.Color=ia.OverlaySymbol.Color[ia.OverlaySymbol.Random%ia.OverlaySymbol.Color.length],++ia.OverlaySymbol.Random,this.ChartPaint[0].YClose>0&&this.ChartPaint[0].Data&&(i.MainData=this.ChartPaint[0].Data,i.MainYClose=this.ChartPaint[0].YClose),i.SetOption&&i.SetOption(e),this.OverlayChartPaint.push(i),this.DayCount<=1?this.RequestOverlayMinuteData():this.RequestOverlayHistoryMinuteData(),!0},this.ResetOverlaySymbolStatus=function(){for(var t in this.OverlayChartPaint){this.OverlayChartPaint[t].Status=Lt.STATUS_NONE_ID}},this.DeleteOverlaySymbol=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol===t)return a.IsDelete=!0,this.OverlayChartPaint.splice(e,1),this.UpdateFrameMaxMin(),this.Draw(),!0}return console.warn("[MinuteChartContainer::DeleteOverlaySymbol] overlay symbol="+t+" not exist."),!1},this.ClearOverlaySymbol=function(){for(var t in this.OverlayChartPaint){this.OverlayChartPaint[t].IsDelete=!0}this.OverlayChartPaint=[],this.Frame.SubFrame[0].Frame.YSplitOperator.OverlayChartPaint=this.OverlayChartPaint,this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.UpdateFrameMaxMin(),this.Draw()},this.ShowBeforeData=function(t,e){this.ShowCallAuctionData({Left:t},e)},this.ShowCallAuctionData=function(t,e){if(t){var a=!1;if(Te.IsBool(t.Left)&&this.IsShowBeforeData!=t.Left&&(this.IsShowBeforeData=t.Left,a=!0),Te.IsBool(t.Right)&&this.IsShowAfterData!=t.Right&&(this.IsShowAfterData=t.Right,a=!0),t.MultiDay){var i=t.MultiDay;Te.IsBool(i.Left)&&this.IsShowMultiDayBeforeData!=i.Left&&(this.IsShowMultiDayBeforeData=i.Left,a=!0),Te.IsBool(i.Right)&&this.IsShowMultiDayAfterData!=i.Right&&(this.IsShowMultiDayAfterData=i.Right,a=!0)}if(e){if(e.BeforeOpen){i=e.BeforeOpen;Te.IsNumber(i.Left)&&this.ExtendWidth.Left!=i.Left&&(this.ExtendWidth.Left=i.Left,a=!0)}if(e.AfterClose){i=e.AfterClose;Te.IsNumber(i.Right)&&this.ExtendWidth.Right!=i.Right&&(this.ExtendWidth.Right=i.Right,a=!0)}if(e.MultiDay){i=e.MultiDay;Te.IsNumber(i.Left)&&this.MultiDayExtendWidth.Left!=i.Left&&(this.MultiDayExtendWidth.Left=i.Left,a=!0),Te.IsNumber(i.Right)&&this.MultiDayExtendWidth.Right!=i.Right&&(this.MultiDayExtendWidth.Right=i.Right,a=!0)}}a&&this.RequestData()}},this.RequestData=function(){this.DayCount<=1?this.RequestMinuteData():this.RequestHistoryMinuteData()},this.ChangeDrawType=function(t){if(!(this.ChartPaint.length<=0)){if(0==t)this.ChartPaint[0].IsDrawArea=!0;else{if(1!=t)return;this.ChartPaint[0].IsDrawArea=!1}this.Draw()}},this.UpdateDataOffset=function(){this.SourceData.DataOffset=this.DayOffset.DataOffset;for(var t=0;t<this.ChartPaint.length;++t){(n=this.ChartPaint[t]).Data&&(n.Data.DataOffset=this.DayOffset.DataOffset,"ChartMinuteVolumBar"!=n.ClassName&&"ChartMinutePriceLine"!=n.ClassName||(n.DayOffset=this.DayOffset))}for(t=0;t<this.OverlayChartPaint.length;++t){(n=this.OverlayChartPaint[t]).Data&&(n.Data.DataOffset=this.DayOffset.DataOffset)}for(t=0;t<this.Frame.SubFrame.length;++t)for(var e=this.Frame.SubFrame[t],a=0;a<e.OverlayIndex.length;++a)for(var i=e.OverlayIndex[a],r=0;r<i.ChartPaint.length;++r){var n;(n=i.ChartPaint[r]).Data&&(n.Data.DataOffset=this.DayOffset.DataOffset)}},this.RequestHistoryMinuteData=function(){var t=this;if(this.IsBeforeData=!1,this.IsAfterData=!1,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw(),this.NetworkFilter){var e={Name:"MinuteChartContainer::RequestHistoryMinuteData",Explain:"多日分时数据",Request:{Url:t.HistoryMinuteApiUrl,Data:{daycount:t.DayCount,symbol:t.Symbol},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryMinuteData(e)}),1==e.PreventDefault)return}v.HttpRequest({url:t.HistoryMinuteApiUrl,data:{symbol:t.Symbol,daycount:t.DayCount},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryMinuteData(e)}})},this.RecvHistoryMinuteData=function(t){if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)D.Chart.Warn("[MinuteChartContainer::RecvHistoryMinuteData] recv data symbol not match. HQChart["+this.Symbol+"] , Recv["+t.symbol+"]");else{this.DayData=ua.JsonDataToMinuteDataArray(t),this.ColorLineData=ua.JsonDataToHistoryMinuteLineColorData(t),this.MultiDayBeforeOpenData=ua.JosnDataToBeforeOpenDataArray(t),this.MultiDayAfterCloseData=ua.JosnDataToAfterCloseDataArray(t);var e=ua.JsonDataToHistoryMinuteLastUpdateTime(t);this.CaclutateCallCationYRange(),this.Symbol=t.symbol,this.Name=t.name,this.SetCallCationDataBorder({Left:!1,Right:!1,MultiDay:{Left:this.IsShowMultiDayBeforeData,Right:this.IsShowMultiDayAfterData}}),this.CaclutateLimitPrice(this.DayData[0].YClose,t.data[0].limitprice),this.UpdateHistoryMinuteUI(e),this.RecvMinuteDataEvent({FunctionName:"RecvHistoryMinuteData"}),this.RequestOverlayHistoryMinuteData(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RequestHistoryMinuteData"),this.AutoUpdate()}},this.CaclutateCallCationYRange=function(){var t=null,e=null;if(Te.IsNonEmptyArray(this.MultiDayAfterCloseData)){for(var a={Max:null,Min:null},i=0;i<this.MultiDayAfterCloseData.length;++i){var r=this.MultiDayAfterCloseData[i];null==a.Max?a.Max=r.VolMax:a.Max<r.VolMax&&(a.Max=r.VolMax),null==a.Min?a.Min=r.VolMin:a.Min>r.VolMin&&(a.Min=r.VolMin)}t=a}if(Te.IsNonEmptyArray(this.MultiDayBeforeOpenData)){for(a={Max:null,Min:null},i=0;i<this.MultiDayBeforeOpenData.length;++i){r=this.MultiDayBeforeOpenData[i];null==a.Max?a.Max=r.VolMax:a.Max<r.VolMax&&(a.Max=r.VolMax),null==a.Min?a.Min=r.VolMin:a.Min>r.VolMin&&(a.Min=r.VolMin)}e=a}if(2==this.ShareAfterVol&&t&&e){var n=Math.max(t.Max,e.Max),o=Math.min(t.Min,e.Min);t.Max=e.Max=n,t.Min=e.Min=o}if(t)for(i=0;i<this.MultiDayAfterCloseData.length;++i){(r=this.MultiDayAfterCloseData[i]).VolMax=t.Max,r.VolMin=t.Min}if(e)for(i=0;i<this.MultiDayBeforeOpenData.length;++i){(r=this.MultiDayBeforeOpenData[i]).VolMax=e.Max,r.VolMin=e.Min}},this.UpdateHistoryMinuteUI=function(t){var e=this.HistoryMinuteDataToArray(this.DayData),a=new pt;if(a.Data=e,t&&(a.UpdateTime=t),this.SourceData=a,this.TradeDate=this.DayData[0].Date,this.PageInfo&&this.PageInfo.Enable){this.DayOffset.DayCount=this.DayData.length,-1==this.DayOffset.ShowDayCount&&(this.DayOffset.ShowDayCount=this.DayData.length),-8888==this.DayOffset.Offset&&(this.DayOffset.Offset=this.DayOffset.DayCount-this.DayOffset.ShowDayCount);var i=this.DayOffset.ShowDayCount;this.Frame.SetDayCount(i)}else{this.DayOffset.Offset=0,this.DayOffset.ShowDayCount=this.DayData.length;i=this.DayOffset.ShowDayCount;this.Frame.SetDayCount(this.DayData.length)}var r=this.Symbol.toUpperCase(),n=this.DayData[0].YClose,o=Ea.IsFutures(r);Te.IsNumber(this.DayData[0].YClearing)&&o&&(n=this.DayData[0].YClearing),this.BindMainData(a,n),Ea.IsForeignExchange(r)&&(this.ChartPaint[1].Data=null);for(var s=0;s<this.Frame.SubFrame.length;++s){var h=this.Frame.SubFrame[s];for(var l in h.Frame.XSplitOperator.Symbol=this.Symbol,h.Frame.XSplitOperator.DayCount=i,h.Frame.XSplitOperator.DayData=this.DayData,h.Frame.XSplitOperator.Operator(),h.Frame.XSplitOperator.IsBeforeData=this.IsBeforeData,h.Frame.XSplitOperator.IsAfterData=this.IsAfterData,h.Frame.YSplitOperator.Symbol=this.Symbol,h.Frame.YSplitOperator.IsBeforeData=this.IsBeforeData,h.Frame.YSplitOperator.IsAfterData=this.IsAfterData,h.OverlayIndex){var u=h.OverlayIndex[l];u.Frame.XPointCount=h.Frame.XPointCount,u.Frame.MinuteCount=h.Frame.MinuteCount}}if(this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.IsBeforeData=this.IsBeforeData,this.ChartCorssCursor.StringFormatX.IsAfterData=this.IsAfterData,this.TitlePaint[0].IsShowDate=!0,this.UpdateDataOffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.Frame.SubFrame.length>2){var c=new pt;c.Data=e;for(var f=2;f<this.Frame.SubFrame.length;++f)this.BindIndexData(f,c)}},this.HistoryMinuteDataToArray=function(t){for(var e=[],a=t.length-1;a>=0;--a)for(var i=t[a],r=0;r<i.Data.length;++r)e.push(i.Data[r]);return e},this.UpdateLatestMinuteData=function(t,e,a){if(this.DayData){for(var i=0;i<this.DayData.length;++i){var r=this.DayData[i];if(r.Date===e)return r.Data=t,a&&Te.IsNumber(a.yclose)&&(r.YClose=a.yclose),void(a&&Te.IsNumber(a.yclearing)&&(r.YClearing=a.yclearing))}if(this.DayData.length>0&&this.DayData[0].Date<e){var n=new pt;n.Date=e,n.Data=t,a&&Te.IsNumber(a.yclose)&&(n.YClose=a.yclose),a&&Te.IsNumber(a.yclearing)&&(n.YClearing=a.yclearing),this.DayData.unshift(n)}}},this.UpdateLatestMinuteDataV2=function(t){if(this.DayCount>1){if(!this.DayData)return;for(var e=null,a=0;a<this.DayData.length;++a){if((o=this.DayData[a]).Date===date){e=o;break}}if(!e)return;var i=-1,r=t.Data[0];for(a=0;a<e.Data.length;++a){if((o=e.Data[a]).Date==r.Date&&o.Time==r.Time){i=a;break}}i<0&&(i=e.Data.length);a=0;for(var n=i;a<t.Data.length;++a,++n){var o=t.Data[a];e.Data[n]=o}}else{if(!this.SourceData)return;for(i=-1,r=t.Data[0],a=0;a<this.SourceData.Data.length;++a){if((o=this.SourceData.Data[a]).Date==r.Date&&o.Time==r.Time){i=a;break}}i<0&&(i=this.SourceData.Data.length);for(a=0,n=i;a<t.Data.length;++a,++n){o=t.Data[a];this.SourceData.Data[n]=o}}},this.RequestMinuteData=function(){var t=this,e=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","minute","minutecount"],a=this.Symbol.toUpperCase();if(Ea.IsFutures(a)&&(e.push("clearing"),e.push("yclearing")),this.IsBeforeData=!1,this.IsShowBeforeData&&1===this.DayCount&&Ea.IsSHSZStockA(t.Symbol)&&(this.IsBeforeData=!0,e.push("before")),this.IsAfterData=!1,this.IsShowAfterData&&1===this.DayCount&&Ea.IsSHSZStockA(t.Symbol)&&(this.IsAfterData=!0),this.NetworkFilter){var i=null;if(this.DayCount>1){if(Te.IsNonEmptyArray(this.DayData))i=this.DayData[0].GetDateRange()}else this.SourceData&&(i=this.SourceData.GetDateRange());var r={Before:this.IsShowBeforeData&&1===this.DayCount,After:this.IsShowAfterData&&1===this.DayCount},n={Name:"MinuteChartContainer::RequestMinuteData",Explain:"最新分时数据",Request:{Url:t.MinuteApiUrl,Data:{field:e,symbol:[t.Symbol],callcation:r},Type:"POST"},Self:this,PreventDefault:!1};if(i&&(n.DateRange=i),this.NetworkFilter(n,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMinuteData(e)}),1==n.PreventDefault)return}v.HttpRequest({url:t.MinuteApiUrl,data:{field:e,symbol:[t.Symbol],start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMinuteData(e)}})},this.RecvMinuteDataEvent=function(t){if(this.mapEvent.has(w.RECV_MINUTE_DATA)){var e=this.mapEvent.get(w.RECV_MINUTE_DATA),a={MinuteData:this.SourceData,Stock:{Symbol:this.Symbol,Name:this.Name},Option:t};e.Callback(e,a,this)}},this.UpdateLineColorData=function(t,e){if(this.ColorLineData){var a=this.ColorLineData.filter(function(t,a,i){return t.Date!=e});if(Te.IsNonEmptyArray(t))for(var i in t)a.push(t[i]);this.ColorLineData=a}else this.ColorLineData=t},this.UpdateCallCationData=function(t,e){var a;t&&Te.IsNonEmptyArray(this.MultiDayBeforeOpenData)&&((a=this.MultiDayBeforeOpenData[this.MultiDayBeforeOpenData.length-1]).Date==t.Date?this.MultiDayBeforeOpenData[this.MultiDayBeforeOpenData.length-1]=t:a.Date<t.Date&&this.MultiDayBeforeOpenData.push(t));e&&Te.IsNonEmptyArray(this.MultiDayAfterCloseData)&&((a=this.MultiDayAfterCloseData[this.MultiDayAfterCloseData.length-1]).Date==e.Date?this.MultiDayAfterCloseData[this.MultiDayAfterCloseData.length-1]=e:a.Date<e.Date&&this.MultiDayAfterCloseData.push(e));this.CaclutateCallCationYRange()},this.RecvUpdateMinuteData=function(t){var e=ua.JsonDataToUpdateMinuteData(t),a=ua.JsonDataToMinuteLineColorData(t);this.BeforeOpenData=null,this.AfterCloseData=null;var i=ua.JsonDataToBeforeOpenData(t),r=ua.JsonDataToAfterCloseData(t),n=ua.JsonDataToMinuteLastUpdateTime(t);if(this.DayCount>1)return this.UpdateCallCationData(i,r),this.UpdateLineColorData(a,e.date),this.UpdateLatestMinuteDataV2(e),this.UpdateHistoryMinuteUI(n),this.RecvMinuteDataEvent({FunctionName:"RecvUpdateMinuteData"}),this.RequestOverlayMinuteData(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RecvUpdateMinuteData"),void this.AutoUpdate();this.UpdateLatestMinuteDataV2(e);var o=this.SourceData,s=this.SourceData.Data;if(this.ColorLineData=a,this.TradeDate=t.stock[0].date,this.Frame.SetDayCount(1),this.SourceData.UpdateTime=n,this.Symbol=e.Symbol,this.Name=e.Name,this.SetCallCationDataBorder({Left:this.IsBeforeData,Right:this.IsAfterData,MultiDay:{Left:!1,Right:!1}}),2==this.ShareAfterVol&&this.BeforeOpenData&&this.AfterCloseData){var h=Math.max(this.BeforeOpenData.VolMax,this.AfterCloseData.VolMax),l=Math.min(this.BeforeOpenData.VolMin,this.AfterCloseData.VolMin);this.BeforeOpenData.VolMax=this.AfterCloseData.VolMax=h,this.BeforeOpenData.VolMin=this.AfterCloseData.VolMin=l}var u=e.YClose,c=this.Symbol.toUpperCase(),f=Ea.IsFutures(c);e.YClearing>0&&f&&(u=e.YClearing),this.CaclutateLimitPrice(u,e.LimitPrice);var d=null;if(e.High>0&&e.Low>0&&(d={High:e.High,Low:e.Low}),this.BindMainData(o,u,d),this.Frame.SubFrame.length>2){var C=new pt;C.Data=s;for(var p=2;p<this.Frame.SubFrame.length;++p)this.BindIndexData(p,C)}for(var m=0;m<this.Frame.SubFrame.length;++m){var D=this.Frame.SubFrame[m];if(D.Frame.XSplitOperator.Symbol=this.Symbol,D.Frame.XSplitOperator.DayCount=1,D.Frame.XSplitOperator.Operator(),D.Frame.YSplitOperator.Symbol=this.Symbol,Te.IsNonEmptyArray(D.OverlayIndex))for(var v=0;v<D.OverlayIndex.length;++v){var g=D.OverlayIndex[v];g.Frame.XPointCount=D.Frame.XPointCount,g.Frame.MinuteCount=D.Frame.MinuteCount}}this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.Symbol=this.Symbol,Ea.IsSHSZ(c)&&(this.TitlePaint[0].IsShowDate=!1),1==t.stock[0].IsHistoryMinute&&(this.TitlePaint[0].IsShowDate=!0);var S=this.GetChartMinuteInfo();S&&(S.SourceData=this.SourceData),this.RecvMinuteDataEvent({FunctionName:"RecvUpdateMinuteData"}),this.RequestMinuteInfoData(),this.RequestOverlayMinuteData(),this.CreateChartDrawPictureByStorage(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RecvUpdateMinuteData"),this.AutoUpdate()},this.RecvMinuteData=function(t){if(t)if(1!=t.dataType){if(t.stock[0])if(t.stock[0].symbol!=this.Symbol&&this.EnableVerifyRecvData)D.Chart.Warn("[MinuteChartContainer::RecvMinuteData] recv data symbol not match. HQChart["+this.Symbol+"] , Recv["+t.stock[0].symbol+"]");else{var e=ua.JsonDataToMinuteData(t),a=ua.JsonDataToMinuteLineColorData(t);this.BeforeOpenData=null,this.AfterCloseData=null;var i=ua.JsonDataToBeforeOpenData(t),r=ua.JsonDataToAfterCloseData(t),n=ua.JsonDataToMinuteLastUpdateTime(t);if(this.IsBeforeData&&(this.BeforeOpenData=i),this.IsAfterData&&(this.AfterCloseData=r),this.DayCount>1)return this.UpdateCallCationData(i,r),this.UpdateLineColorData(a,t.stock[0].date),this.UpdateLatestMinuteData(e,t.stock[0].date,t.stock[0]),this.UpdateHistoryMinuteUI(n),this.RecvMinuteDataEvent({FunctionName:"RecvMinuteData"}),this.RequestOverlayMinuteData(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RecvMinuteData"),void this.AutoUpdate();var o=new pt;if(o.Data=e,o.UpdateTime=n,this.ColorLineData=a,this.TradeDate=t.stock[0].date,this.Frame.SetDayCount(1),this.SourceData=o,this.Symbol=t.stock[0].symbol,this.Name=t.stock[0].name,this.SetCallCationDataBorder({Left:this.IsBeforeData,Right:this.IsAfterData,MultiDay:{Left:!1,Right:!1}}),2==this.ShareAfterVol&&this.BeforeOpenData&&this.AfterCloseData){var s=Math.max(this.BeforeOpenData.VolMax,this.AfterCloseData.VolMax),h=Math.min(this.BeforeOpenData.VolMin,this.AfterCloseData.VolMin);this.BeforeOpenData.VolMax=this.AfterCloseData.VolMax=s,this.BeforeOpenData.VolMin=this.AfterCloseData.VolMin=h}var l=t.stock[0].yclose,u=this.Symbol.toUpperCase(),c=Ea.IsFutures(u);t.stock[0].yclearing>0&&c&&(l=t.stock[0].yclearing),this.CaclutateLimitPrice(l,t.stock[0].limitprice);var f=null;if(t.stock[0].high>0&&t.stock[0].low>0&&(f={High:t.stock[0].high,Low:t.stock[0].low}),this.BindMainData(o,l,f),this.Frame.SubFrame.length>2){var d=new pt;d.Data=e;for(var C=2;C<this.Frame.SubFrame.length;++C)this.BindIndexData(C,d)}for(var p in this.Frame.SubFrame){var m=this.Frame.SubFrame[p];for(var v in m.Frame.XSplitOperator.Symbol=this.Symbol,m.Frame.XSplitOperator.DayCount=1,m.Frame.XSplitOperator.Operator(),m.Frame.YSplitOperator.Symbol=this.Symbol,m.OverlayIndex){var g=m.OverlayIndex[v];g.Frame.XPointCount=m.Frame.XPointCount,g.Frame.MinuteCount=m.Frame.MinuteCount}}this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.Symbol=this.Symbol,Ea.IsSHSZ(u)&&(this.TitlePaint[0].IsShowDate=!1),1==t.stock[0].IsHistoryMinute&&(this.TitlePaint[0].IsShowDate=!0);var S=this.GetChartMinuteInfo();S&&(S.SourceData=this.SourceData),this.RecvMinuteDataEvent({FunctionName:"RecvMinuteData"}),this.RequestMinuteInfoData(),this.RequestOverlayMinuteData(),this.CreateChartDrawPictureByStorage(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RecvMinuteData"),this.AutoUpdate()}}else this.RecvUpdateMinuteData(t);else D.Chart.Warn("[MinuteChartContainer::RecvMinuteData] recv data is null")},this.CaclutateLimitPrice=function(t,e){if(this.LimitPrice=null,e&&e.max>0&&e.min>0)this.LimitPrice={Max:e.max,Min:e.min};else{var a=Ea.GetLimitPriceRange(this.Symbol,this.Name);a?t<=0||(this.LimitPrice={Max:t*(1+a.Max),Min:t*(1+a.Min)},D.Chart.Log("[MinuteChartContainer::CaclutateLimitPrice] "+this.Symbol+" yClose:"+t+" max:"+this.LimitPrice.Max+" min:"+this.LimitPrice.Min),this.LimitPrice.Max=parseFloat(this.LimitPrice.Max.toFixed(2)),this.LimitPrice.Min=parseFloat(this.LimitPrice.Min.toFixed(2)),D.Chart.Log("[MinuteChartContainer::CaclutateLimitPrice] "+this.Symbol+" tofixed(2) max:"+this.LimitPrice.Max+" min:"+this.LimitPrice.Min)):D.Chart.Log("[MinuteChartContainer::CaclutateLimitPrice] "+this.Symbol+" no limit price.")}},this.RequestOverlayMinuteData=function(){for(var t=this,e=this,a=this.TradeDate,i=function(){var i=t.OverlayChartPaint[r];return i.MainData&&i.MainYClose>0?i.Status!=Lt.STATUS_NONE_ID?"continue":(n=i.Symbol)?(i.Status=Lt.STATUS_REQUESTDATA_ID,t.NetworkFilter&&(o={Name:"MinuteChartContainer::RequestOverlayMinuteData",Explain:"叠加股票最新分时数据",Request:{Url:e.HistoryMinuteApiUrl,Data:{days:[a],symbol:n},Type:"POST"},Self:t,PreventDefault:!1},t.NetworkFilter(o,function(t){i.Status=Lt.STATUS_RECVDATA_ID,e.RecvOverlayMinuteData(t,i)}),1==o.PreventDefault)?"continue":void v.HttpRequest({url:e.HistoryMinuteApiUrl,data:{symbol:n,days:[a]},type:"post",dataType:"json",async:!0,success:function(t){i.Status=Lt.STATUS_RECVDATA_ID,e.RecvOverlayMinuteData(t,i)}})):"continue":"continue"},r=0;r<this.OverlayChartPaint.length;++r){var n,o;i()}},this.RecvMultiOverlayMinuteData=function(t){if(Te.IsNonEmptyArray(t)){for(var e=!1,a=0;a<t.length;++a){var i=t[a];if(i.symbol)for(var r=0;r<this.OverlayChartPaint.length;++r){var n=this.OverlayChartPaint[r];if(n.MainData&&n.MainYClose>0&&i.symbol==n.Symbol){this.RecvOverlayMinuteData(i,n,{Redraw:!1}),e=!0;break}}}e&&(this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw())}},this.RecvOverlayMinuteData=function(t,e,a){if(!e.IsDelete)if(this.EnableVerifyRecvData&&t.symbol!=e.Symbol)D.Chart.Warn("[MinuteChartContainer::RecvOverlayMinuteData] recv data symbol not match. paint["+e.Symbol+"] , Recv["+t.symbol+"]");else{var i,r=ua.JsonDataToMinuteDataArray(t),n=null;if(this.DayCount>1){if(r.length<=0)return;var o=r[0];for(var s in e.SourceData){if(e.SourceData[s].Date==o.Date){e.SourceData[s]=o;var h=this.HistoryMinuteDataToArray(e.SourceData);(n=new pt).Data=h,i=o.YClose;break}}if(null==n)return}else i=(n=r.length>0?r[0]:new pt).YClose;e.Data=n,e.Title=t.name,e.Symbol=t.symbol,e.YClose=i,e.Status=Lt.STATUS_FINISHED_ID;var l=!0;a&&0==a.Redraw&&(l=!1),l&&(this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw())}},this.RequestOverlayHistoryMinuteData=function(){var t=this;if(Te.IsNonEmptyArray(this.DayData)){for(var e=this,a=[],i=0;i<this.DayData.length;++i){var r=this.DayData[i];a.push(r.Date)}if(!(a.length<=0)){var n=function(){var r=t.OverlayChartPaint[i];return(o=r.Symbol)?r.Status!=Lt.STATUS_NONE_ID?"continue":(r.Status=Lt.STATUS_REQUESTDATA_ID,t.NetworkFilter&&(s={Name:"MinuteChartContainer::RequestOverlayHistoryMinuteData",Explain:"叠加股票多日分时数据",Request:{Url:e.HistoryMinuteApiUrl,Data:{days:a,symbol:o},Type:"POST"},Self:t,PreventDefault:!1},t.NetworkFilter(s,function(t){r.Status=Lt.STATUS_RECVDATA_ID,e.RecvOverlayHistoryMinuteData(t,r)}),1==s.PreventDefault)?"continue":void v.HttpRequest({url:e.HistoryMinuteApiUrl,data:{symbol:o,days:a},type:"post",dataType:"json",async:!0,success:function(t){r.Status=Lt.STATUS_RECVDATA_ID,e.RecvOverlayHistoryMinuteData(t,r)}})):"continue"};for(i=0;i<this.OverlayChartPaint.length;++i){var o,s;n()}}}},this.RecvOverlayHistoryMinuteData=function(t,e){if(this.EnableVerifyRecvData&&t.symbol!=e.Symbol)D.Chart.Warn("[MinuteChartContainer::RecvOverlayHistoryMinuteData] recv data symbol not match. paint["+e.Symbol+"] , Recv["+t.symbol+"]");else if(Te.IsNonEmptyArray(this.DayData)){var a=ua.JsonDataToMinuteDataArray(t);if(Te.IsNonEmptyArray(a)){for(var i=[],r=0;r<this.DayData.length;++r){for(var n=this.DayData[r],o=!1,s=0;s<a.length;++s)if(n.Date==a[s].Date){i.push(a[s]),o=!0;break}if(!o){var h=new pt;h.Date=n.Date,i.push(h)}}e.SourceData=i;var l=this.HistoryMinuteDataToArray(i),u=i[0].YClose,c=new pt;c.Data=l,e.Data=c,e.Title=t.name,e.Symbol=t.symbol,e.YClose=u,e.Status=Lt.STATUS_FINISHED_ID,this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=void 0)},this.AutoUpdate=function(){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var t=this,e=Ea.GetMarketStatus(this.Symbol);if(0!=e&&3!=e){var a=this.AutoUpdateFrequency;1==e?this.AutoUpdateTimer=setTimeout(function(){t.AutoUpdate()},a):2==e&&(this.AutoUpdateTimer=setTimeout(function(){t.ResetOverlaySymbolStatus(),t.RequestMinuteData()},a))}else this.AutoUpdateTimer=setTimeout(function(){t.AutoUpdate()},2e4)}},this.BindIndexData=function(t,e){this.WindowIndex[t]&&("function"!=typeof this.WindowIndex[t].RequestData?"function"!=typeof this.WindowIndex[t].ExecuteScript?this.WindowIndex[t].BindData(this,t,e):this.WindowIndex[t].ExecuteScript(this,t,e):this.WindowIndex[t].RequestData(this,t,e))},this.BindMainData=function(t,e,a){var i=this.IsShowMultiDayBeforeData?this.MultiDayBeforeOpenData:null,r=this.IsShowMultiDayAfterData?this.MultiDayAfterCloseData:null,n=new pt;if(n.Data=t.GetClose(),this.ChartPaint[0].Data=n,this.ChartPaint[0].YClose=e,this.ChartPaint[0].NotSupportMessage=null,this.ChartPaint[0].IsShowLead=!1,this.ChartPaint[0].LeadData=null,this.ChartPaint[0].BeforeOpenData=this.BeforeOpenData,this.ChartPaint[0].AfterCloseData=this.AfterCloseData,this.ChartPaint[0].MultiDayBeforeOpenData=i,this.ChartPaint[0].MultiDayAfterCloseData=r,this.ChartPaint[0].ColorLineData=this.ColorLineData,this.ChartPaint[0].Source=t,Ea.IsSHSZIndex(this.Symbol)&&1==this.DayCount&&this.IsShowLead){var o=new pt;o.Data=t.GetLead(),this.ChartPaint[0].LeadData=o,this.ChartPaint[0].IsShowLead=!0}var s=this.Frame.SubFrame[0].Frame;for(var h in s.YSplitOperator.YClose=e,s.YSplitOperator.Data=n,this.Frame.Data=this.ChartPaint[0].Data,this.Frame.SourceData=t,this.Frame.SubFrame){(u=this.Frame.SubFrame[h].Frame).Data=t}(n=new pt).Data=t.GetMinuteAvPrice(),this.ChartPaint[1].Data=n;var l=this.Symbol.toUpperCase();for(var h in Ea.IsForeignExchange(l)?this.ChartPaint[1].Data=null:Ea.IsShowAvPrice&&!Ea.IsShowAvPrice(l)&&(this.ChartPaint[1].Data=null),s.YSplitOperator.AverageData=n,s.YSplitOperator.OverlayChartPaint=this.OverlayChartPaint,s.YSplitOperator.LimitPrice=this.LimitPrice,s.YSplitOperator.MultiDayBeforeOpenData=i,s.YSplitOperator.MultiDayAfterCloseData=r,s.YSplitOperator.DayCount=this.DayCount,a?(s.YSplitOperator.High=a.High,s.YSplitOperator.Low=a.Low):(s.YSplitOperator.High=null,s.YSplitOperator.Low=null),this.ChartPaint[2].Data=t,this.ChartPaint[2].YClose=e,this.ChartPaint[2].Symbol=this.Symbol,this.ChartPaint[2].BeforeOpenData=this.BeforeOpenData,this.ChartPaint[2].AfterCloseData=this.AfterCloseData,this.ChartPaint[2].MultiDayBeforeOpenData=i,this.ChartPaint[2].MultiDayAfterCloseData=r,this.Frame.SubFrame){(u=this.Frame.SubFrame[h]).Frame.YSplitOperator.BeforeOpenData=this.BeforeOpenData,u.Frame.YSplitOperator.IsBeforeData=this.IsBeforeData,u.Frame.YSplitOperator.AfterCloseData=this.AfterCloseData,u.Frame.YSplitOperator.IsAfterData=this.IsAfterData,u.Frame.YSplitOperator.MultiDayBeforeOpenData=i,u.Frame.YSplitOperator.MultiDayAfterCloseData=r}for(var h in Ea.IsShowMinutePostionLine(l)?this.BindOverlayPositionData(t,e):this.ClearBindOverlayPositionData(),this.TitlePaint[0].Data=this.SourceData,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=this.Name,this.TitlePaint[0].YClose=e,this.TitlePaint[0].BeforeOpenData=this.BeforeOpenData,this.TitlePaint[0].AfterCloseData=this.AfterCloseData,this.TitlePaint[0].MultiDayBeforeOpenData=this.IsShowMultiDayBeforeData?this.MultiDayBeforeOpenData:null,this.TitlePaint[0].MultiDayAfterCloseData=this.IsShowMultiDayAfterData?this.MultiDayAfterCloseData:null,this.TitlePaint[0].CallAcutionXOperator&&(this.TitlePaint[0].CallAcutionXOperator.BeforeOpenData=this.BeforeOpenData,this.TitlePaint[0].CallAcutionXOperator.AfterCloseData=this.AfterCloseData,this.TitlePaint[0].CallAcutionXOperator.MultiDayBeforeOpenData=i,this.TitlePaint[0].CallAcutionXOperator.MultiDayAfterCloseData=r,this.TitlePaint[0].CallAcutionXOperator.DayOffset=this.DayOffset),this.ChartCorssCursor&&this.ChartCorssCursor.StringFormatY&&(this.ChartCorssCursor.StringFormatY.YClose=e,this.ChartCorssCursor.StringFormatY.BeforeOpenData=this.BeforeOpenData,this.ChartCorssCursor.StringFormatY.AfterCloseData=this.AfterCloseData,this.ChartCorssCursor.StringFormatY.MultiDayBeforeOpenData=i,this.ChartCorssCursor.StringFormatY.MultiDayAfterCloseData=r,this.ChartCorssCursor.StringFormatY.DayOffset=this.DayOffset,this.ChartCorssCursor.StringFormatX.Data=this.ChartPaint[0].Data,this.ChartCorssCursor.StringFormatX.BeforeOpenData=this.BeforeOpenData,this.ChartCorssCursor.StringFormatX.AfterCloseData=this.AfterCloseData,this.ChartCorssCursor.StringFormatX.MultiDayBeforeOpenData=i,this.ChartCorssCursor.StringFormatX.MultiDayAfterCloseData=r,this.ChartCorssCursor.StringFormatX.DayOffset=this.DayOffset,this.ChartCorssCursor.CallAcutionXOperator&&(this.ChartCorssCursor.CallAcutionXOperator.BeforeOpenData=this.BeforeOpenData,this.ChartCorssCursor.CallAcutionXOperator.AfterCloseData=this.AfterCloseData,this.ChartCorssCursor.CallAcutionXOperator.MultiDayBeforeOpenData=i,this.ChartCorssCursor.CallAcutionXOperator.MultiDayAfterCloseData=r,this.ChartCorssCursor.CallAcutionXOperator.DayOffset=this.DayOffset)),this.ExtendChartPaint[0]&&(this.ExtendChartPaint[0].Symbol=this.Symbol,this.ExtendChartPaint[0].Name=this.Name),this.OverlayChartPaint){var u;(u=this.OverlayChartPaint[h]).MainData=this.ChartPaint[0].Data,u.MainYClose=e}},this.BindOverlayPositionData=function(t,e){var a=this;if(!(this.Frame.SubFrame.length<2)){for(var i=null,r=null,n=this.Frame.SubFrame[1],o=null,s=0;s<n.OverlayIndex.length;++s){if("Position_Line_Frame"==(h=n.OverlayIndex[s]).Identify){o=h;break}}if(o){r=o.Frame;for(s=0;s<o.ChartPaint.length;++s){var h;if("Position-Line"==(h=o.ChartPaint[s]).Name){i=h;break}}i||((i=new zt).Canvas=this.Canvas,i.Name="Position-Line",i.ChartBorder=r.ChartBorder,i.ChartFrame=r,i.Identify=o.Identify,i.Color=ia.Minute.PositionColor,o.ChartPaint.push(i))}else{(o=new rt).Identify="Position_Line_Frame",(r="MinuteChartContainer"==this.ClassName?new Z:new Q).Canvas=this.Canvas,r.MainFrame=n.Frame,r.ChartBorder=n.Frame.ChartBorder,r.GlobalOption=this.GlobalOption,o.Frame=r,r.YSplitOperator=new ye,r.YSplitOperator.LanguageID=this.LanguageID,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),r.YSplitOperator.Frame=r,r.YSplitOperator.ChartBorder=r.ChartBorder,r.YSplitOperator.SplitCount=n.Frame.YSplitOperator.SplitCount,r.YSplitOperator.GetEventCallback=function(t){return a.GetEventCallback(t)},r.YSplitOperator.OverlayIdentify=o.Identify,(i=new zt).Canvas=this.Canvas,i.Name="Position-Line",i.ChartBorder=r.ChartBorder,i.ChartFrame=r,i.Identify=o.Identify,i.Color=ia.Minute.PositionColor,o.ChartPaint.push(i),n.OverlayIndex.push(o),n.Frame.RightFrame=r}var l=this.Frame.SubFrame[0].Frame.XPointCount;r.XPointCount=l,n.Frame.IsShowPositionTitle=!0;var u=new pt;u.Data=t.GetPosition(),i.Data=u}},this.ClearBindOverlayPositionData=function(){if(!(this.Frame.SubFrame.length<2)){var t=this.Frame.SubFrame[1];for(var e in t.Frame.RightFrame=null,t.Frame.IsShowPositionTitle=!1,t.OverlayIndex){if("Position_Line_Frame"==t.OverlayIndex[e].Identify){t.OverlayIndex.splice(e,1);break}}}},this.GetOverlayIndexByIdentify=function(t){for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e];if(Te.IsNonEmptyArray(a.OverlayIndex))for(var i=0;i<a.OverlayIndex.length;++i){var r=a.OverlayIndex[i];if(r.Identify===t)return{OverlayItem:r,WindowIndex:e}}}return null},this.UpdateOverlayIndex=function(t){var e=this.GetOverlayIndexByIdentify(t);if(null!=e){if(this.ChartPaint[0]){var a=this.ChartPaint[0].Data;a&&this.BindOverlayIndexData(e.OverlayItem,e.WindowIndex,a)}}else console.warn("[MinuteChartContainer::UpdateOverlayIndex] can't find overlay index. [identify="+t+"]")},this.AddOverlayIndex=function(t){var e=this.CreateOverlayWindowsIndex(t);if(e){var a=this.SourceData;this.BindOverlayIndexData(e,t.WindowIndex,a),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.CreateOverlayWindowsIndex=function(t){var e=this,a=t.IndexName,i=t.WindowIndex,r=null,n=null,o=null;if(t.API)r=t.API;else if(t.Script)n={Script:t.Script,ID:t.indexName,Name:t.indexName},t.Name&&(n.Name=t.Name);else{if(!(n=(new T).Get(a))&&!(o=oa.Get(a)))return console.warn("[MinuteChartContainer::CreateOverlayIndex] can not find index["+a+"]"),null}var s=this.Frame.SubFrame[i];s.Interval=this.OverlayIndexFrameWidth;var h=new rt;t.Identify&&(h.Identify=t.Identify);var l=null;if((l="MinuteChartContainer"==this.ClassName?new Z:new Q).Canvas=this.Canvas,l.MainFrame=s.Frame,l.ChartBorder=s.Frame.ChartBorder,l.GlobalOption=this.GlobalOption,!0===t.ShowRightText?l.IsShow=!0:!1===t.ShowRightText&&(l.IsShow=!1),!0===t.IsShareY&&(l.IsShareY=!0),Te.IsBool(t.IsCalculateYMaxMin)&&(l.IsCalculateYMaxMin=t.IsCalculateYMaxMin),l.YSplitOperator=new ye,l.YSplitOperator.LanguageID=this.LanguageID,l.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),l.YSplitOperator.Frame=l,l.YSplitOperator.ChartBorder=l.ChartBorder,l.YSplitOperator.SplitCount=s.Frame.YSplitOperator.SplitCount,l.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},l.YSplitOperator.HQChart=this,l.YSplitOperator.OverlayIdentify=h.Identify,t.Frame){var u=t.Frame;u.Custom&&(l.YSplitOperator.Custom=u.Custom)}if(h.Frame=l,r){var c=new li(r.Name,r.Script,r.Args,t,!0);c.OverlayIndex={IsOverlay:!0,Identify:h.Identify,WindowIndex:i,Frame:h},h.Script=c}else if(n){var f=n;t.Args&&(f.Args=t.Args),(d=new hi(f.Name,f.Script,f.Args,f)).OverlayIndex={IsOverlay:!0,Identify:h.Identify,WindowIndex:i,Frame:h},h.Script=d}else{var d;(d=o.Create()).OverlayIndex={IsOverlay:!0,Identify:h.Identify,WindowIndex:i,Frame:h},d.Create(this,i),h.Script=d}return s.OverlayIndex.push(h),h},this.DeleteOverlayWindowsIndex=function(t){this.DeleteOverlayIndex(t,null)&&(this.Frame.ResetXYSplit(!0),this.Draw())},this.BindAllOverlayIndexData=function(t){if(this.Frame&&this.Frame.SubFrame)for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e];for(var i in a.OverlayIndex){var r=a.OverlayIndex[i];this.BindOverlayIndexData(r,e,t)}}},this.BindOverlayIndexData=function(t,e,a){t.Script&&("function"!=typeof t.Script.RequestData?"function"!=typeof t.Script.ExecuteScript?t.Script.BindData(this,e,a):t.Script.ExecuteScript(this,e,a):t.Script.RequestData(this,e,a))},this.GetChartPaint=function(t){var e=new Array;for(var a in this.ChartPaint)if(!(a<3)){var i=this.ChartPaint[a];i.ChartFrame==this.Frame.SubFrame[t].Frame&&e.push(i)}return e},this.CreateWindowIndex=function(t){this.WindowIndex[t].Create(this,t)},this.GetIndexInfo=function(){var t=[];for(var e in this.WindowIndex){var a=this.WindowIndex[e],i={Name:a.Name};a.ID&&(i.ID=a.ID),t.push(i)}return t},this.OnTouchFinished=function(){!0!==this.CorssCursorTouchEnd||this.DrawDynamicInfo()},this.CreateExtendChart=function(t,e){var a;switch(t){case"MinuteTooltip":return(a=e.Create&&"function"==typeof e.Create?e.Create():new me).Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,e.LanguageID=this.LanguageID,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"MinutePCTooltip":return(a=e.Create&&"function"==typeof e.Create?e.Create():new function(){this.newMethod=Ce,this.newMethod(),delete this.newMethod,this.IsDynamic=!0,this.IsEraseBG=!0,this.DrawAfterTitle=!0,this.ClassName="MinuteLeftTooltipPaint",this.BorderColor=ia.PCTooltipPaint.BorderColor,this.BGColor=ia.PCTooltipPaint.BGColor,this.TitleColor=ia.PCTooltipPaint.TitleColor,this.DateTimeColor=ia.PCTooltipPaint.DateTimeColor,this.VolColor=ia.PCTooltipPaint.VolColor,this.AmountColor=ia.PCTooltipPaint.AmountColor,this.LanguageID=ra.LANGUAGE_CHINESE_ID,this.TitlePaint,this.UpColor=ia.UpTextColor,this.DownColor=ia.DownTextColor,this.UnchagneColor=ia.UnchagneTextColor,this.YClose,this.Mergin={Left:2,Top:3,Bottom:2,Right:2},this.LineHeight=15,this.FixedWidth,this.Font=ia.PCTooltipPaint.TitleFont,this.HQChart,this.SetOption=function(t){t.BGColor&&(this.BGColor=t.BGColor),t.LanguageID>0&&(this.LanguageID=t.LanguageID),Te.IsNumber(t.FixedWidth)&&(this.FixedWidth=t.FixedWidth)},this.IsEnableDraw=function(){if(!this.HQChart||!this.HQChart.TitlePaint||!this.HQChart.TitlePaint[0])return!1;var t=this.HQChart.LastPoint;return!!t&&this.HQChart.IsMouseOnClient(t.X,t.Y)},this.Draw=function(){if(this.IsEnableDraw()&&(this.TitlePaint=this.HQChart.TitlePaint[0],this.TitlePaint)){var t,e=this.TitlePaint.PointInfo;if(e&&(2==e.ClientPos||3==e.ClientPos||e.ClientPos>=200&&e.ClientPos<=299||e.ClientPos>=300&&e.ClientPos<=399)){var a=this.TitlePaint.GetCurrentAuctionData();if(!a)return;t={Type:1,Data:a}}else{var i=this.TitlePaint.GetCurrentKLineData();if(!i)return;t={Type:0,Data:i}}this.YClose=this.TitlePaint.YClose;var r=this.GetForamtTitle(t);if(Te.IsNonEmptyArray(r)){this.Canvas.font=this.Font,this.Canvas.textBaseline="top",this.LineHeight=O(this.Canvas,null,"擎");var n=this.ChartBorder.GetBorder(),o=this.LineHeight*r.length*2,s={Left:1,Top:1,Right:n.Left};s.Bottom=s.Top+o,s.Width=s.Right-s.Left,s.Height=s.Bottom-s.Top,s.Height+=this.Mergin.Top+this.Mergin.Bottom,s.Bottom=s.Top+s.Height,Te.IsNumber(this.FixedWidth)&&(s.Width=this.FixedWidth),this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(s.Left,s.Top,s.Width,s.Height),this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(_(s.Left),_(s.Top),k(s.Width),k(s.Height));var h=s.Left+s.Width-this.Mergin.Right,l={Left:this.Mergin.Left+s.Left,Top:this.Mergin.Top+s.Top,Right:h};l.Width=l.Right-l.Left;for(var u=0;u<r.length;++u){var c=r[u];this.DrawText(c,l)}}}},this.DrawText=function(t,e){this.Canvas.fillStyle=t.TitleColor,this.Canvas.textAlign="left",this.Canvas.fillText(t.Title,e.Left,e.Top),e.Top+=this.LineHeight,e.Bottom=e.Top+this.LineHeight,this.Canvas.textAlign="right",this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Text,e.Right,e.Top),e.Top+=this.LineHeight,e.Bottom=e.Top+this.LineHeight},this.GetForamtTitle=function(t){if(!t||!t.Data)return null;var e,a=[];this.HQChart.Symbol&&(e=this.HQChart.Symbol.toUpperCase());var i=Ga(e);if(0==t.Type){var r=t.Data;if((n=this.FormatDate(r.Date))&&a.push(n),(n=this.ForamtTime(r.Time,"HH:MM","PCTooltip-Time"))&&a.push(n),(n=this.ForamtPrice(r.Close,i,"PCTooltip-Price"))&&a.push(n),(n=this.ForamtPrice(r.AvPrice,i,"PCTooltip-AvPrice"))&&a.push(n),(n=this.ForamtIncrease(r.Close,"PCTooltip-Increase"))&&a.push(n),(n=this.FormatVol(r.Vol,"PCTooltip-Vol"))&&a.push(n),Te.IsNumber(r.Amount)){var n={Title:na.GetText("PCTooltip-Amount",this.LanguageID),TitleColor:this.TitleColor,Text:Te.FromatIntegerString(r.Amount,2,this.LanguageID),TextColor:this.AmountColor};a.push(n)}}else if(1==t.Type){if(!(r=t.Data.Data))return;(n=this.FormatDate(r.Date))&&a.push(n);var o="HH:MM:SS";1===r.Ver&&(o="HH:MM"),(n=this.ForamtTime(r.Time,o,"PCTooltip-Time"))&&a.push(n),(n=this.ForamtPrice(r.Price,i,"PCTooltip-AC-Price"))&&a.push(n),(n=this.ForamtIncrease(r.Price,"PCTooltip-AC-Increase"))&&a.push(n),Te.IsNonEmptyArray(r.Vol)&&((n=this.FormatVol(r.Vol[0],"PCTooltip-AC-Vol"))&&a.push(n),(n=this.FormatVol(r.Vol[1],"PCTooltip-AC-NotMatchVol"))&&a.push(n))}return a},this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor},this.FormatDate=function(t){return Te.IsNumber(t)?{Title:na.GetText("PCTooltip-Date",this.LanguageID),TitleColor:this.TitleColor,Text:Te.FormatDateString(t,"MM-DD",this.LanguageID),TextColor:this.DateTimeColor}:null},this.ForamtTime=function(t,e,a){return Te.IsNumber(t)?{Title:na.GetText(a,this.LanguageID),TitleColor:this.TitleColor,Text:Te.FormatTimeString(t,e,this.LanguageID),TextColor:this.DateTimeColor}:null},this.ForamtPrice=function(t,e,a){return Te.IsNumber(t)?{Title:na.GetText(a,this.LanguageID),TitleColor:this.TitleColor,Text:t.toFixed(e),TextColor:this.GetColor(t,this.YClose)}:null},this.ForamtIncrease=function(t,e){if(!Te.IsNumber(t)||0==t)return null;var a=(t-this.YClose)/this.YClose*100;return{Title:na.GetText(e,this.LanguageID),TitleColor:this.TitleColor,Text:a.toFixed(2)+"%",TextColor:this.GetColor(a,0)}},this.FormatVol=function(t,e){return Te.IsNumber(t)?{Title:na.GetText(e,this.LanguageID),TitleColor:this.TitleColor,Text:Te.FromatIntegerString(t,2,this.LanguageID),TextColor:this.VolColor}:null}}).Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,e.LanguageID=this.LanguageID,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"画图工具":return(a=new De).Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.Left=this.Frame.ChartBorder.Right,a.SetOption(e),this.ExtendChartPaint.push(a),this.Frame.ChartBorder.Right+=a.Width,a;case"MinuteBackgroundPaint":return(a=new function(){this.newMethod=Ce,this.newMethod(),delete this.newMethod,this.ClassName="MinuteBackgroundPaint",this.IsDynamic=!0,this.IsCallbackDraw=!1,this.HQChart,this.Data,this.Font=ia.DefaultTextFont,this.TextColor=ia.DefaultTextColor,this.MerginTop=20,this.ID=P(),this.FrameID=0,this.SetOption=function(t){t&&(t.Font&&(this.Font=t.Font),Te.IsObjectExist(t.ID)&&(this.ID=t.ID),t.FrameID>0&&(this.FrameID=t.FrameID),t.MerginTop>0&&(this.MerginTop=t.MerginTop))},this.Draw=function(){if(this.Data&&this.HQChart&&this.ChartFrame&&this.ChartFrame.SubFrame&&!(this.ChartFrame.SubFrame.length<=this.FrameID)){var t=this.ChartFrame.SubFrame[this.FrameID];if(t&&t.Frame){var e=t.Frame,a=this.HQChart.SourceData;if(a){for(var i=e.XPointCount,r=0,n=null,o=new C.default,s=a.DataOffset,h=0;s<a.Data.length&&h<i;++s,++h)(u=a.Data[s])&&u.Date!=r&&(r=u.Date,n?(n.Right=this.ChartFrame.GetXFromIndex(h-1),o.set(n.Date,n),n={Left:this.ChartFrame.GetXFromIndex(h),Date:u.Date}):n={Left:this.ChartFrame.GetXFromIndex(h),Date:u.Date});n&&!n.Right&&(n.Right=this.ChartFrame.GetXFromIndex(i-1),o.set(n.Date,n)),this.Canvas.textAlign="center",this.Canvas.textBaseline="top";var l=e.ChartBorder.GetTopEx()+this.MerginTop;for(s=0;s<this.Data.length;++s){var u=this.Data[s];if(o.has(u.Date)){var c=(n=o.get(u.Date)).Left+(n.Right-n.Left)/2;u.Font?this.Canvas.font=u.Font:this.Canvas.font=this.Font,u.TextColor?this.Canvas.fillStyle=u.TextColor:this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(u.Text,c,l)}}}}}}}).Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,e.LanguageID=this.LanguageID,a.SetOption(e),this.ExtendChartPaint.push(a),a;default:return(a=de.Create(t))?(a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a):null}},this.SetMinuteInfo=function(t,e){for(var a in this.ChartInfo=[],t){var i=Ta.Get(t[a]);if(i){var r=i.Create();this.ChartInfo.push(r)}}1==e&&this.RequestMinuteInfoData()},this.GetChartMinuteInfo=function(){return this.ChartInfoPaint},this.CreateMinuteInfo=function(t){var e=new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinuteInfo",this.Data=new C.default,this.SourceData,this.ChartMinutePrice,this.YClose,this.HQChartBorder,this.TextColor=ia.MinuteInfo.TextColor,this.Font=ia.MinuteInfo.Font,this.PointColor=ia.MinuteInfo.PointColor,this.LineColor=ia.MinuteInfo.LineColor,this.TextBGColor=ia.MinuteInfo.TextBGColor,this.PixelTatio=A(),this.TextHeight=20,this.TextRectCache=[],this.InfoDrawCache=[],this.FrameBottom,this.FrameTop,this.FrameLeft,this.FrameRight,this.YOffset=5,this.IsHScreen=!1,this.IsDrawFull=!1,this.TooltipRect=[],this.SetOption=function(t){t.TextColor&&(this.TextColor=t.TextColor),t.TextBGColor&&(this.TextBGColor=t.TextBGColor),t.Font&&(this.Font=t.Font),t.PointColor&&(this.PointColor=t.PointColor),t.LineColor&&(this.LineColor=t.LineColor),t.TextHeight>0&&(this.TextHeight=t.TextHeight),1==t.IsDrawFull&&(this.IsDrawFull=!0)},this.Draw=function(){if(this.TooltipRect=[],this.ChartMinutePrice&&this.Data&&!(this.Data.size<=0)){this.TextRectCache=[],this.InfoDrawCache=[],this.PixelTatio=A(),this.YOffset=5*this.PixelTatio,this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount;this.ChartFrame.MinuteCount,this.FrameBottom=this.ChartBorder.GetBottom(),this.IsDrawFull&&this.HQChartBorder&&(this.FrameBottom=this.HQChartBorder.GetBottom()),this.FrameTop=this.ChartBorder.GetTop(),this.FrameLeft=this.ChartBorder.GetLeft(),this.FrameRight=this.ChartBorder.GetRight(),this.IsHScreen&&(this.FrameRight=this.ChartBorder.GetBottom(),this.FrameLeft=this.ChartBorder.GetTop(),this.FrameBottom=this.ChartBorder.GetLeft(),this.FrameTop=this.ChartBorder.GetRight()),this.YClose=this.ChartMinutePrice.YClose;for(var e=this.ChartMinutePrice.Source,a=e.DataOffset,i=0;a<e.Data.length&&i<t;++a,++i)if(n=e.Data[a]){var r=n.DateTime;this.Data.has(r)&&(this.IsHScreen?this.CalcuateInfoHScreenPosition(this.Data.get(r),i,n):this.CalcuateInfoPosition(this.Data.get(r),i,n))}for(var a in this.InfoDrawCache){var n=this.InfoDrawCache[a];this.DrawInfoLines(n)}for(var a in this.InfoDrawCache)if(n=this.InfoDrawCache[a],this.DrawInfoText(n),!this.IsHScreen){var o=n.Border,s={Data:{Item:n},Rect:new yt(o.X,o.Y,o.Width,o.Height)};this.TooltipRect.push(s)}this.TextRectCache=[],this.InfoDrawCache=[]}},this.CalcuateInfoPosition=function(t,e,a){if(t&&t.Data&&!(t.Data.length<=0)){var i=t.Data[0];this.Canvas.font=this.Font;var r,n=this.Canvas.measureText(i.Title).width+4*this.PixelTatio,o=this.TextHeight*this.PixelTatio,s=this.ChartFrame.GetXFromIndex(e);r=Te.IsNumber(i.Price)?this.ChartFrame.GetYFromData(i.Price):this.ChartFrame.GetYFromData(a.Close);var h=(s=_(s))<this.FrameLeft+Math.abs(this.FrameLeft-this.FrameRight)/2,l=[2,4,6,8,3,5,7],u=o+l[e%l.length]*this.PixelTatio,c={Y:[{Value:r+(o+this.YOffset),Offset:u},{Value:r-(2*o+this.YOffset),Offset:-u}]};a.Close<this.YClose&&(c.Y=c.Y.reverse());var f={X:s,Y:null,Width:n,Height:o};h||(f.X-=f.Width),this.FixTextRect(f,c);var d={Border:f,Start:{X:s,Y:r},IsLeft:h,Title:i.Title,Date:i.Date,Time:i.Time};i.Content&&(d.Content=i.Content),i.Link&&(d.Link=i.Link),i.Color&&(d.Color=i.Color),i.BGColor&&(d.BGColor=i.BGColor),this.InfoDrawCache.push(d),this.TextRectCache.push(f)}},this.CalcuateInfoHScreenPosition=function(t,e,a){if(t&&t.Data&&!(t.Data.length<=0)){var i=t.Data[0];this.Canvas.font=this.Font;var r,n=this.Canvas.measureText(i.Title).width+4*this.PixelTatio,o=this.TextHeight*this.PixelTatio,s=this.ChartFrame.GetXFromIndex(e);r=Te.IsNumber(i.Price)?this.ChartFrame.GetYFromData(i.Price):this.ChartFrame.GetYFromData(a.Close);var h=(s=_(s))<this.FrameLeft+Math.abs(this.FrameLeft-this.FrameRight)/2,l=[2,4,6,8,3,5,7],u=o+l[e%l.length]*this.PixelTatio,c={X:[{Value:r+(o+this.YOffset),Offset:u},{Value:r-(2*o+this.YOffset),Offset:-u}]};a.Close>this.YClose&&(c.X=c.X.reverse());var f={X:null,Y:s,Width:o,Height:n};h||(f.Y-=f.Height),this.FixHScreenTextRect(f,c);var d={Border:f,Start:{X:r,Y:s},IsLeft:h,Title:i.Title};i.Content&&(d.Content=i.Content),i.Link&&(d.Link=i.Link),i.Color&&(d.Color=i.Color),i.BGColor&&(d.BGColor=i.BGColor),this.InfoDrawCache.push(d),this.TextRectCache.push(f)}},this.DrawInfoLines=function(t){var e=t.Border,a=t.IsLeft;this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(_(t.Start.X),t.Start.Y),a?this.Canvas.lineTo(_(t.Start.X),e.Y):this.IsHScreen?this.Canvas.lineTo(e.X,e.Y+e.Height):this.Canvas.lineTo(_(t.Start.X),e.Y),this.Canvas.stroke(),this.Canvas.fillStyle=this.PointColor,this.Canvas.beginPath(),this.Canvas.arc(t.Start.X,t.Start.Y,5,0,2*Math.PI),this.Canvas.closePath(),this.Canvas.fill()},this.DrawInfoText=function(t){var e=t.Border,a=e.X,i=e.Y;t.BGColor?this.Canvas.fillStyle=t.BGColor:this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(a,i,e.Width,e.Height),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.rect(a,i,e.Width,e.Height),this.Canvas.stroke(),this.IsHScreen&&(this.Canvas.save(),this.Canvas.translate(e.X,e.Y),this.Canvas.rotate(90*Math.PI/180),a=0,i=0),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",t.Color?this.Canvas.fillStyle=t.Color:this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.IsHScreen?this.Canvas.fillText(t.Title,a+2*this.PixelTatio,i-e.Width/2):this.Canvas.fillText(t.Title,a+2*this.PixelTatio,i+e.Height/2),this.IsHScreen&&this.Canvas.restore()},this.FixTextRect=function(t,e){for(var a in e.Y){var i,r=e.Y[a];t.Y=r.Value;for(var n=0;n<10;++n){var o=!1;for(var s in this.TextRectCache){var h=this.TextRectCache[s];if(this.IsOverlap(h,t)){o=!0;break}}if(0==o)return;if(i=t.Y,(i+=r.Offset)+t.Height>this.FrameBottom||i<this.FrameTop)break;t.Y=i}}},this.FixHScreenTextRect=function(t,e){for(var a in e.X){var i,r=e.X[a];t.X=r.Value;for(var n=0;n<10;++n){var o=!1;for(var s in this.TextRectCache){var h=this.TextRectCache[s];if(this.IsOverlap(h,t)){o=!0;break}}if(0==o)return;if(i=t.X,(i+=r.Offset)+t.Width<this.FrameBottom||i>this.FrameTop)break;t.X=i}}},this.IsOverlap=function(t,e){return t.X+t.Width>e.X&&e.X+e.Width>t.X&&t.Y+t.Height>e.Y&&e.Y+e.Height>t.Y},this.GetMaxMin=function(){return{Min:null,Max:null}},this.GetTooltipData=function(t,e,a){for(var i in this.TooltipRect){var r=this.TooltipRect[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return a.Data=r,a.ChartPaint=this,a.Type=3,!0}}return!1}};return e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.HQChartBorder=this.Frame.ChartBorder,e.ChartMinutePrice=this.ChartPaint[0],t&&e.SetOption&&e.SetOption(t),this.ChartInfoPaint=e,e},this.RequestMinuteInfoData=function(){if(!(this.ChartInfo.length<=0)){var t=this.GetChartMinuteInfo();for(var e in t||(t=this.CreateMinuteInfo(null)),t.SourceData=this.SourceData,this.ChartInfo)this.ChartInfo[e].RequestData(this)}},this.UpdataChartInfo=function(){var t=this.GetChartMinuteInfo();if(t){var e=new C.default;for(var a in this.ChartInfo){var i=this.ChartInfo[a].Data;for(var r in i){var n=i[r],o=n.Date+" "+n.Time;e.has(o)?e.get(o).Data.push(n):e.set(o,{Data:new Array(n)})}}t.Data=e}},this.UpdateWindowIndex=function(t){if(!(t<2)){var e=this.SourceData;this.BindIndexData(t,e),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.CreateChartDrawPicture=function(t,e,a){var i=null,r=We.GetDrawPictureByName(t);if(r&&"ChartDrawPictureText"==(i=r.Create()).ClassName&&(i.HQChart=this),!i&&We.MapIonFont.has(t)){var n=We.MapIonFont.get(t);(i=new Je).FontOption.Family=n.Family,i.Text=n.Text,n.Color&&(i.LineColor=n.Color)}if(!i)return!1;i.Canvas=this.Canvas,i.Status=0,i.Symbol=this.Symbol,i.Period=888888888,i.Option=this.ChartDrawOption,a&&(i.FinishedCallback=a),e&&i.SetOption(e);var o=this;return i.Update=function(){o.DrawDynamicInfo()},i.GetActiveDrawPicture=function(){return o.GetActiveDrawPicture()},this.CurrentChartDrawPicture=i,D.Chart.Log("[MinuteChartContainer::CreateChartDrawPicture] ",t,this.CurrentChartDrawPicture),!0},this.AddChartDrawPicture=function(t){if(!t)return null;if(t.FrameID<0||t.FrameID>=this.Frame.SubFrame.length)return null;var e=this,a=We.GetDrawPictureByClassName(t.ClassName);if(!a)return null;var i=a.Create();return i.Canvas=this.Canvas,i.Status=10,i.Frame=this.Frame.SubFrame[t.FrameID].Frame,i.Symbol=this.Symbol,i.Period=888888888,t.Value&&(i.Value=t.Value),t.Guid&&(i.Guid=t.Guid),i.ImportStorageData&&i.ImportStorageData(t),i.SetOption(t),t.EnableUpdateXValue&&i.UpdateXValue(),i.ValueToPoint(),i.GetActiveDrawPicture=function(){return e.GetActiveDrawPicture()},"ChartDrawPictureText"===i.ClassName&&(i.IsInitialized=!0),this.ChartDrawPicture.push(i),1==t.Draw&&this.DrawDynamicInfo(),i},this.ReloadChartDrawPicture=function(){this.ChartDrawPicture=[],this.ChartDrawStorageCache,this.ChartDrawStorage&&(this.ChartDrawStorageCache=this.ChartDrawStorage.GetDrawData({Symbol:this.Symbol,Period:888888888}))},this.CreateChartDrawPictureByStorage=function(){if(this.ChartDrawStorageCache&&!(this.ChartDrawStorageCache.length<=0)){for(var t in this.ChartDrawStorageCache){var e=this.ChartDrawStorageCache[t];if(!(e.FrameID<0||!this.Frame.SubFrame||this.Frame.SubFrame.length<e.FrameID)){var a=We.CreateChartDrawPicture(e);a&&(a.Canvas=this.Canvas,a.Status=10,a.Frame=this.Frame.SubFrame[e.FrameID].Frame,a.UpdateXValue(),a.ValueToPoint(),"ChartDrawPictureText"===a.ClassName&&(a.IsInitialized=!0),this.ChartDrawPicture.push(a))}}this.ChartDrawStorageCache=null}},this.SetSizeChange=function(t){for(var e in this.Frame.SetSizeChage(t),this.ExtendChartPaint){this.ExtendChartPaint[e].SizeChange=t}},this.SetSizeChage=this.SetSizeChange,this.GetDataIndexByPoint=function(t){var e=this.Frame;if(this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&(e=this.Frame.SubFrame[0].Frame),e){var a=e.GetXData(t);return parseInt(a.toFixed(0))}},this.GetSelectRectData=function(t){if(Math.abs(t.XStart-t.XEnd)<5)return!1;var e=this.PtInClient(t.XStart,t.YStart),a=this.PtInClient(t.XEnd,t.YEnd);t.StartClientPos=e,t.EndClientPos=a;var i=this.SourceData;if(!i)return!1;if(!Te.IsNonEmptyArray(i.Data))return!1;var r=this.GetDataIndexByPoint(t.XStart),n=this.GetDataIndexByPoint(t.XEnd);if(Math.abs(r-n)<2)return!1;t.Data=i;var o=i.DataOffset;(r+=o)>(n+=o)?(t.Start=n,t.End=r):(t.Start=r,t.End=n);var s=i.Data.length;return t.End>=s&&(t.End=s-1),!0},this.Super_UpdateFrameMaxMin=this.UpdateFrameMaxMin,this.UpdateFrameMaxMin=function(){if(this.Super_UpdateFrameMaxMin(),1==this.DayCount){var t=this.Frame.SubFrame[1];t.Frame&&(t.Frame.XYSplit=!0)}},this.ExportMainData=function(t,e){return t.ExportMinuteData(e)},this.DisplayLatest=function(){var t=this.GetEventCallback(w.ON_DISPLAY_LATEST);if(t){var e={PreventDefault:!1};if(t.Callback(t,e,this),e.PreventDefault)return}this.CursorIndex=null,this.LastPoint.X=0,this.LastPoint.Y=0,this.GlobalOption.IsDisplayLatest=!0,this.DrawDynamicInfo()},this.TryClickIndexTitle=function(t,e){for(var a=0;a<this.TitlePaint.length;++a){var i=this.TitlePaint[a];if(i.IsClickTitle&&i.IsClickTitle(t,e)){var r={Point:{X:t,Y:e},Title:i.Title,FrameID:i.Frame.Identify};D.Chart.Log("[MinuteChartContainer::TryClickIndexTitle] click title ",r);var n=this.GetEventCallback(w.ON_CLICK_INDEXTITLE);return n&&n.Callback&&n.Callback(n,r,this),!0}}return!1}}function ca(t){this.newMethod=ua,this.newMethod(t),delete this.newMethod,this.HistoryMinuteApiUrl="https://opensourcecache.zealink.com/cache/minuteday/day/",this.ClassName="HistoryMinuteChartContainer",this.CreateMainKLine=function(){var t,e=new Kt;e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.Name="Minute-Line",e.Color=ia.Minute.PriceColor,this.ChartPaint[0]=e,(t=new At).Canvas=this.Canvas,t.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,t.ChartFrame=this.Frame.SubFrame[0].Frame,t.Name="Minute-Average-Line",t.Color=ia.Minute.AvPriceColor,this.ChartPaint[1]=t,(t=new Mt).Color=ia.Minute.VolBarColor,t.Canvas=this.Canvas,t.ChartBorder=this.Frame.SubFrame[1].Frame.ChartBorder,t.ChartFrame=this.Frame.SubFrame[1].Frame,t.Name="Minute-Vol-Bar",this.ChartPaint[2]=t,this.TitlePaint[0]=new Ve,this.TitlePaint[0].Frame=this.Frame.SubFrame[0].Frame,this.TitlePaint[0].Canvas=this.Canvas,this.TitlePaint[0].IsShowDate=!0},this.ChangeTradeDate=function(t){t&&(this.TradeDate=t,this.RequestData())},this.RequestData=function(){var t=new Date;1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()==this.TradeDate?this.RequestMinuteData():this.RequestHistoryMinuteData()},this.RequestHistoryMinuteData=function(){var t=this,e=this.HistoryMinuteApiUrl+this.TradeDate.toString()+"/"+this.Symbol+".json";v.HttpRequest({url:e,type:"get",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryMinuteData(e)},error:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryMinuteError(e)}})},this.RecvHistoryMinuteError=function(t){if(404==t.status){var e=new pt;for(var a in this.SourceData=e,this.ChartPaint)this.ChartPaint[a].Data=e,0==a&&(this.ChartPaint[a].NotSupportMessage="没有权限访问!");this.TitlePaint[0].Data=this.SourceData,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=null,this.Draw()}},this.RecvHistoryMinuteData=function(t){var e=ca.JsonDataToMinuteData(t),a=new pt;if(a.Data=e,this.TradeDate=t.date,this.SourceData=a,this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(a,t.day.yclose),this.Frame.SubFrame.length>2){var i=new pt;i.Data=e;for(var r=2;r<this.Frame.SubFrame.length;++r)this.BindIndexData(r,i)}this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}function fa(t,e){!0===e?(this.newMethod=da,this.newMethod(t),delete this.newMethod):(this.newMethod=la,this.newMethod(t),delete this.newMethod),this.BuySellPaint,this.TrainDataCount=300,this.TrainStartDate,this.AutoRunTimer=null,this.BuySellData=[],this.TrainCallback,this.DragMode=1,this.IsAutoUpdate=!1,this.KLineSourceData,this.TrainInfo={Start:{},End:{}},this.Super_RecvFlowCapitalData=this.RecvFlowCapitalData,this.CreateBuySellPaint=function(){var t=new function(){this.newMethod=Xt,this.newMethod(),delete this.newMethod,this.ClassName="ChartBuySell",this.TextFont=ia.KLineTrain.Font,this.LastDataIcon=ia.KLineTrain.LastDataIcon,this.BuyIcon=ia.KLineTrain.BuyIcon,this.SellIcon=ia.KLineTrain.SellIcon,this.BuySellData=new C.default,this.IconFont=ia.KLineTrain.IconFont,this.LastDataDrawType=0,this.LastDataIndex=-1,this.AddTradeItem=function(t){this.BuySellData.has(t.Key)?this.BuySellData.get(t.Key).Data.push(t):this.BuySellData.set(t.Key,{Data:[t]})},this.ClearTradeData=function(){this.BuySellData=new C.default},this.Draw=function(){if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetRight();!0===t&&(i=this.ChartBorder.GetBottom());var r=this.ChartFrame.XPointCount;if(this.IconFont){var n=e+a,o=18*A();n<o&&(n=o),this.Canvas.font=n+"px "+this.IconFont.Family}else this.Canvas.font=this.TextFont;for(var s=this.Data.DataOffset,h=0;s<this.Data.Data.length&&h<r;++s,++h){var l=this.Data.Data[s];if(null!=l){if((c=this.ChartFrame.GetXFromIndex(h))>i)break;var u=!1;if(1==this.LastDataDrawType?s==this.LastDataIndex&&(u=!0):s==this.Data.Data.length-1&&(u=!0),u){var c=this.ChartFrame.GetXFromIndex(h),f=this.ChartFrame.GetYFromData(l.High);this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.IconFont?(this.Canvas.fillStyle=this.IconFont.Last.Color,this.DrawText(this.IconFont.Last.Text,c,f,t)):(this.Canvas.fillStyle=this.LastDataIcon.Color,this.Canvas.font=this.TextFont,this.DrawText(this.LastDataIcon.Text,c,f,t))}var d=s;if(this.BuySellData.has(d)){var C=this.BuySellData.get(d),p=(f=this.ChartFrame.GetYFromData(l.High),this.ChartFrame.GetYFromData(l.Low)),m=[!1,!1];for(var D in C.Data){if(1==m[0]&&1==m[1])break;var v=C.Data[D];0==v.Op&&0==m[0]?(this.Canvas.textAlign="center",this.Canvas.textBaseline="top",this.IconFont?(this.Canvas.fillStyle=this.IconFont.Buy.Color,this.DrawText(this.IconFont.Buy.Text,c,p,t)):(this.Canvas.fillStyle=this.BuyIcon.Color,this.DrawText(this.BuyIcon.Text,c,p,t)),m[0]=!0):1==v.Op&&0==m[1]&&(this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.IconFont?(this.Canvas.fillStyle=this.IconFont.Sell.Color,this.DrawText(this.IconFont.Sell.Text,c,f,t)):(this.Canvas.fillStyle=this.SellIcon.Color,this.DrawText(this.SellIcon.Text,c,f,t)),m[1]=!0)}}}}}}};t.Canvas=this.Canvas,t.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,t.ChartFrame=this.Frame.SubFrame[0].Frame,t.Name="KLine-Train-BuySell",this.ChartPaintEx[0]=t},this.GetKDataIndexByDateTime=function(t,e){if(!e||!t)return-1;for(var a=0;a<t.length;++a){var i=t[a];if(pt.IsMinutePeriod(this.Period,!0)){if(Te.IsNumber(this.TrainStartDate.Time)){if(i.Date>=this.TrainStartDate.Date&&i.Time>=this.TrainStartDate.Time)return a}else if(i.Date>=this.TrainStartDate.Date)return a}else if((pt.IsDayPeriod(this.Period,!0)||pt.IsTickPeriod(this.Period))&&i.Date>=this.TrainStartDate.Date)return a}return-1},this.AfterBindMainData=function(t){this.ChartPaintEx[0]||this.CreateBuySellPaint();var e=this.ChartPaint[0].Data;this.ChartPaintEx[0].Data=e;var a=e.Data[e.Data.length-1];this.TrainInfo.LastShowData=a,this.TrainInfo.LastData=this.SourceData.Data[this.SourceData.Data.length-1],"Update"!=t&&this.UpdateTrainUICallback("开始")},this.BeforeBindMainData=function(t){if("Update"!=t){this.KLineSourceData=new pt,this.KLineSourceData.Data=this.SourceData.Data.slice(0);var e=this.SourceData.Data.length,a=e-this.TrainDataCount-20,i=this.GetKDataIndexByDateTime(this.SourceData.Data,this.TrainStartDate);i>=0&&e-(a=i+1)<this.TrainDataCount&&(this.TrainDataCount=e-a);var r=a-1,n=this.SourceData.Data[r];this.TrainInfo.Start.Index=r,this.TrainInfo.Start.Date=n.Date,this.TrainInfo.Start.Time=n.Time,this.TrainInfo.End.Index=r,this.TrainInfo.End.Date=n.Date,this.TrainInfo.End.Time=n.Time,this.TrainInfo.LastData=n,this.SourceData.Data.length=a}},this.Run=function(t){if(!(this.AutoRunTimer||this.TrainDataCount<=0)){var e=this;this.AutoRunTimer=setInterval(function(){e.MoveNextKLineData(t)||clearInterval(e.AutoRunTimer)},1e3)}},this.MoveNextKLineData=function(t){if(this.TrainDataCount<=0)return!1;var e=1;t&&t.Step>1&&(e=t.Step);for(var a=0,i=0;i<e;++i){var r=this.TrainInfo.End.Index+1;if(r>=this.KLineSourceData.Data.length)break;var n=this.KLineSourceData.Data[r];if(this.SourceData.Data.push(n),this.TrainInfo.End.Index=r,this.TrainInfo.End.Date=n.Date,this.TrainInfo.End.Time=n.Time,--this.TrainDataCount,++a,this.TrainDataCount<=0)break}if(0==a)return!1;var o=this.Frame.GetCurrentPageSize();return Te.IsNumber(o)&&(this.PageSize=o-this.RightSpaceCount),t&&t.PageSize>0&&(this.PageSize=t.PageSize),this.Update(),this.TrainDataCount<=0?(this.FinishTrainData(),this.UpdateTrainUICallback("结束"),!1):(this.UpdateTrainUICallback("训练中"),!0)},this.UpdateTrainUICallback=function(t){if(this.mapEvent.has(w.RECV_TRAIN_MOVE_STEP)){var e=this.mapEvent.get(w.RECV_TRAIN_MOVE_STEP);if(e.Callback){var a={TrainDataCount:this.TrainDataCount,BuySellData:this.BuySellData,KLine:{Start:{Index:this.TrainInfo.Start.Index,Date:this.TrainInfo.Start.Date},End:{Index:this.TrainInfo.End.Index,Date:this.TrainInfo.End.Date}},LastData:this.TrainInfo.LastData,LastShowData:this.TrainInfo.LastShowData};Te.IsNumber(this.TrainInfo.Start.Time)&&(a.KLine.Start.Time=this.TrainInfo.Start.Time),Te.IsNumber(this.TrainInfo.End.Time)&&(a.KLine.End.Time=this.TrainInfo.End.Time),t&&(a.Description=t),this.TrainDataCount<=0&&(a.Symbol=this.Symbol,a.Name=this.Name),e.Callback(e,a,this)}}},this.FinishTrainData=function(){D.Chart.Log("[KLineTrainChartContainer::FinishTrainData] trian end ")},this.Stop=function(){null!=this.AutoRunTimer&&clearInterval(this.AutoRunTimer),this.AutoRunTimer=null},this.BuyOrSell=function(t,e){if(!this.TrainInfo.LastShowData)return!1;var a=this.ChartPaintEx[0];if(!a)return!1;var i=this.ChartPaint[0].Data;if(!i||i.Data.length<=0)return!1;var r=i.Data.length-1,n={Date:this.TrainInfo.End.Date,Time:this.TrainInfo.End.Time,Price:t.Price,Vol:t.Vol,Op:0,ID:t.ID};1==t.Op&&(n.Op=1);var o=r;n.Key=o,this.BuySellData.push(n),a.AddTradeItem(n),1==e&&this.Draw()},this.RestartTrain=function(t){D.Chart.Log("[KLineTrainChartContainer::RestartTrain] option ",t),this.TrainInfo={Start:{},End:{}},this.BuySellData=[],this.KLineSourceData=null;var e=this.ChartPaintEx[0];e&&(e.Data=null,e.ClearTradeData()),t.Symbol&&(this.Symbol=t.Symbol),Te.IsNumber(t.Period)&&(this.Period=t.Period),Te.IsNumber(t.Right)&&(this.Right=t.Right),t.Train&&(t.Train.DataCount>1&&(this.TrainDataCount=t.Train.DataCount),t.Train.DateTime&&(this.TrainStartDate=t.Train.DateTime));var a=this.Symbol;this.ChangeSymbol(a)},this.RecvFlowCapitalData=function(t){if(t.stock&&1==t.stock.length){var e=t.stock[0],a=new Array;for(var i in e.stockday){var r=e.stockday[i],n=new ct;n.Date=r.date;var o=r.capital;o&&(o.a>0&&(n.Value=o.a,a.push(n)))}if(pt.IsMinutePeriod(this.Period,!0)){var s=this.SourceData.GetMinuteFittingFinanceData(a);for(var h in this.SourceData.Data){r=this.SourceData.Data[h];s[h]&&(r.FlowCapital=s[h].Value)}var l=this.ChartPaint[0].Data;if((d=new pt).Data=this.SourceData.Data,pt.IsMinutePeriod(l.Period,!1)){var u=d.GetPeriodData(l.Period);d.Data=u}l.Data=d.Data;s=this.KLineSourceData.GetMinuteFittingFinanceData(a);for(var c in this.KLineSourceData.Data){r=this.KLineSourceData.Data[c];s[c]&&(r.FlowCapital=s[c].Value)}}else{s=this.SourceData.GetFittingFinanceData(a);for(var f in this.SourceData.Data){r=this.SourceData.Data[f];s[f]&&(r.FlowCapital=s[f].Value)}var d;l=this.ChartPaint[0].Data;if((d=new pt).Data=this.SourceData.Data,l.Right>0){var C=d.GetRightData(l.Right,{AlgorithmType:this.RightFormula});d.Data=C}if(pt.IsDayPeriod(l.Period,!1)){u=d.GetPeriodData(l.Period);d.Data=u}l.Data=d.Data;s=this.KLineSourceData.GetFittingFinanceData(a);for(var p in this.KLineSourceData.Data){r=this.KLineSourceData.Data[p];s[p]&&(r.FlowCapital=s[p].Value)}}this.FlowCapitalReady=!0;var m=!1;for(var D in this.ExtendChartPaint){if("StockChip"==(r=this.ExtendChartPaint[D]).ClassName){m=!0;break}}m&&this.Draw()}},this.AutoUpdate()}function da(t){this.newMethod=la,this.newMethod(t),delete this.newMethod,this.ClassName="KLineChartHScreenContainer",this.OnMouseMove=function(t,e,a,i){this.LastPoint.X=t,this.LastPoint.Y=e,this.CursorIndex=this.Frame.GetXData(e);var r={ParentFunction:"OnMouseMove",Point:{X:t,Y:e},IsPhone:!0===i};this.DrawDynamicInfo(r)},t.onmousedown=function(e){if(this.JSChartContainer&&0!=this.JSChartContainer.DragMode){var a=A();if(this.JSChartContainer.TryClickLock){var i=(e.clientX-this.getBoundingClientRect().left)*a,r=(e.clientY-this.getBoundingClientRect().top)*a;if(this.JSChartContainer.TryClickLock(i,r))return}var n={Click:{},LastMove:{}};n.Click.X=e.clientX,n.Click.Y=e.clientY,n.LastMove.X=e.clientX,n.LastMove.Y=e.clientY,this.JSChartContainer.MouseDrag=n,document.JSChartContainer=this.JSChartContainer,this.JSChartContainer.SelectChartDrawPicture=null,t.ondblclick=function(t){var e=t.clientX-this.getBoundingClientRect().left,a=t.clientY-this.getBoundingClientRect().top;this.JSChartContainer&&this.JSChartContainer.OnDoubleClick(e,a,t)},document.onmousemove=function(t){if(this.JSChartContainer&&(!this.JSChartContainer.ChartSplashPaint||1!=this.JSChartContainer.ChartSplashPaint.IsEnableSplash)){var e=this.JSChartContainer.MouseDrag;if(e){var a=Math.abs(e.LastMove.Y-t.clientY);if(1==this.JSChartContainer.DragMode){if(a<5)return;if(a<this.JSChartContainer.GetMoveOneStepWidth())return;var i=!0;e.LastMove.Y<t.clientY&&(i=!1),this.JSChartContainer.DataMove(a,i)&&(this.JSChartContainer.UpdataDataoffset(),this.JSChartContainer.UpdatePointByCursorIndex(),this.JSChartContainer.UpdateFrameMaxMin(),this.JSChartContainer.ResetFrameXYSplit(),this.JSChartContainer.Draw()),e.LastMove.X=t.clientX,e.LastMove.Y=t.clientY}}}},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null,this.JSChartContainer.MouseDrag=null,this.JSChartContainer.CurrentChartDrawPicture=null,this.JSChartContainer=null}}},this.OnTouchStart=function(e){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.PhonePinch=null,this.IsOnTouch=!0,this.TouchDrawCount=0,this.StopDragTimer();var a=this.IsSingleTouch(e);if(e.cancelable&&e.preventDefault(),this.IsPhoneDragging(e)){var i=this.GetToucheData(e,!1),r=this.PointAbsoluteToRelative(i[0].clientX,i[0].clientY,!0);if(this.TryClickLock||this.TryClickIndexTitle){var n=r.X,o=r.Y;if(this.TryClickLock&&this.TryClickLock(n,o))return;if(this.TryClickIndexTitle&&this.TryClickIndexTitle(n,o))return}if(this.ClickFrameButton){var s=this.Frame.PtInButtons(r.X,r.Y);if(s)return void this.ClickFrameButton(s,e)}this.EnableVerticalDrag&&(this.VerticalDrag={IsDrag:!1},this.Frame.PtInFrameVertical(r.X,r.Y)&&(this.VerticalDrag.IsDrag=!0));var h=!0;this.ChartDrawOption.IsLockScreen?h=!1:this.DragMode==E.CLICK_TOUCH_MODE_ID?1==this.TouchStatus.CorssCursorShow&&(h=!1):this.DragMode==E.DISABLE_DRAG_ID?h=!1:a||(h=!1),this.VerticalDrag&&(h=!1);var l={Click:{},LastMove:{}};if(l.Click.X=i[0].clientX,l.Click.Y=i[0].clientY,l.LastMove.X=i[0].clientX,l.LastMove.Y=i[0].clientY,this.MouseDrag=l,this.PhoneTouchInfo={Start:{X:i[0].clientX,Y:i[0].clientY},End:{X:i[0].clientX,Y:i[0].clientY}},this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.IsSelected=!1),this.SelectChartDrawPicture=null,this.CurrentChartDrawPicture)return 2==this.CurrentChartDrawPicture.Status?this.SetChartDrawPictureThirdPoint(l.Click.X,l.Click.Y,!0):(this.SetChartDrawPictureFirstPoint(l.Click.X,l.Click.Y,!0),this.FinishChartDrawPicturePoint()&&this.DrawDynamicInfo({Corss:!1,Tooltip:!1})),void(e.cancelable&&e.preventDefault());var u={};A();if(u.X=i[0].clientX-t.getBoundingClientRect().left,u.Y=i[0].clientY-t.getBoundingClientRect().top,this.GetChartDrawPictureByPoint(u)){u.ChartDrawPicture.Status=20,u.ChartDrawPicture.ValueToPoint(),u.ChartDrawPicture.MovePointIndex=u.PointIndex,u.ChartDrawPicture.IsSelected=!0,this.CurrentChartDrawPicture=u.ChartDrawPicture,this.SelectChartDrawPicture=u.ChartDrawPicture;var c=this.GetEventCallback(w.ON_CLICK_DRAWPICTURE);if(c&&c.Callback){var f={DrawPicture:u.ChartDrawPicture};c.Callback(c,f,this)}return void(e.cancelable&&e.preventDefault())}if(h){var d=this;this.DragTimer=setTimeout(function(){if(l.Click.X==l.LastMove.X&&l.Click.Y==l.LastMove.Y){d.MouseDrag;d.MouseDrag=null,d.MoveCorssCursor(l.Click,e)}},d.PressTime)}this.ChartDrawOption.IsLockScreen?this.MouseDrag=null:this.DragMode==E.CLICK_TOUCH_MODE_ID||(this.DragMode==E.DISABLE_DRAG_ID?(this.MouseDrag=null,this.MoveCorssCursor(l.Click,e)):this.VerticalDrag?this.VerticalDrag.IsDrag||this.MoveCorssCursor(l.Click,e):this.IsClickShowCorssCursor&&this.MoveCorssCursor(l.Click,e))}else if(this.IsPhonePinching(e)){var C={Start:{},Last:{}};i=this.GetToucheData(e,!1);C.Start={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},C.Last={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},this.PhonePinch=C,this.SelectChartDrawPicture=null}this.TouchEvent({EventID:w.ON_PHONE_TOUCH,FunctionName:"OnTouchStart"},e)}},this.OnTouchMove=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){t.cancelable&&t.preventDefault();var e=this.GetToucheData(t,!1);if(this.IsPhoneDragging(t)){var a=this.MouseDrag;if(null==a)this.ChartDrawOption.IsLockScreen||this.MoveCorssCursor({X:e[0].clientX,Y:e[0].clientY},t);else{var i=Math.abs(a.LastMove.Y-e[0].clientY),r=Math.abs(a.LastMove.X-e[0].clientX),n=this.DragMode==E.CLICK_TOUCH_MODE_ID&&1==this.TouchStatus.CorssCursorShow;if(this.VerticalDrag&&(n=!0!==this.VerticalDrag.IsDrag),this.CurrentChartDrawPicture){var o=this.CurrentChartDrawPicture;if(1==o.Status||2==o.Status){if(i<5&&r<5)return;this.SetChartDrawPictureSecondPoint(e[0].clientX,e[0].clientY,!0)&&this.DrawDynamicInfo()}else if(3==o.Status)this.SetChartDrawPictureThirdPoint(e[0].clientX,e[0].clientY,!0)&&this.DrawDynamicInfo();else if(20==o.Status){if(i<5&&r<5)return;this.MoveChartDrawPicture(e[0].clientX-a.LastMove.X,e[0].clientY-a.LastMove.Y,!0)&&this.DrawDynamicInfo()}a.LastMove.X=e[0].clientX,a.LastMove.Y=e[0].clientY}else if(n){this.MouseDrag;this.MouseDrag=null,this.MoveCorssCursor(a.Click,t)}else if(1==this.DragMode||0==n){if(i<5)return;if(i<this.GetMoveOneStepWidth())return;if(this.EnableVerticalDrag){if(!this.VerticalDrag)return;if(!this.VerticalDrag.IsDrag)return}var s=!0;a.LastMove.Y<e[0].clientY&&(s=!1),this.DataMove(i,s)?(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw(),this.OnKLinePageChange("OnTouchMove")):this.DragDownloadData&&this.DragDownloadData(),a.LastMove.X=e[0].clientX,a.LastMove.Y=e[0].clientY}}this.PhoneTouchInfo&&(this.PhoneTouchInfo.End.X=e[0].clientX,this.PhoneTouchInfo.End.Y=e[0].clientY)}else if(this.IsPhonePinching(t)){if(this.DragMode==E.DISABLE_DRAG_ID)return;var h=this.PhonePinch;if(!h)return;var l=Math.abs(e[0].pageX-e[1].pageX)-Math.abs(h.Last.X-h.Last.X2);if(Math.abs(l)<5)return;if(l>0){if((u={}).Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomUp(u))return;this.CursorIndex=u.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("OnTouchMove")}else{var u;if((u={}).Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomDown(u))return;this.CursorIndex=u.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("OnTouchMove")}h.Last={X:e[0].pageX,Y:e[0].pageY,X2:e[1].pageX,Y2:e[1].pageY}}}},this.OnTouchEnd=function(t){if(D.Chart.Log("[KLineChartHScreenContainer:OnTouchEnd]",t),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){if(this.CurrentChartDrawPicture){var e=this.CurrentChartDrawPicture;2==e.Status||1==e.Status||3==e.Status?(e.PointStatus=e.Status,this.FinishChartDrawPicturePoint()?this.DrawDynamicInfo():!1):20==e.Status&&this.FinishMoveChartDrawPicture()&&this.DrawDynamicInfo()}this.IsOnTouch=!1,this.VerticalDrag=null,this.StopDragTimer(),this.TouchEvent({EventID:w.ON_PHONE_TOUCH,FunctionName:"OnTouchEnd"},t),this.OnTouchFinished(),this.TouchDrawCount=0}},this.Create=function(t){var e=this;for(var a in this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new be,this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=_e.Create("CorssCursor_XStringFormat"),this.ChartCorssCursor.StringFormatX.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY=_e.Create("CorssCursor_YStringFormat"),this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY.ExtendChartPaint=this.ExtendChartPaint,this.ChartSplashPaint=new Le,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.HQChart=this,this.Frame=new ot,this.Frame.ChartBorder=new X,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine(),this.Frame.SubFrame){var i=new Xe;i.Frame=this.Frame.SubFrame[a].Frame,i.Canvas=this.Canvas,i.LanguageID=this.LanguageID,i.GetEventCallback=function(t){return e.GetEventCallback(t)},i.SelectedChart=this.SelectedChart,this.TitlePaint.push(i)}this.UIElement.addEventListener("keydown",N,!0)},this.CreateChildWindow=function(t){for(var e=this,a=0;a<t;++a){var i=new X;i.UIElement=this.UIElement;var r=W.Create("KLineHScreenFrame",{ID:a});if(r.Canvas=this.Canvas,r.ChartBorder=i,r.Identify=a,r.RightSpaceCount=this.RightSpaceCount,this.ModifyIndexDialog&&(r.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(r.ChangeIndexEvent=this.ChangeIndexDialog.DoModal),r.HorizontalMax=20,r.HorizontalMin=10,0==a){r.YSplitOperator=new Ie,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),r.YSplitOperator.FrameSplitData2=this.FrameSplitData.get("double"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)};var n=A();i.TopSpace=12*n,i.BottomSpace=12*n}else r.YSplitOperator=new ye,r.YSplitOperator.LanguageID=this.LanguageID,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double");r.YSplitOperator.Frame=r,r.YSplitOperator.ChartBorder=i,r.XSplitOperator=new xe,r.XSplitOperator.Frame=r,r.XSplitOperator.ChartBorder=i,r.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},a!=t-1&&(r.XSplitOperator.ShowText=!1);for(var o=r.HorizontalMin;o<=r.HorizontalMax;o+=1)r.HorizontalInfo[o]=new Y,r.HorizontalInfo[o].Value=o,0==a&&o==r.HorizontalMin||(r.HorizontalInfo[o].Message[1]=o.toString(),r.HorizontalInfo[o].Font="14px 微软雅黑");var s=new it;s.Frame=r,s.Height=0==a?20:10,this.Frame.SubFrame[a]=s}}}function Ca(t){this.newMethod=ua,this.newMethod(t),delete this.newMethod,this.ClassName="MinuteChartHScreenContainer",this.OnMouseMove=function(t,e,a,i){this.LastPoint.X=t,this.LastPoint.Y=e,this.CursorIndex=this.Frame.GetXData(e);var r={ParentFunction:"OnMouseMove",Point:{X:t,Y:e},IsPhone:!0===i,ClientPos:this.PtInClient(t,e)};this.DrawDynamicInfo(r)},this.Create=function(t){var e=this;for(var a in this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new be,this.ChartCorssCursor.PtInClient=function(t,a){return e.PtInClient(t,a)},this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=_e.Create("CorssCursor_Minute_XStringFormat"),this.ChartCorssCursor.StringFormatX.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ChartCorssCursor.StringFormatY=_e.Create("CorssCursor_YStringFormat"),this.ChartCorssCursor.StringFormatY.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ChartCorssCursor.CallAcutionXOperator=new Ee,this.ChartSplashPaint=new Le,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.HQChart=this,this.Frame=new ot,this.Frame.ChartBorder=new X,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=25,this.Frame.ChartBorder.Left=50,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine(),this.Frame.SubFrame){var i=new Xe;i.Frame=this.Frame.SubFrame[a].Frame,i.Canvas=this.Canvas,i.LanguageID=this.LanguageID,i.GetEventCallback=function(t){return e.GetEventCallback(t)},i.SelectedChart=this.SelectedChart,this.TitlePaint.push(i)}this.ChartCorssCursor.StringFormatX.Frame=this.Frame.SubFrame[0].Frame,this.ChartCorssCursor.StringFormatY.Frame=this.Frame,this.ChartCorssCursor.CallAcutionXOperator.Frame=this.Frame.SubFrame[0].Frame,this.UIElement.addEventListener("keydown",N,!0)},this.CreateChildWindow=function(t){for(var e=this,a=0;a<t;++a){var i=new X;i.UIElement=this.UIElement;var r=new q;r.Canvas=this.Canvas,r.ChartBorder=i,r.Identify=a,a<2&&(r.ChartBorder.TitleHeight=0),r.XPointCount=243;var n=[9,8,7,6,5,4,3,2,1];for(var o in r.HorizontalMax=n[0],r.HorizontalMin=n[n.length-1],0==a?(r.YSplitOperator=new we,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},r.YSplitOperator.DayOffset=this.DayOffset,r.YSplitOperator.HQChart=this):(r.YSplitOperator=new ye,r.YSplitOperator.LanguageID=this.LanguageID,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)}),r.YSplitOperator.Frame=r,r.YSplitOperator.ChartBorder=i,r.XSplitOperator=new Fe,r.XSplitOperator.Frame=r,r.XSplitOperator.ChartBorder=i,r.XSplitOperator.DayOffset=this.DayOffset,r.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},a!=t-1&&(r.XSplitOperator.ShowText=!1),r.XSplitOperator.Operator(),n)r.HorizontalInfo[o]=new Y,r.HorizontalInfo[o].Value=n[o],0==a&&o==r.HorizontalMin||(r.HorizontalInfo[o].Message[1]=n[o].toString(),r.HorizontalInfo[o].Font="14px 微软雅黑");var s=new it;s.Frame=r,s.Height=0==a?20:10,this.Frame.SubFrame[a]=s}}}function pa(t,e){this.Name=t,this.Param=e,this.LineColor,this.ReqeustData=null}function ma(t){this.Index,this.Name=t,this.Script=null,this.ClassName="BaseIndex",this.OverlayIndex=null,this.GetEventCallback,this.Status=0,this.Guid=P(),this.Create=function(t,e){},this.NotSupport=function(t,e,a){if(!this.IsOverlay()){t.DeleteIndexPaint(e);var i=t.Frame.SubFrame[e].Frame,r=new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartErrorMessage",this.Draw=function(){this.IsShow&&this.NotSupportMessage&&this.DrawNotSupportmessage()}};r.Canvas=t.Canvas,r.ChartBorder=i.ChartBorder,r.ChartFrame=i,r.NotSupportMessage=a,t.ChartPaint.push(r)}},this.FormatIndexTitle=function(){var t=this.Name,e=null;for(var a in this.Index){var i=this.Index[a];null!=i.Param&&(e?e+=","+i.Param.toString():e=i.Param.toString())}return e&&(t+="("+e+")"),t},this.IsOverlay=function(){return!(!this.OverlayIndex||1!=this.OverlayIndex.IsOverlay)},this.CreateChart=function(t){return new At},this.CreatePaints=function(t,e){var a=null,i=this.IsOverlay();i?(a=this.OverlayIndex.Frame.Frame,this.OverlayIndex.Frame.ChartPaint=[]):(a=t.Frame.SubFrame[e].Frame,t.DeleteIndexPaint(e));var r=[];for(var n in this.Index){var o=this.CreateChart(n);o.Color=this.Index[n].LineColor,o.Canvas=t.Canvas,o.Name=this.Name+"-"+n.toString(),o.ChartBorder=a.ChartBorder,o.ChartFrame=a,i?this.OverlayIndex.Frame.ChartPaint.push(o):t.ChartPaint.push(o),r.push(o)}return r},this.SendEvent=function(t,e,a,i){if(t.GetIndexEvent){var r=t.GetIndexEvent();if(r){var n={Data:this.GetOutData(),WindowIndex:e,Name:this.Name,HistoryData:a,Stock:{Symbol:t.Symbol,Name:t.Name}};i&&(n.Error=i),r.Callback(r,n,self)}}},this.GetOutData=function(){return null}}function Da(t,e,a,i){this.newMethod=ma,this.newMethod(t),delete this.newMethod,this.Script=e,this.Arguments=[],this.OutVar=[],this.ApiUrl=ia.PyIndexDomain+"/hq/code",a&&(this.Arguments=a),this.RequestData=function(t,e,a){this.OutVar=[];var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a},n="";for(var o in this.Arguments){n.length>0&&(n+=",");var s=this.Arguments[o];n+='"'+s.Name+'":'+s.Value}n="{"+n+"}";var h=JSON.parse(n),l=(0,d.default)({code:this.Script,symbol:r.HQChart.Symbol,period:r.HQChart.Period,right:r.HQChart.Right,params:h,numcount:t.MaxRequestDataCount});return v.HttpRequest({url:this.ApiUrl,data:l,type:"post",dataType:"json",contentType:" application/json; charset=utf-8",async:!0,success:function(t){i.RecvData(t,r)},complete:function(t){},error:function(t,e){i.RecvError(t,e,r)}}),!0},this.RecvError=function(t,e,a){D.Chart.Log("[PyScriptIndex::RecvError] error",e),a.HQChart.ScriptErrorCallback&&a.HQChart.ScriptErrorCallback(e)},this.RecvData=function(t,e){if(0!=t.code)return D.Chart.Log("[PyScriptIndex::RecvData] failed.",t),void(e.HQChart.ScriptErrorCallback&&e.HQChart.ScriptErrorCallback(t.msg));D.Chart.Log("[PyScriptIndex::RecvData] recv data.",t);var a=t.date;for(var i in t.data){for(var r=t.data[i],n=[],o=0;o<a.length&&o<a.length;++o)if(!(o>=r.data.length)){var s=new ct;s.Date=a[o],s.Value=r.data[o],n.push(s)}var h=e.HistoryData.GetFittingData(n),l=new pt;l.Data=h,l.Period=e.HQChart.Period,l.Right=e.HQChart.Right;var u={Name:r.name,Type:r.graph,LineWidth:r.width,Data:l.GetValue(),Color:r.color};this.OutVar.push(u)}this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()},this.BindData=function(t,e,a){for(var i in t.DeleteIndexPaint(e),this.OutVar){var r=this.OutVar[i];switch(r.Type){case"line":this.CreateLine(t,e,r,i);break;case"colorstick":this.CreateColorStock(t,e,r,i)}}var n=e+1;t.TitlePaint[n].Title=this.Name;var o="";for(var s in this.Arguments){var h=this.Arguments[s];o.length>0&&(o+=","),o+=h.Value.toString()}return o.length>0&&(t.TitlePaint[n].Title=this.Name+"("+o+")"),!0},this.CreateLine=function(t,e,a,i){var r=new At;r.Canvas=t.Canvas,r.DrawType=1,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=a.Color:r.Color=this.GetDefaultColor(i),a.LineWidth>0&&(r.LineWidth=a.LineWidth),0==a.IsShow&&(r.IsShow=!1);var n=e+1;r.Data.Data=a.Data,t.TitlePaint[n].Data[i]=new Ye(r.Data,a.Name,r.Color),t.ChartPaint.push(r)},this.CreateColorStock=function(t,e,a,i){var r=new Jt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame;var n=e+1;r.Data.Data=a.Data,t.TitlePaint[n].Data[i]=new Ye(r.Data,a.Name,this.GetDefaultColor(i)),t.ChartPaint.push(r)},this.GetDefaultColor=function(t){var e=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"];return e[parseInt(t)%(e.length-1)]}}function va(t,e,a,i){this.newMethod=Da,this.newMethod(t),delete this.newMethod,this.JsonData,i.JsonData&&(this.JsonData=i.JsonData),this.RequestData=function(t,e,a){if(this.JsonData){var i={HQChart:t,WindowIndex:e,HistoryData:a};this.JsonData.code=0;var r=this.JsonData;this.RecvData(r,i)}else console.warn("[PyScriptIndex::RequestData] JsonData is null"),i.HQChart.ScriptErrorCallback&&i.HQChart.ScriptErrorCallback("json 数据不能为空")}}function ga(){}function Sa(){this.MaxRequestDataCount=1e3,this.StartDate=20160101,this.Data,this.ClassName="IKLineInfo",this.Explain="IKLineInfo",this.GetToday=function(){var t=new Date;return 1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()},this.GetRequestData=function(t){var e={Symbol:t.Symbol,MaxRequestDataCount:t.MaxRequestDataCount,MaxRequestMinuteDayCount:t.MaxRequestMinuteDayCount,Period:t.Period},a=null;return t.ChartOperator_Temp_GetHistroyData&&(a=t.ChartOperator_Temp_GetHistroyData()),a&&(e.DateRange=a.GetDateRange()),e},this.NetworkFilter=function(t,e){if(!t.NetworkFilter)return!1;var a=this,i={HQChart:t},r={Name:this.ClassName+"::RequestData",Explain:this.Explain,Request:this.GetRequestData(t),Self:this,HQChart:t,PreventDefault:!1};return e&&(1==e.Update&&(r.Update={Start:{Date:e.StartDate}},i.Update={Start:{Date:e.StartDate}}),r.CallFunctionName=e.FunctionName),t.NetworkFilter(r,function(t){a.RecvData(t,i)}),1==r.PreventDefault}}function Ta(){}function Ia(){this.Data,this.ClassName="IMinuteInfo"}la.JsonDataToHistoryData=function(t){var e=[];if(!t.data)return e;var a=null;t.symbol&&(a=t.symbol.toUpperCase());a&&Ea.IsFutures(a);for(var i=t.data,r=L.KLINE_ORDERFLOW,n=L.KLINE_COLOR_DATA,o=L.KLINE_HEATMAP,s=L.KLINE_DAY_EXTENDDATA,h=0;h<i.length;++h){var l=new st,u=i[h];l.Date=u[0],l.Open=u[2],l.YClose=u[1],l.Close=u[5],l.High=u[3],l.Low=u[4],l.Vol=u[6],l.Amount=u[7],Te.IsNumber(u[8])&&(l.Position=u[8]),Te.IsNumber(u[9])&&(l.FClose=u[9]),Te.IsNumber(u[10])&&(l.YFClose=u[10]),Te.IsNumber(u[11])&&(l.BFactor=u[11]),Te.IsNumber(u[12])&&(l.AFactor=u[12]),Te.IsBool(u[13])&&(l.IsVirtual=u[13]),Te.IsBool(u[14])&&(l.IsNonTrade=u[14]),(Te.IsNumber(l.Open)||!0===l.IsVirtual)&&(u[r]&&(l.OrderFlow=u[r]),u[n]&&(l.ColorData=u[n]),u[s]&&(l.ExtendData=u[s]),u[o]&&(l.HeatMap=u[o]),e.push(l))}return e},la.JsonDataToRealtimeData=function(t,e){if(!t.stock)return null;var a;for(var i in t.stock){var r=t.stock[i];if(r&&r.symbol==e){a=r;break}}if(!a)return null;var n=e.toUpperCase(),o=(Ea.IsSHSZ(n),new st);return o.Date=a.date,o.Open=a.open,o.YClose=a.yclose,o.High=a.high,o.Low=a.low,o.Vol=a.vol,o.Amount=a.amount,o.Close=a.price,Te.IsNumber(a.position)&&(o.Position=a.position),Te.IsNumber(a.yclearing)&&(o.YFClose=a.yclearing),Te.IsNumber(a.clearing)&&(o.FClose=a.clearing),Te.IsNumber(a.bfactor)&&(o.BFactor=a.bfactor),Te.IsNumber(a.afactor)&&(o.AFactor=a.afactor),a.colordata&&(o.ColorData=a.colordata),a.extendData&&(o.ExtendData=a.extendData),a.heatmapData&&(o.HeatMap=a.heatmapData),Te.IsBool(a.isvirtual)&&(o.IsVirtual=a.isvirtual),Te.IsBool(a.isnontrade)&&(o.IsNonTrade=a.isnontrade),o},la.JsonDataToMinuteRealtimeData=function(t,e){if(!t.stock)return null;var a;for(var i in t.stock){var r=t.stock[i];if(r&&r.symbol==e){a=r;break}}if(!a)return null;var n=e.toUpperCase(),o=(Ea.IsSHSZ(n),Ea.IsFutures(n)),s=new Array,h=a.yclose,l=a.date;for(var i in o&&a.yclearing&&(h=a.yclearing),a.minute){var u=a.minute[i],c=new st;c.Close=u.price,c.Open=u.open,c.High=u.high,c.Low=u.low,c.Vol=u.vol,c.Amount=u.amount,u.date>0?c.Date=u.date:c.Date=l,c.Time=u.time,c.YClose=h,Te.IsNumber(u.position)&&(c.Position=u.position),Te.IsNumber(c.Close)||(c.Close=h,c.Open=c.High=c.Low=c.Close),Te.IsNumber(c.Open)||(c.Open=null),Te.IsNumber(c.Close)||(c.Close=null),Te.IsNumber(c.High)||(c.High=null),Te.IsNumber(c.Low)||(c.Low=null),Te.IsNumber(u.price)&&(h=u.price),s[i]=c}return s},la.JsonDataToMinuteRealtimeDataV2=function(t,e){if(!t||!t.overlay||!e)return null;for(var a=null,i=0;i<t.overlay.length;++i){if((s=t.overlay[i]).symbol==e){a=s;break}}if(!a)return null;var r=e.toUpperCase(),n=(Ea.IsSHSZ(r),Ea.IsFutures(r),L.KLINE_ORDERFLOW),o=null;for(i=0;i<a.data.length;++i){var s=new st,h=a.data[i];s.Date=h[0],s.Open=h[2],s.YClose=h[1],s.Close=h[5],s.High=h[3],s.Low=h[4],s.Vol=h[6],s.Amount=h[7],s.Time=h[8],Te.IsNumber(h[9])&&(s.Position=h[9]),Te.IsNumber(s.YClose)||Te.IsNumber(o)&&(s.YClose=o),Te.IsNumber(s.Close)&&(o=s.Close),h[n]&&(s.OrderFlow=h[n]),aryMinuteData.push(s)}return aryMinuteData},la.JsonDataToMinuteHistoryData=function(t){var e=null;t.symbol&&(e=t.symbol.toUpperCase());e&&Ea.IsSHSZ(e);e&&Ea.IsFutures(e);for(var a=t.data,i=new Array,r=L.KLINE_ORDERFLOW,n=L.KLINE_COLOR_DATA,o=L.KLINE_HEATMAP,s=L.KLINE_MINUTE_EXTENDDATA,h=null,l=0;l<a.length;++l){var u=new st,c=a[l];u.Date=c[0],u.Open=c[2],u.YClose=c[1],u.Close=c[5],u.High=c[3],u.Low=c[4],u.Vol=c[6],u.Amount=c[7],u.Time=c[8],Te.IsNumber(c[9])&&(u.Position=c[9]),Te.IsNumber(c[10])&&(u.FClose=c[10]),Te.IsNumber(c[11])&&(u.YFClose=c[11]),Te.IsNumber(c[12])&&(u.BFactor=c[12]),Te.IsNumber(c[13])&&(u.AFactor=c[13]),Te.IsNumber(u.YClose)||Te.IsNumber(h)&&(u.YClose=h),Te.IsNumber(u.Close)&&(h=u.Close),c[r]&&(u.OrderFlow=c[r]),c[n]&&(u.ColorData=c[n]),c[s]&&(u.ExtendData=c[s]),c[o]&&(u.HeatMap=c[o]),i.push(u)}return i},la.JsonDataToTickData=function(t){var e=[];if(!t.detail)return e;var a=t.date,i=t.yclose;for(var r in t.detail){var n=new st,o=t.detail[r];o&&(n.Date=a,n.Time=o[0],n.Low=n.High=n.Close=n.Open=o[1],n.YClose=i,n.Vol=o[2],n.Amount=o[3],n.Flag=o[4],Te.IsNumber(n.Open)&&e.push(n))}return e},la.JsonDataToTickDataV2=function(t){var e=[];if(!Te.IsNonEmptyArray(t.data))return e;for(var a=0;a<t.data.length;++a){var i=new st,r=t.data[a];r&&(i.Date=r[0],i.Time=r[1],i.YClose=r[2],i.Low=i.High=i.Close=i.Open=r[3],e.push(i),r[4]&&(i.ExtendData=r[4]))}return e},ua.JsonDataToBeforeOpenData=function(t){var e=t.stock[0].symbol.toUpperCase(),a=Ea.IsSHSZ(e),i=t.stock[0].yclose,r=t.stock[0],n=r.date,o={Data:[],TotalCount:15,Ver:1,Date:n},s=L.MINUTE_BEFOREOPEN_EXTENDDATA;if(r.beforeinfo&&(Te.IsNumber(r.beforeinfo.totalcount)&&(o.TotalCount=r.beforeinfo.totalcount),Te.IsNumber(r.beforeinfo.ver)&&(o.Ver=r.beforeinfo.ver)),1==o.Ver){if(Te.IsNonEmptyArray(r.before))for(var h=0;h<r.before.length;++h){var l=new lt,u=r.before[h];l.Time=u[0],l.Date=n,l.Price=u[1],l.Price?i=l.Price:l.Price=i,l.Vol[0]=a?u[2]/100:u[2],l.Amount=u[3],Te.IsNumber(u[4])&&u[4]>19000101&&(l.Date=u[4]),l.DateTime=l.Date+" "+l.Time,o.Data.push(l)}}else if(2==o.Ver){var c=0;for(var h in r.before){l=new lt,u=r.before[h];l.Time=u[0],l.Date=n,l.Price=u[1],l.Vol[0]=u[2],l.Vol[1]=u[3],l.ColorID=u[4],Te.IsNumber(u[6])&&(l.Date=u[6]),l.DateTime=l.Date+" "+l.Time+")";var f=l.Vol[0]+l.Vol[1];Te.IsNumber(u[5])&&(f=u[5]),f>c&&(c=f),u[s]&&(l.ExtendData=u[s]),o.Data.push(l)}o.VolMax=c,o.VolMin=0}else if(3==o.Ver){c=0;for(var h in r.before){l=new lt,u=r.before[h];l.Time=u[0],l.Date=n,l.Price=u[1],l.AvPrice=u[2],l.Vol[0]=u[3],l.ColorID=u[4],l.DateTime=n.toString()+" "+l.Time.toString();f=l.Vol[0];Te.IsNumber(u[5])&&(f=u[5]),f>c&&(c=f),u[s]&&(l.ExtendData=u[s]),o.Data.push(l)}o.VolMax=c,o.VolMin=0}return o},ua.JsonDataToAfterCloseData=function(t){t.stock[0].yclose;var e=t.stock[0],a=e.date;if(!e.afterinfo)return null;var i={Data:[],TotalCount:180,Ver:2,Date:a},r=e.afterinfo;Te.IsNumber(r.totalcount)&&(i.TotalCount=r.totalcount),Te.IsNumber(r.ver)&&(i.Ver=r.ver);var n=L.MINUTE_AFTERCLOSE_EXTENDDATA;if(1==i.Ver)for(var o=0;o<e.after.length;++o){r=new ut;var s=e.after[o];r.Time=s[0],r.Date=a,r.Price=s[1],r.Vol[0]=s[2],r.Amount=s[3],Te.IsNumber(s[4])&&(r.Date=s[4]),r.DateTime=r.Date+" "+r.Time,i.Data.push(r)}else if(2==i.Ver){var h=0;for(var o in e.after){r=new ut,s=e.after[o];r.Time=s[0],r.Date=a,r.Price=s[1],r.Vol[0]=s[2],r.Vol[1]=s[3],r.ColorID=s[4],r.DateTime=a.toString()+" "+r.Time.toString();var l=r.Vol[0]+r.Vol[1];Te.IsNumber(s[5])&&(l=s[5]),l>h&&(h=l),s[n]&&(r.ExtendData=s[n]),i.Data.push(r)}i.VolMax=h,i.VolMin=0}else if(3==i.Ver){h=0;for(var o in e.after){r=new ut,s=e.after[o];r.Time=s[0],r.Date=a,r.Price=s[1],r.AvPrice=s[2],r.Vol[0]=s[3],r.ColorID=s[4],r.DateTime=a.toString()+" "+r.Time.toString();l=r.Vol[0];Te.IsNumber(s[5])&&(l=s[5]),l>h&&(h=l),s[n]&&(r.ExtendData=s[n]),i.Data.push(r)}i.VolMax=h,i.VolMin=0}return i},ua.JsonDataToMinuteData=function(t,e){var a=t.stock[0].symbol.toUpperCase(),i=Ea.IsSHSZ(a),r=Ea.IsFutures(a),n=Ea.IsSHO(a),o=Ea.IsSZO(a),s=[],h=t.stock[0].yclose,l=t.stock[0].yclose,u=t.stock[0].yclose;if(r&&t.stock[0].yclearing&&(u=h=l=t.stock[0].yclearing),!Te.IsNonEmptyArray(t.stock[0].minute))return s;for(var c=t.stock[0].date,f=0;f<t.stock[0].minute.length;++f){var d=t.stock[0].minute[f],C=new ht;C.Close=d.price,C.Open=d.open,C.High=d.high,C.Low=d.low,C.Vol=i?d.vol/100:d.vol,C.Amount=d.amount,d.date>0&&(c=d.date),C.DateTime=c.toString()+" "+d.time.toString(),C.Date=c,C.Time=d.time,r||n||o?C.Position=d.position:Te.IsNumber(d.position)&&(C.Position=d.position),C.Increase=d.increase,C.Risefall=d.risefall,C.AvPrice=d.avprice,Te.IsNumber(d.lead)&&(C.Lead=d.lead),Te.IsNumber(C.Close)||(C.Close=h,C.Open=C.High=C.Low=C.Close),C.AvPrice||(C.AvPrice=l),u&&C.Close&&(C.Increase=(C.Close-u)/u*100);var p=Math.abs(C.AvPrice-C.Close);i&&p>.13*C.Close&&(C.AvPrice=l),Te.IsNumber(d.price)&&(h=d.price),Te.IsNumber(d.avprice)&&C.AvPrice===d.avprice&&(l=d.avprice),d.ExtendData&&(C.ExtendData=d.ExtendData),s[f]=C}return s},ua.JsonDataToUpdateMinuteData=function(t){if(!t||!t.stock)return null;var e=t.stock[0];if(!Te.IsNumber(e.date))return null;var a=t.stock[0].symbol,i=a.toUpperCase(),r=Ea.IsSHSZ(i),n={Date:e.date,Data:[],Symbol:a,Name:e.name},o=L.MINUTE_DAY_EXTENDDATA;if(Te.IsNumber(e.high)&&(n.High=e.high),Te.IsNumber(e.low)&&(n.Low=e.low),Te.IsNumber(e.yclose)&&(n.YClose=e.yclose),Te.IsNumber(e.YClearing)&&(n.YClearing=e.yclearing),Te.IsNonEmptyArray(t.stock[0].minute))for(var s=0;s<e.minute.length;++s){var h=e.minute[s],l=new ht;l.Date=h[0],l.Time=h[1],l.Open=h[2],l.High=h[3],l.Low=h[4],l.Close=h[5],l.AvPrice=h[6],l.Vol=h[7],l.Amount=h[8],Te.IsNumber(h[9])&&(l.Increase=h[9]),Te.IsNumber(h[10])&&(l.Risefall=h[10]),Te.IsNumber(h[11])&&(l.Lead=h[11]),h[o]&&(l.ExtendData=h[o]),l.DateTime=l.Date.toString()+" "+l.Time.toString(),r&&(l.Vol=l.Vol/100),Te.IsNumber(n.YClose)&&l.Close&&(l.Increase=(l.Close-n.YClose)/n.YClose*100),n.Data.push(l)}return n},ua.JsonDataToMinuteLineColorData=function(t){if(!t||!t.stock[0])return null;var e=t.stock[0];if(!e.linecolor||!Te.IsNonEmptyArray(e.linecolor.data))return null;var a=[];for(var i in e.linecolor.data){var r=e.linecolor.data[i];if(Te.IsNumber(r.type)&&Te.IsNumber(r.date)&&Te.IsNumber(r.start)&&Te.IsNumber(r.end)&&r.color&&!(r.start>=r.end)){var n={Type:r.type,Date:r.date,Start:r.start,End:r.end,Color:r.color};Te.IsPlusNumber(r.linewidth)&&(n.LineWidth=r.linewidth),a.push(n)}}return a},ua.JsonDataToMinuteLastUpdateTime=function(t){if(!t||!t.stock[0])return null;var e=t.stock[0];return Te.IsNumber(e.date)&&Te.IsNumber(e.time)?{Date:e.date,Time:e.time}:null},ua.JsonDataToHistoryMinuteLastUpdateTime=function(t){if(!t||!t.updatetime)return null;var e=t.updatetime;return Te.IsNumber(e.date)&&Te.IsNumber(e.time)?{Date:e.date,Time:e.time}:null},ua.JsonDataToMinuteDataArray=function(t){var e=t.symbol.toUpperCase(),a=Ea.IsSHSZ(e),i=Ea.IsSHO(e),r=Ea.IsSZO(e),n=Ea.IsFutures(e),o=[],s=L.MINUTE_MULTI_DAY_EXTENDDATA;for(var h in t.data){var l=[],u=t.data[h],c=u.date,f=u.yclose,d=f,C=null,p=u.yclearing;for(var m in u.minute){var D=u.minute[m];D[2]&&(d=D[2]);var v=new ht;if(v.Close=D[2],v.Open=D[1],v.High=D[3],v.Low=D[4],v.Vol=a?D[5]/100:D[5],v.Amount=D[6],7<D.length&&D[7]>0&&(v.AvPrice=D[7]),v.DateTime=c.toString()+" "+D[0].toString(),v.Date=c,v.Time=D[0],8<D.length&&D[8]>0&&(v.Date=D[8],v.DateTime=v.Date.toString()+" "+D[0].toString()),(n||i||r)&&9<D.length&&(v.Position=D[9]),Te.IsNumber(v.Close)||(v.Close=d,v.Open=v.High=v.Low=v.Close),!v.AvPrice&&C&&(v.AvPrice=C),v.Close&&f?v.Increase=(v.Close-f)/f*100:v.Increase=null,v.AvPrice&&a)Math.abs(v.AvPrice-v.Close)>.13*v.Close&&(v.AvPrice=C);D.length>7&&D[7]>0&&v.AvPrice===D[7]&&(C=D[7]),D[s]&&(v.ExtendData=D[s]),l[m]=v}var g=new pt;g.Data=l,g.YClose=f,g.Close=u.close,g.Date=c,Te.IsNumber(p)&&(g.YClearing=p),o.push(g)}return o},ua.JsonDataToHistoryMinuteLineColorData=function(t){if(!t)return null;var e=[];for(var a in t.data){var i=t.data[a];if(i.linecolor)for(var r in i.linecolor.data){var n=i.linecolor.data[r];if(Te.IsNumber(n.type)&&Te.IsNumber(n.date)&&Te.IsNumber(n.start)&&Te.IsNumber(n.end)&&n.color&&!(n.start>=n.end)){var o={Type:n.type,Date:n.date,Start:n.start,End:n.end,Color:n.color};Te.IsPlusNumber(n.linewidth)&&(o.LineWidth=n.linewidth),e.push(o)}}}return e.length>0?e:null},ua.JsonDataToCallAuctionItem=function(t,e,a,i){var r=!1;if(i){var n=i.toUpperCase();r=Ea.IsSHSZ(n)}var o=e.Date,s=a?L.MINUTE_BEFOREOPEN_EXTENDDATA:L.MINUTE_AFTERCLOSE_EXTENDDATA;if(1==e.Ver){var h=null;for(var l in t){var u=a?new lt:new ut,c=t[l];u.Time=c[0],u.Date=o,u.Price=c[1],u.Price?h=u.Price:u.Price=h,u.Vol[0]=r?c[2]/100:c[2],u.Amount=c[3],Te.IsNumber(c[4])&&(u.Date=c[4]),u.DateTime=u.Date+" "+u.Time,e.Data.push(u)}}else if(2==e.Ver){var f=0;for(var l in t){u=a?new lt:new ut,c=t[l];u.Time=c[0],u.Date=o,u.Price=c[1],u.Vol[0]=c[2],u.Vol[1]=c[3],u.ColorID=c[4],u.DateTime=o.toString()+" "+u.Time.toString();var d=u.Vol[0]+u.Vol[1];Te.IsNumber(c[5])&&(d=c[5]),d>f&&(f=d),c[s]&&(u.ExtendData=c[s]),e.Data.push(u)}e.VolMax=f,e.VolMin=0}else if(3==beforeOpenData.Ver){f=0;for(var l in t){u=a?new lt:new ut,c=t[l];u.Time=c[0],u.Date=o,u.Price=c[1],u.AvPrice=c[2],u.Vol[0]=c[3],u.ColorID=c[4],u.DateTime=o.toString()+" "+u.Time.toString();d=u.Vol[0];Te.IsNumber(c[5])&&(d=c[5]),d>f&&(f=d),c[s]&&(u.ExtendData=c[s]),e.Data.push(u)}e.VolMax=f,e.VolMin=0}},ua.JosnDataToBeforeOpenDataArray=function(t){if(!t||!t.data)return null;var e=[];for(var a in t.data){var i=t.data[a],r={Data:[],TotalCount:15,Ver:1,Date:i.date};i.beforeinfo&&(Te.IsNumber(i.beforeinfo.totalcount)&&(r.TotalCount=i.beforeinfo.totalcount),Te.IsNumber(i.beforeinfo.ver)&&(r.Ver=i.beforeinfo.ver)),ua.JsonDataToCallAuctionItem(i.before,r,!0,t.symbol),e.push(r)}return e.sort(function(t,e){return t.Date-e.Date}),e},ua.JosnDataToAfterCloseDataArray=function(t){if(!t||!t.data)return null;var e=[];for(var a in t.data){var i=t.data[a],r={Data:[],TotalCount:15,Ver:1,Date:i.date};i.afterinfo&&(Te.IsNumber(i.afterinfo.totalcount)&&(r.TotalCount=i.afterinfo.totalcount),Te.IsNumber(i.afterinfo.ver)&&(r.Ver=i.afterinfo.ver)),ua.JsonDataToCallAuctionItem(i.after,r,!1,t.symbol),e.push(r)}return e.sort(function(t,e){return t.Date-e.Date}),e},ca.JsonDataToMinuteData=function(t){var e=[];for(var a in t.minute.time){var i=new ht;t.minute.price[a]<=0&&a>0?(i.Close=e[a-1].Close,i.Open=e[a-1].Close,i.High=i.Close,i.Low=i.Close,i.Vol=t.minute.vol[a],i.Amount=t.minute.amount[a],i.DateTime=t.date.toString()+" "+t.minute.time[a].toString(),i.AvPrice=e[a-1].AvPrice):(i.Close=t.minute.price[a],i.Open=t.minute.open[a],i.High=t.minute.high[a],i.Low=t.minute.low[a],i.Vol=t.minute.vol[a],i.Amount=t.minute.amount[a],i.DateTime=t.date.toString()+" "+t.minute.time[a].toString(),i.AvPrice=t.minute.avprice[a]),i.Open<=0&&(i.Open=null),i.Close<=0&&(i.Close=null),i.AvPrice<=0&&(i.AvPrice=null),i.High<=0&&(i.High=null),i.Low<=0&&(i.Low=null),e[a]=i}return e},Da.prototype.GetDefaultColor=function(t){var e=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"];return e[parseInt(t)%(e.length-1)]},ga.Get=function(t){return new C.default([["互动易",{Create:function(){return new function(){this.newMethod=Sa,this.newMethod(),delete this.newMethod,this.ClassName="InvestorInfo",this.Explain="互动易",this.RequestData=function(t,e){var a=this,i={HQChart:t};if(this.Data=[],!this.NetworkFilter(t,e)){var r={filed:["question","answerdate","symbol","id"],symbol:[i.HQChart.Symbol],querydate:{StartDate:this.StartDate,EndDate:this.GetToday()},start:0,end:this.MaxRequestDataCount},n=ia.Domain+ia.KLine.Info.Investor.ApiUrl;return v.HttpRequest({url:n,data:r,type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0}},this.RecvData=function(t,e){if(!(t.list.length<=0)){for(var a in t.list){var i=t.list[a],r=new dt;r.Date=i.answerdate,r.Title=i.question,r.InfoType=ft.INVESTOR,this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}}}],["公告",{Create:function(){return new function(){this.newMethod=Sa,this.newMethod(),delete this.newMethod,this.ClassName="AnnouncementInfo",this.Explain="公告",this.ApiType=1,this.RequestData=function(t,e){var a=this,i={HQChart:t};if(e&&!0===e.Update||(this.Data=[]),!this.NetworkFilter(t,e))if(1==this.ApiType){var r=ia.CacheDomain+"/cache/analyze/shszreportlist/"+i.HQChart.Symbol+".json";v.HttpRequest({url:r,type:"get",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)},error:function(t,e){a.RecvError(t,e,i)}})}else{var r=ia.Domain+ia.KLine.Info.Announcement.ApiUrl;v.HttpRequest({url:r,data:{filed:["title","releasedate","symbol","id"],symbol:[i.HQChart.Symbol],querydate:{StartDate:this.StartDate,EndDate:this.GetToday()},start:0,end:this.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)},error:function(t,e){a.RecvError(t,e,i)}})}},this.RecvData=function(t,e){if(Te.IsNonEmptyArray(t.report)){for(var a=[],i=0;i<t.report.length;++i){var r=t.report[i],n=new dt;for(var o in n.Date=r.releasedate,n.Title=r.title,n.InfoType=ft.ANNOUNCEMENT,Te.IsNumber(r.time)&&(n.Time=r.time),r.type){var s=r.type[o];switch(s){case"一季度报告":n.InfoType=ft.ANNOUNCEMENT_QUARTER_1;break;case"半年度报告":n.InfoType=ft.ANNOUNCEMENT_QUARTER_2;break;case"三季度报告":n.InfoType=ft.ANNOUNCEMENT_QUARTER_3;break;case"年度报告":n.InfoType=ft.ANNOUNCEMENT_QUARTER_4}}for(var o in r.typeex){var h=r.typeex[o];n.InfoType=ft.ANNOUNCEMENT_EX_START+h;break}a.push(n)}!0===t.Update&&this.Data.length>0?this.UpdateData(a):this.Data=a,e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}},this.UpdateData=function(t){if(t&&!(t.length<=0)){var e=new c.default;for(var a in this.Data){var i=this.Data[a],r=i.Date+"-"+i.Time+"-"+i.InfoType+"-"+i.Title;e.add(r)}var n=0;for(var a in t){var i=t[a],r=i.Date+"-"+i.Time+"-"+i.InfoType+"-"+i.Title;e.has(r)||(this.Data.push(i),++n)}D.Chart.Log("[AnnouncementInfo::UpdateData] add new count="+n)}},this.RecvError=function(t,e,a){console.warn("[AnnouncementInfo::RecvError] error, http ",e,t)}}}}],["业绩预告",{Create:function(){return new function(){this.newMethod=Sa,this.newMethod(),delete this.newMethod,this.ClassName="PforecastInfo",this.RequestData=function(t,e){var a=this,i={HQChart:t};this.Data=[];var r=ia.Domain+ia.KLine.Info.Pforecast.ApiUrl;return v.HttpRequest({url:r,data:{field:["pforecast.type","pforecast.reportdate","fweek"],condition:[{item:["pforecast.reportdate","int32","gte",this.StartDate]}],symbol:[i.HQChart.Symbol],start:0,end:this.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0},this.RecvData=function(t,e){if(1==t.stock.length&&!(t.stock[0].stockday.length<=0)){for(var a in t.stock[0].stockday){var i=t.stock[0].stockday[a];if(i.pforecast.length>0){var r=i.pforecast[0],n=new dt;n.Date=i.date,n.Title=r.type,n.InfoType=ft.PFORECAST,n.ExtendData={Type:r.type,ReportDate:r.reportdate},i.fweek&&(n.ExtendData.FWeek={},null!=i.fweek.week1&&(n.ExtendData.FWeek.Week1=i.fweek.week1),null!=i.fweek.week4&&(n.ExtendData.FWeek.Week4=i.fweek.week4)),this.Data.push(n)}}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}}}],["调研",{Create:function(){return new function(){this.newMethod=Sa,this.newMethod(),delete this.newMethod,this.ClassName="ResearchInfo",this.RequestData=function(t,e){var a=this,i={HQChart:t};this.Data=[];var r=ia.Domain+ia.KLine.Info.Research.ApiUrl;return v.HttpRequest({url:r,data:{filed:["releasedate","researchdate","level","symbol","id","type"],querydate:{StartDate:this.StartDate,EndDate:this.GetToday()},symbol:[i.HQChart.Symbol],start:0,end:this.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0},this.RecvData=function(t,e){if(!(t.list.length<=0)){for(var a in t.list){var i=t.list[a],r=new dt;r.ID=i.id,r.Date=i.researchdate,r.InfoType=ft.RESEARCH,r.ExtendData={Level:i.level,Type:i.type},this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}}}],["大宗交易",{Create:function(){return new function(){this.newMethod=Sa,this.newMethod(),delete this.newMethod,this.ClassName="BlockTrading",this.RequestData=function(t,e){var a=this,i={HQChart:t};this.Data=[];var r=ia.Domain+ia.KLine.Info.BlockTrading.ApiUrl;return v.HttpRequest({url:r,data:{field:["blocktrading.price","blocktrading.vol","blocktrading.premium","fweek","price"],condition:[{item:["date","int32","gte",this.StartDate]},{item:["blocktrading.vol","int32","gte","0"]}],symbol:[i.HQChart.Symbol],start:0,end:this.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0},this.RecvData=function(t,e){if(1==t.stock.length&&!(t.stock[0].stockday.length<=0)){for(var a in t.stock[0].stockday){var i=t.stock[0].stockday[a],r=new dt;r.Date=i.date,r.InfoType=ft.BLOCKTRADING,r.ExtendData={Price:i.blocktrading.price,Premium:i.blocktrading.premium,Vol:i.blocktrading.vol,ClosePrice:i.price},i.fweek&&(r.ExtendData.FWeek={},null!=i.fweek.week1&&(r.ExtendData.FWeek.Week1=i.fweek.week1),null!=i.fweek.week4&&(r.ExtendData.FWeek.Week4=i.fweek.week4)),this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}}}],["龙虎榜",{Create:function(){return new function(){this.newMethod=Sa,this.newMethod(),delete this.newMethod,this.ClassName="TradeDetail",this.RequestData=function(t,e){var a=this,i={HQChart:t};this.Data=[];var r=ia.Domain+ia.KLine.Info.TradeDetail.ApiUrl;return v.HttpRequest({url:r,data:{field:["tradedetail.typeexplain","tradedetail.type","fweek"],condition:[{item:["date","int32","gte",this.StartDate]},{item:["tradedetail.type","int32","gte","0"]}],symbol:[i.HQChart.Symbol],start:0,end:this.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0},this.RecvData=function(t,e){if(1==t.stock.length&&!(t.stock[0].stockday.length<=0)){for(var a in t.stock[0].stockday){var i=t.stock[0].stockday[a],r=new dt;for(var n in r.Date=i.date,r.InfoType=ft.TRADEDETAIL,r.ExtendData={Detail:new Array},i.tradedetail){var o=i.tradedetail[n];r.ExtendData.Detail.push({Type:o.type,TypeExplain:o.typeexplain})}i.fweek&&(r.ExtendData.FWeek={},null!=i.fweek.week1&&(r.ExtendData.FWeek.Week1=i.fweek.week1),null!=i.fweek.week4&&(r.ExtendData.FWeek.Week4=i.fweek.week4)),this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}}}]]).get(t)},ga.GetClassInfo=function(t){return new C.default([["互动易",{ClassName:"InvestorInfo"}],["公告",{ClassName:"AnnouncementInfo"}],["业绩预告",{ClassName:"PforecastInfo"}],["调研",{ClassName:"ResearchInfo"}],["大宗交易",{ClassName:"BlockTrading"}],["龙虎榜",{ClassName:"TradeDetail"}]]).get(t)},ga.GetIconUrl=function(t){switch(t){case ft.INVESTOR:return ia.KLine.Info.Investor.Icon;case ft.PFORECAST:return ia.KLine.Info.Pforecast.Icon;case ft.ANNOUNCEMENT:return ia.KLine.Info.Announcement.Icon;case ft.ANNOUNCEMENT_QUARTER_1:case ft.ANNOUNCEMENT_QUARTER_2:case ft.ANNOUNCEMENT_QUARTER_3:case ft.ANNOUNCEMENT_QUARTER_4:return ia.KLine.Info.Announcement.IconQuarter;case ft.RESEARCH:return ia.KLine.Info.Research.Icon;case ft.BLOCKTRADING:return ia.KLine.Info.BlockTrading.Icon;case ft.TRADEDETAIL:return ia.KLine.Info.TradeDetail.Icon;default:return ia.KLine.Info.Announcement.Icon}},ga.GetIconLibrary=function(t){var e=ia.KLine.Info.IconLibrary;if(!e||!e.Icon)return ia.KLine.Info.Announcement.IconFont;if(t>=0&&t<e.Icon.length){var a=e.Icon[t];return{Text:a.Text,HScreenText:a.HScreenText,Color:a.Color,Family:e.Family}}return ia.KLine.Info.Announcement.IconFont},ga.GetIconFont=function(t){if(t>=ft.ANNOUNCEMENT_EX_START&&t<=ft.ANNOUNCEMENT_EX_END){var e=t-ft.ANNOUNCEMENT_EX_START;return ga.GetIconLibrary(e)}switch(t){case ft.INVESTOR:return ia.KLine.Info.Investor.IconFont;case ft.PFORECAST:return ia.KLine.Info.Pforecast.IconFont;case ft.ANNOUNCEMENT:return ia.KLine.Info.Announcement.IconFont;case ft.ANNOUNCEMENT_QUARTER_1:case ft.ANNOUNCEMENT_QUARTER_2:case ft.ANNOUNCEMENT_QUARTER_3:case ft.ANNOUNCEMENT_QUARTER_4:return ia.KLine.Info.Announcement.IconFont2;case ft.RESEARCH:return ia.KLine.Info.Research.IconFont;case ft.BLOCKTRADING:return ia.KLine.Info.BlockTrading.IconFont;case ft.TRADEDETAIL:return ia.KLine.Info.TradeDetail.IconFont;default:return ia.KLine.Info.Announcement.IconFont}},Ta.InfoMap=new C.default([["大盘异动",{Create:function(){return new function(){this.newMethod=Ia,this.newMethod(),delete this.newMethod,this.ClassName="MarketEventInfo",this.RequestData=function(t){var e=this;this.Data=[];var a={HQChart:t},i=ia.CacheDomain+"/cache/analyze/shszevent/marketevent/concept/"+t.TradeDate+".json";if(t.NetworkFilter){var r={Name:"MarketEventInfo::RequestData",Explain:"大盘异动",Request:{Url:i,Type:"Get",Data:{Date:t.TradeDate,Symbol:t.Symbol}},Self:this,PreventDefault:!1};if(t.NetworkFilter(r,function(t){e.RecvData(t,a),a.HQChart.UpdataChartInfo(),a.HQChart.Draw()}),1==r.PreventDefault)return}return v.HttpRequest({url:i,type:"get",dataType:"json",async:!0,success:function(t){e.RecvData(t,a)},error:function(t,e){console.warn("[MarketEventInfo::RequestData] error, http ",e,t)}}),!0},this.RecvData=function(t,e){for(var a in t.event){var i=t.event[a];for(var r in i.data){var n=i.data[r];if(Array.isArray(n)){if(n.length<2)continue;var o={Date:i.date,Time:n[0],Title:n[1],Type:0};n.length>=3&&n[2]&&"string"==typeof n[2]&&(o.Color=n[2]),n.length>=4&&n[3]&&"string"==typeof n[3]&&(o.BGColor=n[3]),this.Data.push(o)}else{if(!Te.IsNumber(n.Date)||!Te.IsNumber(n.Time)||!n.Title)continue;var o={Date:n.Date,Time:n.Time,Title:n.Title,Type:0};n.Color&&(o.Color=n.Color),n.BGColor&&(o.BGColor=n.BGColor),Te.IsNumber(n.Price)&&(o.Price=n.Price),n.Content&&(o.Content=n.Content),n.Link&&(o.Link=n.Link),this.Data.push(o)}}}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}}]]),Ta.Get=function(t){return Ta.InfoMap.get(t)};var ya=new function(){this.DataMap=new C.default([["ChartPictureSettingMenu",{Create:function(t){return new function(t){this.newMethod=xa,this.newMethod(t),delete this.newMethod,this.HQChart,this.ChartPicture,this.SubToolsDiv,this.SettingMenu,this.SettingPV,this.DoModal=function(t){if(!this.SubToolsDiv){this.ID=P();var e=document.createElement("div");e.className="subTolls",e.id=this.ID,this.DivElement.appendChild(e),this.SubToolsDiv=e}this.HQChart=t.data.HQChart,this.ChartPicture=t.data.ChartPicture;var a=A(),i=this.HQChart.Frame.SubFrame[0].Frame,r=i.ChartBorder.Top+40,n=i.ChartBorder.Right,o=i.ChartBorder.GetLeft(),s=this.ChartPicture.ClassName,h=this.ChartPicture.LineColor;0!=h.indexOf("rgb(")&&0!=h.indexOf("RGB(")||(h=We.RGBToHex(h.toLowerCase()));var l="";l="ChartDrawPictureText"===s?'<span class="changes-color" title="改变图形颜色"><i class="iconfont icon-bianji"></i><input type="color" name="color" id="color" class="change-color" value="'+h+'"></span>\n<span class="subtool-set" title="设置"><i class="iconfont icon-shezhi"></i></span><span class="subtool-del"><i class="iconfont icon-recycle_bin"></i></span>':"ChartDrawVolProfile"==s?'<span class="vp-set" title="设置"><i class="iconfont icon-shezhi"></i></span><span class="subtool-del"><i class="iconfont icon-recycle_bin"></i></span>':'<p class="changes-color" title="改变图形颜色"><i class="iconfont icon-bianji"></i><input type="color" name="color" id="color" class="change-color" value="'+h+'"></p>\n        <p class="subtool-del"><i class="iconfont icon-recycle_bin"></i></p>',this.SubToolsDiv.style.right=n/a+"px",this.SubToolsDiv.style.top=r/a+"px",this.SubToolsDiv.innerHTML=l,this.SubToolsDiv.style.position="absolute",this.SubToolsDiv.style.display="block";var u=this.HQChart,c=this.ChartPicture;this.SubToolsDiv,(0,p.default)(".subtool-del").click(function(){u.SelectChartDrawPicture=null,u.ClearChartDrawPicture(c),(0,p.default)(".subTolls").css("display","none")});var f=this;(0,p.default)(".subtool-set").click(function(){(0,p.default)(f.SubToolsDiv).hide(),f.SettingMenu||(f.SettingMenu=new Fa(i.ChartBorder.UIElement.parentNode)),f.SettingMenu.ChartPicture=c,f.SettingMenu.HQChart=u,f.SettingMenu.Position={Left:n+80,Top:r+20},f.SettingMenu.DoModal()}),(0,p.default)(".changes-color").click(function(){document.getElementById("color").click(),(0,p.default)(".change-color").change(function(){var t=(0,p.default)(".change-color").val();c.LineColor=t,c.PointColor=t,u.ChartDrawStorage&&u.ChartDrawStorage.SaveDrawData(c)})}),(0,p.default)(".vp-set").click(function(){f.SettingPV||(f.SettingPV=new function(t){this.newMethod=xa,this.newMethod(t),delete this.newMethod,this.ChartPicture,this.SettingDiv,this.Position,this.ID=P(),this.Close=function(){this.SettingDiv&&this.DivElement.removeChild(this.SettingDiv)},this.DoModal=function(){var t=this.ChartPicture.VAVol,e=this.ChartPicture.BarPosition,a=this,i=document.getElementById(this.ID);i?this.SettingDiv=i:((i=document.createElement("div")).className="jchart-modifyindex-box",i.id=this.ID,this.DivElement.appendChild(i),this.SettingDiv=i),i.innerHTML="<div class='parameter'>            <div class='parameter-header'>                <span>固定范围成交量分布设置</span>                <strong id='close' class='icon iconfont icon-close'></strong>            </div>            <div class='parameter-content'>\n                <input class='row-line' value="+t+" />VAVol <br>\n                <input class='row-line' value="+e+" />BarPosition\n            </div>            <div class='parameter-footer'>                <button class='submit' >确定</button>                <button class='cancel' >取消</button>            </div>        </div>";var r=A(),n=this.HQChart.Frame.SubFrame[0].Frame,o=n.ChartBorder.Top+40,s=n.ChartBorder.Right;n.ChartBorder.GetLeft(),this.SettingDiv.style.right=s/r+"px",this.SettingDiv.style.top=o/r+"px",this.SettingDiv.style.position="absolute",this.SettingDiv.style.display="block";var h=i.getElementsByClassName("cancel")[0];h.onclick=function(){a.Close()};var l=i.getElementsByClassName("icon iconfont icon-close")[0];l.onclick=function(){a.Close()};var u=i.getElementsByClassName("submit")[0];u.onclick=function(){var t=i.getElementsByClassName("row-line")[0].value;a.ChartPicture.VAVol=parseFloat(t);var t=parseInt(i.getElementsByClassName("row-line")[1].value);a.ChartPicture.BarPosition=t>0?1:0,a.ChartPicture.RequestVolumeProfileData(),a.Close()}}}(i.ChartBorder.UIElement.parentNode)),f.SettingPV.ChartPicture=c,f.SettingPV.HQChart=u,f.SettingPV.Position={Left:n+80,Top:r+20},f.SettingPV.DoModal()}),D.Chart.Log("[ChartPictureSettingMenu::DoModal]",{Top:r,Left:o,Right:n})}}(t)}}],["ChartPictureTextSettingMenu",{Create:function(t){return new Fa(t)}}]]),this.Create=function(t,e){return this.DataMap.has(t)?this.DataMap.get(t).Create(e):(D.Warn("[DialogFactory::Create] can't find class="+t+"."),null)},this.Add=function(t,e){this.DataMap.set(t,{Create:e.Create})}};function xa(t){this.DivElement=t,this.ID=null,this.TimeOut=null,this.Hide=function(){(0,p.default)("#"+this.ID).hide()},this.Show=function(t,e,a,i){var r={display:"block"};Te.IsNumber(t)&&(r.left=t+"px"),Te.IsNumber(e)&&(r.top=e+"px"),Te.IsNumber(a)&&(r.width=a+"px"),Te.IsNumber(i)&&(r.height=i+"px"),(0,p.default)("#"+this.ID).css(r)}}function wa(t){this.newMethod=xa,this.newMethod(t),delete this.newMethod,this.option={},this.Create=function(){this.ID=P(),this.BindData(),this.BindEvent()},this.BindData=function(){var t=this.DivElement.id,e=(0,p.default)("#"+t);e.find("div[id^='topMenu_']").remove(),e.find("div[id^='childMenu_']").remove();var a=(0,p.default)("<div />");a.attr("id","topMenu_"+this.ID).addClass("context-menu-wrapper topmenu").hide(),e.append(a);var i=(0,p.default)("<table />");i.attr({id:"topTable_"+this.ID,cellspacing:"0",cellpadding:"0"}).addClass("context-menu"),a.append(i),i.append(this.childrenList(this.option.data));for(var r=0;r<this.option.data.length;r++){if(void 0!==this.option.data[r].children){var n=(0,p.default)("<div />");n.attr({id:"childMenu_"+this.ID+r,"data-index":r}).addClass("context-menu-wrapper").hide(),e.append(n);var o=(0,p.default)("<table />");o.attr({id:"childTable_"+this.ID+r,cellspacing:"0",cellpadding:"0"}).addClass("context-menu"),n.append(o),o.append(this.childrenList(this.option.data[r].children))}}},this.Update=function(){this.BindData(),this.BindEvent()},this.childrenList=function(t){for(var e=[],a=0;a<t.length;a++){var i=void 0!==t[a].isBorder&&t[a].isBorder,r=(0,p.default)("<tr />");r.addClass("font_Arial context-menu"),i&&r.addClass("border");var n=(0,p.default)("<td />");t[a].selected?n.addClass("spacer context-menu").html("√"):n.addClass("spacer context-menu");var o=(0,p.default)("<td />");o.addClass("text").html(t[a].text);var s=(0,p.default)("<td />");s.addClass("right shortcut");var h=(0,p.default)("<td />");h.addClass(void 0!==t[a].children?"submenu-arrow":"context-menu spacer"),r.append(n).append(o).append(s).append(h),e.push(r)}return e},this.Show=function(t){p.default.extend(this.option,t),this.ID?this.Update():this.Create();var e=(0,p.default)("#topMenu_"+this.ID),a=e.outerWidth(),i=e.outerHeight(),r=this.option.x,n=this.option.y;a>this.option.position.X+this.option.position.W-r&&(r-=a),i>this.option.position.Y+this.option.position.H-n&&(n-=i),e.hide(),e.css({position:"absolute",left:r+"px",top:n+"px"}).show(),this.isInit=!0},this.Hide=function(){void 0!==p.default&&((0,p.default)("#topMenu_"+this.ID).hide(),(0,p.default)("[id^='childMenu_"+this.ID+"']").hide())},this.BindEvent=function(){var t=this,e=(0,p.default)("[id^='childMenu_"+t.ID+"']");(0,p.default)("#topTable_"+t.ID).find("tr").mouseenter(function(){var a=(0,p.default)(this),i=a.index(),r=(0,p.default)("#topMenu_"+t.ID),n=(0,p.default)("#childMenu_"+t.ID+i),o=a.outerWidth(),s=a.outerHeight(),h=r.position().left+o+1,l=r.position().top+s*i;o>t.option.position.X+t.option.position.W-h&&(h=h-o-r.outerWidth()-2),n.outerHeight()>t.option.position.Y+t.option.position.H-l&&(l=r.position().top+r.outerHeight()-n.outerHeight()),e.hide(),n.css({left:h+"px",top:l+"px"}).show()}).mouseleave(function(){var e=(0,p.default)(this).index();setTimeout(function(){1!=(0,p.default)("#childMenu_"+t.ID+e).attr("data-isShow")&&(0,p.default)("#childMenu_"+t.ID+e).hide()},10)}).click(function(){var e=(0,p.default)(this),a=e.index();"function"==p.default.type(t.option.data[a].click)&&(t.option.data[a].click(t.option.returnData),e.hide())}).contextmenu(function(){return!1}),e.mouseenter(function(){(0,p.default)(this).attr("data-isShow","1")}).mouseleave(function(){(0,p.default)(this).attr("data-isShow","0")}).contextmenu(function(){return!1}),e.find("tr").click(function(){var a=(0,p.default)(this),i=parseInt(a.closest("div").attr("data-index")),r=a.index();"function"==p.default.type(t.option.data[i].children[r].click)&&(t.option.data[i].children[r].click(t.option.windowIndex||1),e.hide())})},this.GetPeriod=function(t){var e=[{text:"日线",Value:0,click:function(){t.ChangePeriod(0)}},{text:"周线",Value:1,click:function(){t.ChangePeriod(1)}},{text:"双周线",Value:21,click:function(){t.ChangePeriod(21)}},{text:"月线",Value:2,click:function(){t.ChangePeriod(2)}},{text:"季线",Value:9,click:function(){t.ChangePeriod(9)}},{text:"半年",Value:22,click:function(){t.ChangePeriod(22)}},{text:"年线",Value:3,click:function(){t.ChangePeriod(3)}},{text:"1分",Value:4,click:function(){t.ChangePeriod(4)}},{text:"5分",Value:5,click:function(){t.ChangePeriod(5)}},{text:"15分",Value:6,click:function(){t.ChangePeriod(6)}},{text:"30分",Value:7,click:function(){t.ChangePeriod(7)}},{text:"60分",Value:8,click:function(){t.ChangePeriod(8)}},{text:"2小时",Value:11,click:function(){t.ChangePeriod(11)}},{text:"4小时",Value:12,click:function(){t.ChangePeriod(12)}},{text:"分笔",Value:10,click:function(){t.ChangePeriod(10)}},{text:"自定义周期:3分钟",Value:20003,click:function(){t.ChangePeriod(20003)}},{text:"自定义周期:35分钟",Value:20035,click:function(){t.ChangePeriod(20035)}},{text:"自定义周期:8日",Value:40008,click:function(){t.ChangePeriod(40008)}}];for(var a in e){var i=e[a];if(i.Value==t.Period){i.selected=!0;break}}return e},this.GetRight=function(t){var e=[{text:"不复权",click:function(){t.ChangeRight(0)}},{text:"前复权",click:function(){t.ChangeRight(1)}},{text:"后复权",click:function(){t.ChangeRight(2)}}];return t.Right>=0&&t.Right<e.length&&(e[t.Right].selected=!0),e},this.GetIndex=function(t){return[{text:"均线",click:function(e){t.ChangeIndex(e,"均线")}},{text:"BOLL",click:function(e){t.ChangeIndex(e,"BOLL")},isBorder:!0},{text:"MACD",click:function(e){t.ChangeIndex(e,"MACD")}},{text:"KDJ",click:function(e){t.ChangeIndex(e,"KDJ")}},{text:"VOL",click:function(e){t.ChangeIndex(e,"VOL")}},{text:"RSI",click:function(e){t.ChangeIndex(e,"RSI")}},{text:"BRAR",click:function(e){t.ChangeIndex(e,"BRAR")}},{text:"WR",click:function(e){t.ChangeIndex(e,"WR")}},{text:"BIAS",click:function(e){t.ChangeIndex(e,"BIAS")}},{text:"OBV",click:function(e){t.ChangeIndex(e,"OBV")}},{text:"DMI",click:function(e){t.ChangeIndex(e,"DMI")}},{text:"CR",click:function(e){t.ChangeIndex(e,"CR")}},{text:"PSY",click:function(e){t.ChangeIndex(e,"PSY")}},{text:"CCI",click:function(e){t.ChangeIndex(e,"CCI")}},{text:"DMA",click:function(e){t.ChangeIndex(e,"DMA")}},{text:"TRIX",click:function(e){t.ChangeIndex(e,"TRIX")}},{text:"VR",click:function(e){t.ChangeIndex(e,"VR")}},{text:"EMV",click:function(e){t.ChangeIndex(e,"EMV")}},{text:"ROC",click:function(e){t.ChangeIndex(e,"ROC")}},{text:"MIM",click:function(e){t.ChangeIndex(e,"MIM")}},{text:"FSL",click:function(e){t.ChangeIndex(e,"FSL")}}]},this.GetColorIndex=function(t){var e=[{text:"十字星",click:function(e){t.ChangeInstructionIndex("五彩K线-十字星")}},{text:"早晨之星",click:function(e){t.ChangeInstructionIndex("五彩K线-早晨之星")}},{text:"垂死十字",click:function(e){t.ChangeInstructionIndex("五彩K线-垂死十字")}},{text:"三只乌鸦",click:function(e){t.ChangeInstructionIndex("五彩K线-三只乌鸦")}},{text:"光脚阴线",click:function(e){t.ChangeInstructionIndex("五彩K线-光脚阴线")}},{text:"黄昏之星",click:function(e){t.ChangeInstructionIndex("五彩K线-黄昏之星")}}];return t.ColorIndex&&(e[e.length-1].isBorder=!0,e.push({text:"删除五彩K线",click:function(e){t.CancelInstructionIndex()}})),e},this.GetTradeIndex=function(t){var e=[{text:"BIAS",click:function(e){t.ChangeInstructionIndex("交易系统-BIAS")}},{text:"CCI",click:function(e){t.ChangeInstructionIndex("交易系统-CCI")}},{text:"DMI",click:function(e){t.ChangeInstructionIndex("交易系统-DMI")}},{text:"KD",click:function(e){t.ChangeInstructionIndex("交易系统-KD")}},{text:"BOLL",click:function(e){t.ChangeInstructionIndex("交易系统-BOLL")}},{text:"KDJ",click:function(e){t.ChangeInstructionIndex("交易系统-KDJ")}}];return t.TradeIndex&&(e[e.length-1].isBorder=!0,e.push({text:"删除专家系统",click:function(e){t.CancelInstructionIndex()}})),e},this.GetOverlay=function(t){var e=[{text:"上证指数",click:function(){t.OverlaySymbol("000001.sh")}},{text:"深证成指",click:function(){t.OverlaySymbol("399001.sz")}},{text:"中小板指",click:function(){t.OverlaySymbol("399005.sz")}},{text:"创业板指",click:function(){t.OverlaySymbol("399006.sz")}},{text:"沪深300",click:function(){t.OverlaySymbol("000300.sh")}}];for(var a in t.OverlayChartPaint){var i,r=t.OverlayChartPaint[a].Symbol,n=new C.default([["000001.sh",0],["399001.sz",1],["399005.sz",2],["399006.sz",3],["000300.sh",4]]);if(n.has(r))!function(){i=e[n.get(r)];var a=r;i.selected=!0,i.click=function(){t.DeleteOverlaySymbol(a)}}()}return t.OverlayChartPaint&&t.OverlayChartPaint.length>0&&(e[e.length-1].isBorder=!0,e.push({text:"取消叠加",click:function(){t.ClearOverlaySymbol()}})),e},this.GetKLineType=function(t){var e=[{text:"K线(空心阳线)",click:function(){t.ChangeKLineDrawType(3)}},{text:"K线(实心阳线)",click:function(){t.ChangeKLineDrawType(0)}},{text:"美国线",click:function(){t.ChangeKLineDrawType(2,!0,{IsThinAKBar:!1})}},{text:"收盘线",click:function(){t.ChangeKLineDrawType(1)}},{text:"收盘面积",click:function(){t.ChangeKLineDrawType(4)}},{text:"K线(空心阳线阴线)",click:function(){t.ChangeKLineDrawType(6)}},{text:"Heikin Ashi",click:function(){t.ChangeKLineDrawType(11)}},{text:"Line Break",click:function(){t.ChangeKLineDrawType(12)}},{text:"High-low",click:function(){t.ChangeKLineDrawType(13)}},{text:"HLC Area",click:function(){t.ChangeKLineDrawType(15)}}];switch(t.KLineDrawType){case 0:e[1].selected=!0;break;case 1:e[3].selected=!0;break;case 2:e[2].selected=!0;break;case 3:e[0].selected=!0;break;case 4:e[4].selected=!0;break;case 6:e[5].selected=!0;break;case 11:e[6].selected=!0;break;case 12:e[7].selected=!0;break;case 13:e[8].selected=!0;break;case 15:e[9].selected=!0}return e},this.GetIndexWindowCount=function(t){var e=[{text:"1个窗口",click:function(){t.ChangeIndexWindowCount(1)}},{text:"2个窗口",click:function(){t.ChangeIndexWindowCount(2)}},{text:"3个窗口",click:function(){t.ChangeIndexWindowCount(3)}},{text:"4个窗口",click:function(){t.ChangeIndexWindowCount(4)}},{text:"5个窗口",click:function(){t.ChangeIndexWindowCount(5)}}],a=t.Frame.SubFrame.length;return a-1>=0&&a-1<e.length&&(e[a-1].selected=!0),e},this.GetCoordinateType=function(t){var e=[{text:"普通坐标",click:function(){t.ChangeCoordinateType({Type:0})}},{text:"百分比坐标",click:function(){t.ChangeCoordinateType({Type:1})}},{text:"反转坐标",click:function(){t.ChangeCoordinateType({IsReverse:!0})}},{text:"对数坐标",click:function(){t.ChangeCoordinateType({Type:2})}},{text:"等比坐标",click:function(){t.ChangeCoordinateType({Type:3})}},{text:"等分坐标",click:function(){t.ChangeCoordinateType({Type:4})}},{text:"黄金分割",click:function(){t.ChangeCoordinateType({Type:5})}}];return t.Frame&&t.Frame.SubFrame&&t.Frame.SubFrame.length>0&&(1==t.Frame.SubFrame[0].Frame.CoordinateType&&(e[2].selected=!0,e[2].click=function(){t.ChangeCoordinateType({IsReverse:!1})}),1==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType?e[1].selected=!0:0==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType?e[0].selected=!0:2==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType?e[3].selected=!0:3==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType?e[4].selected=!0:4==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType?e[5].selected=!0:5==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType&&(e[6].selected=!0)),e},this.GetDragModeType=function(t){var e=[{text:"禁止拖拽",click:function(){t.DragMode=0}},{text:"启动拖拽",click:function(){t.DragMode=1}},{text:"区间选择",click:function(){t.DragMode=2}}];return t.DragMode>=0&&t.DragMode<e.length&&(e[t.DragMode].selected=!0),e},this.GetTools=function(t){var e=[],a=t.GetExtendChartByClassName("DrawToolsButton");a?e.push({text:"关闭画图工具",click:function(){for(var e=a.Chart.Width,i=parseInt(a.Index)+1;i<t.ExtendChartPaint.length;++i){var r=t.ExtendChartPaint[i];"StockChip"==r.ClassName&&(r.Left-=e)}t.DeleteExtendChart(a),t.Frame.ChartBorder.Right-=e,t.SetSizeChange(!0),t.Draw()}}):e.push({text:"画图工具",click:function(){var e={Name:"画图工具",Top:t.Frame.ChartBorder.Top};t.CreateExtendChart(e.Name,e);t.SetSizeChange(!0),t.Draw()}});var i=t.GetExtendChartByClassName("StockChip");return i?e.push({text:"关闭移动筹码",click:function(){for(var e=i.Chart.Width,a=parseInt(i.Index)+1;a<t.ExtendChartPaint.length;++a){var r=t.ExtendChartPaint[a];"DrawToolsButton"==r.ClassName&&(r.Left-=e)}t.DeleteExtendChart(i),t.Frame.ChartBorder.Right-=e,t.SetSizeChange(!0),t.Draw()}}):e.push({text:"移动筹码",click:function(){var e={Name:"筹码分布",ShowType:1,Width:230};t.CreateExtendChart(e.Name,e);t.SetSizeChange(!0),t.Draw()}}),e},this.GetKLineInfo=function(t){var e=new c.default;for(var a in t.ChartInfo){var i=t.ChartInfo[a];e.add(i.ClassName)}var r=["公告","业绩预告","调研","大宗交易","龙虎榜","互动易"],n=[];for(var a in r){var o=r[a],s=ga.GetClassInfo(o);if(s){i=this.CreateKlineInfoItem(o,e.has(s.ClassName),t);n.push(i)}}if(t.ChartInfo.length>0){n[n.length-1].isBorder=!0;i={text:"删除所有",click:function(){t.ClearKLineInfo()}};n.push(i)}return n},this.CreateKlineInfoItem=function(t,e,a){var i={text:t,selected:e};return i.click=e?function(){a.DeleteKLineInfo(t)}:function(){a.AddKLineInfo(t,!0)},i},this.DoModal=function(t){var e=t.data.Chart,a=e.RightMenu,i=t.offsetX,r=t.offsetY,n=[{text:"分析周期",children:this.GetPeriod(e)},{text:"复权处理",children:this.GetRight(e)},{text:"指标切换",children:this.GetIndex(e)},{text:"五彩K线",children:this.GetColorIndex(e)},{text:"专家系统",children:this.GetTradeIndex(e)},{text:"信息地雷",children:this.GetKLineInfo(e)},{text:"叠加品种",children:this.GetOverlay(e)},{text:"主图线型",children:this.GetKLineType(e)},{text:"坐标类型",children:this.GetCoordinateType(e)},{text:"指标窗口个数",children:this.GetIndexWindowCount(e)},{text:"鼠标拖拽",children:this.GetDragModeType(e)},{text:"工具",children:this.GetTools(e)}],o=e.Symbol.toUpperCase();(Ea.IsSHSZIndex(e.Symbol)||Ea.IsBIT(o))&&n.splice(1,1);var s=t.data.FrameID,h=this.GetOverlayIndex(e,s);if(h&&h.length>0){var l={text:"删除叠加指标",children:this.GetDeleteOverlayIndex(e,h)};n.splice(3,0,l)}D.Chart.Log("[KLineRightMenu::DoModal]",s),a.Show({windowIndex:s,x:i+e.UIElement.offsetLeft,y:r+e.UIElement.offsetTop,position:e.Frame.Position,data:n}),(0,p.default)(document).click(function(){a.Hide()})},this.GetOverlayIndex=function(t,e){if(e>=t.Frame.SubFrame.length||e<0)return[];var a=[],i=t.Frame.SubFrame[e];for(var r in i.OverlayIndex){var n=i.OverlayIndex[r];a.push({Name:n.Script.Name,Identify:n.Identify})}return a},this.GetDeleteOverlayIndex=function(t,e){var a=[],i=function(){var i=e[r].Identify;a.push({text:e[r].Name,click:function(){t.DeleteOverlayWindowsIndex(i)}})};for(var r in e)i();return a}}function Fa(t){this.newMethod=xa,this.newMethod(t),delete this.newMethod,this.ChartPicture,this.SettingDiv,this.Position,this.BackupData,this.Close=function(){this.SettingDiv&&this.DivElement.removeChild(this.SettingDiv)},this.DoModal=function(){var t=this.ChartPicture.Text,e=this.ChartPicture.FontOption,a=this.ChartPicture.LineColor;this.BackupData={Text:t,LineColor:a,FontOption:{Family:e.Family,Size:e.Size,Weight:e.Weight,Style:e.Style}},D.Chart.Log("[ChartPictureTextSettingMenu::DoModal] picture info",this.BackupData);var i=this,r=this.DivElement.getElementsByClassName("chartpicture-text-setting")[0];r?this.SettingDiv=r:((r=document.createElement("div")).className="chartpicture-text-setting",this.DivElement.appendChild(r),this.SettingDiv=r);var n=[10,11,12,14,16,20,24,28,32,40],o=["微软雅黑","宋体","Arial","仿宋"],s="",h="";o.forEach(function(t,e){h+=0!==e?"<p>"+t+"</P>":'<p class="active">'+t+"</P>"}),n.forEach(function(t,e){s+=5!==e?"<p>"+t+"</P>":'<p class="active">'+t+"</P>"});var l='<div class="contentWrap"><div class="styleOptions"><span class="colorPicker"><input type="color" id="fontColor" value="#1e90ff"></span><div class="likeSelect fontSelect"><span class="choicedText">微软雅黑</span><div class="selectList">'+h+'</div><i class="iconfont icon-xia"></i></div><div class="likeSelect fontSizeSelect"><span class="choicedText">20</span><div class="selectList">'+s+'</div><i class="iconfont icon-xia"></i></div><span class="strongFont likeBtn"><i class="iconfont icon-jiacu"></i></span><span class="italicsFont likeBtn"><i class="iconfont icon-qingxieL"></i></span></div><textarea class="tArea" id="tArea" placeholder="Text"></textarea></div>',u=A(),c='<div class="titleWrap"><span class="titleName">样式设置</span><i class="closeBtn iconfont icon-close"></i></div>'+l+'<div class="btnsContainer"><span class="okBtn btn">确认</span><span class="cancelBtn btn">取消</span></div>';this.SettingDiv.style.left=this.Position.Left/u+"px",this.SettingDiv.style.top=this.Position.Top/u+"px",this.SettingDiv.innerHTML=c,this.SettingDiv.style.position="absolute",this.SettingDiv.style.display="block",(0,p.default)(".chartpicture-text-setting .colorPicker").css({borderColor:i.ChartPicture.LineColor,"background-color":i.ChartPicture.LineColor});var f=this.ChartPicture.FontOption.Family;(0,p.default)(".chartpicture-text-setting .fontSelect .choicedText").html(f),o.forEach(function(t,e){t==f&&((0,p.default)(".chartpicture-text-setting .fontSelect p").removeClass("active"),(0,p.default)(".chartpicture-text-setting .fontSelect p").eq(e).addClass("active"))});var d=this.ChartPicture.FontOption.Size;(0,p.default)(".chartpicture-text-setting .fontSizeSelect .choicedText").html(d),n.forEach(function(t,e){t==d&&((0,p.default)(".chartpicture-text-setting .fontSizeSelect p").removeClass("active"),(0,p.default)(".chartpicture-text-setting .fontSizeSelect p").eq(e).addClass("active"))});var C=this.ChartPicture.FontOption.Weight;null!=C&&"bold"==C&&(0,p.default)(".chartpicture-text-setting .strongFont").addClass("hot");var m=this.ChartPicture.FontOption.Style;null!=m&&"italic"==m&&(0,p.default)(".chartpicture-text-setting .italicsFont").addClass("hot");t=this.ChartPicture.Text;(0,p.default)(".chartpicture-text-setting .tArea").val(t);(0,p.default)(".chartpicture-text-setting #fontColor").change({Picture:this.ChartPicture},function(t){var e=(0,p.default)(this).val();(0,p.default)(this).parent().css({borderColor:e,"background-color":e});var a=t.data.Picture;a.LineColor=e,a.Update&&a.Update()}),(0,p.default)(".chartpicture-text-setting .fontSelect,.chartpicture-text-setting .fontSizeSelect").click(function(){(0,p.default)(this).find(".selectList").toggle(),(0,p.default)(this).toggleClass("hot")}),(0,p.default)(".chartpicture-text-setting .fontSelect p").click({Picture:this.ChartPicture},function(t){var e=(0,p.default)(this).closest(".fontSelect").find(".choicedText").html(),a=t.currentTarget.innerHTML;if(e!==a){(0,p.default)(this).closest(".fontSelect").find(".choicedText").html(a),(0,p.default)(this).siblings().removeClass("active"),(0,p.default)(this).addClass("active");var i=t.data.Picture;i.FontOption.Family=a,i.Update&&i.Update()}}),(0,p.default)(".chartpicture-text-setting .fontSizeSelect p").click({Picture:this.ChartPicture},function(t){var e=(0,p.default)(this).closest(".fontSizeSelect").find(".choicedText").html(),a=t.currentTarget.innerHTML;if(e!==a){(0,p.default)(this).closest(".fontSizeSelect").find(".choicedText").html(a),(0,p.default)(this).siblings().removeClass("active"),(0,p.default)(this).addClass("active");var i=t.data.Picture;i.FontOption.Size=Number(a),i.Update&&i.Update()}}),(0,p.default)(".chartpicture-text-setting .strongFont").click({Picture:this.ChartPicture},function(t){if((0,p.default)(this).toggleClass("hot"),(0,p.default)(this).attr("class").indexOf("hot")>0){var e=t.data.Picture;e.FontOption.Weight="bold",e.Update&&e.Update()}}),(0,p.default)(".chartpicture-text-setting .italicsFont").click({Picture:this.ChartPicture},function(t){if((0,p.default)(this).toggleClass("hot"),(0,p.default)(this).attr("class").indexOf("hot")>0){var e=t.data.Picture;e.FontOption.Style="italic",e.Update&&e.Update()}}),(0,p.default)(".chartpicture-text-setting .titleWrap .closeBtn,.chartpicture-text-setting .btnsContainer .cancelBtn").click({Picture:this.ChartPicture},function(t){var e=t.data.Picture;e.Text=i.BackupData.Text,e.LineColor=i.BackupData.LineColor,e.FontOption=i.BackupData.FontOption,e.Update&&e.Update(),i.Close()}),(0,p.default)(".chartpicture-text-setting .tArea").keyup({Picture:this.ChartPicture},function(t){D.Chart.Log('[ChartPictureTextSettingMenu::DoModal] $(".chartpicture-text-setting .tArea").keyup()');var e=(0,p.default)(this).val(),a=t.data.Picture;a.Text=e,a.Update&&a.Update()}),(0,p.default)(".chartpicture-text-setting .btnsContainer .okBtn").click(function(){i.Close(),i.HQChart&&i.HQChart.ChartDrawStorage&&i.HQChart.ChartDrawStorage.SaveDrawData(i.ChartPicture)})}}var Ea={SH:".SH",SZ:".SZ",SHSZ_C_Index:".CI",BJ:".BJ",SHO:".SHO",SZO:".SZO",HK:".HK",FHK:".FHK",SHFE:".SHF",SHFE2:".SHFE",CFFEX:".CFE",DCE:".DCE",CZCE:".CZC",GZFE:".GZFE",USA:".USA",FTSE:".FTSE",BIT:".BIT",BIZ:".BIZ",FOREX:".FOREX",NYMEX:".NYMEX",COMEX:".COMEX",NYBOT:".NYBOT",CBOT:".CBOT",LME:".LME",TOCOM:".TOCOM",IPE:".IPE",TW:".TW",JP:".JP",HSX:".HSX",HNX:".HNX",UPCOM:".UPCOM",ET:".ET",IsET:function(t){return!!t&&t.indexOf(this.ET)>0},IsETShowAvPrice:function(t){return!1},IsHSX:function(t){return!!t&&t.indexOf(this.HSX)>0},IsHNX:function(t){return!!t&&t.indexOf(this.HNX)>0},IsUPCOM:function(t){return!!t&&t.indexOf(this.UPCOM)>0},IsNYMEX:function(t){return!!t&&t.indexOf(this.NYMEX)>0},IsCOMEX:function(t){return!!t&&t.indexOf(this.COMEX)>0},IsNYBOT:function(t){return!!t&&t.indexOf(this.NYBOT)>0},IsCBOT:function(t){return!!t&&t.indexOf(this.CBOT)>0},IsLME:function(t){return!!t&&t.indexOf(this.LME)>0},IsTOCOM:function(t){return!!t&&t.indexOf(this.TOCOM)>0},IsIPE:function(t){return!!t&&t.indexOf(this.IPE)>0},IsForeignExchange:function(t){return!!t&&t.indexOf(this.FOREX)>0},IsFTSE:function(t){return!!t&&t.indexOf(this.FTSE)>0},IsFHK:function(t){return!!t&&t.indexOf(this.FHK)>0},IsBIT:function(t){return!!t&&(t.indexOf(this.BIT)>0||t.indexOf(this.BIZ)>0)},IsUSA:function(t){return!!t&&t.indexOf(this.USA)>0},IsSH:function(t){var e=t.length-this.SH.length;return t.indexOf(this.SH)==e},IsSZ:function(t){var e=t.length-this.SZ.length;return t.indexOf(this.SZ)==e},IsBJ:function(t){var e=t.length-this.BJ.length;return t.indexOf(this.BJ)==e},IsSHSZCustomIndex:function(t){var e=t.length-this.SHSZ_C_Index.length;return t.indexOf(this.SHSZ_C_Index)==e},IsSHO:function(t){var e=t.length-this.SHO.length;return t.indexOf(this.SHO)==e},IsSZO:function(t){var e=t.length-this.SZO.length;return t.indexOf(this.SZO)==e},IsHK:function(t){var e=t.length-this.HK.length;return t.indexOf(this.HK)==e},IsTW:function(t){var e=t.length-this.TW.length;return t.indexOf(this.TW)==e},IsJP:function(t){var e=t.length-this.JP.length;return t.indexOf(this.JP)==e},IsSHFE:function(t){return!!t&&(t.indexOf(this.SHFE)>0||t.indexOf(this.SHFE2)>0)},IsCFFEX:function(t){return!!t&&t.indexOf(this.CFFEX)>0},IsDCE:function(t){return!!t&&t.indexOf(this.DCE)>0},IsCZCE:function(t){return!!t&&t.indexOf(this.CZCE)>0},IsGZFE:function(t){return!!t&&t.indexOf(this.GZFE)>0},IsChinaFutures:function(t){return this.IsSHO(t)||this.IsSZO(t)||this.IsGZFE(t)||this.IsCFFEX(t)||this.IsCZCE(t)||this.IsDCE(t)||this.IsSHFE(t)},IsFutures:function(t){return this.IsChinaFutures(t)||this.IsNYMEX(t)||this.IsCOMEX(t)||this.IsNYBOT(t)||this.IsCBOT(t)||this.IsLME(t)||this.IsTOCOM(t)},IsSHSZ:function(t){return this.IsSZ(t)||this.IsSH(t)||this.IsSHSZCustomIndex(t)},IsSHSZFund:function(t){if(!t)return!1;if(this.IsSH(t)){if("5"==t.charAt(0)&&"1"==t.charAt(1))return!0}else if(this.IsSZ(t)&&"1"==t.charAt(0)&&("5"==t.charAt(1)||"6"==t.charAt(1)||"7"==t.charAt(1)||"8"==t.charAt(1)))return!0;return!1},IsSHSZIndex:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){var a=e.replace(".SH","");if("0"==e.charAt(0)&&parseInt(a)<=3e3)return!0}else if(this.IsSZ(e)){if("3"==e.charAt(0)&&"9"==e.charAt(1))return!0}else if(this.IsSHSZCustomIndex(e))return!0;return!1},IsSHSZStockA:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){e.replace(".SH","");if("6"==e.charAt(0))return!0}else if(this.IsSZ(e))if("0"==e.charAt(0)){if("0"==e.charAt(1)&&"2"==e.charAt(2))return!0;if("7"!=e.charAt(1)&&"8"!=e.charAt(1))return!0}else if("3"==e.charAt(0)&&"0"==e.charAt(1)){if("0"==e.charAt(2))return!0;if("1"==e.charAt(2))return!0}return!1},IsBJStock:function(t){if(!t)return!1;var e=t.toUpperCase();if(!this.IsBJ(e))return!1;var a=e.charAt(0);return"4"==a||"8"==a},IsSHStockSTAR:function(t){if(!t)return!1;var e=t.toUpperCase();return!!this.IsSH(e)&&("6"==e.charAt(0)&&"8"==e.charAt(1)&&"8"==e.charAt(2))},GetMarketStatus:function(t){if(!t)return 0;var e=t.toUpperCase(),a=new Date,i=a.getDay(),r=100*a.getHours()+a.getMinutes();if(this.IsUSA(e)){var n=Va(-4);i=n.getDay(),r=100*n.getHours()+n.getMinutes();return 6==i||0==i?0:r>1730?3:r<930?1:2}return this.IsBIT(e)?2:this.IsForeignExchange(e)?2:this.IsFTSE(e)?6==i||0==i?0:r>=830&&r<=2359?2:r>=0&&r<=500?2:0:this.IsFHK(e)?6==i||0==i?0:r>=900&&r<=2359?2:r>=0&&r<=320?2:0:this.IsET(e)?this.GetETMarketStatus(t):this.IsHK(e)?6==i||0==i?0:r>1630?3:r<925?1:2:this.IsTW(e)?6==i||0==i?0:r>1410?3:r<820?1:2:this.IsJP(e)?6==i||0==i?0:r>1520?3:r<830?1:2:this.IsNYMEX(e)?this.GetNYMEXMarketStatus(e):this.IsCOMEX(e)?this.GetCOMEXMarketStatus(e):this.IsNYBOT(e)?this.GetNYBOTMarketStatus(e):this.IsCBOT(e)?this.GetCBOTMarketStatus(e):this.IsLME(e)?this.GetLMEMarketStatus(e):this.IsTOCOM(e)?this.GetTOCOMMarketStatus(e):this.IsChinaFutures(e)?6==i||0==i?0:this.IsCFFEX(e)?r>1540?3:r<910?1:2:r>=2100?2:r<=240?2:r>=830&&r<=1510?2:1:6==i||0==i?0:r>1540?3:r<910?1:2},GetLimitPriceRange:function(t,e){return this.IsSHSZStockA(t)?this.IsSHStockSTAR(t)?{Max:.2,Min:-.2}:e?e.indexOf("ST")>=0?{Max:.05,Min:-.05}:{Max:.1,Min:-.1}:null:null},GetDefaultDecimal:function(t){return 2},GetFHKDecimal:function(t){return 0},GetFTSEDecimal:function(t){return 0},GetBITDecimal:function(t){return 2},GetSHODecimal:function(t){return 4},GetETDecimal:function(t){return 2},GetHKDecimal:function(t){return 2},GetTWDecimal:function(t){return 2},GetJPDecimal:function(t){return 2},GetHSXDecimal:function(t){return 2},GetHNXDecimal:function(t){return 2},GetUPCOMDecimal:function(t){return 2},GetForeignExchangeDecimal:function(t){return 4},GetNYMEXDecimal:function(t){return Oa.GetDecimal(t)},GetCOMEXDecimal:function(t){return Na.GetDecimal(t)},GetNYBOTDecimal:function(t){return Pa.GetDecimal(t)},GetCBOTDecimal:function(t){return Ra.GetDecimal(t)},GetLMEDecimal:function(t){return _a.GetDecimal(t)},GetTOCOMDecimal:function(t){return Ba.GetDecimal(t)},GetIPEDecimal:function(t){return ka.GetDecimal(t)},GetETMarketStatus:function(t){return 2},GetNYMEXMarketStatus:function(t){return Oa.GetMarketStatus(t)},GetCOMEXMarketStatus:function(t){return Na.GetMarketStatus(t)},GetNYBOTMarketStatus:function(t){return Pa.GetMarketStatus(t)},GetCBOTMarketStatus:function(t){return Ra.GetMarketStatus(t)},GetLMEMarketStatus:function(t){return _a.GetMarketStatus(t)},GetTOCOMMarketStatus:function(t){return Ba.GetMarketStatus(t)},GetIPEMarketStatus:function(t){return ka.GetMarketStatus(t)},IsShowMinuteVolTitle:function(t){if(!t)return!1;t.toUpperCase();return!1},IsShowMinutePostionLine:function(t){return!!(Ea.IsFutures(t)||Ea.IsSHO(t)||Ea.IsSZO(t))},IsShowMinuteColorVolBar:function(t){return!!ia.Minute.VolBarColor},IsEnableRight:function(t,e,a){return!(!Ea.IsSHSZStockA(e)&&!Ea.IsBJStock(e))&&(!pt.IsTickPeriod(t)&&(!!Te.IsPlusNumber(a)||!pt.IsMinutePeriod(t,!0)))}};function ba(){this.TIME_SPLIT=[{Name:"6:00-5:00",Data:[{Start:600,End:2359},{Start:0,End:500}],Coordinate:{Full:[{Value:600,Text:"6:00"},{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"}],Simple:[{Value:600,Text:"6:00"},{Value:1e3,Text:"10:00"},{Value:1400,Text:"14:00"},{Value:1800,Text:"18:00"},{Value:2200,Text:"22:00"},{Value:200,Text:"2:00"}],Min:[{Value:600,Text:"6:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}}],this.TIME_SPLIT2=[{Name:"7:00-6:00",Data:[{Start:700,End:2359},{Start:0,End:600}],Coordinate:{Full:[{Value:700,Text:"7:00"},{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"}],Simple:[{Value:700,Text:"7:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"},{Value:1900,Text:"19:00"},{Value:2300,Text:"23:00"},{Value:300,Text:"3:00"}],Min:[{Value:700,Text:"7:00"},{Value:1900,Text:"19:00"},{Value:500,Text:"5:00"}]}}],this.FUTURES_LIST=[{Symbol:"CL",Decimal:2,Time:0,Name:"原油"},{Symbol:"NG",Decimal:3,Time:0,Name:"天然气"},{Symbol:"RB",Decimal:4,Time:0,Name:"汽油"},{Symbol:"PL",Decimal:1,Time:0,Name:"铂金"},{Symbol:"PA",Decimal:2,Time:0,Name:"钯金"},{Symbol:"HR",Decimal:0,Time:0,Name:"热轧钢卷"},{Symbol:"QM",Decimal:3,Time:0,Name:"迷你原油"},{Symbol:"HO",Decimal:4,Time:0,Name:"燃油"}],this.MarketSuffix=".NYMEX",this.TimeType=0,this.GetFuturesInfo=function(t){if(t.indexOf(this.MarketSuffix)<=0)return null;for(var e in this.FUTURES_LIST){var a=this.FUTURES_LIST[e];if(0==t.indexOf(a.Symbol))return a}return null},this.GetSplitData=function(t){var e=0==this.TimeType?this.TIME_SPLIT:this.TIME_SPLIT2,a=this.GetFuturesInfo(t);return a?e[a.Time]:e[0]},this.GetDecimal=function(t){var e=this.GetFuturesInfo(t);return e?e.Decimal:3},this.GetMarketStatus=function(t){var e=Va(-4),a=new Date,i=e.getDay(),r=100*a.getHours()+a.getMinutes();return 6==i||0==i?0:r>430&&r<730?1:2},this.AddNewFutures=function(t){if(t){for(var e={Symbol:t.Symbol,Time:t.Time,Decimal:t.Decimal,Name:t.Name},a=0;a<this.FUTURES_LIST.length;++a){if(this.FUTURES_LIST[a].Symbol==e.Symbol)return void(this.FUTURES_LIST[a]=e)}this.FUTURES_LIST.push(e)}}}var La=new function(){this.SHSZ=null,this.BJ=null,this.SHO=null,this.HK=null,this.Futures=new C.default,this.USA=null,this.FTSE=null,this.FHK=null,this.ForeEx=null,this.BIT=null,this.TW=null,this.JP=null,this.HSX=null,this.HNX=null,this.UPCOM=null,this.Initialize=function(){},this.GetET=function(t){throw{Name:"MinuteTimeStringData::GetET",Error:"not implement"}},this.GetSHSZ=function(t){return this.SHSZ||(this.SHSZ=this.CreateSHSZData()),this.SHSZ},this.GetBJ=function(t){return this.BJ||(this.BJ=this.CreateBJData()),this.BJ},this.GetSHO=function(){return this.SHO||(this.SHO=this.CreateSHOData()),this.SHO},this.GetHK=function(t){return this.HK||(this.HK=this.CreateHKData()),this.HK},this.GetTW=function(t){return this.TW&&(this.TW=this.CreateTWData()),this.TW},this.GetJP=function(t){return this.JP&&(this.JP=this.CreateJPData()),this.JP},this.GetHSX=function(t){return this.HSX&&(this.HSX=this.CreateHSXData()),this.HSX},this.GetHNX=function(t){return this.HNX&&(this.HSX=this.CreateHNXData()),this.HNX},this.GetUPCOM=function(t){return this.UPCOM&&(this.UPCOM=this.CreateUPCOMData()),this.UPCOM},this.GetFutures=function(t){if(!this.Futures.has(t.Name)){var e=this.CreateTimeData(t.Data);this.Futures.set(t.Name,e)}return this.Futures.get(t.Name)},this.GetUSA=function(){return this.USA||(this.USA=this.CreateUSAData(0)),this.USA},this.GetFTSE=function(){return this.FTSE||(this.FTSE=this.CreateFTSEData()),this.FTSE},this.GetFHK=function(){return this.FHK||(this.FHK=this.CreateFHKData()),this.FHK},this.GetForeignExchange=function(t){return this.ForeEx||(this.ForeEx=this.CreateForeignExchangeData()),this.ForeEx},this.GetBIT=function(t){return this.BIT||(this.BIT=this.CreateBITData()),this.BIT},this.CreateSHSZData=function(){return this.CreateTimeData([{Start:925,End:925},{Start:930,End:1130},{Start:1300,End:1500}])},this.CreateBJData=function(){return this.CreateTimeData([{Start:925,End:925},{Start:930,End:1130},{Start:1300,End:1500}])},this.CreateSHOData=function(){return this.CreateTimeData([{Start:930,End:1129},{Start:1300,End:1500}])},this.CreateHKData=function(){return this.CreateTimeData([{Start:930,End:1200},{Start:1300,End:1600}])},this.CreateTWData=function(){return this.CreateTimeData([{Start:900,End:1330}])},this.CreateJPData=function(){return this.CreateTimeData([{Start:900,End:1130},{Start:1230,End:1500}])},this.CreateFTSEData=function(){return this.CreateTimeData([{Start:1700,End:2359},{Start:0,End:445},{Start:900,End:1630}])},this.CreateFHKData=function(){return this.CreateTimeData([{Start:1715,End:2359},{Start:0,End:300},{Start:915,End:1200},{Start:1300,End:1630}])},this.CreateHSXData=function(){throw{Name:"MinuteTimeStringData::CreateHSXData",Error:"not implement"}},this.CreateHNXData=function(){throw{Name:"MinuteTimeStringData::CreateHNXData",Error:"not implement"}},this.CreateUPCOMData=function(){throw{Name:"MinuteTimeStringData::CreateUPCOMData",Error:"not implement"}},this.CreateUSAData=function(t){return 1==t?this.CreateTimeData([{Start:2130,End:2359},{Start:0,End:400}]):2==t?this.CreateTimeData([{Start:2230,End:2359},{Start:0,End:500}]):this.CreateTimeData([{Start:930,End:1600}])},this.CreateForeignExchangeData=function(){return this.CreateTimeData([{Start:600,End:2359},{Start:0,End:559}])},this.CreateBITData=function(){return this.CreateTimeData([{Start:600,End:2359},{Start:0,End:559}])},this.CreateTimeData=function(t){var e=[];for(var a in t)for(var i=t[a],r=i.Start;r<=i.End;++r)r%100>=60||e.push(r);return e},this.GetTimeData=function(t){if(!t)return this.SHSZ;var e,a=t.toLocaleUpperCase();return Ea.IsSH(a)||Ea.IsSZ(a)?this.GetSHSZ(a):Ea.IsBJ(a)?this.GetBJ(a):Ea.IsSHO(a)||Ea.IsSZO(a)?this.GetSHO():Ea.IsHK(a)?this.GetHK(a):Ea.IsTW(a)?this.GetTW(a):Ea.IsJP(a)?this.GetJP(a):Ea.IsUSA(a)?this.GetUSA(!0):Ea.IsCFFEX(a)||Ea.IsCZCE(a)||Ea.IsDCE(a)||Ea.IsSHFE(a)||Ea.IsGZFE(a)?(e=Aa.GetSplitData(a))?this.GetFutures(e):null:Ea.IsFTSE(a)?this.GetFTSE():Ea.IsFHK(a)?this.GetFHK():Ea.IsForeignExchange(a)?this.GetForeignExchange(a):Ea.IsET(a)?this.GetET(a):Ea.IsBIT(a)?this.GetBIT(a):Ea.IsHSX(a)?this.GetHSX(a):Ea.IsHNX(a)?this.GetHNX(a):Ea.IsUPCOM(a)?this.GetUPCOM(a):Ea.IsNYMEX(a)?(e=Oa.GetSplitData(a))?this.GetFutures(e):null:Ea.IsCOMEX(a)?(e=Na.GetSplitData(a))?this.GetFutures(e):null:Ea.IsNYBOT(a)?(e=Pa.GetSplitData(a))?this.GetFutures(e):null:Ea.IsCBOT(a)?(e=Ra.GetSplitData(a))?this.GetFutures(e):null:Ea.IsLME(a)?(e=_a.GetSplitData(a))?this.GetFutures(e):null:Ea.IsTOCOM(a)?(e=Ba.GetSplitData(a))?this.GetFutures(e):null:Ea.IsIPE(a)?(e=ka.GetSplitData(a))?this.GetFutures(e):null:void 0}},Ma=new function(){var t={Full:[[0,0,"rgb(200,200,200)","09:30"],[31,0,"RGB(200,200,200)","10:00"],[61,0,"RGB(200,200,200)","10:30"],[91,0,"RGB(200,200,200)","11:00"],[122,1,"RGB(200,200,200)","13:00"],[152,0,"RGB(200,200,200)","13:30"],[182,0,"RGB(200,200,200)","14:00"],[212,0,"RGB(200,200,200)","14:30"],[242,1,"RGB(200,200,200)","15:00"]],Simple:[[0,0,"rgb(200,200,200)","09:30"],[61,0,"RGB(200,200,200)","10:30"],[122,1,"RGB(200,200,200)","13:00"],[182,0,"RGB(200,200,200)","14:00"],[242,1,"RGB(200,200,200)","15:00"]],Min:[[0,0,"rgb(200,200,200)","09:30"],[122,1,"RGB(200,200,200)","13:00"],[242,1,"RGB(200,200,200)","15:00"]],Count:243,MiddleCount:122,GetData:function(t){return t<200?this.Min:t<400?this.Simple:this.Full}},e={Full:[[0,0,"rgb(200,200,200)","09:30"],[30,0,"RGB(200,200,200)","10:00"],[60,0,"RGB(200,200,200)","10:30"],[90,0,"RGB(200,200,200)","11:00"],[120,1,"RGB(200,200,200)","13:00"],[150,0,"RGB(200,200,200)","13:30"],[180,0,"RGB(200,200,200)","14:00"],[210,0,"RGB(200,200,200)","14:30"],[240,1,"RGB(200,200,200)","15:00"]],Simple:[[0,0,"rgb(200,200,200)","09:30"],[60,0,"RGB(200,200,200)","10:30"],[120,1,"RGB(200,200,200)","13:00"],[180,0,"RGB(200,200,200)","14:00"],[240,1,"RGB(200,200,200)","15:00"]],Min:[[0,0,"rgb(200,200,200)","09:30"],[120,1,"RGB(200,200,200)","13:00"],[240,1,"RGB(200,200,200)","15:00"]],Count:241,MiddleCount:120,GetData:function(t){return t<200?this.Min:t<400?this.Simple:this.Full}},a={Full:[[0,1,"RGB(200,200,200)","09:30"],[30,0,"RGB(200,200,200)","10:00"],[60,1,"RGB(200,200,200)","10:30"],[90,0,"RGB(200,200,200)","11:00"],[120,1,"RGB(200,200,200)","11:30"],[151,0,"RGB(200,200,200)","13:00"],[181,1,"RGB(200,200,200)","13:30"],[211,0,"RGB(200,200,200)","14:00"],[241,1,"RGB(200,200,200)","14:30"],[271,0,"RGB(200,200,200)","15:00"],[301,1,"RGB(200,200,200)","15:30"],[331,1,"RGB(200,200,200)","16:00"]],Simple:[[0,1,"RGB(200,200,200)","09:30"],[60,1,"RGB(200,200,200)","10:30"],[120,1,"RGB(200,200,200)","11:30"],[211,0,"RGB(200,200,200)","14:00"],[271,0,"RGB(200,200,200)","15:00"],[331,1,"RGB(200,200,200)","16:00"]],Min:[[0,1,"RGB(200,200,200)","09:30"],[151,0,"RGB(200,200,200)","13:00"],[331,1,"RGB(200,200,200)","16:00"]],Count:332,MiddleCount:151,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},i={Full:[[0,0,"rgb(200,200,200)","9:30"],[30,0,"RGB(200,200,200)","10:00"],[90,1,"RGB(200,200,200)","11:00"],[150,0,"RGB(200,200,200)","12:00"],[210,0,"RGB(200,200,200)","13:00"],[270,0,"RGB(200,200,200)","14:00"],[330,0,"RGB(200,200,200)","15:00"],[390,0,"RGB(200,200,200)","16:00"]],Simple:[[30,0,"rgb(200,200,200)","10:00"],[150,1,"RGB(200,200,200)","12:00"],[270,0,"RGB(200,200,200)","14:00"],[390,0,"RGB(200,200,200)","16:00"]],Min:[[30,0,"rgb(200,200,200)","10:00"],[210,1,"RGB(200,200,200)","13:00"],[390,0,"RGB(200,200,200)","16:00"]],Count:391,MiddleCount:211,GetData:function(t){return t<200?this.Min:t<400?this.Simple:this.Full}},r={Full:[[0,1,"RGB(200,200,200)","17:00"],[120,1,"RGB(200,200,200)","19:00"],[240,1,"RGB(200,200,200)","21:00"],[360,1,"RGB(200,200,200)","23:00"],[480,1,"RGB(200,200,200)","01:00"],[600,1,"RGB(200,200,200)","03:00"],[706,1,"RGB(200,200,200)","09:00"],[826,1,"RGB(200,200,200)","11:00"],[946,1,"RGB(200,200,200)","13:00"],[1066,1,"RGB(200,200,200)","15:00"],[1156,1,"RGB(200,200,200)","16:30"]],Simple:[[0,1,"RGB(200,200,200)","17:00"],[240,1,"RGB(200,200,200)","21:00"],[480,1,"RGB(200,200,200)","01:00"],[706,1,"RGB(200,200,200)","09:00"],[946,1,"RGB(200,200,200)","13:00"],[1156,1,"RGB(200,200,200)","16:30"]],Min:[[0,1,"RGB(200,200,200)","17:00"],[706,1,"RGB(200,200,200)","09:00"],[1156,1,"RGB(200,200,200)","16:30"]],Count:1157,MiddleCount:707,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},n={Full:[[0,1,"RGB(200,200,200)","17:15"],[105,1,"RGB(200,200,200)","19:00"],[225,1,"RGB(200,200,200)","21:00"],[345,1,"RGB(200,200,200)","23:00"],[586,0,"RGB(200,200,200)","09:15"],[691,1,"RGB(200,200,200)","11:00"],[812,1,"RGB(200,200,200)","14:00"],[963,1,"RGB(200,200,200)","16:30"]],Simple:[[0,1,"RGB(200,200,200)","17:15"],[225,1,"RGB(200,200,200)","21:00"],[586,0,"RGB(200,200,200)","09:15"],[752,1,"RGB(200,200,200)","13:00"],[963,1,"RGB(200,200,200)","16:30"]],Min:[[0,1,"RGB(200,200,200)","17:15"],[586,0,"RGB(200,200,200)","09:15"],[963,1,"RGB(200,200,200)","16:30"]],Count:963,MiddleCount:526,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},o={Full:[[0,1,"RGB(200,200,200)","06:00"],[120,1,"RGB(200,200,200)","08:00"],[240,1,"RGB(200,200,200)","10:00"],[360,1,"RGB(200,200,200)","12:00"],[480,0,"RGB(200,200,200)","14:00"],[600,1,"RGB(200,200,200)","16:00"],[720,1,"RGB(200,200,200)","18:00"],[840,1,"RGB(200,200,200)","20:00"],[960,1,"RGB(200,200,200)","22:00"],[1080,1,"RGB(200,200,200)","0:00"],[1200,1,"RGB(200,200,200)","02:00"],[1320,1,"RGB(200,200,200)","04:00"]],Simple:[[0,1,"RGB(200,200,200)","06:00"],[240,1,"RGB(200,200,200)","10:00"],[480,0,"RGB(200,200,200)","14:00"],[720,1,"RGB(200,200,200)","18:00"],[960,1,"RGB(200,200,200)","22:00"],[1200,1,"RGB(200,200,200)","02:00"]],Min:[[0,1,"RGB(200,200,200)","06:00"],[480,0,"RGB(200,200,200)","14:00"],[960,1,"RGB(200,200,200)","22:00"]],Count:1440,MiddleCount:600,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},s={Full:[[0,1,"RGB(200,200,200)","09:00"],[30,0,"RGB(200,200,200)","09:30"],[60,1,"RGB(200,200,200)","10:00"],[90,0,"RGB(200,200,200)","10:30"],[120,1,"RGB(200,200,200)","11:00"],[150,0,"RGB(200,200,200)","11:30"],[180,1,"RGB(200,200,200)","12:00"],[210,0,"RGB(200,200,200)","12:30"],[240,1,"RGB(200,200,200)","13:00"],[270,0,"RGB(200,200,200)","13:30"]],Simple:[[0,1,"RGB(200,200,200)","09:00"],[60,1,"RGB(200,200,200)","10:00"],[120,1,"RGB(200,200,200)","11:00"],[180,1,"RGB(200,200,200)","12:00"],[270,0,"RGB(200,200,200)","13:30"]],Min:[[0,1,"RGB(200,200,200)","09:00"],[60,1,"RGB(200,200,200)","11:00"],[270,0,"RGB(200,200,200)","13:30"]],Count:271,MiddleCount:151,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}};this.GetCoordinateData=function(e,a){var i=null;if(e){var r=e.toLocaleUpperCase();if(Ea.IsSH(r)||Ea.IsSZ(r)||Ea.IsSHSZIndex(r))i=this.GetSHSZData(r,a);else if(Ea.IsBJ(r))i=this.GetBJData(r,a);else if(Ea.IsSHO(r)||Ea.IsSZO(r))i=this.GetSHOData(r,a);else if(Ea.IsHK(r))i=this.GetHKData(r,a);else if(Ea.IsTW(r))i=this.GetTWData(r,a);else if(Ea.IsJP(r))i=this.GetJPData(r,a);else{if(Ea.IsCFFEX(r)||Ea.IsCZCE(r)||Ea.IsDCE(r)||Ea.IsSHFE(r)||Ea.IsGZFE(r))return this.GetChinatFuturesData(r,a);if(Ea.IsUSA(r))i=this.GetUSAData(r,a);else if(Ea.IsFTSE(r))i=this.GetFTSEData(r,a);else if(Ea.IsFHK(r))i=this.GetFHKData(r,a);else if(Ea.IsForeignExchange(r))i=this.GetForeignExchangeData(r);else if(Ea.IsBIT(r,a))i=this.GetBITData(r,a);else if(Ea.IsET(r))i=this.GetETData(r,a);else{if(Ea.IsNYMEX(r))return this.GetNYMEXData(r,a);if(Ea.IsCOMEX(r))return this.GetCOMEXData(r,a);if(Ea.IsNYBOT(r))return this.GetNYBOTData(r,a);if(Ea.IsCBOT(r))return this.GetCBOTData(r,a);if(Ea.IsLME(r))return this.GetLMEData(r,a);if(Ea.IsTOCOM(r))return this.GetTOCOMData(r,a);if(Ea.IsIPE(r))return this.GetIPEData(r,a);if(Ea.IsHSX(r))return this.GetHSXData(r,a);if(Ea.IsHNX(r))return this.GetHNXData(r,a);if(Ea.IsUPCOM(r))return this.GetUPCOMData(r,a)}}}else i=t;return{Count:i.Count,MiddleCount:i.MiddleCount,Data:i.GetData(a)}},this.GetSHSZData=function(e,a){return t},this.GetBJData=function(e,a){return t},this.GetUSAData=function(t,e){return i},this.GetHKData=function(t,e){return a},this.GetTWData=function(t,e){return s},this.GetSHOData=function(t,a){return e},this.GetFuturesData=function(t,e,a){var i=a.GetSplitData(t);if(!i)return null;var r=La.GetFutures(i);if(!r)return null;var n={Count:r.length},o=null;o=e<200?i.Coordinate.Min:e<480?i.Coordinate.Simple:i.Coordinate.Full;for(var s=[],h=0;h<r.length;++h)for(var l=r[h],u=0;u<o.length;++u){var c=o[u];if(l==c.Value){var f=[h,0,"RGB(200,200,200)",c.Text];s.push(f);break}}return n.Data=s,n},this.GetChinatFuturesData=function(t,e){return this.GetFuturesData(t,e,Aa)},this.GetNYMEXData=function(t,e){return this.GetFuturesData(t,e,Oa)},this.GetCOMEXData=function(t,e){return this.GetFuturesData(t,e,Na)},this.GetNYBOTData=function(t,e){return this.GetFuturesData(t,e,Pa)},this.GetCBOTData=function(t,e){return this.GetFuturesData(t,e,Ra)},this.GetLMEData=function(t,e){return this.GetFuturesData(t,e,_a)},this.GetTOCOMData=function(t,e){return this.GetFuturesData(t,e,Ba)},this.GetIPEData=function(t,e){return this.GetFuturesData(t,e,ka)},this.GetFTSEData=function(t,e){return r},this.GetFHKData=function(t,e){return n},this.GetForeignExchangeData=function(t,e){return o},this.GetBITData=function(t,e){return o},this.GetETData=function(t,e){throw{Name:"MinuteCoordinateData::GetETData",Error:"not implement"}},this.GetJPData=function(t,e){throw{Name:"MinuteCoordinateData::GetJPData",Error:"not implement"}},this.GetHSXData=function(t,e){throw{Name:"MinuteCoordinateData::GetHSXData",Error:"not implement"}},this.GetHNXData=function(t,e){throw{Name:"MinuteCoordinateData::GetHNXData",Error:"not implement"}},this.GetUPCOMData=function(t,e){throw{Name:"MinuteCoordinateData::GetUPCOMData",Error:"not implement"}}},Aa=new function(){this.TIME_SPLIT=[{Name:"9:00-10:15,10:31-11:30,13:31-15:00",Data:[{Start:900,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1330,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Min:[{Value:900,Text:"9:00"},{Value:1330,Text:"13:30"},{Value:1500,Text:"15:00"}]}},{Name:"9:30-11:30,13:01-15:15",Data:[{Start:930,End:1130},{Start:1301,End:1515}],Coordinate:{Full:[{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1515,Text:"15:15"}],Simple:[{Value:930,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1300,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1515,Text:"15:15"}],Min:[{Value:930,Text:"9:30"},{Value:1300,Text:"13:00"},{Value:1515,Text:"15:15"}]}},{Name:"9:30-11:30,13:00-15:00",Data:[{Start:930,End:1130},{Start:1301,End:1500}],Coordinate:{Full:[{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:930,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1300,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1500,Text:"15:00"}],Min:[{Value:930,Text:"9:30"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-23:30,9:00-10:15,10:30-11:30,13:30-15:00",Data:[{Start:2100,End:2330},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-1:00,9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:2100,End:2359},{Start:0,End:100},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-2:30,9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:2100,End:2359},{Start:0,End:230},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-23:00,9:01-10:15,10:30-11:30,13:31-15:00",Data:[{Start:2100,End:2300},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:1030,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1500,Text:"15:00"}]}},{Name:"9:00-11:30,13:00-15:00",Data:[{Start:900,End:1130},{Start:1300,End:1500}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1300,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1500,Text:"15:00"}],Min:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-23:00,9:00-10:15,10:30-11:30,13:30-15:00",Data:[{Start:2100,End:2300},{Start:900,End:1015},{Start:1030,End:1130},{Start:1330,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:1030,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1500,Text:"15:00"}]}},{Name:"9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:901,Text:"9:00"},{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:901,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1330,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Min:[{Value:901,Text:"9:00"},{Value:1330,Text:"13:30"},{Value:1500,Text:"15:00"}]}},{Name:"21:01-1:00,9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:2101,End:2359},{Start:0,End:100},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2101,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2101,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:01-23:00,9:01-10:15,10:30-11:30,13:31-15:00",Data:[{Start:2101,End:2300},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2101,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:1030,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:01-2:30,9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:2101,End:2359},{Start:0,End:230},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"}],Min:[{Value:2101,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"9:30-11:30,13:01-15:15",Data:[{Start:931,End:1130},{Start:1301,End:1515}],Coordinate:{Full:[{Value:931,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1301,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1515,Text:"15:15"}],Simple:[{Value:931,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1301,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1515,Text:"15:15"}],Min:[{Value:931,Text:"9:30"},{Value:1301,Text:"13:00"},{Value:1515,Text:"15:15"}]}},{Name:"9:31-11:30,13:01-15:00",Data:[{Start:931,End:1130},{Start:1301,End:1500}],Coordinate:{Full:[{Value:931,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1301,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:931,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1301,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1500,Text:"15:00"}],Min:[{Value:931,Text:"9:30"},{Value:1301,Text:"13:00"},{Value:1500,Text:"15:00"}]}}],this.MAP_TWOWORDS=new C.default([[Ea.DCE+"-JD",{Time:0,Decimal:0,Name:"鸡蛋"}],[Ea.DCE+"-FB",{Time:0,Decimal:2,Name:"纤板"}],[Ea.DCE+"-BB",{Time:0,Decimal:2,Name:"胶板"}],[Ea.DCE+"-PP",{Time:6,Decimal:0,Name:"丙烯"}],[Ea.DCE+"-JM",{Time:6,Decimal:1,Name:"焦煤"}],[Ea.DCE+"-EG",{Time:6,Decimal:0,Name:"乙二醇"}],[Ea.DCE+"-EB",{Time:6,Decimal:0,Name:"苯乙烯"}],[Ea.DCE+"-CS",{Time:6,Decimal:0,Name:"淀粉"}],[Ea.DCE+"-PG",{Time:6,Decimal:0,Name:"液化气"}],[Ea.DCE+"-RR",{Time:6,Decimal:0,Name:"梗米"}],[Ea.DCE+"-LH",{Time:0,Decimal:0,Name:"生猪"}],[Ea.SHFE+"-CU",{Time:4,Decimal:0,Name:"铜"}],[Ea.SHFE+"-AL",{Time:4,Decimal:0,Name:"铝"}],[Ea.SHFE+"-NI",{Time:4,Decimal:0,Name:"镍"}],[Ea.SHFE+"-SN",{Time:4,Decimal:0,Name:"沪锡"}],[Ea.SHFE+"-ZN",{Time:4,Decimal:0,Name:"沪锌"}],[Ea.SHFE+"-PB",{Time:4,Decimal:0,Name:"沪铅"}],[Ea.SHFE+"-RU",{Time:6,Decimal:0,Name:"天然橡胶"}],[Ea.SHFE+"-FU",{Time:6,Decimal:0,Name:"燃料油"}],[Ea.SHFE+"-RB",{Time:6,Decimal:0,Name:"螺纹钢"}],[Ea.SHFE+"-BU",{Time:6,Decimal:0,Name:"石油沥青"}],[Ea.SHFE+"-HC",{Time:6,Decimal:0,Name:"热轧卷板"}],[Ea.SHFE+"-SP",{Time:6,Decimal:0,Name:"纸浆"}],[Ea.SHFE+"-WR",{Time:0,Decimal:0,Name:"线材"}],[Ea.SHFE+"-AG",{Time:5,Decimal:0,Name:"白银"}],[Ea.SHFE+"-AU",{Time:5,Decimal:2,Name:"黄金"}],[Ea.SHFE+"-SS",{Time:4,Decimal:0,Name:"不锈钢"}],[Ea.SHFE+"-NR",{Time:6,Decimal:1,Name:"20号胶"}],[Ea.SHFE+"-SC",{Time:5,Decimal:1,Name:"原油"}],[Ea.SHFE+"-LU",{Time:6,Decimal:0,Name:"低硫燃油"}],[Ea.SHFE+"-BC",{Time:4,Decimal:0,Name:"国际铜"}],[Ea.CZCE+"-CF",{Time:6,Decimal:0,Name:"棉花"}],[Ea.CZCE+"-SR",{Time:6,Decimal:0,Name:"白糖"}],[Ea.CZCE+"-MA",{Time:6,Decimal:0,Name:"甲醇"}],[Ea.CZCE+"-ZC",{Time:6,Decimal:1,Name:"动力煤"}],[Ea.CZCE+"-TA",{Time:6,Decimal:0,Name:"精对苯二甲酸(PTA)"}],[Ea.CZCE+"-RM",{Time:6,Decimal:0,Name:"菜籽粕"}],[Ea.CZCE+"-OI",{Time:6,Decimal:0,Name:"菜籽油"}],[Ea.CZCE+"-ME",{Time:3,Decimal:0,Name:"甲醇(老)"}],[Ea.CZCE+"-FG",{Time:6,Decimal:0,Name:"平板玻璃"}],[Ea.CZCE+"-WS",{Time:0,Decimal:0}],[Ea.CZCE+"-WT",{Time:0,Decimal:0}],[Ea.CZCE+"-GN",{Time:0,Decimal:0}],[Ea.CZCE+"-RO",{Time:0,Decimal:0}],[Ea.CZCE+"-RS",{Time:0,Decimal:0,Name:"菜籽"}],[Ea.CZCE+"-ER",{Time:0,Decimal:0}],[Ea.CZCE+"-RI",{Time:0,Decimal:0,Name:"早籼稻"}],[Ea.CZCE+"-WH",{Time:0,Decimal:0,Name:"强麦"}],[Ea.CZCE+"-AP",{Time:0,Decimal:0,Name:"苹果"}],[Ea.CZCE+"-PM",{Time:0,Decimal:0,Name:"普麦"}],[Ea.CZCE+"-QM",{Time:0,Decimal:0}],[Ea.CZCE+"-TC",{Time:0,Decimal:0}],[Ea.CZCE+"-JR",{Time:0,Decimal:0,Name:"粳稻"}],[Ea.CZCE+"-LR",{Time:0,Decimal:0,Name:"晚籼稻"}],[Ea.CZCE+"-SF",{Time:0,Decimal:0,Name:"硅铁"}],[Ea.CZCE+"-SM",{Time:0,Decimal:0,Name:"锰硅"}],[Ea.CZCE+"-CJ",{Time:0,Decimal:2,Name:"红枣"}],[Ea.CZCE+"-CY",{Time:6,Decimal:0,Name:"棉纱"}],[Ea.CZCE+"-UR",{Time:0,Decimal:0,Name:"尿素"}],[Ea.CZCE+"-SA",{Time:6,Decimal:0,Name:"纯碱"}],[Ea.CZCE+"-PF",{Time:6,Decimal:0,Name:"短纤"}],[Ea.CZCE+"-PK",{Time:0,Decimal:0,Name:"花生"}],[Ea.CFFEX+"-TF",{Time:1,Decimal:3,Name:"二债"}],[Ea.CFFEX+"-TS",{Time:1,Decimal:3,Name:"五债"}],[Ea.CFFEX+"-IH",{Time:2,Decimal:1,Name:"上证股指期货"}],[Ea.CFFEX+"-IC",{Time:2,Decimal:1,Name:"中证股指期货"}],[Ea.CFFEX+"-IF",{Time:2,Decimal:1,Name:"沪深股指期货"}],[Ea.CFFEX+"-IM",{Time:2,Decimal:1,Name:"中证1000股指期货"}],[Ea.GZFE+"-SI",{Time:0,Decimal:2,Name:"工业硅"}]]),this.MAP_ONEWORD=new C.default([[Ea.DCE+"-C",{Time:6,Decimal:0,Name:"玉米"}],[Ea.DCE+"-L",{Time:6,Decimal:0,Name:"乙烯"}],[Ea.DCE+"-V",{Time:6,Decimal:0,Name:"PVC"}],[Ea.DCE+"-A",{Time:6,Decimal:0,Name:"豆一"}],[Ea.DCE+"-B",{Time:6,Decimal:0,Name:"豆二"}],[Ea.DCE+"-M",{Time:6,Decimal:0,Name:"豆粕"}],[Ea.DCE+"-Y",{Time:6,Decimal:0,Name:"豆油"}],[Ea.DCE+"-P",{Time:6,Decimal:0,Name:"棕榈"}],[Ea.DCE+"-J",{Time:6,Decimal:1,Name:"焦炭"}],[Ea.DCE+"-I",{Time:6,Decimal:1,Name:"铁矿"}],[Ea.CFFEX+"-T",{Time:1,Decimal:3,Name:"十债"}]]),this.AddNewFutures=function(t){if(t){var e=t.Suffix+"-"+t.Symbol,a={Time:t.Time,Decimal:t.Decimal,Name:t.Name};1==t.Symbol.length?this.MAP_ONEWORD.set(e,a):2==t.Symbol.length&&this.MAP_TWOWORDS.set(e,a)}},this.GetData=function(t){var e=t.charAt(0),a=t.substr(0,2),i=null,r=null;return Ea.IsDCE(t)?(i=Ea.DCE+"-"+e,r=Ea.DCE+"-"+a):Ea.IsSHFE(t)?(i=Ea.SHFE+"-"+e,r=Ea.SHFE+"-"+a):Ea.IsCFFEX(t)?(i=Ea.CFFEX+"-"+e,r=Ea.CFFEX+"-"+a):Ea.IsCZCE(t)?(i=Ea.CZCE+"-"+e,r=Ea.CZCE+"-"+a):Ea.IsGZFE(t)&&(i=Ea.GZFE+"-"+e,r=Ea.GZFE+"-"+a),this.MAP_TWOWORDS.has(r)?this.MAP_TWOWORDS.get(r):this.MAP_ONEWORD.has(i)?this.MAP_ONEWORD.get(i):null},this.GetSplitData=function(t){var e=this.GetData(t);return e?this.TIME_SPLIT[e.Time]:null},this.GetDecimal=function(t){var e=this.GetData(t);return e?e.Decimal:2}},Oa=new ba,Na=new function(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.FUTURES_LIST=[{Symbol:"GC",Decimal:1,Time:0,Name:"COMEX黄金"},{Symbol:"QO",Decimal:2,Time:0,Name:"迷你黄金"},{Symbol:"MG",Decimal:1,Time:0,Name:"微型黄金"},{Symbol:"QI",Decimal:4,Time:0,Name:"迷你白银"},{Symbol:"SI",Decimal:3,Time:0,Name:"COMEX白银"},{Symbol:"HG",Decimal:4,Time:0,Name:"COMEX铜"}],this.MarketSuffix=".COMEX"},Pa=new function(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.TIME_SPLIT=[{Name:"9:00-2:20",Data:[{Start:900,End:2359},{Start:0,End:220}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:100,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1700,Text:"17:00"},{Value:100,Text:"1:00"}]}},{Name:"15:30-1:00",Data:[{Start:1530,End:2359},{Start:0,End:100}],Coordinate:{Full:[{Value:1600,Text:"16:00"},{Value:1700,Text:"17:00"},{Value:1800,Text:"18:00"},{Value:1900,Text:"19:00"},{Value:2e3,Text:"20:00"},{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:0,Text:"0:00"},{Value:100,Text:"1:00"}],Simple:[{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"}],Min:[{Value:1600,Text:"16:00"},{Value:2100,Text:"21:00"},{Value:100,Text:"1:00"}]}}],this.TIME_SPLIT2=[{Name:"10:00-3:20",Data:[{Start:1e3,End:2359},{Start:0,End:320}],Coordinate:{Full:[{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:1e3,Text:"10:00"},{Value:1400,Text:"14:00"},{Value:1800,Text:"18:00"},{Value:2200,Text:"22:00"},{Value:200,Text:"2:00"}],Min:[{Value:1e3,Text:"10:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"16:30-2:00",Data:[{Start:1630,End:2359},{Start:0,End:200}],Coordinate:{Full:[{Value:1700,Text:"17:00"},{Value:1800,Text:"18:00"},{Value:1900,Text:"19:00"},{Value:2e3,Text:"20:00"},{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:0,Text:"0:00"},{Value:100,Text:"1:00"},{Value:200,Text:"2:00"}],Simple:[{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"}],Min:[{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:200,Text:"2:00"}]}}],this.FUTURES_LIST=[{Symbol:"SB",Decimal:2,Time:1},{Symbol:"CT",Decimal:2,Time:0}],this.MarketSuffix=".NYBOT",this.GetMarketStatus=function(t){var e=Va(-4),a=e.getDay(),i=100*e.getHours()+e.getMinutes();if(6==a||0==a)return 0;var r=this.GetFuturesInfo(t);if(!r)return 2;if("SB"==r.Symbol){if(i>300&&i<1400)return 2}else if("CT"==r.Symbol)return i>=0&&i<=1500||i>=2e3&&i<=2359?2:1;return 0}},Ra=new function(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.TIME_SPLIT=[{Name:"8:00-2:20",Data:[{Start:800,End:2359},{Start:0,End:220}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"8:00-2:45",Data:[{Start:800,End:2359},{Start:0,End:245}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"6:00-5:00",Data:[{Start:600,End:2359},{Start:0,End:500}],Coordinate:{Full:[{Value:600,Text:"6:00"},{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"}],Simple:[{Value:600,Text:"6:00"},{Value:1e3,Text:"10:00"},{Value:1400,Text:"14:00"},{Value:1800,Text:"18:00"},{Value:2200,Text:"22:00"},{Value:200,Text:"2:00"}],Min:[{Value:600,Text:"6:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}},{Name:"08:00-20:45 21:31-02:20",Data:[{Start:800,End:2045},{Start:2131,End:2359},{Start:0,End:220}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"8:00-2:45",Data:[{Start:800,End:2045},{Start:2131,End:2359},{Start:0,End:245}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"06:00-04:15 04:31-05:00",Data:[{Start:600,End:2359},{Start:0,End:415},{Start:431,End:500}],Coordinate:{Full:[{Value:600,Text:"6:00"},{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"}],Simple:[{Value:600,Text:"6:00"},{Value:1e3,Text:"10:00"},{Value:1400,Text:"14:00"},{Value:1800,Text:"18:00"},{Value:2200,Text:"22:00"},{Value:200,Text:"2:00"}],Min:[{Value:600,Text:"6:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}}],this.TIME_SPLIT2=[{Name:"9:00-3:20",Data:[{Start:900,End:2359},{Start:0,End:320}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1900,Text:"19:00"},{Value:300,Text:"3:00"}]}},{Name:"9:00-3:45",Data:[{Start:900,End:2359},{Start:0,End:345}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1900,Text:"19:00"},{Value:300,Text:"3:00"}]}},{Name:"7:00-6:00",Data:[{Start:700,End:2359},{Start:0,End:600}],Coordinate:{Full:[{Value:700,Text:"7:00"},{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"}],Simple:[{Value:700,Text:"7:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"},{Value:1900,Text:"19:00"},{Value:2300,Text:"23:00"},{Value:300,Text:"3:00"}],Min:[{Value:700,Text:"7:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}},{Name:"09:00-21:45 22:31-03:20",Data:[{Start:900,End:2145},{Start:2231,End:2359},{Start:0,End:320}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1900,Text:"19:00"},{Value:300,Text:"3:00"}]}},{Name:"09:00-21:45 22:31-03:45",Data:[{Start:900,End:2145},{Start:2231,End:2359},{Start:0,End:345}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1900,Text:"19:00"},{Value:300,Text:"3:00"}]}},{Name:"07:00-05:15 05:31-06:00",Data:[{Start:700,End:2359},{Start:0,End:515},{Start:531,End:600}],Coordinate:{Full:[{Value:700,Text:"7:00"},{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"}],Simple:[{Value:700,Text:"7:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"},{Value:1900,Text:"19:00"},{Value:2300,Text:"23:00"},{Value:300,Text:"3:00"}],Min:[{Value:700,Text:"7:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}}],this.FUTURES_LIST=[{Symbol:"ZC",Decimal:2,Time:0,Name:"玉米"},{Symbol:"XC",Decimal:2,Time:1,Name:"迷你玉米"},{Symbol:"ZS",Decimal:2,Time:0,Name:"大豆"},{Symbol:"XK",Decimal:2,Time:1,Name:"迷你大豆"},{Symbol:"ZL",Decimal:2,Time:0,Name:"豆油"},{Symbol:"ZR",Decimal:2,Time:0,Name:"稻谷"},{Symbol:"ZO",Decimal:2,Time:0,Name:"燕麦"},{Symbol:"ZW",Decimal:2,Time:0,Name:"小麦"},{Symbol:"XW",Decimal:2,Time:1,Name:"迷你小麦"},{Symbol:"ZM",Decimal:1,Time:0,Name:"豆粕"},{Symbol:"EH",Decimal:3,Time:2},{Symbol:"YM",Decimal:0,Time:2,Name:"小型道指"},{Symbol:"ES",Decimal:2,Time:2,Name:"小型标普"},{Symbol:"NQ",Decimal:2,Time:2,Name:"小型纳指"},{Symbol:"TY",Decimal:4,Time:2,Name:"10年美国债"},{Symbol:"TU",Decimal:4,Time:2,Name:"2年美国债"},{Symbol:"FV",Decimal:4,Time:2,Name:"5年美国债"},{Symbol:"US",Decimal:4,Time:2,Name:"30年美国债"},{Symbol:"UL",Decimal:4,Time:2,Name:"超国债"}],this.MarketSuffix=".CBOT"},_a=new function(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.TIME_SPLIT=[{Name:"LME 9:00-3:00",Data:[{Start:900,End:2359},{Start:0,End:300}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:100,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1800,Text:"18:00"},{Value:300,Text:"3:00"}]}}],this.TIME_SPLIT=[{Name:"LME 8:00-2:00",Data:[{Start:800,End:2359},{Start:0,End:200}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}}],this.FUTURES_LIST=[{Symbol:"SN",Decimal:0,Time:0,Name:"LME锡"},{Symbol:"AH",Decimal:2,Time:0,Name:"LME铝"},{Symbol:"PB",Decimal:2,Time:0,Name:"LME铅"},{Symbol:"ZS",Decimal:2,Time:0,Name:"LME锌"},{Symbol:"CA",Decimal:2,Time:0,Name:"LME铜"},{Symbol:"NI",Decimal:0,Time:0,Name:"LME镍"}],this.MarketSuffix=".LME"},Ba=new function(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.TimeType=0,this.TIME_SPLIT=[{Name:"15:30-04:30 07:46-14:15",Data:[{Start:1530,End:2359},{Start:0,End:430},{Start:746,End:1415}],Coordinate:{Full:[{Value:1530,Text:"15:30"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:300,Text:"3:00"},{Value:430,Text:"4:30"},{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1415,Text:"14:15"}],Simple:[{Value:1530,Text:"15:30"},{Value:1900,Text:"19:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:430,Text:"4:30"},{Value:1100,Text:"11:00"},{Value:1415,Text:"14:15"}],Min:[{Value:1530,Text:"15:30"},{Value:100,Text:"1:00"},{Value:1415,Text:"14:15"}]}}],this.FUTURES_LIST=[{Symbol:"JRV",Decimal:0,Time:0,Name:"东京TSR20橡胶"},{Symbol:"JPL",Decimal:0,Time:0,Name:"东京铂金"},{Symbol:"JAU",Decimal:0,Time:0,Name:"东京黄金"},{Symbol:"JCO",Decimal:0,Time:0,Name:"中东原油"},{Symbol:"JRU",Decimal:1,Time:0,Name:"东京RSS3橡胶橡胶"},{Symbol:"JAG",Decimal:1,Time:0,Name:"日白银"},{Symbol:"JPA",Decimal:1,Time:0,Name:"日钯金"}],this.MarketSuffix=".TOCOM"},ka=new function(){this.newMethod=ba,this.newMethod(),delete this.newMethod,this.MarketSuffix=".IPE",this.TIME_SPLIT=[{Name:"8:00-6:00",Data:[{Start:800,End:2359},{Start:0,End:600}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"},{Value:600,Text:"6:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"},{Value:400,Text:"4:00"},{Value:600,Text:"6:00"}],Min:[{Value:800,Text:"8:00"},{Value:2e3,Text:"20:00"},{Value:600,Text:"6:00"}]}}],this.TIME_SPLIT2=[{Name:"09:00-07:00",Data:[{Start:900,End:2359},{Start:0,End:700}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"},{Value:700,Text:"7:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"},{Value:500,Text:"5:00"},{Value:700,Text:"7:00"}],Min:[{Value:900,Text:"9:00"},{Value:2100,Text:"21:00"},{Value:700,Text:"7:00"}]}}],this.FUTURES_LIST=[{Symbol:"RC",Decimal:2,Time:0,Name:"罗布斯塔咖啡"},{Symbol:"W",Decimal:2,Time:0,Name:"白糖"},{Symbol:"C",Decimal:2,Time:0,Name:"伦敦可可"},{Symbol:"R",Decimal:2,Time:0,Name:"长期英国国债"},{Symbol:"L",Decimal:2,Time:0,Name:"3个月英镑利率"},{Symbol:"T",Decimal:2,Time:0,Name:"WTI原油"},{Symbol:"G",Decimal:2,Time:0,Name:"低硫柴油"},{Symbol:"B",Decimal:2,Time:0,Name:"布伦特原油"}]};function Ga(t){var e=2;if(!t)return e;var a=t.toUpperCase();return"function"==typeof Ea.GetCustomDecimal?Ea.GetCustomDecimal(a):e=Ea.IsSHSZFund(a)?3:Ea.IsSHO(a)||Ea.IsSZO(a)?Ea.GetSHODecimal(a):Ea.IsChinaFutures(a)?Aa.GetDecimal(a):Ea.IsFHK(a)?Ea.GetFHKDecimal(a):Ea.IsFTSE(a)?Ea.GetFTSEDecimal(a):Ea.IsBIT(a)?Ea.GetBITDecimal(a):Ea.IsET(a)?Ea.GetETDecimal(a):Ea.IsForeignExchange(a)?Ea.GetForeignExchangeDecimal(a):Ea.IsNYMEX(a)?Oa.GetDecimal(a):Ea.IsCOMEX(a)?Na.GetDecimal(a):Ea.IsNYBOT(a)?Pa.GetDecimal(a):Ea.IsCBOT(a)?Ra.GetDecimal(a):Ea.IsLME(a)?_a.GetDecimal(a):Ea.IsTOCOM(a)?Ba.GetDecimal(a):Ea.IsIPE(a)?ka.GetDecimal(a):Ea.IsHK(a)?Ea.GetHKDecimal(a):Ea.IsTW(a)?Ea.GetTWDecimal(a):Ea.IsJP(a)?Ea.GetJPDecimal(a):Ea.IsHSX(a)?Ea.GetHSXDecimal(a):Ea.IsHNX(a)?Ea.GetHNXDecimal(a):Ea.IsUPCOM(a)?Ea.GetUPCOMDecimal(a):Ea.GetDefaultDecimal(a)}function Va(t){if("number"==typeof t){var e=new Date,a=e.getTime(),i=6e4*e.getTimezoneOffset();return new Date(a+i+36e5*t)}}if(!D)D={Chart:{Log:console.log,Warn:console.warn},Complier:{Log:console.log,Warn:console.warn}};var Ha={Domain:"https://opensource.zealink.com",CacheDomain:"https://opensourcecache.zealink.com",DrawIcon:{Family:"iconfont",Data:new C.default([[1,{Text:"",Color:"rgb(243,28,15)"}],[2,{Text:"",Color:"rgb(87,247,41)"}],[3,{Text:"",Color:"rgb(237,153,0)"}],[4,{Text:"",Color:"rgb(237,153,0)"}],[5,{Text:"",Color:"rgb(237,153,0)"}],[6,{Text:"",Color:"rgb(140,57,208)"}],[7,{Text:"",Color:"rgb(246,135,37)"}],[8,{Text:"",Color:"rgb(85,231,56)"}],[9,{Text:"",Color:"rgb(227,61,41)"}],[10,{Text:"",Color:"rgb(216,78,48)"}],[11,{Text:"",Color:"rgb(249,187,0)"}],[12,{Text:"",Color:"rgb(249,187,0)"}],[13,{Text:"",Color:"rgb(216,42,0)"}],[14,{Text:"",Color:"rgb(58,90,236)"}],[15,{Text:"",Color:"rgb(227,149,0)"}],[16,{Text:"",Color:"rgb(208,82,78)"}],[17,{Text:"",Color:"rgb(234,114,26)"}],[18,{Text:"",Color:"rgb(116,25,255)"}],[19,{Text:"",Color:"rgb(102,9,11)"}],[20,{Text:"",Color:"rgb(127,125,137)"}],[21,{Text:"",Color:"rgb(110,188,255)"}],[22,{Text:"",Color:"rgb(238,79,51)"}],[23,{Text:"",Color:"rgb(244,71,0)"}],[24,{Text:"",Color:"rgb(102,183,248)"}],[25,{Text:"",Color:"rgb(234,88,231)"}],[26,{Text:"",Color:"rgb(242,171,0)"}],[27,{Text:"",Color:"rgb(87,247,168)"}],[28,{Text:"",Color:"rgb(97,204,113)"}],[29,{Text:"",Color:"rgb(84,115,193)"}],[30,{Text:"",Color:"rgb(141,51,255)"}],[31,{Text:"",Color:"rgb(200,126,24)"}],[32,{Text:"",Color:"rgb(195,41,32)"}],[33,{Text:"",Color:"rgb(215,85,194)"}],[34,{Text:"",Color:"rgb(250,222,105)"}],[35,{Text:"",Color:"rgb(112,249,224)"}],[36,{Text:"",Color:"rgb(217,107,98)"}],[37,{Text:"",Color:"rgb(114,231,17)"}],[38,{Text:"",Color:"rgb(238,31,25)"}],[39,{Text:"",Color:"rgb(92,247,113)"}],[40,{Text:"",Color:"rgb(175,175,175)"}],[41,{Text:"",Color:"rgb(252,228,23)"}],[42,{Text:"",Color:"rgb(88,195,235)"}],[43,{Text:"",Color:"rgb(55,74,94)"}],[44,{Text:"",Color:"rgb(248,175,33)"}],[45,{Text:"",Color:"rgb(194,180,112)"}],[46,{Text:"",Color:"rgb(50,153,28)"}],[47,{Text:"",Color:"rgb(17,65,152)"}],[48,{Text:"",Color:"rgb(194,55,26)"}],[49,{Text:"",Color:"rgb(243,0,0)"}]])},CustomDrawIcon:{Data:new C.default},CustomFunction:{Data:new C.default},CustomVariant:{Data:new C.default},GetDrawIcon:function(t){if(Ha.CustomDrawIcon.Data.has(t)){var e=Ha.CustomDrawIcon.Data.get(t);return e.Symbol?{Symbol:e.Symbol,Color:e.Color,IconFont:!1,ID:t}:{Symbol:e.Text,Color:e.Color,Family:e.Family,IconFont:!0,ID:t}}if(Ha.DrawIcon.Data.has(t)){var a=Ha.DrawIcon.Data.get(t);return{Symbol:a.Text,Color:a.Color,Family:Ha.DrawIcon.Family,IconFont:!0,ID:t}}return null},GetDrawTextIcon:function(t){return new C.default([[1,{Symbol:"↑",Color:"rgb(238,44,44)"}],[2,{Symbol:"↓",Color:"rgb(0,139,69)"}],[3,{Symbol:"😧"}],[4,{Symbol:"😨"}],[5,{Symbol:"😁"}],[6,{Symbol:"😱"}],[7,{Symbol:"B",Color:"rgb(238,44,44)"}],[8,{Symbol:"S",Color:"rgb(0,139,69)"}],[9,{Symbol:"💰"}],[10,{Symbol:"📪"}],[11,{Symbol:"👆"}],[12,{Symbol:"👇"}],[13,{Symbol:"B",Color:"rgb(178,34,34)"}],[14,{Symbol:"S",Color:"rgb(0,139,69)"}],[36,{Symbol:"Χ",Color:"rgb(238,44,44)"}],[37,{Symbol:"X",Color:"rgb(0,139,69)"}],[38,{Symbol:"▲",Color:"rgb(238,44,44)"}],[39,{Symbol:"▼",Color:"rgb(0,139,69)"}],[40,{Symbol:"◉",Color:"rgb(238,44,44)"}],[41,{Symbol:"◈",Color:"rgb(238,44,44)"}],[42,{Symbol:"📌"}],[43,{Symbol:"💎"}],[44,{Symbol:"🥇"}],[45,{Symbol:"🥈"}],[46,{Symbol:"🥉"}],[47,{Symbol:"🏅"}]]).get(t)},IsCustomFunction:function(t){return!!Ha.CustomFunction.Data.has(t)},IsCustomVariant:function(t){return!!Ha.CustomVariant.Data.has(t)}},Ya={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"},Xa={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},Wa={FromCodePoint:function(t){return t<65536?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10))+String.fromCharCode(56320+(t-65536&1023))},IsWhiteSpace:function(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0},IsLineTerminator:function(t){return 10===t||13===t||8232===t||8233===t},IsIdentifierStart:function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||12304===t||12305===t||9650===t||9660===t||t>=128&&Xa.NonAsciiIdentifierStart.test(Wa.FromCodePoint(t))},IsIdentifierPart:function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||35===t||12304===t||12305===t||9650===t||9660===t||t>=128&&Xa.NonAsciiIdentifierPart.test(Wa.FromCodePoint(t))},IsDecimalDigit:function(t){return t>=48&&t<=57},IsHexDigit:function(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102},isOctalDigit:function(t){return t>=48&&t<=55}},Ua={};function Ka(){}function za(){this.Error=[],this.RecordError=function(t){this.Error.push(t)},this.ConstructError=function(t,e){var a=new Error(t);try{throw a}catch(t){s.default&&o.default&&((a=(0,s.default)(t)).Column=e)}return a},this.CreateError=function(t,e,a,i,r){var n="Line "+e+": "+i,o=this.ConstructError(n,a);return o.Index=t,o.LineNumber=e,o.Description=i,o.Word=r,o},this.ThrowError=function(t,e,a,i,r){throw this.CreateError(t,e,a,i,r)},this.ThrowDownloadJob=function(t,e,a,i,r){var n=this.CreateError(t,e,a,i);throw n.Job=r,n}}function Ja(t,e){this.Source=t,this.ErrorHandler=e,this.Length=t.length,this.Index=0,this.LineNumber=t.length>0?1:0,this.LineStart=0,this.CurlyStack=[],this.SaveState=function(){return{Index:this.Index,LineNumber:this.LineNumber,LineStart:this.LineStart}},this.RestoreState=function(t){this.Index=t.Index,this.LineNumber=t.LineNumber,this.LineStart=t.LineStart},this.IsEOF=function(){return this.Index>=this.Length},this.IsKeyword=function(t){return!1},this.CodePointAt=function(t){var e=this.Source.charCodeAt(t);if(e>=55296&&e<=56319){var a=this.Source.charCodeAt(t+1);if(a>=56320&&a<=57343)e=1024*(e-55296)+a-56320+65536}return e},this.Lex=function(){if(this.IsEOF())return{Type:2,Value:"",LineNumber:this.LineNumber,LineStart:this.LineStart,Start:this.Index,End:this.Index};var t=this.Source.charCodeAt(this.Index);return Wa.IsIdentifierStart(t)?this.ScanIdentifier():40===t||41===t||59===t?this.ScanPunctuator():39===t||34===t?this.ScanStringLiteral():46==t?Wa.IsDecimalDigit(this.Source.charCodeAt(this.Index+1))?this.ScanNumericLiteral():this.ScanPunctuator():Wa.IsDecimalDigit(t)?this.ScanNumericLiteral():t>=55296&&t<57343&&Wa.IsIdentifierStart(this.CodePointAt(this.Index))?this.ScanIdentifier():this.ScanPunctuator()},this.ScanIdentifier=function(){var t=void 0,e=this.Index,a=92===this.Source.charCodeAt(e)?this.GetComplexIdentifier():this.GetIdentifier();if(3!=(t=a.length?3:this.IsKeyword(a)?4:null==a?5:"true"==a||"false"==a?1:3)&&e+a.length!=this.Index){this.Index;throw this.Index=e,Ya.InvalidEscapedReservedWord}return"AND"!=a&&"OR"!=a||(t=7),{Type:t,Value:a,LineNumber:this.LineNumber,LineStart:this.LineStart,Start:e,End:this.Index}},this.GetIdentifier=function(){for(var t=this.Index++;!this.IsEOF();){var e=this.Source.charCodeAt(this.Index);if(92==e)return this.Index=t,this.GetComplexIdentifier();if(e>=55296&&e<57343)return this.Index=t,this.GetComplexIdentifier();if(!Wa.IsIdentifierPart(e))break;++this.Index}return this.Source.slice(t,this.Index)},this.ScanPunctuator=function(){var t=this.Index,e=this.Source[this.Index];switch(e){case"(":++this.Index;break;case")":case";":case",":case".":++this.Index;break;default:"AND"==(e=this.Source.substr(this.Index,3))?this.Index+=3:"&&"===(e=this.Source.substr(this.Index,2))||"||"===e||"=="===e||"!="===e||"<="===e||">="===e||"=>"===e||":="==e||"OR"==e||"<>"==e?this.Index+=2:(e=this.Source[this.Index],"<>=!+-*%&|^/:".indexOf(e)>=0&&++this.Index)}return this.Index==t&&this.ThrowUnecpectedToken(),{Type:7,Value:e,LineNumber:this.LineNumber,LineStart:this.LineStart,Start:t,End:this.Index}},this.ScanStringLiteral=function(){var t=this.Index,e=this.Source[this.Index];++this.Index;for(var a="";!this.IsEOF();){var i=this.Source[this.Index++];if(i==e){e="";break}if("\\"==i)throw"not complete";if(Wa.IsLineTerminator(i.charCodeAt(0)))break;a+=i}return""!=e&&(this.Index=t,this.ThrowUnecpectedToken()),{Type:8,Value:a,LineNumber:this.LineNumber,LineStart:this.LineStart,Start:t,End:this.Index}},this.ScanNumericLiteral=function(){var t=this.Index,e=this.Source[this.Index],a="";if("."!=e){if(a=this.Source[this.Index++],e=this.Source[this.Index],"0"==a&&("x"==e||"X"==e))return++this.Index,this.ScanHexLiteral(t);for(;Wa.IsDecimalDigit(this.Source.charCodeAt(this.Index));)a+=this.Source[this.Index++];e=this.Source[this.Index]}if("."==e){for(a+=this.Source[this.Index++];Wa.IsDecimalDigit(this.Source.charCodeAt(this.Index));)a+=this.Source[this.Index++];e=this.Source[this.Index]}if("e"==e||"E"==e)if(a+=this.Source[this.Index++],"+"!=(e=this.Source[this.Index])&&"-"!=e||(a+=this.Source[this.Index]),Wa.IsDecimalDigit(this.Source.charCodeAt(this.Index)))for(;Wa.IsDecimalDigit(this.Source.charCodeAt(this.Index));)a+=this.Source[this.Index++];else this.ThrowUnecpectedToken();return Wa.IsIdentifierStart(this.Source.charCodeAt(this.Index))&&this.ThrowUnecpectedToken(),{Type:6,Value:parseFloat(a),LineNumber:this.LineNumber,LineStart:this.LineStart,Start:t,End:this.Index}},this.ScanComments=function(){for(this.Index;!this.IsEOF();){var t=this.Source.charCodeAt(this.Index);if(Wa.IsWhiteSpace(t))++this.Index;else if(Wa.IsLineTerminator(t))++this.Index,13==t&&10==this.Source.charCodeAt(this.Index)&&++this.Index,++this.LineNumber,this.LineStart=this.Index,!0;else if(47==t){if(47!=(t=this.Source.charCodeAt(this.Index+1)))break;this.Index+=2;this.SkipSingleLineComment(2);!0}else{if(123!=t)break;this.Index+=1;this.SkipMultiLineComment()}}},this.SkipMultiLineComment=function(){for(var t=[];!this.IsEOF();){var e=this.Source.charCodeAt(this.Index);if(Wa.IsLineTerminator(e))++this.LineNumber,++this.Index,this.LineStart=this.Index;else{if(125==e)return this.Index+=1,t;++this.Index}}return t},this.SkipSingleLineComment=function(t){for(var e=[];!this.IsEOF();){var a=this.Source.charCodeAt(this.Index);if(++this.Index,Wa.IsLineTerminator(a))return 13===a&&10===this.Source.charCodeAt(this.Index)&&++this.Index,++this.LineNumber,this.LineStart=this.Index,e}return e},this.ThrowUnecpectedToken=function(t,e){return t||(t=Ya.UnexpectedTokenIllegal),this.ErrorHandler.ThrowError(this.Index,this.LineNumber,this.Index-this.LineStart+1,t,e)}}Ua[1]="Boolean",Ua[2]="<end>",Ua[3]="Identifier",Ua[4]="Keyword",Ua[5]="Null",Ua[6]="Numeric",Ua[7]="Punctuator",Ua[8]="String",Ua[9]="RegularExpression",Ua[10]="Template",Ka.GetPeriodInfo=function(t){var e=[{Name:"MIN1",Period:4,Order:1},{Name:"MIN5",Period:5,Order:2},{Name:"MIN15",Period:6,Order:3},{Name:"MIN30",Period:7,Order:4},{Name:"MIN60",Period:8,Order:5},{Name:"DAY",Period:0,Order:1e3},{Name:"MULTIDAY",Period:40002,Order:1002},{Name:"DAY2",Period:40002,Order:1002},{Name:"DAY3",Period:40003,Order:1003},{Name:"DAY4",Period:40004,Order:1004},{Name:"DAY5",Period:40005,Order:1005},{Name:"WEEK",Period:1,Order:1005},{Name:"DAY6",Period:40006,Order:1006},{Name:"DAY7",Period:40007,Order:1007},{Name:"DAY8",Period:40008,Order:1008},{Name:"DAY9",Period:40009,Order:1009},{Name:"DAY10",Period:40009,Order:1010},{Name:"WEEK2",Period:21,Order:1010},{Name:"DAY11",Period:40011,Order:1011},{Name:"DAY12",Period:40012,Order:1012},{Name:"DAY13",Period:40013,Order:1013},{Name:"DAY14",Period:40014,Order:1014},{Name:"MONTH",Period:2,Order:1030},{Name:"SEASON",Period:9,Order:1090},{Name:"HALFYEAR",Period:22,Order:1180},{Name:"YEAR",Period:3,Order:1365}];if(t.Name){for(var a in e)if(t.Name&&e[a].Name==t.Name)return e[a];return null}if(Te.IsNumber(t.PeriodID)){for(var a in e)if(e[a].Period==t.PeriodID)return e[a];return null}return null},Ka.GetConvertValueName=function(t){var e;return"COVER_C"==t?e="CLOSE":"COVER_O"==t?e="OPEN":"COVER_H"==t?e="HIGH":"COVER_L"==t?e="LOW":"COVER_A"==t?e="AMOUNT":"COVER_V"==t&&(e="VOL"),e};var ja={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};function qa(t){this.ErrorHandler=new za,this.Scanner=new Ja(t,this.ErrorHandler),this.Node=new function(t){this.IsNeedIndexData=!1,this.IsNeedLatestIndexData=!1,this.IsNeedSymbolData=!1,this.IsNeedMarginData=new c.default,this.IsNeedNewsAnalysisData=new c.default,this.NeedBlockIncreaseData=[],this.IsNeedSymbolExData=new c.default,this.NeedHK2SHSZData=[],this.IsNeedSectionFinance=new C.default,this.FunctionData=[],this.Dynainfo=[],this.IsAPIData=[],this.ExecuteIndex=[],this.OtherSymbolData=[],this.PeriodSymbolData=[],this.ErrorHandler=t,this.GetDataJobList=function(){var t=[];this.IsNeedSymbolData&&t.push({ID:ai.JOB_DOWNLOAD_SYMBOL_DATA}),this.IsNeedIndexData&&t.push({ID:ai.JOB_DOWNLOAD_INDEX_DATA}),this.IsNeedLatestIndexData&&t.push({ID:ai.JOB_DOWNLOAD_LATEST_INDEX_DATA});for(var e=0;e<this.Dynainfo.length;++e){var a=this.Dynainfo[e];t.push(a)}for(var e in this.NeedBlockIncreaseData)t.push(this.NeedBlockIncreaseData[e]);var i=!0,r=!1,n=void 0;try{for(var o,s=(0,f.default)(this.IsNeedMarginData);!(i=(o=s.next()).done);i=!0){var h=o.value;t.push({ID:h})}}catch(t){r=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw n}}for(var e in this.NeedHK2SHSZData)t.push(this.NeedHK2SHSZData[e]);var l=!0,u=!1,c=void 0;try{for(var d,C=(0,f.default)(this.IsNeedNewsAnalysisData);!(l=(d=C.next()).done);l=!0)h=d.value,t.push({ID:h})}catch(t){u=!0,c=t}finally{try{!l&&C.return&&C.return()}finally{if(u)throw c}}var p=!0,m=!1,D=void 0;try{for(var v,g=(0,f.default)(this.IsNeedSymbolExData);!(p=(v=g.next()).done);p=!0)h=v.value,t.push({ID:h})}catch(t){m=!0,D=t}finally{try{!p&&g.return&&g.return()}finally{if(m)throw D}}var S=!0,T=!1,I=void 0;try{for(var y,x=(0,f.default)(this.IsNeedSectionFinance);!(S=(y=x.next()).done);S=!0)a=y.value,t.push({ID:ai.JOB_DOWNLOAD_SECTION_SF,SF:a})}catch(t){T=!0,I=t}finally{try{!S&&x.return&&x.return()}finally{if(T)throw I}}for(var e in this.IsAPIData)a=this.IsAPIData[e],t.push(a);for(var e in this.ExecuteIndex)a=this.ExecuteIndex[e],t.push(a);for(var e in this.OtherSymbolData)a=this.OtherSymbolData[e],t.push(a);for(var e in this.PeriodSymbolData)a=this.PeriodSymbolData[e],t.push(a);for(var e in this.FunctionData)a=this.FunctionData[e],t.push(a);return t},this.VerifySymbolVariable=function(t,e){if(new c.default(["INDEXA","INDEXC","INDEXH","INDEXL","INDEXO","INDEXV","INDEXDEC","INDEXADV"]).has(t))this.IsNeedIndexData=!0;else if(new c.default(["CLOSE","C","VOL","V","OPEN","O","HIGH","H","LOW","L","AMOUNT","AMO","VOLINSTK"]).has(t))this.IsNeedSymbolData=!0;else{if("VOLR"===t&&(this.IsNeedSymbolExData.has(ai.JOB_DOWNLOAD_VOLR_DATA)||this.IsNeedSymbolExData.add(ai.JOB_DOWNLOAD_VOLR_DATA)),new c.default(["CAPITAL","TOTALCAPITAL","EXCHANGE","HYBLOCK","DYBLOCK","GNBLOCK","FGBLOCK","ZSBLOCK","ZHBLOCK","ZDBLOCK","HYZSCODE","GNBLOCKNUM","FGBLOCKNUM","ZSBLOCKNUM","ZHBLOCKNUM","ZDBLOCKNUM","HYSYL","HYSJL"]).has(t)){var a={ID:ai.JOB_DOWNLOAD_VARIANT,VariantName:t};return e&&(a.Token={Index:e.Start,Line:e.LineNumber}),void this.FunctionData.push(a)}if("FROMOPEN"!=t){if("ADVANCE"==t||"DECLINE"==t)return a={ID:ai.JOB_DOWNLOAD_INDEX_INCREASE_DATA,IsSelfSymbol:!0,FunctionName:t},e&&(a.Token={Index:e.Start,Line:e.LineNumber}),void this.NeedBlockIncreaseData.push(a);if(t.indexOf("#")>0){var i=t.split("#");if(2!=i.length){var r=t+", 跨周期语法错误, 变量名#周期";this.ThrowUnexpectedToken(e,r)}else["C","CLOSE","O","OPEN","H","HIGH","L","LOW","AMOUNT","AMO","VOL","V","VOLINSTK"].indexOf(i[0])<0&&(r=t+", 跨周期语法错误, 数据只支持'OPEN,HIGH,LOW,CLOSE,VOL,AMOUNT,VOLINSTK'",this.ThrowUnexpectedToken(e,r)),["MIN1","MIN5","MIN15","MIN30","MIN60","MIN120","MIN240","DAY","WEEK","MONTH","SEASON","YEAR","HALFYEAR","WEEK2","MULTIDAY","DAY2","DAY3","DAY4","DAY5","DAY6","DAY7","DAY8","DAY9","DAY10","DAY11","DAY12","DAY13","DAY14","DAY15"].indexOf(i[1])<0&&(r=t+", 跨周期语法错误， 周期只支持'MIN1,MIN5,MIN15,MIN30,MIN60,DAY,WEEK,MONTH,SEASON,YEAR'",this.ThrowUnexpectedToken(e,r)),a={ID:ai.JOB_DOWNLOAD_SYMBOL_PERIOD_DATA,VarName:t,ValueName:i[0],PeriodName:i[1]},e&&(a.Token={Index:e.Start,Line:e.LineNumber}),this.PeriodSymbolData.push(a)}else if(Ha.IsCustomVariant(t))return a={VariantName:t,ID:ai.JOB_CUSTOM_VARIANT_DATA},e&&(a.Token={Index:e.Start,Line:e.LineNumber}),void this.FunctionData.push(a)}else this.IsNeedLatestIndexData=!0}},this.VerifySymbolLiteral=function(t,e){if(Te.IsString(t)&&t.indexOf("$")>0){if(2!=t.split("$").length)return;var a={Literal:t,ID:ai.JOB_DOWNLOAD_OTHER_SYMBOL_DATA};e&&(a.Token={Index:e.Start,Line:e.LineNumber}),this.OtherSymbolData.push(a)}},this.VerifySymbolFunction=function(t,e,a){if(Ha.IsCustomFunction(t.Name)){var i={FunctionName:t.Name,ID:ai.JOB_CUSTOM_FUNCTION_DATA,Args:e};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("DYNAINFO"!=t.Name){if("FINANCE"==t.Name)return i={ID:ai.JOB_DOWNLOAD_FINANCE,Args:e,FunctionName:t.Name},a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i);if("FINVALUE"==t.Name)return i={ID:ai.JOB_DOWNLOAD_FINVALUE,Args:e,FunctionName:t.Name},a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i);if("FINONE"==t.Name)return i={ID:ai.JOB_DOWNLOAD_FINONE,Args:e,FunctionName:t.Name},a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i);if("GPJYVALUE"==t.Name)return i={ID:ai.JOB_DOWNLOAD_GPJYVALUE,Args:e,FunctionName:t.Name},a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i);if("SCJYVALUE"==t.Name)return i={ID:ai.JOB_DOWNLOAD_SCJYVALUE,Args:e,FunctionName:t.Name},a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i);if("MARGIN"!==t.Name)if("NEWS"!==t.Name){if("HK2SHSZ"===t.Name)return i={ID:ai.JOB_DOWNLOAD_HK_TO_SHSZ,Args:e,FunctionName:t.Name},a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.NeedHK2SHSZData.push(i);if("COST"==t.Name||"WINNER"==t.Name||"PPART"==t.Name||"COSTEX"==t.Name||"LWINNER"==t.Name||"PWINNER"==t.Name)return i={ID:ai.JOB_DOWNLOAD_FINANCE,Args:[7],FunctionName:"FINANCE",FunctionName2:t.Name},a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i);if("INBLOCK"==t.Name)return i={ID:ai.JOB_DOWNLOAD_VARIANT,VariantName:"INBLOCK"},a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i);if("BETA"!==t.Name){if("UPCOUNT"==t.Name||"DOWNCOUNT"==t.Name)return i={ID:ai.JOB_DOWNLOAD_INDEX_INCREASE_DATA,Args:e,FunctionName:t.Name},a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.NeedBlockIncreaseData.push(i);if("STKINDI"==t.Name||"CALCSTOCKINDEX"==t.Name)return i={ID:ai.JOB_EXECUTE_INDEX,Args:e,FunctionName:t.Name},a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.ExecuteIndex.push(i);if("COVER_C"==t.Name||"COVER_O"==t.Name||"COVER_H"==t.Name||"COVER_L"==t.Name||"COVER_A"==t.Name||"COVER_V"==t.Name){var r=e[0].Value;if(["MIN1","MIN5","MIN15","MIN30","MIN60","DAY","WEEK","MONTH","SEASON","YEAR"].indexOf(r)<0){var n=t.Name+", 跨周期函数错误， 周期只支持'MIN1,MIN5,MIN15,MIN30,MIN60,DAY,WEEK,MONTH,SEASON,YEAR'";this.ThrowUnexpectedToken(a,n)}var o=Ka.GetConvertValueName(t.Name);return i={ID:ai.JOB_DOWNLOAD_SYMBOL_PERIOD_DATA,FunctionName:t.Name,ValueName:o,PeriodName:r},a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.PeriodSymbolData.push(i)}if("SF"!=t.Name){if("LOADAPIDATA"==t.Name)return i={Name:t.Name,ID:ai.JOB_DOWNLOAD_CUSTOM_API_DATA,Args:e},a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.IsAPIData.push(i);if(new c.default(["CLOSE","C","VOL","V","OPEN","O","HIGH","H","LOW","L","AMOUNT","AMO","VOLINSTK"]).has(t.Name))return i={Name:t.Name,ID:ai.JOB_DOWNLOAD_OTHER_SYMBOL_DATA,Args:e},a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.OtherSymbolData.push(i)}else{var s=ai.GetSectionReportPeriod(e[0].Value,e[1].Value);if(!s)return;var h=ai.GetSectionFinanceID(e[2].Value);if(!h)return;var l=s.Year+"-"+s.Quarter;if(this.IsNeedSectionFinance.has(l))(u=this.IsNeedSectionFinance.get(l)).Fields.has(h)||u.Fields.add(h);else{var u={Period:s,Fields:new c.default([h])};this.IsNeedSectionFinance.set(l,u)}}}else this.IsNeedIndexData=!0}else{var f=ai.GetNewsAnalysisID(e[0].Value);f&&!this.IsNeedNewsAnalysisData.has(f)&&this.IsNeedNewsAnalysisData.add(f)}else{var d=ai.GetMarginJobID(e[0].Value);d&&!this.IsNeedMarginData.has(d)&&this.IsNeedMarginData.add(d)}}else{var i={ID:ai.JOB_DOWNLOAD_SYMBOL_LATEST_DATA,Args:e,FunctionName:t.Name};this.Dynainfo.push(i)}},this.VerifyMemberVariable=function(t,e,a){var i={ID:ai.JOB_EXECUTE_INDEX,Member:{Object:t,Property:e}};a&&(i.Token={Index:a.Start,Line:a.LineNumber}),this.ExecuteIndex.push(i)},this.ExpressionStatement=function(t){return{Type:ja.ExpressionStatement,Expression:t}},this.Script=function(t){return{Type:ja.Program,Body:t,SourceType:"通达信脚本"}},this.SequenceExpression=function(t){return{Type:ja.SequenceExpression,Expression:t}},this.BinaryExpression=function(t,e,a){return{Type:"||"===t||"&&"===t||"AND"==t||"OR"==t?ja.LogicalExpression:ja.BinaryExpression,Operator:t,Left:e,Right:a}},this.Literal=function(t,e,a){return this.VerifySymbolLiteral(t,a),{Type:ja.Literal,Value:t,Raw:e}},this.Identifier=function(t,e){return this.VerifySymbolVariable(t,e),{Type:ja.Identifier,Name:t}},this.MemberIdentifier=function(t,e){return{Type:ja.Identifier,Name:t}},this.AssignmentExpression=function(t,e,a){return{Type:ja.AssignmentExpression,Operator:t,Left:e,Right:a}},this.UnaryExpression=function(t,e){return{Type:ja.UnaryExpression,Operator:t,Argument:e,Prefix:!0}},this.EmptyStatement=function(){return{Type:ja.EmptyStatement}},this.CallExpression=function(t,e,a){return this.VerifySymbolFunction(t,e,a),{Type:ja.CallExpression,Callee:t,Arguments:e}},this.StaticMemberExpression=function(t,e,a){return this.VerifyMemberVariable(t,e,a),{Type:ja.MemberExpression,Computed:!1,Object:t,Property:e}},this.Directive=function(t,e){return{Type:ja.ExpressionStatement,Expression:t,Directive:e}},this.ThrowUnexpectedToken=function(t,e){throw this.UnexpectedTokenError(t,e)},this.UnexpectedTokenError=function(t,e){var a=e||Ya.UnexpectedToken,i="ILLEGAL";if(t&&(i=t.Value),a=a.replace("%0",i),t&&"number"==typeof t.LineNumber){var r=t.Start,n=t.LineNumber;return this.ErrorHandler.CreateError(r,n,-1,a)}}}(this.ErrorHandler),this.LookAhead={Type:2,Value:"",LineNumber:this.Scanner.LineNumber,LineStart:0,Start:0,End:0},this.HasLineTerminator=!1,this.Context={IsModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,FirstCoverInitializedNameError:null,IsAssignmentTarget:!1,IsBindingElement:!1,InFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},Strict:!1},this.PeratorPrecedence={")":0,";":0,",":0,"]":0,"||":1,OR:1,"&&":2,AND:2,"|":3,"^":4,"&":5,"==":6,"=":6,"!=":6,"<>":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.StartMarker={Index:0,Line:this.Scanner.LineNumber,Column:0},this.LastMarker={Index:0,Line:this.Scanner.LineNumber,Column:0},this.Initialize=function(){this.NextToken(),this.LastMarker={Index:this.Scanner.Index,Line:this.Scanner.LineNumber,Column:this.Scanner.Index-this.Scanner.LineStart}},this.CreateNode=function(){return{Index:this.StartMarker.Index,Line:this.StartMarker.Line,Column:this.StartMarker.Column}},this.StartNode=function(t,e){void 0==e&&(e=0);var a=t.Start-t.LineStart,i=t.LineNumber;return a<0&&(a+=e,i--),{Index:t.Start,Line:i,Column:a}},this.Match=function(t){return 7==this.LookAhead.Type&&this.LookAhead.Value==t},this.Expect=function(t){var e=this.NextToken();7==e.Type&&e.Value==t||this.ThrowUnexpectedToken(e)},this.MatchAssign=function(){if(7!=this.LookAhead.Type)return!1;var t=this.LookAhead.Value;return":"==t||":="==t},this.GetTokenRaw=function(t){return this.Scanner.Source.slice(t.Start,t.End)},this.NextToken=function(){var t=this.LookAhead;this.LastMarker.Index=this.Scanner.Index,this.LastMarker.Line=this.Scanner.LineNumber,this.LastMarker.Column=this.Scanner.Index-this.Scanner.LineStart,this.CollectComments(),this.Scanner.Index!==this.StartMarker.Index&&(this.StartMarker.Index=this.Scanner.Index,this.StartMarker.Line=this.Scanner.LineNumber,this.StartMarker.Column=this.Scanner.Index-this.Scanner.LineStart);var e=this.Scanner.Lex();return this.HasLineTerminator=t.LineNumber!=e.LineNumber,e&&this.Context.Strict&&e.Type,this.LookAhead=e,t},this.CollectComments=function(){this.Scanner.ScanComments()},this.ParseScript=function(){for(var t=this.CreateNode(),e=this.ParseDirectivePrologues();2!=this.LookAhead.Type;)e.push(this.ParseStatementListItem());return this.Finalize(t,this.Node.Script(e))},this.ParseDirective=function(){var t=this.LookAhead,e=this.CreateNode(),a=this.ParseExpression(),i=a.Type===ja.Literal?this.GetTokenRaw(t).slice(1,-1):null;return this.ConsumeSemicolon(),this.Finalize(e,i?this.Node.Directive(a,i):this.Node.ExpressionStatement(a))},this.ParseDirectivePrologues=function(){for(var t=[];;){if(8!=this.LookAhead.Type)break;var e=this.ParseDirective();t.push(e)}return t},this.ParseStatementListItem=function(){var t=void 0;return this.Context.IsAssignmentTarget=!0,this.Context.IsBindingElement=!0,4==this.LookAhead.Type||(t=this.ParseStatement()),t},this.ParseStatement=function(){var t=void 0;switch(this.LookAhead.Type){case 1:case 5:case 6:case 8:case 10:case 9:t=this.ParseExpressionStatement();break;case 7:var e=this.LookAhead.Value;t="("===e?this.ParseExpressionStatement():";"===e?this.ParseEmptyStatement():this.ParseExpressionStatement();break;case 3:t=this.ParseLabelledStatement();break;case 4:break;default:t="error"}return t},this.ParseEmptyStatement=function(){var t=this.CreateNode();return this.Expect(";"),this.Finalize(t,this.Node.EmptyStatement())},this.ParseLabelledStatement=function(){var t=this.CreateNode(),e=this.ParseExpression();this.ConsumeSemicolon();var a=new this.Node.ExpressionStatement(e);return this.Finalize(t,a)},this.ParseExpression=function(){var t=this.LookAhead,e=this.IsolateCoverGrammar(this.ParseAssignmentExpression);if(this.Match(",")){var a=[];for(a.push(e);2!=this.LookAhead.Type&&this.Match(",");)this.NextToken(),a.push(this.IsolateCoverGrammar(this.ParseAssignmentExpression));e=this.Finalize(this.StartNode(t),this.Node.SequenceExpression(a))}return e},this.ParseAssignmentExpression=function(){var t=void 0,e=this.LookAhead;if(t=this.ParseConditionalExpression(),this.MatchAssign()){if(!this.Context.IsAssignmentTarget){var a=t.Marker;this.ThrowUnexpectedError(a.Index,a.Line,a.Column,Ya.InvalidLHSInAssignment)}this.Match("=")||this.Match(":")?this.ReinterpretExpressionAsPattern(t):(this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1);var i=this.NextToken().Value,r=this.IsolateCoverGrammar(this.ParseAssignmentExpression);t=this.Finalize(this.StartNode(e),this.Node.AssignmentExpression(i,t,r)),this.Context.FirstCoverInitializedNameError=null}return t},this.ParseConditionalExpression=function(){this.LookAhead;return this.InheritCoverGrammar(this.ParseBinaryExpression)},this.ParseBinaryExpression=function(){var t=this.LookAhead,e=this.InheritCoverGrammar(this.ParseExponentiationExpression),a=this.LookAhead,i=this.BinaryPrecedence(a);if(i>0){this.NextToken(),this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1;for(var r=[t,this.LookAhead],n=e,o=this.IsolateCoverGrammar(this.ParseExponentiationExpression),s=[n,a.Value,o],h=[i];!((i=this.BinaryPrecedence(this.LookAhead))<=0);){for(;s.length>2&&i<=h[h.length-1];){o=s.pop();var l=s.pop();h.pop(),n=s.pop(),r.pop();var u=this.StartNode(r[r.length-1]);s.push(this.Finalize(u,this.Node.BinaryExpression(l,n,o)))}s.push(this.NextToken().Value),h.push(i),r.push(this.LookAhead),s.push(this.IsolateCoverGrammar(this.ParseExponentiationExpression))}var c=s.length-1;e=s[c];for(var f=r.pop();c>1;){var d=r.pop(),C=f&&f.LineStart,p=this.StartNode(d,C),m=s[c-1];e=this.Finalize(p,this.Node.BinaryExpression(m,s[c-2],e)),c-=2,f=d}}return e},this.ParseExponentiationExpression=function(){this.LookAhead;return this.InheritCoverGrammar(this.ParseUnaryExpression)},this.ParseUnaryExpression=function(){var t=void 0;if(this.Match("+")||this.Match("-")){var e=this.StartNode(this.LookAhead),a=this.NextToken();t=this.InheritCoverGrammar(this.ParseUnaryExpression),t=this.Finalize(e,this.Node.UnaryExpression(a.Value,t)),this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1}else t=this.ParseUpdateExpression();return t},this.ParseUpdateExpression=function(){this.LookAhead;return this.InheritCoverGrammar(this.ParseLeftHandSideExpressionAllowCall)},this.ParseLeftHandSideExpressionAllowCall=function(){var t=this.LookAhead,e=void 0;for(e=this.InheritCoverGrammar(this.ParsePrimaryExpression);;)if(this.Match(".")){this.Context.IsBindingElement=!1,this.Context.IsAssignmentTarget=!0,this.Expect(".");var a=this.ParseMemberIdentifierName();e=this.Finalize(this.StartNode(t),this.Node.StaticMemberExpression(e,a,t))}else{if(!this.Match("("))break;this.Context.IsBindingElement=!1,this.Context.IsAssignmentTarget=!1;var i=this.ParseArguments();e=this.Finalize(this.StartNode(t),this.Node.CallExpression(e,i,t))}return e},this.IsIdentifierName=function(t){return 3===t.Type||4===t.Type||1===t.Type||5===t.Type},this.ParseIdentifierName=function(){var t=this.CreateNode(),e=this.NextToken();return this.IsIdentifierName(e)||this.ThrowUnexpectedToken(e),this.Finalize(t,this.Node.Identifier(e.Value,e))},this.ParseMemberIdentifierName=function(){var t=this.CreateNode(),e=this.NextToken();return this.IsIdentifierName(e)||this.ThrowUnexpectedToken(e),this.Finalize(t,this.Node.MemberIdentifier(e.Value,e))},this.ParseArguments=function(){this.Expect("(");var t=[];if(!this.Match(")"))for(;;){var e=this.IsolateCoverGrammar(this.ParseAssignmentExpression);if(t.push(e),this.Match(")"))break;if(this.ExpectCommaSeparator(),this.Match(")"))break}return this.Expect(")"),t},this.ExpectCommaSeparator=function(){this.Expect(",")},this.ParsePrimaryExpression=function(){var t,e,a=this.CreateNode(),i=void 0;switch(this.LookAhead.Type){case 3:t=this.NextToken(),i=this.Finalize(a,this.Node.Identifier(t.Value,t));break;case 6:case 8:this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1,t=this.NextToken(),e=this.GetTokenRaw(t),i=this.Finalize(a,this.Node.Literal(t.Value,e,t));break;case 7:switch(this.LookAhead.Value){case"(":this.Context.IsBindingElement=!1,i=this.InheritCoverGrammar(this.ParseGroupExpression);break;default:i=this.ThrowUnexpectedToken(this.NextToken())}break;default:i=this.ThrowUnexpectedToken(this.NextToken())}return i},this.ParseGroupExpression=function(){var t=void 0;if(this.Expect("("),this.Match(")"))this.NextToken();else{this.LookAhead;if(this.Context.IsBindingElement=!0,t=this.InheritCoverGrammar(this.ParseAssignmentExpression),this.Match(",")){for(this.Context.IsAssignmentTarget=!1,[].push(t);2!=this.LookAhead.Type&&this.Match(",");)this.NextToken(),this.Match(")")}this.Expect(")"),this.Context.IsBindingElement=!1}return t},this.ParseExpressionStatement=function(){var t=this.CreateNode(),e=this.ParseExpression();return this.ConsumeSemicolon(),this.Finalize(t,this.Node.ExpressionStatement(e))},this.ConsumeSemicolon=function(){this.Match(";")?this.NextToken():this.HasLineTerminator||(this.LastMarker.Index=this.StartMarker.Index,this.LastMarker.Line=this.StartMarker.Line,this.LastMarker.Column=this.StartMarker.Column)},this.ReinterpretExpressionAsPattern=function(t){switch(t.Type){case ja.Identifier:case ja.MemberExpression:case ja.AssignmentExpression:}},this.Finalize=function(t,e){return e.Marker={Line:t.Line,Column:t.Column,Index:t.Index},e},this.BinaryPrecedence=function(t){var e=t.Value;return 7===t.Type&&this.PeratorPrecedence[e]||0},this.IsolateCoverGrammar=function(t){var e=this.Context.IsBindingElement,a=this.Context.IsAssignmentTarget,i=this.Context.FirstCoverInitializedNameError;this.Context.IsBindingElement=!0,this.Context.IsAssignmentTarget=!0,this.Context.FirstCoverInitializedNameError=null;var r=t.call(this);return this.Context.FirstCoverInitializedNameError,this.Context.IsBindingElement=e,this.Context.IsAssignmentTarget=a,this.Context.FirstCoverInitializedNameError=i,r},this.InheritCoverGrammar=function(t){var e=this.Context.IsBindingElement,a=this.Context.IsAssignmentTarget,i=this.Context.FirstCoverInitializedNameError;this.Context.IsBindingElement=!0,this.Context.IsAssignmentTarget=!0,this.Context.FirstCoverInitializedNameError=null;var r=t.call(this);return this.Context.IsBindingElement=this.Context.IsBindingElement&&e,this.Context.IsAssignmentTarget=this.Context.IsAssignmentTarget&&a,this.Context.FirstCoverInitializedNameError=i||this.Context.FirstCoverInitializedNameError,r},this.ThrowUnexpectedToken=function(t,e){throw this.UnexpectedTokenError(t,e)},this.ThrowUnexpectedError=function(t,e,a,i){var r=i||"执行异常";return this.ErrorHandler.ThrowError(t,e,a,r)},this.UnexpectedTokenError=function(t,e){var a=e||Ya.UnexpectedToken,i="ILLEGAL";if(t&&(i=t.Value),a=a.replace("%0",i),t&&"number"==typeof t.LineNumber){var r=t.Start,n=t.LineNumber,o=this.LastMarker.Index-this.LastMarker.Column,s=t.Start-o+1;return this.ErrorHandler.CreateError(r,n,s,a)}var h=this.LastMarker.Index,l=this.LastMarker.Line,u=this.LastMarker.Column+1;return this.ErrorHandler.CreateError(h,l,u,a)}}function Za(t,e){this.ErrorHandler=t,this.SymbolData=e,this.Add=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t+e;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&this.IsNumber(t[o])&&this.IsNumber(e[o])&&(r[o]=t[o]+e[o]);return r}var s=void 0,h=void 0;for(var l in a?(s=t,h=e):(s=e,h=t),h)r[l]=null,this.IsNumber(h[l])&&this.IsNumber(s)&&(r[l]=s+h[l]);return r},this.Subtract=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t-e;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&this.IsNumber(t[o])&&this.IsNumber(e[o])&&(r[o]=t[o]-e[o]);return r}if(a)for(var s in e)r[s]=null,this.IsNumber(t)&&this.IsNumber(e[s])&&(r[s]=t-e[s]);else for(var h in t)r[h]=null,this.IsNumber(t[h])&&this.IsNumber(e)&&(r[h]=t[h]-e);return r},this.Multiply=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t*e;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&this.IsNumber(t[o])&&this.IsNumber(e[o])&&(r[o]=t[o]*e[o]);return r}var s=void 0,h=void 0;for(var l in a?(s=t,h=e):(s=e,h=t),h)r[l]=null,this.IsNumber(h[l])&&this.IsNumber(s)&&(r[l]=s*h[l]);return r},this.Divide=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return 0==e?null:t/e;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&this.IsNumber(t[o])&&this.IsDivideNumber(e[o])&&(r[o]=t[o]/e[o]);return r}if(a)for(var s in e)r[s]=null,this.IsNumber(t)&&this.IsDivideNumber(e[s])&&(r[s]=t/e[s]);else for(var h in t)r[h]=null,this.IsNumber(t[h])&&this.IsDivideNumber(e)&&(r[h]=t[h]/e);return r},this.GT=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t>e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&(isNaN(t[o])||isNaN(e[o])||(r[o]=t[o]>e[o]?1:0));return r}if(a)for(var s in e)r[s]=null,isNaN(t)||isNaN(e[s])||(r[s]=t>e[s]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]>e?1:0);return r},this.GTE=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t>=e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&(isNaN(t[o])||isNaN(e[o])||(r[o]=t[o]>=e[o]?1:0));return r}if(a)for(var s in e)r[s]=null,isNaN(t)||isNaN(e[s])||(r[s]=t>=e[s]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]>=e?1:0);return r},this.LT=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t<e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&(isNaN(t[o])||isNaN(e[o])||(r[o]=t[o]<e[o]?1:0));return r}if(a)for(var s in e)r[s]=null,isNaN(t)||isNaN(e[s])||(r[s]=t<e[s]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]<e?1:0);return r},this.LTE=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t>=e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&(isNaN(t[o])||isNaN(e[o])||(r[o]=t[o]<=e[o]?1:0));return r}if(a)for(var s in e)r[s]=null,isNaN(t)||isNaN(e[s])||(r[s]=t<=e[s]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]<=e?1:0);return r},this.EQ=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t==e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&(isNaN(t[o])||isNaN(e[o])||(r[o]=t[o]==e[o]?1:0));return r}if(a)for(var s in e)r[s]=null,isNaN(t)||isNaN(e[s])||(r[s]=t==e[s]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]==e?1:0);return r},this.NEQ=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t!=e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&(isNaN(t[o])||isNaN(e[o])||(r[o]=t[o]!=e[o]?1:0));return r}if(a)for(var s in e)r[s]=null,isNaN(t)||isNaN(e[s])||(r[s]=t!=e[s]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]!=e?1:0);return r},this.And=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t&&e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&(isNaN(t[o])||isNaN(e[o])||(r[o]=t[o]&&e[o]?1:0));return r}if(a)for(var s in e)r[s]=null,isNaN(t)||isNaN(e[s])||(r[s]=t&&e[s]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]&&e?1:0);return r},this.Or=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t||e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&(isNaN(t[o])||isNaN(e[o])||(r[o]=t[o]||e[o]?1:0));return r}if(a)for(var s in e)r[s]=null,isNaN(t)||isNaN(e[s])||(r[s]=t||e[s]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]||e?1:0);return r},this.IF=function(t,e,a){var i=this.IsNumber(t),r=this.IsNumber(e),n=this.IsNumber(a),o=Array.isArray(e),s=Array.isArray(a);if(i)return t?e:a;var h=[];for(var l in t)t[l]?h[l]=r?e:o?e[l]:null:h[l]=n?a:s?a[l]:null;return h},this.IFN=function(t,e,a){return this.IF(t,a,e)},this.REF=function(t,e){var a=[];if("number"==typeof e){if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(0,t.length-e);for(var i=t[0],r=0;r<e;++r)a.unshift(i)}else for(var n=0;n<t.length;++n)if(a[n]=null,!(n>=e.length)){var o=e[n];a[n]=o>=0&&o<=n?t[n-o]:n?a[n-1]:t[n]}return a},this.REFV=function(t,e){var a=[];if("number"==typeof e){if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(0,t.length-e);for(var i=0;i<e;++i)a.unshift(null)}else for(var r=0;r<t.length;++r)if(a[r]=null,!(r>=e.length)){var n=e[r];n>=0&&n<=r&&(a[r]=t[r-n])}return a},this.REFX=function(t,e){var a=[];if("number"==typeof e){if(t.length<=0)return a;if(e>=t.length)return t.length>0?t[t.length-1]:a;a=t.slice(e,t.length);for(var i=t[t.length-1],r=0;r<e;++r)a.push(i)}else for(var n=t.length,o=0;o<t.length;++o)if(a[o]=null,!(o>=e.length)){var s=e[o];a[o]=s>=0&&s+o<n?t[o+s]:o?a[o-1]:t[o]}return a},this.REFXV=function(t,e){var a=[];if("number"==typeof e){if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(e,t.length);for(var i=0;i<e;++i)a.push(null)}else for(var r=t.length,n=0;n<t.length;++n)if(a[n]=null,!(n>=e.length)){var o=e[n];o>=0&&o+n<r&&(a[n]=t[n+o])}return a},this.MAX=function(t,e){if(0==t.length&&this.ThrowUnexpectedNode(e,"MAX() Error: 参数个数不能为0"),1==t.length)return t[0];var a=[],i=[];for(var r in t){var n=t[r];Te.IsNumber(n)?i.push(n):Array.isArray(n)&&a.push(n)}var o=null;if(i.length>0){o=i[0];for(r=1;r<i.length;++r)o=Math.max(o,i[r])}var s=null;if(a.length>0){s=a[0].slice(0);for(r=1;r<a.length;++r){var h=a[r];for(var l in h){var u=s[l];n=h[l];Te.IsNumber(u)&&(Te.IsNumber(n)?s[l]=Math.max(u,n):s[l]=null)}}}if(null==s&&null!=o)return o;if(s&&null==o)return s;for(var r in s)Te.IsNumber(s[r])&&(s[r]=Math.max(s[r],o));return s},this.MIN=function(t,e){if(0==t.length&&this.ThrowUnexpectedNode(e,"MIN() Error: 参数个数不能为0"),1==t.length)return t[0];var a=[],i=[];for(var r in t){var n=t[r];Te.IsNumber(n)?i.push(n):Array.isArray(n)&&a.push(n)}var o=null;if(i.length>0){o=i[0];for(r=1;r<i.length;++r)o=Math.min(o,i[r])}var s=null;if(a.length>0){s=a[0].slice(0);for(r=1;r<a.length;++r){var h=a[r];for(var l in h){var u=s[l];n=h[l];Te.IsNumber(u)&&(Te.IsNumber(n)?s[l]=Math.min(u,n):s[l]=null)}}}if(null==s&&null!=o)return o;if(s&&null==o)return s;for(var r in s)Te.IsNumber(s[r])&&(s[r]=Math.min(s[r],o));return s},this.ABS=function(t){var e=[];for(var a in t)e[a]=null,isNaN(t[a])||(e[a]=Math.abs(t[a]));return e},this.MA=function(t,e){var a=[];if(e<=0)return a;if(Array.isArray(e)){for(h=0;h<t.length;++h)if(a[h]=null,!(h>=e.length)){var i=e[h];if(this.IsNumber(i)&&!(i<=0)){for(var r=0,n=0,o=h,s=0;o>=0&&s<i;--o,++s)r+=t[o],++n;n>0&&(a[h]=r/n)}}}else{if(e<=0&&(e=1),!t||!t.length)return a;for(var h=0;h<t.length&&(a[h]=null,!this.IsNumber(t[h]));++h);t=t.slice(0);for(var l=0;h<t.length;++h,++l)if(l<e-1)a[h]=null;else{for(var u=t[h-(e-1)],c=0,f=e-1;f>=0;--f){var d=t[h-f];this.IsNumber(d)?u=d:(d=u,t[h-f]=d),c+=d}a[h]=c/e}}return a},this.EMA=function(t,e){var a=[];if(t.length<=0)return a;if(Array.isArray(e))for(var i=0;i<e.length;++i){var r=e[i];if(this.IsNumber(r)&&!((r=parseInt(r))<=0)){r>i+1&&(r=i+1);for(var n=[2/(r+1),(r-1)/(r+1)],o=null,s=null,h=0;h<r;++h){var l=t[i-(r-h-1)];this.IsNumber(l)||coninue,s=o=null==s?l:n[0]*l+n[1]*s}a[i]=o}}else{if(e<=0)return a;for(var u=0;u<t.length&&(null==t[u]||isNaN(t[u]));++u);var c=u,f=u+1;a[c]=t[c];for(i=u+1;i<t.length;++i,++c,++f)a[f]=(2*t[f]+(e-1)*a[c])/(e+1)}return a},this.XMA=function(t,e){for(var a=[],i=0;i<t.length&&!this.IsNumber(t[i]);++i);for(var r=parseInt((e-2)/2),n=0,o=0,s=0,h=i,l=0;h<t.length;++h){for(s=h+(e-r)-1,l=h-r-1;l<s;++l)l>=0&&l<t.length&&this.IsNumber(t[l])&&(n+=t[l],++o);a[h]=0!=o?n/o:null,n=0,o=0}return a},this.SMA=function(t,e,a){var i=[];if(Array.isArray(e))for(var r=0;r<e.length;++r){var n=e[r];if(this.IsNumber(n)&&!((n=parseInt(n))<=0)){n>r+1&&(n=r+1);for(var o=null,s=null,h=0;h<n;++h){var l=t[r-(n-h-1)];this.IsNumber(l)&&(null==o?(o=l,s=l):o=s=(a*l+(n-a)*o)/n)}i[r]=s}}else{r=0;for(var u=null;r<t.length;++r)if(null!=t[r]&&!isNaN(t[r])){u=t[r],i[r]=u;break}for(++r;r<t.length;++r)i[r]=(a*t[r]+(e-a)*u)/e,u=i[r]}return i},this.DMA=function(t,e){var a=[];if(t.length<0||t.length!=e.length)return a;for(var i=0;i<t.length;++i)if(null!=t[i]&&!isNaN(t[i])&&null!=e[i]&&!isNaN(e[i])){a[i]=t[i];break}for(i+=1;i<t.length;++i)null==t[i]||null==e[i]?a[i]=null:e[i]<1?a[i]=e[i]*t[i]+(1-e[i])*a[i-1]:a[i]=t[i];return a},this.WMA=function(t,e){var a=[];if(!t||!t.length)return a;if(Array.isArray(e)){for(c=0;c<e.length&&c<t.length;++c){a[c]=null;var i=e[c];if(!(i<=0)){for(var r=0,n=0,o=0,s=0;s<i;++s)if(n=t[c-(i-s-1)],r=s,this.IsNumber(n)){o=n;break}if(!(r>=i)){for(var h=0,l=0,u=(s=r,1);s<i;++s,++u)n=t[c-(i-s-1)],this.IsNumber(n)?o=n:n=o,l+=u,h+=n*u;a[c]=h/l}}}return a}if(e<=0)return[];var c=0;for(c=0;c<t.length&&!this.IsNumber(t[c]);++c)a[c]=null;t=t.slice(0);for(var f=0;c<t.length;++c,++f)if(f<e-1)a[c]=null;else{for(o=t[c-(e-1)],h=0,l=0,s=e-1;s>=0;--s){n=t[c-s];this.IsNumber(n)?o=n:(n=o,t[c-s]=n),l+=e-s,h+=n*(e-s)}a[c]=h/l}return a},this.MEMA=function(t,e){var a=[];if(!t||!t.length)return a;var i=0,r=0;for(r=0;r<t.length&&!this.IsNumber(t[r]);++r)a[r]=null;if(i=r,e<1||i+e>=t.length)return a;var n=0;for(t=t.slice(0);i<r+e;++i)a[i]=null,!this.IsNumber(t[i])&&i-1>=0&&(t[i]=t[i-1]),n+=t[i];for(a[i-1]=n/e;i<t.length;++i)this.IsNumber(a[i-1])&&this.IsNumber(t[i])?a[i]=(t[i]+a[i-1]*(e-1))/e:i-1>-1&&this.IsNumber(a[i-1])?a[i]=a[i-1]:a[i]=null;return a},this.EXPMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=e;i<t.length;++i)if(null!=t[i]){a[i]=t[i];break}for(i+=1;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},this.EXPMEMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=0;i<t.length&&(!t[i]||isNaN(t[i]));++i);for(var r=0,n=0;i<t.length&&n<e;++n,++i)t[i]&&!isNaN(t[i])?r+=t[i]:r+=t[i-1];for(a[i-1]=r/e;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},this.SUMBARS=function(t,e){var a=[];if(!(t&&t.length&&e&&e.length))return a;for(var i=0,r=0,n=0;i<t.length&&!this.IsNumber(t[i]);++i)a[i]=null;for(r=t.length-1;r>=i;--r){var o=0;for(n=r,o=0;n>=i&&o<e[r];--n)o+=t[n];a[r]=n<i?null:r-n}for(r=i+1;r<t.length;++r)null==a[r]&&(a[r]=a[r-1]);return a},this.REVERSE=function(t){if(this.IsNumber(t))return 0-t;for(var e=[],a=0;a<t.length&&!this.IsNumber(t[a]);++a)e[a]=null;for(;a<t.length;++a)this.IsNumber(t[a])?e[a]=0-t[a]:e[a]=null;return e},this.COUNT=function(t,e){if(Array.isArray(e)){for(var a=null,i=t.length,r=0;r<i;++r)if(this.IsNumber(t[r])){a=r;break}if(null==a)return[];var n=[],o=0;for(r=0;r<e.length;++r){var s=e[r];if(Te.IsNumber(s)){s<1&&(s=r+1),o=0;for(var h=r,l=0;h>=0&&l<s;--h,++l)t[h]&&++o;n[r]=o}}return n}for(s=e,i=t.length,s=s<1?i:s,r=0,h=0;r<i&&!this.IsNumber(t[r]);++r);n=[];for(var u=0;r<i&&h<s;++r,++h)u=t[r]?u+1:u,n[r]=u;for(;r<i;++r)t[r-s]&&u&&u--,u=t[r]?u+1:u,n[r]=u;return n},this.HHV=function(t,e){var a=[];if(Array.isArray(e)){for(var i=null,r=0,n=0;r<t.length;++r)if(a[r]=null,!(r>=e.length)){i=null;var o=e[r];if(o>0&&o<=r)for(n=r-o;n<=r;++n)(null==i||i<t[n])&&(i=t[n]);else for(o=r,n=0;n<=r;++n)(null==i||i<t[n])&&(i=t[n]);a[r]=i}}else{if(!Te.IsNonEmptyArray(t))return a;e<=0?e=t.length:e>t.length&&(e=t.length);var s=this.GetFirstVaildIndex(t);if(s>=t.length)return a;var h=s;h<t.length&&(a[h]=t[h]);for(r=h+1,n=2;r<t.length&&n<e;++r,++n)t[r]>=t[h]&&(h=r),a[r]=t[h];for(;r<t.length;++r){if(r-h<e)h=t[r]<t[h]?h:r;else for(n=h=r-e+1;n<=r;++n)h=t[n]<t[h]?h:n;a[r]=t[h]}}return a},this.HV=function(t,e){var a=this.HHV(t,e);return this.REF(a,1)},this.LLV=function(t,e){var a=[];if(Array.isArray(e)){for(var i=0;i<t.length;++i)if(a[i]=null,!(i>=e.length)){var r=null,n=e[i];if(n>0&&n<=i)for(var o=i-n;o<=i;++o)(null==r||r>t[o])&&(r=t[o]);else{n=i;for(o=0;o<=i;++o)(null==r||r>t[o])&&(r=t[o])}a[i]=r}}else{if(!Te.IsNonEmptyArray(t))return a;e<=0?e=t.length:e>t.length&&(e=t.length);var s=this.GetFirstVaildIndex(t);if(s>=t.length)return a;var h=s;h<t.length&&(a[h]=t[h]);for(i=h+1,o=2;i<t.length&&o<e;++i,++o)t[i]<=t[h]&&(h=i),a[i]=t[h];for(;i<t.length;++i){if(i-h<e)h=t[i]>t[h]?h:i;else for(o=h=i-e+1;o<=i;++o)h=t[o]>t[h]?h:o;a[i]=t[h]}}return a},this.LV=function(t,e){var a=this.LLV(t,e);return this.REF(a,1)},this.STD=function(t,e){var a=[];if(!Array.isArray(t))return a;var i=this.GetFirstVaildIndex(t);if(!Te.IsNumber(e))return a;if(i+e>t.length||e<1)return a;var r=i,n=0,o=!0,s=0,h=0;for(r+=e-1;r<t.length;++r){if(s=0,o){for(o=!1,n=r-e+1;n<=r;++n)h+=t[n];h/=e}else h+=(t[r]-t[r-e])/e;for(n=r-e+1;n<=r;++n)s+=(t[n]-h)*(t[n]-h);a[r]=Math.sqrt(s/(e-1))}return a},this.AVEDEV=function(t,e){for(var a=[],i=0,r=[],n=e-1;n<t.length;++n){i=0;for(var o=0;o<e;++o)i+=t[n-o];r[n]=i/e}for(n=e-1;n<t.length;++n){i=0;for(o=0;o<e;++o)i+=Math.abs(t[n-o]-r[n]);a[n]=i/e}return a},this.CROSS=function(t,e){var a=[];if(Array.isArray(t)&&Array.isArray(e)){if(t.length!=e.length)return[];for(var i=0;i<t.length&&(!this.IsNumber(t[i])||!this.IsNumber(e[i]));++i);for(++i;i<t.length;++i)a[i]=t[i]>e[i]&&t[i-1]<e[i-1]?1:0}else if(Array.isArray(t)&&"number"==typeof e){for(i=0;i<t.length&&!this.IsNumber(t[i]);++i);for(++i;i<t.length;++i)a[i]=t[i]>e&&t[i-1]<e?1:0}else if("number"==typeof t&&Array.isArray(e)){for(i=0;i<e.length&&!this.IsNumber(e[i]);++i);for(++i;i<e.length;++i)a[i]=e[i]<t&&e[i-1]>t?1:0}return a},this.CROSSDOWN=function(t,e){return this.CROSS(e,t)},this.CROSSUP=function(t,e){return this.CROSS(t,e)},this.MULAR=function(t,e){var a=[];if(Array.isArray(e))for(n=0;n<t.length;++n){a[n]=null;var i=e[n];if(this.IsNumber(i)&&!((i=parseInt(i))<0))for(o=n,s=0;o>=0&&s<i;--o,++s)0==s?a[n]=t[o]:a[n]*=t[o]}else{if(t.length<e)return a;if(0==e){for(var r=e;r<t.length;++r)if(this.IsNumber(t[r])){a[r]=t[r];break}for(++r;r<t.length;++r)a[r]=a[r-1]*t[r]}else for(var n=e-1,o=0;n<t.length;++n,++o)for(var s=0;s<e;++s)0==s?a[n]=t[s+o]:a[n]*=t[s+o]}return a},this.SUM=function(t,e){var a=[];if(Array.isArray(e))for(r=0;r<t.length;++r){a[r]=null;var i=e[r];if(i>0)for(n=r,o=0;n>=0&&o<i;--n,++o)0==o?a[r]=t[n]:a[r]+=t[n]}else if(0==e){a[0]=t[0];for(var r=1;r<t.length;++r)a[r]=a[r-1]+t[r]}else for(var r=e-1,n=0;r<t.length;++r,++n)for(var o=0;o<e;++o)0==o?a[r]=t[o+n]:a[r]+=t[o+n];return a},this.BARSCOUNT=function(t){var e=[],a=null;for(var i in t){if(e[i]=0,null==a){if(!this.IsNumber(t[i]))continue;a=0}e[i]=a,++a}return e},this.DEVSQ=function(t,e){if(this.IsNumber(t)&&this.IsNumber(e))return 0;var a=[];if(Array.isArray(t)){var i=null;if(Array.isArray(e)){for(var r=e.length-1;r>=0;--r)if(this.IsNumber(e[r])){i=parseInt(e[r]);break}}else i=parseInt(e);if(!this.IsNumber(i))return a;var n=t.length,o=(r=0,0),s=0,h=0,l=0;for(r=0;r<n&&!this.IsNumber(t[r]);++r)a[r]=null;if(i<1||r+i>n)return a;for(h=0;r<n&&o<i;++r,++o)h+=t[r]/i;if(o==i){for(l=0,r--;s<i;s++)l+=(t[r-s]-h)*(t[r-s]-h);a[r]=l,r++}for(;r<n;++r){for(h+=(t[r]-t[r-i])/i,l=0,s=0;s<i;++s)l+=(t[r-s]-h)*(t[r-s]-h);a[r]=l}}return a},this.NOT=function(t){if("number"==typeof t)return t?0:1;var e=[];for(var a in t)e[a]=null,this.IsNumber(t[a])&&(e[a]=t[a]?0:1);return e},this.FORCAST=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i=e,r=t.length;if(i<1||i>=r)return a;var n,o,s,h,l,u=0,c=0,f=0,d=0;for(h=0;h<r&&!this.IsNumber(t[h]);++h)a[h]=null;for(s=h+i-1;s<r;++s){for(u=c=f=d=0,h=0,l=i;h<i&&h<=s;++h,--l)u+=l,c+=t[s-h];for(u/=i,c/=i,h=0,l=i;h<i&&h<=s;++h,--l)f+=(l-u)*(t[s-h]-c),d+=(l-u)*(l-u);n=c-u*(o=f/d),a[s]=o*i+n}return a},this.TSMA=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i=e,r=t.length;if(i<1||i>=r)return a;var n,o,s,h,l,u=0,c=0,f=0,d=0;for(h=0;h<r&&!this.IsNumber(t[h]);++h)a[h]=null;for(s=h+i-1;s<r;++s){for(u=c=f=d=0,h=0,l=i;h<i&&h<=s;++h,--l)u+=l,c+=t[s-h];for(u/=i,c/=i,h=0,l=i;h<i&&h<=s;++h,--l)f+=(l-u)*(t[s-h]-c),d+=(l-u)*(l-u);n=c-u*(o=f/d),a[s]=o*i+n+o}return a},this.SLOPE=function(t,e){var a=[];if("number"!=typeof e&&(e=parseInt(e)),e<1||!t.length)return a;if(e>=t.length)return a;for(var i=0,r=0;r<t.length&&(a[r]=null,!this.IsNumber(t[r]));++r,++i);for(var n=void 0,o=void 0,s=void 0,h=void 0,l=i+e-1;l<t.length;++l){a[l]=null,n=o=s=h=0;for(var u=0;u<e&&u<=l;++u)n+=l-u,o+=t[l-u];for(n/=e,o/=e,u=0;u<e&&u<=l;++u)s+=(l-u-n)*(t[l-u]-o),h+=(l-u-n)*(l-u-n);h?a[l]=s/h:l&&(a[l]=a[l-1])}return a},this.STDP=function(t,e){var a=[];if(!Array.isArray(t))return a;var i=this.GetFirstVaildIndex(t);if(!Te.IsNumber(e))return a;if(i+e>t.length||e<1)return a;var r=i,n=0,o=!0,s=0,h=0;for(r+=e-1;r<t.length;++r){if(s=0,o){for(o=!1,n=r-e+1;n<=r;++n)h+=t[n];h/=e}else h+=(t[r]-t[r-e])/e;for(n=r-e+1;n<=r;++n)s+=(t[n]-h)*(t[n]-h);a[r]=Math.sqrt(s/e)}return a},this.VAR=function(t,e){if(this.IsNumber(t)&&this.IsNumber(e))return 0;var a=[];if(Array.isArray(t)&&this.IsNumber(e)){var i,r=parseInt(e),n=t.length;if(r<=0||r>=n)return a;for(o=0;o<n&&!this.IsNumber(t[o]);++o)a[o]=null;for(h=0,o=o+r-1;o<n;++o){for(s=i=0,h=0;h<r&&h<=o;++h)s+=t[o-h]*t[o-h],i+=t[o-h];a[o]=(r*s-i*i)/r*(r-1)}}else if(Array.isArray(t)&&Array.isArray(e))for(var o=this.GetFirstVaildIndex(t);o<t.length;++o){var s=i=0;if(this.IsNumber(e[o]))if(!((r=parseInt(e[o]))<=0||o-(r-1)<0)){for(var h=0;h<r;++h)s+=t[o-h]*t[o-h],i+=t[o-h];a[o]=(r*s-i*i)/r*(r-1)}}return a},this.VARP=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i=e,r=t.length;if(i<1||i>=r)return a;var n=0,o=0;for(n=0;n<r&&!this.IsNumber(t[n]);++n)a[n]=null;for(var s=0,h=0;n<r&&o<i;++n,++o)s+=t[n]*t[n],h+=t[n];for(o==i&&(a[n-1]=(i*s-h*h)/(i*i));n<r;++n)s+=t[n]*t[n]-t[n-i]*t[n-i],h+=t[n]-t[n-i],a[n]=(i*s-h*h)/(i*i);return a},this.RANGE=function(t,e,a){var i="number"==typeof e,r="number"==typeof a;if("number"==typeof t&&i&&r)return t>Math.min(e,a)&&t<Math.max(e,a)?1:0;for(var n=[],o=void 0,s=void 0,h=0;h<t.length;++h)if(n[h]=null,o=t[h],this.IsNumber(o)){if(i)s=e;else{if(h>=e.length)continue;s=e[h]}if(this.IsNumber(s)){if(r)rangeValue2=a;else{if(h>=a.length)continue;rangeValue2=a[h]}this.IsNumber(rangeValue2)&&(n[h]=o>Math.min(s,rangeValue2)&&o<Math.max(s,rangeValue2)?1:0)}}return n},this.EXIST=function(t,e){if("number"==typeof t)return 0;if(Array.isArray(e)){var a=[];if(t.length<=0)return a;for(var i in t)a[i]=0;for(i=0;i<e.length&&i<t.length;++i){var r=e[i];if(this.IsNumber(r)&&!((r=parseInt(r))<=0)){r>i+1&&(r=i+1);for(var n=!1,o=0,s=0;s<r;++s)if(i-(r-s-1),o=t[i],this.IsNumber(o)&&o>0){n=!0;break}a[i]=n?1:0}}return a}e=parseInt(e);for(var h=null,l=(a=[],0);l<t.length;++l)a[l]=null,o=t[l],this.IsNumber(o)&&o>0&&(h=l),a[l]=null!=h&&l-h<e?1:0;return a},this.TFILTER=function(t,e,a){if(!this.IsNumber(a))return[];if(1==a)return this.And(t,this.EQ(this.COUNT(t,this.BARSLAST(e)),1));if(2==a)return this.And(e,this.EQ(this.COUNT(e,this.BARSLAST(t)),1));if(0==a){for(var i=this.And(e,this.EQ(this.COUNT(e,this.BARSLAST(t)),1)),r=this.And(e,this.EQ(this.COUNT(e,this.BARSLAST(t)),1)),n=0;n<i.length;++n){r[n]>0&&(i[n]=2)}return i}return[]},this.FILTER=function(t,e){for(var a=[],i=0,r=0;i<t.length;++i)if(t[i]){for(a[i]=1,r=0;r<e&&r+i+1<t.length;++r)a[r+i+1]=0;i+=e}else a[i]=0;return a},this.BARSLAST=function(t){var e=[];if(!t)return e;for(var a=null,i=0;i<t.length;++i)e[i]=null,t[i]>0?a=0:null!=a&&++a,null!=a&&(e[i]=a);return e},this.BARSSINCEN=function(t,e){var a=[];if(this.IsNumber(e)&&Array.isArray(t)){var i=e;i<1&&(i=t.length);var r=this.GetFirstVaildIndex(t);if(r>=t.length)return a;var n=0;for(a[n=r<=i-1?i-1:r]=n-r;n<t.length;++n)if(this.IsNumber(a[n-1])){if(a[n-1]+1<i)a[n]=a[n-1]+1;else for(var o=n-i+1;o<=n;++o)if(!(Math.abs(t[o])<1e-6)){a[n]=n-o;break}}else Math.abs(t[n])<1e-6||(a[n]=0)}return a},this.BARSSINCE=function(t){for(var e=[],a=null,i=0;i<t.length;++i)e[i]=null,null==a?t[i]&&(a=0):++a,a&&(e[i]=a);return e},this.Trigonometric=function(t,e){if(Array.isArray(t)){var a=[];for(var i in t){var r=t[i];this.IsNumber(r)?a[i]=e(r):a[i]=null}return a}return this.IsNumber(t)?e(t):null},this.ASIN=function(t){if(Array.isArray(t)){var e=[];for(var a in t){var i=t[a];if(e[a]=null,this.IsNumber(i))if(i>=-1&&i<=1)e[a]=Math.asin(i);else if(a-1>=0){var r=e[a-1];this.IsNumber(r)&&(e[a]=r)}}return e}return this.IsNumber(t)?Math.acos(t):null},this.ACOS=function(t){if(Array.isArray(t)){var e=[];for(var a in t){var i=t[a];if(e[a]=null,this.IsNumber(i))if(i>=-1&&i<=1)e[a]=Math.acos(i);else if(a-1>=0){var r=e[a-1];this.IsNumber(r)&&(e[a]=r)}}return e}return this.IsNumber(t)?Math.acos(t):null},this.LAST=function(t,e,a){if(!Array.isArray(t))return[];for(var i=[],r=t.length,n=e,o=a,s=0,h=0,l=0,u=0;s<r&&!t[s];++s);for(h=s,u=s-o+1;h<r;++h,++u){for(l=0==n?s:Math.max(s,h-n);l<u&&!(t[l]<=0);++l);i[h]=l<u?0:1}return i},this.ZIG=function(t,e){var a=this.SymbolData.Data;if("number"==typeof t)switch(t){case 0:t=a.GetOpen();break;case 1:t=a.GetHigh();break;case 2:t=a.GetLow();break;case 3:t=a.GetClose();break;default:return[]}return this.ZIG_Calculate(t,e)},this.GetFirstVaildIndex=function(t){for(var e=0;e<t.length;++e)if(this.IsNumber(t[e]))return e;return t.length},this.ZIG_Calculate=function(t,e){var a=[],i=t.length,r=this.GetFirstVaildIndex(t),n=0,o=0,s=0,h=0,l=0;for(n=r+1,o=s=r;n<i-1&&s==r;++n)s=100*Math.abs(t[n]-t[r])>=e*t[r]?t[n]>t[r]?n:-n:r;for(;n<i-1;++n)if(t[n]>=t[n-1]&&t[n]>=t[n+1])if(s<0){if(100*(t[n]-t[-s])<e*t[-s])continue;for(l=(t[o]-t[h=-s])/(-s-o),a[h--]=t[-s];h>=o;h--)a[h]=t[-s]+(-s-h)*l;o=-s,s=n}else t[n]>t[s]&&(s=n);else if(t[n]<=t[n-1]&&t[n]<=t[n+1])if(s>0){if(100*(t[s]-t[n])<e*t[s])continue;for(l=(t[s]-t[h=o])/(s-o),a[h++]=t[o];h<=s;++h)a[h]=t[o]+(h-o)*l;o=s,s=-n}else t[n]<t[-s]&&(s=-n);if(Math.abs(s)>=i-2&&(s>0&&t[i-1]>=t[s]&&(s=i-1),s<0&&t[i-1]<=t[-s]&&(s=1-i)),s>0)for(l=(t[s]-t[h=o])/(s-o),a[h++]=t[o];h<=s;++h)a[h]=t[o]+(h-o)*l;else for(l=(t[o]-t[h=-s])/(-s-o),a[h--]=t[-s];h>=o;h--)a[h]=t[-s]+(-s-h)*l;if((s=Math.abs(s))<i-1)if(t[i-1]>=t[s])for(l=(t[i-1]-t[h=s])/(i-s),a[h++]=t[s];h<i;++h)a[h]=t[s]+(h-s)*l;else for(l=(t[s]-t[h=i-1])/(i-s),a[h--]=t[i-1];h>=s;h--)a[h]=t[i-1]+(i-h)*l;return a},this.JSDraw=null,this.CalculateZIGLine=function(t,e,a,i,r){null==this.JSDraw&&(this.JSDraw=new Qa(this.ErrorHandler));var n=t;if(e.Up)for(var o=t.ID+1;o<a.ID;++o){var s=i[o];this.IsNumber(s)&&(n.Value<s&&(n={ID:o,Value:s}))}else for(o=t.ID+1;o<a.ID;++o){s=i[o];this.IsNumber(s)&&(n.Value>s&&(n={ID:o,Value:s}))}e.Value=n.Value,e.ID=n.ID;var h={Start:{ID:t.ID,Value:t.Value},End:{ID:e.ID,Value:e.Value}},l=this.JSDraw.CalculateDrawLine(h);for(var o in l){r[(u=l[o]).ID]=u.Value}if(a.ID==i.length-1)for(var o in h={Start:{ID:e.ID,Value:e.Value},End:{ID:a.ID,Value:a.Value}},l=this.JSDraw.CalculateDrawLine(h)){var u;r[(u=l[o]).ID]=u.Value}else t.ID=e.ID,t.Value=e.Value,e.ID=a.ID,e.Value=a.Value,e.Up=t.Value<e.Value},this.TROUGHBARS=function(t,e,a){var i=this.ZIG(t,e),r=[],n=a;if(n<1)return r;for(var o=i.length,s=[],h=0;h<n;++h)s[h]=0;var l=0;h=this.GetFirstVaildIndex(i)+1;for(n--;h<o&&i[h]>i[h-1];++h);for(;h<o&&i[h]<i[h-1];++h);for(s[0]=--h;h<o-1;++h){if(i[h]<i[h+1]){if(l){if(n)for(var u=s.slice(0),c=0;c<n;++c)s[c+1]=u[c];s[l=0]=h}}else l=1;s[n]&&(r[h]=h-s[n])}return s[n]&&(r[h]=h-s[n]),r},this.TROUGH=function(t,e,a){var i=this.ZIG(t,e),r=[],n=a;if(n<1)return r;for(var o=i.length,s=[],h=0;h<n;++h)s[h]=0;h=1;var l=0;h=this.GetFirstVaildIndex(i)+1;for(n--;h<o&&i[h]>i[h-1];++h);for(;h<o&&i[h]<i[h-1];++h);for(s[0]=--h;h<o-1;++h){if(i[h]<i[h+1]){if(l){if(n)for(var u=s.slice(0),c=0;c<n;++c)s[c+1]=u[c];s[l=0]=h}}else l=1;s[n]&&(r[h]=i[s[n]])}return s[n]&&(r[h]=i[s[n]]),r},this.PEAKBARS=function(t,e,a){var i=this.ZIG(t,e),r=[],n=i.length,o=a;if(o<1)return r;for(var s=[],h=0;h<o;++h)s[h]=0;var l=0;h=this.GetFirstVaildIndex(i)+1;for(o--;h<n&&i[h]<i[h-1];++h);for(;h<n&&i[h]>i[h-1];++h);for(s[0]=--h;h<n-1;++h){if(i[h]>i[h+1]){if(l){if(o)for(var u=s.slice(0),c=0;c<o;++c)s[c+1]=u[c];s[l=0]=h}}else l=1;s[o]&&(r[h]=h-s[o])}return s[o]&&(r[h]=h-s[o]),r},this.PEAK=function(t,e,a){var i=this.ZIG(t,e),r=[],n=i.length,o=a;if(o<1)return r;for(var s=0,h=[],l=0;l<o;++l)h[l]=0;l=this.GetFirstVaildIndex(i)+1;for(o--;l<n&&i[l]<i[l-1];++l);for(;l<n&&i[l]>i[l-1];++l);for(h[0]=--l;l<n-1;++l){if(i[l]>i[l+1]){if(s){if(o)for(var u=h.slice(0),c=0;c<o;++c)h[c+1]=u[c];h[s=0]=l}}else s=1;h[o]&&(r[l]=i[h[o]])}return h[o]&&(r[l]=i[h[o]]),r},this.EVERY=function(t,e){var a=[];if(e<1)return a;if(Te.IsNumber(e)){e=parseInt(e);for(var i=0;i<t.length&&(a[i]=null,!this.IsNumber(t[i]));++i);for(var r=0;i<t.length;++i)t[i]?r+=1:r=0,r==e?(a[i]=1,--r):a[i]=0}else if(Array.isArray(e))for(i=0;i<e.length;++i){var n=e[i];if(a[i]=null,Te.IsPlusNumber(n)){n=parseInt(n);r=0;for(var o=i,s=0;o>=0&&s<n;--o,++s)t[o]&&++r;a[i]=r==n?1:0}}return a},this.COST=function(t,e){var a=[],i=t/100;if(i<1e-6||i>1)return a;var r=this.SymbolData.Data.Data;if(!r||r.length<=0)return a;for(var n=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:e}),o=r[0].High,s=r[0].Low,h=0;h<r.length;++h){var l=r[h];s=Math.min(s,l.Low),o=Math.max(o,l.High)}(s>2e3||s<0||o>2e3||s<0)&&this.ThrowUnexpectedNode(e,"COST() 历史K线最大最小值错误, 超出(0,1000)范围");var u=parseInt(100*o+1),c=parseInt(100*s-1),f=0,d=0,C=0;o=u/100,s=c/100;var p=u-c+1;if(p<1)return a;var m=[],D=[];for(h=0;h<p;++h)m[h]=0,D[h]=0;var v=0,g=0,S=0,T=0;for(h=0;h<r.length;++h)if(!(h>=n.length)){if(n[h]>1){var I=r[h];v=I.Vol/n[h];for(var y=0;y<p;y++)m[y]*=1-v;f=parseInt(Math.min(u,Math.max(c,100*I.Low)))-c,d=parseInt(Math.min(u,Math.max(c,100*I.High)))-c,C=parseInt(Math.min(u,Math.max(c,100*I.Close)))-c;for(y=0;y<p;++y)D[y]=0;var x=parseInt((f+d+2*C)/4);if(x==d||x==f)D[x]+=I.Vol;else{for(var w=I.Vol/(x-f),F=f;F<x;++F)D[F]+=w/(x-f)*(F-f);for(;F<=d;++F)D[F]+=w/(x-d)*(F-d)}for(g=0,y=f;y<=d;y++)m[y]+=D[y];for(y=0;y<p;y++)g+=m[y];for(y=0,T=S=0;y<p;++y)if((S+=m[y])>=g*i){T=(o-s)*y/p+s;break}}a[h]=T}return a},this.WINNER=function(t,e){var a=[],i=this.SymbolData.Data.Data;if(!i||i.length<=0)return a;for(var r=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:e}),n=i[0].High,o=i[0].Low,s=0;s<i.length;++s){var h=i[s];o=Math.min(o,h.Low),n=Math.max(n,h.High)}(o>5e3||o<0||n>5e3||o<0)&&this.ThrowUnexpectedNode(e,"WINNER() 历史K线最大最小值错误, 超出(0,5000)范围");var l=parseInt(100*n+1),u=parseInt(100*o-1),c=0,f=0,d=0;n=l/100,o=u/100;var C=l-u+1;if(C<1)return a;var p=[],m=[];for(s=0;s<C;++s)p[s]=0,m[s]=0;var D=0,v=0,g=0;for(s=0;s<i.length;++s)if(!(s>=r.length)&&r[s]>1){var S=i[s];D=S.Vol/r[s];for(var T=0;T<C;T++)p[T]*=1-D;c=parseInt(Math.min(l,Math.max(u,100*S.Low)))-u,f=parseInt(Math.min(l,Math.max(u,100*S.High)))-u,d=parseInt(Math.min(l,Math.max(u,100*S.Close)))-u;for(T=0;T<C;++T)m[T]=0;var I=parseInt((c+f+2*d)/4);if(I==f||I==c)m[I]+=S.Vol;else{for(var y=S.Vol/(I-c),x=c;x<I;++x)m[x]+=y/(I-c)*(x-c);for(;x<=f;++x)m[x]+=y/(I-f)*(x-f)}for(v=0,T=c;T<=f;T++)p[T]+=m[T];for(T=0;T<C;T++)v+=p[T];f=Array.isArray(t)?parseInt(Math.min(100*t[s]-u,C-1)):parseInt(Math.min(100*t-u,C-1));for(T=0,g=0;T<=f;T++)g+=p[T];v>0?a[s]=g/v:s-1>=0&&(a[s]=a[s-1])}return a},this.COSTEX=function(t,e,a){var i=[],r=this.SymbolData.Data.Data;if(!r||r.length<=0)return i;for(var n=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:a}),o=r[0].High,s=r[0].Low,h=0;h<r.length;++h){var l=r[h];s=Math.min(s,l.Low),o=Math.max(o,l.High)}(s>5e3||s<0||o>5e3||s<0)&&this.ThrowUnexpectedNode(a,"COSTEX() 历史K线最大最小值错误, 超出(0,5000)范围");var u=parseInt(100*o+1),c=parseInt(100*s-1),f=0,d=0,C=0;o=u/100,s=c/100;var p=u-c+1;if(p<1)return i;var m=[],D=[];for(h=0;h<p;++h)m[h]=0,D[h]=0;for(var v=0,g=0,S=0,T=0,I=0,y=0,x=(h=0,0);h<r.length;++h)if(!(h>=n.length)&&n[h]>1){var w=r[h];v=w.Vol/n[h];for(x=0;x<p;x++)m[x]*=1-v;f=parseInt(Math.min(u,Math.max(c,100*w.Low)))-c,d=parseInt(Math.min(u,Math.max(c,100*w.High)))-c,C=parseInt(Math.min(u,Math.max(c,100*w.Close)))-c;for(x=0;x<p;++x)D[x]=0;var F=parseInt((f+d+2*C)/4);if(F==d||F==f)D[F]+=w.Vol;else{for(var E=w.Vol/(F-f),b=f;b<F;++b)D[b]+=E/(F-f)*(b-f);for(;b<=d;++b)D[b]+=E/(F-d)*(b-d)}0;for(x=f;x<=d;x++)m[x]+=D[x];for(x=0;x<p;x++)m[x];for(d=Array.isArray(t)?parseInt(Math.min(100*t[h]-c,p-1)):parseInt(Math.min(100*t-c,p-1)),x=0,S=0,T=0;x<=d;x++)S+=m[x],T+=.01*(x+c)*m[x];for(d=Array.isArray(e)?parseInt(Math.min(100*e[h]-c,p-1)):parseInt(Math.min(100*e-c,p-1)),x=0,I=0,y=0;x<=d;x++)I+=m[x],y+=.01*(x+c)*m[x];g=S-I,dPerVolRange=T-y,Math.abs(dPerVolRange)>.001&&0!=g?i[h]=dPerVolRange/g:h-1>=0&&(i[h]=i[h-1])}return i},this.PPART=function(t,e){var a=[],i=t;if(i<0)return a;var r=this.SymbolData.Data.Data;if(!r||r.length<=0)return a;for(var n=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:e}),o=i,s=0;o<r.length;++o){var h=o-i;if(!(h<0)){var l=0;for(s=0;s<i;++s){l+=r[s+h].Vol}if(o<n.length&&n[o]>0){var u=1-l/n[o];a[o]=u}}}return a},this.LWINNER=function(t,e,a){var i=t;i<=0&&this.ThrowUnexpectedNode(a,"LWINNER() 第1个参数错误");var r=[],n=this.SymbolData.Data.Data;if(!n||n.length<=0)return r;for(var o=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:a}),s=0,h=0,l=i-1,u=0,c=0;l<n.length;++l){var f=l-i+1,d=n[f].High,C=n[f].Low;for(u=0;u<i;++u){var p=n[f+u];C=Math.min(C,p.Low),d=Math.max(d,p.High)}(C>5e3||C<0||d>5e3||C<0)&&this.ThrowUnexpectedNode(a,"LWINNER() 历史K线最大最小值错误, 超出(0,5000)范围");var m=parseInt(100*d+1),D=parseInt(100*C-1),v=0,g=0,S=0;d=m/100,C=D/100;var T=m-D+1;if(T<1)return r;var I=[],y=[];for(u=0;u<T;++u)I[u]=0,y[u]=0;for(u=0;u<i;++u){var x=o[f+u];if(!(x<1)){var w=n[f+u],F=w.Vol/x;for(c=0;c<T;c++)I[c]*=1-F;v=parseInt(Math.min(m,Math.max(D,100*w.Low)))-D,g=parseInt(Math.min(m,Math.max(D,100*w.High)))-D,S=parseInt(Math.min(m,Math.max(D,100*w.Close)))-D;for(c=0;c<T;++c)y[c]=0;var E=parseInt((v+g+2*S)/4);if(E==g||E==v)y[E]+=w.Vol;else{for(var b,L=w.Vol/(E-v),M=v;M<E;++M)y[M]+=L/(E-v)*(M-v);for(;b<=g;++b)y[b]+=L/(E-g)*(b-g)}s=0;for(c=v;c<=g;c++)I[c]+=y[c]}}for(u=0;u<T;u++)s+=I[u];for(g=Array.isArray(e)?parseInt(Math.min(100*e[l]-D,T-1)):parseInt(Math.min(100*e-D,T-1)),h=0,c=0;c<=g;c++)h+=I[c];s>0&&h>0&&h<=s?r[l]=h/s:l-1>=0&&(r[l]=r[l-1])}return r},this.PWINNER=function(t,e,a){return[]},this.CalculateChip=function(t,e,a,i){for(var r={Min:null,Max:null,Data:[]},n=1,o=null,s=null,h=t;h>=0;--h){var l={},u=a[h];l.Vol=h==t?u.Vol*e[h]:u.Vol*n,l.Date=u.Date,l.High=u.High,l.Low=u.Low,null==o?o=l.High:o<l.High&&(o=l.High),null==s?s=l.Low:s<l.Low&&(s=l.Low),r.Data[h]=l,n*=1-e[h]/100*i}return r.Max=o,r.Min=s,r},this.UPNDAY=function(t,e){var a=[];if(e<1)return a;if(null==t||e>t.length)return a;for(var i=0,r=0;r<t.length;++r)a[r]=0,r-1<0||(this.IsNumber(t[r])&&this.IsNumber(t[r-1])?(t[r]>t[r-1]?++i:i=0,i==e&&(a[r]=1,--i)):i=0);return a},this.DOWNNDAY=function(t,e){var a=[];if(e<1)return a;if(null==t||e>t.length)return a;for(var i=0,r=0;r<t.length;++r)a[r]=0,r-1<0||(this.IsNumber(t[r])&&this.IsNumber(t[r-1])?(t[r]<t[r-1]?++i:i=0,i==e&&(a[r]=1,--i)):i=0);return a},this.NDAY=function(t,e,a){var i=[];if(a<1)return i;if(!Array.isArray(t)&&!Array.isArray(e))return i;if(null==t||null==e)return i;if(Array.isArray(t)&&Array.isArray(e)){if(a>=t.length||a>=e.length)return i;for(var r=Math.max(t.length,e.length),n=0,o=0;o<r;++o)i[o]=0,o>=t.length||o>=e.length||(this.IsNumber(t[o])&&this.IsNumber(e[o])?(t[o]>e[o]?++n:n=0,n==a&&(i[o]=1,--n)):n=0)}else if(Array.isArray(t)&&!Array.isArray(e)){if(a>=t.length||!this.IsNumber(e))return;n=0;for(var s in t)i[s]=0,this.IsNumber(t[s])?(t[s]>e?++n:n=0,n==a&&(i[s]=1,--n)):n=0}else if(!Array.isArray(t)&&Array.isArray(e)){if(a>=e.length||!this.IsNumber(t))return;n=0;for(var h in e)i[h]=0,this.IsNumber(e[h])?(t>e[h]?++n:n=0,n==a&&(i[h]=1,--n)):n=0}return i},this.LONGCROSS=function(t,e,a){for(var i=[],r=Math.max(t.length,e.length),n=0;n<r;++n)i[n]=0,n-1<0||n>=t.length||n>=e.length||this.IsNumber(t[n])&&this.IsNumber(e[n])&&this.IsNumber(t[n-1])&&this.IsNumber(e[n-1])&&t[n]>e[n]&&t[n-1]<e[n-1]&&(i[n]=1);for(var o=0,s=0;o<r;++o)if(i[o])for(s=1;s<=a&&o-s>=0;++s)if(t[o-s]>=e[o-s]){i[o]=0;break}return i},this.ISVALID=function(t){if(Array.isArray(t)){for(var e=[],a=0;a<t.length;++a){var i=t[a];e[a]=i?1:0}return e}return t?1:0},this.EXISTR=function(t,e,a){var i=[];if(!Array.isArray(t))return i;if(e=parseInt(e),a=parseInt(a),e<=0&&(e=t.length),a<=0&&(a=1),a>e)return i;i=[];for(var r=0,n=0;r<t.length;++r)if(i[r]=null,!(r-e<0||r-a<0))for(i[r]=0,n=e;n>=a;--n){var o=t[r-n];if(this.IsNumber(o)&&o){i[r]=1;break}}return i},this.RELATE=function(t,e,a){var i=[];if(a<1&&(a=1),!Array.isArray(t)||!Array.isArray(e))return i;for(var r=this.CalculateAverage(t,a),n=this.CalculateAverage(e,a),o=Math.max(t.length,e.length),s=0,h=0;s<o;++s)if(i[s]=null,!(s>=t.length||s>=e.length||s>=r.length||s>=n.length)){var l=r[s],u=n[s],c=0,f=0,d=0;for(h=s-a+1;h<=s;++h)c+=(t[h]-l)*(e[h]-u),f+=Math.pow(t[h]-l,2),d+=Math.pow(e[h]-u,2);i[s]=c/a/(Math.sqrt(f/a)*Math.sqrt(d/a))}return i},this.CalculateAverage=function(t,e){var a=[];if(e<1)return a;for(var i=0,r=0;r<t.length&&!this.IsNumber(t[r]);++r);for(;r<t.length&&r<e;++r){a[r]=null;var n=t[r];this.IsNumber(n)&&(i+=n)}for(a[r-1]=i/e;r<t.length;++r){n=t[r];var o=t[r-e];this.IsNumber(n)||(n=0),this.IsNumber(o)||(o=0),i=i-o+n,a[r]=i/e}return a},this.COVAR=function(t,e,a){if(this.IsNumber(t)||this.IsNumber(e))return 0;var i=[];if(a<1&&(a=1),!Array.isArray(t)||!Array.isArray(e))return i;for(var r=this.CalculateAverage(t,a),n=this.CalculateAverage(e,a),o=Math.max(t.length,e.length),s=(o=Math.max(t.length,e.length),0),h=0;s<o;++s)if(i[s]=null,!(s>=t.length||s>=e.length||s>=r.length||s>=n.length)){var l=r[s],u=n[s],c=0;for(h=s-a+1;h<=s;++h)c+=(t[h]-l)*(e[h]-u);i[s]=c/a}return i},this.HHVBARS=function(t,e){var a=[];if(!Array.isArray(t))return a;if(Array.isArray(e))for(var i=0;i<e.length;++i){a[i]=null;var r=e[i];if(this.IsNumber(r)){var n=i-r;n<0&&(n=0);for(var o=null,s=n;s<t.length;++s)if(this.IsNumber(t[s])){o=s;break}for(var h=0;s<t.length&&h<r;++h,++s)t[s]>=t[o]&&(o=s);null!=o&&(a[i]=i-o)}}else{e<1&&(e=t.length);for(o=null,i=0;i<t.length;++i)if(a[i]=null,this.IsNumber(t[i])){o=i;break}s=0;for(i=o+1;i<t.length&&s<e;++i,++s)t[i]>=t[o]&&(o=i),e==t.length&&(a[i]=i-o);for(;i<t.length;++i){if(i-o<e)t[i]>=t[o]&&(o=i);else for(s=o=i-e+1;s<=i;++s)t[s]>=t[o]&&(o=s);a[i]=i-o}}return a},this.LLVBARS=function(t,e){var a=[];if(!Array.isArray(t))return a;if(Array.isArray(e))for(var i=0;i<e.length;++i){a[i]=null;var r=e[i];if(this.IsNumber(r)){var n=i-r;n<0&&(n=0);for(var o=null,s=n;s<t.length;++s)if(this.IsNumber(t[s])){o=s;break}for(var h=0;s<t.length&&h<r;++h,++s)t[s]<=t[o]&&(o=s);null!=o&&(a[i]=i-o)}}else{e<1&&(e=t.length);for(o=null,i=0;i<t.length;++i)if(a[i]=null,this.IsNumber(t[i])){o=i;break}s=0;for(i=o+1;i<t.length&&s<e;++i,++s)t[i]<=t[o]&&(o=i),e==t.length&&(a[i]=i-o);for(;i<t.length;++i){if(i-o<e)t[i]<=t[o]&&(o=i);else for(s=o=i-e+1;s<=i;++s)t[s]<=t[o]&&(o=s);a[i]=i-o}}return a},this.BETA=function(t){var e=[],a=this.SymbolData.Data,i=this.SymbolData.IndexData;t<=0&&(t=1);for(var r=[],n=[],o=0;o<a.Data.length;++o){r[o]=0,n[o]=0;var s=a.Data[o],h=i.Data[o];s.Close>0&&s.YClose>0&&(r[o]=(s.Close-s.YClose)/s.YClose),h.Close>0&&h.YClose>0&&(n[o]=(h.Close-h.YClose)/h.YClose)}for(var l=this.CalculateAverage(r,t),u=this.CalculateAverage(n,t),c=0,f=0;c<a.Data.length;++c)if(e[c]=null,!(c>=r.length||c>=n.length||c>=l.length||c>=u.length)){var d=l[c],C=u[c],p=0,m=0;for(f=c-t+1;f<=c;++f){var D=n[f]-C;p+=D*(r[f]-d),m+=D*D}this.IsDivideNumber(m)&&this.IsNumber(p)&&(e[c]=p/m)}return e},this.BETA2=function(t,e,a){var i=[];a<=0&&(a=1);for(var r=[null],n=[null],o=Math.max(t.length,e.length),s={X:t[0],Y:e[0]},h=1;h<o;++h){r[h]=0,n[h]=0;var l=t[h],u=e[h];s.X>0&&(r[h]=(l-s.X)/s.X),s.Y>0&&(n[h]=(u-s.Y)/s.Y),s={X:l,Y:u}}for(var c=this.CalculateAverage(r,a),f=this.CalculateAverage(n,a),d=(h=0,0);h<o;++h)if(i[h]=null,!(h>=r.length||h>=n.length||h>=c.length||h>=f.length)){var C=c[h],p=f[h],m=0,D=0;for(d=h-a+1;d<=h;++d){var v=r[d]-C;m+=v*(n[d]-p),D+=v*v}this.IsDivideNumber(D)&&this.IsNumber(m)&&(i[h]=m/D)}return i},this.SAR=function(t,e,a){var i=[],r=this.SymbolData.Data;if(t>=r.Data.length)return i;for(var n=null,o=null,s=0;s<t;++s){var h=r.Data[s];null==n?n=h.High:n<h.High&&(n=h.High),null==o?o=h.Low:o>h.Low&&(o=h.Low)}var l=0;i[t-1]=o;var u=o,c=r.Data[0].High,f=e/100;for(s=t;s<r.Data.length;++s){var d=c,C=(h=r.Data[s],r.Data[s-1]);0==l?h.Low<i[s-1]?(l=1,c=h.Low,f=e/100,u=Math.max(h.High,C.High),u=Math.max(u,d+f*(c-d))):(l=0,h.High>d&&(c=h.High,f=Math.min(f+e/100,a/100)),u=Math.min(h.Low,C.Low),u=Math.min(u,i[s-1]+f*(c-i[s-1]))):1==l&&(h.High>i[s-1]?(l=0,c=h.High,f=e/100,u=Math.min(h.Low,C.Low),u=Math.min(u,i[s-1]+f*(c-d))):(l=1,h.Low<d&&(c=h.Low,f=Math.min(f+e/100,a/100)),u=Math.max(h.High,C.High),u=Math.max(u,i[s-1]+f*(c-i[s-1])))),i[s]=u}return i},this.SARTURN=function(t,e,a){var i=[],r=this.SAR(t,e,a),n=this.SymbolData.Data,o=0;for(o=0;o<r.length&&!this.IsNumber(r[o]);++o);var s=0;o<n.Data.length&&(s=n.Data[o].Close>r[o]);for(var h=o+1;h<n.Data.length;++h){var l=n.Data[h];l.Close<r[h]&&s?i[h]=-1:i[h]=l.Close>r[h]&&!s?1:0,s=l.Close>r[h]}return i},this.BACKSET=function(t,e){var a=[];if(!t)return a;var i=t.length;if(!this.IsNumber(i)||i<=0)return a;if(Array.isArray(e)){for(var r=0;r<i;++r)a[r]=0;for(r=0;r<i;++r){var n=t[r],o=e[r];if(this.IsNumber(n)&&n&&this.IsNumber(o))for(var s=r,h=0;s>=0&&h<o;--s,++h)a[s]=1}}else{for(r=0;r<i;++r)a[r]=0;for(var l=0;l<i&&!this.IsNumber(t[l]);++l);if(l==i)return a;var u=Math.min(i-l,Math.max(e,1));for(r=i-1,s=0;r>=0;--r){n=t[r];if(this.IsNumber(n)&&n)for(s=r;s>r-u;--s)a[s]=1}if(t[r])for(s=r;s>=l;--s)a[s]=1}return a},this.BETWEEN=function(t,e,a){var i=[],r="number"==typeof e,n="number"==typeof a;if("number"==typeof t&&r&&n)return t>=e&&t<=a?1:0;for(var o in t){i[o]=0;var s=t[o],h=null,l=null;r?h=e:o<e.length-1&&(h=e[o]),n?l=a:o<a.length-1&&(l=a[o]),null!=h&&null!=l&&(h>l?s>=l&&s<=h&&(i[o]=1):s<=l&&s>=h&&(i[o]=1))}return i},this.STRCAT=function(t,e){var a=[];return Te.IsString(t)&&Te.IsString(e)&&(a=t+e),a},this.VARCAT=function(t,e){var a=[];if(Array.isArray(t)&&Array.isArray(e))for(var i=Math.max(t.length,e.length),r="",n=0;n<i;++n){if(a[n]=null,r="",n<t.length){var o=t[n];Te.IsString(o)&&(r+=o)}if(n<e.length){o=e[n];Te.IsString(o)&&(r+=o)}""!=r&&(a[n]=r)}else if(Te.IsString(t)&&Array.isArray(e))for(n=0;n<e.length;++n){a[n]=null;o=e[n];Te.IsString(o)&&(a[n]=t+o)}else if(Array.isArray(t)&&Te.IsString(e))for(n=0;n<t.length;++n){a[n]=null;o=t[n];Te.IsString(o)&&(a[n]=o+e)}else Te.IsString(t)&&Te.IsString(e)&&(a=t+e);return a},this.FINDSTR=function(t,e){var a,i,r=[];if(a=Te.IsNumber(t)?t.toString():t,i=Te.IsNumber(e)?e.toString():e,Te.IsString(a)&&Te.IsString(i))return a.indexOf(i)>=0?1:0;if(Array.isArray(t)&&Te.IsString(i))for(var n=0;n<t.length;++n){var o=t[n];Te.IsString(o)?r[n]=o.indexOf(i)>=0?1:0:Te.IsNumber(o)?(a=o.toString(),r[n]=a.indexOf(i)>=0?1:0):r[n]=0}return r},this.STRLEN=function(t){if(Te.IsString(t))return t.length;if(Array.isArray(t)){for(var e=[],a=0;a<t.length;++a){var i=t[a];Te.IsString(i)?e[a]=i.length:e[a]=null}return e}return null},this.STRCMP=function(t,e){return Te.IsString(t)&&Te.IsString(e)?t==e?1:0:null},this.STRSPACE=function(t){var e=[];if(Array.isArray(t))for(var a=0;a<t.length;++a){e[a]=null;var i=t[a];Te.IsString(i)&&(e[a]=i+" ")}else Te.IsString(t)&&(e=t+" ");return e},this.CON2STR=function(t,e){var a=[];if(Array.isArray(t))for(var i=t.length-1;i>=0;--i){var r=t[i];if(this.IsNumber(r))return a=r.toFixed(e)}else this.IsNumber(t)&&(a=t.toFixed(e));return a},this.VAR2STR=function(t,e){var a=[];if(Array.isArray(t))for(var i=0;i<t.length;++i){a[i]=null;var r=t[i];this.IsNumber(r)&&(a[i]=r.toFixed(e))}else this.IsNumber(t)&&(a=t.toFixed(e));return a},this.MOD=function(t,e){var a=[],i="number"==typeof t,r="number"==typeof e;if(i&&r)return Za.MOD(t,e);if(!i&&!r){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)a[o]=null,o<t.length&&o<e.length&&this.IsNumber(t[o])&&this.IsNumber(e[o])&&(a[o]=Za.MOD(t[o],e[o]));return a}if(i&&!r){for(var s in e)a[s]=null,this.IsNumber(t)&&this.IsNumber(e[s])&&(a[s]=Za.MOD(t,e[s]));return a}if(!i&&r){for(var s in t)a[s]=null,this.IsNumber(t[s])&&this.IsNumber(e)&&(a[s]=Za.MOD(t[s],e));return a}return a},this.POW=function(t,e){var a=[];if(Array.isArray(t)&&Array.isArray(e))for(var i=0;i<t.length;++i){var r=t[i],n=e[i];this.IsNumber(r)&&this.IsNumber(n)?a[i]=Math.pow(r,n):a[i]=null}else if(Te.IsNumber(t)&&Array.isArray(e))for(i=0;i<e.length;++i){var o=e[i];this.IsNumber(o)?a[i]=Math.pow(t,o):a[i]=null}else{if(Te.IsNumber(t)&&Te.IsNumber(e))return Math.pow(t,e);if(Array.isArray(t)&&Te.IsNumber(e))for(i=0;i<t.length;++i){o=t[i];this.IsNumber(o)?a[i]=Math.pow(o,e):a[i]=null}}return a},this.CEILING=function(t){if("number"==typeof t)return parseInt(t);var e=[];for(var a in t){var i=t[a];this.IsNumber(i)?e[a]=parseInt(i):e[a]=null}return e},this.FLOOR=function(t){if("number"==typeof t)return parseInt(t-1);var e=[];for(var a in t){var i=t[a];this.IsNumber(i)?e[a]=parseInt(i-1):e[a]=null}return e},this.ZTPRICE=function(t,e){if(!this.IsNumber(e))return null;if(Array.isArray(t)){var a=[];for(var i in t){var r=t[i];this.IsNumber(r)?a[i]=(1+e)*r:a[i]=null}return a}return this.IsNumber(t)?a=(1+e)*t:void 0},this.DTPRICE=function(t,e){if(!this.IsNumber(e))return null;if(Array.isArray(t)){var a=[];for(var i in t){var r=t[i];this.IsNumber(r)?a[i]=(1-e)*r:a[i]=null}return a}return this.IsNumber(t)?a=(1-e)*t:void 0},this.FRACPART=function(t){if(Array.isArray(t)){var e=[],a=0;for(var i in t){var r=t[i];this.IsNumber(r)?(a=parseInt(r),e[i]=r-a):e[i]=null}return e}if(this.IsNumber(t))return e=t-(a=parseInt(t))},this.SIGN=function(t){if(Array.isArray(t)){for(var e=[],a=0;a<t.length;++a){var i=t[a];e[a]=null,Te.IsNumber(i)&&(e[a]=i>0?1:0==i?0:-1)}return e}return t>0?1:0==t?0:-1},this.BARSLASTCOUNT=function(t){var e=null;if(Array.isArray(t)){if(e=[],t.length>0)for(var a=0,i=t.length-1;i>=0;--i){a=0;for(var r=i;r>=0&&t[r];--r)++a;e[i]=a}}else e=t?1:0;return e},this.INTPART=function(t){var e=null;if(Array.isArray(t))for(var a in e=[],t){var i=t[a];this.IsNumber(i)?e[a]=parseInt(i):e[a]=null}else this.IsNumber(t)&&(e=parseInt(t));return e},this.CONST=function(t){if(Array.isArray(t)){var e=t.length;return e>0?t[e-1]:null}return t},this.TOPRANGE=function(t){if(this.IsNumber(t))return 0;var e=[];if(Array.isArray(t))for(var a=t.length-1;a>=0;--a){e[a]=0;var i=t[a];if(this.IsNumber(i)){for(var r=0,n=a-1;n>=0&&!(t[n]>i);--n)++r;e[a]=r}}return e},this.LOWRANGE=function(t){if(this.IsNumber(t))return 0;var e=[];if(Array.isArray(t))for(var a=t.length-1;a>=0;--a){e[a]=0;var i=t[a];if(this.IsNumber(i)){for(var r=0,n=a-1;n>=0&&!(t[n]<i);--n)++r;e[a]=r}}return e},this.FINDLOW=function(t,e,a,i){if(this.IsNumber(t))return t;var r=[];if(Array.isArray(t))for(var n=t.length-1;n>=0;--n){r[n]=null;for(var o=[],s=e;s<a;++s){var h;if((h=n-s)<0)break;var l=t[h];this.IsNumber(l)&&o.push(l)}if(o.length>0)o.sort(function(t,e){return t-e}),(h=i-1)<0?h=0:h>=o.length&&(h=o.length-1),r[n]=o[h]}return r},this.FINDHIGH=function(t,e,a,i){if(this.IsNumber(t))return t;var r=[];if(Array.isArray(t))for(var n=t.length-1;n>=0;--n){r[n]=null;for(var o=[],s=e;s<a;++s){var h;if((h=n-s)<0)break;var l=t[h];this.IsNumber(l)&&o.push(l)}if(o.length>0)o.sort(function(t,e){return e-t}),(h=i-1)<0?h=0:h>=o.length&&(h=o.length-1),r[n]=o[h]}return r},this.FINDHIGHBARS=function(t,e,a,i){if(this.IsNumber(t))return a-e-i;var r=[];if(Array.isArray(t))for(var n=t.length-1;n>=0;--n){r[n]=null;for(var o=[],s=e;s<a;++s){var h;if((h=n-s)<0)break;var l=t[h];this.IsNumber(l)&&o.push({Value:l,Period:s})}if(o.length>0)o.sort(function(t,e){return e.Value-t.Value}),(h=i-1)<0?h=0:h>=o.length&&(h=o.length-1),r[n]=o[h].Period}return r},this.FINDLOWBARS=function(t,e,a,i){if(this.IsNumber(t))return a-e-i;var r=[];if(Array.isArray(t))for(var n=t.length-1;n>=0;--n){r[n]=null;for(var o=[],s=e;s<a;++s){var h;if((h=n-s)<0)break;var l=t[h];this.IsNumber(l)&&o.push({Value:l,Period:s})}if(o.length>0)o.sort(function(t,e){return t.Value-e.Value}),(h=i-1)<0?h=0:h>=o.length&&(h=o.length-1),r[n]=o[h].Period}return r},this.HOD=function(t,e){var a=[];if(Te.IsNumber(t))return 1;if(Array.isArray(t))for(var i=t.length-1;i>=0;--i){var r=t[i];if(Te.IsNumber(r)){if(Array.isArray(e))var n=parseInt(e[i]);else n=parseInt(e);e<=0&&(n=i);for(var o=1,s=i-1,h=1;s>=0&&h<n;--s,++h){var l=t[s];Te.IsNumber(l)&&l>r&&++o}a[i]=o}}return a},this.LOD=function(t,e){var a=[];if(Te.IsNumber(t))return 1;if(Array.isArray(t))for(var i=t.length-1;i>=0;--i){var r=t[i];if(Te.IsNumber(r)){if(Array.isArray(e))var n=parseInt(e[i]);else n=parseInt(e);e<=0&&(n=i);for(var o=1,s=i-1,h=1;s>=0&&h<n;--s,++h){var l=t[s];Te.IsNumber(l)&&l<r&&++o}a[i]=o}}return a},this.BARSNEXT=function(t){if(!Array.isArray(t))return 0;for(var e=[],a=0;a<t.length;++a){e[a]=0;for(var i=a,r=0;i<t.length;++i,++r){if(t[i]>0){e[a]=r;break}}}return e},this.RAND=function(t){if(Array.isArray(t)){var e=[];for(var a in t){e[a]=null;var i=t[a];(r=parseInt(i))<=0||(e[a]=Math.ceil(Math.random()*r))}return e}var r;if((r=parseInt(t))<=0)return null;var n=this.SymbolData.Data.Data.length;for(e=[],a=0;a<n;++a)e[a]=Math.ceil(Math.random()*r);return e},this.AMA=function(t,e){var a,i=[];if(Array.isArray(e)){for(var r=t.length-1;r>=0;--r)if(this.IsNumber(e[r])){a=e[r];break}}else a=e;if(this.IsNumber(a)){if(a>1)return i;for(var n=0,o=0;n<t.length;++n)if(i[n]=null,this.IsNumber(t[n])){o=t[n],i[n]=o;break}for(r=n+1;r<t.length;++r){var s=t[r];i[r]=i[r-1]+a*(s-i[r-1])}}return i},this.TMA=function(t,e,a){var i=[];if(this.IsNumber(e)&&e<=1&&this.IsNumber(a)&&a<1){var r=!1;for(var n in t)if(i[n]=null,0==r){var o=t[n];this.IsNumber(o)&&(i[n]=o,i[n],r=!0)}else{o=t[n];if(!this.IsNumber(o))continue;i[n]=e*i[n-1]+a*o,i[n]}}return i},this.ROUND=function(t){if(this.IsNumber(t))return Math.round(t);var e=[];if(Array.isArray(t))for(var a in t){var i=t[a];this.IsNumber(i)?e[a]=Math.round(i):e[a]=null}return e},this.ROUND2=function(t,e){var a=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12],i=0;if(this.IsNumber(e)&&(i=parseInt(e)),e<0?i=0:e>=a.length&&(i=a.length-1),this.IsNumber(t))return Math.round(t*a[i])/a[i];var r=[];if(Array.isArray(t))for(var n in t){var o=t[n];this.IsNumber(o)?r[n]=Math.round(o*a[i])/a[i]:r[n]=null}return r},this.TRMA=function(t,e){if(!this.IsNumber(e)||e<=0)return[];var a=0,i=0;i=(e=parseInt(e))%2==0?(a=parseInt(e/2))+1:a=parseInt((e+1)/2);var r=this.MA(t,a);return this.MA(r,i)},this.VALUEWHEN=function(t,e){if(Array.isArray(t)){var a=[];if(Array.isArray(e)){var i=null;for(var r in t)if(r>=e.length)a[r]=i;else{var n=e[r];t[r]?(a[r]=n,i=n):a[r]=i}}else{i=null;for(var r in t)t[r]?(a[r]=e,i=e):a[r]=i}return a}return t?1:0},this.HARMEAN=function(t,e){var a=[];if(Array.isArray(t))if(Array.isArray(e))for(var i=0;i<t.length;++i)if(i>=e.length)a[i]=null;else{var r=parseInt(e[i]);if(r<=0||r>i)a[i]=null;else{for(var n=0,o=0;o<r;++o){var s=t[i-o];if(!this.IsNumber(s)||0==s){n=null;break}n+=1/s}a[i]=null==n?null:1/(n/r)}}else if(this.IsNumber(e)){if((e=parseInt(e))<=0)return a;for(i=0;i<t.length;++i)if(e>i)a[i]=null;else{for(n=0,o=0;o<e;++o){s=t[i-o];if(!this.IsNumber(s)||0==s){n=null;break}n+=1/s}a[i]=null==n?null:1/(n/e)}}return a},this.DATETODAY=function(t){var e=[],a=new Date("1990-12-19");if(Array.isArray(t))for(var i in t){e[i]=null;var r=t[i];if(this.IsNumber(r))if(!((l=r+19e6)<19901219)){var n=parseInt(l/1e4),o=parseInt(l%1e4/100),s=parseInt(l%100),h=new Date(n+"-"+o+"-"+s);e[i]=Math.round((h-a)/864e5)}}else if(this.IsNumber(t)){var l;if((l=t+19e6)>=19901219){n=parseInt(l/1e4),o=parseInt(l%1e4/100),s=parseInt(l%100),h=new Date(n+"-"+o+"-"+s);return Math.round((h-h)/864e5)}}return e},this.DAYTODATE=function(t){var e=new Date("1990-12-19"),a=[];if(Array.isArray(t))for(var i in t){a[i]=null;var r=t[i];if(this.IsNumber(r)){e.setDate(e.getDate()+r);var n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();n-=19e6,a[i]=n,e.setDate(e.getDate()-r)}}else if(this.IsNumber(t)){e.setDate(e.getDate()+t);n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();return n-=19e6}return a},this.TIMETOSEC=function(t){return 60*parseInt(t/1e4)*60+60*parseInt(t%1e4/100)+t%100},this.SECTOTIME=function(t){Math.floor(t/86400);return 1e4*Math.floor(t%86400/3600)+100*Math.floor(t%3600/60)+t%60},this.ANY=function(t,e){e<=0&&(e=1);var a=[];if(Array.isArray(t)){if(e>=t.length)return 0;for(var i=e,r=0;i<t.length;++i){var n=0;for(r=0;r<e;++r){if(t[i-r]>0){n=1;break}}a[i]=n}return a}if(Te.IsNumber(t)){if(t<=0)return 0;if(e>=this.SymbolData.Data.Data.length)return 0;for(i=e;i<this.SymbolData.Data.Data.length;++i)a[i]=1;return a}return 0},this.ALL=function(t,e){e<=0&&(e=1);var a=[];if(Array.isArray(t)){if(e>=t.length)return 0;for(var i=e,r=0;i<t.length;++i){var n=1;for(r=0;r<e;++r){if(!(t[i-r]>0)){n=0;break}}a[i]=n}return a}if(Te.IsNumber(t)){if(t<=0)return 0;if(e>=this.SymbolData.Data.Data.length)return 0;for(i=e;i<this.SymbolData.Data.Data.length;++i)a[i]=1;return a}return 0},this.TESTSKIP=function(t,e){return Array.isArray(t)?!(t.length<=0)&&!!t[t.length-1]:Te.IsNumber(t)?!(t<=0):!!t},this.IFC=function(t){if(Array.isArray(t)){var e=t[t.length-1];return!!Te.IsNumber(e)&&e>0}return!!Te.IsNumber(t)&&t>0},this.ALIGNRIGHT=function(t){if(Array.isArray(t)){for(var e=[],a=t.length-1,i=t.length-1;i>=0;--i){var r=t[i];(Te.IsNumber(r)||Te.IsString(r))&&(e[a]=r,--a)}for(i=a;i>=0;--i)e[i]=null;return e}return t},this.SUMBARS=function(t,e){var a=Array.isArray(t),i=Array.isArray(e),r=Te.IsNumber(t),n=Te.IsNumber(e),o=[];if(a&&n)for(var s=0,h=0;s<t.length;++s){for(var l=0,u=(h=0,s-1);u>=0;--u,++h){var c=t[s];if(Te.IsNumber(c)&&(l+=t[u])>e)break}o[s]=h}else if(a&&i){var f=Math.max(t.length,e.length);for(s=0;s<f;++s){o[s]=null;l=0,h=0;var d=e[s];if(Te.IsNumber(d)){for(u=s-1;u>=0;--u,++h){c=t[s];if(Te.IsNumber(c)&&(l+=t[u])>d)break}o[s]=h}}}else if(r&&i)for(s=0;s<e.length;++s){o[s]=null;l=0,h=0,d=e[s];if(Te.IsNumber(d)){for(u=s-1;u>=0&&!((l+=t)>d);--u,++h);o[s]=h}}return o},this.STRFORMAT=function(t,e,a){var i=t.match(/{\d+}/g);if(!Te.IsNonEmptyArray(i))return null;for(var r=new C.default,n=-1,o=0;o<i.length;++o){if(!((d=i[o]).length<3)){var s=d.slice(1,d.length-1),h=parseInt(s),l={Src:d,Index:h,Text:null};n<h&&(n=h),r.set(h,l)}}var u=!1,c=0;for(o=1;o<e.length;++o){var d=e[o];Array.isArray(d)&&(u=!0,c<d.length&&(c=d.length))}if(u){var p=[];for(o=0;o<c;++o){var m=t,D=!0,v=!1,g=void 0;try{for(var S,T=(0,f.default)(r);!(D=(S=T.next()).done);D=!0){var I="null";if(l=e[(b=(d=S.value)[1]).Index+1])if(Array.isArray(l))(s=l[o])&&(I=""+s);else I=""+l;m=m.replace(b.Src,I)}}catch(t){v=!0,g=t}finally{try{!D&&T.return&&T.return()}finally{if(v)throw g}}p[o]=m}return p}p=t;var y=!0,x=!1,w=void 0;try{for(var F,E=(0,f.default)(r);!(y=(F=E.next()).done);y=!0){var b;I="null";(l=e[(b=(d=F.value)[1]).Index+1])&&(I=""+l),p=p.replace(b.Src,I)}}catch(t){x=!0,w=t}finally{try{!y&&E.return&&E.return()}finally{if(x)throw w}}return p},this.CallFunction=function(t,e,a,i){switch(t){case"MAX":case"MAX6":return this.MAX(e,a);case"MIN":case"MIN6":return this.MIN(e,a);case"REF":return this.REF(e[0],e[1]);case"REFV":return this.REFV(e[0],e[1]);case"REFX":return this.REFX(e[0],e[1]);case"REFXV":return this.REFXV(e[0],e[1]);case"REFX1":return this.REFX(e[0],e[1]);case"ABS":return this.ABS(e[0]);case"MA":return this.MA(e[0],e[1]);case"EMA":return this.EMA(e[0],e[1]);case"SMA":return this.SMA(e[0],e[1],e[2]);case"DMA":return this.DMA(e[0],e[1]);case"XMA":return this.XMA(e[0],e[1]);case"EXPMA":return this.EXPMA(e[0],e[1]);case"EXPMEMA":return this.EXPMEMA(e[0],e[1]);case"COUNT":return this.COUNT(e[0],e[1]);case"LLV":return this.LLV(e[0],e[1]);case"LV":return this.LV(e[0],e[1]);case"LLVBARS":return this.LLVBARS(e[0],e[1]);case"HHV":return this.HHV(e[0],e[1]);case"HV":return this.HV(e[0],e[1]);case"HHVBARS":return this.HHVBARS(e[0],e[1]);case"MULAR":return this.MULAR(e[0],e[1]);case"CROSS":return this.CROSS(e[0],e[1]);case"LONGCROSS":return this.LONGCROSS(e[0],e[1],e[2]);case"ISVALID":return this.ISVALID(e[0]);case"CROSSDOWN":return this.CROSSDOWN(e[0],e[1]);case"CROSSUP":return this.CROSSUP(e[0],e[1]);case"AVEDEV":return this.AVEDEV(e[0],e[1]);case"STD":return this.STD(e[0],e[1]);case"IF":case"IFF":case"IFELSE":return this.IF(e[0],e[1],e[2]);case"IFN":return this.IFN(e[0],e[1],e[2]);case"NOT":return this.NOT(e[0]);case"SUM":return this.SUM(e[0],e[1]);case"RANGE":return this.RANGE(e[0],e[1],e[2]);case"EXIST":return this.EXIST(e[0],e[1]);case"EXISTR":return this.EXISTR(e[0],e[1],e[2]);case"FILTER":return this.FILTER(e[0],e[1]);case"TFILTER":return this.TFILTER(e[0],e[1],e[2]);case"SLOPE":return this.SLOPE(e[0],e[1]);case"BARSLAST":return this.BARSLAST(e[0]);case"BARSCOUNT":return this.BARSCOUNT(e[0]);case"BARSSINCEN":return this.BARSSINCEN(e[0],e[1]);case"BARSSINCE":return this.BARSSINCE(e[0]);case"LAST":return this.LAST(e[0],e[1],e[2]);case"EVERY":return this.EVERY(e[0],e[1]);case"DEVSQ":return this.DEVSQ(e[0],e[1]);case"ZIG":return this.ZIG(e[0],e[1]);case"TROUGHBARS":return this.TROUGHBARS(e[0],e[1],e[2]);case"TROUGH":return this.TROUGH(e[0],e[1],e[2]);case"PEAKBARS":return this.PEAKBARS(e[0],e[1],e[2]);case"PEAK":return this.PEAK(e[0],e[1],e[2]);case"COST":return this.COST(e[0]);case"WINNER":return this.WINNER(e[0],a);case"PPART":return this.PPART(e[0],a);case"COSTEX":return this.COSTEX(e[0],e[1],a);case"LWINNER":return this.LWINNER(e[0],e[1],a);case"PWINNER":return this.PWINNER(e[0],e[1],a);case"FORCAST":return this.FORCAST(e[0],e[1]);case"TSMA":return this.TSMA(e[0],e[1]);case"STDP":return this.STDP(e[0],e[1]);case"VAR":return this.VAR(e[0],e[1]);case"VARP":return this.VARP(e[0],e[1]);case"UPNDAY":return this.UPNDAY(e[0],e[1]);case"DOWNNDAY":return this.DOWNNDAY(e[0],e[1]);case"NDAY":return this.NDAY(e[0],e[1],e[2]);case"RELATE":return this.RELATE(e[0],e[1],e[2]);case"COVAR":return this.COVAR(e[0],e[1],e[2]);case"BETA":return this.BETA(e[0]);case"BETA2":return this.BETA2(e[0],e[1],e[2]);case"WMA":return this.WMA(e[0],e[1]);case"MEMA":return this.MEMA(e[0],e[1]);case"SUMBARS":return this.SUMBARS(e[0],e[1]);case"REVERSE":return this.REVERSE(e[0]);case"SAR":return this.SAR(e[0],e[1],e[2]);case"SARTURN":return this.SARTURN(e[0],e[1],e[2]);case"BACKSET":return this.BACKSET(e[0],e[1]);case"BETWEEN":return this.BETWEEN(e[0],e[1],e[2]);case"STRCAT":return this.STRCAT(e[0],e[1]);case"CON2STR":return this.CON2STR(e[0],e[1]);case"VAR2STR":return this.VAR2STR(e[0],e[1]);case"VARCAT":return this.VARCAT(e[0],e[1]);case"STRSPACE":return this.STRSPACE(e[0]);case"FINDSTR":return this.FINDSTR(e[0],e[1]);case"STRCMP":return this.STRCMP(e[0],e[1]);case"STRLEN":return this.STRLEN(e[0]);case"STRFORMAT":return this.STRFORMAT(e[0],e,a);case"DTPRICE":return this.DTPRICE(e[0],e[1]);case"ZTPRICE":return this.ZTPRICE(e[0],e[1]);case"MOD":return this.MOD(e[0],e[1]);case"POW":return this.POW(e[0],e[1]);case"CEILING":return this.CEILING(e[0]);case"FLOOR":return this.FLOOR(e[0]);case"FRACPART":return this.FRACPART(e[0]);case"SIGN":return this.SIGN(e[0]);case"BARSLASTCOUNT":return this.BARSLASTCOUNT(e[0]);case"INTPART":return this.INTPART(e[0]);case"CONST":return this.CONST(e[0]);case"TOPRANGE":return this.TOPRANGE(e[0]);case"LOWRANGE":return this.LOWRANGE(e[0]);case"FINDLOW":return this.FINDLOW(e[0],e[1],e[2],e[3]);case"FINDLOWBARS":return this.FINDLOWBARS(e[0],e[1],e[2],e[3]);case"FINDHIGH":return this.FINDHIGH(e[0],e[1],e[2],e[3]);case"FINDHIGHBARS":return this.FINDHIGHBARS(e[0],e[1],e[2],e[3]);case"BARSNEXT":return this.BARSNEXT(e[0]);case"HOD":return this.HOD(e[0],e[1]);case"LOD":return this.LOD(e[0],e[1]);case"AMA":return this.AMA(e[0],e[1]);case"TMA":return this.TMA(e[0],e[1],e[2]);case"ROUND":return this.ROUND(e[0]);case"ROUND2":return this.ROUND2(e[0],e[1]);case"TRMA":return this.TRMA(e[0],e[1]);case"VALUEWHEN":return this.VALUEWHEN(e[0],e[1]);case"HARMEAN":return this.HARMEAN(e[0],e[1]);case"DATETODAY":return this.DATETODAY(e[0]);case"DAYTODATE":return this.DAYTODATE(e[0]);case"TIMETOSEC":return this.TIMETOSEC(e[0]);case"SECTOTIME":return this.SECTOTIME(e[0]);case"ANY":return this.ANY(e[0],e[1]);case"ALL":return this.ALL(e[0],e[1]);case"TESTSKIP":return this.TESTSKIP(e[0],a);case"SUMBARS":return this.SUMBARS(e[0],e[1]);case"ALIGNRIGHT":return this.ALIGNRIGHT(e[0]);case"ATAN":return this.Trigonometric(e[0],Math.atan);case"ACOS":return this.ACOS(e[0]);case"ASIN":return this.ASIN(e[0]);case"COS":return this.Trigonometric(e[0],Math.cos);case"SIN":return this.Trigonometric(e[0],Math.sin);case"TAN":return this.Trigonometric(e[0],Math.tan);case"LN":return this.Trigonometric(e[0],Math.log);case"LOG":return this.Trigonometric(e[0],n.default);case"EXP":return this.Trigonometric(e[0],Math.exp);case"SQRT":return this.Trigonometric(e[0],Math.sqrt);case"RAND":return this.RAND(e[0]);default:this.ThrowUnexpectedNode(a,"函数"+t+"不存在",t)}},this.CallCustomFunction=function(t,e,a,i){var r=Ha.CustomFunction.Data.get(t),n=a.GetStockCacheData({CustomName:t,Node:i});if(!r.Invoke)return{Out:n};D.Complier.Log("[JSAlgorithm::CallCustomFunction] call custom function functionInfo=",r);var o=this,s={Name:t,Args:e,Symbol:a.Symbol,Period:a.Period,Right:a.Right,KData:a.Data,DownloadData:n,ThrowError:function(t){o.ThrowUnexpectedNode(i,t)}};return r.Invoke(s)},this.ThrowUnexpectedNode=function(t,e,a){var i=t.Marker,r=e||"执行异常";return this.ErrorHandler.ThrowError(i.Index,i.Line,i.Column,r,a)}}function Qa(t,e){this.ErrorHandler=t,this.SymbolData=e,this.DRAWTEXT=function(t,e,a){var i=[],r={DrawData:i,DrawType:"DRAWTEXT",Text:a};if(Array.isArray(t)){if(t.length<=0)return r;var n=this.IsNumber(e),o=!1;for(var s in"TOP"!==e&&"BOTTOM"!==e||(r.FixedPosition=e,o=!0),t)i[s]=null,!isNaN(t[s])&&t[s]&&(n||o?i[s]=e:this.IsNumber(e[s])&&(i[s]=e[s]))}else if(this.IsNumber(t)&&t){n=this.IsNumber(e),o=!1;"TOP"!==e&&"BOTTOM"!==e||(r.FixedPosition=e,o=!0);for(s=0;s<this.SymbolData.Data.Data.length;++s)n||o?i[s]=e:this.IsNumber(e[s])&&(i[s]=e[s])}return r},this.DRAWTEXT_FIX=function(t,e,a,i,r){var n={Value:[],Text:[]},o={DrawData:n,DrawType:"DRAWTEXT_FIX",Text:null,Position:{X:e,Y:a,Type:i}};if(t.length<=0)return o;if(Array.isArray(t))for(var s in t)n.Text[s]=null,n.Value[s]=0,!isNaN(t[s])&&t[s]&&(n.Value[s]=1,n.Text[s]=r);else if(t)for(s=0;s<this.SymbolData.Data.Data.length;++s)n.Text[s]=r,n.Value[s]=1;return o},this.SUPERDRAWTEXT=function(t,e,a,i,r){var n=[],o={DrawData:n,DrawType:"SUPERDRAWTEXT",Text:a,YOffset:r,Direction:i,TextAlign:"center"};if(t.length<=0)return o;var s="number"==typeof e;for(var h in t)n[h]=null,!isNaN(t[h])&&t[h]&&(s?n[h]=e:this.IsNumber(e[h])&&(n[h]=e[h]));return o},this.STICKLINE=function(t,e,a,i,r){var n=[],o={DrawData:n,DrawType:"STICKLINE",Width:i,Type:r};o.Width<0&&(o.Width=3);var s="number"==typeof e,h="number"==typeof a;if(Array.isArray(t)){if(t.length<=0)return o;for(var l in t)if(n[l]=null,!isNaN(t[l])&&t[l])if(s&&h)n[l]={Value:e,Value2:a};else if(s&&!h){if(isNaN(a[l]))continue;n[l]={Value:e,Value2:a[l]}}else if(!s&&h){if(isNaN(e[l]))continue;n[l]={Value:e[l],Value2:a}}else{if(isNaN(e[l])||isNaN(a[l]))continue;n[l]={Value:e[l],Value2:a[l]}}}else{if(!t)return o;for(l=0;l<this.SymbolData.Data.Data.length;++l)if(n[l]=null,s&&h)n[l]={Value:e,Value2:a};else if(s&&!h){if(!Te.IsNumber(a[l]))continue;n[l]={Value:e,Value2:a[l]}}else if(!s&&h){if(!Te.IsNumber(e[l]))continue;n[l]={Value:e[l],Value2:a}}else{if(!Te.IsNumber(e[l])||!Te.IsNumber(a[l]))continue;n[l]={Value:e[l],Value2:a[l]}}}return o},this.DRAWLINE=function(t,e,a,i,r){var n=[],o={DrawData:n,DrawType:"DRAWLINE",Expand:r};if(t.length<=0)return o;for(var s=Math.max(t.length,a.length),h=!1,l=!1,u={Start:{},End:{},List:new Array},c=0;c<s;++c){if(n[c]=null,c<t.length&&c<a.length)if(0==h&&0==l){if(null==t[c]||!t[c])continue;h=!0,u.Start={ID:c,Value:e[c]}}else if(1==h&&0==l){if(!(f=null!=a[c]&&a[c])){t[c]&&(u.Start={ID:c,Value:e[c]});continue}f&&(l=!0,u.End={ID:c,Value:i[c]})}else if(1==h&&1==l){var f;if(f=null!=a[c]&&a[c])u.End={ID:c,Value:i[c]};else if(t[c]){var d=this.CalculateDrawLine(u);for(var C in d){var p=d[C];n[p.ID]=p.Value}1==r&&this.CalculateDrawDataExtendLine(n,u.Start.ID-2),h=l=!1,h=!0,l=!1,(u={Start:{},End:{}}).Start={ID:c,Value:e[c]}}}if(1==h&&1==l){var m=this.CalculateDrawLine(u);for(var D in m){var v=m[D];n[v.ID]=v.Value}}}return 1==r&&this.CalculateDrawDataExtendLine(n),o},this.DRAWBAND=function(t,e,a,i){Te.IsNumber(e)&&(e="rgb("+e+",0,0)"),Te.IsNumber(i)&&(i="rgb("+i+",0,0)");var r=[],n={DrawData:r,DrawType:"DRAWBAND",Color:[null,null]};e&&(n.Color[0]=e.toLowerCase()),i&&(n.Color[1]=i.toLowerCase());var o=Te.IsNumber(t),s=Te.IsNumber(a);if(o||s){if(o&&!s)for(h=a.length,l=0;l<h;++l){u={Value:t,Value2:null};l<a.length&&(u.Value2=a[l]),r.push(u)}else if(!o&&s)for(h=t.length,l=0;l<h;++l){u={Value:null,Value2:a};l<t.length&&(u.Value=t[l]),r.push(u)}else if(o&&s)for(h=this.SymbolData.Data.Data.length,l=0;l<h;++l){u={Value:t,Value2:a};r.push(u)}}else for(var h=Math.max(t.length,a.length),l=0;l<h;++l){var u={Value:null,Value2:null};l<t.length&&(u.Value=t[l]),l<a.length&&(u.Value2=a[l]),r.push(u)}return n},this.GetDataByIndex=function(t,e){var a={Result:!1,Data:null};return this.IsNumber(t)?(a.Result=!0,a.Data=t):e<t.length?(a.Result=!0,a.Data=t[e]):a.Result=!1,a},this.FILLRGN=function(t,e,a){var i=[],r={DrawData:i,DrawType:"FILLRGN"};this.IsNumber(e),this.IsNumber(a);if(Array.isArray(t))for(var n in t){if(i[n]=null,t[n])if((s=this.GetDataByIndex(e,n)).Result)if((h=this.GetDataByIndex(a,n)).Result){var o={Value:s.Data,Value2:h.Data};i[n]=o}}else if(t)for(n=0;n<this.SymbolData.Data.Data.length;++n){var s,h;if(i[n]=null,(s=this.GetDataByIndex(e,n)).Result)if((h=this.GetDataByIndex(a,n)).Result){o={Value:s.Data,Value2:h.Data};i[n]=o}}return r},this.DRAWKLINE=function(t,e,a,i){for(var r=[],n={DrawData:r,DrawType:"DRAWKLINE"},o=Math.max(t.length,e.length,a.length,i.length),s=0;s<o;++s){var h={Open:null,High:null,Low:null,Close:null};s<t.length&&s<e.length&&s<a.length&&s<i.length&&(h.Open=e[s],h.High=t[s],h.Low=a[s],h.Close=i[s]),r[s]=h}return n},this.DRAWKLINE_IF=function(t,e,a,i,r){for(var n=[],o={DrawData:n,DrawType:"DRAWKLINE_IF"},s=Math.max(t.length,e.length,a.length,i.length,r.length),h=0;h<s;++h){var l={Open:null,High:null,Low:null,Close:null};h<e.length&&h<a.length&&h<i.length&&h<r.length&&h<t.length&&t[h]&&(l.Open=a[h],l.High=e[h],l.Low=i[h],l.Close=r[h]),n[h]=l}return o},this.DRAWCOLORKLINE=function(t,e,a){var i=[],r={DrawData:i,DrawType:"DRAWCOLORKLINE",IsEmptyBar:!(0==a),Color:e};if(Array.isArray(t))for(var n=0;n<t.length&&n<this.SymbolData.Data.Data.length;++n){if(i[n]=null,t[n])(o=this.SymbolData.Data.Data[n])&&(i[n]={Open:o.Open,High:o.High,Low:o.Low,Close:o.Close})}else if(t)for(n=0;n<this.SymbolData.Data.Data.length;++n){var o;i[n]=null,(o=this.SymbolData.Data.Data[n])&&(i[n]={Open:o.Open,High:o.High,Low:o.Low,Close:o.Close})}return r},this.POLYLINE=function(t,e){var a=[],i={DrawData:a,DrawType:"POLYLINE"},r=!1;if("number"==typeof e)if(this.IsNumber(t)){if(t)for(var n=this.SymbolData.Data.Data.length,o=0;o<n;++o)a[o]=e}else{var s=!1;for(var o in t)if(a[o]=null,s)a[o]=e;else{if(!t[o])continue;s=!0,a[o]=e}}else{var h={Start:{},End:{},List:new Array};for(var l in t)if(a[l]=null,0==r){if(null==t[l]||!t[l])continue;if(l>=e.length||!this.IsNumber(e[l]))continue;r=!0,h.Start={ID:parseInt(l),Value:e[l]}}else if(1==r){if(null==t[l]||!t[l])continue;if(l>=e.length||!this.IsNumber(e[l]))continue;h.End={ID:parseInt(l),Value:e[l]};var u=this.CalculateDrawLine(h);for(var c in u){var f=u[c];a[f.ID]=f.Value}h={Start:{ID:h.End.ID,Value:h.End.Value},End:{}}}this.CalculateDrawDataExtendLine(a)}return i},this.CalculateDrawDataExtendLine=function(t,e){if(!(e<0)){var a=null,i=t.length;this.IsNumber(e)&&e<i&&(i=e);for(var r=i-1;r>=0;--r)if(this.IsNumber(t[r])){a=r;break}if(null!=a&&a-1>=0){var n=a-1;for(r=a+1;r<i;++r){var o=t[n],s=(o-t[a])*(r-n)/(a-n);if(o-s<0)break;t[r]=o-s}}}},this.DRAWNUMBER=function(t,e,a,i){var r={Value:[],Text:[]},n={DrawData:r,DrawType:"DRAWNUMBER"},o=2;Te.IsNumber(i)&&(o=i);var s={DataType:0,SingleValue:null,ArrayValue:null};Array.isArray(e)?(s.ArrayValue=e,s.DataType=2):("TOP"!==e&&"BOTTOM"!==e||(n.FixedPosition=e),s.SingleValue=e,s.DataType=1);var h={DataType:0,SingleValue:null,ArrayValue:null};if(Array.isArray(a)?(h.ArrayValue=a,h.DataType=2):(h.SingleValue=a,h.DataType=1,Te.IsNumber(a)&&(Te.IsInteger(a)?h.SingleValue=a.toString():text=a.toFixed(o))),Array.isArray(t))for(var l=0;l<t.length;++l)r.Value[l]=null,t[l]&&(r.Value[l]=this.DRAWNUMBER_Temp_PriceItem(l,s),r.Text[l]=this.DRAWNUMBER_Temp_NumberItem(l,h,o));else if(this.IsNumber(t)&&t)for(l=0;l<this.SymbolData.Data.Data.length;++l)r.Value[l]=this.DRAWNUMBER_Temp_PriceItem(l,s),r.Text[l]=this.DRAWNUMBER_Temp_NumberItem(l,h,o);return n},this.DRAWNUMBER_Temp_PriceItem=function(t,e){return e?1==e.DataType?e.SingleValue:Te.IsNonEmptyArray(e.ArrayValue)?e.ArrayValue[t]:null:null},this.DRAWNUMBER_Temp_NumberItem=function(t,e,a){if(!e)return null;if(1==e.DataType)return e.SingleValue;if(!Te.IsNonEmptyArray(e.ArrayValue))return null;var i=e.ArrayValue[t];return this.IsNumber(i)?Te.IsInteger(i)?i.toString():i.toFixed(a):i.toString()},this.DRAWNUMBER_FIX=function(t,e,a,i,r){var n={Value:[],Text:[]},o={DrawData:n,DrawType:"DRAWNUMBER_FIX",Position:{X:e,Y:a,Type:i}},s=Te.IsNumber(r);if(Array.isArray(t)){for(var h in t)if(n.Text[h]=null,n.Value[h]=null,t[h])if(s)n.Text[h]=this.RemoveZero(r.toFixed(2)),n.Value[h]=r;else{if(h>=r.length||!Te.IsNumber(r[h]))continue;var l=r[h];n.Text[h]=this.RemoveZero(l.toFixed(2)),n.Value[h]=l}}else if(t)for(h=0;h<this.SymbolData.Data.Data.length;++h)if(s)n.Text[h]=this.RemoveZero(r.toFixed(2)),n.Value[h]=r;else{if(h>=r.length||!Te.IsNumber(r[h]))continue;l=r[h];n.Text[h]=this.RemoveZero(l.toFixed(2)),n.Value[h]=l}else;return o},this.DRAWICON=function(t,e,a){if(Te.IsString(a)){var i=a.replace("ICO","");a=parseInt(i)}var r=Ha.GetDrawIcon(a);r||Ha.GetDrawTextIcon(a),r||(r={Symbol:"🚩"});var n=[],o={DrawData:n,DrawType:"DRAWICON",Icon:r,IconType:a};if(t.length<=0)return o;var s="number"==typeof e;if("number"==typeof t){if(!t)return o;for(var h=0;h<this.SymbolData.Data.Data.length;++h)s?n[h]=e:h<e.length&&this.IsNumber(e[h])?n[h]=e[h]:n[h]=null;return o}for(var h in t)n[h]=null,t[h]&&(s?n[h]=e:this.IsNumber(e[h])&&(n[h]=e[h]));return o},this.ICON=function(t,e){if(Te.IsString(e)){var a=e.replace("ICO","");e=parseInt(a)}var i=Ha.GetDrawIcon(e);i||Ha.GetDrawTextIcon(e),i||(i={Symbol:"🚩"});for(var r=[],n={DrawData:r,DrawType:"ICON",Icon:i},o=0;o<this.SymbolData.Data.Data.length;++o){var s=this.SymbolData.Data.Data[o];s&&(0==t?r[o]=s.Low:1==t&&(r[o]=s.High))}return n},this.TIPICON=function(t,e,a,i){if(Te.IsString(a)){var r=a.replace("ICO","");a=parseInt(r)}var n=[],o={DrawData:n,DrawType:"TIPICON",Icon:Ha.GetDrawIcon(a),IconType:a,Text:i};if(t.length<=0)return o;var s="number"==typeof e;if(Te.IsNumber(t)){if(!t)return o;for(var h=0;h<this.SymbolData.Data.Data.length;++h)s?n[h]=e:h<e.length&&Te.IsNumber(e[h])?n[h]=e[h]:n[h]=null}else if(Array.isArray(t))for(h=0;h<t.length;++h)n[h]=null,t[h]&&(s?n[h]=e:Te.IsNumber(e[h])&&(n[h]=e[h]));return o},this.DRAWCHANNEL=function(t,e,a,i,r,n,o){var s=[],h={DrawData:s,DrawType:"DRAWCHANNEL",Border:{}};if(t.length<=0)return h;if(i&&(h.Border.Color=i),o&&(h.AreaColor=o),r>0&&(h.Border.Width=r),n)if("0"==n)h.Border.Dotted=[];else{var l=n.split(",");for(var u in h.Border.Dotted=[],l){if(l[u]){var c=parseInt(l[u]);Te.IsNumber(c)&&(c<=0||h.Border.Dotted.push(c))}}h.Border.Dotted.length<=0&&(h.Border.Dotted=null)}var f="number"==typeof e,d="number"==typeof a;if("number"==typeof t){if(!t)return h;for(u=0;u<this.SymbolData.Data.Data.length;++u)if(s[u]=null,f&&d)s[u]={Value:e,Value2:a};else if(f&&!d){if(isNaN(a[u]))continue;s[u]={Value:e,Value2:a[u]}}else if(!f&&d){if(isNaN(e[u]))continue;s[u]={Value:e[u],Value2:a}}else{if(isNaN(e[u])||isNaN(a[u]))continue;s[u]={Value:e[u],Value2:a[u]}}}else for(u=0;u<t.length;++u)if(s[u]=null,!isNaN(t[u])&&t[u])if(f&&d)s[u]={Value:e,Value2:a};else if(f&&!d){if(isNaN(a[u]))continue;s[u]={Value:e,Value2:a[u]}}else if(!f&&d){if(isNaN(e[u]))continue;s[u]={Value:e[u],Value2:a}}else{if(isNaN(e[u])||isNaN(a[u]))continue;s[u]={Value:e[u],Value2:a[u]}}return h},this.RGB=function(t,e,a){return"RGB("+t+","+e+","+a+")"},this.RGBA=function(t,e,a,i){return"RGB("+t+","+e+","+a+","+i+")"},this.UPCOLOR=function(t){return t},this.DOWNCOLOR=function(t){return t},this.XMOVE=function(t){return t},this.YMOVE=function(t){return t},this.SOUND=function(t){return{Name:"SOUND",Value:t}},this.PLAYSOUND=function(t,e){return null},this.PARTLINE=function(t){var e=[],a={DrawData:e,DrawType:"PARTLINE"};if(t.length<3)return a;for(var i=t[0],r=[],n=1;n<t.length&&n+1<t.length;n+=2)r.push({Cond:t[n],RGB:t[n+1]});for(var n in i){var o={Value:null,RGB:null};e[n]=o;var s=i[n];if(this.IsNumber(s)){var h=null;for(var l in r){var u=r[l];if(Array.isArray(u.Cond)){if(n<u.Cond.length&&u.Cond[n]){h=u.RGB;break}}else if(this.IsNumber(u.Cond)&&u.Cond){h=u.RGB;break}}h&&(o.Value=s,o.RGB=h)}}return a},this.FILLRGN2=function(t){var e=[],a={DrawData:e,DrawType:"FILLRGN2"};if(t.length<4)return a;for(var i=t[0],r=t[1],n=[],o=2;o<t.length&&o+1<t.length;o+=2)n.push({Cond:t[o],Color:t[o+1]});for(o=0;o<this.SymbolData.Data.Data.length;++o){e[o]=null;var s={Value:null,Value2:null,Color:null};for(var h in n){var l=n[h];if(Array.isArray(l.Cond)){if(o<l.Cond.length&&l.Cond[o]){s.Color=l.Color;break}}else if(this.IsNumber(l.Cond)&&l.Cond){s.Color=l.Color;break}}if(s.Color){if(Array.isArray(i)){if(o>=i.length)continue;if(!this.IsNumber(i[o]))continue;s.Value=i[o]}else{if(!this.IsNumber(i))continue;s.Value=i}if(Array.isArray(r)){if(o>=r.length)continue;if(!this.IsNumber(r[o]))continue;s.Value2=r[o]}else{if(!this.IsNumber(r))continue;s.Value2=r}e[o]=s}}return a},this.FLOATRGN=function(t){var e=[],a={DrawData:e,DrawType:"FLOATRGN"};if(t.length<4)return a;for(var i=t[0],r=t[1],n=[],o=2;o<t.length&&o+1<t.length;o+=2)n.push({Cond:t[o],Color:t[o+1]});for(o=0;o<this.SymbolData.Data.Data.length;++o){e[o]=null;var s={Value:null,Value2:null,Color:null};for(var h in n){var l=n[h];if(Array.isArray(l.Cond)){if(o<l.Cond.length&&l.Cond[o]){s.Color=l.Color;break}}else if(this.IsNumber(l.Cond)&&l.Cond){s.Color=l.Color;break}}if(s.Color){if(Array.isArray(i)){if(o>=i.length)continue;if(!this.IsNumber(i[o]))continue;s.Value=i[o]}else{if(!this.IsNumber(i))continue;s.Value=i}if(Array.isArray(r)){if(o>=r.length)continue;if(!this.IsNumber(r[o]))continue;s.Value2=r[o]}else{if(!this.IsNumber(r))continue;s.Value2=r}e[o]=s}}return a},this.FILLBGRGN=function(t,e){var a=[],i={DrawData:a,DrawType:1==t?"FILLTOPRGN":"FILLBOTTOMRGN"};if(e.length<3)return i;for(var r=e[0],n=[],o=1;o<e.length&&o+1<e.length;o+=2)n.push({Cond:e[o],Color:e[o+1]});for(o=0;o<this.SymbolData.Data.Data.length;++o){a[o]=null;var s={Value:null,Color:null};for(var h in n){var l=n[h];if(Array.isArray(l.Cond)){if(o<l.Cond.length&&l.Cond[o]){s.Color=l.Color;break}}else if(this.IsNumber(l.Cond)&&l.Cond){s.Color=l.Color;break}}if(s.Color){if(Array.isArray(r)){if(o>=r.length)continue;if(!this.IsNumber(r[o]))continue;s.Value=r[o]}else{if(!this.IsNumber(r))continue;s.Value=r}a[o]=s}}return i},this.FILLVERTICALRGN=function(t){var e=[],a={DrawData:e,DrawType:"FILLVERTICALRGN"};if(t.length<2)return a;for(var i=[],r=0;r<t.length&&r+1<t.length;r+=2)i.push({Cond:t[r],Color:t[r+1]});for(r=0;r<this.SymbolData.Data.Data.length;++r){e[r]=null;var n={Color:null};for(var o in i){var s=i[o];if(Array.isArray(s.Cond)){if(r<s.Cond.length&&s.Cond[r]){n.Color=s.Color;break}}else if(this.IsNumber(s.Cond)&&s.Cond){n.Color=s.Color;break}}n.Color&&(e[r]=n)}return a},this.DRAWGBK=function(t,e,a,i){var r={Color:[],Angle:i};e&&r.Color.push(e),a&&r.Color.push(a);var n={DrawData:null,DrawType:"DRAWGBK"};if(Array.isArray(t))for(var o in t){if(t[o]){n.DrawData=r;break}}else t&&(n.DrawData=r);return n},this.DRAWGBK2=function(t,e,a,i){var r={Color:[],Angle:i};e&&r.Color.push(e),a&&r.Color.push(a);var n={DrawData:null,DrawType:"DRAWGBK2"};if(Array.isArray(t)){for(var o in r.Data=[],t){var s=t[o];r.Data[o]=s?1:0}n.DrawData=r}else t&&(n.DrawData=r,n.DrawType="DRAWGBK");return n},this.DRAWGBK_DIV=function(t,e,a,i,r){var n={AryColor:[e,a],ColorType:i,FillType:r,Data:[]},o={DrawData:n,DrawType:"DRAWGBK_DIV"};if(!this.SymbolData||!this.SymbolData.Data||!Te.IsNonEmptyArray(this.SymbolData.Data.Data))return o;var s=this.SymbolData.Data.Data;if(Array.isArray(t))for(var h=0;h<s.length;++h){var l=null;if(t[h]){var u=s[h];l=1==r?{AryValue:[u.High,u.Low]}:2==r?{AryValue:[u.Open,u.Close]}:{AryValue:null}}n.Data[h]=l}else if(t)for(h=0;h<s.length;++h){u=s[h],l=null;l=1==r?{AryValue:[u.High,u.Low]}:2==r?{AryValue:[u.Open,u.Close]}:{AryValue:null},n.Data[h]=l}return o},this.DRAWTEXT_LINE=function(t,e,a,i,r,n,o){var s={Text:{Title:a,Color:i},Line:{Type:n,Color:o}};r<=0&&(r=12),s.Text.Font=r*A()+"px 微软雅黑";var h={DrawData:null,DrawType:"DRAWTEXT_LINE"};if(Array.isArray(t))for(var l in t){if(t[l]){Array.isArray(e)?s.Price=e[l]:s.Price=e,h.DrawData=s;break}}else t&&(Array.isArray(e)?s.Price=e[0]:s.Price=e,h.DrawData=s);return h},this.DRAWRECTREL=function(t,e,a,i,r){var n={Rect:{Left:Math.min(t,a),Top:Math.min(e,i),Right:Math.max(a,t),Bottom:Math.max(i,e)},Color:r};return 0==r&&(n.Color=null),{DrawData:n,DrawType:"DRAWRECTREL"}},this.DRAWTEXTREL=function(t,e,a){var i={Point:{X:t,Y:e}};return Te.IsString(a)?i.Text=a:Te.IsNonEmptyArray(a)&&(i.Text=a[0]),{DrawData:i,DrawType:"DRAWTEXTREL"}},this.DRAWTEXTABS=function(t,e,a){var i={Point:{X:t,Y:e}};return Te.IsString(a)?i.Text=a:Te.IsNonEmptyArray(a)&&(i.Text=a[0]),{DrawData:i,DrawType:"DRAWTEXTABS"}},this.DRAWOVERLAYLINE=function(t,e,a){var i={Data:t,MainData:e};return a&&"string"==typeof a&&(i.Title=a),{DrawData:i,DrawType:"DRAWOVERLAYLINE"}},this.DRAWSL=function(t,e,a,i,r){var n={Data:[],Option:[]},o={DrawData:n,DrawType:"DRAWSL"},s=this.IsNumber(e);if(Array.isArray(t))for(var h in t)n[h]=null,t[h]&&(s?(n.Data[h]=e,n.Option[h]={Slope:a,Length:i,Direct:r}):h<e.length&&this.IsNumber(e[h])&&(n.Data[h]=e[h],n.Option[h]={Slope:a,Length:i,Direct:r}));else if(t){var l=this.SymbolData.Data.Data.length;for(h=0;h<l;++h)n[h]=null,s?(n.Data[h]=e,n.Option[h]={Slope:a,Length:i,Direct:r}):h<e.length&&this.IsNumber(e[h])&&(n.Data[h]=e[h],n.Option[h]={Slope:a,Length:i,Direct:r})}return o},this.VERTLINE=function(t,e){var a={Data:[],LineType:e},i={DrawData:a,DrawType:"VERTLINE"};if(Array.isArray(t))for(var r=0;r<t.length;++r){var n=t[r];a.Data[r]=n?1:0}return i},this.HORLINE=function(t,e,a,i){var r={Data:[],LineType:a,Extend:i},n={DrawData:r,DrawType:"HORLINE"};if(Array.isArray(t)&&Array.isArray(e))for(var o=0;o<t.length;++o){var s=t[o];if(r.Data[o]=null,s&&!(o>=e.length)){var h=e[o];Te.IsNumber(h)&&(r.Data[o]=h)}}else if(Array.isArray(t)&&Te.IsNumber(e))for(o=0;o<t.length;++o){s=t[o];r.Data[o]=null,s&&(r.Data[o]=e)}else if(Te.IsNumber(t)&&t&&this.SymbolData&&this.SymbolData.Data&&this.SymbolData.Data.Data)if(Array.isArray(e)){var l=this.SymbolData.Data.Data.length;for(o=0;o<l;++o)if(r.Data[o]=null,!(o>=e.length)){h=e[o];Te.IsNumber(h)&&(r.Data[o]=h)}}else if(Te.IsNumber(e))for(l=this.SymbolData.Data.Data.length,o=0;o<l;++o)r.Data[o]=e;return n},this.BACKGROUND=function(t,e,a,i,r,n){var o={Margin:[0,1,1,1]};return t&&(o.Color=t),e&&(o.Border=e),Te.IsNumber(a)&&(o.Margin[2]=a),Te.IsNumber(i)&&(o.Margin[3]=i),Te.IsNumber(r)&&(o.Margin[0]=r),Te.IsNumber(n)&&(o.Margin[1]=n),o},this.CKLINE=function(t,e,a,i){var r={Color:t,LineWidth:1,LineType:0,LineDot:[3,3]};if(Te.IsPlusNumber(e)&&(r.LineWidth=e),Te.IsPlusNumber(a)&&(r.LineType=a),i){var n=i.split(","),o=[];for(var s in n){if(l=n[s]){var h=parseInt(n[s]);h<=0||o.push(h)}}o.length>0&&(r.LineDotted=o)}r.Data=[];for(s=0;s<this.SymbolData.Data.Data.length;++s){var l=this.SymbolData.Data.Data[s];r.Data[s]={High:l.High,Low:l.Low}}return r}}Za.prototype.IsNumber=function(t){return null!=t&&!isNaN(t)},Za.prototype.IsDivideNumber=function(t){return null!=t&&(!isNaN(t)&&0!=t)},Za.MOD=function(t,e){if(!(t<0&&e<0||t>=0&&e>=0)){var a=Math.abs(t),i=Math.abs(e);r=Math.abs(Math.abs(e)*(Math.floor(a/i)+1)-Math.abs(t));return e<0&&(r=-r),r}return parseInt(t)==t&&parseInt(e)==e?t%e:r=parseFloat((t-Math.floor(t/e)*e).toFixed(1));var r},Qa.prototype.CalculateDrawLine=function(t){t.List=[];for(var e=t.Start.ID;e<=t.End.ID;++e)t.List.push(e);var a=Math.abs(t.Start.Value-t.End.Value),i=t.List.length-1,r=[];if(r.push({ID:t.Start.ID,Value:t.Start.Value}),t.Start.Value>t.End.Value)for(var n=1;n<t.List.length-1;++n){var o=a*(t.List.length-1-n)/i+t.End.Value;r.push({ID:t.List[n],Value:o})}else for(var s=1;s<t.List.length-1;++s){o=a*s/i+t.Start.Value;r.push({ID:t.List[s],Value:o})}return r.push({ID:t.End.ID,Value:t.End.Value}),r},Qa.prototype.IsNumber=function(t){return null!=t&&!isNaN(t)},Qa.prototype.IsDrawFunction=function(t){return!!new c.default(["STICKLINE","DRAWTEXT","SUPERDRAWTEXT","DRAWLINE","DRAWBAND","DRAWKLINE","DRAWKLINE1","DRAWKLINE_IF","DRAWCOLORKLINE","PLOYLINE","POLYLINE","DRAWNUMBER","DRAWNUMBER_FIX","DRAWICON","DRAWCHANNEL","PARTLINE","DRAWTEXT_FIX","DRAWGBK","DRAWTEXT_LINE","DRAWRECTREL","DRAWTEXTABS","DRAWTEXTREL","DRAWOVERLAYLINE","FILLRGN","FILLRGN2","FILLTOPRGN","FILLBOTTOMRGN","FILLVERTICALRGN","FLOATRGN","DRAWSL","DRAWGBK2","DRAWGBK_DIV","VERTLINE","HORLINE","TIPICON"]).has(t)},Qa.prototype.RemoveZero=function(t){for(;t.length>0;){var e=t.length-1,a=t[e];if("0"!=a){if("."==a){t=t.substr(0,e);break}break}t=t.substr(0,e)}return t};var $a={YCLOSE:3,OPEN:4,HIGH:5,LOW:6,CLOSE:7,VOL:8,AMOUNT:10,AMPLITUDE:13,INCREASE:14,EXCHANGERATE:37};function ti(t,e,a){this.AST=t,this.Execute=a,this.Symbol="600000.sh",this.Name,this.Data=null,this.PeriodData=new C.default,this.IsApiPeriod=!1,this.SourceData=null,this.MarketValue=null,this.Period=0,this.Right=0,this.DataType=0,this.IsBeforeData=!1,this.DayCount,this.Arguments=[],this.KLineApiUrl=Ha.Domain+"/API/KLine2",this.MinuteKLineApiUrl=Ha.Domain+"/API/KLine3",this.RealtimeApiUrl=Ha.Domain+"/API/stock",this.HistoryMinuteApiUrl=ia.Domain+"/API/StockMinuteData",this.StockHistoryDayApiUrl=Ha.Domain+"/API/StockHistoryDay",this.StockHistoryDay3ApiUrl=Ha.Domain+"/API/StockHistoryDay3",this.StockHistoryDay2ApiUrl=Ha.Domain+"/API/StockHistoryDay2",this.StockNewsAnalysisApiUrl=Ha.CacheDomain+"/cache/newsanalyze",this.HKToSHSZApiUrl=[Ha.CacheDomain+"/cache/historyday/all/hk2shsz.json",Ha.CacheDomain+"/cache/analyze/hk2shsz/hk2shsz.json",Ha.Domain+"/API/HKToSHSZMinuteData",Ha.CacheDomain+"/cache/analyze/hk2szshanalyze"],this.MaxRequestDataCount=1e3,this.MaxRequestMinuteDayCount=5,this.KLineDateTimeRange,this.LatestData=new C.default,this.IndexData,this.LatestIndexData,this.MarginData=new C.default,this.HKToSHSZData=new C.default,this.NewsAnalysisData=new C.default,this.ExtendData=new C.default,this.UserData=new C.default,this.CustomAPIData=new C.default,this.ScriptIndexOutData=new C.default,this.OtherSymbolData=new C.default,this.StockData=new C.default,this.SectionFinanceData=new C.default,this.ThrowSFPeirod=new c.default,this.NetworkFilter,this.DrawInfo,e&&(e.HQDataType&&(this.DataType=e.HQDataType),e.Data&&(this.Data=e.Data,this.DataType!=ri.MINUTE_ID&&this.DataType!=ri.MULTIDAY_MINUTE_ID&&this.DataType!=ri.HISTORY_MINUTE_ID&&(this.Period=e.Data.Period,this.Right=e.Data.Right)),e.SourceData&&(this.SourceData=e.SourceData),e.Symbol&&(this.Symbol=e.Symbol),e.Name&&(this.Name=e.Name),e.MaxRequestDataCount>0&&(this.MaxRequestDataCount=e.MaxRequestDataCount),e.MaxRequestMinuteDayCount>0&&(this.MaxRequestMinuteDayCount=e.MaxRequestMinuteDayCount),e.KLineApiUrl&&(this.KLineApiUrl=e.KLineApiUrl),e.Right&&(this.Right=e.Right),e.Period&&(this.Period=e.Period),!0===e.IsBeforeData&&(this.IsBeforeData=e.IsBeforeData),e.NetworkFilter&&(this.NetworkFilter=e.NetworkFilter),e.DayCount>0&&(this.DayCount=e.DayCount),e.Arguments&&(this.Arguments=e.Arguments),e.KLineRange&&(this.KLineDateTimeRange=e.KLineRange),e.IsApiPeriod&&(this.IsApiPeriod=e.IsApiPeriod),e.DrawInfo&&(this.DrawInfo=e.DrawInfo)),this.RecvError=function(t){throw D.Complier.Log("[JSSymbolData::RecvError] ajax error.",t.status),{FunctionName:"RecvError",Request:t}},this.GetLatestDataKey=function(t){return t="DYNAINFO-"+t},this.GetLatestData=function(t){var e=this.JobArgumentsToArray(t,1),a=e[0],i=this.GetLatestDataKey(a);if(this.LatestData.has(i))return this.Execute.RunNextJob();var r=this;if(this.NetworkFilter){var n={Name:"JSSymbolData::GetLatestData",Explain:"DYNAINFO()",Args:e,Request:{Url:r.RealtimeApiUrl,Type:"POST",Data:{symbol:[this.Symbol],field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","exchangerate","amplitude"]}},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(t){r.RecvLatestData(t),r.Execute.RunNextJob()}),1==n.PreventDefault)return}v.HttpRequest({url:r.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","exchangerate","amplitude"],symbol:[this.Symbol]},type:"post",dataType:"json",async:!0,success:function(t){r.RecvLatestData(t),r.Execute.RunNextJob()},error:function(t){r.RecvError(t)}})},this.RecvLatestData=function(t){if(2!=t.ver){if(t.stock&&1==t.stock.length){var e=t.stock[0];e&&(Te.IsNumber(e.yclose)&&this.LatestData.set($a.YCLOSE,e.yclose),Te.IsNumber(e.open)&&this.LatestData.set($a.OPEN,e.open),Te.IsNumber(e.high)&&this.LatestData.set($a.HIGH,e.high),Te.IsNumber(e.low)&&this.LatestData.set($a.LOW,e.low),Te.IsNumber(e.price)&&this.LatestData.set($a.CLOSE,e.price),Te.IsNumber(e.vol)&&this.LatestData.set($a.VOL,e.vol),Te.IsNumber(e.amount)&&this.LatestData.set($a.AMOUNT,e.amount),Te.IsNumber(e.increase)&&this.LatestData.set($a.INCREASE,e.increase),Te.IsNumber(e.exchangerate)&&this.LatestData.set($a.EXCHANGERATE,e.exchangerate),Te.IsNumber(e.amplitude)&&this.LatestData.set($a.AMPLITUDE,e.amplitude),D.Complier.Log("[JSSymbolData::RecvLatestData] symbol, LatestData",e.symbol,this.LatestData))}}else this.RecvLatestDataVer2(t)},this.RecvLatestDataVer2=function(t){if(Te.IsNonEmptyArray(t.data)){for(var e=t.symbol,a=0;a<t.data.length;++a){var i=t.data[a];i&&(Te.IsNumber(i.id)&&(Te.IsNumber(i.value)||Te.IsString(i.value))&&(D.Complier.Log("[JSSymbolData::RecvLatestDataVer2] symbol="+e+" DYNAINFO("+i.id+")="+i.value+"."),this.LatestData.set(i.id,i.value)))}D.Complier.Log("[JSSymbolData::RecvLatestDataVer2]",this.LatestData)}},this.GetLatestCacheData=function(t){return this.LatestData.has(t)?this.LatestData.get(t):null},this.GetLatestIndexData=function(){if(this.LatestIndexData)return this.Execute.RunNextJob();var t=this;if(this.NetworkFilter){var e={Name:"JSSymbolData::GetLatestIndexData",Explain:"最新大盘数据",Request:{Url:t.RealtimeApiUrl,Type:"POST",Data:{symbol:["000001.sh"],field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","amplitude"]}},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){t.RecvLatestIndexData(e),t.Execute.RunNextJob()}),1==e.PreventDefault)return}v.HttpRequest({url:t.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","amplitude"],symbol:["000001.sh"]},type:"post",dataType:"json",async:!0,success:function(e){t.RecvLatestIndexData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})},this.RecvLatestIndexData=function(t){if(t.stock&&1==t.stock.length){var e=t.stock[0];this.LatestIndexData={Symbol:e.symbol,Name:e.name,Date:e.date,Time:e.time,YClose:e.yclose,Price:e.price,Open:e.open,High:e.high,Low:e.low,Vol:e.vol,Amount:e.amount,Increase:e.increase,Amplitude:e.amplitude},D.Complier.Log("[JSSymbolData::RecvLatestIndexData]",this.LatestIndexData)}},this.GetLatestIndexCacheData=function(t){if(!this.LatestIndexData)return null;switch(t){case"FROMOPEN":var e=parseInt(this.LatestIndexData.Time/100),a=60*parseInt(e/100)+e%100;return a<=565?0:a<570?1:a<=690?a-570+1:a<780?121:a<=900?122+a-780:242;default:return null}},this.GetVolRateData=function(t,e){var a=t.ID.toString()+"-VolRate-"+this.Symbol;if(this.ExtendData.has(a))return this.Execute.RunNextJob();var i=this,r=30;if(this.NetworkFilter){var n=this.Data.GetDateRange();r=1;this.DataType==ri.MULTIDAY_MINUTE_ID&&(r=this.DayCount);var o={Name:"JSSymbolData::GetVolRateData",Explain:"分时量比数据(成交量)",Request:{Url:i.KLineApiUrl,Type:"POST",Data:{symbol:i.Symbol,dayCount:r,field:["name","symbol","vol"],period:0,right:0,dateRange:n}},Self:this,PreventDefault:!1};if(this.NetworkFilter(o,function(t){i.RecvVolRateData(t,a),i.Execute.RunNextJob()}),1==o.PreventDefault)return}v.HttpRequest({url:i.KLineApiUrl,data:{field:["name","symbol","vol"],symbol:i.Symbol,start:-1,count:r},type:"post",dataType:"json",async:!0,success:function(t){i.RecvVolRateData(t,a),i.Execute.RunNextJob()},error:function(t){i.RecvError(t)}})},this.RecvVolRateData=function(t,e){var a=0,i=0,r=new C.default;if(2==t.Ver){if(!Te.IsNonEmptyArray(t.data))return;for(var n=0;n<t.data.length;++n){var o=t.data[n];Te.IsNonEmptyArray(o)&&(o.length<2||Te.IsNumber(o[0])&&Te.IsPlusNumber(o[1])&&r.set(o[0],{AvgVol5:o[1]}))}}else{if(!Te.IsNonEmptyArray(t.data))return;var s=241;Te.IsNumber(t.minutecount)&&(s=t.minutecount);n=0;for(var h=0,l=0;n<t.data.length;++n){for(a=0,h=n,l=0;h>=0&&l<5;--h,++l){o=t.data[h];Te.IsNumber(o[6])&&(a+=o[6])}if(l>0){i=a/l/s;o=t.data[n];r.set(o[0],{AvgVol5:i})}}}r.size>0&&this.ExtendData.set(e,r),D.Complier.Log("[JSSymbolData::RecvVolRateData]",r)},this.GetVolRateCacheData=function(t){var e=ai.JOB_DOWNLOAD_VOLR_DATA.toString()+"-VolRate-"+this.Symbol;e&&this.ExtendData.has(e)||this.Execute.ThrowUnexpectedNode(t,"不支持VOLR");for(var a=[],i=this.ExtendData.get(e),r=0,n=0,o=null,s=0,h=0;s<this.Data.Data.length;++s){a[s]=null;var l=this.Data.Data[s];if(n!=l.Date){if(o=null,h=0,r=0,i.has(l.Date))o=i.get(l.Date).AvgVol5;n=l.Date}null!=o&&(r+=l.Vol,a[s]=r/(h+1)/o*100,++h)}return a},this.GetIndexData=function(){if(this.IndexData)return this.Execute.RunNextJob();var t=this;if(pt.IsDayPeriod(this.Period,!0)){if(this.NetworkFilter){var e=this.Data.GetDateRange(),a={Name:"JSSymbolData::GetIndexData",Explain:"大盘数据",Period:t.Period,Request:{Url:t.KLineApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol","up","down","stop","unchanged"],indexSymbol:"000001.sh",symbol:this.Symbol,period:this.Period,dateRange:e}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.RecvIndexHistroyData(e),t.Execute.RunNextJob()}),1==a.PreventDefault)return}v.HttpRequest({url:t.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","up","down","stop","unchanged"],symbol:"000001.sh",start:-1,count:t.MaxRequestDataCount+500},type:"post",dataType:"json",async:!0,success:function(e){t.RecvIndexHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}else if(pt.IsMinutePeriod(this.Period,!0)){if(this.NetworkFilter){e=this.Data.GetDateRange(),a={Name:"JSSymbolData::GetIndexData",Explain:"大盘数据",Period:t.Period,Request:{Url:t.MinuteKLineApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol"],indexSymbol:"000001.sh",symbol:this.Symbol,period:this.Period,dateRange:e}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.RecvIndexMinuteHistroyData(e),t.Execute.RunNextJob()}),1==a.PreventDefault)return}v.HttpRequest({url:t.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:"000001.sh",start:-1,count:t.MaxRequestMinuteDayCount+5},type:"post",dataType:"json",async:!0,success:function(e){t.RecvIndexMinuteHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}},this.RecvIndexHistroyData=function(t){D.Complier.Log("[JSSymbolData::RecvIndexHistroyData] recv data",t);var e=this.JsonDataToHistoryData(t);if(this.IndexData=new pt,this.IndexData.DataType=0,this.IndexData.Data=e,1==this.IsApiPeriod)this.IndexData.Period=this.Period,this.IndexData.Data=this.Data.FixKData(e,this.Period);else{var a=this.SourceData.GetOverlayData(this.IndexData.Data);if(this.IndexData.Data=a,pt.IsDayPeriod(this.Period,!1)){var i=this.IndexData.GetPeriodData(this.Period);this.IndexData.Data=i}}},this.RecvIndexMinuteHistroyData=function(t){D.Complier.Log("[JSSymbolData::RecvIndexMinuteHistroyData] recv data",t);var e=this.JsonDataToMinuteHistoryData(t);if(this.IndexData=new pt,this.IndexData.DataType=1,this.IndexData.Data=e,1==this.IsApiPeriod)this.IndexData.Period=this.Period,this.IndexData.Data=this.Data.FixKData(e,this.Period);else if(pt.IsMinutePeriod(this.Period,!1)){var a=this.IndexData.GetPeriodData(this.Period);this.IndexData.Data=a}},this.GetOtherSymbolParam=function(t){var e=t.split("$");if(!new c.default(["CLOSE","C","VOL","V","OPEN","O","HIGH","H","LOW","L","AMOUNT","AMO","VOLINSTK"]).has(e[1]))return null;var a=e[0];if(6==a.length)"6"==a[0]||"5"==a[0]||"8"==a[0]||"9"==a[0]?a+=".SH":"0"!=a[0]&&"1"!=a[0]&&"2"!=a[0]&&"3"!=a[0]||(a+=".SZ");else if(0==a.indexOf("SZ"))a=a.substr(2)+".SZ";else if(0==a.indexOf("SH"))a=a.substr(2)+".SH";else{if(!(a.indexOf("_")>0))return null;var i=a.split("_");a=i[1]+"."+i[0]}return{Symbol:a.toLowerCase(),DataName:e[1]}},this.GetOtherSymbolData=function(t){var e=this.Symbol;if(t.Literal){if(!(i=this.GetOtherSymbolParam(t.Literal.toUpperCase()))){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,t.Literal+" Error.")}e=i.Symbol}else{var i;if((i=t.Args).length>0){var r=i[0];if(r.Type==ja.Literal)e=r.Value;else if(r.Type==ja.Identifier){var n=!1;for(var o in this.Arguments){var s=this.Arguments[o];if(s.Name==r.Name){e=s.Value,n=!0;break}}if(!n){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,t.FunctionName+"() Error: can't read "+r.Name)}}}}if(t.Symbol=e.toLowerCase(),t.Symbol==this.Symbol)return this.Execute.RunNextJob();if(this.OtherSymbolData.has(t.Symbol))return this.Execute.RunNextJob();var h=this;if(this.DataType==ri.KLINE_ID&&pt.IsDayPeriod(this.Period,!0)){if(this.NetworkFilter){var l=this.Data.GetDateRange(),u={Name:"JSSymbolData::GetOtherSymbolData",Explain:"指定个股数据",Request:{Data:{symbol:t.Symbol,right:h.Right,period:h.Period,dateRange:l}},Self:this,PreventDefault:!1};if(this.NetworkFilter(u,function(e){h.RecvOtherSymbolKData(e,t),h.Execute.RunNextJob()}),1==u.PreventDefault)return}v.HttpRequest({url:h.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:h.MaxRequestDataCount+500},type:"post",dataType:"json",async:!0,success:function(e){h.RecvOtherSymbolKDayData(e,t),h.Execute.RunNextJob()},error:function(t){h.RecvError(t)}})}else if(pt.IsMinutePeriod(this.Period,!0)||this.DataType==ri.MINUTE_ID||this.DataType==ri.MULTIDAY_MINUTE_ID){if(this.NetworkFilter){l=this.Data.GetDateRange(),u={Name:"JSSymbolData::GetOtherSymbolData",Explain:"指定个股数据",Request:{Data:{symbol:t.Symbol,right:h.Right,period:h.Period,dateRange:l}},Self:this,PreventDefault:!1};if(this.NetworkFilter(u,function(e){h.RecvOtherSymbolKData(e,t),h.Execute.RunNextJob()}),1==u.PreventDefault)return}v.HttpRequest({url:h.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:h.MaxRequestMinuteDayCount+5},type:"post",dataType:"json",async:!0,success:function(e){h.RecvOtherSymbolKMinuteData(e,t),h.Execute.RunNextJob()},error:function(t){h.RecvError(t)}})}},this.RecvOtherSymbolKData=function(t,e){D.Complier.Log("[JSSymbolData::RecvOtherSymbolKData] recv data",t);var a=new pt,i=null,r=this.Period;this.DataType==ri.KLINE_ID&&pt.IsDayPeriod(this.Period,!0)?(i=this.JsonDataToHistoryData(t),a.DataType=0):(i=this.JsonDataToMinuteHistoryData(t),a.DataType=1,this.DataType!=ri.MINUTE_ID&&this.DataType!=ri.MULTIDAY_MINUTE_ID||(r=4)),a.Period=this.Period,a.Right=this.Right,a.Data=this.Data.FixKData(i,r),this.OtherSymbolData.set(e.Symbol,a)},this.RecvOtherSymbolKDayData=function(t,e){D.Complier.Log("[JSSymbolData::RecvOtherSymbolKDayData] recv data",t);var a=this.JsonDataToHistoryData(t),i=new pt;i.DataType=0,i.Data=a;var r=this.SourceData.GetOverlayData(i.Data);if(i.Data=r,pt.IsDayPeriod(this.Period,!1)){var n=i.GetPeriodData(this.Period);i.Data=n}this.OtherSymbolData.set(e.Symbol,i)},this.RecvOtherSymbolKMinuteData=function(t,e){D.Complier.Log("[JSSymbolData::RecvOtherSymbolKMinuteData] recv data",t);var a=this.JsonDataToMinuteHistoryData(t),i=new pt;if(i.DataType=1,i.Data=a,pt.IsMinutePeriod(this.Period,!1)){var r=i.GetPeriodData(this.Period);i.Data=r}this.OtherSymbolData.set(e.Symbol,i)},this.GetOtherSymolCacheData=function(t){var e,a;if(t.FunctionName){if(a=t.FunctionName,(i=t.Args).length<=0)return this.GetSymbolCacheData(a);e=i[0].toString().toLowerCase()}else if(t.Literal){var i;if(!(i=this.GetOtherSymbolParam(t.Literal.toUpperCase())))return[];e=i.Symbol,a=i.DataName}if(e==this.Symbol)return this.GetSymbolCacheData(a);if(!this.OtherSymbolData.has(e))return[];var r=this.OtherSymbolData.get(e),n=e.toUpperCase();switch(a){case"CLOSE":case"C":return r.GetClose();case"VOL":case"V":return Ea.IsSHSZ(n)?r.GetVol(100):r.GetVol();case"OPEN":case"O":return r.GetOpen();case"HIGH":case"H":return r.GetHigh();case"LOW":case"L":return r.GetLow();case"AMOUNT":case"AMO":return r.GetAmount();case"VOLINSTK":return r.GetPosition()}},this.GetIndexCacheData=function(t){if(!this.IndexData)return new Array;switch(t){case"INDEXA":return this.IndexData.GetAmount();case"INDEXC":return this.IndexData.GetClose();case"INDEXH":return this.IndexData.GetHigh();case"INDEXL":return this.IndexData.GetLow();case"INDEXO":return this.IndexData.GetOpen();case"INDEXV":return this.IndexData.GetVol();case"INDEXADV":return this.IndexData.GetUp();case"INDEXDEC":return this.IndexData.GetDown()}},this.GetBlockSymbol=function(t){var e=new C.default([["沪深A股","CNA.ci"],["创业板","GEM.ci"],["沪市A股","SHA.ci"],["中小板","SME.ci"],["深市A股","SZA.ci"]]);if(e.has(t))return e.get(t);if(!t)return null;var a=null,i=t.toUpperCase();if(i.indexOf(".SH")>0||i.indexOf(".SZ")>0){if(!new c.default(["000001.SH","000003.SH","000016.SH","000300.SH","000905.SH","399001.SZ"," 399005.SZ","399006.SZ"]).has(i))return null;a=t.replace(".SH",".sh"),a=t.replace(".SZ",".sz")}else t.indexOf(".CI")>0&&(a=t.replace(".CI",".ci"));return a},this.GetIndexIncreaseData=function(t){var e=null;if(t.IsSelfSymbol)e=this.Symbol;else{if(!t.Args||t.Args.length<=0){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,t.FunctionName+" Error: 参数不能为空")}e=t.Args[0].Value}var i=this.GetBlockSymbol(e);if(!i){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,t.FunctionName+" Error: can't support "+e)}var r=t.ID.toString()+"-UpCount-"+i,n=t.ID.toString()+"-DownCount-"+i;if(this.ExtendData.has(r)&&this.ExtendData.has(n))return this.Execute.RunNextJob();var o=this;if(this.NetworkFilter){var s={Type:this.DataType};this.DataType===ri.KLINE_ID&&(s.Period=this.Period);var h={Name:"JSSymbolData::GetIndexIncreaseData",Explain:"涨停家数统计",DateRange:this.Data.GetDateRange(),DataType:s,Request:{Url:"数据地址",Type:"POST",Data:{symbol:this.Symbol,blocksymbol:i,field:["up","down"]}},Self:this,PreventDefault:!1};if(this.NetworkFilter(h,function(t){this.DataType===ri.KLINE_ID?this.RecvHistoryIncreaseDataV2(t,{UpKey:r,DownKey:n}):this.RecvMinuteIncreaseDataV2(t,{UpKey:r,DownKey:n}),o.Execute.RunNextJob()}),1==h.PreventDefault)return}if(this.DataType===ri.MINUTE_ID||this.DataType===ri.MULTIDAY_MINUTE_ID){var l=Ha.CacheDomain+"/cache/analyze/increaseanalyze/"+i+".json";D.Complier.Log("[JSSymbolData::GetIndexIncreaseData] minute Get url=",l),v.HttpRequest({url:l,type:"get",dataType:"json",async:!0,success:function(t){o.RecvMinuteIncreaseData(t,{UpKey:r,DownKey:n}),o.Execute.RunNextJob()},error:function(t){o.RecvError(t)}})}else this.DataType===ri.KLINE_ID&&pt.IsDayPeriod(this.Period,!0)?(D.Complier.Log("[JSSymbolData::GetIndexIncreaseData] K day Get url=",o.KLineApiUrl),v.HttpRequest({url:o.KLineApiUrl,data:{symbol:i,start:-1,count:o.MaxRequestDataCount,field:["up","down"]},type:"post",dataType:"json",async:!0,success:function(t){o.RecvHistoryIncreaseData(t,{UpKey:r,DownKey:n}),o.Execute.RunNextJob()},error:function(t){o.RecvError(t)}})):this.Execute.RunNextJob()},this.RecvHistoryIncreaseDataV2=function(t,e){D.Complier.Log("[JSSymbolData::RecvHistoryIncreaseData] recv data, key",t,e);var a=[],i=[];for(var r in t.data){var n=t.data[r],o=new ct,s=new ct,h=n[0],l=null;o.Date=h,s.Date=h,pt.IsMinutePeriod(this.Period,!0)&&Te.IsNumber(n[1])&&(l=n[1],o.Time=l,s.Time=l),o.Value=n[2],a[r]=o,s.Value=n[3],i[r]=s}var u=this.Data.GetFittingData2(a,0),c=this.Data.GetFittingData2(i,0);this.ExtendData.set(e.UpKey,u),this.ExtendData.set(e.DownKey,c)},this.RecvHistoryIncreaseData=function(t,e){D.Complier.Log("[JSSymbolData::RecvHistoryIncreaseData] recv data",t);var a,i,r=[],n=[];for(var o in t.data){var s=t.data[o],h=new ct,l=new ct;h.Date=s[0],h.Value=s[8],r[o]=h,l.Date=s[0],l.Value=s[9],n[o]=l}a=this.SourceData?this.SourceData.GetFittingData(r):this.Data.GetFittingData(aryData),i=this.SourceData?this.SourceData.GetFittingData(n):this.Data.GetFittingData(aryData),this.ExtendData.set(e.UpKey,a),this.ExtendData.set(e.DownKey,i)},this.RecvMinuteIncreaseDataV2=function(t,e){D.Complier.Log("[JSSymbolData::RecvMinuteIncreaseDataV2] recv data, key",t,e)},this.RecvMinuteIncreaseData=function(t,e){if(D.Complier.Log("[JSSymbolData::RecvMinuteIncreaseData] recv data",t),t.minute){var a=t.minute;if(a.time&&a.up&&a.down){var i=[],r=[];if(this.IsBeforeData)for(var n=0,o=0;n<this.Data.Data.length;++n){if(i[n]=null,r[n]=null,!(s=this.Data.Data[n]).Before)if(h=s.DateTime)if(2==(l=h.split(" ")).length)parseInt(l[0])==t.date&&(i[n]=a.up[o],r[n]=a.down[o],++o)}else for(n=0,o=0;n<this.Data.Data.length;++n){var s,h,l;if(i[n]=null,r[n]=null,h=(s=this.Data.Data[n]).DateTime)if(2==(l=h.split(" ")).length)parseInt(l[0])==t.date&&(i[n]=a.up[o],r[n]=a.down[o],++o)}this.ExtendData.set(e.UpKey,i),this.ExtendData.set(e.DownKey,r)}}},this.GetIndexIncreaseCacheData=function(t,e,a){var i,r=this.GetBlockSymbol(e);if(r||this.Execute.ThrowUnexpectedNode(a,"不支持函数"+t+"("+e+")"),"UPCOUNT"==t||"ADVANCE"==t?i=ai.JOB_DOWNLOAD_INDEX_INCREASE_DATA.toString()+"-UpCount-"+r:"DOWNCOUNT"!=t&&"DECLINE"!=t||(i=ai.JOB_DOWNLOAD_INDEX_INCREASE_DATA.toString()+"-DownCount-"+r),i&&this.ExtendData.has(i)||this.Execute.ThrowUnexpectedNode(a,"不支持函数"+t+"("+e+")"),this.DataType===ri.MINUTE_ID||this.DataType===ri.MULTIDAY_MINUTE_ID)return this.ExtendData.get(i);if(this.DataType===ri.KLINE_ID&&pt.IsDayPeriod(this.Period,!0)){var n=this.ExtendData.get(i),o=new pt;if(o.Data=n,o.Period=this.Period,o.Period>0){var s=o.GetPeriodSingleData(o.Period);o.Data=s}return o.GetValue()}return null},this.GetSymbolData=function(){if(this.Data)return this.Execute.RunNextJob();var t=this;if(this.DataType!==ri.MINUTE_ID)if(this.DataType!==ri.MULTIDAY_MINUTE_ID){if(pt.IsDayPeriod(this.Period,!0)){if(this.NetworkFilter){var e={Name:"JSSymbolData::GetSymbolData",Explain:"日线数据",Request:{Url:t.RealtimeApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestDataCount,period:this.Period,right:this.Right}},Self:this,PreventDefault:!1};if(this.KLineDateTimeRange&&(e.Request.KLineDataTimeRange={Start:{Date:this.KLineDateTimeRange.Start.Date},End:{Date:this.KLineDateTimeRange.End.Date}},this.IsNumber(this.KLineDateTimeRange.Start.Time)&&(e.Request.KLineDataTimeRange.Start.Time=this.KLineDateTimeRange.Start.Time),this.IsNumber(this.KLineDateTimeRange.End.Time)&&(e.Request.KLineDataTimeRange.End.Time=this.KLineDateTimeRange.End.Time)),this.NetworkFilter(e,function(e){t.RecvHistroyData(e),t.Execute.RunNextJob()}),1==e.PreventDefault)return}v.HttpRequest({url:t.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(e){t.RecvHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}else if(pt.IsMinutePeriod(this.Period,!0)){if(this.NetworkFilter){e={Name:"JSSymbolData::GetSymbolData",Explain:"分钟K线数据",Request:{Url:t.MinuteKLineApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestMinuteDayCount,period:this.Period,right:this.Right}},Self:this,PreventDefault:!1};if(this.KLineDateTimeRange&&(e.Request.KLineDataTimeRange={Start:{Date:this.KLineDateTimeRange.Start.Date},End:{Date:this.KLineDateTimeRange.End.Date}},this.IsNumber(this.KLineDateTimeRange.Start.Time)&&(e.Request.KLineDataTimeRange.Start.Time=this.KLineDateTimeRange.Start.Time),this.IsNumber(this.KLineDateTimeRange.End.Time)&&(e.Request.KLineDataTimeRange.End.Time=this.KLineDateTimeRange.End.Time)),this.NetworkFilter(e,function(e){t.RecvMinuteHistroyData(e),t.Execute.RunNextJob()}),1==e.PreventDefault)return}v.HttpRequest({url:this.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMinuteHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}}else v.HttpRequest({url:t.HistoryMinuteApiUrl,data:{symbol:t.Symbol,daycount:t.DayCount},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMultiDayMinuteData(e),t.Execute.RunNextJob()}});else v.HttpRequest({url:t.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","minute","time","minutecount"],symbol:[t.Symbol],start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMinuteData(e),t.Execute.RunNextJob()}})},this.RecvHistroyData=function(t){D.Complier.Log("[JSSymbolData::RecvHistroyData] recv data",t);var e=this.JsonDataToHistoryData(t);if(this.Data=new pt,this.Data.DataType=0,this.Data.Data=e,this.SourceData=new pt,this.SourceData.Data=e,this.IsApiPeriod);else{if(this.Right>0){var a=this.Data.GetRightData(this.Right);this.Data.Data=a}if(pt.IsDayPeriod(this.Period,!1)){var i=this.Data.GetPeriodData(this.Period);this.Data.Data=i}}this.Data.Right=this.Right,this.Data.Period=this.Period,this.Name=t.name},this.RecvMinuteHistroyData=function(t){D.Complier.Log("[JSSymbolData::RecvMinuteHistroyData] recv data",t);var e=this.JsonDataToMinuteHistoryData(t);if(this.Data=new pt,this.Data.DataType=1,this.Data.Data=e,this.SourceData=new pt,this.SourceData.Data=e,this.IsApiPeriod);else if(pt.IsMinutePeriod(this.Period,!1)){var a=this.Data.GetPeriodData(this.Period);this.Data.Data=a}this.Data.Period=this.Period,this.Name=t.name},this.RecvMinuteData=function(t){D.Complier.Log("[JSSymbolData::RecvMinuteData] recv data",t);var e=this.JsonDataToMinuteData(t);this.Data=new pt,this.Data.DataType=2,this.Data.Data=e,this.Name=t.stock[0].name},this.RecvMultiDayMinuteData=function(t){var e=this.JsonDataToMultiDayMinuteData(t);this.Data=new pt,this.Data.DataType=2,this.Data.Data=e,this.Name=t.name},this.GetSymbolCacheData=function(t){if(!this.Data)return new Array;var e=this.Symbol.toUpperCase();switch(t){case"CLOSE":case"C":return this.Data.GetClose();case"VOL":case"V":return Ea.IsSHSZ(e)?this.Data.GetVol(100):this.Data.GetVol();case"OPEN":case"O":return this.Data.GetOpen();case"HIGH":case"H":return this.Data.GetHigh();case"LOW":case"L":return this.Data.GetLow();case"AMOUNT":case"AMO":return this.Data.GetAmount();case"OPI":case"VOLINSTK":return this.Data.GetPosition();case"ZSTJJ":return this.Data.GetAvPrice();case"SETTLE":case"QHJSJ":return this.Data.GetSettlementPrice();case"ISEQUAL":return this.Data.GetIsEqual();case"ISUP":return this.Data.GetIsUp();case"ISDOWN":return this.Data.GetIsDown()}},this.GetSymbolPeriodData=function(t){var e=Ka.GetPeriodInfo({Name:t.PeriodName}).Period,a={PeriodID:e,PeriodName:t.PeriodName};if(e==this.Period&&this.Execute.RunNextJob(),this.IsApiPeriod){if(this.PeriodData.has(t.PeriodName))return this.Execute.RunNextJob()}else if(pt.IsDayPeriod(e,!0)){if(pt.IsDayPeriod(this.Period,!0))return this.Execute.RunNextJob();a={PeriodID:0,PeriodName:"DAY"}}else{if(!pt.IsMinutePeriod(e,!0))return this.Execute.RunNextJob();if(pt.IsMinutePeriod(this.Period,!0))return this.Execute.RunNextJob();a={PeriodID:4,PeriodName:"MIN1"}}var i=this;if(this.NetworkFilter){var r={Name:"JSSymbolData::GetSymbolPeriodData",Explain:"跨周期数据",Request:{Data:{field:["symbol","name",t.ValueName],period:t.PeriodName,symbol:i.Symbol}},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,function(t){i.RecvSymbolPeriodData(t,a),i.Execute.RunNextJob()}),1==r.PreventDefault)return}if(pt.IsMinutePeriod(e,!0))v.HttpRequest({url:this.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:i.Symbol,start:-1,count:i.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(t){i.RecvSymbolPeriodData(t,a),i.Execute.RunNextJob()},error:function(t){i.RecvError(t)}});else{if(!pt.IsDayPeriod(e,!0))return this.Execute.RunNextJob();v.HttpRequest({url:i.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:i.Symbol,start:-1,count:i.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){i.RecvSymbolPeriodData(t,a),i.Execute.RunNextJob()},error:function(t){i.RecvError(t)}})}},this.RecvSymbolPeriodData=function(t,e){if(D.Complier.Log("[JSSymbolData::RecvSymbolPeriodData] data, periodInfo ",t,e),pt.IsDayPeriod(e.PeriodID,!0)){var a=this.JsonDataToHistoryData(t),i=new pt;i.DataType=0,i.Data=a,i.Right=0,i.Period=e.PeriodID,this.PeriodData.set(e.PeriodName,i)}else if(pt.IsMinutePeriod(e.PeriodID,!0)){a=this.JsonDataToMinuteHistoryData(t);var r=new pt;r.DataType=1,r.Data=a,r.Right=0,r.Period=e.PeriodID,this.PeriodData.set(e.PeriodName,r)}},this.GetSymbolPeriodCacheData=function(t,e){var a=Ka.GetPeriodInfo({Name:e});if(this.Period==a.Period)return this.GetSymbolCacheData(t);var i=null;if(this.IsApiPeriod){if(!(r=Ka.GetPeriodInfo({PeriodID:this.Period})))return null;if(r.Order>a.Order)return null;if(!this.PeriodData.has(e))return null;i=(i=this.PeriodData.get(e)).Data}else{var r;if(!(r=Ka.GetPeriodInfo({PeriodID:this.Period})))return null;if(r.Order>a.Order)return null;if(pt.IsDayPeriod(a.Period,!0)&&pt.IsMinutePeriod(this.Period,!0)){var n=this.PeriodData.get("DAY");i=0==a.Period?n.Data:n.GetPeriodData(a.Period)}else{var o=new pt;if(o.Data=this.SourceData.Data,o.Period=this.Period,o.Right=this.Right,pt.IsDayPeriod(a.Period,!0)&&o.Right>0){var s=o.GetRightData(o.Right);o.Data=s}i=o.GetPeriodData(a.Period)}}var h=this.Data.ConverPeriod(i,this.Period,a.Period),l=new pt;l.Data=h;var u=this.Symbol.toUpperCase();switch(t){case"C":case"CLOSE":return l.GetClose();case"O":case"OPEN":return l.GetOpen();case"H":case"HIGH":return l.GetHigh();case"L":case"LOW":return l.GetLow();case"AMO":case"AMOUNT":return l.GetAmount();case"V":case"VOL":return Ea.IsSHSZ(u)?l.GetVol(100):l.GetVol();case"VOLINSTK":return l.GetPosition();default:return null}},this.GetSymbolPeriodCacheData2=function(t,e,a){var i=Ka.GetPeriodInfo({Name:e});if(!i)return null;var r=Ka.GetPeriodInfo({PeriodID:this.Period});if(!r)return null;if(r.Order>i.Order)return null;if(r.Period==i.Period)l=this.Data;else{var n;if(this.IsApiPeriod){if(!this.PeriodData.has(e))return null;n=this.PeriodData.get(e)}else if(pt.IsMinutePeriod(r.Period,!0)&&pt.IsDayPeriod(i.Period,!0)){var o=this.PeriodData.get("DAY");n=0==i.Period?o:o.GetPeriodData(i.Period)}else{var s=new pt;if(s.Data=this.SourceData.Data,s.Period=this.Period,s.Right=this.Right,pt.IsDayPeriod(i.Period,!0)&&s.Right>0){var h=s.GetRightData(s.Right);s.Data=h}n=s.GetPeriodData(i.Period)}var l,u=this.Data.ConverPeriod(n,this.Period,i.Period);(l=new pt).Data=u}if(Te.IsPlusNumber(a)){var c=new pt;u=l.GetRef(a);c.Data=u,l=c}var f=this.Symbol.toUpperCase();switch(t){case"C":case"CLOSE":return l.GetClose();case"O":case"OPEN":return l.GetOpen();case"H":case"HIGH":return l.GetHigh();case"L":case"LOW":return l.GetLow();case"AMO":case"AMOUNT":return l.GetAmount();case"V":case"VOL":return Ea.IsSHSZ(f)?l.GetVol(100):l.GetVol();case"VOLINSTK":return l.GetPosition();default:return null}},this.GetCurrBarsCount=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=this.Data.Data.length-1;e>=0;--e)t.push(e+1);return t},this.GetBarPos=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=this.Data.Data.length,a=0;a<e;++a)t.push(a+1);return t},this.GetTotalTradeMinuteCount=function(){var t=Ma.GetCoordinateData(this.Symbol);return t&&t.Count>0?t.Count-1:242},this.GetTotalBarsCount=function(){return this.Data.Data.length},this.GetIsLastBar=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=this.Data.Data.length,a=0;a<e;++a)a==e-1?t.push(1):t.push(0);return t},this.GetBarStatus=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=this.Data.Data.length,a=0;a<e;++a)t[a]=0==a?1:a==e-1?2:0;return t},this.GetMarginCacheData=function(t,e){var a=ai.GetMarginJobID(t);return a||this.Execute.ThrowUnexpectedNode(e,"不支持MARGIN("+t+")"),this.MarginData.has(a)?this.MarginData.get(a):[]},this.GetMarginData=function(t){if(this.MarginData.has(t))return this.Execute.RunNextJob();D.Complier.Log("[JSSymbolData::GetMarginData] jobID=",t);var e=this,a=["name","date","symbol"];switch(t){case ai.JOB_DOWNLOAD_MARGIN_BALANCE:a.push("margin.balance");break;case ai.JOB_DOWNLOAD_MARGIN_RATE:a.push("margin.rate");break;case ai.JOB_DOWNLOAD_MARGIN_BUY_BALANCE:case ai.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:case ai.JOB_DOWNLOAD_MARGIN_BUY_REPAY:case ai.JOB_DOWNLOAD_MARGIN_BUY_NET:a.push("margin.buy");break;case ai.JOB_DOWNLOAD_MARGIN_SELL_BALANCE:case ai.JOB_DOWNLOAD_MARGIN_SELL_VOLUME:case ai.JOB_DOWNLOAD_MARGIN_SELL_REPAY:case ai.JOB_DOWNLOAD_MARGIN_SELL_NET:a.push("margin.sell")}v.HttpRequest({url:this.StockHistoryDayApiUrl,data:{field:a,symbol:[this.Symbol],orderfield:"date"},type:"post",dataType:"json",async:!0,success:function(a){e.RecvMarginData(a,t),e.Execute.RunNextJob()}})},this.RecvMarginData=function(t,e){if(D.Complier.Log(t),t.stock&&1==t.stock.length){var a=t.stock[0],i=new Array,r=[],n=[],o=[];for(var s in a.stockday){var h=a.stockday[s],l=h.margin;if(l){var u=new ct;switch(u.Date=h.date,e){case ai.JOB_DOWNLOAD_MARGIN_BALANCE:if(!this.IsNumber(l.balance))continue;u.Value=l.balance,i.push(u);break;case ai.JOB_DOWNLOAD_MARGIN_RATE:if(!this.IsNumber(l.rate))continue;u.Value=l.rate,i.push(u);break;case ai.JOB_DOWNLOAD_MARGIN_BUY_BALANCE:case ai.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:case ai.JOB_DOWNLOAD_MARGIN_BUY_REPAY:case ai.JOB_DOWNLOAD_MARGIN_BUY_NET:var c=l.buy;if(!c)continue;if(!(this.IsNumber(c.balance)&&this.IsNumber(c.amount)&&this.IsNumber(c.repay)&&this.IsNumber(c.net)))continue;u.Value=c.balance,(f=new ct).Date=h.date,f.Value=c.amount,(d=new ct).Date=h.date,d.Value=c.repay,(C=new ct).Date=h.date,C.Value=c.net,i.push(u),r.push(f),n.push(d),o.push(C);break;case ai.JOB_DOWNLOAD_MARGIN_SELL_BALANCE:case ai.JOB_DOWNLOAD_MARGIN_SELL_VOLUME:case ai.JOB_DOWNLOAD_MARGIN_SELL_REPAY:case ai.JOB_DOWNLOAD_MARGIN_SELL_NET:var f,d,C,p=l.sell;if(!p)continue;if(!(this.IsNumber(p.balance)&&this.IsNumber(p.volume)&&this.IsNumber(p.repay)&&this.IsNumber(p.net)))continue;u.Value=c.balance,(f=new ct).Date=h.date,f.Value=c.volume,(d=new ct).Date=h.date,d.Value=c.repay,(C=new ct).Date=h.date,C.Value=c.net,i.push(u),r.push(f),n.push(d),o.push(C);break;default:continue}}}var m=[];for(var v in e===ai.JOB_DOWNLOAD_MARGIN_BALANCE||e===ai.JOB_DOWNLOAD_MARGIN_RATE?m.push({JobID:e,Data:i}):e===ai.JOB_DOWNLOAD_MARGIN_BUY_BALANCE||e===ai.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT||e===ai.JOB_DOWNLOAD_MARGIN_BUY_REPAY||e===ai.JOB_DOWNLOAD_MARGIN_BUY_NET?(m.push({JobID:ai.JOB_DOWNLOAD_MARGIN_BUY_BALANCE,Data:i}),m.push({JobID:ai.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT,Data:r}),m.push({JobID:ai.JOB_DOWNLOAD_MARGIN_BUY_REPAY,Data:n}),m.push({JobID:ai.JOB_DOWNLOAD_MARGIN_BUY_NET,Data:o})):e!==ai.JOB_DOWNLOAD_MARGIN_SELL_BALANCE&&e!==ai.JOB_DOWNLOAD_MARGIN_SELL_VOLUME&&e!==ai.JOB_DOWNLOAD_MARGIN_SELL_REPAY&&e!==ai.JOB_DOWNLOAD_MARGIN_SELL_NET||(m.push({JobID:ai.JOB_DOWNLOAD_MARGIN_SELL_BALANCE,Data:i}),m.push({JobID:ai.JOB_DOWNLOAD_MARGIN_SELL_VOLUME,Data:r}),m.push({JobID:ai.JOB_DOWNLOAD_MARGIN_SELL_REPAY,Data:n}),m.push({JobID:ai.JOB_DOWNLOAD_MARGIN_SELL_NET,Data:o})),m){var g=this.SourceData.GetFittingData(m[v].Data),S=new pt;if(S.Data=g,S.Period=this.Period,S.Period>0){var T=S.GetPeriodSingleData(S.Period);S.Data=T}var I=S.GetValue();this.MarginData.set(m[v].JobID,I)}}},this.GetNewsAnalysisCacheData=function(t,e){var a=ai.GetNewsAnalysisID(t);return a||this.Execute.ThrowUnexpectedNode(e,"不支持NEWS("+t+")"),this.NewsAnalysisData.has(a)?this.NewsAnalysisData.get(a):[]},this.GetHKToSHSZData=function(t){var e=t.Args,a=this.Symbol;if(e.length>0){var i=e[0];if(i.Type==ja.Literal)a=i.Value;else if(i.Type==ja.Identifier){var r=!1;for(var n in this.Arguments){var o=this.Arguments[n];if(o.Name==i.Name){a=o.Value,r=!0;break}}if(!r){var s=t.Token;this.Execute.ErrorHandler.ThrowError(s.Index,s.Line,0,"HK2SHSZ() Error: can't read "+i.Name)}}}t.Symbol=a,1==a||2==a||3==a?this.GetHKToSHSZMarketData(a,t):this.GetHKToSHSZStockData(a,t)},this.GetHKToSHSZStockData=function(t,e){if(this.HKToSHSZData.has(t))return this.Execute.RunNextJob();var a=t.toLowerCase(),i=this,r=this.HKToSHSZApiUrl[3]+"/"+a+".json";v.HttpRequest({url:r,type:"get",dataType:"json",async:!0,success:function(t){i.RecvHKToSHSZStockData(t,e),i.Execute.RunNextJob()},error:function(t){console.warn("[JSSymbolData::GetHKToSHSZStockData] request url="+r+" failed. error="+t.status),i.RecvHKToSHSZStockData(null,e),i.Execute.RunNextJob()}})},this.RecvHKToSHSZStockData=function(t,e){if(t){for(var a=t.symbol.toUpperCase(),i=[],r=0;r<t.date.length;++r){var n=new ct;n.Date=t.date[r],n.Value=t.vol[r],i.push(n)}var o=this.Data.GetFittingData(i),s=new pt;if(s.Data=o,s.Period=this.Period,s.Period>0){var h=s.GetPeriodSingleData(s.Period);s.Data=h}t=s.GetValue();this.HKToSHSZData.set(a,t)}},this.GetHKToSHSZMarketData=function(t,e){if(this.HKToSHSZData.has(t))return this.Execute.RunNextJob();var a,i=0;this.DataType===ri.MINUTE_ID?i=1:this.DataType==ri.MULTIDAY_MINUTE_ID?i=2:this.Period<=3&&(i=0),a=this.HKToSHSZApiUrl[i];var r=this;D.Complier.Log("[JSSymbolData::GetHKToSHSZMarketData] code="+t+" url="+a+", dataType="+i),2===i?v.HttpRequest({url:a,data:{symbol:this.Symbol,daycount:this.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(t){r.RecvMulitMinuteHKToSHSZData(t,e),r.Execute.RunNextJob()}}):v.HttpRequest({url:a,type:"get",dataType:"json",async:!0,success:function(t){0==i?r.RecvHKToSHSZData(t,e):1==i&&r.RecvMinuteHKToSHSZData(t,e),r.Execute.RunNextJob()}})},this.RecvMinuteHKToSHSZData=function(t,e){var a=[],i=[],r=[];if(this.IsBeforeData){for(n in this.SourceData.Data){if(!(u=this.SourceData.Data[n]).Before)break;a.push(null),i.push(null),r.push(null)}for(var n=0;n<t.time.length;++n){if(925!==t.time[n]){var o=(s=t.hk2sh[n])+(h=t.hk2sz[n]);a.push(o),i.push(s),r.push(h)}}}else for(n=0;n<t.time.length;++n){var s,h;t.time[n],o=(s=t.hk2sh[n])+(h=t.hk2sz[n]);a.push(o),i.push(s),r.push(h)}var l=[{Data:a,ID:1},{Data:i,ID:2},{Data:r,ID:3}];for(var n in l){var u=l[n];this.HKToSHSZData.set(u.ID,u.Data)}},this.RecvHKToSHSZData=function(t,e){for(var a=[],i=[],r=[],n=0;n<t.date.length;++n){var o=t.date[n],s=1e6*t.hk2sh[n],h=1e6*t.hk2sz[n],l=s+h,u=new ct;u.Date=o,u.Value=l;var c=new ct;c.Date=o,c.Value=s;var f=new ct;f.Date=o,f.Value=h,a.push(u),i.push(c),r.push(f)}var d=[{Data:a,ID:1},{Data:i,ID:2},{Data:r,ID:3}];for(var C in d){var p=this.Data.GetFittingData(d[C].Data),m=new pt;if(m.Data=p,m.Period=this.Period,m.Period>0){var D=m.GetPeriodSingleData(m.Period);m.Data=D}var v=m.GetValue();this.HKToSHSZData.set(d[C].ID,v)}},this.RecvMulitMinuteHKToSHSZData=function(t,e){if(t.data&&!(t.data.length<=0)){for(var a=[],i=[],r=[],n=0,o=0;n<this.Data.Data.length&&o<t.data.length;){a[n]=null,i[n]=null,r[n]=null;var s=(D=this.Data.Data[n]).DateTime;if(s){var h=s.split(" ");if(2==h.length){var l=parseInt(h[0]),u=t.data[o];if(!u.minute||u.minute.length<=0)++o;else if(u.date>l)++n;else if(u.date<l)++o;else{for(var c in u.minute){var f=u.minute[c],d=f[1],C=f[2],p=d+C;a[n]=p,i[n]=d,r[n]=C,++n}++o}}else++n}else++n}var m=[{Data:a,ID:1},{Data:i,ID:2},{Data:r,ID:3}];for(var n in m){var D=m[n];this.HKToSHSZData.set(D.ID,D.Data)}}},this.GetHKToSHSZCacheData=function(t,e){return t||(t=this.Symbol),"string"==typeof t&&(t=t.toUpperCase()),this.HKToSHSZData.has(t)?this.HKToSHSZData.get(t):[]},this.GetNewsAnalysisData=function(t){if(this.NewsAnalysisData.has(t))return this.Execute.RunNextJob();var e=this,a=new C.default([[ai.JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE,"negative"],[ai.JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH,"research"],[ai.JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT,"interact"],[ai.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE,"holderchange"],[ai.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2,"holderchange"],[ai.JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER,"trustholder"],[ai.JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING,"Blocktrading"],[ai.JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS,"companynews"],[ai.JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS,"topmanagers"],[ai.JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE,"Pledge"]]);if(a.has(t)){var i=a.get(t),r=this.StockNewsAnalysisApiUrl+"/"+i+"/"+this.Symbol+".json";v.HttpRequest({url:r,type:"get",dataType:"json",async:!0,success:function(a){e.RecvNewsAnalysisData(a,t),e.Execute.RunNextJob()},error:function(a,i){e.RecvNewsAnalysisDataError(a,i,t),e.Execute.RunNextJob()}})}else this.Execute.RunNextJob()},this.RecvNewsAnalysisDataError=function(t,e,a){D.Complier.Log("[JSSymbolData::RecvNewsAnalysisDataError] ajax error.",t.status);for(var i=[],r=0;r<this.Data.Data.length;++r){var n=new ct;n.Date=this.Data.Data[r].Date,n.Value=0,i.push(n)}var o=new pt;o.Data=i,this.NewsAnalysisData.set(a,o.GetValue())},this.RecvNewsAnalysisData=function(t,e){if(t.data&&t.date&&!(t.data.length<=0||t.data.length!=t.date.length))if(D.Complier.Log("[JSSymbolData::RecvNewsAnalysisData] jobID",e,t.update),e==ai.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE||e==ai.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2){for(var a=[],i=[],r=0;r<t.data.length;++r){(o=new ct).Date=t.date[r],o.Value=t.data[r],this.IsNumber(o.Value)&&a.push(o),r<t.data2.length&&((o=new ct).Date=t.date[r],o.Value=t.data2[r],this.IsNumber(o.Value)&&i.push(o))}var n=this.Data.GetFittingData2(a,0);(s=new pt).Data=n,this.NewsAnalysisData.set(ai.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE,s.GetValue()),n=this.Data.GetFittingData2(i,0),(s=new pt).Data=n,this.NewsAnalysisData.set(ai.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2,s.GetValue())}else{for(a=[],r=0;r<t.data.length;++r){var o;(o=new ct).Date=t.date[r],o.Value=t.data[r],a.push(o)}var s,h=this.Data.GetFittingData2(a,0);(s=new pt).Data=h,this.NewsAnalysisData.set(e,s.GetValue())}},this.GetSectionFinanceData=function(t){var e=t.SF[0],a=t.SF[1].Period;if(this.SectionFinanceData.has(e))return this.Execute.RunNextJob();D.Complier.Log("[JSSymbolData::GetSectionFinanceData] "+a.Year+"-"+a.Quarter);var i="announcement"+a.Quarter,r=this,n=["name","date","symbol",i,"finance"+a.Quarter],o=[i+".year","int32","eq",a.Year.toString()];v.HttpRequest({url:this.StockHistoryDayApiUrl,data:{field:n,symbol:[this.Symbol],condition:[{item:o}]},type:"post",dataType:"json",async:!0,success:function(e){r.RecvSectionFinanceData(e,t),r.Execute.RunNextJob()}})},this.RecvSectionFinanceData=function(t,e){if(t.stock&&1==t.stock.length){var a=t.stock[0];if(a.stockday&&!(a.stockday.length<=0)){var i=a.stockday[0],r=e.SF[1].Period,n=null;if(1===r.Quarter?n=i.finance1:2===r.Quarter?n=i.finance2:3===r.Quarter?n=i.finance3:4===r.Quarter&&(n=i.finance4),n){t=new C.default([[ai.JOB_DOWNLOAD_SECTION_F_01,n.currentassets],[ai.JOB_DOWNLOAD_SECTION_F_02,n.monetaryfunds],[ai.JOB_DOWNLOAD_SECTION_F_03,n.inventory],[ai.JOB_DOWNLOAD_SECTION_F_04,n.currentliabilities],[ai.JOB_DOWNLOAD_SECTION_F_05,n.ncurrentliabilities],[ai.JOB_DOWNLOAD_SECTION_F_06,n.expenses3],[ai.JOB_DOWNLOAD_SECTION_F_07,n.investmentincome],[ai.JOB_DOWNLOAD_SECTION_F_08,n.pcnprofit],[ai.JOB_DOWNLOAD_SECTION_F_09,n.nnetprofit],[ai.JOB_DOWNLOAD_SECTION_F_10,n.npersearning],[ai.JOB_DOWNLOAD_SECTION_F_11,n.woewa],[ai.JOB_DOWNLOAD_SECTION_F_12,n.inprocess],[ai.JOB_DOWNLOAD_SECTION_F_13,n.accdepreciation],[ai.JOB_DOWNLOAD_SECTION_F_14,n.mholderprofit],[ai.JOB_DOWNLOAD_SECTION_F_15,n.lossexchange],[ai.JOB_DOWNLOAD_SECTION_F_16,n.baddebts],[ai.JOB_DOWNLOAD_SECTION_F_17,n.fixedassets],[ai.JOB_DOWNLOAD_SECTION_F_18,n.curdepreciation],[ai.JOB_DOWNLOAD_SECTION_F_19,n.orevenues],[ai.JOB_DOWNLOAD_SECTION_F_20,n.moprofit],[ai.JOB_DOWNLOAD_SECTION_F_21,n.oprofit],[ai.JOB_DOWNLOAD_SECTION_F_22,n.nprofit],[ai.JOB_DOWNLOAD_SECTION_F_23,n.areceivable],[ai.JOB_DOWNLOAD_SECTION_F_24,n.financialcost],[ai.JOB_DOWNLOAD_SECTION_F_25,n.ccfo],[ai.JOB_DOWNLOAD_SECTION_F_26,n.totalassets],[ai.JOB_DOWNLOAD_SECTION_F_27,n.totalliabilities],[ai.JOB_DOWNLOAD_SECTION_F_28,n.totalownersequity],[ai.JOB_DOWNLOAD_SECTION_F_29,n.grossmargin],[ai.JOB_DOWNLOAD_SECTION_F_30,n.percreserve],[ai.JOB_DOWNLOAD_SECTION_F_31,n.peruprofit],[ai.JOB_DOWNLOAD_SECTION_F_32,n.persearning],[ai.JOB_DOWNLOAD_SECTION_F_33,n.pernetasset],[ai.JOB_DOWNLOAD_SECTION_F_34,n.perccfo],[ai.JOB_DOWNLOAD_SECTION_F_38,n.alratio],[ai.JOB_DOWNLOAD_SECTION_F_39,n.profityoy]]);4===r.Quarter&&(t.set(ai.JOB_DOWNLOAD_SECTION_F_35,n.nnprofitincrease),t.set(ai.JOB_DOWNLOAD_SECTION_F_36,n.nnprofitspeed),t.set(ai.JOB_DOWNLOAD_SECTION_F_37,n.nprofitincrease));var o=e.SF[0];this.SectionFinanceData.set(o,t)}}}},this.GetSectionFinanceCacheData=function(t,e,a,i){var r=ai.GetSectionReportPeriod(t,e);r||this.Execute.ThrowUnexpectedNode(i,"不支持FS("+t+", "+e+", '"+a+"') 报告期错误");var n=ai.GetSectionFinanceID(a);n||this.Execute.ThrowUnexpectedNode(i,"不支持FS("+t+", "+e+",'"+a+"') 财务数据字段名称错误");var o=r.Year+"-"+r.Quarter;if(!this.SectionFinanceData.has(o)&&!this.ThrowSFPeirod.has(o)){this.ThrowSFPeirod.add(o);var s={ID:ai.JOB_DOWNLOAD_SECTION_SF,SF:[o,{Period:r,Fields:new c.default([n])}]};this.Execute.ThrowDownloadSF(i,s,"FS("+t+", "+e+", '"+a+"') 动态下载")}if(!this.SectionFinanceData.has(o))return this.Execute.ThrowUnexpectedNode(i,"不支持FS("+t+", "+e+", '"+a+"') 没有这期财务数据");var h=this.SectionFinanceData.get(o);return h.has(n)||this.Execute.ThrowUnexpectedNode(i,"不支持FS("+t+", "+e+", '"+a+"') 没有这期财务数据字段"),h.get(n)},this.GetFinOne=function(t){var e=this.JobArgumentsToArray(t,3),a=this.GetStockDataKey(t,e);if(this.StockData.has(a))return this.Execute.RunNextJob();var i=this;if(this.NetworkFilter){var r=this.Data.GetDateRange(),n={Name:"JSSymbolData::GetFinOne",Explain:"财务数据FINONE(ID,Y,MMDD)",JobID:t.ID,Request:{Url:i.StockHistoryDayApiUrl,Type:"POST",Data:{Args:e,symbol:this.Symbol,daterange:r}},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(e){i.RecvStockValue(e,t,a,1),i.Execute.RunNextJob()}),1==n.PreventDefault)return}new function(t){this.newMethod=fi,this.newMethod(t),delete this.newMethod,this.Download=function(){var t=this,e=this.GetFieldList();if(!e)return message=this.Job.FunctionName+"("+this.Args[0]+", "+this.Args[1]+", "+this.Args[2]+") can't support.",this.ErrorCallback(message),void t.RecvCallback(null,t.Job,t.DataKey);var a=[{item:["finance","doc","exists","true"]}],i=this.Args[1],r=this.Args[2],n=0,o=3,s=null;0==i&&0==r||(0==i&&r<300?(n=r,o=200):0==r&&i<1e3?s=i:i>1909&&(331==r?(a=[{item:["announcement1.year","int32","eq",i]},{item:["finance1","doc","exists","true"]}],e.push("announcement1.year"),e.push("announcement1.quarter")):630==r?(a=[{item:["announcement2.year","int32","eq",i]},{item:["finance2","doc","exists","true"]}],e.push("announcement2.year"),e.push("announcement2.quarter")):930==r?(a=[{item:["announcement3.year","int32","eq",i]},{item:["finance3","doc","exists","true"]}],e.push("announcement4.year"),e.push("announcement4.quarter")):(a=[{item:["announcement4.year","int32","eq",i]},{item:["finance4","doc","exists","true"]}],e.push("announcement4.year"),e.push("announcement4.quarter")))),v.HttpRequest({url:this.Url,data:{field:e,symbol:[this.Symbol],condition:a,start:0,end:o},type:"post",dataType:"json",async:!0,success:function(e){var a=t.ToHQChartData(e),i=null;a&&a.length>0&&(a.sort(function(t,e){return e.Date-t.Date}),i=null==s?a[n]:t.GetPreYearData(a,s)),t.RecvCallback(i,t.Job,t.DataKey)}})},this.GetPreYearData=function(t,e){if(331!=e&&630!=e&&930!=e&&1231!=e){for(var a=t[0].Date%1e3,i=1,r=0;i<t.length;++i){var n=t[i];if(n.Date%1e4==a&&++r==e)return n}return null}for(var i in t){var n=t[i];if(n.Date%1e4==e)return n}}}({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,Args:e,DataKey:a,Callback:function(t,e,a){i.RecvStockValue(t,e,a,1),i.Execute.RunNextJob()},ErrorCallback:function(t){i.AddStockValueError(a,t)}}).Download()},this.GetStockDataKey=function(t,e){var a=t.FunctionName;if(e.length>0){a+="(";for(var i=0;i<e.length;++i)i>0&&(a+=","),a+=e[i].toString();a+=")"}return a},this.GetFinValue=function(t){var e=this.JobArgumentsToArray(t,1),a=e[0],i=this.GetStockDataKey(t,e);if(this.StockData.has(i))return this.Execute.RunNextJob();var r=this;if(this.NetworkFilter){var n=this.Data.GetDateRange(),o={Name:"JSSymbolData::GetFinValue",Explain:"财务数据FINVALUE(ID)",JobID:t.ID,Request:{Url:r.StockHistoryDayApiUrl,Type:"POST",Data:{id:a,symbol:this.Symbol,daterange:n}},Self:this,PreventDefault:!1};if(this.NetworkFilter(o,function(e){r.RecvStockValue(e,t,i,0),r.Execute.RunNextJob()}),1==o.PreventDefault)return}new fi({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,Args:e,DataKey:i,Callback:function(t,e,a){r.RecvStockValue(t,e,a,0),r.Execute.RunNextJob()},ErrorCallback:function(t){r.AddStockValueError(i,t)}}).Download()},this.GetFinance=function(t){var e=this.JobArgumentsToArray(t,1),a=e[0],i=this.GetStockDataKey(t,e);if(this.StockData.has(i))return this.Execute.RunNextJob();var r=this;if(this.NetworkFilter){var n=this.Data.GetDateRange(),o={Name:"JSSymbolData::GetFinance",Explain:"财务数据FINANCE(ID)",JobID:t.ID,Request:{Url:r.RealtimeApiUrl,Type:"POST",Data:{id:a,symbol:this.Symbol,daterange:n}},Self:this,PreventDefault:!1};if(this.NetworkFilter(o,function(e){r.RecvStockValue(e,t,i,0),r.Execute.RunNextJob()}),1==o.PreventDefault)return}new di({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,RealtimeUrl:this.RealtimeApiUrl,Args:e,DataKey:i,Callback:function(t,e,a){r.RecvStockValue(t,e,a,0),r.Execute.RunNextJob()},ErrorCallback:function(t){r.AddStockValueError(i,t)}}).Download()},this.GetGPJYValue=function(t){var e=this.JobArgumentsToArray(t,3),a=this.GetStockDataKey(t,e);if(this.StockData.has(a))return this.Execute.RunNextJob();var i=this,r=1==e[2]?0:2;if(this.NetworkFilter){var n=this.Data.GetDateRange(),o={Name:"JSSymbolData::GetGPJYValue",Explain:"股票交易类数据GPJYVALUE(ID,N,TYPE)",JobID:t.ID,Request:{Url:i.StockHistoryDayApiUrl,Type:"POST",Data:{Args:e,symbol:this.Symbol,daterange:n}},Self:this,PreventDefault:!1};if(this.NetworkFilter(o,function(e){i.RecvStockValue(e,t,a,r),i.Execute.RunNextJob()}),1==o.PreventDefault)return}new function(t){this.Url=t.Url,this.RealtimeUrl=t.RealtimeUrl,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this,e=this.GetFieldList();if(!e)return message=this.Job.FunctionName+"("+this.Args[0]+", "+this.Args[1]+", "+this.Args[2]+") can't support.",this.ErrorCallback(message),void t.RecvCallback(null,t.Job,t.DataKey,!0);v.HttpRequest({url:this.Url,data:{field:e,symbol:[this.Symbol],orderfield:"date",order:-1,start:0,end:5},type:"post",dataType:"json",async:!0,success:function(e){var a=t.ToHQChartData(e);a&&a.length>0&&a.sort(function(t,e){return t.Date-e.Date}),t.RecvCallback(a,t.Job,t.DataKey)}})},this.GetFieldList=function(){var t=this.Args[0];switch(t){case 1:return["shareholder","date","symbol"];case 2:return["tradedetail.buy","tradedetail.sell","date","symbol"];case 3:return["margin","date","symbol"];case 4:return["blocktrading.amount","blocktrading.price","date","symbol"];default:return null}},this.ToHQChartData=function(t){if(!t.stock||1!=t.stock.length)return null;var e=[],a=new c.default,i=t.stock[0],r=this.Args[0],n=this.Args[1];for(var o in i.stockday){var s=i.stockday[o],h=this.ToHQChartItemData(s,r,n);h&&!a.has(h.Date)&&(e.push(h),a.add(h.Date))}return e},this.ToHQChartItemData=function(t,e,a){if(!t)return null;var i=t.date;switch(e){case 1:return t.shareholder?{Date:i,Value:t.shareholder.count}:null;case 2:return!t.tradedetail&&t.tradedetail[0]?null:0==a?{Date:i,Value:t.tradedetail[0].buy}:{Date:i,Value:t.tradedetail[0].sell};case 3:if(!t.margin)return null;if(0==a){if(t.margin.buy)return{Date:i,Value:t.margin.buy.balance}}else if(t.margin.sell)return{Date:i,Value:t.margin.sell.balance};return null;case 4:return t.blocktrading?0==a?{Date:i,Value:t.blocktrading.price}:{Date:i,Value:t.blocktrading.amount}:null;default:return null}}}({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,Args:e,DataKey:a,Callback:function(t,e,a){i.RecvStockValue(t,e,a,r),i.Execute.RunNextJob()},ErrorCallback:function(t){i.AddStockValueError(a,t)}}).Download()},this.GetSCJYValue=function(t){var e=this.JobArgumentsToArray(t,3),a=this.GetStockDataKey(t,e);if(this.StockData.has(a))return this.Execute.RunNextJob();var i=this,r=1==e[2]?0:2;if(this.NetworkFilter){var n=this.Data.GetDateRange(),o={Name:"JSSymbolData::GetSCJYValue",Explain:"股票交易类数据SCJYVALUE(ID,N,TYPE)",JobID:t.ID,Request:{Url:i.StockHistoryDayApiUrl,Type:"POST",Data:{Args:e,symbol:this.Symbol,daterange:n}},Self:this,PreventDefault:!1};if(this.NetworkFilter(o,function(e){i.RecvStockValue(e,t,a,r),i.Execute.RunNextJob()}),1==o.PreventDefault)return}new function(t){this.Url=t.Url,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this,e=this.GetQueryCondtion();if(!e)return message=this.Job.FunctionName+"("+this.Args[0]+", "+this.Args[1]+", "+this.Args[2]+") can't support.",this.ErrorCallback(message),void t.RecvCallback(null,t.Job,t.DataKey,!0);v.HttpRequest({url:this.Url,data:{field:e.Field,symbol:e.Symbol,condition:e.Cond,start:0,end:2e3},type:"post",dataType:"json",async:!0,success:function(e){var a=t.ToHQChartData(e);a&&a.sort(function(t,e){return t.Date-e.Date}),t.RecvCallback(a,t.Job,t.DataKey)}})},this.GetQueryCondtion=function(){var t=new Date,e=1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate();t.setDate(t.getDate()-100);var a=1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate(),i=this.Args[0];switch(i){case 1:var r={Symbol:["CNA.ci"],Field:["margin"],Cond:[{item:["date","int32","gte",a.toString(),"lte",e.toString()]},{item:["margin","doc","exists","true"]}]};return r}},this.ToHQChartData=function(t){if(!t.stock||1!=t.stock.length)return null;var e=[],a=new c.default,i=t.stock[0],r=this.Args[0],n=this.Args[1];for(var o in i.stockday){var s=i.stockday[o],h=this.ToHQChartItemData(s,r,n);h&&!a.has(h.Date)&&(e.push(h),a.add(h.Date))}return e},this.ToHQChartItemData=function(t,e,a){if(!t)return null;var i=t.date,r=null;switch(e){case 1:return t.margin?(r=t.margin,1==a?r.buy&&Te.IsNumber(r.buy.balance)?{Date:i,Value:r.buy.balance}:null:Te.IsNumber(r.sell.balance)?{Date:i,Value:r.sell.balance}:null):null;default:return null}}}({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,Args:e,DataKey:a,Callback:function(t,e,a){i.RecvStockValue(t,e,a,r),i.Execute.RunNextJob()},ErrorCallback:function(t){i.AddStockValueError(a,t)}}).Download()},this.GetVariantData=function(t){var e=t.VariantName;if(this.StockData.has(e))return this.Execute.RunNextJob();var a=this;if(this.NetworkFilter){var i=this.Data.GetDateRange(),r={Name:"JSSymbolData::GetVariantData",Explain:"变量数据下载",JobID:t.ID,Request:{Url:"数据地址",Type:"POST",Data:{VariantName:t.VariantName,symbol:this.Symbol,daterange:i}},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,function(i){if(i.Error)a.AddStockValueError(e,i.Error);else{var r=0;Te.IsNumber(i.DataType)&&(r=i.DataType),a.RecvStockValue(i.Data,t,e,r)}a.Execute.RunNextJob()}),1==r.PreventDefault)return}var n,o=function(t){a.AddStockValueError(e,t)};if("CAPITAL"==t.VariantName||"TOTALCAPITAL"==t.VariantName||"EXCHANGE"==t.VariantName){var s=function(t,e,i){a.RecvStockValue(t,e,i,0),a.Execute.RunNextJob()};n=new di({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,RealtimeUrl:this.RealtimeApiUrl,Args:[t.VariantName],DataKey:e,Callback:s,ErrorCallback:o})}else{if("HYBLOCK"!=t.VariantName&&"DYBLOCK"!=t.VariantName&&"GNBLOCK"!=t.VariantName){if("INBLOCK"==t.VariantName){var h=t.VariantName+", 请对接外部数据.";return this.AddStockValueError(e,h),void this.Execute.RunNextJob()}h="不支持变量"+t.VariantName+", 请对接外部数据.";return this.AddStockValueError(e,h),void this.Execute.RunNextJob()}s=function(t,e,i,r){a.RecvStockValue(t,e,i,r),a.Execute.RunNextJob()};n=new function(t){this.Url=t.Url,this.RealtimeUrl=t.RealtimeUrl,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this.Args[0];switch(t){case"HYBLOCK":case"DYBLOCK":case"GNBLOCK":this.DownloadGroupName(t)}},this.DownloadGroupName=function(t){var e=this,a=["name","symbol"];"HYBLOCK"==t?a.push("industry"):"DYBLOCK"==t?a.push("region"):"GNBLOCK"==t&&a.push("concept"),v.HttpRequest({url:e.RealtimeUrl,data:{field:a,symbol:[this.Symbol]},type:"post",dataType:"json",async:!0,success:function(t){var a=e.RecvGroupName(t);e.RecvCallback(a,e.Job,e.DataKey,1)},error:function(t){e.ErrorCallback(t)}})},this.RecvGroupName=function(t){if(!t.stock||1!=t.stock.length)return null;var e=t.stock[0],a=this.Args[0],i=null;if("HYBLOCK"==a){var r=e.industry;if(!r)return null;for(var n in r){var o=r[n];i=o.name}}else if("DYBLOCK"==a){var s=e.region;if(!s)return null;for(var n in s){var o=s[n];i=o.name}}else if("GNBLOCK"==a){var h=e.concept;if(!h)return null;for(var n in i="",h){var o=h[n];i.length>0&&(i+=" "),i+=o.name}}return{Value:i}}}({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,RealtimeUrl:this.RealtimeApiUrl,Args:[t.VariantName],DataKey:e,Callback:s,ErrorCallback:o})}n.Download()},this.GetCustomVariantData=function(t){var e=t.VariantName;if(this.StockData.has(e))return this.Execute.RunNextJob();var a=Ha.CustomVariant.Data.get(e),i=this;if(this.NetworkFilter){var r=this.Data.GetDateRange(),n={Name:"JSSymbolData::GetCustomVariantData",Explain:"自定义变量数据下载",JobID:t.ID,Request:{Url:"数据地址",Type:"POST",Data:{VariantName:t.VariantName,symbol:this.Symbol,daterange:r,period:this.Period}},Self:this,VariantInfo:a,PreventDefault:!1};this.NetworkFilter(n,function(a){a.Error?i.AddStockValueError(e,a.Error):i.RecvStockValue(a.Data,t,e,a.DataType),i.Execute.RunNextJob()})}else this.AddStockValueError(e,"自定义变量"+e+"下载失败"),this.Execute.RunNextJob()},this.GetCustomFunctionData=function(t){var e=t.FunctionName,a=Ha.CustomFunction.Data.get(e);if(!a.IsDownload)return this.Execute.RunNextJob();if(this.StockData.has(e))return this.Execute.RunNextJob();var i=this;if(this.NetworkFilter){var r=this.Data.GetDateRange(),n={Name:"JSSymbolData::GetCustomFunctionData",Explain:"自定义函数数据下载",JobID:t.ID,Request:{Url:"数据地址",Type:"POST",Data:{FunctionName:t.FunctionName,symbol:this.Symbol,daterange:r,JobItem:t}},Self:this,FunctionInfo:a,PreventDefault:!1};this.NetworkFilter(n,function(a){a.Error?i.AddStockValueError(e,a.Error):i.RecvStockValue(a.Data,t,e,a.DataType),i.Execute.RunNextJob()})}else this.AddStockValueError(e,"自定义函数"+e+"下载失败"),this.Execute.RunNextJob()},this.RecvStockValue=function(t,e,a,i){if(t){if(0==i)if(Array.isArray(t)){var r=this.Data;if(this.DataType==ri.KLINE_ID)if(pt.IsDayPeriod(this.Period,!0))h=r.GetFittingFinanceData(t);else{if(!pt.IsMinutePeriod(this.Period,!0))return;h=r.GetMinuteFittingFinanceData(t)}else h=r.GetMinuteFittingFinanceData(t);(l=new pt).Data=h;var n=l.GetValue();if("EXCHANGE"==a)for(var o in n){var s=r.Data[o];Te.IsPlusNumber(n[o])&&(n[o]=s.Vol/n[o]*100)}this.StockData.set(a,{Data:n})}else this.StockData.set(a,{Data:t.Value});else if(1==i)this.StockData.set(a,{Data:t.Value});else if(2==i){var h,l;r=this.Data;if(this.DataType==ri.KLINE_ID)if(pt.IsDayPeriod(this.Period,!0))h=r.GetFittingTradeData(t,0);else if(pt.IsMinutePeriod(this.Period,!0))h=r.GetMinuteFittingTradeData(t,0);else{if(!pt.IsTickPeriod(this.Period))return;h=r.GetMinuteFittingTradeData(t,0)}else h=r.GetMinuteFittingTradeData(t,0);(l=new pt).Data=h;n=l.GetValue();this.StockData.set(a,{Data:n})}}else D.Complier.Log("[JSSymbolData::RecvStockValue] key="+a+" data is null")},this.AddStockValueError=function(t,e){this.StockData.set(t,{Error:e})},this.GetStockCacheData=function(t){var e;if(t.FunctionName)e=this.GetStockDataKey({FunctionName:t.FunctionName},t.Args);else if(t.VariantName)e=t.VariantName;else{if(!t.CustomName)return null;e=t.CustomName}if(!this.StockData.has(e))return null;var a=this.StockData.get(e);return a.Error&&this.Execute.ThrowUnexpectedNode(t.Node,a.Error),a.Data},this.IsInBlock=function(t,e){var a=this.GetStockCacheData({VariantName:"INBLOCK",Node:e});if(!a)return 0;for(var i=a.split("|"),r=0;r<i.length;++r){if(i[r]==t)return 1}return 0},this.JobArgumentsToArray=function(t,e){var a=t.Args;if(a.length!=e){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,t.FunctionName+"() Error: argument count error.")}for(var r=[],n=0;n<a.length;++n){var o=a[n];if(Te.IsNumber(o))r.push(o);else if(o.Type==ja.Literal)r.push(o.Value);else if(o.Type==ja.Identifier){var s=!1;for(var h in this.Arguments){var l=this.Arguments[h];if(l.Name==o.Name){r.push(l.Value),s=!0;break}}if(!s){i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,t.FunctionName+"() Error: can't read "+o.Name)}}}return r},this.DownloadCustomAPIData=function(t){if(!this.NetworkFilter)return this.Execute.RunNextJob();var e=[];for(var a in t.Args){var i=t.Args[a];if(i.Type==ja.Literal)e.push(i.Value);else{if(i.Type!=ja.Identifier)return this.Execute.RunNextJob();var r=!1;for(var n in this.Arguments){var o=this.Arguments[n];if(o.Name==i.Name){e.push(o.Value),r=!0;break}}if(!r){var s=t.Token;this.Execute.ErrorHandler.ThrowError(s.Index,s.Line,0,"LoadAPIData() Error: can't read "+i.Name)}}}var h=this,l={Name:"JSSymbolData::DownloadCustomAPIData",Explain:"下载自定义api数据",Period:this.Period,Right:this.Right,Symbol:this.Symbol,KData:this.Data,Cache:this.CustomAPIData,Args:e,Self:this,PreventDefault:!1};this.NetworkFilter(l,function(t){h.RecvCustomAPIData(t,e),h.Execute.RunNextJob()}),1!=l.PreventDefault&&this.Execute.RunNextJob()},this.RecvCustomAPIData=function(t,e){t&&(1==t.Type?this.RecvCustomAPISingleData(t,e):this.RecvCustomAPIGroupData(t,e))},this.RecvCustomAPIGroupData=function(t,e){if(t&&t.data){var a=t.data,i=this.GenerateCustomAPIKey(e);if(pt.IsMinutePeriod(this.Period,!0)){if(!a.date||!a.time)return;var r=a.date;a.time;for(var n in a)if("date"!=n&&"time"!=n)var o=a[n]}else if(pt.IsDayPeriod(this.Period,!0)){if(!a.date)return;r=a.date;var s={__Type__:"Object"};for(var n in a)if("date"!=n){o=a[n];if(Array.isArray(o)){var h=this.FittingCustomAPIArray(o,r);s[n]=h}else this.IsNumber(o)&&(s[n]=o)}this.CustomAPIData.set(i,s)}}},this.RecvCustomAPISingleData=function(t,e){var a=t.data,i=this.GenerateCustomAPIKey(e);if(pt.IsMinutePeriod(this.Period,!0)){if(!a.date||!a.time)return;var r=a.date;a.time;for(var n in a)if("date"!=n&&"time"!=n)a[n]}else if(pt.IsDayPeriod(this.Period,!0)){if(!a.date)return;r=a.date;var o=a.value,s=null;s=Array.isArray(o)?1==t.DataType?this.FittingCustomAPIFinanceArray(o,r):this.FittingCustomAPIArray(o,r):o,this.CustomAPIData.set(i,s)}},this.FittingCustomAPIFinanceArray=function(t,e,a){var i,r=this.Data,n=[];for(var o in t){var s=t[o],h=new ct;h.Date=e[o],a&&o<a.length&&(h.Time=a[o]),h.Value=s,n.push(h)}if(pt.IsDayPeriod(this.Period,!0))i=r.GetFittingFinanceData(n);else{if(!pt.IsMinutePeriod(this.Period,!0))return null;i=r.GetMinuteFittingFinanceData(n)}var l=new pt;return l.Data=i,l.GetValue()},this.FittingCustomAPIArray=function(t,e,a){var i,r=this.Data,n=[];for(var o in t){var s=t[o],h=new ct;h.Date=e[o],a&&o<a.length&&(h.Time=a[o]),h.Value=s,n.push(h)}if(pt.IsDayPeriod(this.Period,!0))i=r.GetFittingData(n);else{if(!pt.IsMinutePeriod(this.Period,!0))return null;i=r.GetMinuteFittingData(n)}var l=new pt;return l.Data=i,l.GetValue()},this.GenerateCustomAPIKey=function(t){if(t.length<=0)return"__12_EMPTY_ARGS__";var e="";for(var a in t)e.length>0&&(e+=","),e+=t[a];return e},this.GetCustomApiData=function(t){var e=this.GenerateCustomAPIKey(t);return this.CustomAPIData.has(e)?this.CustomAPIData.get(e):(D.Complier.Log("[JSSymbolData::GetCustomApiData] can't find api data key=["+e+"]"),null)},this.ReadArgumentValue=function(t,e){if(e.Name=t.Name,t.Type==ja.Literal)return e.Value=t.Value,!0;if(t.Type==ja.Identifier){var a=!1;for(var i in this.Arguments){var r=this.Arguments[i];if(r.Name==t.Name)return e.Value=r.Value,a=!0,!0}if(!a)return e.Error="can't read "+t.Name,!1}return e.Error="can't read "+t.Name+", type error.",!1},this.ReadIndexFunctionOut=function(t,e){var a={};if("object"===(void 0===t?"undefined":(0,l.default)(t))){if(!this.ReadArgumentValue(t,a))return e.Error=a.Error,!1}else a.Value=t;return e.OutIndex=a.Value,e.Out=null,!0},this.ReadIndexFunctionValue=function(t,e){var a={};if("object"===(void 0===t?"undefined":(0,l.default)(t))){if(!this.ReadArgumentValue(t,a))return e.Error=a.Error,!1}else a.Value=t;var i,r=a.Value.indexOf(".");-1!=r?(e.Name=a.Value.slice(0,r),-1!=(i=a.Value.indexOf("#",r+1))?(e.Out=a.Value.slice(r+1,i),e.Period=a.Value.slice(i+1)):e.Out=a.Value.slice(r+1)):-1!=(i=a.Value.indexOf("#"))?(e.Name=a.Value.slice(0,i),e.Period=a.Value.slice(i+1)):e.Name=a.Value;var n=new C.default([["DAY",0],["WEEK",1],["MONTH",2],["SEASON",9],["YEAR",3],["HALFYEAR",22],["WEEK2",21],["MIN1",4],["MIN5",5],["MIN15",6],["MIN30",7],["MIN60",8],["MIN120",11],["MIN240",12],["DAY2",40002],["MULTIDAY",40002],["DAY3",40003],["DAY4",40004],["DAY5",40005],["DAY6",40006],["DAY7",40007],["DAY8",40008],["DAY9",40009],["DAY10",40010],["DAY11",40011],["DAY12",40012],["DAY13",40013],["DAY14",40014],["DAY15",40015]]);if(e.Period){if(!n.has(e.Period))return e.Error=e.Period+", 周期错误",!1;e.PeriodID=n.get(e.Period)}return!0},this.ReadSymbolArgumentValue=function(t,e){var a={};if("object"===(void 0===t?"undefined":(0,l.default)(t))){if(!this.ReadArgumentValue(t,a))return e.Error=a.Error,!1}else a.Value=t;""==a.Value&&(a.Value=this.Symbol);var i=a.Value;return i.indexOf(".SH")>0?e.Symbol=i.replace(".SH",".sh"):i.indexOf(".SZ")>0?e.Symbol=i.replace(".SZ",".sz"):0==i.indexOf("SH")?e.Symbol=i.slice(2)+".sh":0==i.indexOf("SZ")?e.Symbol=i.slice(2)+".sz":e.Symbol=i,!0},this.ReadIndexArgumentValue=function(t,e){for(var a in e.Args=[],e.SytemIndex.Args){var i=e.SytemIndex.Args[a];e.Args.push({Value:i.Value,Name:i.Name})}if(t.length>2&&e.SytemIndex.Args&&e.SytemIndex.Args.length>0){a=2;for(var r=0;a<t.length&&r<e.SytemIndex.Args.length;++a,++r){var n={};if("object"===(void 0===(i=t[a])?"undefined":(0,l.default)(i))){if(!this.ReadArgumentValue(i,n))return e.Error=n.Error,!1}else n.Value=i;e.Args[r].Value=n.Value}}return!0},this.GenerateScriptIndexKey=function(t){var e="",a=t.Args;for(var i in a){e.length>0&&(e+=","),e+=a[i].Value.toString()}var r="ALL";return t.Out?r=t.Out:Te.IsPlusNumber(t.OutIndex)&&(r="Out["+(t.OutIndex-1)+"]"),"("+t.Symbol+","+t.PeriodID+"), "+t.Name+"("+e+")=>"+r},this.CallMemberScriptIndex=function(t){var e=this;if(t.Member.Object.Type!=ja.Identifier||t.Member.Property.Type!=ja.Identifier){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallMemberScriptIndex() Error: 参数错误")}var i=t.Member.Object.Name,r=t.Member.Property.Name;if(""==r||null==r){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallMemberScriptIndex() Error: "+i+"."+r+" 指标输出变量错误")}if(this.Execute.VarTable.has(i)&&this.Execute.VarTable.get(i).hasOwnProperty(r))return D.Complier.Log("[JSSymbolData::CallMemberScriptIndex] index data "+i+"."+r+" in cache."),this.Execute.RunNextJob();var n=i+"."+r,o={Job:t,PeriodID:this.Period,Symbol:this.Symbol};if(!this.ReadIndexFunctionValue(n,o)){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallMemberScriptIndex() Error: '"+n+"' "+o.Error)}var s=(new T).Get(o.Name);if(!s){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallMemberScriptIndex() Error: '"+n+"' "+o.Name+" 指标不存在")}if(Array.isArray(s.Args)&&s.Args.length>0)for(var h in o.Args=[],s.Args){var l=s.Args[h];o.Args.push({Value:l.Value,Name:l.Name})}D.Complier.Log("[JSSymbolData::CallMemberScriptIndex] call script index",o);var u=this.Data.GetDateRange(),c={HQDataType:this.DataType,Symbol:o.Symbol,Name:"",Right:this.Right,Period:o.PeriodID,Data:null,SourceData:null,Callback:function(t,a,i){e.RecvMemberScriptIndexData(t,a,i),e.Execute.RunNextJob()},CallbackParam:o,Async:!0,MaxRequestDataCount:this.MaxRequestDataCount+60,MaxRequestMinuteDayCount:this.MaxRequestMinuteDayCount+2,Arguments:o.Args,IsBeforeData:this.IsBeforeData,NetworkFilter:this.NetworkFilter,IsApiPeriod:this.IsApiPeriod,KLineRange:u};ii.Execute(s.Script,c,function(t,a){e.ExecuteScriptIndexError(t,a)})},this.CallScriptIndex=function(t){var e=this;if(t.Member)return this.CallMemberScriptIndex(t);if(!(t.Args&&t.Args.length>=2)){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() Error: "+t.FunctionName+" 参数错误")}var i={Job:t,PeriodID:this.Period};if(!this.ReadSymbolArgumentValue(t.Args[0],i)){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() Error: "+i.Error)}if(!this.ReadIndexFunctionValue(t.Args[1],i)){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() Error: "+i.Error)}if("CALCSTOCKINDEX"==t.FunctionName&&!this.ReadIndexFunctionOut(t.Args[2],i)){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() Error: "+i.Error)}var r=(new T).Get(i.Name);if(!r){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() "+i.Name+" 指标不存在")}if(i.SytemIndex=r,!this.ReadIndexArgumentValue(t.Args,i)){a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() "+i.Name+" 指标参数错误 : "+i.Error+" ")}D.Complier.Log("[JSSymbolData::CallScriptIndex] call script index",i);var n=null;if(this.Data&&this.Data.Data.length>0){var o=this.Data.Data[0],s=this.Data.Data[this.Data.Data.length-1];n={Start:{Date:o.Date,Time:o.Time},End:{Date:s.Date,Time:s.Time}}}var h={HQDataType:this.DataType,Symbol:i.Symbol,Name:"",Right:this.Right,Period:i.PeriodID,Data:null,SourceData:null,Callback:function(t,a,i){e.RecvScriptIndexData(t,a,i),e.Execute.RunNextJob()},CallbackParam:i,Async:!0,MaxRequestDataCount:this.MaxRequestDataCount+60,MaxRequestMinuteDayCount:this.MaxRequestMinuteDayCount+2,Arguments:i.Args,IsBeforeData:this.IsBeforeData,NetworkFilter:this.NetworkFilter,IsApiPeriod:this.IsApiPeriod,KLineRange:n};ii.Execute(i.SytemIndex.Script,h,function(t,a){e.ExecuteScriptIndexError(t,a)})},this.RecvMemberScriptIndexData=function(t,e,a){D.Complier.Log("[JSSymbolData::RecvMemberScriptIndexData] ",t,e,a);var i=a.Data.Data,r=t,n=this.Data.FitKLineIndex(i,r,this.Period,e.PeriodID),o=e.Job.Member,s=o.Object.Name,h=(o.Property.Name,{});for(var l in this.Execute.VarTable.has(s)?h=this.Execute.VarTable.get(s):this.Execute.VarTable.set(s,h),n){var u=t[l].Name;e.Period&&(u+="#"+e.Period),h[u]=n[l].Data}},this.RecvScriptIndexData=function(t,e,a){var i=this.GenerateScriptIndexKey(e);D.Complier.Log("[JSSymbolData::RecvScriptIndexData] ",t,e,a,i);var r=a.Data.Data,n=t;if(e.Out){for(var o=0;o<t.length;++o){if((l=t[o]).Name==e.Out){n=[l];break}}var s=this.Data.FitKLineIndex(r,n,this.Period,e.PeriodID);this.ScriptIndexOutData.set(i,s[0].Data)}else if(Te.IsPlusNumber(e.OutIndex)){n=[t[e.OutIndex-1]];s=this.Data.FitKLineIndex(r,n,this.Period,e.PeriodID);this.ScriptIndexOutData.set(i,s[0].Data)}else{s=this.Data.FitKLineIndex(r,n,this.Period,e.PeriodID);var h={__Type__:"Object"};for(var o in s){var l;h[(l=s[o]).Name]=l.Data}this.ScriptIndexOutData.set(i,h)}},this.ExecuteScriptIndexError=function(t,e){var a=e.Job.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() "+e.Name+" 指标执行错误 : "+t+" ")},this.GetScriptIndexOutData=function(t,e,a){var i={PeriodID:this.Period};this.ReadSymbolArgumentValue(t[0],i)||this.Execute.ThrowUnexpectedNode(e,a+"() 股票代码错误: "+i.Error),this.ReadIndexFunctionValue(t[1],i)||this.Execute.ThrowUnexpectedNode(e,a+"() 指标错误: "+i.Error),"CALCSTOCKINDEX"==a&&(this.ReadIndexFunctionOut(t[2],i)||this.Execute.ThrowUnexpectedNode(e,a+"() Error: "+i.Error));var r=(new T).Get(i.Name);r||this.Execute.ThrowUnexpectedNode(e,a+"() 指标错误: "+i.Name+" 指标不存在"),i.SytemIndex=r,this.ReadIndexArgumentValue(t,i)||this.Execute.ThrowUnexpectedNode(e,a+"()  指标参数错误: "+i.Error);var n=this.GenerateScriptIndexKey(i);return this.ScriptIndexOutData.has(n)?this.ScriptIndexOutData.get(n):null},this.JsonDataToHistoryData=function(t){for(var e=t.data,a=new Array,i=0;i<e.length;++i){var r=new st;r.Date=e[i][0],r.Open=e[i][2],r.YClose=e[i][1],r.Close=e[i][5],r.High=e[i][3],r.Low=e[i][4],r.Vol=e[i][6],r.Amount=e[i][7],e[i].length>8&&(r.Up=e[i][8]),e[i].length>9&&(r.Down=e[i][9]),e[i].length>10&&(r.Stop=e[i][10]),e[i].length>11&&(r.Unchanged=e[i][11]),isNaN(r.Open)||r.Open<=0||a.push(r)}return a},this.JsonDataToMinuteHistoryData=function(t){for(var e=t.data,a=new Array,i=0;i<e.length;++i){var r=new st;r.Date=e[i][0],r.Open=e[i][2],r.YClose=e[i][1],r.Close=e[i][5],r.High=e[i][3],r.Low=e[i][4],r.Vol=e[i][6],r.Amount=e[i][7],r.Time=e[i][8],a.push(r)}for(var n=0;n<a.length;++n){var o=a[n];if(null==o&&coninue,isNaN(o.Open)||o.Open<=0||isNaN(o.High)||o.High<=0||isNaN(o.Low)||o.Low<=0||isNaN(o.Close)||o.Close<=0||isNaN(o.YClose)||o.YClose<=0)if(0==n)o.YClose>0&&(o.Open=o.YClose,o.High=o.YClose,o.Low=o.YClose,o.Close=o.YClose);else for(var s=n-1;s>=0;--s){var h=a[s];if(null==h&&coninue,h.Open>0&&h.High>0&&h.Low>0&&h.Close>0){o.YClose<=0&&(o.YClose=h.Close),o.Open=h.Open,o.High=h.High,o.Low=h.Low,o.Close=h.Close;break}}}return a},this.JsonDataToMinuteData=function(t){var e=new Array;for(var a in t.stock[0].minute){var i=t.stock[0].minute[a],r=new ht;r.Close=i.price,r.Open=i.open,r.High=i.high,r.Low=i.low,r.Vol=i.vol,r.Amount=i.amount,r.DateTime=0==a?t.stock[0].date.toString()+" 0925":t.stock[0].date.toString()+" "+i.time.toString(),r.Date=t.stock[0].date,r.Time=i.time,r.Increase=i.increase,r.Risefall=i.risefall,r.AvPrice=i.avprice,e[a]=r}return e},this.JsonDataToMultiDayMinuteData=function(t){var e=t.symbol.toUpperCase(),a=Ea.IsSHSZ(e),i=(Ea.IsChinaFutures(e),[]);for(var r in t.data){var n=[],o=t.data[r],s=o.date,h=o.yclose,l=h,u=null;for(var c in o.minute){var f=o.minute[c];f[2]&&(l=f[2]),(C=new ht).Close=f[2],C.Open=f[1],C.High=f[3],C.Low=f[4],C.Vol=f[5]/100,C.Amount=f[6],7<f.length&&f[7]>0&&(C.AvPrice=f[7],u=f[7]),C.DateTime=s.toString()+" "+f[0].toString(),C.Date=s,C.Time=f[0],C.Close||(C.Close=l,C.Open=C.High=C.Low=C.Close),!C.AvPrice&&u&&(C.AvPrice=u),C.Close&&h?C.Increase=(C.Close-h)/h*100:C.Increase=null,0==c&&(a&&(C.DateTime=s.toString()+" 0925"),C.IsFristData=!0),C.Open<=0&&(C.Open=null),C.Close<=0&&(C.Close=null),C.AvPrice<=0&&(C.AvPrice=null),C.High<=0&&(C.High=null),C.Low<=0&&(C.Low=null),C.AvPrice<=0&&(C.AvPrice=null),n[c]=C}var d=new pt;d.Data=n,d.YClose=h,d.Close=o.close,d.Date=s,i.push(d)}for(n=[],r=i.length-1;r>=0;--r){var C=i[r];for(var c in C.Data)n.push(C.Data[c])}return n},this.CODELIKE=function(t){return this.Symbol&&0==this.Symbol.indexOf(t)?1:0},this.NAMELIKE=function(t){return this.Name&&0==this.Name.indexOf(t)?1:0},this.SETCODE=function(){return this.Symbol.indexOf(".sh")?1:(this.Symbol.indexOf(".sz"),0)},this.GetSymbol=function(){return this.Symbol},this.GetName=function(){return this.Name},this.DATE=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];t[e]=a.Date-19e6}return t},this.YEAR=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];this.IsNumber(a.Date)?t[e]=parseInt(a.Date/1e4):t[e]=null}return t},this.DAY=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];this.IsNumber(a.Date)?t[e]=parseInt(a.Date%100):t[e]=null}return t},this.MONTH=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];this.IsNumber(a.Date)?t[e]=parseInt(a.Date%1e4/100):t[e]=null}return t},this.TIME=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=0;e<this.Data.Data.length;++e){var a=this.Data.Data[e];this.IsNumber(a.Time)?t[e]=a.Time:t[e]=0}return t},this.TIME2=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=0;e<this.Data.Data.length;++e){var a=this.Data.Data[e];this.IsNumber(a.Time)?t[e]=100*a.Time:t[e]=0}return t},this.DateTime=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=pt.IsMinutePeriod(this.Period,!0),a=0;a<this.Data.Data.length;++a){var i=this.Data.Data[a];t[a]=e?1e4*i.Date+i.Time:i.Date}return t},this.WEEK=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;var e=new Date;for(var a in this.Data.Data){var i=this.Data.Data[a];if(t[a]=null,this.IsNumber(i.Date)){var r=parseInt(i.Date/1e4),n=parseInt(i.Date%1e4/100),o=i.Date%100;e.setFullYear(r,n-1,o),t[a]=e.getDay()}}return t},this.DAYSTOTODAY=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=new Date,a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=0;i<this.Data.Data.length;++i){var r=this.Data.Data[i];if(t[i]=null,this.IsNumber(r.Date)){var n=parseInt(r.Date/1e4),o=parseInt(r.Date%1e4/100),s=r.Date%100,h=new Date(n,o-1,s),l=Math.ceil((a-h)/864e5);t[i]=l}}return t},this.WEEKOFYEAR=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];if(t[e]=null,this.IsNumber(a.Date)){var i=parseInt(a.Date/1e4),r=parseInt(a.Date%1e4/100),n=a.Date%100,o=new Date(i,r-1,n),s=new Date(i,0,1),h=Math.ceil((o-s)/864e5);h+=s.getDay()+1-1;var l=Math.ceil(h/7);t[e]=l}}return t},this.GetYearWeek=function(t){var e=new Date(t.getFullYear(),0,1),a=t.getDay();0==a&&(a=7);var i=e.getDay();0==i&&(i=7);var r=t.getTime()-e.getTime(),n=Math.floor((r+864e5*(i-a))/864e5);return Math.ceil(n/7)+1},this.REFDATE=function(t,e){var a=null;if(Array.isArray(e)?e.length>0&&(a=e[e.length-1]):this.IsNumber(e)&&(a=e),null==a)return null;a<5e6&&(a+=19e6);var i=null;for(var r in this.Data.Data)if(this.Data.Data[r].Date==a){i=parseInt(r);break}return null==i||i>=t.length?null:t[i]},this.PERIOD=function(){var t=[5,6,7,11,0,1,2,3,4,5,9];return this.Period>=0&&this.Period<=t.length-1?t[this.Period]:this.Period},this.GetDrawNull=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data)t[e]=null;return t},this.SysParam=function(t,e){if(!this.DrawInfo)return[];if(2==t){if(e.IsUsePageData=!0,Te.IsNumber(this.DrawInfo.Start))return this.DrawInfo.Start+1}else if(3==t){if(e.IsUsePageData=!0,Te.IsNumber(this.DrawInfo.End))return this.DrawInfo.End+1}else{if(4==t){if(e.IsUsePageData=!0,!Te.IsNumber(this.DrawInfo.End)||!Te.IsNumber(this.DrawInfo.Start))return[];if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return[];for(var a=null,i=this.DrawInfo.Start;i<=this.DrawInfo.End&&i<this.Data.Data.length;++i){var r=this.Data.Data[i];Te.IsNumber(r.High)&&(null==a?a=r.High:a<r.High&&(a=r.High))}return a}if(5==t){if(e.IsUsePageData=!0,!Te.IsNumber(this.DrawInfo.End)||!Te.IsNumber(this.DrawInfo.Start))return[];if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return[];var n=null;for(i=this.DrawInfo.Start;i<=this.DrawInfo.End&&i<this.Data.Data.length;++i){r=this.Data.Data[i];Te.IsNumber(r.Low)&&(null==n?n=r.Low:n>r.Low&&(n=r.Low))}return n}}return[]}}ti.prototype.IsNumber=function(t){return null!=t&&!isNaN(t)},ti.prototype.IsDivideNumber=function(t){return null!=t&&(!isNaN(t)&&0!=t)},ti.prototype.JsonDataToFinance=function(t){for(var e,a=1;a<=4;++a){switch(a){case 1:var i=t.finance1,r=t.announcement1;break;case 2:i=t.finance2,r=t.announcement2;break;case 3:i=t.finance3,r=t.announcement3;break;case 4:i=t.finance4,r=t.announcement4}i&&r&&this.IsNumber(r.year)&&this.IsNumber(r.quarter)&&(e?e.Announcement.year<r.year&&(e={Date:t.date,Finance:i,Announcement:r}):e={Date:t.date,Finance:i,Announcement:r})}return e};var ei=!1,ai={JOB_DOWNLOAD_SYMBOL_DATA:1,JOB_DOWNLOAD_INDEX_DATA:2,JOB_DOWNLOAD_SYMBOL_LATEST_DATA:3,JOB_DOWNLOAD_INDEX_INCREASE_DATA:4,JOB_DOWNLOAD_VOLR_DATA:5,JOB_DOWNLOAD_LATEST_INDEX_DATA:8,JOB_DOWNLOAD_OTHER_SYMBOL_DATA:9,JOB_DOWNLOAD_SYMBOL_PERIOD_DATA:10,JOB_DOWNLOAD_FINVALUE:301,JOB_DOWNLOAD_FINONE:302,JOB_DOWNLOAD_FINANCE:303,JOB_DOWNLOAD_GPJYVALUE:304,JOB_DOWNLOAD_VARIANT:305,JOB_DOWNLOAD_SCJYVALUE:306,JOB_DOWNLOAD_MARGIN_BALANCE:1e3,JOB_DOWNLOAD_MARGIN_RATE:1001,JOB_DOWNLOAD_MARGIN_BUY_BALANCE:1010,JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:1011,JOB_DOWNLOAD_MARGIN_BUY_REPAY:1012,JOB_DOWNLOAD_MARGIN_BUY_NET:1013,JOB_DOWNLOAD_MARGIN_SELL_BALANCE:1020,JOB_DOWNLOAD_MARGIN_SELL_VOLUME:1021,JOB_DOWNLOAD_MARGIN_SELL_REPAY:1022,JOB_DOWNLOAD_MARGIN_SELL_NET:1023,JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE:2e3,JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH:2001,JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT:2002,JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE:2003,JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2:2004,JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER:2005,JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING:2006,JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS:2007,JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS:2008,JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE:2009,JOB_DOWNLOAD_HK_TO_SH:2050,JOB_DOWNLOAD_HK_TO_SZ:2051,JOB_DOWNLOAD_HK_TO_SH_SZ:2052,JOB_DOWNLOAD_HK_TO_SHSZ:2053,JOB_CUSTOM_FUNCTION_DATA:6e3,JOB_CUSTOM_VARIANT_DATA:6001,JOB_DOWNLOAD_SECTION_SF:2e4,JOB_DOWNLOAD_SECTION_F_01:20001,JOB_DOWNLOAD_SECTION_F_02:20002,JOB_DOWNLOAD_SECTION_F_03:20003,JOB_DOWNLOAD_SECTION_F_04:20004,JOB_DOWNLOAD_SECTION_F_05:20005,JOB_DOWNLOAD_SECTION_F_06:20006,JOB_DOWNLOAD_SECTION_F_07:20007,JOB_DOWNLOAD_SECTION_F_08:20008,JOB_DOWNLOAD_SECTION_F_09:20009,JOB_DOWNLOAD_SECTION_F_10:20010,JOB_DOWNLOAD_SECTION_F_11:20011,JOB_DOWNLOAD_SECTION_F_12:20012,JOB_DOWNLOAD_SECTION_F_13:20013,JOB_DOWNLOAD_SECTION_F_14:20014,JOB_DOWNLOAD_SECTION_F_15:20015,JOB_DOWNLOAD_SECTION_F_16:20016,JOB_DOWNLOAD_SECTION_F_17:20017,JOB_DOWNLOAD_SECTION_F_18:20018,JOB_DOWNLOAD_SECTION_F_19:20019,JOB_DOWNLOAD_SECTION_F_20:20020,JOB_DOWNLOAD_SECTION_F_21:20021,JOB_DOWNLOAD_SECTION_F_22:20022,JOB_DOWNLOAD_SECTION_F_23:20023,JOB_DOWNLOAD_SECTION_F_24:20024,JOB_DOWNLOAD_SECTION_F_25:20025,JOB_DOWNLOAD_SECTION_F_26:20026,JOB_DOWNLOAD_SECTION_F_27:20027,JOB_DOWNLOAD_SECTION_F_28:20028,JOB_DOWNLOAD_SECTION_F_29:20029,JOB_DOWNLOAD_SECTION_F_30:20030,JOB_DOWNLOAD_SECTION_F_31:20031,JOB_DOWNLOAD_SECTION_F_32:20032,JOB_DOWNLOAD_SECTION_F_33:20033,JOB_DOWNLOAD_SECTION_F_34:20034,JOB_DOWNLOAD_SECTION_F_35:20035,JOB_DOWNLOAD_SECTION_F_36:20036,JOB_DOWNLOAD_SECTION_F_37:20037,JOB_DOWNLOAD_SECTION_F_38:20038,JOB_DOWNLOAD_SECTION_F_39:20039,JOB_DOWNLOAD_CUSTOM_API_DATA:3e4,JOB_EXECUTE_INDEX:30010,JOB_RUN_SCRIPT:1e4,GetMarginJobID:function(t){var e=new C.default([[1,ai.JOB_DOWNLOAD_MARGIN_BALANCE],[2,ai.JOB_DOWNLOAD_MARGIN_RATE],[3,ai.JOB_DOWNLOAD_MARGIN_BUY_BALANCE],[4,ai.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT],[5,ai.JOB_DOWNLOAD_MARGIN_BUY_REPAY],[6,ai.JOB_DOWNLOAD_MARGIN_BUY_NET],[7,ai.JOB_DOWNLOAD_MARGIN_SELL_BALANCE],[8,ai.JOB_DOWNLOAD_MARGIN_SELL_VOLUME],[9,ai.JOB_DOWNLOAD_MARGIN_SELL_REPAY],[10,ai.JOB_DOWNLOAD_MARGIN_SELL_NET]]);return e.has(t)?e.get(t):null},GetNewsAnalysisID:function(t){var e=new C.default([[1,ai.JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE],[2,ai.JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH],[3,ai.JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT],[4,ai.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE],[5,ai.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2],[6,ai.JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER],[7,ai.JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING],[8,ai.JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS],[9,ai.JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS],[10,ai.JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE]]);return e.has(t)?e.get(t):null},GetSectionFinanceID:function(t){var e=new C.default([["流动资产",ai.JOB_DOWNLOAD_SECTION_F_01],["货币资金",ai.JOB_DOWNLOAD_SECTION_F_02],["存货",ai.JOB_DOWNLOAD_SECTION_F_03],["流动负债",ai.JOB_DOWNLOAD_SECTION_F_04],["非流动负债",ai.JOB_DOWNLOAD_SECTION_F_05],["三项费用",ai.JOB_DOWNLOAD_SECTION_F_06],["投资收益",ai.JOB_DOWNLOAD_SECTION_F_07],["归母净利润",ai.JOB_DOWNLOAD_SECTION_F_08],["扣非净利润",ai.JOB_DOWNLOAD_SECTION_F_09],["扣非每股收益",ai.JOB_DOWNLOAD_SECTION_F_10],["加权平均净资产收益",ai.JOB_DOWNLOAD_SECTION_F_11],["在建工程",ai.JOB_DOWNLOAD_SECTION_F_12],["累计折旧",ai.JOB_DOWNLOAD_SECTION_F_13],["少数股东利润",ai.JOB_DOWNLOAD_SECTION_F_14],["汇兑损益",ai.JOB_DOWNLOAD_SECTION_F_15],["坏账计提",ai.JOB_DOWNLOAD_SECTION_F_16],["固定资产",ai.JOB_DOWNLOAD_SECTION_F_17],["当期折旧",ai.JOB_DOWNLOAD_SECTION_F_18],["营业总收入",ai.JOB_DOWNLOAD_SECTION_F_19],["主营业务利润",ai.JOB_DOWNLOAD_SECTION_F_20],["营业利润",ai.JOB_DOWNLOAD_SECTION_F_21],["净利润",ai.JOB_DOWNLOAD_SECTION_F_22],["应收账款",ai.JOB_DOWNLOAD_SECTION_F_23],["财务费用",ai.JOB_DOWNLOAD_SECTION_F_24],["经营性现金流",ai.JOB_DOWNLOAD_SECTION_F_25],["资产总计",ai.JOB_DOWNLOAD_SECTION_F_26],["负债总计",ai.JOB_DOWNLOAD_SECTION_F_27],["所有者权益总计",ai.JOB_DOWNLOAD_SECTION_F_28],["毛利率",ai.JOB_DOWNLOAD_SECTION_F_29],["每股资本公积金",ai.JOB_DOWNLOAD_SECTION_F_30],["每股未分配利润",ai.JOB_DOWNLOAD_SECTION_F_31],["每股收益",ai.JOB_DOWNLOAD_SECTION_F_32],["每股净资产",ai.JOB_DOWNLOAD_SECTION_F_33],["每股经营性现金流",ai.JOB_DOWNLOAD_SECTION_F_34],["扣非净利润涨幅",ai.JOB_DOWNLOAD_SECTION_F_35],["扣非净利润涨速",ai.JOB_DOWNLOAD_SECTION_F_36],["净利润涨幅",ai.JOB_DOWNLOAD_SECTION_F_37],["资产负债率",ai.JOB_DOWNLOAD_SECTION_F_38],["利润同比",ai.JOB_DOWNLOAD_SECTION_F_39]]);return e.has(t)?e.get(t):null},GetSectionReportPeriod:function(t,e){return t>=2e3&&e>=1&&e<=4?{Year:t,Quarter:e}:null}};function ii(){}ii.Tokenize=function(t){D.Complier.Log("[JSComplier.Tokenize]",t);var e=new function(t){this.ErrorHandler=new za,this.Scanner=new Ja(t,this.ErrorHandler),this.Buffer=[],this.GetNextToken=function(){if(0==this.Buffer.length&&(this.Scanner.ScanComments(),!this.Scanner.IsEOF())){var t=this.Scanner.Lex(),e={Type:Ua[t.Type],Value:this.Scanner.Source.slice(t.Start,t.End)};this.Buffer.push(e)}return this.Buffer.shift()}}(t),a=[];try{for(;;){var i=e.GetNextToken();if(!i)break;a.push(i)}}catch(t){}return a},ii.Parse=function(t){D.Complier.Log("[JSComplier.Parse]",t);var e=new qa(t);return e.Initialize(),e.ParseScript()},ii.Execute=function(t,e,a){!function(){try{e.Self&&(e.Self.Status=1),D.Complier.Log("[JSComplier.Execute]",t,e),D.Complier.Log("[JSComplier.Execute] parser .....");var i=new qa(t);i.Initialize();var r=i.ParseScript();D.Complier.Log("[JSComplier.Execute] parser finish.",r),e.Self&&(e.Self.Status=2),D.Complier.Log("[JSComplier.Execute] execute .....");var n=new function(t,e){var a=this;this.AST=t,this.ErrorHandler=new za,this.VarTable=new C.default,this.VarDrawTable=new C.default,this.OutVarTable=[],this.Arguments=[],this.ErrorCallback,this.GetEventCallback,this.IsUsePageData=!1,this.IndexCtrl,this.Debug=0,this.DebugFilter,this.Interrupt={Exit:!1},this.ConstVarTable=new C.default([["CLOSE",null],["VOL",null],["OPEN",null],["HIGH",null],["LOW",null],["AMOUNT",null],["C",null],["V",null],["O",null],["H",null],["L",null],["AMO",null],["VOLR",null],["VOLINSTK",null],["OPI",null],["QHJSJ",null],["SETTLE",null],["ZSTJJ",null],["ISEQUAL",null],["ISUP",null],["ISDOWN"],["DATE",null],["YEAR",null],["MONTH",null],["PERIOD",null],["WEEK",null],["TIME",null],["DAY",null],["DATETIME",null],["TIME2",null],["WEEKOFYEAR",null],["DAYSTOTODAY",null],["INDEXA",null],["INDEXC",null],["INDEXH",null],["INDEXL",null],["INDEXO",null],["INDEXV",null],["INDEXADV",null],["INDEXDEC",null],["ADVANCE",null],["DECLINE",null],["FROMOPEN",null],["TOTALFZNUM",null],["CURRBARSCOUNT",null],["TOTALBARSCOUNT",null],["ISLASTBAR",null],["BARSTATUS",null],["BARPOS",null],["CAPITAL",null],["TOTALCAPITAL",null],["EXCHANGE",null],["SETCODE",null],["CODE",null],["STKNAME",null],["TQFLAG",null],["HYBLOCK",null],["DYBLOCK",null],["GNBLOCK",null],["FGBLOCK",null],["ZSBLOCK",null],["ZHBLOCK",null],["ZDBLOCK",null],["HYZSCODE",null],["GNBLOCKNUM",null],["FGBLOCKNUM",null],["ZSBLOCKNUM",null],["ZHBLOCKNUM",null],["ZDBLOCKNUM",null],["HYSYL",null],["HYSJL",null],["DRAWNULL",null],["NULL",null],["MACHINEDATE",null],["MACHINETIME",null],["MACHINEWEEK",null]]),this.SymbolData=new ti(this.AST,e,this),this.Algorithm=new Za(this.ErrorHandler,this.SymbolData),this.Draw=new Qa(this.ErrorHandler,this.SymbolData),this.JobList=[],this.UpdateUICallback=null,this.CallbackParam=null,this.IsSectionMode=!1,e&&(e.Callback&&(this.UpdateUICallback=e.Callback),e.CallbackParam&&(this.CallbackParam=e.CallbackParam,this.CallbackParam.HQChart&&(this.GetEventCallback=function(t){return a.CallbackParam.HQChart.GetEventCallback(t)})),e.Arguments&&(this.Arguments=e.Arguments),e.IsSectionMode&&(this.IsSectionMode=e.IsSectionMode),e.Self&&(this.IndexCtrl=e.Self),Te.IsNumber(e.Debug)&&(this.Debug=e.Debug),e.DebugFilter&&(this.DebugFilter=e.DebugFilter)),this.Execute=function(){for(var t in this.OutVarTable=[],this.VarTable=new C.default,this.VarDrawTable=new C.default,D.Complier.Log("[JSExecute::Execute] Load Arguments",this.Arguments),this.Arguments){var e=this.Arguments[t];this.VarTable.set(e.Name,e.Value)}this.RunNextJob()},this.RunNextJob=function(){if(!(this.JobList.length<=0)){D.Complier.Log("[JSExecute::Execute] JobList",this.JobList);var t=this.JobList.shift();switch(t.ID){case ai.JOB_DOWNLOAD_SYMBOL_DATA:return this.SymbolData.GetSymbolData();case ai.JOB_DOWNLOAD_SYMBOL_PERIOD_DATA:return this.SymbolData.GetSymbolPeriodData(t);case ai.JOB_DOWNLOAD_INDEX_DATA:return this.SymbolData.GetIndexData();case ai.JOB_DOWNLOAD_LATEST_INDEX_DATA:return this.SymbolData.GetLatestIndexData();case ai.JOB_DOWNLOAD_INDEX_INCREASE_DATA:return this.SymbolData.GetIndexIncreaseData(t);case ai.JOB_DOWNLOAD_SYMBOL_LATEST_DATA:return this.SymbolData.GetLatestData(t);case ai.JOB_DOWNLOAD_VOLR_DATA:return this.SymbolData.GetVolRateData(t);case ai.JOB_DOWNLOAD_OTHER_SYMBOL_DATA:return this.SymbolData.GetOtherSymbolData(t);case ai.JOB_DOWNLOAD_RELEASE_DATE_DATA:return this.SymbolData.GetCompanyReleaseDate(t.ID);case ai.JOB_DOWNLOAD_MARGIN_BALANCE:case ai.JOB_DOWNLOAD_MARGIN_RATE:case ai.JOB_DOWNLOAD_MARGIN_BUY_BALANCE:case ai.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:case ai.JOB_DOWNLOAD_MARGIN_BUY_REPAY:case ai.JOB_DOWNLOAD_MARGIN_BUY_NET:case ai.JOB_DOWNLOAD_MARGIN_SELL_BALANCE:case ai.JOB_DOWNLOAD_MARGIN_SELL_VOLUME:case ai.JOB_DOWNLOAD_MARGIN_SELL_REPAY:case ai.JOB_DOWNLOAD_MARGIN_SELL_NET:return this.SymbolData.GetMarginData(t.ID);case ai.JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE:case ai.JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH:case ai.JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT:case ai.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE:case ai.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2:case ai.JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER:case ai.JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING:case ai.JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS:case ai.JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS:case ai.JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE:return this.SymbolData.GetNewsAnalysisData(t.ID);case ai.JOB_DOWNLOAD_HK_TO_SHSZ:return this.SymbolData.GetHKToSHSZData(t);case ai.JOB_DOWNLOAD_SECTION_SF:return this.SymbolData.GetSectionFinanceData(t);case ai.JOB_DOWNLOAD_FINONE:return this.SymbolData.GetFinOne(t);case ai.JOB_DOWNLOAD_FINVALUE:return this.SymbolData.GetFinValue(t);case ai.JOB_DOWNLOAD_FINANCE:return this.SymbolData.GetFinance(t);case ai.JOB_DOWNLOAD_GPJYVALUE:return this.SymbolData.GetGPJYValue(t);case ai.JOB_DOWNLOAD_SCJYVALUE:return this.SymbolData.GetSCJYValue(t);case ai.JOB_DOWNLOAD_VARIANT:return this.SymbolData.GetVariantData(t);case ai.JOB_CUSTOM_VARIANT_DATA:return this.SymbolData.GetCustomVariantData(t);case ai.JOB_CUSTOM_FUNCTION_DATA:return this.SymbolData.GetCustomFunctionData(t);case ai.JOB_DOWNLOAD_CUSTOM_API_DATA:return this.SymbolData.DownloadCustomAPIData(t);case ai.JOB_EXECUTE_INDEX:return this.SymbolData.CallScriptIndex(t);case ai.JOB_RUN_SCRIPT:return 1===this.Debug&&this.DebugFilter?this.DebugRun():this.Run()}}},this.ReadSymbolData=function(t,e){switch(t){case"CLOSE":case"C":case"VOL":case"V":case"OPEN":case"O":case"HIGH":case"H":case"LOW":case"L":case"AMOUNT":case"AMO":case"OPI":case"VOLINSTK":case"SETTLE":case"QHJSJ":case"ZSTJJ":case"ISEQUAL":case"ISUP":case"ISDOWN":return this.SymbolData.GetSymbolCacheData(t);case"VOLR":return this.SymbolData.GetVolRateCacheData(e);case"INDEXA":case"INDEXC":case"INDEXH":case"INDEXH":case"INDEXO":case"INDEXV":case"INDEXL":case"INDEXADV":case"INDEXDEC":return this.SymbolData.GetIndexCacheData(t);case"CURRBARSCOUNT":return this.SymbolData.GetCurrBarsCount();case"BARPOS":return this.SymbolData.GetBarPos();case"TOTALBARSCOUNT":return this.SymbolData.GetTotalBarsCount();case"TOTALFZNUM":return this.SymbolData.GetTotalTradeMinuteCount();case"ISLASTBAR":return this.SymbolData.GetIsLastBar();case"BARSTATUS":return this.SymbolData.GetBarStatus();case"TOTALCAPITAL":case"CAPITAL":case"EXCHANGE":case"HYBLOCK":case"DYBLOCK":case"GNBLOCK":case"FGBLOCK":case"ZSBLOCK":case"ZHBLOCK":case"ZDBLOCK":case"HYZSCODE":case"GNBLOCKNUM":case"FGBLOCKNUM":case"ZSBLOCKNUM":case"ZHBLOCKNUM":case"ZDBLOCKNUM":case"HYSYL":case"HYSJL":return this.SymbolData.GetStockCacheData({VariantName:t,Node:e});case"SETCODE":return this.SymbolData.SETCODE();case"CODE":return this.SymbolData.GetSymbol();case"STKNAME":return this.SymbolData.GetName();case"TIME":return this.SymbolData.TIME();case"TIME2":return this.SymbolData.TIME2();case"DATE":return this.SymbolData.DATE();case"DATETIME":return this.SymbolData.DateTime();case"YEAR":return this.SymbolData.YEAR();case"MONTH":return this.SymbolData.MONTH();case"WEEK":return this.SymbolData.WEEK();case"DAY":return this.SymbolData.DAY();case"PERIOD":return this.SymbolData.PERIOD();case"FROMOPEN":return this.SymbolData.GetLatestIndexCacheData("FROMOPEN");case"DRAWNULL":case"NULL":return this.SymbolData.GetDrawNull();case"ADVANCE":case"DECLINE":return this.SymbolData.GetIndexIncreaseCacheData(t,this.SymbolData.Symbol,e);case"TQFLAG":return this.SymbolData.Right;case"MACHINEDATE":return 1e4*(a=new Date).getFullYear()+1*a.getMonth()*100+a.getDate()-19e6;case"MACHINETIME":return 1e4*(a=new Date).getHours()+1*a.getMinutes()*100+a.getSeconds();case"MACHINEWEEK":var a;return(a=new Date).getDay();case"WEEKOFYEAR":return this.SymbolData.WEEKOFYEAR();case"DAYSTOTODAY":return this.SymbolData.DAYSTOTODAY()}},this.ReadCustomVariant=function(t,e){return this.SymbolData.GetStockCacheData({VariantName:t,Node:e})},this.ReadVariable=function(t,e){if(this.ConstVarTable.has(t)){var a=this.ConstVarTable.get(t);return null==a&&(a=this.ReadSymbolData(t,e),this.ConstVarTable.set(t,a)),a}if(Ha.IsCustomVariant(t))return this.ReadCustomVariant(t,e);if(this.VarTable.has(t))return this.VarTable.get(t);if(t.indexOf("#")>0){var i=t.split("#");return this.SymbolData.GetSymbolPeriodCacheData(i[0],i[1])}if(0==t.indexOf("COLOR")){var r=ii.ColorVarToRGB(t);if(r)return r}return this.ThrowUnexpectedNode(e,"变量"+t+"不存在",t),null},this.ReadMemberVariable=function(t){var e=t.Object,a=t.Property,i=void 0;if(!(i=e.Type==ja.BinaryExpression||e.Type==ja.LogicalExpression?this.VisitBinaryExpression(e):e.Type==ja.CallExpression?this.VisitCallExpression(e):this.GetNodeValue(e)))return null;var r=i[a.Name];return r||null},this.SingleDataToArrayData=function(t){for(var e=this.SymbolData.Data.Data.length,a=[],i=0;i<e;++i)a[i]=t;return a},this.RunAST=function(){this.AST||this.ThrowError(),this.AST.Body||this.ThrowError();for(var t=0;t<this.AST.Body.length;++t){var e=this.AST.Body[t];if(this.RunASTNode(e,t),this.Interrupt&&this.Interrupt.Exit){D.Complier.Log("[JSExecute::RunAST] Interrupt",this.Interrupt);break}}return D.Complier.Log("[JSExecute::RunAST]",this.VarTable),this.OutVarTable},this.RunASTNode=function(t,e){this.VisitNode(t);var a=e;if(t.Type==ja.ExpressionStatement&&t.Expression)if(t.Expression.Type==ja.AssignmentExpression){if(":"==t.Expression.Operator&&t.Expression.Left){var i=t.Expression.Left.Name,r=this.VarTable.get(i);if(this.VarDrawTable.has(i)){var n=this.VarDrawTable.get(i);this.OutVarTable.push({Name:n.Name,Draw:n,Type:1})}else{var o=0;if(r&&"object"==(void 0===r?"undefined":(0,l.default)(r))&&"Object"==r.__Type__)o=1e3;else if(!this.IsSectionMode&&!Array.isArray(r))if("string"==typeof r){var s=parseFloat(r);Te.IsNumber(s)?r=this.SingleDataToArrayData(s):(r=this.SingleDataToArrayData(r),o=1001)}else r=this.SingleDataToArrayData(r);this.OutVarTable.push({Name:i,Data:r,Type:o})}}}else if(t.Expression.Type==ja.CallExpression){var h=t.Expression;if(this.Draw.IsDrawFunction(h.Callee.Name)){var u=h.Draw;u.Name=h.Callee.Name,this.OutVarTable.push({Name:u.Name,Draw:u,Type:1})}else if("IFC"===h.Callee.Name&&h.Draw){var c=h.Draw;c.Name=c.DrawType,this.OutVarTable.push({Name:c.Name,Draw:c,Type:1})}else{var f=h.Out;m="__temp_c_"+h.Callee.Name+"_"+a+"__",o=0,Array.isArray(f)||(f=this.SingleDataToArrayData(f)),this.OutVarTable.push({Name:m,Data:f,Type:o,NoneName:!0})}}else if(t.Expression.Type==ja.Identifier){var d=t.Expression.Name,C=this.ReadVariable(d,t.Expression);o=0,C&&"object"==(void 0===C?"undefined":(0,l.default)(C))&&"Object"==C.__Type__?o=1e3:this.IsSectionMode||Array.isArray(C)||(C="string"==typeof C?this.SingleDataToArrayData(parseFloat(C)):this.SingleDataToArrayData(C)),d="__temp_i_"+a+"__",this.OutVarTable.push({Name:d,Data:C,Type:o,NoneName:!0})}else if(t.Expression.Type==ja.Literal){var p=t.Expression.Value;Te.IsString(p)&&p.indexOf("$")>0&&(p=this.SymbolData.GetOtherSymolCacheData({Literal:p})),m="__temp_li_"+a+"__",o=0,this.OutVarTable.push({Name:m,Data:p,Type:o,NoneName:!0})}else if(t.Expression.Type==ja.BinaryExpression){var m="__temp_b_"+a+"__",D=t.Expression.Out;o=0,Array.isArray(D)||(D=this.SingleDataToArrayData(D)),this.OutVarTable.push({Name:m,Data:D,Type:o,NoneName:!0})}else if(t.Expression.Type==ja.LogicalExpression){m="__temp_l_"+a+"__";var v=t.Expression.Out;o=0,Array.isArray(v)||(v=this.SingleDataToArrayData(v)),this.OutVarTable.push({Name:m,Data:v,Type:o,NoneName:!0})}else if(t.Expression.Type==ja.SequenceExpression){for(var g=void 0,S=void 0,T=void 0,I=void 0,y=void 0,x=void 0,w=!1,F=!1,E=!1,b=!1,L=!1,M=!1,A=!1,O=!1,N=!1,P=!0,R=!1,_=!1,B=!1,k=!1,G=!0,V=!1,H=!1,Y=!1,X=-1,W=-1,U=-1,K=null,z=null,J=null,j=null,q=0;q<t.Expression.Expression.length;++q){var Z=t.Expression.Expression[q];if(Z.Type==ja.AssignmentExpression&&":"==Z.Operator&&Z.Left){if(0==q){g=Z.Left.Name;var Q=this.VarTable.get(g);this.VarDrawTable.has(g)?S=this.VarDrawTable.get(g):Array.isArray(Q)||(Q=this.SingleDataToArrayData(Q),this.VarTable.set(g,Q))}}else if(Z.Type==ja.Identifier){var $=Z.Name;if("COLORSTICK"===$)w=!0;else if("POINTDOT"===$)F=!0;else if("CIRCLEDOT"===$)b=!0;else if("DOTLINE"===$)_=!0;else if("UPDOWNDOT"==$)E=!0;else if("LINESTICK"===$)L=!0;else if("STICK"===$)M=!0;else if("VOLSTICK"===$)A=!0;else if("LINEAREA"==$)O=!0;else if("DRAWABOVE"===$)V=!0;else if("DRAWCENTER"===$)H=!0;else if("DRAWBELOW"==$)Y=!0;else if("STEPLINE"==$)N=!0;else if(0==$.indexOf("COLOR"))T=$;else if(0==$.indexOf("RGBX")&&10==$.length)T=$;else if(0==$.indexOf("LINETHICK"))x=$;else if("ALIGN0"==$)X=0;else if("ALIGN1"==$)X=1;else if("ALIGN2"==$)X=2;else if("VALIGN0"==$)W=0;else if("VALIGN1"==$)W=1;else if("VALIGN2"==$)W=2;else if(0==$.indexOf("NODRAW"))P=!1;else if(0==$.indexOf("EXDATA"))R=!0;else if(0==$.indexOf("LINEOVERLAY"))B=!0;else if(0==$.indexOf("NOTEXT")||0==$.indexOf("NOTITLE"))G=!1;else if(0==$.indexOf("FONTSIZE")){var tt=$.replace("FONTSIZE","");U=parseInt(tt)}else if(0==q){g=Z.Name;var et=this.ReadVariable(g,Z);Array.isArray(et)||(et=this.SingleDataToArrayData(et)),g="__temp_si_"+a+"__",k=!0,this.VarTable.set(g,et)}}else if(Z.Type==ja.Literal){if(0==q){var at=this.SingleDataToArrayData(Z.Value);g=Z.Value.toString(),this.VarTable.set(g,at)}}else if(Z.Type==ja.CallExpression)if(0==q)if(this.Draw.IsDrawFunction(Z.Callee.Name))(S=Z.Draw).Name=Z.Callee.Name;else{var it=Z.Out;g="__temp_sc_"+Z.Callee.Name+"_"+a+"__",k=!0,this.VarTable.set(g,it)}else if("RGB"==Z.Callee.Name||"RGBA"==Z.Callee.Name)T=Z.Out;else if("UPCOLOR"==Z.Callee.Name)I=Z.Out;else if("DOWNCOLOR"==Z.Callee.Name)y=Z.Out;else if("XMOVE"==Z.Callee.Name)J=Z.Out;else if("YMOVE"==Z.Callee.Name)j=Z.Out;else if("SOUND"==Z.Callee.Name)this.GetSoundEvent(),g=null;else if("ICON"==Z.Callee.Name){var rt=this.VarTable.get(g);rt&&(S=this.GetOutIconData(rt,Z.Draw))&&(S.Name=Z.Callee.Name),g=null}else"BACKGROUND"==Z.Callee.Name?(K=Z.Draw,g=null):"CKLINE"==Z.Callee.Name&&(z=Z.Draw,g=null);else if(Z.Type==ja.BinaryExpression&&0==q){g="__temp_sb_"+a+"__";var nt=Z.Out;k=!0,this.VarTable.set(g,nt)}}if(F&&g){var ot=this.VarTable.get(g);Array.isArray(ot)||(ot=this.SingleDataToArrayData(ot));var st={Name:g,Data:ot,Radius:ia.POINTDOT.Radius,Type:3};T&&(st.Color=T),x&&(st.LineWidth=x),this.OutVarTable.push(st)}else if(b&&g){var ht=this.VarTable.get(g);Array.isArray(ht)||(ht=this.SingleDataToArrayData(ht));var lt={Name:g,Data:ht,Radius:ia.CIRCLEDOT.Radius,Type:3};T&&(lt.Color=T),x&&(lt.LineWidth=x),this.OutVarTable.push(lt)}else if(E&&g){var ut=this.VarTable.get(g);Array.isArray(ut)||(ut=this.SingleDataToArrayData(ut));var ct={Name:g,Data:ut,Radius:ia.CIRCLEDOT.Radius,Type:3,UpDownDot:!0};T&&(ct.Color=T),x&&(ct.LineWidth=x),this.OutVarTable.push(ct)}else if(L&&g){var ft={Name:g,Data:this.VarTable.get(g),Type:4};T&&(ft.Color=T),x&&(ft.LineWidth=x),this.OutVarTable.push(ft)}else if(M&&g){var dt={Name:g,Data:this.VarTable.get(g),Type:5};T&&(dt.Color=T),x&&(dt.LineWidth=x),this.OutVarTable.push(dt)}else if(A&&g){var Ct={Name:g,Data:this.VarTable.get(g),Type:6};T&&(Ct.Color=T),I&&(Ct.UpColor=I),y&&(Ct.DownColor=y),this.OutVarTable.push(Ct)}else if(O&&g){var pt={Name:g,Data:this.VarTable.get(g),Type:9};T&&(pt.Color=T),I&&(pt.UpColor=I),y&&(pt.DownColor=y),x&&(pt.LineWidth=x),this.OutVarTable.push(pt)}else if(w&&g){var mt={Name:g,Data:this.VarTable.get(g),Color:T,Type:2};x&&(mt.LineWidth=x),T&&(mt.Color=T),I&&(mt.UpColor=I),y&&(mt.DownColor=y),this.OutVarTable.push(mt)}else if(g&&T&&!S){var Dt=this.VarTable.get(g);Array.isArray(Dt)||(Dt=this.SingleDataToArrayData(Dt));var vt={Name:g,Data:Dt,Color:T,Type:0};x&&(vt.LineWidth=x),0==P&&(vt.IsShow=!1),1==R&&(vt.IsExData=!0),1==_&&(vt.IsDotLine=!0),1==B&&(vt.IsOverlayLine=!0),1==k&&(vt.NoneName=!0),0==G&&(vt.IsShowTitle=!1),1==N&&(vt.Type=7),this.OutVarTable.push(vt)}else if(S){var gt={Name:S.Name,Draw:S,Type:1};T&&(gt.Color=T),1==_&&(gt.IsDotLine=!0),x&&(gt.LineWidth=x),V&&(gt.IsDrawAbove=!0),H&&(gt.IsDrawCenter=!0),Y&&(gt.IsDrawBelow=!0),X>=0&&(gt.DrawAlign=X),W>=0&&(gt.DrawVAlign=W),U>0&&(gt.DrawFontSize=U),K&&(gt.Background=K),z&&(gt.VerticalLine=z),Te.IsNumber(J)&&(gt.XOffset=J),Te.IsNumber(j)&&(gt.YOffset=j),this.OutVarTable.push(gt)}else if(g){var St={Name:g,Data:this.VarTable.get(g),Type:0};T&&(St.Color=T),x&&(St.LineWidth=x),0==P&&(St.IsShow=!1),1==R&&(St.IsExData=!0),1==_&&(St.IsDotLine=!0),1==B&&(St.IsOverlayLine=!0),0==G&&(St.IsShowTitle=!1),1==N&&(St.Type=7),this.OutVarTable.push(St)}}},this.GetOutIconData=function(t,e){if(Array.isArray(t)){for(var a=0;a<t.length&&a<e.DrawData.length;++a)t[a]<=0&&(e.DrawData[a]=null);return e}return t?e:null},this.GetSoundEvent=function(){return this.GetEventCallback?this.GetEventCallback(w.ON_PLAY_SOUND):null},this.Run=function(){try{var t=this.RunAST();D.Complier.Log("[JSComplier.Run] execute finish",t),this.IndexCtrl&&(this.IndexCtrl.Status=0),this.UpdateUICallback&&(D.Complier.Log("[JSComplier.Run] invoke UpdateUICallback."),this.CallbackParam&&this.CallbackParam.Job&&this.CallbackParam.Job.ID==ai.JOB_EXECUTE_INDEX?this.UpdateUICallback(t,this.CallbackParam,this.SymbolData):(this.CallbackParam&&this.CallbackParam.Self&&"ScriptIndexConsole"===this.CallbackParam.Self.ClassName&&(this.CallbackParam.JSExecute=this),1==this.IsUsePageData&&(this.CallbackParam.Self.IsUsePageData=!0),this.UpdateUICallback(t,this.CallbackParam)))}catch(t){D.Complier.Log(t),t.Job?(D.Complier.Log("[JSComplier.Run] download job and reexectue",t.Job),this.JobList.push(t.Job),this.JobList.push({ID:ai.JOB_RUN_SCRIPT}),this.Execute()):this.ErrorCallback&&(this.IndexCtrl&&(this.IndexCtrl.Status=0),this.ErrorCallback(t,this.CallbackParam))}},this.DebugRun_End=function(){var t=this.OutVarTable;D.Complier.Log("[JSComplier.DebugRun_End] execute finish",t),this.IndexCtrl&&(this.IndexCtrl.Status=0),this.UpdateUICallback&&(D.Complier.Log("[JSComplier.DebugRun_End] invoke UpdateUICallback."),this.CallbackParam&&this.CallbackParam.Job&&this.CallbackParam.Job.ID==ai.JOB_EXECUTE_INDEX?this.UpdateUICallback(t,this.CallbackParam,this.SymbolData):(this.CallbackParam&&this.CallbackParam.Self&&"ScriptIndexConsole"===this.CallbackParam.Self.ClassName&&(this.CallbackParam.JSExecute=this),1==this.IsUsePageData&&(this.CallbackParam.Self.IsUsePageData=!0),this.UpdateUICallback(t,this.CallbackParam)))},this.DebugRun_Next=function(t){var e=this;if(t.ExeLine<t.LineCount){var a=this.AST.Body[t.ExeLine];this.RunASTNode(a),++t.ExeLine,this.DebugFilter(t,function(){e.DebugRun_Next(t)})}else this.DebugRun_End(),t.Status=2,this.DebugFilter(t,null)},this.DebugRun=function(){var t=this;try{this.AST||this.ThrowError(),this.AST.Body||this.ThrowError();var e={LineCount:this.AST.Body.length,ExeLine:0,Self:this,Status:1};this.DebugFilter(e,function(){t.DebugRun_Next(e)})}catch(t){this.ErrorCallback&&(this.IndexCtrl&&(this.IndexCtrl.Status=0),this.ErrorCallback(t,this.CallbackParam))}},this.VisitNode=function(t){switch(t.Type){case ja.SequenceExpression:this.VisitSequenceExpression(t);break;case ja.ExpressionStatement:this.VisitNode(t.Expression);break;case ja.AssignmentExpression:this.VisitAssignmentExpression(t);break;case ja.BinaryExpression:case ja.LogicalExpression:this.VisitBinaryExpression(t);break;case ja.CallExpression:this.VisitCallExpression(t)}},this.VisitSequenceExpression=function(t){for(var e in t.Expression){var a=t.Expression[e];this.VisitNode(a)}},this.VisitCallExpression=function(t){for(var e=t.Callee.Name,a=[],i=0;i<t.Arguments.length;++i){var r,n=t.Arguments[i];if("IFC"===e&&i>=1)break;r=n.Type==ja.BinaryExpression||n.Type==ja.LogicalExpression?this.VisitBinaryExpression(n):n.Type==ja.CallExpression?this.VisitCallExpression(n):this.GetNodeValue(n),a.push(r)}if("IFC"===e)return r=(n=this.Algorithm.IFC(a[0])?t.Arguments[1]:t.Arguments[2]).Type==ja.BinaryExpression||n.Type==ja.LogicalExpression?this.VisitBinaryExpression(n):n.Type==ja.CallExpression?this.VisitCallExpression(n):this.GetNodeValue(n),t.Out=r,n.Draw&&(t.Draw=n.Draw),t.Out;if(Ha.IsCustomFunction(e)){var o=this.Algorithm.CallCustomFunction(e,a,this.SymbolData,t);return t.Out=[],t.Draw=null,o&&(o.Out&&(t.Out=o.Out),o.Draw&&(t.Draw=o.Draw)),t.Out}switch(e){case"DYNAINFO":t.Out=this.SymbolData.GetLatestCacheData(a[0]);break;case"STICKLINE":t.Draw=this.Draw.STICKLINE(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWTEXT":t.Draw=this.Draw.DRAWTEXT(a[0],a[1],a[2]),t.Out=[];break;case"DRAWTEXT_FIX":t.Draw=this.Draw.DRAWTEXT_FIX(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"SUPERDRAWTEXT":t.Draw=this.Draw.SUPERDRAWTEXT(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWICON":t.Draw=this.Draw.DRAWICON(a[0],a[1],a[2]),t.Out=[];break;case"ICON":t.Draw=this.Draw.ICON(a[0],a[1]),t.Out=[];break;case"TIPICON":t.Draw=this.Draw.TIPICON(a[0],a[1],a[2],a[3]),t.Out=[];break;case"BACKGROUND":t.Draw=this.Draw.BACKGROUND(a[0],a[1],a[2],a[3],a[4],a[5]),t.Out=[];break;case"CKLINE":t.Draw=this.Draw.CKLINE(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWLINE":t.Draw=this.Draw.DRAWLINE(a[0],a[1],a[2],a[3],a[4]),t.Out=t.Draw.DrawData;break;case"DRAWBAND":t.Draw=this.Draw.DRAWBAND(a[0],a[1],a[2],a[3]),t.Out=[];break;case"FILLRGN":a.length>=4?t.Draw=this.Draw.FILLRGN2(a):t.Draw=this.Draw.FILLRGN(a[0],a[1],a[2]),t.Out=[];break;case"FLOATRGN":t.Draw=this.Draw.FLOATRGN(a),t.Out=[];break;case"FILLTOPRGN":t.Draw=this.Draw.FILLBGRGN(1,a),t.Out=[];break;case"FILLBOTTOMRGN":t.Draw=this.Draw.FILLBGRGN(0,a),t.Out=[];break;case"FILLVERTICALRGN":t.Draw=this.Draw.FILLVERTICALRGN(a),t.Out=[];break;case"DRAWKLINE":case"DRAWKLINE1":t.Draw=this.Draw.DRAWKLINE(a[0],a[1],a[2],a[3]),t.Out=[];break;case"DRAWKLINE_IF":t.Draw=this.Draw.DRAWKLINE_IF(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWCOLORKLINE":t.Draw=this.Draw.DRAWCOLORKLINE(a[0],a[1],a[2]),t.Out=[];break;case"PLOYLINE":case"POLYLINE":t.Draw=this.Draw.POLYLINE(a[0],a[1]),t.Out=t.Draw.DrawData;break;case"DRAWNUMBER":t.Draw=this.Draw.DRAWNUMBER(a[0],a[1],a[2],a[3]),t.Out=t.Draw.DrawData.Value;break;case"DRAWNUMBER_FIX":t.Draw=this.Draw.DRAWNUMBER_FIX(a[0],a[1],a[2],a[3],a[4]),t.Out=t.Draw.DrawData.Value;break;case"DRAWCHANNEL":t.Draw=this.Draw.DRAWCHANNEL(a[0],a[1],a[2],a[3],a[4],a[5],a[6]),t.Out=[];break;case"RGB":t.Out=this.Draw.RGB(a[0],a[1],a[2]);break;case"RGBA":t.Out=this.Draw.RGBA(a[0],a[1],a[2],a[3]);break;case"UPCOLOR":t.Out=this.Draw.UPCOLOR(a[0]);break;case"DOWNCOLOR":t.Out=this.Draw.DOWNCOLOR(a[0]);break;case"XMOVE":t.Out=this.Draw.XMOVE(a[0]);break;case"YMOVE":t.Out=this.Draw.YMOVE(a[0]);break;case"PARTLINE":t.Draw=this.Draw.PARTLINE(a),t.Out=[];break;case"DRAWGBK":t.Draw=this.Draw.DRAWGBK(a[0],a[1],a[2],a[3]),t.Out=[];break;case"DRAWGBK2":t.Draw=this.Draw.DRAWGBK2(a[0],a[1],a[2],a[3]),t.Out=[];break;case"DRAWGBK_DIV":t.Draw=this.Draw.DRAWGBK_DIV(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWTEXT_LINE":t.Draw=this.Draw.DRAWTEXT_LINE(a[0],a[1],a[2],a[3],a[4],a[5],a[6]),t.Out=[];break;case"DRAWRECTREL":t.Draw=this.Draw.DRAWRECTREL(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWTEXTREL":t.Draw=this.Draw.DRAWTEXTREL(a[0],a[1],a[2]),t.Out=[];break;case"DRAWTEXTABS":t.Draw=this.Draw.DRAWTEXTABS(a[0],a[1],a[2]),t.Out=[];break;case"DRAWOVERLAYLINE":t.Draw=this.Draw.DRAWOVERLAYLINE(a[0],a[1],a[2]),t.Out=t.Draw.DrawData.Data;break;case"DRAWSL":t.Draw=this.Draw.DRAWSL(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"VERTLINE":t.Draw=this.Draw.VERTLINE(a[0],a[1]),t.Out=t.Draw.DrawData.Data;break;case"HORLINE":t.Draw=this.Draw.HORLINE(a[0],a[1],a[2],a[3]),t.Out=t.Draw.DrawData.Data;break;case"CODELIKE":t.Out=this.SymbolData.CODELIKE(a[0]);break;case"NAMELIKE":case"NAMEINCLUDE":t.Out=this.SymbolData.NAMELIKE(a[1]);break;case"REFDATE":t.Out=this.SymbolData.REFDATE(a[0],a[1]);break;case"FINANCE":case"FINVALUE":t.Out=this.SymbolData.GetStockCacheData({FunctionName:e,Args:a,ArgCount:1,Node:t});break;case"FINONE":case"GPJYVALUE":case"SCJYVALUE":t.Out=this.SymbolData.GetStockCacheData({FunctionName:e,Args:a,ArgCount:3,Node:t});break;case"MARGIN":t.Out=this.SymbolData.GetMarginCacheData(a[0],t);break;case"HK2SHSZ":t.Out=this.SymbolData.GetHKToSHSZCacheData(a[0],t);break;case"NEWS":t.Out=this.SymbolData.GetNewsAnalysisCacheData(a[0],t);break;case"UPCOUNT":case"DOWNCOUNT":t.Out=this.SymbolData.GetIndexIncreaseCacheData(e,a[0],t);break;case"SF":t.Out=this.SymbolData.GetSectionFinanceCacheData(a[0],a[1],a[2],t);break;case"LOADAPIDATA":t.Out=this.SymbolData.GetCustomApiData(a);break;case"STKINDI":case"CALCSTOCKINDEX":t.Out=this.SymbolData.GetScriptIndexOutData(a,t,e);break;case"SOUND":t.Draw=this.Draw.SOUND(a[0]),t.Out=[];break;case"PLAYSOUND":t.Draw=this.Draw.PLAYSOUND(a[0],a[1]),t.Out=[];break;case"CLOSE":case"C":case"VOL":case"V":case"OPEN":case"O":case"HIGH":case"H":case"LOW":case"L":case"AMOUNT":case"AMO":t.Out=this.SymbolData.GetOtherSymolCacheData({FunctionName:e,Args:a});break;case"INBLOCK":t.Out=this.SymbolData.IsInBlock(a[0],t);break;case"COVER_C":case"COVER_O":case"COVER_H":case"COVER_L":case"COVER_A":case"COVER_V":return 2==a.length?this.SymbolData.GetSymbolPeriodCacheData2(Ka.GetConvertValueName(e),a[0],a[1]):this.SymbolData.GetSymbolPeriodCacheData(Ka.GetConvertValueName(e),a[0]);case"SYSPARAM":return this.SymbolData.SysParam(a[0],this);case"TESTSKIP":var s=this.Algorithm.TESTSKIP(a[0],t);if(t.Out=null,s&&(this.Interrupt.Exit=!0,t&&t.Marker)){var h=t.Marker;this.Interrupt.Line=h.Line,this.Interrupt.Index=h.Index,this.Interrupt.Column=h.Column}break;default:t.Out=this.Algorithm.CallFunction(e,a,t,this.SymbolData)}return t.Out},this.VisitAssignmentExpression=function(t){var e=t.Left;e.Type!=ja.Identifier&&this.ThrowUnexpectedNode(t);var a=e.Name,i=t.Right,r=null,n=null;if(i.Type==ja.BinaryExpression||i.Type==ja.LogicalExpression)r=this.VisitBinaryExpression(i);else if(i.Type==ja.CallExpression)r=this.VisitCallExpression(i),i.Draw&&(n=i.Draw);else if(i.Type==ja.Literal)r=i.Value,Te.IsString(r)&&i.Value.indexOf("$")>0&&(r=this.SymbolData.GetOtherSymolCacheData({Literal:r}));else if(i.Type==ja.Identifier)r=this.ReadVariable(i.Name,i);else if(i.Type==ja.MemberExpression)r=this.ReadMemberVariable(i);else if(i.Type==ja.UnaryExpression)if("-"==i.Operator){var o=this.GetNodeValue(i.Argument);r=this.Algorithm.Subtract(0,o)}else r=i.Argument.Value;ei&&D.Complier.Log("[JSExecute::VisitAssignmentExpression]",a," = ",r),n&&this.VarDrawTable.set(a,n),this.VarTable.set(a,r)},this.VisitBinaryExpression=function(t){var e=[];e.push(t);for(var a=null;0!=e.length;)if((a=e[e.length-1]).Left&&t!=a.Left&&t!=a.Right)e.push(a.Left);else if(a.Right&&t!=a.Right)e.push(a.Right);else{var i=e.pop();if(i.Type==ja.BinaryExpression){var r=this.GetNodeValue(i.Left),n=this.GetNodeValue(i.Right);switch(ei&&D.Complier.Log("[JSExecute::VisitBinaryExpression] BinaryExpression",i,r,n),i.Out=null,i.Operator){case"-":i.Out=this.Algorithm.Subtract(r,n);break;case"*":i.Out=this.Algorithm.Multiply(r,n);break;case"/":i.Out=this.Algorithm.Divide(r,n);break;case"+":i.Out=this.Algorithm.Add(r,n);break;case">":i.Out=this.Algorithm.GT(r,n);break;case">=":i.Out=this.Algorithm.GTE(r,n);break;case"<":i.Out=this.Algorithm.LT(r,n);break;case"<=":i.Out=this.Algorithm.LTE(r,n);break;case"==":case"=":i.Out=this.Algorithm.EQ(r,n);break;case"!=":case"<>":i.Out=this.Algorithm.NEQ(r,n)}ei&&D.Complier.Log("[JSExecute::VisitBinaryExpression] BinaryExpression",i)}else if(i.Type==ja.LogicalExpression){var o=this.GetNodeValue(i.Left),s=this.GetNodeValue(i.Right);switch(ei&&D.Complier.Log("[JSExecute::VisitBinaryExpression] LogicalExpression",i,o,s),i.Out=null,i.Operator){case"&&":case"AND":i.Out=this.Algorithm.And(o,s);break;case"||":case"OR":i.Out=this.Algorithm.Or(o,s)}ei&&D.Complier.Log("[JSExecute::VisitBinaryExpression] LogicalExpression",i)}t=a}return t.Out},this.GetNodeValue=function(t){switch(t.Type){case ja.Literal:return t.Value;case ja.UnaryExpression:if("-"==t.Operator){var e=this.GetNodeValue(t.Argument);return this.Algorithm.Subtract(0,e)}return t.Argument.Value;case ja.Identifier:return this.ReadVariable(t.Name,t);case ja.BinaryExpression:case ja.LogicalExpression:return t.Out;case ja.CallExpression:return this.VisitCallExpression(t);case ja.MemberExpression:return this.ReadMemberVariable(t);default:this.ThrowUnexpectedNode(t)}},this.ThrowUnexpectedNode=function(t,e,a){var i=t.Marker,r=e||"执行异常";return this.ErrorHandler.ThrowError(i.Index,i.Line,i.Column,r,a)},this.ThrowDownloadSF=function(t,e,a){var i=t.Marker,r=a;return this.ErrorHandler.ThrowDownloadJob(i.Index,i.Line,i.Column,r,e)},this.ThrowError=function(){}}(r,e);n.ErrorCallback=a,n.JobList=i.Node.GetDataJobList(),"ScriptIndexConsole"==e.ClassName&&n.JobList.unshift({ID:ai.JOB_DOWNLOAD_SYMBOL_DATA}),n.JobList.push({ID:ai.JOB_RUN_SCRIPT}),e.Self&&(e.Self.Status=3),n.Execute()}catch(t){D.Complier.Log(t),a&&a(t,e.CallbackParam),e.Self&&(e.Self.Status=0)}}(),D.Complier.Log("[JSComplier.Execute] async execute.")},ii.Explain=function(t,e,a){!function(){try{D.Complier.Log("[JSComplier.Explain]",t,e),D.Complier.Log("[JSComplier.Explain] parser .....");var i=new qa(t);i.Initialize();var r=i.ParseScript();D.Complier.Log("[JSComplier.Explain] parser finish.",r),D.Complier.Log("[JSComplier.Explain] explain .....");var n=new function(t,e){this.AST=t,this.ErrorHandler=new za,this.ErrorCallback,this.UpdateUICallback,this.CallbackParam,this.JobList=[],this.VarTable=new C.default,this.OutVarTable=[],this.ConstVarTable=new C.default([["CLOSE","收盘价"],["VOL","成交量"],["OPEN","开盘价"],["HIGH","最高价"],["LOW","最低价"],["AMOUNT","成交量"],["C","收盘价"],["V","成交量"],["O","开盘价"],["H","最高价"],["L","最低价"],["AMO","成交量"],["VOLR","量比"],["VOLINSTK","持仓量"],["OPI","持仓量"],["ZSTJJ","均价"],["QHJSJ","结算价"],["SETTLE","结算价"],["DATE","日期"],["YEAR","年份"],["MONTH","月份"],["PERIOD","周期"],["WEEK","星期"],["TIME","时间"],["INDEXA","大盘成交额"],["INDEXC","大盘收盘价"],["INDEXH","大盘最高价"],["INDEXL","大盘最低价"],["INDEXO","大盘开盘价"],["INDEXV","大盘成交量"],["INDEXADV","大盘上涨家数"],["INDEXDEC","´大盘下跌家数"],["ADVANCE","上涨家数"],["DECLINE","下跌家数"],["FROMOPEN","当前离开盘分钟数"],["TOTALFZNUM","总分钟数"],["CURRBARSCOUNT","到最后交易的周期"],["TOTALBARSCOUNT","总的周期数"],["ISLASTBAR","是否是最后一个周期"],["BARSTATUS","数据位置状态"],["CAPITAL","当前流通股本(手)"],["TOTALCAPITAL","当前总股本(手)"],["EXCHANGE","换手率"],["SETCODE","市场类型"],["CODE","品种代码"],["STKNAME","品种名称"],["TQFLAG","当前复权状态"],["HYBLOCK","所属行业"],["DYBLOCK","所属地域"],["GNBLOCK","所属概念"],["FGBLOCK","所属风格板块"],["ZSBLOCK","所属指数板块"],["ZHBLOCK","所属组合板块"],["ZDBLOCK","所属自定义板块"],["HYZSCODE","所属行业的板块指数代码"],["GNBLOCKNUM","所属概念板块的个数"],["FGBLOCKNUM","所属风格板块的个数"],["ZSBLOCKNUM","所属指数板块的个数"],["ZHBLOCKNUM","所属组合板块的个数"],["ZDBLOCKNUM","所属自定义板块的个数"],["HYSYL","指数市盈率或个股所属行业的市盈率"],["HYSJL","指数市净率或个股所属行业的市净率"],["DRAWNULL","无效数据"]]),e&&(e.Callback&&(this.UpdateUICallback=e.Callback),e.CallbackParam&&(this.CallbackParam=e.CallbackParam),e.Arguments&&(this.Arguments=e.Arguments)),this.Run=function(){try{for(var t in this.OutVarTable=[],this.VarTable=new C.default,D.Complier.Log("[JSExecute::JSExplainer] Load Arguments",this.Arguments),this.Arguments){var e=this.Arguments[t];this.VarTable.set(e.Name,e.Value)}var a=this.RunAST();D.Complier.Log("[JSExplainer.Run] explain finish",a),this.UpdateUICallback&&(D.Complier.Log("[JSExplainer.Run] invoke UpdateUICallback."),this.UpdateUICallback(a))}catch(t){D.Complier.Log("[JSExplainer.Run] throw error ",t),this.ErrorCallback&&this.ErrorCallback(t,this.OutVarTable)}},this.RunAST=function(){for(var t in this.AST||this.ThrowError(),this.AST.Body||this.ThrowError(),this.AST.Body){var e=this.AST.Body[t];if(this.VisitNode(e),e.Type==ja.ExpressionStatement&&e.Expression)if(e.Expression.Type==ja.AssignmentExpression){if(":"==e.Expression.Operator&&e.Expression.Left){var a=e.Expression.Left.Name,i="输出"+a+": "+this.VarTable.get(a);this.OutVarTable.push({Name:a,Data:i,Type:0})}else if(":="==e.Expression.Operator&&e.Expression.Left){var r=e.Expression.Left.Name,n="赋值"+r+": "+this.VarTable.get(r);this.OutVarTable.push({Name:r,Data:n,Type:0,IsOut:!1})}}else if(e.Expression.Type==ja.CallExpression){var o=e.Expression;if(this.IsDrawFunction(o.Callee.Name)){var s=o.Out,h=o.Callee.Name;this.OutVarTable.push({Name:h,Draw:"输出: "+s,Type:1})}else{var l=o.Out;d="__temp_c_"+o.Callee.Name+"_"+t+"__",this.OutVarTable.push({Name:d,Data:"输出: "+l,Type:0,NoneName:!0})}}else if(e.Expression.Type==ja.Identifier){var u=e.Expression.Name,c=this.ReadVariable(u,e.Expression);u="__temp_i_"+t+"__",this.OutVarTable.push({Name:u,Data:"输出: "+c,Type:0,NoneName:!0})}else if(e.Expression.Type==ja.Literal){var f=e.Expression.Value;Te.IsString(f)&&f.indexOf("$")>0&&(f=this.GetOtherSymbolExplain({Literal:f},e)),d="__temp_li_"+t+"__",this.OutVarTable.push({Name:d,Data:"输出: "+f,Type:0,NoneName:!0})}else if(e.Expression.Type==ja.BinaryExpression){var d="__temp_b_"+t+"__",C=e.Expression.Out;this.OutVarTable.push({Name:d,Data:"输出: "+C,Type:0,NoneName:!0})}else if(e.Expression.Type==ja.LogicalExpression){d="__temp_l_"+t+"__";var p=e.Expression.Out;this.OutVarTable.push({Name:d,Data:"输出: "+p,Type:0,NoneName:!0})}else if(e.Expression.Type==ja.SequenceExpression){var m,v=void 0,g=void 0,S=void 0,T=void 0,I=void 0,y=!1,x=!1,w=!1,F=!1,E=!1,b=!1,L=!0,M=!1,A=!1,O=!1;for(var N in e.Expression.Expression){var P=e.Expression.Expression[N];if(P.Type==ja.AssignmentExpression&&":"==P.Operator&&P.Left){v=P.Left.Name;var R=this.VarTable.get(v);this.VarTable.set(v,R)}else if(P.Type==ja.Identifier){var _=P.Name;if("COLORSTICK"===_)y=!0;else if("POINTDOT"===_)x=!0;else if("CIRCLEDOT"===_)w=!0;else if("DOTLINE"===_)M=!0;else if("LINESTICK"===_)F=!0;else if("STICK"===_)E=!0;else if("VOLSTICK"===_)b=!0;else if("DRAWABOVE"===_)O=!0;else if(0==_.indexOf("COLOR"))T=_;else if(0==_.indexOf("LINETHICK"))I=_;else if(0==_.indexOf("NODRAW"))L=!1;else if(0==_.indexOf("EXDATA"));else if(0==_.indexOf("LINEOVERLAY"));else{v=P.Name;var B=this.ReadVariable(v,P);v="__temp_si_"+t+"__",A=!0,this.VarTable.set(v,B)}}else if(P.Type==ja.Literal){var k=P.Value;v=P.Value.toString(),A=!0,this.VarTable.set(v,k)}else if(P.Type==ja.CallExpression)if(this.IsDrawFunction(P.Callee.Name))S=P.Out,g=P.Callee.Name;else{var G=P.Out;v="__temp_sc_"+P.Callee.Name+"_"+t+"__",A=!0,this.VarTable.set(v,G)}else if(P.Type==ja.BinaryExpression){v="__temp_sb_"+t+"__";var V=P.Out;A=!0,this.VarTable.set(v,V)}}if(m=S?"输出: "+S:A?"输出: "+this.VarTable.get(v):"输出"+v+": "+this.VarTable.get(v),T&&(m+=",颜色"+this.GetColorExplain(T)),I&&(m+=",线段粗细"+this.GetLineWidthExplain(I)),0==L&&(m+=",不显示"),1==M&&(m+=",画虚线"),1==O&&(m+=",显示在位置之上"),x&&v){var H={Name:v,Data:m+=",画小圆点线",Radius:ia.POINTDOT.Radius,Type:3};this.OutVarTable.push(H)}else if(w&&v){var Y={Name:v,Data:m+=",画小圆圈线",Radius:ia.CIRCLEDOT.Radius,Type:3};this.OutVarTable.push(Y)}else if(F&&v){var X={Name:v,Data:m+=",画出柱状线和指标线",Type:4};this.OutVarTable.push(X)}else if(E&&v){var W={Name:v,Data:m+=",画柱状线",Type:5};this.OutVarTable.push(W)}else if(b&&v){var U={Name:v,Data:m+=",画成交量柱状线",Type:6};this.OutVarTable.push(U)}else if(v&&T){var K={Name:v,Data:m,Color:T,Type:0};this.OutVarTable.push(K)}else if(S){var z={Name:g,Data:m,Type:1};this.OutVarTable.push(z)}else if(y&&v){var J={Name:v,Data:m+=",画彩色柱状线",Color:T,Type:2};this.OutVarTable.push(J)}else if(v){var j={Name:v,Data:m,Type:0};this.OutVarTable.push(j)}}}return D.Complier.Log("[JSExplainer::Run]",this.VarTable),this.OutVarTable},this.VisitNode=function(t){switch(t.Type){case ja.SequenceExpression:this.VisitSequenceExpression(t);break;case ja.ExpressionStatement:this.VisitNode(t.Expression);break;case ja.AssignmentExpression:this.VisitAssignmentExpression(t);break;case ja.BinaryExpression:case ja.LogicalExpression:this.VisitBinaryExpression(t);break;case ja.CallExpression:this.VisitCallExpression(t)}},this.VisitSequenceExpression=function(t){for(var e in t.Expression){var a=t.Expression[e];this.VisitNode(a)}},this.VisitCallExpression=function(t){var e=t.Callee.Name,a=[];for(var i in t.Arguments){var r=t.Arguments[i],n=void 0;n=r.Type==ja.BinaryExpression||r.Type==ja.LogicalExpression?this.VisitBinaryExpression(r):r.Type==ja.CallExpression?this.VisitCallExpression(r):this.GetNodeValue(r),a.push(n)}if(D.Complier.Log("[JSExplainer::VisitCallExpression]",e,"(",a.toString(),")"),Ha.IsCustomFunction(e)){var o=this.Algorithm.CallCustomFunction(e,a,this.SymbolData,t);return t.Out=[],t.Draw=null,o&&(o.Out&&(t.Out=o.Out),o.Draw&&(t.Draw=o.Draw)),t.Out}return t.Out=this.CallFunctionExplain(e,a,t),t.Out},this.FUNCTION_INFO_LIST=new C.default([["REF",{Name:"REF",Param:{Count:2},ToString:function(t){return t[1]+"日前的"+t[0]}}],["REFX",{Name:"REFX",Param:{Count:2},ToString:function(t){return t[1]+"日后的"+t[0]}}],["REFV",{Name:"REFV",Param:{Count:2},ToString:function(t){return t[1]+"日前的(未作平滑处理)"+t[0]}}],["REFXV",{Name:"REFXV",Param:{Count:2},ToString:function(t){return t[1]+"日后的(未作平滑处理)"+t[0]}}],["REFDATE",{Name:"REFDATE",Param:{Count:2},ToString:function(t){return t[1]+"日"+t[0]}}],["COUNT",{Name:"COUNT",Param:{Count:2},ToString:function(t){return"统计"+t[1]+"日中满足"+t[0]+"的天数"}}],["BARSLASTCOUNT",{Name:"BARSLASTCOUNT",Param:{Count:1},ToString:function(t){return"条件"+t[0]+"连续成立次数"}}],["BARSCOUNT",{Name:"BARSCOUNT",Param:{Count:1},ToString:function(t){return t[0]+"有效数据周期数"}}],["BARSLAST",{Name:"BARSLAST",Param:{Count:1},ToString:function(t){return"上次"+t[0]+"不为0距今天数"}}],["BARSNEXT",{Name:"BARSNEXT",Param:{Count:1},ToString:function(t){return"下次"+t[0]+"不为0距今天数"}}],["BARSSINCEN",{Name:"BARSSINCEN",Param:{Count:2},ToString:function(t){return"在"+t[1]+"周期内首次"+t[0]+"距今天数"}}],["BARSSINCE",{Name:"BARSSINCE",Param:{Count:1},ToString:function(t){return"首次"+t[0]+"距今天数"}}],["HHV",{Name:"HHV",Param:{Count:2},ToString:function(t){return t[1]+"日内"+t[0]+"的最高值"}}],["LLV",{Name:"LLV",Param:{Count:2},ToString:function(t){return t[1]+"日内"+t[0]+"的最低值"}}],["ZTPRICE",{Name:"ZTPRICE",Param:{Count:2},ToString:function(t){return"计算涨停价"}}],["DTPRICE",{Name:"DTPRICE",Param:{Count:2},ToString:function(t){return"计算跌停价"}}],["BACKSET",{Name:"BACKSET",Param:{Count:2},ToString:function(t){return"若"+t[0]+"则将最近"+t[1]+"周期置为1"}}],["HOD",{Name:"HOD",Param:{Count:2},ToString:function(t){return t[1]+"日内"+t[0]+"的高值名次"}}],["LOD",{Name:"LOD",Param:{Count:2},ToString:function(t){return t[1]+"日内"+t[0]+"的低值名次"}}],["REVERSE",{Name:"REVERSE",Param:{Count:1},ToString:function(t){return t[0]+"的相反数"}}],["FILTER",{Name:"FILTER",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日过滤"}}],["FILTERX",{Name:"FILTERX",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日反向过滤"}}],["TFILTER",{Name:"TFILTER",Param:{Count:3},ToString:function(t){return"信号过滤(多头)"}}],["SUMBARS",{Name:"SUMBARS",Param:{Count:2},ToString:function(t){return t[0]+"累加至"+t[1]+"的天数"}}],["MA",{Name:"MA",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日简单移动平均"}}],["SMA",{Name:"SMA",Param:{Count:3},ToString:function(t){return t[0]+"的"+t[1]+"日["+t[2]+"日权重]移动平均"}}],["MEMA",{Name:"MEMA",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日平滑移动平均"}}],["EMA",{Name:"EMA",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日指数移动平均"}}],["EXPMA",{Name:"EXPMA",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日指数移动平均"}}],["EXPMEMA",{Name:"EXPMEMA",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日指数平滑移动平均"}}],["WMA",{Name:"WMA",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日加权移动平均"}}],["DMA",{Name:"DMA",Param:{Count:2},ToString:function(t){return"以"+t[1]+"为权重"+t[0]+"的动态移动平均"}}],["XMA",{Name:"XMA",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日偏移移动平均"}}],["RANGE",{Name:"RANGE",Param:{Count:3},ToString:function(t){return t[0]+"位于"+t[1]+"和"+t[2]+"之间"}}],["CONST",{Name:"CONST",Param:{Count:1},ToString:function(t){return t[0]+"的最后一日值"}}],["TOPRANGE",{Name:"TOPRANGE",Param:{Count:1},ToString:function(t){return"当前值是近"+t[0]+"周期的最大值"}}],["LOWRANGE",{Name:"LOWRANGE",Param:{Count:1},ToString:function(t){return"当前值是近"+t[0]+"周期的最小值"}}],["FINDHIGH",{Name:"FINDHIGH",Param:{Count:4},ToString:function(t){return t[0]+"在"+t[1]+"日前的"+t[2]+"天内第"+t[3]+"个最高价"}}],["FINDHIGHBARS",{Name:"FINDHIGHBARS",Param:{Count:4},ToString:function(t){return t[0]+"在"+t[1]+"日前的"+t[2]+"天内第"+t[3]+"个最高价到当前周期的周期数"}}],["FINDLOW",{Name:"FINDLOW",Param:{Count:4},ToString:function(t){return t[0]+"在"+t[1]+"日前的"+t[2]+"天内第"+t[3]+"个最低价"}}],["FINDLOWBARS",{Name:"FINDLOWBARS",Param:{Count:2},ToString:function(t){return t[0]+"在"+t[1]+"日前的"+t[2]+"天内第"+t[3]+"个最低价到当前周期的周期数"}}],["SUM",{Name:"SUM",Param:{Count:2},ToString:function(t){return""+t[0]+t[1]+"日累加"}}],["MULAR",{Name:"MULAR",Param:{Count:2},ToString:function(t){return t[0]+"和"+t[1]+"日累乘"}}],["AMA",{Name:"AMA",Param:{Count:2},ToString:function(t){return"以"+t[1]+"为权重"+t[0]+"的自适应均线"}}],["TMA",{Name:"TMA",Param:{Count:3},ToString:function(t){return t[0]+"的"+t[1]+"日["+t[2]+"日权重]移动平均"}}],["CROSS",{Name:"CROSS",Param:{Count:2},ToString:function(t){return t[0]+"上穿"+t[1]}}],["LONGCROSS",{Name:"LONGCROSS",Param:{Count:3},ToString:function(t){return t[0]+"小于"+t[1]+"保持"+t[2]+"个交易日后交叉上穿"}}],["UPNDAY",{Name:"UPNDAY",Param:{Count:2},ToString:function(t){return"最近"+t[1]+"日"+t[0]+"连涨"}}],["DOWNNDAY",{Name:"DOWNNDAY",Param:{Count:2},ToString:function(t){return"最近"+t[1]+"日"+t[0]+"连跌"}}],["NDAY",{Name:"NDAY",Param:{Count:3},ToString:function(t){return"最近"+t[2]+"日"+t[0]+"一直大于"+t[1]}}],["EXIST",{Name:"EXIST",Param:{Count:2},ToString:function(t){return"最近"+t[1]+"日存在"+t[0]}}],["EXISTR",{Name:"EXISTR",Param:{Count:3},ToString:function(t){return"从前"+t[1]+"日到前"+t[2]+"日存在"+t[0]}}],["EVERY",{Name:"EVERY",Param:{Count:2},ToString:function(t){return"最近"+t[1]+"日一直存在"+t[0]}}],["LAST",{Name:"LAST",Param:{Count:3},ToString:function(t){return"从前"+t[1]+"日到前"+t[2]+"日持续"+t[0]}}],["NOT",{Name:"NOT",Param:{Count:1},ToString:function(t){return t[0]+"取反"}}],["IF",{Name:"IF",Param:{Count:3},ToString:function(t){return"如果"+t[0]+",返回"+t[1]+",否则返回"+t[2]}}],["IFF",{Name:"IFF",Param:{Count:3},ToString:function(t){return"如果"+t[0]+",返回"+t[1]+",否则返回"+t[2]}}],["IFN",{Name:"IFN",Param:{Count:3},ToString:function(t){return"如果"+t[0]+",返回"+t[1]+",否则返回"+t[2]}}],["IFC",{Name:"IFC",Param:{Count:3},ToString:function(t){return"如果"+t[0]+",返回"+t[1]+",否则返回"+t[2]}}],["TESTSKIP",{Name:"TESTSKIP",Param:{Count:1},ToString:function(t){return"如果满足条件"+t[0]+",公式返回"}}],["VALUEWHEN",{Name:"VALUEWHEN",Param:{Count:2},ToString:function(t){return"如果"+t[0]+",返回"+t[1]+",否则返回上个输出值 "}}],["MAX",{Name:"MAX",Param:{Count:2},ToString:function(t){return t[0]+"和"+t[1]+"的较大值"}}],["MIN",{Name:"MIN",Param:{Count:2},ToString:function(t){return t[0]+"和"+t[1]+"的较小值"}}],["ACOS",{Name:"ACOS",Param:{Count:1},ToString:function(t){return t[0]+"的反余弦"}}],["ASIN",{Name:"ASIN",Param:{Count:1},ToString:function(t){return t[0]+"的反正弦"}}],["ATAN",{Name:"ATAN",Param:{Count:1},ToString:function(t){return t[0]+"的反正切"}}],["COS",{Name:"COS",Param:{Count:1},ToString:function(t){return t[0]+"的余弦"}}],["SIN",{Name:"SIN",Param:{Count:1},ToString:function(t){return t[0]+"的正弦"}}],["TAN",{Name:"TAN",Param:{Count:1},ToString:function(t){return t[0]+"的正切"}}],["EXP",{Name:"EXP",Param:{Count:1},ToString:function(t){return t[0]+"的指数"}}],["LN",{Name:"LN",Param:{Count:1},ToString:function(t){return t[0]+"的自然对数"}}],["LOG",{Name:"LOG",Param:{Count:1},ToString:function(t){return t[0]+"的对数"}}],["SQRT",{Name:"SQRT",Param:{Count:1},ToString:function(t){return t[0]+"的开方"}}],["ABS",{Name:"ABS",Param:{Count:1},ToString:function(t){return t[0]+"的绝对值"}}],["POW",{Name:"POW",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"乘幂"}}],["CEILING",{Name:"CEILING",Param:{Count:1},ToString:function(t){return t[0]+"的向上舍入"}}],["FLOOR",{Name:"FLOOR",Param:{Count:1},ToString:function(t){return t[0]+"的向上舍入"}}],["INTPART",{Name:"INTPART",Param:{Count:1},ToString:function(t){return t[0]+"的整数部分"}}],["BETWEEN",{Name:"BETWEEN",Param:{Count:3},ToString:function(t){return t[0]+"位于"+t[1]+"和"+t[2]+"之间"}}],["FRACPART",{Name:"FRACPART",Param:{Count:1},ToString:function(t){return t[0]+"的小数部分"}}],["ROUND",{Name:"ROUND",Param:{Count:1},ToString:function(t){return"对"+t[0]+"(进行)四舍五入"}}],["ROUND2",{Name:"ROUND2",Param:{Count:2},ToString:function(t){return"对"+t[0]+"(进行)四舍五入"}}],["SIGN",{Name:"SIGN",Param:{Count:1},ToString:function(t){return t[0]+"的符号"}}],["MOD",{Name:"MOD",Param:{Count:2},ToString:function(t){return t[0]+"关于"+t[1]+"的模"}}],["RAND",{Name:"RAND",Param:{Count:1},ToString:function(t){return"随机正整数"}}],["AVEDEV",{Name:"AVEDEV",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日平均绝对偏差"}}],["DEVSQ",{Name:"DEVSQ",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日数据偏差平方和"}}],["FORCAST",{Name:"FORCAST",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日线性回归预测值"}}],["TSMA",{Name:"TSMA",Param:{Count:2},ToString:function(t){return t[0]+"在"+t[1]+"个周期内的时间序列三角移动平均"}}],["SLOPE",{Name:"SLOPE",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日线性回归斜率"}}],["STD",{Name:"STD",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日估算标准差"}}],["STDP",{Name:"STDP",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日总体标准差"}}],["STDDEV",{Name:"STDDEV",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日标准偏差"}}],["VAR",{Name:"VAR",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日估算样本方差"}}],["VARP",{Name:"VARP",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日总体样本方差"}}],["COVAR",{Name:"COVAR",Param:{Count:3},ToString:function(t){return t[0]+"和"+t[1]+"的"+t[2]+"周期的协方差"}}],["RELATE",{Name:"RELATE",Param:{Count:3},ToString:function(t){return t[0]+"和"+t[1]+"的"+t[0]+"周期的相关系数"}}],["BETA",{Name:"BETA",Param:{Count:1},ToString:function(t){return"β(Beta)系数"}}],["BETAEX",{Name:"BETAEX",Param:{Count:3},ToString:function(t){return t[0]+"和"+t[1]+"的"+t[2]+"周期的相关放大系数"}}],["COST",{Name:"COST",Param:{Count:1},ToString:function(t){return"获利盘为"+t[0]+"%的成本分布"}}],["WINNER",{Name:"WINNER",Param:{Count:1},ToString:function(t){return"以"+t[0]+"计算的获利盘比例"}}],["LWINNER",{Name:"LWINNER",Param:{Count:2},ToString:function(t){return"最近"+t[0]+"日那部分成本以"+t[1]+"价格卖出的获利盘比例"}}],["PWINNER",{Name:"PWINNER",Param:{Count:2},ToString:function(t){return t[0]+"日前那部分成本以"+t[1]+"价格卖出的获利盘比例"}}],["COSTEX",{Name:"COSTEX",Param:{Count:2},ToString:function(t){return"位于价格"+t[0]+"和"+t[1]+"间的成本"}}],["PPART",{Name:"PPART",Param:{Count:2},ToString:function(t){return t[0]+"日前那部分成本占总成本的比例"}}],["SAR",{Name:"SAR",Param:{Count:3},ToString:function(t){return"步长为"+t[1]+"极限值为"+t[0]+"的"+t[2]+"日抛物转向"}}],["SARTURN",{Name:"SARTURN",Param:{Count:3},ToString:function(t){return"步长为"+t[1]+"极限值为"+t[0]+"的"+t[2]+"日抛物转向点"}}],["CON2STR",{Name:"CON2STR",Param:{Count:2},ToString:function(t){return t[0]+"转为字符串"}}],["VAR2STR",{Name:"VAR2STR",Param:{Count:2},ToString:function(t){return t[0]+"转为字符串"}}],["STR2CON",{Name:"STR2CON",Param:{Count:1},ToString:function(t){return t[0]+"转为数字"}}],["STRLEN",{Name:"STRLEN",Param:{Count:1},ToString:function(t){return"得到"+t[0]+"字符串长度"}}],["STRCAT",{Name:"STRCAT",Param:{Count:2},ToString:function(t){return"字符串相加"}}],["VARCAT",{Name:"VARCAT",Param:{Count:2},ToString:function(t){return"字符串相加"}}],["STRSPACE",{Name:"STRSPACE",Param:{Count:1},ToString:function(t){return"字符串"+t[0]+"加一空格"}}],["SUBSTR",{Name:"SUBSTR",Param:{Count:3},ToString:function(t){return"字符串"+t[0]+"中取一部分"}}],["STRCMP",{Name:"STRCMP",Param:{Count:2},ToString:function(t){return"字符串"+t[0]+"和字符串"+t[1]+"比较"}}],["FINDSTR",{Name:"FINDSTR",Param:{Count:2},ToString:function(t){return"字符串"+t[0]+"中查找字符串"+t[1]}}],["NAMEINCLUD",{Name:"NAMEINCLUD",Param:{Count:1},ToString:function(t){return"查找品种名称中包含"+t[0]}}],["CODELIKE",{Name:"CODELIKE",Param:{Count:1},ToString:function(t){return"查找品种名称中包含"+t[0]}}],["INBLOCK",{Name:"AVEDEV",Param:{Count:1},ToString:function(t){return"属于"+t[0]+"板块"}}],["STKINDI",{Name:"STKINDI",Param:{Dynamic:!0},ToString:function(t){return"指标引用"}}],["HHVBARS",{Name:"HHVBARS",Param:{Count:2},ToString:function(t){return 0==t[1]?"历史"+t[0]+"新高距今天数":t[1]+"日内"+t[0]+"新高距今天数"}}],["LLVBARS",{Name:"LLVBARS",Param:{Count:2},ToString:function(t){return 0==t[1]?"历史"+t[0]+"新低距今天数":t[1]+"日内"+t[0]+"新低距今天数"}}]]),this.CallFunctionExplain=function(t,e,a){if(this.FUNCTION_INFO_LIST.has(t)){var i=this.FUNCTION_INFO_LIST.get(t);return!0===i.Param.Dynamic||i.Param.Count!=e.length&&this.ThrowUnexpectedNode(a,"函数"+t+"参数个数不正确. 需要"+i.Param.Count+"个参数"),i.ToString(e)}switch(t){case"CALCSTOCKINDEX":return"引用"+e[0]+"的"+e[1]+"指标第"+e[2]+"个输出值";case"PEAK":case"PEAKBARS":case"ZIG":case"ZIGA":case"TROUGH":case"TROUGHBARS":return this.GetZIGExplain(t,e);case"FINANCE":return this.GetFinanceExplain(e);case"DYNAINFO":return this.GetDynainfoExplain(e);case"CLOSE":case"C":case"VOL":case"V":case"OPEN":case"O":case"HIGH":case"H":case"LOW":case"L":case"AMOUNT":case"AMO":return this.GetOtherSymbolExplain({FunctionName:t,Args:e},a);case"PLOYLINE":return"当满足条件"+e[0]+"时以"+e[1]+"位置为顶点画折线连接";case"DRAWLINE":return"当满足条件"+e[0]+"时,在"+e[1]+"位置画直线起点，当满足条件"+e[2]+"时,在"+e[3]+"位置画直线终点,"+e[4]+"表示是否延长";case"DRAWSL":return"当满足条件"+e[0]+"时,在"+e[1]+"位置画斜线线性回归,"+e[2]+"斜率,"+e[3]+"长度,"+e[4]+"方向";case"DRAWKLINE":case"DRAWKLINE1":return"K线";case"DRAWICON":return"当满足条件"+e[0]+"时,在"+e[1]+"位置画"+e[2]+"号图标";case"DRAWTEXT":return"当满足条件"+e[0]+"时,在"+e[1]+"位置书写文字";case"DRAWTEXT_FIX":return"当满足条件"+e[0]+"时,在横轴"+e[1]+"纵轴"+e[2]+"位置书写文字";case"DRAWNUMBER":return"当满足条件"+e[0]+"时,在"+e[1]+"位置书写数字";case"DRAWNUMBER_FIX":return"当满足条件"+e[0]+"时,在横轴"+e[1]+"纵轴"+e[2]+"位置书写数字";case"RGB":return"自定色["+e[0]+","+e[1]+","+e[2]+"]";case"DRAWBAND":return"画带状线";case"DRAWRECTREL":return"相对位置上画矩形.";case"DRAWGBK":return"填充背景";case"STICKLINE":var r="";return r=-1==e[4]?"虚线空心柱":0==e[4]?"实心柱":"实线空心柱","当满足条件"+e[0]+"时, 在"+e[1]+"和"+e[2]+"位置之间画柱状线,宽度为"+e[3]+","+r;default:this.ThrowUnexpectedNode(a,"函数"+t+"不存在")}},this.GetDynainfoExplain=function(t){var e=new C.default([[3,"前收盘价"],[4,"开盘价"],[5,"最高价"],[6,"最低价"],[7,"现价"],[8,"总量"],[9,"现量"],[10,"总金额"],[11,"均价"],[12,"日涨跌"],[13,"振幅"],[14,"涨幅"],[15,"开盘时的成交金额"],[16,"前5日每分钟均量"],[17,"量比"],[18,"上涨家数"],[19,"下跌家数"]]),a=t[0];return e.has(a)?e.get(a):"即时行情["+a+"]"},this.GetFinanceExplain=function(t){var e=new C.default([[1,"总股本"],[2,"市场类型"],[3,"沪深品种类型"],[4,"沪深行业代码"],[5,"B股"],[6,"H股"],[7,"流通股本[股]"],[8,"股东人数[户]"],[9,"资产负债率%"],[10,"总资产"],[11,"流动资产"],[12,"固定资产"],[13,"无形资产"],[15,"流动负债"],[16,"少数股东权益"]]),a=t[0];return e.has(a)?e.get(a):"财务数据["+a+"]"},this.GetZIGExplain=function(t,e){var a=e[0];switch(0==a?a="开盘价":1==a?a="最高价":2==a?a="最低价":3==a&&(a="收盘价"),t){case"PEAK":return a+"的"+e[1]+"%之字转向的前"+e[2]+"个波峰值";case"PEAKBARS":return a+"的"+e[1]+"5%之字转向的前"+e[2]+"个波峰位置";case"ZIG":return a+"的"+e[1]+"的之字转向";case"ZIGA":return a+"变化"+e[1]+"的之字转向";case"TROUGH":return a+"的"+e[1]+"%之字转向的前"+e[2]+"个波谷值";case"TROUGHBARS":return a+"的"+e[1]+"%之字转向的前"+e[2]+"个波谷位置"}},this.GetColorExplain=function(t){var e=new C.default([["COLORBLACK","黑色"],["COLORBLUE","蓝色"],["COLORGREEN","绿色"],["COLORCYAN","青色"],["COLORRED","红色"],["COLORMAGENTA","洋红色"],["COLORBROWN","棕色"],["COLORLIGRAY","淡灰色"],["COLORGRAY","深灰色"],["COLORLIBLUE","淡蓝色"],["COLORLIGREEN","淡绿色"],["COLORLICYAN","淡青色"],["COLORLIRED","淡红色"],["COLORLIMAGENTA","淡洋红色"],["COLORWHITE","白色"],["COLORYELLOW","黄色"]]);return e.has(t)?e.get(t):0==t.indexOf("COLOR")?"#"+t.substr(5):"rgb(30,144,255)"},this.GetLineWidthExplain=function(t){var e=parseInt(t.replace("LINETHICK",""));return Te.IsPlusNumber(e)?e:1},this.SymbolPeriodExplain=function(t,e){var a=new C.default([["CLOSE","收盘价"],["C","收盘价"],["VOL","成交量"],["V","成交量"],["OPEN","开盘价"],["O","开盘价"],["HIGH","最高价"],["H","最高价"],["LOW","最低价"],["L","最低价"],["AMOUNT","成交金额"],["AMO","成交金额"],["VOLINSTK","持仓量"]]),i=new C.default([["MIN1","1分钟"],["MIN5","5分钟"],["MIN15","15分钟"],["MIN30","30分钟"],["MIN60","60分钟"],["DAY","日"],["WEEK","周"],["MONTH","月"],["SEASON","季"],["YEAR","年"],["WEEK2","双周"],["HALFYEAR","半年"]]),r=t;a.has(t)&&(r=a.get(t));var n=e;return i.has(e)&&(n=i.get(e)),r+"[取"+n+"数据]"},this.GetOtherSymbolExplain=function(t,e){var a=new C.default([["CLOSE","收盘价"],["C","收盘价"],["VOL","成交量"],["V","成交量"],["OPEN","开盘价"],["O","开盘价"],["HIGH","最高价"],["H","最高价"],["LOW","最低价"],["L","最低价"],["AMOUNT","成交金额"],["AMO","成交金额"],["VOLINSTK","持仓量"]]);if(t.FunctionName){var i=t.Args,r=a.get(t.FunctionName);return"["+i[0]+"]"+r}if(t.Literal)return i=t.Literal.toUpperCase().split("$"),a.has(i[1])?"["+i[0]+"]"+(r=a.get(i[1])):""},this.IsDrawFunction=function(t){return!!new c.default(["STICKLINE","DRAWTEXT","SUPERDRAWTEXT","DRAWLINE","DRAWBAND","DRAWKLINE","DRAWKLINE1","DRAWKLINE_IF","PLOYLINE","POLYLINE","DRAWNUMBER","DRAWNUMBER_FIX","DRAWICON","DRAWCHANNEL","PARTLINE","DRAWTEXT_FIX","DRAWGBK","DRAWTEXT_LINE","DRAWRECTREL","DRAWTEXTABS","DRAWOVERLAYLINE","FILLRGN","FILLRGN2","FILLTOPRGN","FILLBOTTOMRGN","FILLVERTICALRGN","FLOATRGN","DRAWSL","DRAWGBK2"]).has(t)},this.VisitAssignmentExpression=function(t){var e=t.Left;e.Type!=ja.Identifier&&this.ThrowUnexpectedNode(t);var a=e.Name,i=t.Right,r=null;i.Type==ja.BinaryExpression||i.Type==ja.LogicalExpression?r=this.VisitBinaryExpression(i):i.Type==ja.CallExpression?r=this.VisitCallExpression(i):i.Type==ja.Literal?(r=i.Value,Te.IsString(r)&&i.Value.indexOf("$")>0&&(r=this.GetOtherSymbolExplain({Literal:r},t))):i.Type==ja.Identifier?r=this.ReadVariable(i.Name,i):i.Type==ja.MemberExpression?r=this.ReadMemberVariable(i):i.Type==ja.UnaryExpression&&(r="-"==i.Operator?"-"+this.GetNodeValue(i.Argument):i.Argument.Value),D.Complier.Log("[JSExplainer::VisitAssignmentExpression]",a," = ",r),this.VarTable.set(a,r)},this.ReadMemberVariable=function(t){var e=t.Object,a=t.Property,i=void 0;if(e.Type==ja.BinaryExpression||e.Type==ja.LogicalExpression)i=this.VisitBinaryExpression(e);else{if(e.Type!=ja.CallExpression){if(a.Name.indexOf("#")>0)var r=a.Name.split("#"),n=e.Name+"的"+r[0]+"[周期"+r[1]+"]";else var n=e.Name+"的"+a.Name;return n}i=this.VisitCallExpression(e)}return i&&(n=i[a.Name])||null},this.VisitBinaryExpression=function(t){var e=[];e.push(t);for(var a=null;0!=e.length;)if((a=e[e.length-1]).Left&&t!=a.Left&&t!=a.Right)e.push(a.Left);else if(a.Right&&t!=a.Right)e.push(a.Right);else{var i=e.pop();if(i.Type==ja.BinaryExpression){var r=this.GetNodeValue(i.Left),n=this.GetNodeValue(i.Right);D.Complier.Log("[JSExplainer::VisitBinaryExpression] BinaryExpression",i,r,n),i.Out=null,i.Out="("+r+" "+i.Operator+" "+n+")","收盘价"==r&&"开盘价"==n?">"==i.Operator?i.Out="(收阳线)":"<"==i.Operator?i.Out="(收阴线)":"="==i.Operator&&(i.Out="(平盘)"):"开盘价"==r&&"收盘价"==n&&("<"==i.Operator?i.Out="(收阳线)":">"==i.Operator?i.Out="(收阴线)":"="==i.Operator&&(i.Out="(平盘)")),D.Complier.Log("[JSExplainer::VisitBinaryExpression] BinaryExpression",i)}else if(i.Type==ja.LogicalExpression){var o=this.GetNodeValue(i.Left),s=this.GetNodeValue(i.Right);switch(D.Complier.Log("[JSExecute::VisitBinaryExpression] LogicalExpression",i,o,s),i.Out=null,i.Operator){case"&&":case"AND":i.Out="("+o+" 并且 "+s+")";break;case"||":case"OR":i.Out="("+o+" 或者 "+s+")"}D.Complier.Log("[JSExplainer::VisitBinaryExpression] LogicalExpression",i)}t=a}return t.Out},this.GetNodeValue=function(t){switch(t.Type){case ja.Literal:return t.Value;case ja.UnaryExpression:return"-"==t.Operator?"-"+this.GetNodeValue(t.Argument):t.Argument.Value;case ja.Identifier:return this.ReadVariable(t.Name,t);case ja.BinaryExpression:case ja.LogicalExpression:return t.Out;case ja.CallExpression:return this.VisitCallExpression(t);default:this.ThrowUnexpectedNode(t)}},this.ReadVariable=function(t,e){if(this.ConstVarTable.has(t))return this.ConstVarTable.get(t);if(Ha.IsCustomVariant(t))return this.ReadCustomVariant(t,e);if(this.VarTable.has(t))return this.VarTable.get(t);if(t.indexOf("#")>0){var a=t.split("#");return this.SymbolPeriodExplain(a[0],a[1])}return this.ThrowUnexpectedNode(e,"变量"+t+"不存在"),t},this.ThrowUnexpectedNode=function(t,e){var a=t.Marker,i=e||"执行异常";return this.ErrorHandler.ThrowError(a.Index,a.Line,a.Column,i)},this.ThrowError=function(){}}(r,e);n.ErrorCallback=a,n.JobList=i.Node.GetDataJobList(),n.JobList.push({ID:ai.JOB_RUN_SCRIPT}),n.Run()}catch(t){D.Complier.Log(t),a&&a(t,e.CallbackParam)}}(),D.Complier.Log("[JSComplier.Explain] async explain.")},ii.SetDomain=function(t,e){t&&(Ha.Domain=t),e&&(Ha.CacheDomain=e)},ii.AddIcon=function(t){Ha.CustomDrawIcon.Data.set(t.ID,t)},ii.AddFunction=function(t){if(t&&t.Name){var e=t.Name.toUpperCase();Ha.CustomFunction.Data.set(e,t)}},ii.AddVariant=function(t){if(t&&t.Name){var e=t.Name.toUpperCase();Ha.CustomVariant.Data.set(e,t)}},ii.ColorVarToRGB=function(t){var e=new C.default([["COLORBLACK","rgb(0,0,0)"],["COLORBLUE","rgb(18,95,216)"],["COLORGREEN","rgb(25,158,0)"],["COLORCYAN","rgb(0,255,198)"],["COLORRED","rgb(238,21,21)"],["COLORMAGENTA","rgb(255,0,222)"],["COLORBROWN","rgb(149,94,15)"],["COLORLIGRAY","rgb(218,218,218)"],["COLORGRAY","rgb(133,133,133)"],["COLORLIBLUE","rgb(94,204,255)"],["COLORLIGREEN","rgb(183,255,190)"],["COLORLICYAN","rgb(154,255,242)"],["COLORLIRED","rgb(255,172,172)"],["COLORLIMAGENTA","rgb(255,145,241)"],["COLORWHITE","rgb(255,255,255)"],["COLORYELLOW","rgb(255,198,0)"]]);if(e.has(t))return e.get(t);if(0==t.indexOf("COLOR")){if(6!=(n=t.substr(5)).length)return null;var a=n.substr(0,2),i=parseInt(a,16);a=n.substr(2,2);var r=parseInt(a,16);return a=n.substr(4,2),"rgb("+(o=parseInt(a,16))+","+r+","+i+")"}if(0==t.indexOf("RGBX")){var n;if(6!=(n=t.substr(4)).length)return null;a=n.substr(0,2);var o=parseInt(a,16);a=n.substr(2,2);r=parseInt(a,16);return a=n.substr(4,2),"rgb("+o+","+r+","+(i=parseInt(a,16))+")"}return null};var ri={KLINE_ID:0,MINUTE_ID:2,HISTORY_MINUTE_ID:3,MULTIDAY_MINUTE_ID:4},ni={OVERLAY_BARS:"OVERLAY_BARS",KLINE_TABLE:"KLINE_TABLE",SCATTER_PLOT:"SCATTER_PLOT"};var oi=new function(){this.DataMap=new C.default,this.Add=function(t,e){this.DataMap.set(t,{MinuteFittingCallback:e.MinuteFittingCallback,KLineFittingCallback:e.KLineFittingCallback,CreateChartCallback:e.CreateChartCallback,FormatTitleCallback:e.FormatTitleCallback})},this.Get=function(t){return this.DataMap.has(t)?this.DataMap.get(t):null},this.Has=function(t){return this.DataMap.has(t)}};function si(t,e,a,i){this.newMethod=ma,this.newMethod(t),delete this.newMethod,this.ClassName="ScriptIndex",this.Script=e,this.Arguments=[],this.OutVar=[],this.ID,this.FloatPrecision=2,this.StringFormat,this.KLineType=null,this.InstructionType,this.YSpecificMaxMin=null,this.YSplitScale=null,this.Condition=null,this.OutName=null,this.YSplitType,this.IsLocked=!1,this.LockCallback=null,this.LockID=null,this.LockBG=null,this.LockTextColor=null,this.LockText=null,this.LockFont=null,this.LockCount=20,this.LockMinWidth=null,this.TitleFont=ia.TitleFont,this.IsShortTitle=!1,this.IsUsePageData=!1,this.Debug,i&&(i.FloatPrecision>=0&&(this.FloatPrecision=i.FloatPrecision),i.StringFormat>0&&(this.StringFormat=i.StringFormat),i.ID&&(this.ID=i.ID),(i.KLineType>=0||-1===i.KLineType)&&(this.KLineType=i.KLineType),i.InstructionType&&(this.InstructionType=i.InstructionType),i.YSpecificMaxMin&&(this.YSpecificMaxMin=i.YSpecificMaxMin),i.YSplitScale&&(this.YSplitScale=i.YSplitScale),i.Condition&&(this.Condition=i.Condition),i.TitleFont&&(this.TitleFont=i.TitleFont),i.IsShortTitle&&(this.IsShortTitle=i.IsShortTitle),i.OutName&&(this.OutName=i.OutName),Te.IsNumber(i.YSplitType)&&(this.YSplitType=i.YSplitType),i.Debug&&Te.IsPlusNumber(i.Debug.Count)&&i.Debug.Callback&&(this.Debug={Count:i.Debug.Count,Callback:i.Debug.Callback})),i&&i.Lock&&(1==i.Lock.IsLocked&&(this.IsLocked=!0),i.Lock.Callback&&(this.LockCallback=i.Lock.Callback),i.Lock.ID&&(this.LockID=i.Lock.ID),i.Lock.BG&&(this.LockBG=i.Lock.BG),i.Lock.TextColor&&(this.LockTextColor=i.Lock.TextColor),i.Lock.Text&&(this.LockText=i.Lock.Text),i.Lock.Font&&(this.LockFont=i.Lock.Font),i.Lock.Count&&(this.LockCount=i.Lock.Count),i.Lock.MinWidth&&(this.LockMinWidth=i.Lock.MinWidth*A())),a&&(this.Arguments=a),this.CopyTo=function(t){t.FloatPrecision=this.FloatPrecision,t.StringFormat=this.StringFormat,t.KLineType=this.KLineType,t.InstructionType=this.InstructionType,t.Condition=this.Condition,t.TitleFont=this.TitleFont,t.IsShortTitle=this.IsShortTitle,t.OutName=this.OutName,t.Arguments=this.Arguments,t.Script=this.Script,t.Name=this.Name,t.ID=this.ID},this.SetLock=function(t){1==t.IsLocked?(this.IsLocked=!0,t.Callback&&(this.LockCallback=t.Callback),t.ID&&(this.LockID=t.ID),t.BG&&(this.LockBG=t.BG),t.TextColor&&(this.LockTextColor=t.TextColor),t.Text&&(this.LockText=t.Text),t.Font&&(this.LockFont=t.Font),t.Count&&(this.LockCount=t.Count),t.MinWidth&&(this.LockMinWidth=t.MinWidth*A())):(this.IsLocked=!1,this.LockCallback=null,this.LockID=null,this.LockBG=null,this.LockTextColor=null,this.LockText=null,this.LockFont=null,this.LockCount=20)},this.ExecuteScript=function(t,e,a){this.OutVar=[];var i={HQChart:t,WindowIndex:e,HistoryData:a,Self:this},r=ri.KLINE_ID;"MinuteChartContainer"===t.ClassName||"MinuteChartHScreenContainer"===t.ClassName?r=t.DayCount>1?ri.MULTIDAY_MINUTE_ID:ri.MINUTE_ID:"HistoryMinuteChartContainer"===t.ClassName&&(r=ri.HISTORY_MINUTE_ID);var n={HQDataType:r,Symbol:t.Symbol,Name:t.Name,Data:a,SourceData:t.SourceData,Callback:this.RecvResultData,CallbackParam:i,Async:!0,MaxRequestDataCount:t.MaxRequestDataCount,MaxRequestMinuteDayCount:t.MaxRequestMinuteDayCount,Arguments:this.Arguments,Condition:this.Condition,IsBeforeData:t.IsBeforeData,IsApiPeriod:t.IsApiPeriod,DrawInfo:null,Self:this};if(this.Debug&&Te.IsPlusNumber(this.Debug.Count)&&this.Debug.Callback&&(--this.Debug.Count,n.Debug=1,n.DebugFilter=this.Debug.Callback),t&&t.ChartPaint[0]){var o=t.ChartPaint[0];o&&o.DrawKRange&&(n.DrawInfo={Start:o.DrawKRange.Start,End:o.DrawKRange.End})}if(r===ri.HISTORY_MINUTE_ID&&(n.TrateDate=t.TradeDate),r===ri.MULTIDAY_MINUTE_ID&&(n.DayCount=t.DayCount),t.NetworkFilter&&(n.NetworkFilter=t.NetworkFilter),!this.Condition||this.IsMeetCondition(i,n)){var s=this.Script;ii.Execute(s,n,t.ScriptErrorCallback)}else this.ShowConditionError(i,this.Condition.Message)},this.IsMeetCondition=function(t,e){if(D.Complier.Log("[ScriptIndex::IsMeetCondition] ",this.Condition),this.Condition.Period){if(!this.IsMeetPeriodCondition(t,e))return!1;if(!this.IsMeetIncludeCondition(t,e))return!1}return!0},this.IsMeetPeriodCondition=function(t,e){if(!this.Condition.Period)return!0;for(var a in this.Condition.Period){var i=this.Condition.Period[a];switch(i){case g.MINUTE_ID:if(e.HQDataType==ri.MINUTE_ID)return!0;break;case g.MULTIDAY_MINUTE_ID:if(e.HQDataType==ri.MULTIDAY_MINUTE_ID)return!0;break;case g.KLINE_DAY_ID:case g.KLINE_WEEK_ID:case g.KLINE_MONTH_ID:case g.KLINE_YEAR_ID:case g.KLINE_TWOWEEK_ID:case g.KLINE_QUARTER_ID:case g.KLINE_MINUTE_ID:case g.KLINE_5_MINUTE_ID:case g.KLINE_15_MINUTE_ID:case g.KLINE_30_MINUTE_ID:case g.KLINE_60_MINUTE_ID:if(t.HQChart.Period==i)return!0}}return!1},this.IsMeetIncludeCondition=function(t,e){if(!this.Condition.Include||this.Condition.Include.length<=0)return!0;var a=t.HQChart.Symbol;for(var i in a&&(a=a.toUpperCase()),this.Condition.Include){if(a==this.Condition.Include[i])return!0}return!1},this.ShowConditionError=function(t,e){var a=t.HQChart,i=t.WindowIndex;a.DeleteIndexPaint(i),0==i&&a.ShowKLine(!0);var r="指标不支持当前品种或周期";e&&(r=e);var n=new At;n.Canvas=a.Canvas,n.ChartBorder=a.Frame.SubFrame[i].Frame.ChartBorder,n.ChartFrame=a.Frame.SubFrame[i].Frame,n.NotSupportMessage=r,a.ChartPaint.push(n),a.UpdataDataoffset(),a.UpdateFrameMaxMin(),a.Draw()},this.RecvResultData=function(t,e){var a=e.HQChart,i=e.WindowIndex,r=e.HistoryData;if(e.Self.OutVar=t,e.Self.BindData(a,i,r),0==e.Self.IsLocked)e.HQChart.Frame.SubFrame[i].Frame.SetLock(null);else{var n={IsLocked:!0,Callback:e.Self.LockCallback,IndexName:e.Self.Name,ID:e.Self.LockID,BG:e.Self.LockBG,Text:e.Self.LockText,TextColor:e.Self.LockTextColor,Font:e.Self.LockFont,Count:e.Self.LockCount,MinWidth:e.Self.LockMinWidth};e.HQChart.Frame.SubFrame[i].Frame.SetLock(n)}if(e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw(),a.GetIndexEvent){var o=a.GetIndexEvent();if(o){var s=e.Self,h={OutVar:s.OutVar,WindowIndex:i,Name:s.Name,Arguments:s.Arguments,HistoryData:r,Stock:{Symbol:a.Symbol,Name:a.Name}};o.Callback(o,h,s)}}},this.SetChartIndexName=function(t){this.Name?t.IndexName=this.Name:this.ID&&(t.IndexName,this.ID)},this.CreateLine=function(t,e,a,i,r){if(7==r)var n=new Pt;else n=new At;if(n.Canvas=t.Canvas,n.DrawType=1,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.Identify=this.Guid,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),8==r&&(n.DrawType=2,n.BreakPoint=a.BreakPoint),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(n.LineWidth=o)}a.IsDotLine&&(n.IsDotLine=!0),0==a.IsShow&&(n.IsShow=!1);var s=e+1;n.Data.Data=a.Data,!1===a.IsShowTitle||Te.IsString(a.Name)&&0==a.Name.indexOf("NOTEXT")||(a.NoneName?t.TitlePaint[s].Data[i]=new Ye(n.Data,null,n.Color):t.TitlePaint[s].Data[i]=new Ye(n.Data,a.Name,n.Color),t.TitlePaint[s].Data[i].ChartClassName=n.ClassName),this.SetChartIndexName(n),t.ChartPaint.push(n)},this.CreateArea=function(t,e,a,i){var r=new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartArea",this.Color="rgb(255,193,37)",this.AreaColor,this.LineWidth,this.LineDash,this.AreaDirection=0,this.DrawSelectedStatus=this.DrawLinePoint,this.PtInChart=this.PtInLine,this.ExportData=this.ExportArrayData,this.GetItemData=this.GetArrayItemData,this.Draw=function(){this.IsShow&&!this.ChartFrame.IsMinSize&&(this.IsShowIndexTitleOnly()||(this.NotSupportMessage?this.DrawNotSupportmessage():this.Data&&this.Data.Data&&this.DrawArea()))},this.DrawArea=function(){var t,e=!0===this.ChartFrame.IsHScreen,a=this.IsMinuteFrame(),i=this.ChartFrame.DataWidth,r=this.ChartFrame.DistanceWidth,n=this.ChartFrame.XPointCount;if(e)var o=(t=this.ChartBorder.GetHScreenBorder()).BottomEx,s=t.TopEx+r/2+ia.FrameLeftMargin;else s=(t=this.ChartBorder.GetBorder()).LeftEx+r/2+ia.FrameLeftMargin,o=t.RightEx;var h=this.GetLockRect();h&&(o=e?h.Top:h.Left),this.Canvas.save(),this.ClipClient(e),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*A()),this.Canvas.strokeStyle=this.Color,this.AreaColor?this.Canvas.fillStyle=this.AreaColor:this.Canvas.fillStyle=We.ColorToRGBA(this.Color,.6),Te.IsNonEmptyArray(this.LineDash)&&this.Canvas.setLineDash(this.LineDas);for(var l=!0,u=null,c=null,f=0,d=this.Data.DataOffset,C=0;d<this.Data.Data.length&&C<n;++d,++C,s+=i+r){var p=this.Data.Data[d];if(Te.IsNumber(p)){if(a)var m=this.ChartFrame.GetXFromIndex(C);else{var D=s+i;if(D>o)break;m=s+(D-s)/2}var v=this.GetYFromData(p,!1);if(m>o)break;l?(this.Canvas.beginPath(),e?this.Canvas.moveTo(v,m):this.Canvas.moveTo(m,v),l=!1,u={X:m,Y:v}):(e?this.Canvas.lineTo(v,m):this.Canvas.lineTo(m,v),c={X:m,Y:v}),++f}else f>0&&this.Canvas.stroke(),u&&c&&(e?(1==this.AreaDirection?(this.Canvas.lineTo(t.RightEx,c.X),this.Canvas.lineTo(t.RightEx,u.X)):(this.Canvas.lineTo(t.LeftEx,c.X),this.Canvas.lineTo(t.LeftEx,u.X)),this.Canvas.closePath(),this.Canvas.fill()):(1==this.AreaDirection?(this.Canvas.lineTo(c.X,t.TopEx),this.Canvas.lineTo(u.X,t.TopEx)):(this.Canvas.lineTo(c.X,t.BottomEx),this.Canvas.lineTo(u.X,t.BottomEx)),this.Canvas.closePath(),this.Canvas.fill())),l=!0,f=0,u=null,c=null}f>0&&(1==f&&u&&(e?this.Canvas.lineTo(u.Y,u.X+1*A()):this.Canvas.lineTo(u.X+1*A(),u.Y)),this.Canvas.stroke(),u&&c&&(e?(1==this.AreaDirection?(this.Canvas.lineTo(t.RightEx,c.X),this.Canvas.lineTo(t.RightEx,u.X)):(this.Canvas.lineTo(t.LeftEx,c.X),this.Canvas.lineTo(t.LeftEx,u.X)),this.Canvas.closePath(),this.Canvas.fill()):(1==this.AreaDirection?(this.Canvas.lineTo(c.X,t.TopEx),this.Canvas.lineTo(u.X,t.TopEx)):(this.Canvas.lineTo(c.X,t.BottomEx),this.Canvas.lineTo(u.X,t.BottomEx)),this.Canvas.closePath(),this.Canvas.fill()))),this.Canvas.restore()}};if(r.Canvas=t.Canvas,r.DrawType=1,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Identify=this.Guid,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.DownColor?r.AreaColor=a.DownColor:a.UpColor&&(r.AreaColor=a.UpColor,r.AreaDirection=1),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));Te.IsPlusNumber(n)&&(r.LineWidth=n)}Te.IsNonEmptyArray(a.LineDash)&&(r.LineDash=a.LineDash),0==a.IsShow&&(r.IsShow=!1);var o=e+1;r.Data.Data=a.Data,!1===a.IsShowTitle||Te.IsString(a.Name)&&0==a.Name.indexOf("NOTEXT")||(a.NoneName?t.TitlePaint[o].Data[i]=new Ye(r.Data,null,r.Color):t.TitlePaint[o].Data[i]=new Ye(r.Data,a.Name,r.Color),t.TitlePaint[o].Data[i].ChartClassName=r.ClassName),this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateOverlayLine=function(t,e,a,i,r){if(7==r)var n=new Pt;if((n=new Ot).Canvas=t.Canvas,n.DrawType=1,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(n.LineWidth=o)}a.IsDotLine&&(n.IsDotLine=!0),0==a.IsShow&&(n.IsShow=!1);var s=e+1;n.Data.Data=a.Data,t.TitlePaint[s].Data[i]=new Ye(n.Data,a.Name,n.Color),t.TitlePaint[s].Data[i].ChartClassName=n.ClassName,t.ChartPaint.push(n)},this.CreateBar=function(t,e,a,i){var r=new Yt;r.Canvas=t.Canvas,a.Draw.Width>0?r.Width=a.Draw.Width:r.Width=0,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i);r.Data.Data=a.Draw.DrawData,r.BarType=a.Draw.Type,this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateText=function(t,e,a,i,r){var n=new Xt;n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.ReloadResource(),a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),!0===a.IsDrawCenter&&(n.TextAlign="center"),!0===a.IsDrawAbove&&(n.Direction=1),!0===a.IsDrawBelow&&(n.Direction=2);a.Draw.Position&&(n.Position=a.Draw.Position),a.Draw.DrawData&&(n.Data.Data=a.Draw.DrawData),n.Text=a.Draw.Text,a.Draw.Direction>0&&(n.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(n.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(n.TextAlign=a.Draw.TextAlign),a.DrawVAlign>=0&&(0==a.DrawVAlign?n.Direction=1:1==a.DrawVAlign?n.Direction=0:2==a.DrawVAlign&&(n.Direction=2)),a.DrawAlign>=0&&(0==a.DrawAlign?n.TextAlign="left":1==a.DrawAlign?n.TextAlign="center":2==a.DrawAlign&&(n.TextAlign="right")),a.DrawFontSize>0&&(n.FixedFontSize=a.DrawFontSize),a.Background&&(n.TextBG=a.Background),t.ChartPaint.push(n)},this.CreateDrawNumber=function(t,e,a,i){var r=new function(){this.newMethod=Wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawNumber",this.ReloadResource=function(t){this.TextSize={Max:ia.DRAWNUMBER.MaxSize,Min:ia.DRAWNUMBER.MinSize,Zoom:{Type:ia.DRAWNUMBER.Zoom.Type,Value:ia.DRAWNUMBER.Zoom.Value},FontName:ia.DRAWNUMBER.FontName,YOffset:ia.DRAWNUMBER.YOffset}}};r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.ReloadResource(),a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),!0===a.IsDrawCenter&&(r.TextAlign="center"),!0===a.IsDrawAbove&&(r.TextBaseline="bottom"),!0===a.IsDrawBelow&&(r.TextBaseline="top"),r.Data.Data=a.Draw.DrawData.Value,r.Text=a.Draw.DrawData.Text,a.Draw.Direction>0&&(r.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(r.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(r.TextAlign=a.Draw.TextAlign),"TOP"===a.Draw.FixedPosition?r.FixedPosition=1:"BOTTOM"===a.Draw.FixedPosition&&(r.FixedPosition=2),a.DrawVAlign>=0&&(0==a.DrawVAlign?r.TextBaseline="top":1==a.DrawVAlign?r.TextBaseline="middle":2==a.DrawVAlign&&(r.TextBaseline="bottom")),a.DrawAlign>=0&&(0==a.DrawAlign?r.TextAlign="left":1==a.DrawAlign?r.TextAlign="center":2==a.DrawAlign&&(r.TextAlign="right")),a.DrawFontSize>0&&(r.FixedFontSize=a.DrawFontSize),a.Background&&(r.TextBG=a.Background),a.VerticalLine&&(r.VerticalLine=a.VerticalLine);t.ChartPaint.push(r)},this.CreateDrawTextV2=function(t,e,a,i){var r=new Wt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.ReloadResource(),a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),!0===a.IsDrawCenter&&(r.TextAlign="center"),!0===a.IsDrawAbove&&(r.TextBaseline="bottom"),!0===a.IsDrawBelow&&(r.TextBaseline="top"),a.Draw.DrawData&&(r.Data.Data=a.Draw.DrawData),r.Text=a.Draw.Text,a.Draw.Direction>0&&(r.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(r.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(r.TextAlign=a.Draw.TextAlign),"TOP"===a.Draw.FixedPosition?r.FixedPosition=1:"BOTTOM"===a.Draw.FixedPosition&&(r.FixedPosition=2),a.DrawVAlign>=0&&(0==a.DrawVAlign?r.TextBaseline="top":1==a.DrawVAlign?r.TextBaseline="middle":2==a.DrawVAlign&&(r.TextBaseline="bottom")),a.DrawAlign>=0&&(0==a.DrawAlign?r.TextAlign="left":1==a.DrawAlign?r.TextAlign="center":2==a.DrawAlign&&(r.TextAlign="right")),a.DrawFontSize>0&&(r.FixedFontSize=a.DrawFontSize),a.Background&&(r.TextBG=a.Background),a.VerticalLine&&(r.VerticalLine=a.VerticalLine),Te.IsNumber(a.YOffset)&&(r.ShowOffset.Y=a.YOffset),Te.IsNumber(a.XOffset)&&(r.ShowOffset.X=a.XOffset);t.ChartPaint.push(r)},this.CreateMACD=function(t,e,a,i){var r=new Jt;if(r.Canvas=t.Canvas,r.Identify=this.Guid,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var o=e+1;r.Data.Data=a.Data;var s=this.GetDefaultColor(i);a.Color&&(s=this.GetColor(a.Color)),a.UpColor&&(r.UpColor=a.UpColor),a.DownColor&&(r.DownColor=a.DownColor),t.TitlePaint[o].Data[i]=new Ye(r.Data,a.Name,s),this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreatePointDot=function(t,e,a,i,r){var n=new Rt;if(n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),a.Radius&&(n.Radius=a.Radius),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(n.Radius=o)}Te.IsBool(a.UpDownDot)&&(n.EnableUpDownColor=a.UpDownDot,n.HistoryData=r);var s=e+1;n.Data.Data=a.Data,t.TitlePaint[s].Data[i]=new Ye(n.Data,a.Name,n.Color),t.ChartPaint.push(n)},this.CreateStick=function(t,e,a,i){var r=new _t;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var o=e+1;r.Data.Data=a.Data,t.TitlePaint[o].Data[i]=new Ye(r.Data,a.Name,r.Color),this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateLineStick=function(t,e,a,i){var r=new Bt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var o=e+1;r.Data.Data=a.Data,t.TitlePaint[o].Data[i]=new Ye(r.Data,a.Name,r.Color),t.ChartPaint.push(r)},this.CreateStraightLine=function(t,e,a,i){var r=new At;if(r.DrawType=1,r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var o=e+1;r.Data.Data=a.Draw.DrawData,"DRAWLINE"==a.Name&&(t.TitlePaint[o].Data[i]=new Ye(r.Data,null,r.Color)),t.ChartPaint.push(r)},this.CreateVolStick=function(t,e,a,i,r){var n=new kt;n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.KLineDrawType=t.KLineDrawType,n.Identify=this.Guid,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),a.UpColor&&(n.UpColor=a.UpColor),a.DownColor&&(n.DownColor=a.DownColor);var o=e+1;n.Data.Data=a.Data,n.HistoryData=r,t.TitlePaint[o].Data[i]=new Ye(n.Data,a.Name,n.Color),this.SetChartIndexName(n),t.ChartPaint.push(n)},this.CreateBand=function(t,e,a,i){var r=new qt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.FirstColor=a.Draw.Color[0],r.SecondColor=a.Draw.Color[1],r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateFillRGN=function(t,e,a,i){var r=new Zt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),t.ChartPaint.push(r)},this.CreateFillRGN2=function(t,e,a,i){var r=new Qt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateFillBGRGN=function(t,e,a,i){var r=new function(){this.newMethod=Qt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.IsHScreen=!1,this.ClassName="ChartFillBGRGN",this.DrawVerticalRGN=function(){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+ia.FrameLeftMargin,r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetBottomEx(),o=[],s=this.Data.DataOffset,h=0;s<this.Data.Data.length&&h<a;++s,++h,i+=t+e){var l=this.Data.Data[s];o[s]=null,l&&l.Color&&(x=this.ChartFrame.GetXFromIndex(h),this.IsHScreen?o[s]={Line:{X:r,Y:x},Line2:{X:n,Y:x},Color:l.Color}:o[s]={Line:{X:x,Y:r},Line2:{X:x,Y:n},Color:l.Color})}this.DrawRGB(o)},this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data)if("FILLVERTICALRGN"!=this.Name){var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+ia.FrameLeftMargin,r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetBottomEx(),o=0,s=0,h=r;"FILLBOTTOMRGN"==this.Name&&(h=n);for(var l=[],u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<a;++u,++c,i+=t+e){var f=this.Data.Data[u];l[u]=null,null!=f&&null!=f.Value&&f.Color&&(o=this.ChartFrame.GetXFromIndex(c),s=this.ChartFrame.GetYFromData(f.Value),this.IsHScreen?l[u]={Line:{X:s,Y:o},Line2:{X:h,Y:o},Color:f.Color}:l[u]={Line:{X:o,Y:s},Line2:{X:o,Y:h},Color:f.Color})}this.DrawRGB(l)}else this.DrawVerticalRGN()},this.DrawRGB=function(t){var e=this.ChartFrame.DataWidth,a=(this.ChartFrame.DistanceWidth+e)/2,i=!0,r=0,n=[],o=null;for(var s in t){var h=t[s];if(!h||o&&h.Color!=o){if(r>0){for(var l=n.length-1;l>=0;--l){var u=n[l];this.Canvas.lineTo(u.Line2.X+a,u.Line2.Y),this.Canvas.lineTo(u.Line2.X-a,u.Line2.Y)}this.Canvas.closePath(),this.Canvas.fillStyle=o,this.Canvas.fill()}i=!0,r=0,n=[],o=null}h&&(i?(this.Canvas.beginPath(),this.Canvas.moveTo(h.Line.X-a,h.Line.Y),this.Canvas.lineTo(h.Line.X+a,h.Line.Y),i=!1,o=h.Color):(this.Canvas.lineTo(h.Line.X-a,h.Line.Y),this.Canvas.lineTo(h.Line.X+a,h.Line.Y)),n.push(h),++r)}if(r>0){for(l=n.length-1;l>=0;--l)u=n[l],this.Canvas.lineTo(u.Line2.X+a,u.Line2.Y),this.Canvas.lineTo(u.Line2.X-a,u.Line2.Y);this.Canvas.closePath(),this.Canvas.fillStyle=o,this.Canvas.fill()}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i)if((r=this.Data.Data[a])&&null!=r.Value){var r=r.Value;null==e.Max?e.Max=r:e.Max<r&&(e.Max=r),null==e.Min?e.Min=r:e.Min>r&&(e.Min=r)}return e}};r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateFLOATRGN=function(t,e,a,i){var r=new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!1,this.ClassName="ChartFLOATRGN",this.Color="rgb(56,67,99)",this.IsHScreen=!1,this.Draw=function(){if(!this.ChartFrame.IsMinSize)if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+ia.FrameLeftMargin,r=0,n=0,o=0,s=[],h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<a;++h,++l,i+=t+e){var u=this.Data.Data[h];s[h]=null,u&&Te.IsNumber(u.Value)&&Te.IsNumber(u.Value2)&&u.Color&&(r=this.ChartFrame.GetXFromIndex(l),n=this.ChartFrame.GetYFromData(u.Value),this.IsHScreen?s[h]={Line:{X:n,Y:r},Line2:{X:n+u.Value2*A(),Y:r},Color:u.Color}:s[h]={Line:{X:r,Y:n},Line2:{X:r,Y:n-u.Value2*A()},Color:u.Color})}var c=null;for(var h in s){if(u=s[h],c&&u)if(this.IsHScreen){var f=u.Line.Y-c.Line.Y;r=c.Line.Y+f/2,n=c.Line.X+(u.Line.X-c.Line.X)/2,o=c.Line2.X+(u.Line2.X-c.Line2.X)/2,c.RightLine={X:n,Y:r},c.RightLine2={X:o,Y:r},u.LeftLine={X:n,Y:r},u.LeftLine2={X:o,Y:r}}else f=u.Line.X-c.Line.X,r=c.Line.X+f/2,n=c.Line.Y+(u.Line.Y-c.Line.Y)/2,o=c.Line2.Y+(u.Line2.Y-c.Line2.Y)/2,c.RightLine={X:r,Y:n},c.RightLine2={X:r,Y:o},u.LeftLine={X:r,Y:n},u.LeftLine2={X:r,Y:o};c=u}this.DrawRGB(s)}},this.DrawRGB=function(t){var e=!0,a=0,i=[],r=null;if(this.IsHScreen)var n=this.ChartBorder.GetLeftEx(),o=this.ChartBorder.GetRightEx(),s=this.ChartBorder.GetTop(),h=this.ChartBorder.GetBottom();else n=this.ChartBorder.GetLeft(),o=this.ChartBorder.GetRight(),s=this.ChartBorder.GetTopEx(),h=this.ChartBorder.GetBottomEx();for(var l in this.Canvas.save(),this.Canvas.beginPath(),this.Canvas.rect(n,s,o-n,h-s),this.Canvas.clip(),t){var u=t[l];if(!u||r&&u.Color!=r){if(a>0){var c=i[i.length-1],f=i[0];c.RightLine&&(this.Canvas.lineTo(c.RightLine.X,c.RightLine.Y),this.Canvas.lineTo(c.RightLine2.X,c.RightLine2.Y));for(var d=i.length-1;d>=0;--d){var C=i[d];this.Canvas.lineTo(C.Line2.X,C.Line2.Y)}f.LeftLine2&&this.Canvas.lineTo(f.LeftLine2.X,f.LeftLine2.Y),this.Canvas.closePath(),this.Canvas.fillStyle=r,this.Canvas.fill()}e=!0,a=0,i=[],r=null}u&&(e?(this.Canvas.beginPath(),u.LeftLine?(this.Canvas.moveTo(u.LeftLine.X,u.LeftLine.Y),this.Canvas.lineTo(u.Line.X,u.Line.Y)):this.Canvas.moveTo(u.Line.X,u.Line.Y),e=!1,r=u.Color):this.Canvas.lineTo(u.Line.X,u.Line.Y),i.push(u),++a)}if(a>0){for(c=i[i.length-1],f=i[0],c.RightLine&&(this.Canvas.lineTo(c.RightLine.X,c.RightLine.Y),this.Canvas.lineTo(c.RightLine2.X,c.RightLine2.Y)),d=i.length-1;d>=0;--d)C=i[d],this.Canvas.lineTo(C.Line2.X,C.Line2.Y);f.LeftLine2&&this.Canvas.lineTo(f.LeftLine2.X,f.LeftLine2.Y),this.Canvas.closePath(),this.Canvas.fillStyle=r,this.Canvas.fill()}this.Canvas.restore()},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r&&Te.IsNumber(r.Value)){var n=r.Value;null==e.Max?e.Max=n:e.Max<n&&(e.Max=n),null==e.Min?e.Min=n:e.Min>n&&(e.Min=n)}}return e}};r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateKLine=function(t,e,a,i){var r=new Et;r.Canvas=t.Canvas,r.Name=a.Name,r.Identify=this.Guid,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,r.IsShowMaxMinPrice=!1,r.IsShowKTooltip=!1,a.Color&&(r.UnchagneColor=r.DownColor=r.UpColor=this.GetColor(a.Color)),t.ChartPaint.push(r)},this.CreateDrawColorKLine=function(t,e,a,i){var r=new bt;r.Canvas=t.Canvas,r.Name=a.Name,r.DrawName="DRAWCOLORKLINE",r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,Te.IsBool(a.Draw.IsEmptyBar)&&(r.IsEmptyBar=a.Draw.IsEmptyBar),a.Draw.Color&&(r.Color=a.Draw.Color),t.ChartPaint.push(r)},this.CreatePolyLine=function(t,e,a,i){var r=new At;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.IsDotLine&&(r.IsDotLine=!0),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var o=e+1;r.Data.Data=a.Draw.DrawData,t.TitlePaint[o].Data[i]=new Ye(r.Data," ",r.Color),t.ChartPaint.push(r)},this.CreateChartSlopeLine=function(t,e,a,i){var r=new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartSlopeLine",this.Color="rgb(255,193,37)",this.IsDotLine=!1,this.LineWidth,this.Option,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.IsDotLine&&this.Canvas.setLineDash(ia.DOTLINE.LineDash);var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetTopEx(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetBottom(),r=this.ChartBorder.GetRight(),n=this.ChartFrame.XPointCount;this.Canvas.beginPath(),this.Canvas.rect(t,e,a-t,i-e),this.Canvas.clip();for(var o=this.Data.DataOffset,s=0;o<this.Data.Data.length&&s<n;++o,++s){var h=this.Data.Data[o];if(Te.IsNumber(h)){var l=this.Option[o];if(l){var u=this.ChartFrame.GetXFromIndex(s),c=this.ChartFrame.GetYFromData(h),f=l.Length*ia.DRAWSL.PixelWidth;if(u>r)break;var d=Math.sqrt(f*f/(1+l.Slope*l.Slope)),C=d*l.Slope;this.Canvas.beginPath(),2==l.Direct?(this.Canvas.moveTo(u-d,c+C),this.Canvas.lineTo(u+d,c-C)):1==l.Direct?(this.Canvas.moveTo(u,c),this.Canvas.lineTo(u-d,c+C)):(this.Canvas.moveTo(u,c),this.Canvas.lineTo(u+d,c-C)),this.Canvas.stroke()}}}this.Canvas.restore()}}};if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.IsDotLine&&(r.IsDotLine=!0),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var o=e+1;r.Data.Data=a.Draw.DrawData.Data,r.Option=a.Draw.DrawData.Option,t.TitlePaint[o].Data[i]=new Ye(r.Data,null,r.Color),t.ChartPaint.push(r)},this.CreateChartVericaltLine=function(t,e,a,i){var r=new Gt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}this.SetChartLineDash(r,a.Draw.DrawData),r.Data.Data=a.Draw.DrawData.Data,t.ChartPaint.push(r)},this.SetChartLineDash=function(t,e){if(Te.IsNumber(e.LineType)){var a=e.LineType,i=A();switch(a){case 1:t.LineType=[10*i,10*i];break;case 2:t.LineType=[0,10*i],t.LineCap="square";break;case 3:t.LineType=[10*i,3*i,3*i,3*i];break;case 4:t.LineType=[10*i,3*i,3*i,3*i,3*i,3*i]}}else if(Te.IsString(e.LineType)){for(var r=e.LineType.split(","),n=[],o=0;o<r.length;++o)n.push(parseInt(r[o]));t.LineType=n}},this.CreateChartHorizontalLine=function(t,e,a,i){var r=new Vt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}this.SetChartLineDash(r,a.Draw.DrawData),r.ExtendType=a.Draw.DrawData.Extend,r.Data.Data=a.Draw.DrawData.Data,t.ChartPaint.push(r)},this.CreateBackgroud=function(t,e,a,i){var r=new te;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var n=a.Draw.DrawData;r.Color=n.Color,r.ColorAngle=n.Angle,n.Data&&(r.Data.Data=n.Data)}t.ChartPaint.push(r)},this.CreateBackgroundDiv=function(t,e,a,i){var r=new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartBackgroundDiv",this.AryColor,this.ColorType=0,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&Te.IsNonEmptyArray(this.AryColor)&&this.Data&&this.Data.Data){var t,e,a,i,r,n=!0===this.ChartFrame.IsHScreen,o=this.ChartFrame.DataWidth,s=this.ChartFrame.DistanceWidth,h=this.ChartFrame.XPointCount;n?(e=(t=this.ChartBorder.GetHScreenBorder()).TopEx+s/2+ia.FrameLeftMargin,a=t.BottomEx,i=t.LeftEx,r=t.RightEx):(e=(t=this.ChartBorder.GetBorder()).LeftEx+s/2+ia.FrameLeftMargin,a=t.RightEx,i=t.TopEx,r=t.BottomEx);for(var l=null,u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<h;++u,++c,e+=o+s){var f=this.Data.Data[u],d=e,C=e+o;if(C>a)break;if(f){var p=i,m=r;if(Te.IsNonEmptyArray(f.AryValue)){var D=this.ChartFrame.GetYFromData(f.AryValue[0]),v=this.ChartFrame.GetYFromData(f.AryValue[1]);p=Math.min(D,v),m=Math.max(D,v)}n?l?(l.Bottom=C,l.Left>p&&(l.Left=p),l.Right<m&&(l.Right=m)):l={Left:p,Right:m,Top:d,Bottom:C}:l?(l.Right=C,l.Top>p&&(l.Top=p),l.Bottom<m&&(l.Bottom=m)):l={Left:d,Right:C,Top:p,Bottom:m}}else l&&this.DrawDiv(l,n),l=null}}},this.DrawDiv=function(t,e){if(2==this.ColorType)this.Canvas.strokeStyle=this.AryColor[0],this.Canvas.strokeRect(_(t.Left),_(t.Top),k(t.Right-t.Left),k(t.Bottom-t.Top));else if(3==this.ColorType)this.Canvas.fillStyle=this.AryColor[1],this.Canvas.fillRect(k(t.Left),k(t.Top),k(t.Right-t.Left),k(t.Bottom-t.Top)),this.Canvas.strokeStyle=this.AryColor[0],this.Canvas.strokeRect(_(t.Left),_(t.Top),k(t.Right-t.Left),k(t.Bottom-t.Top));else{if(0!=this.ColorType&&1!=this.ColorType)return;var a=null;(a=e?0==this.ColorType?this.Canvas.createLinearGradient(t.Left,t.Top,t.Right,t.Top):this.Canvas.createLinearGradient(t.Left,t.Top,t.Left,t.Bottom):0==this.ColorType?this.Canvas.createLinearGradient(t.Left,t.Top,t.Left,t.Bottom):this.Canvas.createLinearGradient(t.Left,t.Top,t.Right,t.Top)).addColorStop(.5,this.AryColor[0]),a.addColorStop(1,this.AryColor[1]),this.Canvas.fillStyle=a,this.Canvas.fillRect(k(t.Left),k(t.Top),k(t.Right-t.Left),k(t.Bottom-t.Top))}}};if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var n=a.Draw.DrawData;r.AryColor=n.AryColor,r.ColorType=n.ColorType,n.Data&&(r.Data.Data=n.Data)}t.ChartPaint.push(r)},this.CreateLineMultiData=function(t,e,a,i){var r=new Ht;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var n=a.Draw.DrawData;r.Color=n.Color,n.PointColor&&(r.PointColor=n.PointColor),Te.IsPlusNumber(n.PointRadius)&&(r.PointRadius=n.PointRadius),Te.IsPlusNumber(n.LineWidth)&&(r.LineWidth=n.LineWidth),n.Data&&(r.Data.Data=n.Data)}var o=e+1,s=new Ye(r.Data,a.Name,r.Color);s.DataType="MULTI_POINT_LINE",t.TitlePaint[o].Data[i]=s,t.ChartPaint.push(r)},this.CreateTextLine=function(t,e,a,i){var r=new ee;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var n=a.Draw.DrawData;r.Text=n.Text,r.Line=n.Line,r.Price=n.Price}t.ChartPaint.push(r)},this.CreateNumberText=function(t,e,a,i){var r=new Xt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.ReloadResource(),r.TextAlign="center",a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.IsDrawAbove?r.Direction=1:r.Direction=2,a.Draw.Position&&(r.Position=a.Draw.Position);r.Data.Data=a.Draw.DrawData.Value,r.Text=a.Draw.DrawData.Text,t.ChartPaint.push(r)},this.CreateDrawText=function(t,e,a,i){var r=new Xt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.ReloadResource(),a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.IsDrawAbove?r.Direction=1:r.Direction=0,a.DrawFontSize>0&&(r.TextFont=a.DrawFontSize*A()+"px 微软雅黑");r.DrawData=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateIcon=function(t,e,a,i){var r=new Xt;r.Canvas=t.Canvas,r.TextAlign="center",r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Direction=2,a.IsDrawAbove&&(r.Direction=1),a.DrawVAlign>=0&&(0==a.DrawVAlign?r.Direction=1:1==a.DrawVAlign?r.Direction=0:2==a.DrawVAlign&&(r.Direction=2)),a.DrawAlign>=0&&(0==a.DrawAlign?r.TextAlign="left":1==a.DrawAlign?r.TextAlign="center":2==a.DrawAlign&&(r.TextAlign="right"));r.Data.Data=a.Draw.DrawData;var n=a.Draw.Icon;1==n.IconFont?(r.IconFont={Family:n.Family,Text:n.Symbol,Color:n.Color},a.Color&&(r.IconFont.Color=this.GetColor(a.Color))):(r.Text=n.Symbol,a.Color?r.Color=this.GetColor(a.Color):n.Color?r.Color=n.Color:r.Color="rgb(0,0,0)"),a.DrawFontSize>0&&(r.FixedFontSize=a.DrawFontSize),Te.IsNumber(a.XOffset)&&(r.ShowOffset.X=a.XOffset),Te.IsNumber(a.YOffset)&&(r.ShowOffset.Y=a.YOffset),t.ChartPaint.push(r)},this.CreateTipIcon=function(t,e,a,i){var r=new he;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,t.ChartPaint[0].IsMinuteFrame()?r.Data=t.SourceData:r.Data=t.ChartPaint[0].Data,r.Family=a.Draw.Icon.Family,r.TextFont=ia.TIPICON.TextFont;var n=ia.TIPICON.Size,o=ia.TIPICON.Color,s=0,h=2;if(Te.IsNumber(a.YOffset)&&(s=a.YOffset),a.Color&&(o=this.GetColor(a.Color)),a.DrawFontSize>0&&(n=a.DrawFontSize),a.DrawVAlign>=0&&(h=a.DrawVAlign),a.Draw&&Te.IsNonEmptyArray(a.Draw.DrawData)&&a.Draw.Icon){var l=a.Draw.DrawData,u=[],c=Array.isArray(a.Draw.Text),f=null;!c&&a.Draw.Text&&(f={Text:a.Draw.Text});for(var d=0;d<l.length;++d){var C=l[d];if(Te.IsNumber(C)){var p={Index:d,Value:C,SVG:{Symbol:a.Draw.Icon.Symbol,Size:n,Color:o,YOffset:s,VAlign:h}};if(c){var m=a.Draw.Text[d];m&&(p.Tooltip={Text:m})}else p.Tooltip=f;u.push(p)}}r.Texts=u}t.ChartPaint.push(r)},this.CreateChannel=function(t,e,a,i){var r=new $t;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw.AreaColor?r.AreaColor=a.Draw.AreaColor:a.Color?r.AreaColor=this.GetColor(a.Color):r.AreaColor=this.GetDefaultColor(i),a.Draw.Border.Color?r.LineColor=a.Draw.Border.Color:r.LineColor=null,a.Draw.Border.Dotted&&(r.LineDotted=a.Draw.Border.Dotted),a.Draw.Border.Width>0&&(r.LineWidth=a.Draw.Border.Width),r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreatePartLine=function(t,e,a,i){var r=new Nt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));Te.IsPlusNumber(n)&&(r.LineWidth=n)}r.Data.Data=a.Draw.DrawData,this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateMultiLine=function(t,e,a,i){var r=new ie;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.Lines=a.Draw.DrawData,a.Draw.Name&&(r.Name=a.Draw.Name),a.Draw.LineDash&&(r.LineDash=a.Draw.LineDash),Te.IsNumber(a.Draw.LineWidth)&&(r.LineWidth=a.Draw.LineWidth),a.Draw.Arrow){var n=a.Draw.Arrow;1==n.Start&&(r.Arrow.Start=!0),1==n.End&&(r.Arrow.End=!0),Te.IsNumber(n.Angle)&&(r.ArrawAngle=n.Angle),Te.IsNumber(n.Length)&&(r.ArrawLength=n.Length),Te.IsNumber(n.LineWidth)&&(r.ArrawLineWidth=n.LineWidth)}t.ChartPaint.push(r);var o=e+1,s=new Ye(r.Data,r.Name,null);s.DataType="ChartMultiLine",s.Lines=r.Lines,t.TitlePaint[o].Data[i]=s},this.CreateMultiPoint=function(t,e,a,i){var r=new re;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.PointGroup=a.Draw.DrawData,a.Draw.Name&&(r.Name=a.Draw.Name),t.ChartPaint.push(r);var n=e+1,o=new Ye(r.Data,r.Name,null);o.DataType="ChartMultiPoint",o.PointGroup=r.PointGroup,t.TitlePaint[n].Data[i]=o},this.CreateMultiBar=function(t,e,a,i){var r=new ae;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.Bars=a.Draw.DrawData;var n=e+1,o=new Ye({KData:r.Data,BarData:r.Bars},a.Name,null);o.IsShow=!1,o.DataType="MULTI_BAR",t.TitlePaint[n].Data[i]=o,t.ChartPaint.push(r)},this.CreateMultiText=function(t,e,a,i){var r=new ne;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.Texts=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateMultiSVGIcon=function(t,e,a,i){var r=new oe;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.Family=a.Draw.DrawData.Family,r.Icon=a.Draw.DrawData.Icon,t.ChartPaint.push(r)},this.CreateChartDrawSVG=function(t,e,a,i){var r=new he;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,t.ChartPaint[0].IsMinuteFrame()?r.Data=t.SourceData:r.Data=t.ChartPaint[0].Data,Te.IsBool(a.Draw.DrawData.EnableTooltip)&&(r.EnableTooltip=a.Draw.DrawData.EnableTooltip),Te.IsBool(a.Draw.DrawData.IsDrawFirst)&&(r.IsDrawFirst=a.Draw.DrawData.IsDrawFirst),r.Family=a.Draw.DrawData.Family,r.TextFont=a.Draw.DrawData.TextFont,r.Texts=a.Draw.DrawData.Data,t.ChartPaint.push(r)},this.CreateMulitHtmlDom=function(t,e,a,i){var r=new se;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.HQChart=t,r.Data=t.ChartPaint[0].Data,r.Texts=a.Draw.DrawData,r.DrawCallback=a.Draw.Callback,t.ChartPaint.push(r)},this.CreateStackedBar=function(t,e,a,i){var r=new le;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.HQChart=t,r.Identify=this.Guid,r.Data.Data=a.Draw.DrawData,Te.IsNonEmptyArray(a.Draw.BarColor)&&(r.BarColor=a.Draw.BarColor),Te.IsNonEmptyArray(a.Draw.BarName)&&(r.BarName=a.Draw.BarName),Te.IsNumber(a.Draw.LineWidth)&&(r.LineWidth=a.Draw.LineWidth),Te.IsNumber(a.Draw.BarType)&&(r.BarType=a.Draw.BarType),t.ChartPaint.push(r);var n=e+1,o=new Ye(r.Data,r.BarName,r.BarColor);o.DataType="ChartStackedBar",t.TitlePaint[n].Data[i]=o},this.CreateKLineTable=function(t,e,a,i){var r=new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartKlineTable",this.Data,this.RowName,this.IsShowRowName=!1,this.BGColor,this.RowCount=5,this.RowHeight=10,this.TextFontConfig=G(ia.ChartKLineTable.TextFont),this.ItemMergin=G(ia.ChartKLineTable.ItemMergin),this.TextFont,this.TextColor="rgb(0,0,0)",this.NameColor="rgb(0,0,0)",this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data&&!(!0===this.ChartFrame.IsHScreen||this.RowCount<=0)){var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartFrame.GetBorder(),r=i.Bottom-i.TopTitle;this.RowHeight=r/this.RowCount;var n=i.LeftEx+ia.FrameLeftMargin,o=i.RightEx,s=i.TopTitle,h=i.Bottom;if(this.BGColor){this.Canvas.fillStyle=this.BGColor;var l=i.LeftEx,u=i.RightEx-i.LeftEx;r=h-s,this.Canvas.fillRect(l,s,u,r)}var c=this.RowHeight,f=t+e;c-this.ItemMergin.Top-this.ItemMergin.Bottom>0&&(c=c-this.ItemMergin.Left-this.ItemMergin.Right),f-this.ItemMergin.Left-this.ItemMergin.Right>0&&(f=f-this.ItemMergin.Left-this.ItemMergin.Right);var d=this.GetDynamicTextFont(c,f);this.TextFont=d,this.Canvas.font=this.TextFont;for(var C=this.Data.DataOffset,p=0;C<this.Data.Data.length&&p<a;++C,++p,n+=t+e){var m=this.Data.Data[C];if(m){l=n;var D=n+t+e;if(D>o)break;if(l+(D-l)/2>o)break;0==p&&this.IsShowRowName?this.DrawRowName(s,h,l,D):this.DrawRow(m,s,h,l,D)}}}},this.DrawRowName=function(t,e,a,i){if(Te.IsNonEmptyArray(this.RowName))for(var r=a,n=t,o=i-a,s=0;s<this.RowName.length;++s){var h=this.RowName[s],l={Left:r,Top:n,Right:i,Height:this.RowHeight,Width:o};l.Bottom=l.Top+this.RowHeight,h.Name&&l.Width>10&&(this.Canvas.fillStyle=h.Color?h.Color:this.TextColor,this.Canvas.textBaseline="middle","right"==h.TextAlign?(this.Canvas.textAlign="right",this.Canvas.fillText(h.Name,l.Right-2,l.Top+this.RowHeight/2,o-4)):"center"==h.TextAlign?(this.Canvas.textAlign="center",this.Canvas.fillText(h.Name,l.Left+l.Width/2,l.Top+this.RowHeight/2,o-4)):(this.Canvas.textAlign="left",this.Canvas.fillText(h.Name,l.Left+2,l.Top+this.RowHeight/2,o-4))),n+=this.RowHeight}},this.DrawRow=function(t,e,a,i,r){for(var n=i,o=e,s=r-i,h=0;h<t.length;++h){var l=t[h],u={Left:n,Top:o,Right:r,Height:this.RowHeight,Width:s};u.Bottom=u.Top+this.RowHeight,l.BGColor&&(this.Canvas.fillStyle=l.BGColor,this.Canvas.fillRect(u.Left,u.Top,u.Width,u.Height)),l.Color&&u.Width>10&&(this.Canvas.fillStyle=l.Color,this.Canvas.textBaseline="middle","right"==l.TextAlign?(this.Canvas.textAlign="right",this.Canvas.fillText(l.Text,u.Right-2,u.Top+this.RowHeight/2,s-4)):"center"==l.TextAlign?(this.Canvas.textAlign="center",this.Canvas.fillText(l.Text,u.Left+u.Width/2,u.Top+this.RowHeight/2,s-4)):(this.Canvas.textAlign="left",this.Canvas.fillText(l.Text,u.Left+2,u.Top+this.RowHeight/2,s-4))),o+=this.RowHeight}},this.GetDynamicTextFont=function(t,e,a){var i=parseInt(t)-2;return t<5&&(i=parseInt(t)),i>this.TextFontConfig.FontMaxSize?i=this.TextFontConfig.FontMaxSize:i<=0&&(i=1),this.FormatFontString(i,this.TextFontConfig.Family,a)},this.FormatFontString=function(t,e,a){var i;return a?a.Weight&&(i=a.Weight+" "+t+"px "+e):i=t+"px "+e,i},this.GetMaxMin=function(){return{Min:0,Max:this.RowCount}}};r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.HQChart=t,r.Identify=this.Guid,r.Data.Data=a.Draw.DrawData,Te.IsNumber(a.Draw.RowCount)&&(r.RowCount=a.Draw.RowCount),Te.IsBool(a.Draw.IsShowRowName)&&(r.IsShowRowName=a.Draw.IsShowRowName),Te.IsNonEmptyArray(a.Draw.RowName)&&(r.RowName=a.Draw.RowName),a.Draw.BGColor&&(r.BGColor=a.Draw.BGColor),t.ChartPaint.push(r);var n=e+1,o=new Ye(r.Data,r.BarName,r.BarColor);o.DataType="ChartKLineTable",t.TitlePaint[n].Data[i]=o},this.CreateScatterPlot=function(t,e,a,i){var r=new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartScatterPlot",this.Color="rgb(255,193,37)",this.Radius=3,this.TooltipData=[],this.Draw=function(){this.TooltipData=[],this.IsShow&&!this.ChartFrame.IsMinSize&&(this.IsShowIndexTitleOnly()||(this.NotSupportMessage?this.DrawNotSupportmessage():this.Data&&this.Data.Data&&this.DrawScatterPlot()))},this.DrawScatterPlot=function(){var t,e=!0===this.ChartFrame.IsHScreen,a=this.IsMinuteFrame(),i=this.ChartFrame.DataWidth,r=this.ChartFrame.DistanceWidth,n=this.ChartFrame.XPointCount;if(e)var o=(t=this.ChartBorder.GetHScreenBorder()).BottomEx,s=t.TopEx+r/2+ia.FrameLeftMargin;else s=(t=this.ChartBorder.GetBorder()).LeftEx+r/2+ia.FrameLeftMargin,o=t.RightEx;var h=this.GetLockRect();h&&(o=e?h.Top:h.Left),this.Canvas.save(),this.ClipClient(e);for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<n;++l,++u,s+=i+r){var c=this.Data.Data[l];if(c){if(a)var f=this.ChartFrame.GetXFromIndex(u);else{var d=s+i;if(d>o)break;f=s+(d-s)/2}if(f>o)break;if(Array.isArray(c))for(u=0;u<c.length;++u)this.DrawItem(c[u],f);else this.DrawItem(c,f)}}this.Canvas.restore()},this.DrawItem=function(t,e){if(t&&Te.IsNumber(t.Value)){var a=this.GetYFromData(t.Value,!1),i=this.Radius;if(t.Radius&&(i=t.Radius),Te.IsNumber(i)){this.Canvas.beginPath(),this.Canvas.arc(e,a,i,0,2*Math.PI);var r=this.Color;t.Color&&(r=t.Color),r&&(this.Canvas.fillStyle=r,this.Canvas.fill()),t.ColorBorder&&(this.Canvas.strokeStyle=t.ColorBorder,this.Canvas.stroke());var n={X:e,Y:a,Radius:i,Data:t};this.TooltipData.push(n)}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset;this.ChartFrame.GlobalOption&&this.ChartFrame.GlobalOption.IsValueFullRange&&(e=0,t=this.Data.Data.length);var a={Min:null,Max:null};if(!this.Data||!this.Data.Data)return a;for(var i=e,r=0;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];if(n)if(Array.isArray(n))for(var o=0;o<n.length;++o){var s=n[o];Te.IsNumber(s.Value)&&(null==a.Max&&(a.Max=s.Value),null==a.Min&&(a.Min=s.Value),a.Max<s.Value&&(a.Max=s.Value),a.Min>s.Value&&(a.Min=s.Value))}else{if(!Te.IsNumber(n.Value))continue;null==a.Max&&(a.Max=n.Value),null==a.Min&&(a.Min=n.Value),a.Max<n.Value&&(a.Max=n.Value),a.Min>n.Value&&(a.Min=n.Value)}}return a},this.GetTooltipData=function(t,e,a){if(!this.IsShow)return!1;if(!Te.IsNonEmptyArray(this.TooltipData))return!1;for(var i=this.TooltipData.length-1;i>=0;--i){var r=this.TooltipData[i];if(this.Canvas.beginPath(),this.Canvas.arc(r.X,r.Y,r.Radius,0,2*Math.PI),this.Canvas.isPointInPath(t,e))return D.Chart.Log("[ChartScatterPlot::GetTooltipData] point",r),a.Data=r,a.ChartPaint=this,a.Type=6,!0}}};r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.HQChart=t,r.Identify=this.Guid,r.Data.Data=a.Draw.DrawData,r.Color=a.Draw.Color,r.Radius=a.Draw.Radius,t.ChartPaint.push(r)},this.CreateColorKLine=function(t,e,a,i){var r=new bt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.KLineColor=a.Draw.DrawData.KLine,a.Color&&(r.Color=a.Color),t.ChartPaint.push(r)},this.CreateRectangle=function(t,e,a,i){var r=new function(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.ClassName="ChartRectangle",this.Color=[],this.Rect,this.BorderColor=ia.FrameBorderPen,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Color&&this.Rect&&!(this.Color.length<=0)){this.Canvas.strokeStyle=this.BorderColor;var t=!1;if(2==this.Color.length)this.Canvas.fillStyle=this.Color[0],t=!0;else{if(1!=this.Color.length)return;this.Color[0]&&(this.Canvas.fillStyle=this.Color[0],t=!0)}var e=this.ChartBorder.GetWidth(),a=this.ChartBorder.GetHeightEx(),i=this.Rect.Left/1e3*e,r=this.Rect.Top/1e3*a,n=this.Rect.Right/1e3*e,o=this.Rect.Bottom/1e3*a;i=this.ChartBorder.GetLeft()+i,r=this.ChartBorder.GetTopEx()+r,n=this.ChartBorder.GetLeft()+n,o=this.ChartBorder.GetTopEx()+o;var s=Math.abs(i-n),h=Math.abs(r-o);t&&this.Canvas.fillRect(i,r,s,h),this.Canvas.rect(_(i),_(r),k(s),k(h)),this.Canvas.stroke()}}};r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Color=[a.Draw.DrawData.Color],r.Rect=a.Draw.DrawData.Rect,a.Color&&(r.BorderColor=this.GetColor(a.Color)),t.ChartPaint.push(r)},this.CreateScriptOverlayLine=function(t,e,a,i){var r=new function(){this.newMethod=At,this.newMethod(),delete this.newMethod,this.MainData=new pt,this.Draw=function(){if(this.Data&&this.Data.Data&&this.MainData&&this.MainData.Data)switch(this.DrawType){case 0:return this.DrawLine();case 1:return this.DrawStraightLine()}},this.GetFirstVaildIndex=function(){for(var t=this.Data.DataOffset,e=0;t<this.MainData.Data.length&&t<this.Data.Data.length;++t,++e){var a=this.MainData.Data[t],i=this.Data.Data[t];if(Te.IsNumber(a)&&Te.IsNumber(i))return{Index:e,DataOffset:t,OverlayValue:i,MainValue:a}}return null},this.DrawStraightLine=function(){var t=this.GetFirstVaildIndex();if(t){var e=!0===this.ChartFrame.IsHScreen,a=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());e&&(a=this.ChartBorder.GetBottom());var i=this.ChartFrame.XPointCount,r=this.GetLockRect();r&&(a=e?r.Top:r.Left),this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*A()),this.Canvas.strokeStyle=this.Color,this.IsDotLine&&this.Canvas.setLineDash([3,5]);for(var n=!0,o=0,s=0,h=t.DataOffset,l=t.Index;h<this.Data.Data.length&&l<i;++h,++l){var u=this.Data.Data[h];if(null!=u){var c=this.ChartFrame.GetXFromIndex(l),f=u-t.OverlayValue;s=0!=t.OverlayValue?1+f/Math.abs(t.OverlayValue):1+f;var d=t.MainValue*s,C=this.GetYFromData(d);if(c>a)break;n?(this.Canvas.beginPath(),e?this.Canvas.moveTo(C,c):this.Canvas.moveTo(c,C),n=!1):e?this.Canvas.lineTo(C,c):this.Canvas.lineTo(c,C),++o}else o>0&&this.Canvas.stroke(),n=!0,o=0}o>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.GetFirstVaildIndex();if(!a)return e;for(var i=a.DataOffset,r=a.Index;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];if(Te.IsNumber(n)){var o=n-a.OverlayValue;0!=a.OverlayValue?rate=1+o/Math.abs(a.OverlayValue):rate=1+o;var s=a.MainValue*rate;null==e.Max&&(e.Max=s),null==e.Min&&(e.Min=s),e.Max<s&&(e.Max=s),e.Min>s&&(e.Min=s)}}return e}};if(r.Canvas=t.Canvas,r.DrawType=1,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}a.IsDotLine&&(r.IsDotLine=!0),0==a.IsShow&&(r.IsShow=!1);var o=e+1;r.Data.Data=a.Draw.DrawData.Data,r.MainData.Data=a.Draw.DrawData.MainData,a.Draw.DrawData.Title&&(t.TitlePaint[o].Data[i]=new Ye(r.Data,a.Draw.DrawData.Title,r.Color)),t.ChartPaint.push(r)},this.CreateSelfKLine=function(t,e,a){var i=new Et;i.Canvas=t.Canvas,i.Name="Self Kline",i.Identify=this.Guid,i.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,i.ChartFrame=t.Frame.SubFrame[e].Frame,i.Data=a,i.IsShowMaxMinPrice=!1,i.IsShowKTooltip=!1,i.DrawType=this.KLineType,t.ChartPaint.push(i)},this.BindInstructionData=function(t,e,a){if(!(null==this.OutVar||this.OutVar.length<0)){var i="";for(var r in this.Arguments){var n=this.Arguments[r];i.length>0&&(i+=","),i+=n.Value.toString()}if(i.length>0&&(i="("+i+")"),2==this.InstructionType){var o=this.OutVar[this.OutVar.length-1];return t.SetInstructionData(this.InstructionType,{Data:o.Data,Name:this.Name,Param:i,ID:this.ID}),!0}if(1==this.InstructionType){var s,h;for(var l in this.OutVar){var u=this.OutVar[l];"ENTERLONG"==u.Name?s=u.Data:"EXITLONG"==u.Name&&(h=u.Data)}return t.SetInstructionData(this.InstructionType,{Buy:s,Sell:h,Name:this.Name,Param:i,ID:this.ID}),!0}}},this.BindData=function(t,e,a){if(0==e&&this.InstructionType)this.BindInstructionData(t,e,a);else if(t.DeleteIndexPaint(e),0==e&&t.ShowKLine(!0),!(null==this.OutVar||this.OutVar.length<0)){for(var i in null!=this.KLineType&&(0===this.KLineType||1===this.KLineType||2===this.KLineType?this.CreateSelfKLine(t,e,a):-1===this.KLineType&&0==e&&t.ShowKLine(!1)),e>=1&&t.Frame&&(t.Frame.SubFrame[e].Frame.YSplitOperator.FloatPrecision=this.FloatPrecision,this.YSpecificMaxMin&&(t.Frame.SubFrame[e].Frame.YSpecificMaxMin=this.YSpecificMaxMin),this.YSplitScale&&(t.Frame.SubFrame[e].Frame.YSplitScale=this.YSplitScale)),Te.IsNumber(this.YSplitType)&&(t.Frame.SubFrame[e].Frame.YSplitOperator.SplitType=this.YSplitType),this.OutVar){var r=this.OutVar[i];if(!0!==r.IsExData&&(1e3!=r.Type&&1001!=r.Type)){if(0==r.Type)r.IsOverlayLine?this.CreateOverlayLine(t,e,r,i,r.Type):this.CreateLine(t,e,r,i,r.Type);else if(1==r.Type)switch(r.Draw.DrawType){case"STICKLINE":this.CreateBar(t,e,r,i);break;case"DRAWTEXT":this.CreateDrawTextV2(t,e,r,i);break;case"SUPERDRAWTEXT":this.CreateText(t,e,r,i);break;case"DRAWLINE":this.CreateStraightLine(t,e,r,i);break;case"DRAWBAND":this.CreateBand(t,e,r,i);break;case"FILLRGN":this.CreateFillRGN(t,e,r,i);break;case"FILLRGN2":this.CreateFillRGN2(t,e,r,i);break;case"FILLTOPRGN":case"FILLBOTTOMRGN":case"FILLVERTICALRGN":this.CreateFillBGRGN(t,e,r,i);break;case"FLOATRGN":this.CreateFLOATRGN(t,e,r,i);break;case"DRAWKLINE":case"DRAWKLINE1":this.CreateKLine(t,e,r,i);break;case"DRAWCOLORKLINE":this.CreateDrawColorKLine(t,e,r,i);break;case"DRAWKLINE_IF":this.CreateKLine(t,e,r,i);break;case"POLYLINE":this.CreatePolyLine(t,e,r,i);break;case"DRAWGBK":case"DRAWGBK2":this.CreateBackgroud(t,e,r,i);break;case"DRAWGBK_DIV":this.CreateBackgroundDiv(t,e,r,i);break;case"DRAWTEXT_LINE":this.CreateTextLine(t,e,r,i);break;case"DRAWNUMBER":this.CreateDrawNumber(t,e,r,i);break;case"DRAWNUMBER_FIX":case"DRAWTEXT_FIX":this.CreateNumberText(t,e,r,i);break;case"DRAWICON":case"ICON":this.CreateIcon(t,e,r,i);break;case"TIPICON":this.CreateTipIcon(t,e,r,i);break;case"DRAWCHANNEL":this.CreateChannel(t,e,r,i);break;case"PARTLINE":this.CreatePartLine(t,e,r,i);break;case"DRAWRECTREL":this.CreateRectangle(t,e,r,i);break;case"DRAWTEXTABS":case"DRAWTEXTREL":this.CreateDrawText(t,e,r,i);break;case"DRAWOVERLAYLINE":this.CreateScriptOverlayLine(t,e,r,i);break;case"DRAWSL":this.CreateChartSlopeLine(t,e,r,i);break;case"VERTLINE":this.CreateChartVericaltLine(t,e,r,i);break;case"HORLINE":this.CreateChartHorizontalLine(t,e,r,i);break;case"MULTI_LINE":this.CreateMultiLine(t,e,r,i);break;case"MULTI_POINT":this.CreateMultiPoint(t,e,r,i);break;case"MULTI_BAR":this.CreateMultiBar(t,e,r,i);break;case"MULTI_TEXT":this.CreateMultiText(t,e,r,i);break;case"MULTI_SVGICON":this.CreateMultiSVGIcon(t,e,r,i);break;case"DRAWSVG":this.CreateChartDrawSVG(t,e,r,i);break;case"MULTI_HTMLDOM":this.CreateMulitHtmlDom(t,e,r,i);break;case"COLOR_KLINE":this.CreateColorKLine(t,e,r,i);break;case"KLINE_BG":this.CreateBackgroud(t,e,r,i);break;case"MULTI_POINT_LINE":this.CreateLineMultiData(t,e,r,i);break;case ni.OVERLAY_BARS:this.CreateStackedBar(t,e,r,i);break;case ni.KLINE_TABLE:this.CreateKLineTable(t,e,r,i);break;case ni.SCATTER_PLOT:this.CreateScatterPlot(t,e,r,i);break;default:var n=oi.Get(r.Draw.DrawType);n&&n.CreateChartCallback&&n.CreateChartCallback(t,e,r,i,this)}else 2==r.Type?this.CreateMACD(t,e,r,i):3==r.Type?this.CreatePointDot(t,e,r,i,a):4==r.Type?this.CreateLineStick(t,e,r,i):5==r.Type?this.CreateStick(t,e,r,i):6==r.Type?this.CreateVolStick(t,e,r,i,a):7==r.Type?this.CreateLine(t,e,r,i,r.Type):8==r.Type?this.CreateLine(t,e,r,i,r.Type):9==r.Type&&this.CreateArea(t,e,r,i);var o=t.TitlePaint[e+1];o&&o.Data&&i<o.Data.length&&(this.StringFormat>0&&(o.Data[i].StringFormat=this.StringFormat),this.FloatPrecision>=0&&(o.Data[i].FloatPrecision=this.FloatPrecision),this.OutName&&this.OutName.length>0&&this.Arguments&&this.Arguments.length>0&&o.SetDynamicTitle(this.OutName,this.Arguments))}}var s=e+1;if(t.TitlePaint[s].Title=this.Name,t.TitlePaint[s].Identify=this.Guid,t.TitlePaint[s].ArgumentsText=null,!this.IsShortTitle){for(var h="",l=0;l<this.Arguments.length;++l){var u=this.Arguments[l];h.length>0&&(h+=","),h+=u.Value.toString()}h.length>0&&(t.TitlePaint[s].ArgumentsText="("+h+")")}return this.TitleFont&&(t.TitlePaint[s].Font=this.TitleFont),!0}},this.GetDefaultColor=function(t){var e=null;return ia&&ia.Index&&ia.Index.LineColor&&(e=ia.Index.LineColor),e&&Array.isArray(e)||(e=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"]),e[parseInt(t)%(e.length-1)]},this.GetColor=function(t){if(0==t.indexOf("RGB("))return t.toLowerCase();if(0==t.indexOf("rgb("))return t;if(0==t.indexOf("RGBA("))return t.toLowerCase();if(0==t.indexOf("rgba("))return t;var e=ii.ColorVarToRGB(t);return e||"rgb(30,144,255)"}}function hi(t,e,a,i){this.newMethod=si,this.newMethod(t,e,a,i),delete this.newMethod,this.ClassName="OverlayScriptIndex",this.OverlayIndex=null,this.ShowConditionError=function(t,e){var a=t.HQChart,i=(t.WindowIndex,"指标不支持当前品种或周期");e&&(i=e);var r=this.OverlayIndex,n=r.Frame;n.ChartPaint=[];var o=new At;o.Canvas=a.Canvas,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.NotSupportMessage=i,n.ChartPaint.push(o),a.Draw()},this.BindData=function(t,e,a){if(this.OverlayIndex&&1==this.OverlayIndex.IsOverlay&&(this.OverlayIndex.Frame.ChartPaint=[],Te.IsNonEmptyArray(this.OutVar))){Te.IsNumber(this.YSplitType)&&(this.OverlayIndex.Frame.Frame.YSplitOperator.SplitType=this.YSplitType);var i={Data:[],Title:this.Name,Frame:this.OverlayIndex.Frame.Frame},r="";for(var n in this.Arguments){var o=this.Arguments[n];r.length>0&&(r+=","),r+=o.Value.toString()}r.length>0&&(i.Title=this.Name+"("+r+")");var s=e+1,h=t.TitlePaint[s];h.OverlayIndex.set(this.OverlayIndex.Identify,i),this.OverlayIndex.Frame.Frame.Title=i.Title,this.OutName&&this.OutName.length>0&&this.Arguments&&this.Arguments.length>0&&h.SetDynamicTitle(this.OutName,this.Arguments,this.OverlayIndex.Identify);for(n=0;n<this.OutVar.length;++n){var l=this.OutVar[n];if(!0!==l.IsExData){if(0==l.Type)this.CreateLine(t,e,l,n,l.Type);else if(1==l.Type)switch(l.Draw.DrawType){case"STICKLINE":this.CreateBar(t,e,l,n);break;case"DRAWTEXT":this.CreateDrawTextV2(t,e,l,n);break;case"SUPERDRAWTEXT":this.CreateText(t,e,l,n);break;case"DRAWLINE":this.CreateStraightLine(t,e,l,n);break;case"DRAWBAND":this.CreateBand(t,e,l,n);break;case"DRAWKLINE":case"DRAWKLINE_IF":this.CreateKLine(t,e,l,n);break;case"POLYLINE":this.CreatePolyLine(t,e,l,n);break;case"DRAWNUMBER":case"DRAWNUMBER_FIX":case"DRAWTEXT_FIX":this.CreateNumberText(t,e,l,n);break;case"DRAWICON":this.CreateIcon(t,e,l,n);break;case"DRAWCHANNEL":this.CreateChannel(t,e,l,n);break;case"DRAWTEXT_LINE":this.CreateTextLine(t,e,l,n);break;case"VERTLINE":this.CreateChartVericaltLine(t,e,l,n);break;case"HORLINE":this.CreateChartHorizontalLine(t,e,l,n);break;case"MULTI_LINE":this.CreateMultiLine(t,e,l,n);break;case"MULTI_POINT":this.CreateMultiPoint(t,e,l,n);break;case"MULTI_BAR":this.CreateMultiBar(t,e,l,n);break;case"MULTI_TEXT":this.CreateMultiText(t,e,l,n);break;case"MULTI_SVGICON":this.CreateMultiSVGIcon(t,e,l,n);break;case"DRAWSVG":this.CreateChartDrawSVG(t,e,l,n);break;case"MULTI_HTMLDOM":this.CreateMulitHtmlDom(t,e,l,n);break;case"KLINE_BG":this.CreateBackgroud(t,e,l,n);break;case"PARTLINE":this.CreatePartLine(t,e,l,n);break;case ni.OVERLAY_BARS:this.CreateStackedBar(t,e,l,n);break;default:var u=oi.Get(l.Draw.DrawType);u&&u.CreateChartCallback&&u.CreateChartCallback(t,e,l,n,this)}else 2==l.Type?this.CreateMACD(t,e,l,n):3==l.Type?this.CreatePointDot(t,e,l,n,a):4==l.Type?this.CreateLineStick(t,e,l,n):5==l.Type?this.CreateStick(t,e,l,n):6==l.Type?this.CreateVolStick(t,e,l,n,a):7==l.Type?this.CreateLine(t,e,l,n,l.Type):8==l.Type&&this.CreateLine(t,e,l,n,l.Type);var c=i.Data[n];c&&this.FloatPrecision>=0&&(c.FloatPrecision=this.FloatPrecision)}}return!0}},this.RecvResultData=function(t,e){var a=e.HQChart,i=e.WindowIndex,r=e.HistoryData;e.Self.OutVar=t,e.Self.BindData(a,i,r),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw();var n=a.GetOverlayIndexEvent();if(n){var o=e.Self,s={OutVar:o.OutVar,WindowIndex:i,Name:o.Name,Arguments:o.Arguments,HistoryData:r,Identify:o.OverlayIndex.Identify,Stock:{Symbol:a.Symbol,Name:a.Name}};n.Callback(n,s,o)}},this.CreateLine=function(t,e,a,i,r){var n=this.OverlayIndex,o=n.Frame;if(7==r)var s=new Pt;else s=new At;if(s.Canvas=t.Canvas,s.DrawType=1,s.Name=a.Name,s.ChartBorder=o.Frame.ChartBorder,s.ChartFrame=o.Frame,s.Identify=n.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),8==r&&(s.DrawType=2,s.BreakPoint=a.BreakPoint),a.LineWidth){var h=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(h)&&h>0&&(s.LineWidth=h)}0==a.IsShow&&(s.IsShow=!1);var l=e+1;s.Data.Data=a.Data;var u=t.TitlePaint[l],c=new Ye(s.Data,a.Name,s.Color);c.ChartClassName=s.ClassName,u.OverlayIndex.get(n.Identify).Data[i]=c,this.SetChartIndexName(s),o.ChartPaint.push(s)},this.CreateBar=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Yt;o.Canvas=t.Canvas,a.Draw.Width>0?o.Width=a.Draw.Width:o.Width=1,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i);o.Data.Data=a.Draw.DrawData,this.SetChartIndexName(o),n.ChartPaint.push(o)},this.CreateDrawTextV2=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Wt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.ReloadResource(),a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),!0===a.IsDrawCenter&&(o.TextAlign="center"),!0===a.IsDrawAbove&&(o.TextBaseline="bottom"),!0===a.IsDrawBelow&&(o.TextBaseline="top"),a.Draw.DrawData&&(o.Data.Data=a.Draw.DrawData),o.Text=a.Draw.Text,a.Draw.Direction>0&&(o.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(o.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(o.TextAlign=a.Draw.TextAlign),"TOP"===a.Draw.FixedPosition?o.FixedPosition=1:"BOTTOM"===a.Draw.FixedPosition&&(o.FixedPosition=2),a.DrawVAlign>=0&&(0==a.DrawVAlign?o.TextBaseline="top":1==a.DrawVAlign?o.TextBaseline="middle":2==a.DrawVAlign&&(o.TextBaseline="bottom")),a.DrawAlign>=0&&(0==a.DrawAlign?o.TextAlign="left":1==a.DrawAlign?o.TextAlign="center":2==a.DrawAlign&&(o.TextAlign="right")),a.DrawFontSize>0&&(o.FixedFontSize=a.DrawFontSize),a.Background&&(o.TextBG=a.Background),a.VerticalLine&&(o.VerticalLine=a.VerticalLine),Te.IsNumber(a.XOffset)&&(o.ShowOffset.X=a.XOffset),Te.IsNumber(a.YOffset)&&(o.ShowOffset.Y=a.YOffset),n.ChartPaint.push(o)},this.CreateText=function(t,e,a,i,r){var n=this.OverlayIndex,o=n.Frame,s=new Xt;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=o.Frame.ChartBorder,s.ChartFrame=o.Frame,s.Identify=n.Identify,s.ReloadResource(),a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i);a.Draw.Position&&(s.Position=a.Draw.Position),a.Draw.DrawData&&(s.Data.Data=a.Draw.DrawData),s.Text=a.Draw.Text,a.Draw.Direction>0&&(s.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(s.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(s.TextAlign=a.Draw.TextAlign),o.ChartPaint.push(s)},this.CreateMACD=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Jt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify;var s=e+1;o.Data.Data=a.Data;var h=t.TitlePaint[s],l=this.GetDefaultColor(i);a.Color&&(l=this.GetColor(a.Color)),a.UpColor&&(o.UpColor=a.UpColor),a.DownColor&&(o.DownColor=a.DownColor),h.OverlayIndex.get(r.Identify).Data[i]=new Ye(o.Data,a.Name,l),n.ChartPaint.push(o)},this.CreatePointDot=function(t,e,a,i,r){var n=this.OverlayIndex,o=n.Frame,s=new Rt;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=o.Frame.ChartBorder,s.ChartFrame=o.Frame,s.Identify=n.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.Radius&&(s.Radius=a.Radius),a.LineWidth){var h=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(h)&&h>0&&(s.Radius=h)}Te.IsBool(a.UpDownDot)&&(s.EnableUpDownColor=a.UpDownDot,s.HistoryData=r);var l=e+1;s.Data.Data=a.Data,t.TitlePaint[l].OverlayIndex.get(n.Identify).Data[i]=new Ye(s.Data,a.Name,s.Color),o.ChartPaint.push(s)},this.CreateStick=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new _t;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(s)&&s>0&&(o.LineWidth=s)}var h=e+1;o.Data.Data=a.Data,t.TitlePaint[h].OverlayIndex.get(r.Identify).Data[i]=new Ye(o.Data,a.Name,o.Color),n.ChartPaint.push(o)},this.CreateLineStick=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Bt;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(s)&&s>0&&(o.LineWidth=s)}var h=e+1;o.Data.Data=a.Data,t.TitlePaint[h].OverlayIndex.get(r.Identify).Data[i]=new Ye(o.Data,a.Name,o.Color),n.ChartPaint.push(o)},this.CreateStraightLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new At;if(o.DrawType=1,o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(s)&&s>0&&(o.LineWidth=s)}o.Data.Data=a.Draw.DrawData,n.ChartPaint.push(o)},this.CreateVolStick=function(t,e,a,i,r){var n=this.OverlayIndex,o=n.Frame,s=new kt;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=o.Frame.ChartBorder,s.ChartFrame=o.Frame,s.Identify=n.Identify,s.KLineDrawType=t.KLineDrawType,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.UpColor&&(s.UpColor=a.UpColor),a.DownColor&&(s.DownColor=a.DownColor);var h=e+1;s.Data.Data=a.Data,s.HistoryData=r,t.TitlePaint[h].OverlayIndex.get(n.Identify).Data[i]=new Ye(s.Data,a.Name,s.Color),this.SetChartIndexName(s),o.ChartPaint.push(s)},this.CreateBand=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new qt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.FirstColor=a.Draw.Color[0],o.SecondColor=a.Draw.Color[1],o.Data.Data=a.Draw.DrawData,n.ChartPaint.push(o)},this.CreateKLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Et;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.Data.Data=a.Draw.DrawData,o.IsShowMaxMinPrice=!1,o.IsShowKTooltip=!1,a.Color&&(o.UnchagneColor=o.DownColor=o.UpColor=this.GetColor(a.Color)),n.ChartPaint.push(o)},this.CreatePolyLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new At;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(s)&&s>0&&(o.LineWidth=s)}var h=e+1;o.Data.Data=a.Draw.DrawData,t.TitlePaint[h].OverlayIndex.get(r.Identify).Data[i]=new Ye(line.Data," ",line.Color),n.ChartPaint.push(o)},this.CreateNumberText=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Xt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.ReloadResource(),o.TextAlign="center",a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.IsDrawAbove?o.Direction=1:o.Direction=2,a.Draw.Position&&(o.Position=a.Draw.Position);o.Data.Data=a.Draw.DrawData.Value,o.Text=a.Draw.DrawData.Text,n.ChartPaint.push(o)},this.CreateTextLine=function(t,e,a,i){var r=this.OverlayIndex.Frame,n=new ee;if(n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=r.Frame.ChartBorder,n.ChartFrame=r.Frame,a.Draw&&a.Draw.DrawData){var o=a.Draw.DrawData;n.Text=o.Text,n.Line=o.Line,n.Price=o.Price}r.ChartPaint.push(n)},this.CreateStackedBar=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new le;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,Te.IsNonEmptyArray(a.Draw.BarColor)&&(o.BarColor=a.Draw.BarColor),Te.IsNonEmptyArray(a.Draw.BarName)&&(o.BarName=a.Draw.BarName),Te.IsNumber(a.Draw.LineWidth)&&(o.LineWidth=a.Draw.LineWidth),Te.IsNumber(a.Draw.BarType)&&(o.BarType=a.Draw.BarType),o.Data.Data=a.Draw.DrawData;var s=e+1,h=t.TitlePaint[s],l=new Ye(o.Data,o.BarName,o.BarColor);l.DataType="ChartStackedBar",h.OverlayIndex.get(r.Identify).Data[i]=l,n.ChartPaint.push(o)},this.CreateIcon=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Xt;o.Canvas=t.Canvas,o.TextAlign="center",o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.DrawVAlign>=0&&(0==a.DrawVAlign?o.Direction=1:1==a.DrawVAlign?o.Direction=0:2==a.DrawVAlign&&(o.Direction=2)),a.DrawAlign>=0&&(0==a.DrawAlign?o.TextAlign="left":1==a.DrawAlign?o.TextAlign="center":2==a.DrawAlign&&(o.TextAlign="right")),Te.IsNumber(a.XOffset)&&(o.ShowOffset.X=a.XOffset),Te.IsNumber(a.YOffset)&&(o.ShowOffset.Y=a.YOffset),o.Data.Data=a.Draw.DrawData;var s=a.Draw.Icon;1==s.IconFont?o.IconFont={Family:s.Family,Text:s.Symbol,Color:s.Color}:(o.Text=s.Symbol,a.Color?o.Color=this.GetColor(a.Color):s.Color?o.Color=s.Color:o.Color="rgb(0,0,0)"),n.ChartPaint.push(o)},this.CreateChannel=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new $t;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.Draw.AreaColor?o.AreaColor=a.Draw.AreaColor:a.Color?o.AreaColor=this.GetColor(a.Color):o.AreaColor=this.GetDefaultColor(i),a.Draw.Border.Color?o.LineColor=a.Draw.Border.Color:o.LineColor=null,a.Draw.Border.Dotted&&(o.LineDotted=a.Draw.Border.Dotted),a.Draw.Border.Width>0&&(o.LineWidth=a.Draw.Border.Width),o.Data.Data=a.Draw.DrawData,n.ChartPaint.push(o)},this.CreatePartLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Nt;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));Te.IsPlusNumber(s)&&(o.LineWidth=s)}o.Data.Data=a.Draw.DrawData,this.SetChartIndexName(o),n.ChartPaint.push(o)},this.CreateMultiLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new ie;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.Data=t.ChartPaint[0].Data,o.Lines=a.Draw.DrawData,a.Draw.LineDash&&(o.LineDash=a.Draw.LineDash),Te.IsNumber(a.Draw.LineWidth)&&(o.LineWidth=a.Draw.LineWidth),a.Draw.Arrow){var s=a.Draw.Arrow;1==s.Start&&(o.Arrow.Start=!0),1==s.End&&(o.Arrow.End=!0),Te.IsNumber(s.Angle)&&(o.ArrawAngle=s.Angle),Te.IsNumber(s.Length)&&(o.ArrawLength=s.Length),Te.IsNumber(s.LineWidth)&&(o.ArrawLineWidth=s.LineWidth)}n.ChartPaint.push(o)},this.CreateMultiPoint=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new re;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.Data=t.ChartPaint[0].Data,o.PointGroup=a.Draw.DrawData,n.ChartPaint.push(o)},this.CreateBackgroud=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new te;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.Draw&&a.Draw.DrawData){var s=a.Draw.DrawData;o.Color=s.Color,o.ColorAngle=s.Angle,s.Data&&(o.Data.Data=s.Data)}n.ChartPaint.push(o)},this.CreateMultiBar=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new ae;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.Data=t.ChartPaint[0].Data,o.Bars=a.Draw.DrawData;var s=e+1,h=t.TitlePaint[s],l=new Ye({KData:o.Data,BarData:o.Bars},a.Name,null);l.IsShow=!1,l.DataType="MULTI_BAR",h.OverlayIndex.get(r.Identify).Data[i]=l,n.ChartPaint.push(o)},this.CreateMultiText=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new ne;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.Data=t.ChartPaint[0].Data,o.Texts=a.Draw.DrawData,n.ChartPaint.push(o)},this.CreateMultiSVGIcon=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new oe;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.Data=t.ChartPaint[0].Data,o.Family=a.Draw.DrawData.Family,o.Icon=a.Draw.DrawData.Icon,n.ChartPaint.push(o)},this.CreateChartDrawSVG=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new he;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,t.ChartPaint[0].IsMinuteFrame()?o.Data=t.SourceData:o.Data=t.ChartPaint[0].Data,Te.IsBool(a.Draw.DrawData.EnableTooltip)&&(o.EnableTooltip=a.Draw.DrawData.EnableTooltip),Te.IsBool(a.Draw.DrawData.IsDrawFirst)&&(o.IsDrawFirst=a.Draw.DrawData.IsDrawFirst),o.Family=a.Draw.DrawData.Family,o.TextFont=a.Draw.DrawData.TextFont,o.Texts=a.Draw.DrawData.Data,n.ChartPaint.push(o)},this.CreateMulitHtmlDom=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new se;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.HQChart=t,o.Data=t.ChartPaint[0].Data,o.Texts=a.Draw.DrawData,o.DrawCallback=a.Draw.Callback,n.ChartPaint.push(o)},this.CreateChartVericaltLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Gt;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.HQChart=t,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(s)&&s>0&&(o.LineWidth=s)}this.SetChartLineDash(o,a.Draw.DrawData),o.Data.Data=a.Draw.DrawData.Data,n.ChartPaint.push(o)},this.CreateChartHorizontalLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Vt;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.HQChart=t,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(s)&&s>0&&(o.LineWidth=s)}this.SetChartLineDash(o,a.Draw.DrawData),o.ExtendType=a.Draw.DrawData.Extend,o.Data.Data=a.Draw.DrawData.Data,n.ChartPaint.push(o)},this.CreateSelfKLine=function(t,e,a){var i=this.OverlayIndex,r=i.Frame,n=new Et;n.Canvas=t.Canvas,n.Name="Self Kline",n.ChartBorder=r.Frame.ChartBorder,n.ChartFrame=r.Frame,n.Identify=i.Identify,n.Data=a,n.IsShowMaxMinPrice=!1,n.IsShowKTooltip=!1,n.DrawType=this.KLineType,r.ChartPaint.push(n)},this.GetDefaultColor=function(t){var e=["rgb(24,71,178)","rgb(42,230,215)","rgb(252,96,154)","rgb(0,128,255)","rgb(229,0,79)","rgb(68,114,196)","rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)"];return e[parseInt(t)%(e.length-1)]}}function li(t,e,a,i,r){this.newMethod=r?hi:si,this.newMethod(t,e,a,i),delete this.newMethod,this.ClassName="APIScriptIndex",this.IsOverlayIndex=1==r,this.ApiUrl,this.HQDataType,this.Version=1,i&&i.API&&(i.API.Url&&(this.ApiUrl=i.API.Url),i.API.Name&&(this.Name=this.ID=i.API.Name),i.API.ID&&(this.ID=i.API.ID),i.API.Version>0&&(this.Version=i.API.Version),!0===i.API.IsUsePageData&&(this.IsUsePageData=i.API.IsUsePageData)),this.Super_CopyTo=this.CopyTo,this.CopyTo=function(t){this.Super_CopyTo(t),t.ApiUrl=this.ApiUrl,t.Version=this.Version,t.IsOverlayIndex=this.IsOverlayIndex},this.ExecuteScript=function(t,e,a){D.Complier.Log("[APIScriptIndex::ExecuteScript] name, Arguments ",this.Name,this.Arguments);var i=ri.KLINE_ID,r=null;"MinuteChartContainer"===t.ClassName||"MinuteChartHScreenContainer"===t.ClassName?(i=t.DayCount>1?ri.MULTIDAY_MINUTE_ID:ri.MINUTE_ID,r=a.GetDateRange()):"HistoryMinuteChartContainer"===t.ClassName?i=ri.HISTORY_MINUTE_ID:r=a.GetDateRange();var n,o=[];if(this.Arguments)for(var s in this.Arguments){var h=this.Arguments[s];o.push({name:h.Name,value:h.Value})}t.GetRequestDataCount&&(n=t.GetRequestDataCount());var l=this,u={indexname:this.ID,symbol:t.Symbol,script:this.Script,args:o,period:t.Period,right:t.Right,hqdatatype:i};if(r&&(u.DateRange=r),n&&(u.maxdatacount=n.MaxRequestDataCount,u.maxminutedaycount=n.MaxRequestMinuteDayCount),i!=ri.MULTIDAY_MINUTE_ID&&i!=ri.MINUTE_ID||(u.daycount=t.DayCount),this.HQDataType=i,t.NetworkFilter){var c={Name:"APIScriptIndex::ExecuteScript",Explain:"指标计算",Request:{Url:l.ApiUrl,Type:"POST",Data:u},Self:this,HQChart:t,PreventDefault:!1};if(t.NetworkFilter(c,function(i){2==l.Version?l.RecvAPIData2(i,t,e,a):l.RecvAPIData(i,t,e,a)}),1==c.PreventDefault)return}v.HttpRequest({url:l.ApiUrl,data:u,type:"post",dataType:"json",async:!0,success:function(i){l.RecvAPIData(i,t,e,a)},error:function(t){l.RecvError(t)}})},this.RecvAPIData2=function(t,e,a,i){if(D.Complier.Log("[APIScriptIndex::RecvAPIData2] recv data ",this.Name,t),this.HQDataType==ri.KLINE_ID?(this.OutVar=this.ConvertToLocalData(t,e),D.Complier.Log("[APIScriptIndex::RecvAPIData2] conver to OutVar ",this.OutVar)):this.HQDataType==ri.MINUTE_ID?(this.OutVar=this.ConvertToLocalData(t,e),D.Complier.Log("[APIScriptIndex::RecvAPIData2] conver to OutVar ",this.OutVar)):this.HQDataType==ri.MULTIDAY_MINUTE_ID&&(this.OutVar=this.ConvertToLocalData(t,e),D.Complier.Log("[APIScriptIndex::RecvAPIData2] conver to OutVar ",this.OutVar)),this.BindData(e,a,i),e.UpdataDataoffset(),e.UpdateFrameMaxMin(),e.Draw(),e.GetIndexEvent){var r=e.GetIndexEvent();if(r){t={OutVar:this.OutVar,WindowIndex:a,Name:this.Name,Arguments:this.Arguments,HistoryData:i,Stock:{Symbol:e.Symbol,Name:e.Name}};r.Callback(r,t,this)}}},this.ConvertToLocalData=function(t,e){var a=t.OutVar;if("MinuteChartContainer"==e.ClassName||"MinuteChartHScreenContainer"==e.ClassName)var i=(r=e.SourceData).GetAPIDataIndex(t.Date,t.Time);else{var r=e.ChartPaint[0].Data;if(pt.IsDayPeriod(t.Period,!0))i=r.GetAPIDataIndex(t.Date);else i=r.GetAPIDataIndex(t.Date,t.Time)}var n=[];for(var o in a){var s={Type:(C=a[o]).Type,Name:C.Name};if(0==C.Type){s.Data=[];for(var h=0;h<i.length;++h){(y=i[h]).Index<0?s.Data[h]=null:s.Data[h]=C.Data[y.Index]}s.Name&&s.Name.indexOf("@NODRAW@")>=0&&(s.Name=s.Name.replace("@NODRAW@",""))}else{if(1!=C.Type)continue;s.Name=C.DrawType,s.Draw={DrawType:C.DrawType};var l=C.Draw;switch(C.DrawType){case"STICKLINE":var u=[];for(h=0;h<i.length;++h){if(u[h]=null,!((x=(y=i[h]).Index)<0)){var c=l.Price[x],f=l.Price2[x];Te.IsNumber(c)&&Te.IsNumber(f)&&(u[h]={Value:c,Value2:f})}}s.Draw.DrawData=u,s.Draw.Width=l.Width,s.Draw.Type=l.Empty;break;case"DRAWTEXT":u=[];var d=[];for(h=0;h<i.length;++h){if(u[h]=null,!((x=(y=i[h]).Index)<0)){c=l.Price[x];if(Te.IsNumber(c)&&(u[h]=c),Array.isArray(l.Text)){var C=l.Text[x];Te.IsString(C)&&(d[h]=C)}}}Array.isArray(l.Text)?s.Draw.Text=d:s.Draw.Text=l.Text,s.Draw.DrawData=u;break;case"DRAWNUMBER":for(u={Value:[],Text:[]},h=0;h<i.length;++h){if(u.Value[h]=null,u.Text[h]=null,!((x=(y=i[h]).Index)<0)){c=l.Price[x];var p=l.Number[x];Te.IsNumber(c)&&Te.IsNumber(p)&&(u.Value[h]=c,u.Text[h]=p.toFixed(2))}}s.Draw.DrawData=u;break;case"DRAWBAND":for(u=[],h=0;h<i.length;++h){if(u[h]=null,!((x=(y=i[h]).Index)<0)){c=l.Val1[x],f=l.Val2[x];Te.IsNumber(c)&&Te.IsNumber(f)&&(u[h]={Value:c,Value2:f})}}s.Draw.DrawData=u,s.Draw.Color=[null,null],l.Color1&&(s.Draw.Color[0]=l.Color1.toLowerCase()),l.Color2&&(s.Draw.Color[1]=l.Color2.toLowerCase());break;case"DRAWKLINE":for(u=[],h=0;h<i.length;++h){C={Open:null,High:null,Low:null,Close:null};if(u[h]=C,!((x=(y=i[h]).Index)<0)){var m=l.High[x],D=l.Low[x],v=l.Open[x],g=l.Close[x];Te.IsPlusNumber(m)&&Te.IsPlusNumber(D)&&Te.IsPlusNumber(v)&&Te.IsPlusNumber(g)&&(C.Open=v,C.Close=g,C.High=m,C.Low=D)}}s.Draw.DrawData=u;break;case"DRAWTEXT_FIX":for(u={Value:[],Text:[]},h=0;h<i.length;++h){if(u.Value[h]=0,u.Text[h]=null,!((x=(y=i[h]).Index)<0))l.Cond[x]&&(u.Value[h]=1,u.Text[h]=l.Text)}s.Draw.DrawData=u,s.Draw.Position={X:l.X,Y:l.Y,Type:l.Type};break;case"DRAWNUMBER_FIX":for(u={Value:[],Text:[]},h=0;h<i.length;++h){if(u.Value[h]=null,u.Text[h]=null,!((x=(y=i[h]).Index)<0)){var S=l.Number[x];Te.IsNumber(S)&&(u.Value[h]=S,u.Text[h]=Te.RemoveZero(S.toFixed(2)))}}s.Draw.DrawData=u,s.Draw.Position={X:l.X,Y:l.Y,Type:l.Type};break;case"DRAWICON":var T=Ha.GetDrawIcon(l.Type);T||Ha.GetDrawTextIcon(l.Type),T||(T={Symbol:"🚩"}),s.Draw.Icon=T;for(u=[],h=0;h<i.length;++h){if(u[h]=null,!((x=(y=i[h]).Index)<0)){S=l.Price[x];Te.IsNumber(S)&&(u[h]=S)}}s.Draw.DrawData=u;break;case"PARTLINE":for(u=[],h=0;h<i.length;++h){if(u[h]={Value:null,RGB:null},!((x=(y=i[h]).Index)<0)){var I=l.Color[x];if(Te.IsString(I)){S=l.Price[x];Te.IsNumber(S)&&(u[h].Value=S,u[h].RGB=I)}}}s.Draw.DrawData=u;break;case"FILLRGN":for(u=[],h=0;h<i.length;++h){var y,x;if(u[h]=null,!((x=(y=i[h]).Index)<0)){I=l.Color[x];if(Te.IsString(I)){S=l.Price[x];if(Te.IsNumber(S)){var w=l.Price2[x];Te.IsNumber(w)&&(u[h]={Value:S,Value2:w,Color:I})}}}}s.Draw.DrawData=u,s.Draw.DrawType="FILLRGN2";break;default:continue}}for(var o in C.Attribute){var F=C.Attribute[o];switch(F){case"COLORSTICK":s.Type=2;break;case"POINTDOT":s.Radius=ia.POINTDOT.Radius,s.Type=3;break;case"CIRCLEDOT":s.Radius=ia.CIRCLEDOT.Radius,s.Type=3;break;case"DOTLINE":s.IsDotLine=!0;break;case"DRAWABOVE":s.IsDrawAbove=!0;break;case"LINESTICK":s.Type=4;break;case"STICK":s.Type=5;break;case"VOLSTICK":s.Type=6;break;case"LINEAREA":s.Type=9;break;case"NODRAW":s.IsShow=!1;break;case"NONE_OUT_NAME":s.NoneName=!0;break;case"NOTEXT":s.IsShowTitle=!1}0==F.indexOf("COLOR")?s.Color=F:0==F.indexOf("LINETHICK")&&(s.LineWidth=F)}n.push(s)}return n},this.RecvAPIData=function(t,e,a,i){if(D.Complier.Log("[APIScriptIndex::RecvAPIData] recv data ",this.Name,t),0==t.code)if(!e.EnableVerifyRecvData||t.stock&&e.Symbol==t.stock.symbol)if(t.error&&Te.IsString(t.error.message)){var r={HQChart:e,WindowIndex:a,HistoryData:i,Self:this};this.ShowConditionError(r,t.error.message)}else{if(t.outdata&&t.outdata.name&&(this.Name=t.outdata.name),t.outdata.args)for(var n in this.Arguments=[],t.outdata.args){var o=t.outdata.args[n];this.Arguments.push({Name:o.name,Value:o.value})}if(this.HQDataType==ri.KLINE_ID?(this.OutVar=this.FittingData(t.outdata,e),D.Complier.Log("[APIScriptIndex::RecvAPIData] conver to OutVar ",this.OutVar)):this.OutVar=this.FittingMinuteData(t.outdata,e),this.BindData(e,a,i),0==this.IsLocked)e.Frame.SubFrame[a].Frame.SetLock(null);else{var s={IsLocked:!0,Callback:this.LockCallback,IndexName:this.Name,ID:this.LockID,BG:this.LockBG,Text:this.LockText,TextColor:this.LockTextColor,Font:this.LockFont,Count:this.LockCount,MinWidth:this.LockMinWidth};e.Frame.SubFrame[a].Frame.SetLock(s)}if(e.UpdataDataoffset(),e.UpdateFrameMaxMin(),e.Draw(),e.GetIndexEvent){var h=e.GetIndexEvent();if(h){t={OutVar:this.OutVar,WindowIndex:a,Name:this.Name,Arguments:this.Arguments,HistoryData:i,Stock:{Symbol:e.Symbol,Name:e.Name}};h.Callback(h,t,this)}}}else D.Chart.Warn("[APIScriptIndex::RecvAPIData] recv data symbol not match. HQChart["+e.Symbol+"]")},this.FittingArray=function(t,e,a,i,r){var n,o=i.ChartPaint[0].Data,s=[];for(var h in t){var l=t[h],u=new ct;u.Date=e[h],a&&h<a.length&&(u.Time=a[h]),u.Value=l,s.push(u)}n=pt.IsDayPeriod(i.Period,!0)?o.GetFittingData(s):o.GetMinuteFittingData(s);var c=new pt;return c.Data=n,1==r?c.GetObject():c.GetValue()},this.FittingMultiLine=function(t,e,a,i){var r=i.ChartPaint[0].Data;if(pt.IsDayPeriod(i.Period,!0)){r=i.ChartPaint[0].Data;var n=[];for(var o in t){var s=t[o];for(var h in s.Point){var l=s.Point[h];n.push(l)}}return n.sort(function(t,e){return t.Date-e.Date}),r.GetDateIndex(n),t}if(pt.IsMinutePeriod(i.Period,!0)||pt.IsTickPeriod(i.Period)||pt.IsSecondPeriod(i.Period)){r=i.ChartPaint[0].Data,n=[];for(var o in t){s=t[o];for(var h in s.Point){l=s.Point[h];n.push(l)}}return n.sort(function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date}),r.GetDateTimeIndex(n),t}if(this.HQDataType==ri.MINUTE_ID||this.HQDataType==ri.MULTIDAY_MINUTE_ID){var u=i.SourceData;n=[];for(var o in t){s=t[o];for(var h in s.Point){l=s.Point[h];n.push(l)}}return n.sort(function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date}),u.GetDateTimeIndex(n),t}return null},this.FittingMultiText=function(t,e,a,i){if(pt.IsDayPeriod(i.Period,!0)){var r=i.ChartPaint[0].Data;return t.sort(function(t,e){return t.Date-e.Date}),r.GetDateIndex(t),t}if(pt.IsMinutePeriod(i.Period,!0)||pt.IsTickPeriod(i.Period)||pt.IsSecondPeriod(i.Period)){r=i.ChartPaint[0].Data;return t.sort(function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date}),r.GetDateTimeIndex(t),t}if(this.HQDataType==ri.MINUTE_ID||this.HQDataType==ri.MULTIDAY_MINUTE_ID){var n=i.SourceData;return t.sort(function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date}),n.GetDateTimeIndex(t),t}return null},this.FittingData=function(t,e){var a=t.outvar,i=t.date,r=t.time,n=(e.ChartPaint[0].Data,[]);if(!a)return n;for(var o=0;o<a.length;++o){var s={Name:(d=a[o]).name,Type:d.type};if(d.color&&(s.Color=d.color),d.data)s.Data=this.FittingArray(d.data,i,r,e),d.color&&(s.Color=d.color),d.linewidth&&(s.LineWidth=d.linewidth),0==d.isshow&&(s.IsShow=!1),1==d.isexdata&&(s.IsExData=!0),d.BreakPoint&&(s.BreakPoint=d.BreakPoint),n.push(s);else if(d.Draw){var h=d.Draw,l={};if("DRAWICON"==h.DrawType)l.Icon=h.Icon,l.Name=h.Name,l.DrawType=h.DrawType,l.DrawData=this.FittingArray(h.DrawData,i,r,e),s.Draw=l,n.push(s);else if("DRAWTEXT"==h.DrawType)l.Text=h.Text,l.Name=h.Name,l.DrawType=h.DrawType,l.DrawData=this.FittingArray(h.DrawData,i,r,e),s.Draw=l,n.push(s);else if("STICKLINE"==h.DrawType)l.Name=h.Name,l.Type=h.Type,l.Width=h.Width,l.DrawType=h.DrawType,l.DrawData=this.FittingArray(h.DrawData,i,r,e,1),s.Draw=l,n.push(s);else if("DRAWBAND"==h.DrawType)l.Name=h.Name,l.Type=h.Type,l.DrawType=h.DrawType,l.DrawData=this.FittingArray(h.DrawData,i,r,e,1),l.Color=h.Color,s.Draw=l,n.push(s);else if("MULTI_LINE"==h.DrawType){if(l.Text=h.Text,l.Name=h.Name,l.DrawType=h.DrawType,l.DrawData=this.FittingMultiLine(h.DrawData,i,r,e),Te.IsNonEmptyArray(l.DrawData))for(var u=0;u<l.DrawData.length;++u)this.GetKLineData(l.DrawData[u].Point,e);s.Draw=l,h.LineDash&&(l.LineDash=h.LineDash),h.Arrow&&(l.Arrow=h.Arrow),Te.IsNumber(h.LineWidth)&&(l.LineWidth=h.LineWidth),n.push(s)}else if("MULTI_POINT"==h.DrawType){if(l.Text=h.Text,l.Name=h.Name,l.DrawType=h.DrawType,l.DrawData=this.FittingMultiLine(h.DrawData,i,r,e),Te.IsNonEmptyArray(l.DrawData))for(u=0;u<l.DrawData.length;++u)this.GetKLineData(l.DrawData[u].Point,e);s.Draw=l,n.push(s)}else if("MULTI_BAR"==h.DrawType)l.Text=h.Text,l.Name=h.Name,l.DrawType=h.DrawType,l.DrawData=this.FittingMultiLine(h.DrawData,i,r,e),s.Draw=l,n.push(s);else if(h.DrawType==ni.OVERLAY_BARS)l.Name=h.Name,l.Type=h.Type,l.DrawType=h.DrawType,l.BarName=h.BarName,l.BarColor=h.BarColor,l.LineWidth=h.LineWidth,l.BarType=h.BarType,l.DrawData=this.FittingArray(h.DrawData,i,r,e,1),s.Draw=l,n.push(s);else if(h.DrawType==ni.SCATTER_PLOT)l.Name=h.Name,l.Type=h.Type,l.DrawType=h.DrawType,l.DrawData=this.FittingArray(h.DrawData,i,r,e,1),l.Color=h.Color,l.Radius=h.Radius,s.Draw=l,n.push(s);else if(h.DrawType==ni.KLINE_TABLE)l.Name=h.Name,l.Type=h.Type,l.DrawType=h.DrawType,l.DrawData=this.FittingArray(h.DrawData,i,r,e,1),l.RowCount=h.RowCount,l.RowName=h.RowName,l.IsShowRowName=h.IsShowRowName,l.BGColor=h.BGColor,s.Draw=l,n.push(s);else if("MULTI_TEXT"==h.DrawType)l.Text=h.Text,l.Name=h.Name,l.DrawType=h.DrawType,l.DrawData=this.FittingMultiText(h.DrawData,i,r,e),this.GetKLineData(l.DrawData,e),s.Draw=l,n.push(s);else if("MULTI_SVGICON"==h.DrawType)l.Text=h.Text,l.Name=h.Name,l.DrawType=h.DrawType,l.DrawData={Icon:this.FittingMultiText(h.DrawData.Icon,i,r,e),Family:h.DrawData.Family},this.GetKLineData(l.DrawData.Icon,e),s.Draw=l,n.push(s);else if("DRAWSVG"==h.DrawType)l.Text=h.Text,l.Name=h.Name,l.DrawType=h.DrawType,l.DrawData={Data:this.FittingMultiText(h.Data,i,r,e),Family:h.Family,TextFont:h.TextFont,EnableTooltip:h.EnableTooltip,IsDrawFirst:h.IsDrawFirst},this.GetKLineData(l.DrawData.Data,e),s.Draw=l,n.push(s);else if("MULTI_HTMLDOM"==h.DrawType)l.Text=h.Text,l.Name=h.Name,l.DrawType=h.DrawType,l.Callback=h.Callback,l.DrawData=this.FittingMultiText(h.DrawData,i,r,e),this.GetKLineData(l.DrawData,e),s.Draw=l,n.push(s);else if("COLOR_KLINE"==h.DrawType){l.Text=h.Text,l.Name=h.Name,l.DrawType=h.DrawType;var c=this.FittingMultiText(h.DrawData.KLine,i,r,e),f=new C.default;for(var o in c){var d=c[o];f.set(d.Index,d)}l.DrawData={KLine:f},h.Color&&(s.Color=h.Color),s.Draw=l,n.push(s)}else if("KLINE_BG"==h.DrawType)l.Name=h.Name,l.DrawType=h.DrawType,l.DrawData={},l.DrawData.Color=h.Color,l.DrawData.Angle=h.Angle,2==h.Ver?l.DrawData.Data=this.FittingKLineBG_V2(h.DrawData,e):l.DrawData.Data=this.FittingKLineBG(h.DrawData,e),s.Draw=l,s.Name=h.DrawType,n.push(s);else if("MULTI_POINT_LINE"==h.DrawType)l.Name=h.Name,l.DrawType=h.DrawType,l.DrawData={},l.DrawData.Color=h.Color,l.DrawData.PointRadius=h.PointRadius,l.DrawData.PointColor=h.PointColor,l.DrawData.LineWidth=h.LineWidth,l.DrawData.Data=this.FittingMultiPointLine(h.DrawData,e),s.Draw=l,n.push(s);else if("PARTLINE"==h.DrawType)l.Name=h.Name,l.Type=h.Type,l.DrawType=h.DrawType,l.DrawData=this.FittingArray(h.DrawData,i,r,e,1),s.Draw=l,h.LineWidth&&(s.LineWidth=h.LineWidth),n.push(s);else{var p=oi.Get(h.DrawType);p&&p.KLineFittingCallback&&p.KLineFittingCallback(d,s,{Date:i,Time:r,HQChart:e},this)&&n.push(s)}}}return n},this.GetKLineData=function(t,e){if(t&&Array.isArray(t)){if(this.HQDataType==ri.MINUTE_ID||this.HQDataType==ri.MULTIDAY_MINUTE_ID)var a=e.SourceData;else a=e.ChartPaint[0].Data;for(var i in t){var r=t[i];if(Te.IsString(r.Value)&&(Te.IsNumber(r.Index)&&!(r.Index<0||r.Index>=a.Data.length))){var n=r.Value.toUpperCase(),o=a.Data[r.Index];switch(n){case"HIGH":case"H":r.Value=o.High;break;case"L":case"LOW":r.Value=o.Low;break;case"C":case"CLOSE":r.Value=o.Close}}}}},this.FittingKLineBG=function(t,e){var a=e.ChartPaint[0].Data,i=[];if(pt.IsDayPeriod(e.Period,!0)){for(var r=!1,n=0,o=0;n<a.Data.length;){i[n]=0;var s=a.Data[n];if(o>=t.length)++n;else(h=t[o]).Date<s.Date?++o:h.Date>s.Date?++n:(r=!0,i[n]=1,++o,++n)}if(r)return i}else if(pt.IsMinutePeriod(e.Period,!0)){for(r=!1,n=0,o=0;n<a.Data.length;){i[n]=0;var h;s=a.Data[n];if(o>=t.length)++n;else(h=t[o]).Date<s.Date||h.Date==s.Date&&h.Time<s.Time?++o:h.Date>s.Date||h.Date==s.Date&&h.Time>s.Time?++n:(r=!0,i[n]=1,++o,++n)}if(r)return i}return null},this.FittingKLineBG_V2=function(t,e){var a=e.ChartPaint[0].Data,i=[];if(pt.IsDayPeriod(e.Period,!0)){for(var r=!1,n=0,o=0;n<a.Data.length;++n){i[n]=0;var s=(f=a.Data[n]).Date;for(o=0;o<t.length;++o){if(s>=(d=t[o]).Start.Date&&s<=d.End.Date){i[n]=1,r=!0;break}}}if(r)return i}else if(pt.IsMinutePeriod(e.Period,!0)){var h=[];for(n=0;n<t.length;++n){var l=t[n],u=1e4*l.Start.Date;Te.IsNumber(l.Start.Time)&&(u+=l.Start.Time);var c=1e4*l.End.Date;Te.IsNumber(l.End.Time)&&(c+=l.End.Time),h.push({Start:u,End:c})}for(r=!1,n=0,o=0;n<a.Data.length;++n){i[n]=0;var f;s=1e4*(f=a.Data[n]).Date+f.Time;for(o=0;o<h.length;++o){var d;if(s>=(d=h[o]).Start&&s<=d.End){i[n]=1,r=!0;break}}}if(r)return i}return null},this.FittingMinuteData=function(t,e){for(var a=t.outvar,i=t.date,r=t.time,n=[],o=0;o<a.length;++o){var s=a[o],h={Name:s.name,Type:s.type};if(s.data)h.Data=this.FittingMinuteArray(s.data,i,r,e),s.color&&(h.Color=s.color),s.linewidth>=1&&(h.LineWidth=s.linewidth),0==s.isshow&&(h.IsShow=!1),1==s.isexdata&&(h.IsExData=!0),s.BreakPoint&&(h.BreakPoint=s.BreakPoint),n.push(h);else if(s.Draw){var l=s.Draw,u={};if("DRAWICON"==l.DrawType)u.Icon=l.Icon,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMinuteArray(l.DrawData,i,r,e),h.Draw=u,n.push(h);else if("DRAWTEXT"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMinuteArray(l.DrawData,i,r,e),h.Draw=u,n.push(h);else if("STICKLINE"==l.DrawType)u.Name=l.Name,u.Type=l.Type,u.Width=l.Width,u.DrawType=l.DrawType,u.DrawData=this.FittingMinuteArray(l.DrawData,i,r,e,1),h.Draw=u,n.push(h);else if(l.DrawType==ni.OVERLAY_BARS)u.Name=l.Name,u.Type=l.Type,u.DrawType=l.DrawType,u.BarName=l.BarName,u.BarColor=l.BarColor,u.LineWidth=l.LineWidth,u.DrawData=this.FittingMinuteArray(l.DrawData,i,r,e,1),h.Draw=u,n.push(h);else if("MULTI_LINE"==l.DrawType){for(var c in u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiLine(l.DrawData,i,r,e),u.DrawData)this.GetKLineData(u.DrawData[c].Point,e);h.Draw=u,l.LineDash&&(u.LineDash=l.LineDash),l.Arrow&&(u.Arrow=l.Arrow),n.push(h)}else if("MULTI_POINT"==l.DrawType){if(u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiLine(l.DrawData,i,r,e),Te.IsNonEmptyArray(u.DrawData))for(c=0;c<u.DrawData.length;++c)this.GetKLineData(u.DrawData[c].Point,e);h.Draw=u,n.push(h)}else if("MULTI_TEXT"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiText(l.DrawData,i,r,e),this.GetKLineData(u.DrawData,e),h.Draw=u,n.push(h);else if("MULTI_SVGICON"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData={Icon:this.FittingMultiText(l.DrawData.Icon,i,r,e),Family:l.DrawData.Family},this.GetKLineData(u.DrawData.Icon,e),h.Draw=u,n.push(h);else if("DRAWSVG"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData={Data:this.FittingMultiText(l.Data,i,r,e),Family:l.Family,TextFont:l.TextFont,EnableTooltip:l.EnableTooltip,IsDrawFirst:l.IsDrawFirst},this.GetKLineData(u.DrawData.Data,e),h.Draw=u,n.push(h);else if("MULTI_HTMLDOM"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.Callback=l.Callback,u.DrawData=this.FittingMultiText(l.DrawData,i,r,e),this.GetKLineData(u.DrawData,e),h.Draw=u,n.push(h);else{var f=oi.Get(l.DrawType);f&&f.MinuteFittingCallback&&f.MinuteFittingCallback(s,h,{Date:i,Time:r,HQChart:e},this)&&n.push(h)}}}return n},this.FittingMinuteArray=function(t,e,a,i,r){var n,o=i.SourceData,s=[];for(var h in t){var l=t[h],u=new ct;u.Date=e[h],a&&h<a.length&&(u.Time=a[h]),u.Value=l,s.push(u)}n=5==r?o.GetMinuteFittingDataV2(s):o.GetMinuteFittingData(s);var c=new pt;return c.Data=n,c.GetValue()},this.FittingMultiPointLine=function(t,e){var a=e.Period,i=t.Data,r=[];if(pt.IsDayPeriod(a,!0)){var n=i[0],o=(p=e.ChartPaint[0].Data).Data[0],s=0,h=0;if(n.Date>o.Date){var l=0;for(s=0;s<p.Data.length;++s){if((C=p.Data[s]).Date==n.Date)break;if(C.Date>n.Date){s=l;break}l=s}}else for(h=0;h<i.length;++h){if((d=i[h]).Date>=o.Date)break}for(var u=null,c=s,f=h;c<p.Data.length&&f<i.length;){var d,C=p.Data[c];(d=i[f]).Date<=C.Date?(r[c]||(r[c]=[]),r[c].push({Date:d.Date,Value:d.Value,Data:d.Data,KDate:C.Date,Type:1}),u=d,++f):(u&&!r[c]&&(r[c]={Date:u.Date,Value:u.Value,Type:0}),++c)}if(u)for(;c<p.Data.length;++c)r[c]||(r[c]={Date:u.Date,Value:u.Value,Type:0});return r}if(pt.IsMinutePeriod(a,!0)){var p=e.ChartPaint[0].Data;return r}}}function ui(t,e,a){this.newMethod=si,this.newMethod(t,null,e,null),delete this.newMethod,this.JsonData,a.JsonData&&(this.JsonData=a.JsonData),this.RequestData=function(t,e,a){if(!this.JsonData)return console.warn("[LocalJsonDataIndex::RequestData] JsonData is null"),void(param.HQChart.ScriptErrorCallback&&param.HQChart.ScriptErrorCallback("json 数据不能为空"));this.OutVar=this.FittingData(this.JsonData,a),this.BindData(t,e,a)},this.FittingData=function(t,e){for(i in outVar=t.OutVar,date=t.Date,time=t.Time,result=[],outVar)if(item=outVar[i],D.Complier.Log("[LocalJsonDataIndex::FittingData] item",item),0==item.Type||3==item.Type){var a=[];for(j in outVarItem={Name:item.Name,Type:item.Type},item.Data){var r=new ct;r.Date=date[j],time&&j<time.length&&(r.Time=time[j]),r.Value=item.Data[j],a.push(r)}if(e.Period<4)var n=e.GetFittingData(a);else n=e.GetMinuteFittingData(a);var o=new pt;o.Data=n,outVarItem.Data=o.GetValue(),result.push(outVarItem)}else console.warn("[LocalJsonDataIndex::FittingData] can't support ",item.Name,item.Type);return result}}function ci(t){this.ID,this.Name,this.Script,this.Arguments=[],this.ClassName="ScriptIndexConsole",this.ErrorCallback,this.FinishCallback,this.IsSectionMode=!1,this.NetworkFilter,t&&(t.Name&&(this.Name=t.Name),t.Script&&(this.Script=t.Script),t.ID&&(this.ID=t.ID),t.Args&&(this.Arguments=t.Args),t.ErrorCallback&&(this.ErrorCallback=t.ErrorCallback),t.FinishCallback&&(this.FinishCallback=t.FinishCallback),t.IsSectionMode&&(this.IsSectionMode=t.IsSectionMode),t.NetworkFilter&&(this.NetworkFilter=t.NetworkFilter)),this.ExecuteScript=function(t){this.OutVar=[];var e={Self:this},a={HQDataType:t.HQDataType,Symbol:t.Stock.Symbol,Name:t.Stock.Name,Period:t.Period,Right:t.Right,Callback:this.RecvResultData,CallbackParam:e,Async:!0,MaxRequestDataCount:t.Request.MaxDataCount,MaxRequestMinuteDayCount:t.Request.MaxMinuteDayCount,Arguments:this.Arguments,IsSectionMode:this.IsSectionMode,ClassName:"ScriptIndexConsole",NetworkFilter:this.NetworkFilter};t.HQDataType===ri.HISTORY_MINUTE_ID&&(a.TrateDate=t.Request.TradeDate),t.HQDataType==ri.MULTIDAY_MINUTE_ID&&(a.DayCount=t.DayCount);var i=this.Script;ii.Execute(i,a,this.ErrorCallback)},this.RecvResultData=function(t,e){var a=e.Self,i=e.JSExecute,r=null;i.SymbolData.Data&&(r=i.SymbolData.Data.GetDate());var n={Out:t,Date:r,Stock:{Name:i.SymbolData.Name,Symbol:i.SymbolData.Symbol},Index:{Name:a.Name,ID:a.ID}};i.SymbolData.DataType==ri.MULTIDAY_MINUTE_ID||i.SymbolData.DataType==ri.MINUTE_ID?n.Time=i.SymbolData.Data.GetTime():i.SymbolData.DataType==ri.KLINE_ID&&pt.IsMinutePeriod(i.SymbolData.Period,!0)&&(n.Time=i.SymbolData.Data.GetTime()),a.FinishCallback&&a.FinishCallback(n,e.JSExecute)}}function fi(t){this.Url=t.Url,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this,e=this.GetFieldList();if(!e)return message=this.Job.FunctionName+"("+this.Args[0]+") can't support.",this.ErrorCallback(message),void t.RecvCallback(null,t.Job,t.DataKey);v.HttpRequest({url:this.Url,data:{field:e,symbol:[this.Symbol],condition:[{item:["finance","doc","exists","true"]}],start:0,end:200},type:"post",dataType:"json",async:!0,success:function(e){var a=t.ToHQChartData(e);a&&a.sort(function(t,e){return t.Date-e.Date}),t.RecvCallback(a,t.Job,t.DataKey)}})},this.ToHQChartData=function(t){if(!t.stock||1!=t.stock.length)return null;var e=[],a=new c.default,i=t.stock[0];for(var r in i.stockday){var n,o=i.stockday[r];if(o.announcement1)(n=this.ToHQChartItemData(o.announcement1,o.finance1,o))&&!a.has(n.Date)&&(e.push(n),a.add(n.Date));if(o.announcement2)(n=this.ToHQChartItemData(o.announcement2,o.finance2,o))&&!a.has(n.Date)&&(e.push(n),a.add(n.Date));if(o.announcement3)(n=this.ToHQChartItemData(o.announcement3,o.finance3,o))&&!a.has(n.Date)&&(e.push(n),a.add(n.Date));if(o.announcement4)(n=this.ToHQChartItemData(o.announcement4,o.finance4,o))&&!a.has(n.Date)&&(e.push(n),a.add(n.Date))}return e},this.ToHQChartItemData=function(t,e,a){var i=this.Args[0],r=1e4*t.year;switch(t.quarter){case 1:r+=331;break;case 2:r+=630;break;case 3:r+=930;break;case 4:r+=1231;break;default:return null}var n={Date:r,Value:0};switch(i){case 0:n.Value=r%1e6;break;case 1:n.Value=e.persearning;break;case 3:n.Value=e.peruprofit;break;case 4:n.Value=e.pernetasset;break;case 5:n.Value=e.percreserve;break;case 6:n.Value=e.woewa;break;case 7:n.Value=e.perccfo;break;case 8:n.Value=e.monetaryfunds;break;case 11:n.Value=e.areceivable}return n},this.GetFieldList=function(){switch(this.Args[0]){case 0:return["finance.date"];case 1:return["finance.persearning"];case 3:return["finance.peruprofit"];case 4:return["finance.pernetasset"];case 5:return["finance.percreserve"];case 6:return["finance.woewa"];case 7:return["finance.perccfo"];case 8:return["finance.monetaryfunds"];case 11:return["finance.areceivable"];default:return null}}}function di(t){this.Url=t.Url,this.RealtimeUrl=t.RealtimeUrl,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this.Args[0];switch(t){case 1:case 7:case"EXCHANGE":this.DownloadHistoryData(t);break;case 3:this.GetSymbolType(t);break;case 9:case 18:case 30:case 32:case 33:case 34:case 38:case 40:case 41:case 42:case 43:case"CAPITAL":case"TOTALCAPITAL":case 100:default:this.DownloadRealtimeData(t)}},this.GetSymbolType=function(t){var e=1;Ea.IsSHSZIndex(this.Symbol)&&(e=0);var a={Date:null,Value:e};this.RecvCallback(a,this.Job,this.DataKey)},this.DownloadRealtimeData=function(t){var e=this,a=this.GetFieldList();if(!a)return this.Job.FunctionName2?message=this.Job.FunctionName2+" can't support.":this.Job.FunctionName?message=this.Job.FunctionName+"("+this.Args[0]+") can't support.":message=this.Args[0]+" can't support.",this.ErrorCallback(message),void e.RecvCallback(null,e.Job,e.DataKey);v.HttpRequest({url:this.RealtimeUrl,data:{field:a,symbol:[this.Symbol],condition:[],start:0,end:10},type:"post",dataType:"json",async:!0,success:function(t){var a=e.RealtimeDataToHQChartData(t);e.RecvCallback(a,e.Job,e.DataKey)}})},this.DownloadHistoryData=function(t){var e=this,a=this.GetFieldList();if(!a)return message=this.Job.FunctionName+"("+this.Args[0]+") can't support.",this.ErrorCallback(message),void e.RecvCallback(null,e.Job,e.DataKey);v.HttpRequest({url:this.Url,data:{field:a,symbol:[this.Symbol],condition:[],start:0,end:200},type:"post",dataType:"json",async:!0,success:function(t){var a=e.ToHQChartData(t);a&&a.sort(function(t,e){return t.Date-e.Date}),e.RecvCallback(a,e.Job,e.DataKey)}})},this.GetFieldList=function(){switch(this.Args[0]){case 1:return["capital.total","capital.date"];case 7:case"EXCHANGE":return["capital.a","capital.date"];case 9:return["finance.peruprofit","symbol","date"];case 18:return["finance.percreserve","symbol","date"];case 30:return["finance.nprofit","symbol","date"];case 32:return["finance.peruprofit","symbol","date"];case 33:return["finance.persearning","symbol","date"];case 34:return["finance.pernetasset","symbol","date"];case 38:return["finance.persearning","symbol","date"];case 40:return["capital.a","capital.date","symbol","date","price"];case 41:return["capital.total","capital.date","symbol","date","price"];case"CAPITAL":return["capital.a","capital.date","symbol","date"];case"TOTALCAPITAL":return["capital.total","capital.date","symbol","date"];case 42:return["company.releasedate","symbol","date"];case 43:return["dividendyield","symbol","date"];case 100:return["shareholder","symbol","date"];default:return null}},this.RealtimeDataToHQChartData=function(t,e){if(!t.stock||1!=t.stock.length)return null;var a=t.stock[0],i=(e=this.Args[0],a.date);switch(e){case 9:return a.finance?{Date:i,Value:a.finance.peruprofit}:null;case 18:return a.finance?{Date:i,Value:a.finance.percreserve}:null;case 30:return a.finance?{Date:i,Value:a.finance.nprofit}:null;case 32:return a.finance?{Date:i,Value:a.finance.peruprofit}:null;case 33:return a.finance?{Date:i,Value:a.finance.persearning}:null;case 34:return a.finance?{Date:i,Value:a.finance.pernetasset}:null;case 38:return a.finance?{Date:i,Value:a.finance.persearning}:null;case 40:return a.capital?{Date:i,Value:a.capital.a*a.price}:null;case 41:return a.capital?{Date:i,Value:a.capital.total*a.price}:null;case 42:if(!a.company)return null;var r=a.company.releasedate,n=parseInt(r/1e4),o=parseInt(r%1e4/100),s=new Date(n,o-1,r%100),h=new Date;return{Date:i,Value:parseInt((h.getTime()-s.getTime())/864e5)+1};case 43:return a.dividendyield?{Date:i,Value:a.dividendyield.quarter4}:null;case 100:return a.shareholder?{Date:i,Value:a.shareholder.count}:null;case"CAPITAL":return a.capital?{Date:i,Value:a.capital.a/100}:null;case"TOTALCAPITAL":return a.capital?{Date:i,Value:a.capital.total/100}:null}},this.ToHQChartData=function(t){if(!t.stock||1!=t.stock.length)return null;var e=[],a=new c.default,i=t.stock[0],r=this.Args[0];for(var n in i.stockday){var o=i.stockday[n],s=this.ToHQChartItemData(o,r);s&&!a.has(s.Date)&&(e.push(s),a.add(s.Date))}return e},this.ToHQChartItemData=function(t,e){if(!t)return null;var a=t.date;switch(e){case 1:return t.capital?{Date:a,Value:t.capital.total}:null;case 7:case"EXCHANGE":return t.capital?{Date:a,Value:t.capital.a}:null;default:return null}}}ci.SetDomain=function(t,e){ii.SetDomain(t,e)};var Ci={BLACK_ID:1,WHITE_ID:0};function pi(){}function mi(t){this.DivElement=t,this.JSChartContainer,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jsdeallist-drawing",this.CanvasElement.id=P(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&D.Chart.Log("[JSDealChart::JSDealList] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.OnSize=function(){var t=parseInt(this.DivElement.style.height.replace("px",""));this.CanvasElement.height=t,this.CanvasElement.width=parseInt(this.DivElement.style.width.replace("px","")),this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var e=A();this.CanvasElement.height*=e,this.CanvasElement.width*=e,D.Chart.Log("[JSDealChart::OnSize] devicePixelRatio="+window.devicePixelRatio+", height="+this.CanvasElement.height+", width="+this.CanvasElement.width),this.JSChartContainer&&this.JSChartContainer.OnSize&&this.JSChartContainer.OnSize()},this.SetOption=function(t){var e=this.CreateJSDealChartContainer(t);if(!e)return!1;t.OnCreatedCallback&&t.OnCreatedCallback(e),this.JSChartContainer=e,this.DivElement.JSChart=this,t.Symbol?e.ChangeSymbol(t.Symbol):e.Draw()},this.CreateJSDealChartContainer=function(t){var e=new Di(this.CanvasElement);if(e.Create(t),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),Te.IsNonEmptyArray(t.Column)&&e.SetColumn(t.Column),this.SetChartBorder(e,t),null!=t.IsAutoUpdate&&(e.IsAutoUpdate=t.IsAutoUpdate),t.AutoUpdateFrequency>0&&(e.AutoUpdateFrequency=t.AutoUpdateFrequency),Te.IsBool(t.EnableFilter)&&(e.EnableFilter=t.EnableFilter),t.EventCallback)for(var a=0;a<t.EventCallback.length;++a){var i=t.EventCallback[a];e.AddEventCallback(i)}return e},this.SetChartBorder=function(t,e){if(e.Border){e.Border;Te.IsNumber(e.Border.Left)&&(t.Frame.ChartBorder.Left=e.Border.Left),Te.IsNumber(e.Border.Right)&&(t.Frame.ChartBorder.Right=e.Border.Right),Te.IsNumber(e.Border.Top)&&(t.Frame.ChartBorder.Top=e.Border.Top),Te.IsNumber(e.Border.Bottom)&&(t.Frame.ChartBorder.Bottom=e.Border.Bottom);var a=A();t.Frame.ChartBorder.Left*=a,t.Frame.ChartBorder.Right*=a,t.Frame.ChartBorder.Top*=a,t.Frame.ChartBorder.Bottom*=a}},this.ChangeSymbol=function(t,e){this.JSChartContainer&&this.JSChartContainer.ChangeSymbol(t,e)},this.SetColumn=function(t,e){this.JSChartContainer&&this.JSChartContainer.SetColumn(t,e)},this.EnableFilter=function(t,e){this.JSChartContainer&&this.JSChartContainer.EnableFilter(t,e)},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(D.Chart.Log("[JSDealChart:AddEventCallback] obj=",t),this.JSChartContainer.AddEventCallback(t))},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(D.Chart.Log("[JSDealChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))}}function Di(t){this.ClassName="JSDealChartContainer",this.Frame,this.ChartPaint=[],this.ChartSplashPaint=null,this.LoadDataSplashTitle="数据加载中",this.Canvas=t.getContext("2d"),this.ShowCanvas=null,this.Symbol,this.Name,this.TradeDate,this.NetworkFilter,this.Data={DataOffset:0,Data:[]},this.SourceData={DataOffset:0,Data:[]},this.IsShowLastPage=!0,this.mapEvent=new C.default,this.AutoUpdateTimer=null,this.AutoUpdateFrequency=15e3,this.LoadDataSplashTitle="数据加载中",this.UIElement=t,this.LastPoint=new V,this.IsDestroy=!1,this.ChartDestory=function(){this.IsDestroy=!0,this.StopAutoUpdate()},this.EnableFilterData=!1,this.FilterData=function(t){if(!this.EnableFilterData)return t;var e=this.GetEventCallback(w.ON_FILTER_DEAL_DATA);if(!e||!e.Callback)return t;var a={Data:t,Result:[]};return e.Callback(e,a,this),a.Result},this.EnableFilter=function(t,e){this.EnableFilterData=t,this.Data.Data=this.FilterData(this.SourceData.Data),this.Data.DataOffset=0,e&&(1==e.GotoLastPage&&this.GotoLastPage(),1==e.Redraw&&this.Draw())},this.CloneArray=function(t){var e=[];if(!Te.IsNonEmptyArray(t))return e;for(var a=0;a<t.length;++a)e.push(t[a]);return e},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new Le,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.Frame=new function(){this.ChartBorder,this.Canvas,this.BorderColor=ia.DealList.BorderColor,this.LogoTextColor=ia.FrameLogo.TextColor,this.LogoTextFont=ia.FrameLogo.Font,this.ReloadResource=function(t){this.BorderColor=ia.DealList.BorderColor,this.LogoTextColor=ia.FrameLogo.TextColor,this.LogoTextFont=ia.FrameLogo.Font},this.Draw=function(t){var e=_(this.ChartBorder.GetLeft()),a=_(this.ChartBorder.GetTop()),i=_(this.ChartBorder.GetRight()),r=_(this.ChartBorder.GetBottom()),n=i-e,o=r-a;Te.IsNumber(this.BorderLine)?(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(e,a),this.Canvas.lineTo(i,a)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(e,r),this.Canvas.lineTo(i,r)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(e,a),this.Canvas.lineTo(e,r)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(i,a),this.Canvas.lineTo(i,r)),this.Canvas.stroke()):(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(e,a,n,o))},this.DrawLogo=function(){var t=ia.FrameLogo.Text;if(Te.IsString(t)){this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var e=this.ChartBorder.GetLeft()+5,a=this.ChartBorder.GetBottom()-5;this.Canvas.fillText(t,e,a)}}},this.Frame.ChartBorder=new X,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame;var a=new function(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartDealList",this.IsDrawFirst=!1,this.GetEventCallback,this.Data,this.Symbol,this.YClose,this.Open,this.Decimal=2,this.IsSingleTable=!1,this.IsShowHeader=!0,this.SizeChange=!0,this.UpColor=ia.DealList.UpTextColor,this.DownColor=ia.DealList.DownTextColor,this.UnchagneColor=ia.DealList.UnchagneTextColor,this.BorderColor=ia.DealList.BorderColor,this.HeaderFontConfig={Size:ia.DealList.Header.Font.Size,Name:ia.DealList.Header.Font.Name},this.HeaderColor=ia.DealList.Header.Color,this.HeaderMergin={Left:ia.DealList.Header.Mergin.Left,Right:ia.DealList.Header.Mergin.Right,Top:ia.DealList.Header.Mergin.Top,Bottom:ia.DealList.Header.Mergin.Bottom},this.ItemFontConfig={Size:ia.DealList.Row.Font.Size,Name:ia.DealList.Row.Font.Name},this.RowMergin={Top:ia.DealList.Row.Mergin.Top,Bottom:ia.DealList.Row.Mergin.Bottom},this.BarMergin={Top:ia.DealList.Row.BarMergin.Top,Left:ia.DealList.Row.BarMergin.Left,Right:ia.DealList.Row.BarMergin.Right,Bottom:ia.DealList.Row.BarMergin.Bottom},this.HeaderFont=12*A()+"px 微软雅黑",this.ItemFont=15*A()+"px 微软雅黑",this.RowCount=0,this.TableWidth=0,this.TableCount=0,this.HeaderHeight=0,this.Column=[{Type:vi.TIME_ID,Title:"时间",TextAlign:"center",Width:null,TextColor:ia.DealList.FieldColor.Time,MaxText:"88:88:88",Foramt:"HH:MM:SS"},{Type:vi.PRICE_ID,Title:"价格",TextAlign:"center",Width:null,MaxText:"888888.88"},{Type:vi.VOL_ID,Title:"成交",TextAlign:"right",Width:null,TextColor:ia.DealList.FieldColor.Vol,MaxText:"888888"},{Type:vi.BS_ID,Title:"",TextAlign:"right",Width:null,MaxText:"擎"}],this.RectClient={},this.ReloadResource=function(t){this.UpColor=ia.DealList.UpTextColor,this.DownColor=ia.DealList.DownTextColor,this.UnchagneColor=ia.DealList.UnchagneTextColor,this.BorderColor=ia.DealList.BorderColor,this.HeaderFontConfig={Size:ia.DealList.Header.Font.Size,Name:ia.DealList.Header.Font.Name},this.HeaderColor=ia.DealList.Header.Color,this.HeaderMergin={Left:ia.DealList.Header.Mergin.Left,Right:ia.DealList.Header.Mergin.Right,Top:ia.DealList.Header.Mergin.Top,Bottom:ia.DealList.Header.Mergin.Bottom},this.ItemFontConfig={Size:ia.DealList.Row.Font.Size,Name:ia.DealList.Row.Font.Name},this.RowMergin={Top:ia.DealList.Row.Mergin.Top,Bottom:ia.DealList.Row.Mergin.Bottom};for(var e=0;e<this.Column.length;++e){var a=this.Column[e];a.Type==vi.TIME_ID||a.Type==vi.STRING_TIME_ID?a.TextColor=ia.DealList.FieldColor.Time:a.Type==vi.VOL_ID?a.TextColor=ia.DealList.FieldColor.Vol:a.Type==vi.DEAL_ID?a.TextColor=ia.DealList.FieldColor.Deal:a.Type==vi.INDEX_ID&&(a.TextColor=ia.DealList.FieldColor.Index)}},this.SetColumn=function(t){if(Te.IsNonEmptyArray(t)){this.Column=[];for(var e=0;e<t.length;++e){var a=t[e],i=this.GetDefaultColunm(a.Type);if(i){if(a.Title&&(i.Title=a.Title),a.TextAlign&&(i.TextAlign=a.TextAlign),a.TextColor&&(i.TextColor=a.TextColor),a.MaxText&&(i.MaxText=a.MaxText),a.Type==vi.MULTI_BAR_ID||a.Type==vi.CENTER_BAR_ID){if(!Te.IsNumber(a.DataIndex))continue;i.DataIndex=a.DataIndex}this.Column.push(i)}}}},this.GetDefaultColunm=function(t){for(var e=[{Type:vi.TIME_ID,Title:"时间",TextAlign:"center",Width:null,TextColor:ia.DealList.FieldColor.Time,MaxText:"88:88:88",Foramt:"HH:MM:SS"},{Type:vi.PRICE_ID,Title:"价格",TextAlign:"center",Width:null,MaxText:"888888.88"},{Type:vi.VOL_ID,Title:"成交",TextAlign:"right",Width:null,TextColor:ia.DealList.FieldColor.Vol,MaxText:"888888"},{Type:vi.BS_ID,Title:"",TextAlign:"right",Width:null,MaxText:"擎"},{Type:vi.DEAL_ID,Title:"笔数",TextAlign:"right",Width:null,TextColor:ia.DealList.FieldColor.Deal,MaxText:"8888"},{Type:vi.UPDOWN_ID,Title:"涨跌",TextAlign:"right",Width:null,MaxText:"-8888.88"},{Type:vi.STRING_TIME_ID,Title:"时间",TextAlign:"center",Width:null,TextColor:ia.DealList.FieldColor.Time,MaxText:"88:88:88"},{Type:vi.INDEX_ID,Title:"序号",TextAlign:"center",Width:null,TextColor:ia.DealList.FieldColor.Index,MaxText:"88888"},{Type:vi.MULTI_BAR_ID,Title:"柱子",TextAlign:"center",Width:null,TextColor:ia.DealList.FieldColor.BarTitle,MaxText:"888888"},{Type:vi.CENTER_BAR_ID,Title:"柱子2",TextAlign:"center",Width:null,TextColor:ia.DealList.FieldColor.BarTitle,MaxText:"888888"},{Type:vi.CUSTOM_TEXT_ID,Title:"自定义",TextAlign:"center",Width:null,TextColor:ia.DealList.FieldColor.Text,MaxText:"擎擎擎擎擎"}],a=0;a<e.length;++a){var i=e[a];if(i.Type==t)return i}return null},this.Draw=function(){this.SizeChange?this.CalculateSize():this.UpdateCacheData(),this.DrawBorder(),this.DrawHeader(),this.DrawBody(),this.SizeChange=!1},this.UpdateCacheData=function(){this.RectClient.Left=this.ChartBorder.GetLeft(),this.RectClient.Right=this.ChartBorder.GetRight(),this.RectClient.Top=this.ChartBorder.GetTop(),this.RectClient.Bottom=this.ChartBorder.GetBottom(),this.Decimal=Ga(this.Symbol)},this.GetPageSize=function(t){t&&this.CalculateSize();var e=this.TableCount*this.RowCount;return e},this.CalculateSize=function(){this.UpdateCacheData();var t=A();this.HeaderFont=this.HeaderFontConfig.Size*t+"px "+this.HeaderFontConfig.Name,this.ItemFont=this.ItemFontConfig.Size*t+"px "+this.ItemFontConfig.Name,this.Canvas.font=this.ItemFont;for(var e=0,a=0,i=0;i<this.Column.length;++i){var r=this.Column[i];a=this.Canvas.measureText(r.MaxText).width,r.Width=a+4,e+=r.Width}var n=this.RectClient.Right-this.RectClient.Left;this.TableCount=parseInt(n/e),this.IsSingleTable&&(this.TableCount=1),this.TableWidth=n/this.TableCount,this.HeaderHeight=this.GetFontHeight(this.HeaderFont,"擎")+this.HeaderMergin.Top+this.HeaderMergin.Bottom,this.IsShowHeader||(this.HeaderHeight=0),this.RowHeight=this.GetFontHeight(this.ItemFont,"擎")+this.HeaderMergin.Top+this.HeaderMergin.Bottom,this.RowCount=parseInt((this.RectClient.Bottom-this.RectClient.Top-this.HeaderHeight)/this.RowHeight)},this.DrawHeader=function(){if(this.IsShowHeader){var t=this.RectClient.Left+this.HeaderMergin.Left,e=this.RectClient.Top,a=e+this.HeaderMergin.Top+(this.HeaderHeight-this.HeaderMergin.Top-this.HeaderMergin.Bottom)/2;this.Canvas.font=this.HeaderFont,this.Canvas.fillStyle=this.HeaderColor;for(var i=0,r=0;i<this.TableCount;++i){var n=t+this.TableWidth*i,o=n;for(r=0;r<this.Column.length;++r){var s=this.Column[r],h=s.Width;r==this.Column.length-1&&(h=this.TableWidth-(o-n)-this.HeaderMergin.Right-this.HeaderMergin.Left);var l=o;"center"==s.TextAlign?(l=o+h/2,this.Canvas.textAlign="center"):"right"==s.TextAlign?(l=o+h,this.Canvas.textAlign="right"):this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(s.Title,l,a),o+=s.Width}}}},this.DrawBorder=function(){var t=_(this.RectClient.Left),e=_(this.RectClient.Right),a=_(this.RectClient.Top),i=_(this.RectClient.Bottom);this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),this.IsShowHeader&&(this.Canvas.moveTo(t,a+this.HeaderHeight),this.Canvas.lineTo(e,a+this.HeaderHeight));for(var r=_(t+this.TableWidth),n=1;n<this.TableCount;++n)this.Canvas.moveTo(r,a),this.Canvas.lineTo(r,i),r=_(r+this.TableWidth);this.Canvas.stroke()},this.DrawBody=function(){if(this.Data&&Te.IsNonEmptyArray(this.Data.Data)){this.Canvas.font=this.ItemFont;for(var t=this.RectClient.Top+this.HeaderHeight,e=this.RectClient.Left+this.HeaderMergin.Left,a=this.Data.Data.length,i=this.Data.DataOffset,r=0,n=0;r<this.TableCount;++r){var o=e+this.TableWidth*r,s=o,h=t;for(n=0;n<this.RowCount&&i<a;++n,++i){var l=this.Data.Data[i];this.DrawRow(l,s,h,i),h+=this.RowHeight}}}},this.DrawRow=function(t,e,a,i,r){for(var n=e,o=e+this.TableWidth,s=0;s<this.Column.length;++s){var h=this.Column[s],l=h.TextColor,u=null,c=h.Width,f=h.TextAlign;if(e+c>o)break;if(s==this.Column.length-1&&(c=this.TableWidth-(e-n)-this.HeaderMergin.Right-this.HeaderMergin.Left),h.Type==vi.TIME_ID)u=Te.FormatTimeString(t.Time,h.Foramt);else if(h.Type==vi.STRING_TIME_ID)u=t.StrTime;else if(h.Type==vi.PRICE_ID)l=t.Price>this.YClose?this.UpColor:t.Price<this.YClose?this.DownColor:this.UnchagneColor,u=t.Price.toFixed(this.Decimal);else if(h.Type==vi.VOL_ID)u=Te.FormatValueString(t.Vol,0),l=this.GetVolColor(h,t);else if(h.Type==vi.DEAL_ID)u=Te.FormatValueString(t.Deal,0);else if(h.Type==vi.BS_ID)1==t.BS?(u="B",l=this.UpColor):2==t.BS&&(u="S",l=this.DownColor);else if(h.Type==vi.UPDOWN_ID){if(Te.IsNumber(this.YClose)){var d=t.Price-this.YClose;u=d.toFixed(2),l=d>0?this.UpColor:d<0?this.DownColor:this.UnchagneColor}}else if(h.Type==vi.INDEX_ID)u=(i+1).toString();else if(h.Type==vi.MULTI_BAR_ID){var C={Left:e,Top:a,Width:c,Height:this.RowHeight};this.DrawMultiBar(h,t,C)}else if(h.Type==vi.CENTER_BAR_ID){var C={Left:e,Top:a,Width:c,Height:this.RowHeight};this.DrawCenterBar(h,t,C)}else if(h.Type==vi.CUSTOM_TEXT_ID){var p={Text:null,TextColor:null,TextAlign:null},C={Left:e,Top:a,Width:c,Height:this.RowHeight};this.DrawCustomText(h,t,C,i,s,p)&&(p.Text&&(u=p.Text),p.TextColor&&(l=p.TextColor),p.TextAlign&&(f=p.TextAlign))}this.DrawItemText(u,l,f,e,a,c),e+=h.Width}},this.DrawItemText=function(t,e,a,i,r,n){var o=i;"center"==a?(o=i+n/2,this.Canvas.textAlign="center"):"right"==a?(o=i+n,this.Canvas.textAlign="right"):this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=e,t&&this.Canvas.fillText(t,o,r+this.RowHeight/2)},this.DrawMultiBar=function(t,e,a){if(!e.Source||!Te.IsNonEmptyArray(e.Source))return!1;var i=e.Source[t.DataIndex];if(!i)return!1;if(!Te.IsNonEmptyArray(i.Value))return!1;for(var r=a.Width-this.BarMergin.Left-this.BarMergin.Right,n=a.Left+this.BarMergin.Left,o=a.Top+this.RowMergin.Top+this.BarMergin.Top,s=a.Height-this.RowMergin.Top-this.RowMergin.Bottom-this.BarMergin.Top-this.BarMergin.Bottom,h=n+r,l=0;l<i.Value.length;++l){var u=i.Value[l];if(!(u<=0)){if(n>=h)break;var c=r*u;c<1&&(c=1),n+c>h&&(c=h-n);var f=l;Te.IsNonEmptyArray(i.Color)&&l<i.Color.length&&(f=i.Color[l]),this.Canvas.fillStyle=ia.DealList.FieldColor.Bar[f],this.Canvas.fillRect(n,o,c,s),n+=c}}return!0},this.DrawCenterBar=function(t,e,a){if(!e.Source||!Te.IsNonEmptyArray(e.Source))return!1;var i=e.Source[t.DataIndex];if(!i)return!1;if(!Te.IsNonEmptyArray(i.Value))return!1;for(var r=(a.Width-this.BarMergin.Left-this.BarMergin.Right)/2,n=a.Left+this.BarMergin.Left,o=n+r,s=a.Top+this.RowMergin.Top+this.BarMergin.Top,h=a.Height-this.RowMergin.Top-this.RowMergin.Bottom-this.BarMergin.Top-this.BarMergin.Bottom,l=0;l<i.Value.length&&l<2;++l){var u=i.Value[l];if(!(u<=0)){u>1&&(u=1);var c=r*u;c<1&&(c=1);var f=l;Te.IsNonEmptyArray(i.Color)&&l<i.Color.length&&(f=i.Color[l]),this.Canvas.fillStyle=ia.DealList.FieldColor.Bar[f],0==l?this.Canvas.fillRect(o,s,-c,h):this.Canvas.fillRect(o,s,c,h)}}},this.DrawCustomText=function(t,e,a,i,r,n){var o=this.GetEventCallback(w.ON_DRAW_DEAL_TEXT);if(!o||!o.Callback)return!1;var s={Data:e,DataIndex:i,ColumnIndex:r,ColumnInfo:t,Out:{Text:null,TextColor:null,TextAlign:null}};return o.Callback(o,s,this),!!s.Out.Text&&(n.Text=s.Out.Text,s.Out.TextColor&&(n.TextColor=s.Out.TextColor),s.Out.TextAlign&&(n.TextAlign=s.Out.TextAlign),!0)},this.GetVolColor=function(t,e){var a=this.GetEventCallback(w.ON_DRAW_DEAL_VOL_COLOR);if(a&&a.Callback){var i={Data:e,TextColor:null};if(a.Callback(a,i,this),i.TextColor)return i.TextColor}return t.TextColor},this.GetFontHeight=function(t,e){return O(this.Canvas,t,e)}};a.Frame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ChartPaint[0]=a,t&&(Te.IsBool(t.IsSingleTable)&&(a.IsSingleTable=t.IsSingleTable),Te.IsBool(t.IsShowHeader)&&(a.IsShowHeader=t.IsShowHeader),Te.IsBool(t.IsShowLastPage)&&(this.IsShowLastPage=t.IsShowLastPage),Te.IsNumber(t.BorderLine)&&(this.Frame.BorderLine=t.BorderLine));var i=!0,r=!0;t&&(!1===t.KeyDown&&(i=!1,D.Chart.Log("[JSDealChartContainer::Create] not register keydown event.")),!1===t.Wheel&&(r=!1,D.Chart.Log("[JSDealChartContainer::Create] not register wheel event."))),i&&this.UIElement.addEventListener("keydown",function(t){e.OnKeyDown(t)},!0),r&&this.UIElement.addEventListener("wheel",function(t){e.OnWheel(t)},!0)},this.Draw=function(){if(!(this.UIElement.width<=0||this.UIElement.height<=0)){this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var t=A();if(this.Canvas.lineWidth=t,this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return this.Frame.Draw({IsEnableSplash:this.ChartSplashPaint.IsEnableSplash}),void this.ChartSplashPaint.Draw();this.Frame.Draw(),this.Frame.DrawLogo();for(var e=0;e<this.ChartPaint.length;++e){(a=this.ChartPaint[e]).IsDrawFirst&&a.Draw()}for(e=0;e<this.ChartPaint.length;++e){var a;(a=this.ChartPaint[e]).IsDrawFirst||a.Draw()}}},this.ChangeSymbol=function(t,e){this.Symbol=t,this.Data=null,this.SourceData=null;var a=this.ChartPaint[0];a&&(a.Data=null),e&&Te.IsNumber(e.TradeDate)&&(this.TradeDate=e.TradeDate),this.Symbol?this.RequestDealData():this.Draw()},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=null)},this.AutoUpdateEvent=function(t,e){var a=t?w.RECV_START_AUTOUPDATE:w.RECV_STOP_AUTOUPDATE;if(this.mapEvent.has(a)){var i=this,r=this.mapEvent.get(a),n={Stock:{Symbol:this.Symbol,Name:this.Name,DayCount:this.DayCount},Explain:e};t&&(n.Callback=function(t){i.RecvDealUpdateData(t)}),r.Callback(r,n,this)}},this.RequestDealData=function(){this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw();var t=this;if(this.NetworkFilter){var e={Name:"JSDealChartContainer::RequestDealData",Explain:"成交明细",Request:{Data:{symbol:t.Symbol,tradeDate:t.TradeDate}},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvDealData(e),t.AutoUpdateEvent(!0,"JSDealChartContainer::RequestDealData"),t.AutoUpdate()}),1==e.PreventDefault)return}var a=ia.CacheDomain+"/cache/dealday/today/"+this.Symbol+".json";v.HttpRequest({url:a,type:"get",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvDealData(e),t.AutoUpdate(1)},error:function(e,a){t.ChartSplashPaint.EnableSplash(!1),t.AutoUpdate()}})},this.RecvDealData=function(t){var e=Di.JsonDataToDealData(t);this.SourceData={DataOffset:0,Data:e},this.Data={DataOffset:0,Data:this.FilterData(this.CloneArray(e))},this.Symbol=t.symbol,this.Name=t.name;var a=this.ChartPaint[0];if(a.Data=this.Data,a.Symbol=this.Symbol,a.YClose=t.yclose,a.Open=t.open,this.IsShowLastPage){var i=a.GetPageSize(!0),r=e.length-i;r<0&&(r=0),this.Data.DataOffset=r}this.Draw()},this.RequestDealUpdateData=function(){var t=this;if(this.NetworkFilter){var e={Name:"JSDealChartContainer::RequestDealUpdateData",Explain:"增量成交明细",Request:{Data:{symbol:t.Symbol}},Self:this,PreventDefault:!1};if(this.Data&&Te.IsNonEmptyArray(this.Data.Data)){var a=this.Data.Data[this.Data.Data.length-1];e.LastItem=a}if(this.NetworkFilter(e,function(e){t.RecvDealUpdateData(e),t.AutoUpdate()}),1==e.PreventDefault)return}},this.RecvDealUpdateData=function(t){var e=Di.JsonDataToDealData(t);Te.IsNonEmptyArray(e)&&(1===t.UpdateType?(this.SourceData.Data=e,this.Data.Data=this.FilterData(this.CloneArray(e)),this.Data.DataOffset>=this.Data.Data.length&&(this.Data.DataOffset=0)):(this.AddDealData(this.SourceData,e),this.AddDealData(this.Data,this.FilterData(e))),this.Draw())},this.AddDealData=function(t,e){if(t.Data){var a=0,i=this.ChartPaint[0];i&&(a=i.GetPageSize());for(var r=0;r<e.length;++r)t.Data.push(e[r]),t.DataOffset+a<t.Data.length&&++t.DataOffset}else t.Data=e},this.AutoUpdate=function(t){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var e=this,a=Ea.GetMarketStatus(this.Symbol);if(0!=a&&3!=a){var i=this.AutoUpdateFrequency;1==a?this.AutoUpdateTimer=setTimeout(function(){e.AutoUpdate()},i):2==a&&(this.AutoUpdateTimer=setTimeout(function(){e.RequestDealUpdateData()},i))}}},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"JSDealChartContainer::StopAutoUpdate"),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){return this.mapEvent.has(t)?this.mapEvent.get(t):null},this.OnSize=function(){if(this.Frame){this.SetSizeChange(!0);var t=this.ChartPaint[0];if(t&&this.Data&&this.Data.DataOffset>0&&Te.IsNonEmptyArray(this.Data.Data))t.GetPageSize(!0)+this.Data.DataOffset>=this.Data.Data.length&&this.GotoLastPage();this.Draw()}},this.SetSizeChange=function(t){var e=this.ChartPaint[0];e&&(e.SizeChange=t)},this.OnWheel=function(t){if(D.Chart.Log("[JSDealChartContainer::OnWheel]",t),(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash)&&this.Data&&Te.IsNonEmptyArray(this.Data.Data)){var e=t.clientX-this.UIElement.getBoundingClientRect().left,a=t.clientY-this.UIElement.getBoundingClientRect().top;if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),this.Canvas.isPointInPath(e,a))if(this.ChartPaint[0]){var i=t.wheelDelta;Te.IsObjectExist(t.wheelDelta)||(i=-.01*t.deltaY),i<0?this.GotoNextPage()&&this.Draw():i>0&&this.GotoPreviousPage()&&this.Draw(),t.preventDefault?t.preventDefault():t.returnValue=!1}}},this.OnKeyDown=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){switch(t.keyCode?t.keyCode:t.which){case 38:this.GotoPreviousPage()&&this.Draw();break;case 40:this.GotoNextPage()&&this.Draw()}t.preventDefault?t.preventDefault():t.returnValue=!1}},this.GotoNextPage=function(){if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return!1;var t=this.ChartPaint[0];if(!t)return!1;var e=t.GetPageSize();if(e>this.Data.Data.length)return!1;var a=this.Data.DataOffset+e;return a+e!=this.Data.Data.length-1&&(a+e>this.Data.Data.length?this.Data.DataOffset=this.Data.Data.length-e:this.Data.DataOffset=a,!0)},this.GotoPreviousPage=function(){if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return!1;var t=this.ChartPaint[0];if(!t)return!1;if(this.Data.DataOffset<=0)return!1;var e=t.GetPageSize(),a=this.Data.DataOffset;return(a-=e)<0&&(a=0),this.Data.DataOffset=a,!0},this.GotoLastPage=function(){var t=this.ChartPaint[0];if(t){var e=t.GetPageSize(!0),a=this.Data.Data.length-e;a<0&&(a=0),this.Data.DataOffset=a}},this.SetColumn=function(t,e){var a=this.ChartPaint[0];a&&(a.SetColumn(t),a.SizeChange=!0,e&&e.Redraw&&this.Draw())},this.ReloadResource=function(t){this.Frame.ReloadResource(t);for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}t&&t.Redraw&&(this.SetSizeChange(!0),this.Draw())}}pi.GetStyleConfig=function(t){switch(t){case Ci.BLACK_ID:return{BGColor:"rgb(0,0,0)",TooltipBGColor:"rgb(255, 255, 255)",TooltipAlpha:.92,SelectRectBGColor:"rgba(1,130,212,0.06)",UpBarColor:"rgb(238,21,21)",DownBarColor:"rgb(25,158,0)",UnchagneBarColor:"rgb(228,228,228)",EmptyBarBGColor:"rgb(0,0,0)",HLCArea:{HighLineColor:"rgb(238,21,21)",LowLineColor:"rgb(25,158,0)",CloseLineColor:"rgb(156,156,156)",LineWidth:2*A(),UpAreaColor:"rgba(238,21,21, 0.3)",DownAreaColor:"rgba(25,158,0, 0.3)"},Minute:{VolBarColor:null,PriceColor:"rgb(25,180,231)",AreaPriceColor:"rgba(63,158,255,.3)",AvPriceColor:"rgb(255,236,0)",PositionColor:"rgb(218,165,32)",VolTitleColor:"rgb(190,190,190)",Before:{BGColor:"rgba(105,105,105,0.5)",AvPriceColor:"rgb(248,248,255)",CloseIcon:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"}},After:{BGColor:"rgba(105,105,105,0.5)",AvPriceColor:"rgb(248,248,255)"}},DefaultTextColor:"rgb(101,104,112)",DefaultTextFont:14*A()+"px 微软雅黑",TitleFont:13*A()+"px 微软雅黑",IndexTitleColor:"rgb(190, 190 ,190)",IndexTitleBGColor:"rgb(0,0,0)",IndexTitleBorderColor:"rgb(211, 211, 211)",IndexTitleBorderMoveOnColor:"rgb(30,144,255)",UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(190, 190 ,190)",CloseLineColor:"rgb(178,34,34)",Title:{TradeIndexColor:"rgb(105,105,105)",ColorIndexColor:"rgb(112,128,144)",VolColor:"rgb(190, 190 ,190)",AmountColor:"rgb(190, 190 ,190)",DateTimeColor:"rgb(190, 190 ,190)",SettingColor:"rgb(190, 190 ,190)",NameColor:"rgb(190, 190 ,190)",TurnoverRateColor:"rgb(101,104,112)",PositionColor:"rgb(101,104,112)"},FrameBorderPen:"rgba(236,236,236,0.13)",MultiDayBorderPen:"rgba(236,236,236,0.5)",FrameSplitPen:"rgba(236,236,236,0.13)",FrameSplitTextColor:"rgb(101,104,112)",FrameSplitTextFont:12*A()+"px 微软雅黑",FrameTitleBGColor:"rgb(0,0,0)",OverlayIndexTitleBGColor:"rgba(0,0,0,0.7)",Frame:{XBottomOffset:1*A(),PercentageText:{PriceColor:"rgb(101,104,112)",PercentageColor:"rgb(101,104,112)",SplitColor:"rgb(101,104,112)",Font:14*A()+"px 微软雅黑"}},FrameLatestPrice:{TextColor:"rgb(255,255,255)",UpBarColor:"rgb(238,21,21)",DownBarColor:"rgb(25,158,0)",UnchagneBarColor:"rgb(190,190,190)",BGAlpha:.6,EmptyBGColor:"rgb(0,0,0)"},CorssCursorBGColor:"rgb(43,54,69)",CorssCursorTextColor:"rgb(255,255,255)",CorssCursorTextFont:12*A()+"px 微软雅黑",CorssCursorHPenColor:"rgb(130,130,130)",CorssCursorVPenColor:"rgb(130,130,130)",CorssCursor:{RightButton:{BGColor:"rgb(43,54,69)",PenColor:"rgb(255,255,255)",Icon:{Text:"",Color:"rgb(255,255,255)",Family:"iconfont",Size:18}}},OrderFlow:{UpColor:{BG:"rgb(223,191,180)",Border:"rgb(196,84,86)"},DownColor:{BG:"rgb(176,212,184)",Border:"rgb(66,94,74)"},UnchagneColor:{BG:"rgb(216,221,177)",Border:"rgb(209,172,129)"},Text:{Color:"rgb(248,248,255)",Family:"Arial",FontMaxSize:16,MaxValue:"8888"},Line:{UpDownColor:"rgb(220,220,220)",MiddleColor:"rgb(211,211,211)"}},KLine:{MaxMin:{Font:12*A()+"px 微软雅黑",Color:"rgb(255,250,240)",RightArrow:"→",LeftArrow:"←",HighYOffset:0,LowYOffset:0},Info:{Investor:{ApiUrl:"/API/NewsInteract",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#1c65db"}},Announcement:{ApiUrl:"/API/ReportList",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#f5a521"},IconFont2:{Family:"iconfont",Text:"",HScreenText:"",Color:"#ed7520"}},Pforecast:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#986cad"}},Research:{ApiUrl:"/API/InvestorRelationsList",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#19b1b7"}},BlockTrading:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#f39f7c"}},TradeDetail:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#b22626"}}},NumIcon:{Color:"rgb(251,80,80)",Family:"iconfont",Text:["","","","","","","","","","","","","","","","","","","","",""]},TradeIcon:{Family:"iconfont",Buy:{Color:"rgb(255,15,4)",Text:"",HScreenText:""},Sell:{Color:"rgb(64,122,22)",Text:"",HScreenText:""}}},VirtualKLine:{Color:"rgb(119,136,153)",LineDash:[2,2]},Index:{LineColor:["rgb(255,189,09)","rgb(22,198,255)","rgb(174,35,161)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],NotSupport:{Font:14*A()+"px 微软雅黑",TextColor:"rgb(250,250,250)"}},ColorArray:["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],Buttons:{CloseOverlayIndex:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},CloseWindow:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},ChangeIndex:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},OverlayIndex:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},ModifyIndexParam:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},MaxMinWindow:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},TitleWindow:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},ExportData:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"}},DrawPicture:{LineColor:["rgb(41,98,255)"],PointColor:["rgb(41,98,255)","rgb(89,135,255)","rgb(0,0,0)"]},TooltipPaint:{BGColor:"rgba(20,20,20,0.8)",BorderColor:"rgb(210,210,210)",TitleColor:"rgb(210,210,210)",TitleFont:13*A()+"px 微软雅黑",DateTimeColor:"rgb(210,210,210)",VolColor:"rgb(255, 185, 15)",AmountColor:"rgb(210,210,210)"},PCTooltipPaint:{BGColor:"rgba(20,20,20,0.8)",BorderColor:"rgb(210,210,210)",TitleColor:"rgb(210,210,210)",TitleFont:12*A()+"px 微软雅黑",DateTimeColor:"rgb(210,210,210)",VolColor:"rgb(161,154,3)",AmountColor:"rgb(161,154,3)"},MinuteInfo:{TextColor:"rgb(84,143,255)",Font:14*A()+"px 微软雅黑",PointColor:"rgb(38,113,254)",LineColor:"rgb(120,167,255)",TextBGColor:"rgba(255,255,255,1)"},DepthMapPaint:{LineColor:"rgba(255,185,15)",AreaColor:"rgba(255,185,15,0.8)",TextColor:"rgba(255,255,255)",TextBGColor:"rgb(43,54,69)"},KLineYAxisBGPaint:{Font:12*A()+"px 微软雅黑",TextColor:"rgb(255,255,255)",LineColor:"rgb(255,255,255)"},StockChip:{InfoColor:"rgb(255,255,255)",DayInfoColor:"rgb(0,0,0)"},DepthChart:{BidColor:{Line:"rgb(82,176,123)",Area:"rgba(82,176,123,0.5)"},AskColor:{Line:"rgb(207,76,89)",Area:"rgba(207,76,89, 0.5)"},LineWidth:4},DepthCorss:{BidColor:{Line:"rgb(82,176,123)"},AskColor:{Line:"rgb(207,76,89)"},LineWidth:2,LineDash:[3,3],Tooltip:{BGColor:"rgba(54,54,54, 0.8)",TextColor:"rgb(203,215,224)",Border:{Top:5,Left:20,Bottom:5,Center:5},Font:14*A()+"px 微软雅黑",LineHeight:16}},ChartDrawVolProfile:{BGColor:"rgba(244,250,254,0.3)",BorderColor:"rgba(255,255,255)",VolLineColor:"rgb(232,5,9)",UpVolColor:"rgba(103,179,238, 0.24)",DownVolColor:"rgba(237,208,105,0.24)",AreaUpColor:"rgb(103,179,238,0.7)",AreaDonwColor:"rgba(237,208,105,0.7)",Text:{Color:"rgb(0,0,0)",Family:"Arial",FontMaxSize:18,FontMinSize:6}},RectSelect:{LineColor:"rgb(115,83,64)",LineWidth:1*A(),LineDotted:[3,3],AreaColor:"rgba(26,13,7,0.5)"},SelectedChart:{LineWidth:1,LineColor:"rgb(55,100,100)",Radius:4,MinSpace:200,BGColor:"rgb(255,255,255)"},DragMovePaint:{TextColor:"rgb(255,255,255)"},DealList:{BorderColor:"rgb(38,38,41)",Header:{Color:"RGB(245,245,245)",Mergin:{Left:5,Right:5,Top:4,Bottom:2},Font:{Size:12,Name:"微软雅黑"}},Row:{Mergin:{Top:2,Bottom:2},Font:{Size:15,Name:"微软雅黑"},BarMergin:{Top:2,Left:3,Right:3,Bottom:2}},FieldColor:{Vol:"rgb(192,192,0)",Time:"rgb(245,245,245)",Deal:"rgb(111,128,112)",Index:"rgb(245,245,245)",BarTitle:"rgb(245,245,245)",Text:"rgb(245,245,245)"},UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(228,228,228)"},Report:{BorderColor:"rgb(38,38,41)",SelectedColor:"rgb(49,48,56)",Header:{Color:"RGB(245,245,245)",SortColor:"rgb(255,0,0)",Mergin:{Left:5,Right:5,Top:4,Bottom:2},Font:{Size:12,Name:"微软雅黑"}},Item:{Mergin:{Top:2,Bottom:0,Left:5,Right:5},Font:{Size:15,Name:"微软雅黑"},BarMergin:{Top:2,Left:3,Right:3,Bottom:2},NameFont:{Size:14,Name:"微软雅黑"},SymbolFont:{Size:12,Name:"微软雅黑"}},FixedItem:{Font:{Size:15,Name:"微软雅黑"}},LimitBorder:{Color:"rgb(64,64,64)",Mergin:{Top:1,Bottom:1,Left:0,Right:0}},FieldColor:{Index:"rgb(245,245,245)",Symbol:"rgb(255,255,255)",Name:"rgb(255,255,255)",Amount:"rgb(2,226,244)",Vol:"rgb(192,192,0)",BarTitle:"rgb(245,245,245)",Text:"rgb(245,245,245)"},CloseLine:{CloseColor:"rgb(30,144,255)",YCloseColor:"rgba(220,220,220,0.5)",AreaColor:"rgba(220,220,220,0.2)"},KLine:{UpColor:"rgb(255,0,0)",DownColor:"rgb(0,128,0)",UnchagneColor:"rgb(240,240,240)",DataWidth:16,DistanceWidth:3},UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(228,228,228)",Tab:{Font:{Size:12,Name:"微软雅黑"},ScrollBarWidth:100,ButtonColor:"rgb(13,12,15)",BarColor:"rgb(48,48,48)",BorderColor:"rgb(48,48,48)",TabTitleColor:"rgb(153,153,153)",TabSelectedTitleColor:"rgb(255,255,255)",TabSelectedBGColor:"rgb(13,12,15)",TabMoveOnTitleColor:"rgb(255,255,255)",TabBGColor:"rgb(28,28,31)"},PageInfo:{Font:{Size:15,Name:"微软雅黑"},TextColor:"rgb(255,255,255)",BGColor:"rgba(49,48,56,0.8)",Mergin:{Left:5,Right:5,Top:4,Bottom:2}},DragRow:{Color:"rgba(255,250, 250,0.8)",TextColor:"rgba(0,0, 0, 0.8)",MoveRowColor:"rgb(135,206,250)",SrcRowColor:"rgb(49,48,56)"}},ScrollBar:{BorderColor:"rgb(38,38,41)",XSplitTextColor:"rgb(240,240,240)",XSplitLineColor:"rgb(38,38,41)",Slider:{DateFont:14*A()+"px 微软雅黑",DateColor:"rgb(240,240,240)",BarColor:"rgb(105,105,105)",BarAreaColor:"rgba(128,128,128,0.65)"},BGChart:{Color:"rgb(105,113,125)",LineWidth:1,AreaColor:"rgba(24,28,42,0.5)"}}};case Ci.WHITE_ID:return new aa;default:return null}},mi.Init=function(t){var e=new mi(t);return e.OnSize(),e},Di.JsonDataToDealData=function(t){t.symbol;var e=[];if(!Te.IsNonEmptyArray(t.detail))return e;for(var a=0;a<t.detail.length;++a){var i=t.detail[a],r={Time:i[0],Price:i[1],Vol:i[2],BS:i[4],Amount:i[3]};r.Source=i,i[5]&&(r.StrTime=i[5]),i[6]&&(r.ID=i[6]),e.push(r)}return e};var vi={TIME_ID:0,PRICE_ID:1,VOL_ID:2,DEAL_ID:3,BS_ID:4,UPDOWN_ID:5,STRING_TIME_ID:6,INDEX_ID:7,MULTI_BAR_ID:8,CENTER_BAR_ID:9,CUSTOM_TEXT_ID:10};function gi(t){this.DivElement=t,this.JSChartContainer,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jsreportlist-drawing",this.CanvasElement.id=P(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&D.Chart.Log("[JSReportChart::JSReportChart] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.OnSize=function(){var t=parseInt(this.DivElement.style.height.replace("px",""));this.CanvasElement.height=t,this.CanvasElement.width=parseInt(this.DivElement.style.width.replace("px","")),this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var e=A();this.CanvasElement.height*=e,this.CanvasElement.width*=e,D.Chart.Log("[JSReportChart::OnSize] devicePixelRatio="+window.devicePixelRatio+", height="+this.CanvasElement.height+", width="+this.CanvasElement.width),this.JSChartContainer&&this.JSChartContainer.OnSize&&this.JSChartContainer.OnSize()},this.SetOption=function(t){var e=this.CreateJSReportChartContainer(t);if(!e)return!1;t.OnCreatedCallback&&t.OnCreatedCallback(e),this.JSChartContainer=e,this.DivElement.JSChart=this,t.Symbol&&(e.Symbol=t.Symbol),t.Name&&(e.Name=t.Name);var a={Callback:null};e.Symbol&&(a.Callback=function(){e.RequestMemberListData()}),e.RequestStockListData(a)},this.CreateJSReportChartContainer=function(t){var e=new function(t){this.ClassName="JSReportChartContainer",this.Frame,this.ChartPaint=[],this.ChartSplashPaint=null,this.LoadDataSplashTitle="数据加载中",this.SplashTitle={StockList:"下载码表中.....",MemberList:"下载成分中....."},this.Canvas=t.getContext("2d"),this.Tooltip=document.createElement("div"),this.Tooltip.className="jsreport-tooltip",this.Tooltip.style.background=ia.TooltipBGColor,this.Tooltip.style.opacity=ia.TooltipAlpha,this.Tooltip.style["pointer-events"]="none",this.Tooltip.id=P(),t.parentNode.appendChild(this.Tooltip),this.Symbol,this.Name,this.NetworkFilter,this.Data={XOffset:0,YOffset:0,Data:[]},this.SourceData={Data:[]},this.BlockData=new C.default,this.MapStockData=new C.default,this.FixedRowData={Data:[],Type:0,Symbol:[]},this.FlashBG=new C.default,this.FlashBGTimer=null,this.GlobalOption={FlashBGCount:0},this.SortInfo={Field:-1,Sort:0},this.DragRow,this.DragColumnWidth,this.EnableDragRow=!1,this.DragRowType=0,this.AutoDragScrollTimer=null,this.EnablePageScroll=!1,this.DragMove,this.DragHeader,this.EnableDragHeader=!1,this.mapEvent=new C.default,this.AutoUpdateTimer=null,this.AutoUpdateFrequency=15e3,this.DelayUpdateTimer=null,this.DelayUpdateFrequency=500,this.UIElement=t,this.LastPoint=new V,this.IsOnTouch=!1,this.TouchDrag,this.TouchMoveMinAngle=70,this.YStepPixel=5*A(),this.XStepPixel=10*A(),this.PageUpDownCycle=!0,this.DragPageCycle=!0,this.DragXScroll=null,this.IsDestroy=!1,this.ChartDestory=function(){this.IsDestroy=!0,this.StopAutoUpdate()},this.StopAutoDragScrollTimer=function(){D.Chart.Log("[JSReportChartContainer::StopAutoDragScrollTimer] stop "),this.EnablePageScroll=!1,null!=this.AutoDragScrollTimer&&(clearTimeout(this.AutoDragScrollTimer),this.AutoDragScrollTimer=null)},this.AutoScrollPage=function(t){var e=this;this.AutoDragScrollTimer=setTimeout(function(){e.ChartOperator_Temp_ScrollPage(t)},300)},this.ChartOperator_Temp_ScrollPage=function(t){if(this.EnablePageScroll){var e=this.GetReportChart();if(e){if(t>0){var a=e.GetCurrentPageStatus();if(a.IsEnd)return;this.MoveYOffset(t,!1),++t}else{if(!(t<0))return;if(this.Data.YOffset<=0)return;this.MoveYOffset(t,!1),--t}this.Draw(),this.EnablePageScroll&&this.AutoScrollPage(t)}}},this.ClearFixedRowData=function(){this.FixedRowData.Data=[],this.FixedRowData.Symbol=[]},this.SetFixedRowCount=function(t){var e=this.GetReportChart();e&&(e.FixedRowCount=t)},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new Le,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.IsEnableSplash=!0,this.Frame=new function(){this.ChartBorder,this.Canvas,this.BorderLine=null,this.BorderColor=ia.Report.BorderColor,this.LogoTextColor=ia.FrameLogo.TextColor,this.LogoTextFont=ia.FrameLogo.Font,this.ReloadResource=function(t){this.BorderColor=ia.Report.BorderColor,this.LogoTextColor=ia.FrameLogo.TextColor,this.LogoTextFont=ia.FrameLogo.Font},this.Draw=function(){var t=_(this.ChartBorder.GetLeft()),e=_(this.ChartBorder.GetTop()),a=_(this.ChartBorder.GetRight()),i=_(this.ChartBorder.GetBottom()),r=a-t,n=i-e;Te.IsNumber(this.BorderLine)?(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(a,e)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(t,i),this.Canvas.lineTo(a,i)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(t,i)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(a,e),this.Canvas.lineTo(a,i)),this.Canvas.stroke()):(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(t,e,r,n))},this.DrawLogo=function(){var t=ia.FrameLogo.Text;if(Te.IsString(t)){this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="right",this.Canvas.textBaseline="bottom";var e=this.ChartBorder.GetRight()-30,a=this.ChartBorder.GetBottom()-5;this.Canvas.fillText(t,e,a)}}},this.Frame.ChartBorder=new X,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame;var a=new function(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartReport",this.UIElement,this.IsDrawFirst=!1,this.GetEventCallback,this.GetStockDataCallback,this.GetFlashBGDataCallback,this.GetBlockDataCallback,this.Data,this.FixedRowData,this.SortInfo,this.FixedColumn=2,this.FixedRowCount=0,this.IsShowHeader=!0,this.SizeChange=!0,this.SelectedModel=0,this.SelectedRow=-1,this.SelectedFixedRow=-1,this.IsDrawBorder=1,this.ShowSymbol=[],this.DragRow,this.Tab,this.GlobalOption,this.UpColor=ia.Report.UpTextColor,this.DownColor=ia.Report.DownTextColor,this.UnchagneColor=ia.Report.UnchagneTextColor,this.BorderColor=ia.Report.BorderColor,this.SelectedColor=ia.Report.SelectedColor,this.HeaderFontConfig={Size:ia.Report.Header.Font.Size,Name:ia.Report.Header.Font.Name},this.HeaderColor=ia.Report.Header.Color,this.SortColor=ia.Report.Header.SortColor,this.HeaderMergin={Left:ia.Report.Header.Mergin.Left,Right:ia.Report.Header.Mergin.Right,Top:ia.Report.Header.Mergin.Top,Bottom:ia.Report.Header.Mergin.Bottom},this.ItemFontConfig={Size:ia.Report.Item.Font.Size,Name:ia.Report.Item.Font.Name},this.ItemFixedFontConfg={Size:ia.Report.FixedItem.Font.Size,Name:ia.Report.FixedItem.Font.Name},this.ItemMergin={Left:ia.Report.Item.Mergin.Left,Right:ia.Report.Item.Mergin.Right,Top:ia.Report.Item.Mergin.Top,Bottom:ia.Report.Item.Mergin.Bottom},this.BarMergin={Top:ia.Report.Item.BarMergin.Top,Left:ia.Report.Item.BarMergin.Left,Right:ia.Report.Item.BarMergin.Right,Bottom:ia.Report.Item.BarMergin.Bottom},this.LimitDrawType=0,this.LimitBorderColor=ia.Report.LimitBorder.Color,this.LimitUpBGColor=ia.Report.LimitColor.UpColor,this.LimitDownBGColor=ia.Report.LimitColor.DownColor,this.LimitTextColor=ia.Report.LimitColor.TextColor,this.LimitMergin={Top:ia.Report.LimitBorder.Mergin.Top,Left:ia.Report.LimitBorder.Mergin.Left,Right:ia.Report.LimitBorder.Mergin.Right,Bottom:ia.Report.LimitBorder.Mergin.Bottom},this.DragRowColor=ia.Report.DragRow.Color,this.DragRowTextColor=ia.Report.DragRow.TextColor,this.DragMoveRowColor=ia.Report.DragRow.MoveRowColor,this.DragSrcRowColor=ia.Report.DragRow.SrcRowColor,this.CloseLineConfig={CloseColor:ia.Report.CloseLine.CloseColor,YCloseColor:ia.Report.CloseLine.YCloseColor,AreaColor:ia.Report.CloseLine.AreaColor},this.KLineConfig={UpColor:ia.Report.KLine.UpColor,DownColor:ia.Report.KLine.DownColor,UnchagneColor:ia.Report.KLine.UnchagneColor,DataWidth:ia.Report.KLine.DataWidth,DistanceWidth:ia.Report.KLine.DistanceWidth},this.ItemSymbolFontConfig={Size:ia.Report.Item.SymbolFont.Size,Name:ia.Report.Item.SymbolFont.Name},this.ItemNameFontConfg={Size:ia.Report.Item.NameFont.Size,Name:ia.Report.Item.NameFont.Name},this.HeaderFont=12*A()+"px 微软雅黑",this.ItemFont=15*A()+"px 微软雅黑",this.ItemFixedFont=15*A()+"px 微软雅黑",this.ItemSymbolFont=12*A()+"px 微软雅黑",this.ItemNameFont=15*A()+"px 微软雅黑",this.ItemNameHeight=0,this.RowCount=0,this.HeaderHeight=0,this.FixedRowHeight=0,this.RowHeight=0,this.BottomToolbarHeight=0,this.IsShowAllColumn=!1,this.Column=[{Type:Ti.INDEX_ID,Title:"序号",TextAlign:"center",Width:null,TextColor:ia.Report.FieldColor.Index,MaxText:"8888"},{Type:Ti.SYMBOL_ID,Title:"代码",TextAlign:"left",Width:null,TextColor:ia.Report.FieldColor.Symbol,MaxText:"888888"},{Type:Ti.NAME_ID,Title:"名称",TextAlign:"left",Width:null,TextColor:ia.Report.FieldColor.Name,MaxText:"擎擎擎擎"},{Type:Ti.INCREASE_ID,Title:"涨幅%",TextAlign:"right",Width:null,MaxText:"-888.88"}],this.RectClient={},this.TooltipRect=[],this.ReloadResource=function(t){this.UpColor=ia.Report.UpTextColor,this.DownColor=ia.Report.DownTextColor,this.UnchagneColor=ia.Report.UnchagneTextColor,this.BorderColor=ia.Report.BorderColor,this.SelectedColor=ia.Report.SelectedColor,this.HeaderFontConfig={Size:ia.Report.Header.Font.Size,Name:ia.Report.Header.Font.Name},this.HeaderColor=ia.Report.Header.Color,this.SortColor=ia.Report.Header.SortColor,this.HeaderMergin={Left:ia.Report.Header.Mergin.Left,Right:ia.Report.Header.Mergin.Right,Top:ia.Report.Header.Mergin.Top,Bottom:ia.Report.Header.Mergin.Bottom},this.ItemFontConfig={Size:ia.Report.Item.Font.Size,Name:ia.Report.Item.Font.Name},this.ItemMergin={Left:ia.Report.Item.Mergin.Left,Right:ia.Report.Item.Mergin.Right,Top:ia.Report.Item.Mergin.Top,Bottom:ia.Report.Item.Mergin.Bottom},this.BarMergin={Top:ia.Report.Item.BarMergin.Top,Left:ia.Report.Item.BarMergin.Left,Right:ia.Report.Item.BarMergin.Right,Bottom:ia.Report.Item.BarMergin.Bottom},this.LimitBorderColor=ia.Report.LimitBorder.Color,this.LimitMergin={Top:ia.Report.LimitBorder.Mergin.Top,Left:ia.Report.LimitBorder.Mergin.Left,Right:ia.Report.LimitBorder.Mergin.Right,Bottom:ia.Report.LimitBorder.Mergin.Bottom};for(var e=0;e<this.Column.length;++e){var a=this.Column[e];a.Type==Ti.INDEX_ID?a.TextColor=ia.Report.FieldColor.Index:a.Type==Ti.SYMBOL_ID?a.TextColor=ia.Report.FieldColor.Symbol:a.Type==Ti.NAME_ID?a.TextColor=ia.Report.FieldColor.Name:a.Type==Ti.VOL_ID?a.TextColor=ia.Report.FieldColor.Vol:a.Type==Ti.BUY_VOL_ID?a.TextColor=ia.Report.FieldColor.Vol:a.Type==Ti.SELL_VOL_ID?a.TextColor=ia.Report.FieldColor.Vol:a.Type==Ti.AMOUNT_ID?a.TextColor=ia.Report.FieldColor.Amount:a.Type==Ti.VOL_IN_ID?a.TextColor=ia.Report.DownTextColor:a.Type==Ti.VOL_OUT_ID?a.TextColor=ia.Report.UpTextColor:a.TextColor=ia.Report.FieldColor.Text}this.Tab&&this.Tab.ReloadResource(t)},this.SetColumn=function(t){if(Te.IsNonEmptyArray(t)){this.Column=[];for(var e=0;e<t.length;++e){var a=t[e],i=this.GetDefaultColunm(a.Type);if(i){if(a.Title&&(i.Title=a.Title),a.TextAlign&&(i.TextAlign=a.TextAlign),a.TextColor&&(i.TextColor=a.TextColor),a.MaxText&&(i.MaxText=a.MaxText),a.ID&&(i.ID=a.ID),Te.IsNumber(a.Sort)&&(i.Sort=a.Sort),Te.IsBool(a.EnableTooltip)&&(i.EnableTooltip=a.EnableTooltip),Te.IsNumber(a.FixedWidth)&&(i.FixedWidth=a.FixedWidth),Te.IsBool(a.EnableDragWidth)&&(i.EnableDragWidth=a.EnableDragWidth),Te.IsBool(a.IsDrawCallback)?i.IsDrawCallback=a.IsDrawCallback:i.IsDrawCallback=!1,1!=a.Sort&&2!=a.Sort||(i.SortType=[1,2],Te.IsNonEmptyArray(a.SortType)&&(i.SortType=a.SortType.slice())),a.Type==Ti.CUSTOM_STRING_TEXT_ID){if(!Te.IsNumber(a.DataIndex)&&!Te.IsNumber(a.BlockIndex))continue;Te.IsNumber(a.DataIndex)&&(i.DataIndex=a.DataIndex),Te.IsNumber(a.BlockIndex)&&(i.BlockIndex=a.BlockIndex)}else if(a.Type==Ti.CUSTOM_NUMBER_TEXT_ID){if(!Te.IsNumber(a.DataIndex)&&!Te.IsNumber(a.BlockIndex))continue;Te.IsNumber(a.DataIndex)&&(i.DataIndex=a.DataIndex),Te.IsNumber(a.BlockIndex)&&(i.BlockIndex=a.BlockIndex),i.Decimal=2,i.FormatType=0,i.ColorType=0,Te.IsNumber(a.Decimal)&&(i.Decimal=a.Decimal),Te.IsNumber(a.FormatType)&&(i.FormatType=a.FormatType),Te.IsNumber(a.ColorType)&&(i.ColorType=a.ColorType)}else if(a.Type==Ti.CUSTOM_DATETIME_TEXT_ID){if(!Te.IsNumber(a.DataIndex)&&!Te.IsNumber(a.BlockIndex))continue;Te.IsNumber(a.DataIndex)&&(i.DataIndex=a.DataIndex),Te.IsNumber(a.BlockIndex)&&(i.BlockIndex=a.BlockIndex),i.FormatType=0,i.ValueType=0,Te.IsNumber(a.FormatType)&&(i.FormatType=a.FormatType),Te.IsNumber(a.ValueType)&&(i.FormatType=a.ValueType)}else a.Type==Ti.CUSTOM_ICON_ID||a.Type==Ti.CLOSE_LINE_ID&&Te.IsBool(a.IsDrawArea)&&(i.IsDrawArea=a.IsDrawArea);this.Column.push(i)}}}},this.SwapColumn=function(t,e){if(!Te.IsNumber(t)||!Te.IsNumber(e))return!1;var a=this.Column.length;if(t<0||t>=a)return!1;if(e<0||e>=a)return!1;if(t!=e){var i=this.Column[t];return this.Column[t]=this.Column[e],this.Column[e]=i,!0}},this.GetXScrollPos=function(){return this.Data.XOffset},this.GetXScrollRange=function(){var t=this.Column.length-this.FixedColumn-3;return t<0?0:t},this.GetDefaultColunm=function(t){for(var e=[{Type:Ti.INDEX_ID,Title:"序号",TextAlign:"center",Width:null,TextColor:ia.Report.FieldColor.Index,MaxText:"8888"},{Type:Ti.SYMBOL_ID,Title:"代码",TextAlign:"left",Width:null,TextColor:ia.Report.FieldColor.Symbol,MaxText:"888888"},{Type:Ti.NAME_ID,Title:"名称",TextAlign:"left",Width:null,TextColor:ia.Report.FieldColor.Name,MaxText:"擎擎擎擎0"},{Type:Ti.NAME_EX_ID,Title:"名称",TextAlign:"left",Width:null,TextColor:ia.Report.FieldColor.Name,MaxText:"擎擎擎擎擎擎"},{Type:Ti.SYMBOL_NAME_ID,Title:"股票名称",TextAlign:"left",Width:null,TextColor:ia.Report.FieldColor.Name,MaxText:"擎擎擎擎0"},{Type:Ti.INCREASE_ID,Title:"涨幅%",TextAlign:"right",Width:null,MaxText:"-888.88"},{Type:Ti.PRICE_ID,Title:"现价",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:Ti.UPDOWN_ID,Title:"涨跌",TextAlign:"right",Width:null,MaxText:"-888.88"},{Type:Ti.AMPLITUDE_ID,Title:"振幅%",TextAlign:"right",Width:null,MaxText:"888.88"},{Type:Ti.BUY_PRICE_ID,Title:"买价",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:Ti.SELL_PRICE_ID,Title:"卖价",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:Ti.AVERAGE_PRICE_ID,Title:"均价",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:Ti.OPEN_ID,Title:"今开",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:Ti.HIGH_ID,Title:"最高",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:Ti.LOW_ID,Title:"最低",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:Ti.YCLOSE_ID,Title:"昨收",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:Ti.VOL_ID,Title:"总量",TextAlign:"right",TextColor:ia.Report.FieldColor.Vol,Width:null,MaxText:"8888.8擎"},{Type:Ti.AMOUNT_ID,Title:"总金额",TextAlign:"right",TextColor:ia.Report.FieldColor.Amount,Width:null,MaxText:"8888.8擎"},{Type:Ti.EXCHANGE_RATE_ID,Title:"换手%",TextAlign:"right",TextColor:ia.Report.FieldColor.Text,Width:null,MaxText:"88.88"},{Type:Ti.OUTSTANDING_SHARES_ID,Title:"流通股本",TextAlign:"right",TextColor:ia.Report.FieldColor.Text,Width:null,MaxText:"8888.8擎"},{Type:Ti.TOTAL_SHARES_ID,Title:"总股本",TextAlign:"right",TextColor:ia.Report.FieldColor.Text,Width:null,MaxText:"8888.8擎"},{Type:Ti.CIRC_MARKET_VALUE_ID,Title:"流通市值",TextAlign:"right",TextColor:ia.Report.FieldColor.Text,Width:null,MaxText:"8888.8擎"},{Type:Ti.MARKET_VALUE_ID,Title:"总市值",TextAlign:"right",TextColor:ia.Report.FieldColor.Text,Width:null,MaxText:"8888.8擎"},{Type:Ti.VOL_IN_ID,Title:"内盘",TextAlign:"right",TextColor:ia.Report.DownTextColor,Width:null,MaxText:"8888.8擎"},{Type:Ti.VOL_OUT_ID,Title:"外盘",TextAlign:"right",TextColor:ia.Report.UpTextColor,Width:null,MaxText:"8888.8擎"},{Type:Ti.CLOSE_LINE_ID,Title:"走势",TextAlign:"center",TextColor:ia.Report.CloseLineColor,Width:null,MaxText:"88888.88888"},{Type:Ti.BUY_VOL_ID,Title:"买量",TextAlign:"right",TextColor:ia.Report.FieldColor.Vol,Width:null,MaxText:"8888.8擎"},{Type:Ti.SELL_VOL_ID,Title:"卖量",TextAlign:"right",TextColor:ia.Report.FieldColor.Vol,Width:null,MaxText:"8888.8擎"},{Type:Ti.CUSTOM_STRING_TEXT_ID,Title:"自定义",TextAlign:"center",Width:null,TextColor:ia.Report.FieldColor.Text,MaxText:"擎擎擎擎擎"},{Type:Ti.CUSTOM_NUMBER_TEXT_ID,Title:"自定义",TextAlign:"center",Width:null,TextColor:ia.Report.FieldColor.Text,MaxText:"擎擎擎擎擎"},{Type:Ti.CUSTOM_DATETIME_TEXT_ID,Title:"自定义",TextAlign:"center",Width:null,TextColor:ia.Report.FieldColor.Text,MaxText:"9999-99-99"},{Type:Ti.CUSTOM_ICON_ID,Title:"  ",TextAlign:"left",FixedWidth:20,TextColor:ia.Report.FieldColor.Text},{Type:Ti.KLINE_ID,Title:"K线",TextAlign:"left",FixedWidth:50,TextColor:ia.Report.FieldColor.Text}],a=0;a<e.length;++a){var i=e[a];if(i.Type==t)return i}return null},this.Draw=function(){if(this.ShowSymbol=[],this.TooltipRect=[],this.GlobalOption&&(this.GlobalOption.FlashBGCount=0),this.SizeChange?this.CalculateSize():this.UpdateCacheData(),this.Canvas.save(),this.Canvas.beginPath(),this.Canvas.rect(this.RectClient.Left,this.RectClient.Top,this.RectClient.Right-this.RectClient.Left,this.RectClient.Bottom-this.RectClient.Top),this.Canvas.clip(),this.DrawHeader(),this.DrawBody(),this.Canvas.restore(),this.Tab&&this.BottomToolbarHeight>0){var t=this.ChartBorder.GetBottom();this.Tab.DrawTab(this.RectClient.Left,t-this.BottomToolbarHeight,this.RectClient.Right,t),this.Tab.DrawScrollbar(this.RectClient.Left,t-this.BottomToolbarHeight,this.RectClient.Right,t)}this.DrawBorder(),this.DrawDragRow(),this.SizeChange=!1},this.UpdateCacheData=function(){this.RectClient.Left=this.ChartBorder.GetLeft(),this.RectClient.Right=this.ChartBorder.GetRight(),this.RectClient.Top=this.ChartBorder.GetTop(),this.RectClient.Bottom=this.ChartBorder.GetBottom()-this.BottomToolbarHeight},this.GetPageSize=function(t){t&&this.CalculateSize();var e=this.RowCount;return e},this.GetCurrentPageStatus=function(){var t={Start:this.Data.YOffset,PageSize:this.RowCount,IsEnd:!1,SelectedRow:this.SelectedRow,IsSinglePage:!1,DataCount:0};return Te.IsNonEmptyArray(this.Data.Data)?(t.End=this.Data.YOffset+this.RowCount-1,t.IsSinglePage=this.Data.Data.length<=this.RowCount,t.DataCount=this.Data.Data.length,t.End>=this.Data.Data.length-1&&(t.IsEnd=!0),t.End>=this.Data.Data.length&&(t.End=this.Data.Data.length-1)):(t.Star=0,t.End=0,t.IsEnd=!0,t.IsSinglePage=!0),t},this.CalculateSize=function(){this.Tab&&this.Tab.IsShow?(this.Tab.CalculateSize(),this.BottomToolbarHeight=this.Tab.Height):this.BottomToolbarHeight=0,this.UpdateCacheData();var t=A();this.HeaderFont=this.HeaderFontConfig.Size*t+"px "+this.HeaderFontConfig.Name,this.ItemFont=this.ItemFontConfig.Size*t+"px "+this.ItemFontConfig.Name,this.ItemFixedFont=this.ItemFixedFontConfg.Size*t+"px "+this.ItemFixedFontConfg.Name,this.ItemSymbolFont=this.ItemSymbolFontConfig.Size*t+"px "+this.ItemSymbolFontConfig.Name,this.ItemNameFont=this.ItemNameFontConfg.Size*t+"px "+this.ItemNameFontConfg.Name,this.RowHeight=this.GetFontHeight(this.ItemFont,"擎")+this.ItemMergin.Top+this.ItemMergin.Bottom,this.FixedRowHeight=this.GetFontHeight(this.ItemFixedFont,"擎")+this.ItemMergin.Top+this.ItemMergin.Bottom,this.Canvas.font=this.ItemFont;for(var e=0,a=0;a<this.Column.length;++a){var i=this.Column[a];if(i.Type==Ti.SYMBOL_NAME_ID){this.Canvas.font=this.ItemNameFont;var r=this.Canvas.measureText(i.MaxText).width,n=this.GetFontHeight(this.ItemNameFont,"擎");this.ItemNameHeight=n,this.Canvas.font=this.ItemSymbolFont;var o=this.Canvas.measureText(i.MaxText).width,s=this.GetFontHeight(this.ItemSymbolFont,"擎");this.Canvas.font=this.ItemFont,e=Math.max(r,o),i.Width=e+4+this.ItemMergin.Left+this.ItemMergin.Right;var h=n+s+this.ItemMergin.Top+this.ItemMergin.Bottom;h>this.RowHeight&&(this.RowHeight=h),h>this.FixedRowHeight&&(this.FixedRowHeight=h)}else e=Te.IsNumber(i.FixedWidth)?i.FixedWidth:this.Canvas.measureText(i.MaxText).width,i.Width=e+4+this.ItemMergin.Left+this.ItemMergin.Right}this.Canvas.font=this.HeaderFont;for(var a=0;a<this.Column.length;++a){var i=this.Column[a];if(i.Title&&!(i.Title.length<=0)){var l=i.Title;i.Sort>0&&(l+="↓"),e=this.Canvas.measureText(l).width,e+=4+this.HeaderMergin.Left+this.HeaderMergin.Right,i.Width<e&&(i.Width=e)}}this.HeaderHeight=this.GetFontHeight(this.HeaderFont,"擎")+this.HeaderMergin.Top+this.HeaderMergin.Bottom,this.IsShowHeader||(this.HeaderHeight=0),this.FixedRowCount<=0&&(this.FixedRowHeight=0),this.RowCount=parseInt((this.RectClient.Bottom-this.RectClient.Top-this.HeaderHeight-this.FixedRowHeight*this.FixedRowCount)/this.RowHeight);for(var u=0,c=this.RectClient.Right-this.RectClient.Left,a=0;a<this.Column.length;++a){var i=this.Column[a];u+=i.Width}this.IsShowAllColumn=u<c},this.DrawHeader=function(){if(this.IsShowHeader){var t=this.RectClient.Left,e=this.RectClient.Top,a=e+this.HeaderMergin.Top+(this.HeaderHeight-this.HeaderMergin.Top-this.HeaderMergin.Bottom)/2;this.Canvas.font=this.HeaderFont,this.Canvas.fillStyle=this.HeaderColor;for(var i=t,r=0;r<this.FixedColumn&&r<this.Column.length;++r){var n=this.Column[r],o=n.Width,s=o-this.HeaderMergin.Left-this.HeaderMergin.Right,h=i+this.HeaderMergin.Left;this.SortInfo&&this.SortInfo.Field==r&&this.SortInfo.Sort>0?this.DrawSortHeader(n.Title,n.TextAlign,h,a,s,this.SortInfo.Sort):this.DrawText(n.Title,n.TextAlign,h,a,s),i+=n.Width}for(var r=this.FixedColumn+this.Data.XOffset;r<this.Column.length;++r){var n=this.Column[r],o=n.Width,s=o-this.HeaderMergin.Left-this.HeaderMergin.Right,h=i+this.HeaderMergin.Left;this.SortInfo&&this.SortInfo.Field==r&&this.SortInfo.Sort>0?this.DrawSortHeader(n.Title,n.TextAlign,h,a,s,this.SortInfo.Sort):this.DrawText(n.Title,n.TextAlign,h,a,s),i+=n.Width}}},this.DrawText=function(t,e,a,i,r){"center"==e?(a+=r/2,this.Canvas.textAlign="center"):"right"==e?(a+=r,this.Canvas.textAlign="right"):this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(t,a,i)},this.DrawSortHeader=function(t,e,a,i,r,n){var o=1==n?"↓":"↑",s=this.Canvas.measureText(o).width,h=this.Canvas.measureText(t).width+2;this.Canvas.textBaseline="middle",this.Canvas.textAlign="left","center"==e?a=a+r/2-(s+h)/2:"right"==e&&(a=a+r-s-h),this.Canvas.fillText(t,a,i),this.Canvas.fillStyle=this.SortColor,this.Canvas.fillText(o,a+h,i),this.Canvas.fillStyle=this.HeaderColor},this.DrawBorder=function(){if(this.IsDrawBorder){var t=this.RectClient.Left,e=this.RectClient.Right,a=this.RectClient.Top;this.RectClient.Bottom;this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),this.Canvas.moveTo(t,_(a+this.HeaderHeight)),this.Canvas.lineTo(e,_(a+this.HeaderHeight));for(var i=a+this.HeaderHeight+this.RowHeight,r=i,n=0;n<this.FixedRowCount;++n){var o=_(i);this.Canvas.moveTo(t,o),this.Canvas.lineTo(e,o),r=i,i+=this.FixedRowHeight}for(var i=a+this.HeaderHeight+this.RowHeight+this.FixedRowHeight*this.FixedRowCount,r=i,n=0;n<this.RowCount;++n){var o=_(i);this.Canvas.moveTo(t,o),this.Canvas.lineTo(e,o),r=i,i+=this.RowHeight}for(var s=t,n=0;n<this.FixedColumn&&n<this.Column.length;++n){var h=this.Column[n],l=_(s+h.Width);this.Canvas.moveTo(l,a),this.Canvas.lineTo(l,r),s+=h.Width}for(var n=this.FixedColumn+this.Data.XOffset;n<this.Column.length;++n){var h=this.Column[n],l=_(s+h.Width);this.Canvas.moveTo(l,a),this.Canvas.lineTo(l,r),s+=h.Width}this.Canvas.stroke()}},this.DrawBody=function(){if(this.Data&&Te.IsNonEmptyArray(this.Data.Data)){this.Canvas.font=this.ItemFont;var t=this.RectClient.Top+this.HeaderHeight,e=this.RectClient.Left,a=this.RectClient.Right-this.RectClient.Left,i=t;this.Canvas.font=this.ItemFixedFont;for(var r=0;r<this.FixedRowCount;++r)this.SelectedFixedRow==r&&(this.Canvas.fillStyle=this.SelectedColor,this.Canvas.fillRect(e,i,a,this.FixedRowHeight)),1==this.FixedRowData.Type?this.DrawFixedSymbolRow(i,r):this.DrawFixedRow(i,r),i+=this.FixedRowHeight;i=t+this.FixedRowHeight*this.FixedRowCount,this.Canvas.font=this.ItemFont;for(var r=this.Data.YOffset,n=0;r<this.Data.Data.length&&n<this.RowCount;++r,++n){var o=this.Data.Data[r],s=!1;if(0==this.SelectedModel?n==this.SelectedRow&&(s=!0):r==this.SelectedRow&&(s=!0),this.DragRow){if(this.DragRow.Data){var h=this.DragRow.Data.Row.DataIndex;h==r&&(this.Canvas.fillStyle=this.DragSrcRowColor,this.Canvas.fillRect(e,i,a,this.RowHeight))}if(this.DragRow.MoveRow){var h=this.DragRow.MoveRow.Data.DataIndex;h==r&&(this.Canvas.fillStyle=this.DragMoveRowColor,this.Canvas.fillRect(e,i,a,this.RowHeight))}s=!1}s&&(this.Canvas.fillStyle=this.SelectedColor,this.Canvas.fillRect(e,i,a,this.RowHeight)),this.DrawRow(o,i,r),this.ShowSymbol.push({Index:r,Symbol:o}),i+=this.RowHeight}}},this.DrawFixedSymbolRow=function(t,e){this.RectClient.Left,this.RectClient.Right;if(this.FixedRowData&&Te.IsNonEmptyArray(this.FixedRowData.Symbol)){var a=this.FixedRowData.Symbol[e];a&&(this.DrawRow(a,t,e,1),this.ShowSymbol.push({Index:e,Symbol:a,RowType:1}))}},this.DrawFixedRow=function(t,e){for(var a=this.RectClient.Left,i=this.RectClient.Right,r=0;r<this.FixedColumn&&r<this.Column.length;++r){var n=this.Column[r];if(this.DrawFixedItem(e,r,n,a,t),(a+=n.Width)>=i)break}for(var r=this.FixedColumn+this.Data.XOffset;r<this.Column.length;++r){var n=this.Column[r];if(this.DrawFixedItem(e,r,n,a,t),(a+=n.Width)>=i)break}},this.DrawFixedItem=function(t,e,a,i,r){var n=i+this.ItemMergin.Left,o=a.Width-this.ItemMergin.Left-this.ItemMergin.Right,s={Text:null,TextColor:a.TextColor,TextAlign:a.TextAlign};if(this.GetFixedRowTextDrawInfo(t,e,a,s))this.DrawItemText(s.Text,s.TextColor,s.TextAlign,n,r,o);else if(this.FixedRowData&&Te.IsNonEmptyArray(this.FixedRowData.Data)){var h=this.FixedRowData.Data,l=h[t];if(Te.IsNonEmptyArray(l)){var u=l[e];u&&u.Text&&(s.Text=u.Text,u.Color&&(s.TextColor=u.Color),u.TextAlign&&(s.TextAlign=u.TextAlign),this.DrawItemText(s.Text,s.TextColor,s.TextAlign,n,r,o))}}},this.DrawRow=function(t,e,a,i){var r=this.RectClient.Left,n=this.RectClient.Right,o={Symbol:t,Stock:null,Block:null};this.GetStockDataCallback&&(o.Stock=this.GetStockDataCallback(t)),this.GetBlockDataCallback&&(o.Block=this.GetBlockDataCallback(t)),this.GetFlashBGDataCallback&&(o.FlashBG=this.GetFlashBGDataCallback(t,Date.now())),o.Decimal=Ga(t);for(var s=0;s<this.FixedColumn&&s<this.Column.length;++s){var h=this.Column[s];if(this.DrawItem(a,o,h,r,e,i),(r+=h.Width)>=n)break}for(var s=this.FixedColumn+this.Data.XOffset;s<this.Column.length;++s){var h=this.Column[s];if(this.DrawItem(a,o,h,r,e,i),(r+=h.Width)>=n)break}},this.DrawItem=function(t,e,a,i,r,n){a.Width;var o=i+this.ItemMergin.Left,s=a.Width-this.ItemMergin.Left-this.ItemMergin.Right,h=e.Stock,l={Text:null,TextColor:a.TextColor,TextAlign:a.TextAlign},u={Left:i,Top:r,Width:a.Width,Height:this.RowHeight};if(u.Right=u.Left+u.Width,u.Bottom=u.Top+u.Height,l.Rect=u,!0===a.EnableTooltip&&this.TooltipRect.push({Rect:u,Stock:h,Index:t,Column:a,RowType:n}),a.Type==Ti.INDEX_ID){if(1==n)return;l.Text=(t+1).toString()}else if(a.Type==Ti.SYMBOL_ID)h&&h.Symbol?l.Text=h.Symbol:l.Text=e.Symbol,this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.SYMBOL_NAME_ID)this.DrawSymbolName(e,a,i,r,n),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.NAME_ID)h&&h.Name&&Te.IsString(h.Name)&&(l.Text=this.TextEllipsis(h.Name,s,a.MaxText),l.TextColor=this.GetNameColor(a,e.Symbol,n)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.NAME_EX_ID){if(h&&h.NameEx){var c=h.NameEx;l.Text=this.TextEllipsis(c.Text,s,a.MaxText),l.TextColor=this.GetNameColor(a,e.Symbol,n),c.Symbol&&(l.Symbol=c.Symbol)}}else if(a.Type==Ti.PRICE_ID)h&&this.GetPriceDrawInfo(h.Price,h,e,l,{LimitBG:!0}),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.OPEN_ID)h&&(this.DrawLimitPriceBorder(h.Open,h,i,r,a.Width),this.GetPriceDrawInfo(h.Open,h,e,l,{LimitBG:!0})),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.HIGH_ID)h&&(this.DrawLimitPriceBorder(h.High,h,i,r,a.Width),this.GetPriceDrawInfo(h.High,h,e,l,{LimitBG:!0})),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.LOW_ID)h&&(this.DrawLimitPriceBorder(h.Low,h,i,r,a.Width),this.GetPriceDrawInfo(h.Low,h,e,l,{LimitBG:!0})),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.YCLOSE_ID)h&&this.GetPriceDrawInfo(h.YClose,h,e,l),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.BUY_PRICE_ID)h&&this.GetPriceDrawInfo(h.BuyPrice,h,e,l),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.SELL_PRICE_ID)h&&this.GetPriceDrawInfo(h.SellPrice,h,e,l),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.AVERAGE_PRICE_ID)h&&this.GetPriceDrawInfo(h.AvPrice,h,e,l),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.EXCHANGE_RATE_ID)h&&Te.IsNumber(h.Exchange)&&(l.Text=h.Exchange.toFixed(2)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.BUY_VOL_ID)h&&Te.IsNumber(h.BuyVol)&&(l.Text=this.FormatVolString(h.BuyVol)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.SELL_VOL_ID)h&&Te.IsNumber(h.SellVol)&&(l.Text=this.FormatVolString(h.SellVol)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.VOL_ID)h&&Te.IsNumber(h.Vol)&&(l.Text=this.FormatVolString(h.Vol)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.VOL_IN_ID)h&&Te.IsNumber(h.VolIn)&&(l.Text=this.FormatVolString(h.VolIn)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.VOL_OUT_ID)h&&Te.IsNumber(h.VolOut)&&(l.Text=this.FormatVolString(h.VolOut)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.TOTAL_SHARES_ID)h&&Te.IsNumber(h.TotalShares)&&(l.Text=this.FormatVolString(h.TotalShares)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.OUTSTANDING_SHARES_ID)h&&Te.IsNumber(h.OutShares)&&(l.Text=this.FormatVolString(h.OutShares)),this.FormatDrawInfo(a,h,l,e);else if(a.Type==Ti.CIRC_MARKET_VALUE_ID||a.Type==Ti.MARKET_VALUE_ID||a.Type==Ti.AMOUNT_ID){var f=Ii.get(a.Type);h&&Te.IsNumber(h[f])&&(l.Text=this.FormatVolString(h[f])),this.FormatDrawInfo(a,h,l,e)}else if(a.Type==Ti.INCREASE_ID||a.Type==Ti.AMPLITUDE_ID||a.Type==Ti.UPDOWN_ID){var f=Ii.get(a.Type);if(h&&Te.IsNumber(h[f])){var d=h[f];l.Text=d.toFixed(2),l.TextColor=this.GetUpDownColor(d,0)}this.FormatDrawInfo(a,h,l,e)}else if(a.Type==Ti.CUSTOM_STRING_TEXT_ID)this.GetCustomStringDrawInfo(e,a,l);else if(a.Type==Ti.CUSTOM_NUMBER_TEXT_ID)this.GetCustomNumberDrawInfo(e,a,l);else if(a.Type==Ti.CUSTOM_DATETIME_TEXT_ID)this.GetCustomDateTimeDrawInfo(e,a,l);else if(a.Type==Ti.CUSTOM_ICON_ID)this.GetCustomIconDrawInfo(e,a,l);else if(a.Type==Ti.CLOSE_LINE_ID){var u={Left:i,Top:r,Width:a.Width,Height:this.RowHeight};u.Right=u.Left+u.Width,u.Bottom=u.Top+u.Height,this.DrawLine(h.CloseLine,a,u)}else if(a.Type==Ti.KLINE_ID){var u={Left:i,Top:r,Width:a.Width,Height:this.RowHeight};u.Right=u.Left+u.Width,u.Bottom=u.Top+u.Height,this.DrawKLine(h.KLine,a,u,e)}if(3==n&&(l.TextColor=this.DragRowTextColor),l.Symbol)this.DrawItemTextEx(l,o,r,s);else if(a.Type==Ti.CUSTOM_ICON_ID)this.DrawIconItem(l,o,r,s);else{if(e.FlashBG&&e.FlashBG.Data&&void 0!=a.ID&&e.FlashBG.Data.has(a.ID)){var C=e.FlashBG.Data.get(a.ID),p={Rect:l.Rect,BGColor:C.Color};--C.Count,this.DrawItemBG(p),this.GlobalOption&&++this.GlobalOption.FlashBGCount}this.DrawItemBG(l),this.DrawItemText(l.Text,l.TextColor,l.TextAlign,o,r,s,l.BGColor)}},this.DrawSymbolName=function(t,e,a,i,r){var n,o=t.Stock,s=t.Symbol;if(o&&(s=o.Symbol,n=o.Name),s||n){var h=i+this.ItemMergin.Top+this.ItemNameHeight,l=a+this.ItemMergin.Left,u=l,c=e.Width-this.ItemMergin.Left-this.ItemMergin.Right,f=e.TextAlign;"center"==f?(u=l+c/2,this.Canvas.textAlign="center"):"right"==f?(u=l+c-2,this.Canvas.textAlign="right"):(u+=2,this.Canvas.textAlign="left");var d=this.GetNameColor(e,s,r),C=n;C&&(this.Canvas.textBaseline="ideographic",this.Canvas.fillStyle=d,this.Canvas.font=this.ItemNameFont,(C=this.TextEllipsis(C,c,e.MaxText))&&this.Canvas.fillText(C,u,h)),(C=s)&&(this.Canvas.textBaseline="top",this.Canvas.font=this.ItemSymbolFont,this.Canvas.fillStyle=d,this.Canvas.fillText(C,u,h)),this.Canvas.font=this.ItemFont}},this.DrawLimitPriceBorder=function(t,e,a,i,r){if(Te.IsNumber(t)&&e){var n=!1;if(Te.IsNumber(e.LimitHigh)&&t>=e.LimitHigh&&(n=!0),Te.IsNumber(e.LimitLow)&&t<=e.LimitLow&&(n=!0),n){var o=a+this.ItemMergin.Left+this.LimitMergin.Left,s=r-this.ItemMergin.Left-this.ItemMergin.Right-this.LimitMergin.Left-this.LimitMergin.Right,h=i+this.ItemMergin.Top+this.LimitMergin.Top,l=this.RowHeight-this.ItemMergin.Top-this.ItemMergin.Bottom-this.LimitMergin.Top-this.LimitMergin.Bottom;this.Canvas.strokeStyle=this.LimitBorderColor,this.Canvas.strokeRect(_(o),_(h),k(s),k(l))}}},this.GetExtendData=function(t,e){if(Te.IsNumber(e.DataIndex)){if(!t.Stock||!t.Stock.ExtendData)return null;if(e.DataIndex<0)return;return t.Stock.ExtendData[e.DataIndex]}if(Te.IsNumber(e.BlockIndex)){if(!t.Block)return;if(e.BlockIndex<0)return;return t.Block[e.BlockIndex]}return null},this.GetCustomStringDrawInfo=function(t,e,a){var i=this.GetExtendData(t,e);e.IsDrawCallback?this.GetCustomTextDrawInfo(e,t.Symbol,i,a,t):Te.IsString(i)&&(a.Text=i)},this.GetCustomNumberDrawInfo=function(t,e,a){var i=this.GetExtendData(t,e);if(e.IsDrawCallback)this.GetCustomTextDrawInfo(e,t.Symbol,i,a,t);else if(Te.IsNumber(i)){switch(e.FormatType){case 1:a.Text=i.toFixed(e.Decimal);break;case 2:a.Text=Te.FormatValueThousandsString(i,e.Decimal);break;case 3:a.Text=this.FormatVolString(i);break;default:a.Text=Te.FormatValueString(i,e.Decimal)}switch(e.ColorType){case 1:a.TextColor=this.GetUpDownColor(i,0);break;case 2:Te.IsNumber(t.Stock.YClose)?a.TextColor=this.GetUpDownColor(i,t.Stock.YClose):a.TextColor=this.UnchagneColor}}},this.GetCustomDateTimeDrawInfo=function(t,e,a){var i=this.GetExtendData(t,e);Te.IsNumber(i)&&(e.IsDrawCallback?this.GetCustomTextDrawInfo(e,t.Symbol,i,a,t):0==e.ValueType&&(1==e.FormatType?a.Text=Te.FormatDateString(i,"YYYY/MM/DD"):a.Text=Te.FormatDateString(i)))},this.GetCustomIconDrawInfo=function(t,e,a){e.IsDrawCallback&&this.GetCustomIconData(e,t.Symbol,a,t)},this.GetCustomIconData=function(t,e,a,i){var r=this.GetEventCallback(w.ON_REPORT_DRAW_CUSTOM_ICON);if(!r||!r.Callback)return!1;var n={Symbol:e,Column:t,Data:i,Out:{Text:null,TextColor:null,TextAlign:null,Font:null}};return r.Callback(r,n,this),n.Out.Text&&(a.Text=n.Out.Text),n.Out.TextColor&&(a.TextColor=n.Out.TextColor),n.Out.TextAlign&&(a.TextAlign=n.Out.TextAlign),n.Out.BGColor&&(a.BGColor=n.Out.BGColor),n.Out.Font&&(a.Font=n.Out.Font),!0},this.GetPriceDrawInfo=function(t,e,a,i,r){if(!Te.IsNumber(t))return!1;i.Text=t.toFixed(a.Decimal),Te.IsNumber(e.YClose)?i.TextColor=this.GetUpDownColor(t,e.YClose):i.TextColor=this.UnchagneColor,r&&r.LimitBG&&(Te.IsNumber(e.LimitHigh)&&t>=e.LimitHigh&&(i.BGColor=this.LimitUpBGColor,i.TextColor=this.LimitTextColor),Te.IsNumber(e.LimitLow)&&t<=e.LimitLow&&(i.BGColor=this.LimitDownBGColor,i.TextColor=this.LimitTextColor))},this.GetUpDownColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor},this.FormatVolString=function(t,e){return Te.FormatVolString(t,e)},this.DrawItemBG=function(t){if(t.BGColor&&t.Rect){var e=t.Rect;this.Canvas.fillStyle=t.BGColor,this.Canvas.fillRect(e.Left,e.Top,e.Width,e.Height)}},this.DrawItemText=function(t,e,a,i,r,n,o){if(t){var s=i;"center"==a?(s=i+n/2,this.Canvas.textAlign="center"):"right"==a?(s=i+n-2,this.Canvas.textAlign="right"):(s+=2,this.Canvas.textAlign="left");var h=this.Canvas.measureText(t).width+1,l=!1;if(h>=n){this.Canvas.save(),l=!0;var u={Left:i,Top:r+this.ItemMergin.Top,Width:n,Height:this.RowHeight};this.Canvas.beginPath(),this.Canvas.rect(u.Left,u.Top,u.Width,u.Height),this.Canvas.clip()}this.Canvas.textBaseline="middle",this.Canvas.fillStyle=e,this.Canvas.fillText(t,s,r+this.ItemMergin.Top+this.RowHeight/2),l&&this.Canvas.restore()}},this.DrawItemTextEx=function(t,e,a,i){var r=t.Text,n=t.TextColor,o=t.Symbol,s=t.TextAlign,h=this.Canvas.measureText(r).width+1,l=h,u=o.Size*A()+"px "+o.Family;this.Canvas.font=u;for(var c=[],f=0;f<o.Data.length;++f){var d=o.Data[f],C=this.Canvas.measureText(d.Text).width+1;if(l+C>i)break;l+=C,c[f]=C}var p=e,m=a+this.ItemMergin.Top+this.RowHeight/2;"center"==s?p=e+(i-l)/2:"right"==s?p=e+(i-l):p+=2,this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.font=this.ItemFont,this.Canvas.fillStyle=n,this.Canvas.fillText(r,p,m),p+=h,this.Canvas.font=u;for(var f=0;f<c.length;++f){var d=o.Data[f];this.Canvas.fillStyle=d.Color,this.Canvas.fillText(d.Text,p,m),p+=c[f]}this.Canvas.font=this.ItemFont},this.DrawIconItem=function(t,e,a,i){if(t&&t.Font&&t.Text){var r=t.Text,n=t.TextColor,o=t.TextAlign;this.Canvas.font=t.Font;var s=this.Canvas.measureText(r).width+1,h=e,l=a+this.ItemMergin.Top+this.RowHeight/2;"center"==o?h=e+(i-s)/2:"right"==o?h=e+(i-s):h+=2,this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.fillStyle=n,this.Canvas.fillText(r,h,l),this.Canvas.font=this.ItemFont}},this.TextEllipsis=function(t,e,a){if(!t)return null;if(t.length<a.length)return t;var i=a.length-3;if(i<0)return null;for(var r=t.slice(0,i),n=i;n<t.length;++n){var o=r+t[n]+"...",s=this.Canvas.measureText(o).width;if(s>e){r+="...";break}r+=t[n]}return r},this.DrawMultiBar=function(t,e,a){if(!e.Source||!Te.IsNonEmptyArray(e.Source))return!1;var i=e.Source[t.DataIndex];if(!i)return!1;if(!Te.IsNonEmptyArray(i.Value))return!1;for(var r=a.Width-this.BarMergin.Left-this.BarMergin.Right,n=a.Left+this.BarMergin.Left,o=a.Top+this.RowMergin.Top+this.BarMergin.Top,s=a.Height-this.RowMergin.Top-this.RowMergin.Bottom-this.BarMergin.Top-this.BarMergin.Bottom,h=n+r,l=0;l<i.Value.length;++l){var u=i.Value[l];if(!(u<=0)){if(n>=h)break;var c=r*u;c<1&&(c=1),n+c>h&&(c=h-n);var f=l;Te.IsNonEmptyArray(i.Color)&&l<i.Color.length&&(f=i.Color[l]),this.Canvas.fillStyle=ia.DealList.FieldColor.Bar[f],this.Canvas.fillRect(n,o,c,s),n+=c}}return!0},this.DrawCenterBar=function(t,e,a){if(!e.Source||!Te.IsNonEmptyArray(e.Source))return!1;var i=e.Source[t.DataIndex];if(!i)return!1;if(!Te.IsNonEmptyArray(i.Value))return!1;for(var r=(a.Width-this.BarMergin.Left-this.BarMergin.Right)/2,n=a.Left+this.BarMergin.Left,o=n+r,s=a.Top+this.RowMergin.Top+this.BarMergin.Top,h=a.Height-this.RowMergin.Top-this.RowMergin.Bottom-this.BarMergin.Top-this.BarMergin.Bottom,l=0;l<i.Value.length&&l<2;++l){var u=i.Value[l];if(!(u<=0)){u>1&&(u=1);var c=r*u;c<1&&(c=1);var f=l;Te.IsNonEmptyArray(i.Color)&&l<i.Color.length&&(f=i.Color[l]),this.Canvas.fillStyle=ia.DealList.FieldColor.Bar[f],0==l?this.Canvas.fillRect(o,s,-c,h):this.Canvas.fillRect(o,s,c,h)}}},this.DrawLine=function(t,e,a){if(!t)return!1;if(!Te.IsNonEmptyArray(t.Data))return!1;var i=a.Width-this.ItemMergin.Left-this.ItemMergin.Right,r=a.Left+this.ItemMergin.Left,n=a.Top+this.ItemMergin.Top,o=a.Height-this.ItemMergin.Top-this.ItemMergin.Bottom,s=r+i,h=n+o,l=function(e){var a=t.Count;if(1==a)return 0==e?r:s;if(a<=0)return r;if(e>=a)return s;var n=r+i*e/a;return n},u=t.Max,c=t.Min;if(Te.IsNumber(t.YClose))if(t.YClose==u&&t.YClose==c)u=t.YClose+.1*t.YClose,c=t.YClose-.1*t.YClose;else{var f=Math.max(Math.abs(t.YClose-u),Math.abs(t.YClose-c));u=t.YClose+f,c=t.YClose-f}var d=function(t){if(t<=c)return h;if(t>=u)return n;var t=o*(t-c)/(u-c);return h-t};this.Canvas.save();var C=null;if(Te.IsNumber(t.YClose)){var p=d(t.YClose);p=_(p),C=p,this.Canvas.setLineDash([2,2]),this.Canvas.strokeStyle=this.CloseLineConfig.YCloseColor,this.Canvas.beginPath(),this.Canvas.moveTo(r,p),this.Canvas.lineTo(s,p),this.Canvas.stroke(),this.Canvas.setLineDash([])}t.Color?this.Canvas.strokeStyle=t.Color:this.Canvas.strokeStyle=this.CloseLineConfig.CloseColor;for(var m,D=!0,v={},g=0,S=0;S<t.Data.length;++S){var T=t.Data[S];Te.IsNumber(T)&&(m=l(S),p=d(T),D?(this.Canvas.beginPath(),this.Canvas.moveTo(m,p),D=!1,v={X:m,Y:p}):this.Canvas.lineTo(m,p),++g)}g>0&&(this.Canvas.stroke(),e.IsDrawArea&&Te.IsNumber(C)&&(this.Canvas.lineTo(m,C),this.Canvas.lineTo(v.X,C),this.Canvas.closePath(),this.SetFillStyle(this.CloseLineConfig.AreaColor,r,n,r,h),this.Canvas.fill())),this.Canvas.restore()},this.DrawKLine=function(t,e,a,i){if(e.IsDrawCallback){var r=this.GetEventCallback(w.ON_REPORT_DRAW_KLINE);if(r||r.Callback){var n={Column:e,Data:i,KLineData:t,Rect:a,PreventDefault:!1};if(r.Callback(r,n,this),n.PreventDefault)return}}if(t&&Te.IsNonEmptyArray(t.Data)){var o=t.Data[1],s=t.Data[2],h=[{Open:t.Data[0],High:o,Low:s,Close:t.Data[3]}];this.DrawKLineBar(h,o,s,a)}},this.DrawKLineBar=function(t,e,a,i){for(var r,n,o=i.Left+this.ItemMergin.Left,s=i.Width-this.ItemMergin.Left-this.ItemMergin.Right,o=i.Left+this.ItemMergin.Left,h=i.Top+this.ItemMergin.Top+4,l=i.Height-this.ItemMergin.Top-this.ItemMergin.Bottom-8,u=o+s,c=h+l,f=function(t){if(t<=a)return c;if(t>=e)return h;var t=l*(t-a)/(e-a);return c-t},d=this.KLineConfig.DataWidth,C=this.KLineConfig.DistanceWidth,p=o,m=0;m<t.length;++m,p+=d+C){var D=t[m];if((r=p)+((n=p+d)-r)/2,n>u)break;var v=f(D.Low),g=f(D.High),S=f(D.Open),T=f(D.Close);D.Open<D.Close?this.DrawKBarItem(D,d,this.KLineConfig.UpColor,1,r,n,v,g,S,T):D.Open>D.Close?this.DrawKBarItem(D,d,this.KLineConfig.DownColor,0,r,n,v,g,S,T):this.DrawKBarItem(D,d,this.KLineConfig.UnchagneColor,0,r,n,v,g,S,T)}},this.DrawKBarItem=function(t,e,a,i,r,n,o,s,h,l){var u=!1;1==i&&(u=!0);var c=Math.min(h,l),f=Math.max(h,l),d=Math.max(t.Open,t.Close),C=Math.min(t.Open,t.Close);this.Canvas.fillStyle=a,this.Canvas.strokeStyle=a;var p=r+(n-r)/2;if(u&&e%2!=0&&(e-=1),e>=4){if(t.High>d){this.Canvas.beginPath();var m=p;u&&(m=r+e/2),this.Canvas.moveTo(_(m),_(c)),this.Canvas.lineTo(_(m),_(s)),this.Canvas.stroke()}if(Math.abs(f-c)<1?this.Canvas.fillRect(k(r),k(c),k(e),1):u?(this.Canvas.beginPath(),this.Canvas.rect(_(r),_(c),k(e),k(f-c)),this.Canvas.stroke()):this.Canvas.fillRect(k(r),k(c),k(e),k(f-c)),t.Low<C){this.Canvas.beginPath();var m=p;u&&(m=r+e/2),this.Canvas.moveTo(_(m),_(f)),this.Canvas.lineTo(_(m),_(o)),this.Canvas.stroke()}}},this.SetFillStyle=function(t,e,a,i,r){if(Array.isArray(t)){var n=this.Canvas.createLinearGradient(e,a,i,r),o=1/t.length;for(var s in t)n.addColorStop(s*o,t[s]);this.Canvas.fillStyle=n}else this.Canvas.fillStyle=t},this.GetCustomTextDrawInfo=function(t,e,a,i,r){var n=this.GetEventCallback(w.ON_DRAW_CUSTOM_TEXT);if(!n||!n.Callback)return!1;var o={Symbol:e,Column:t,Value:a,Data:r,Out:{Text:null,TextColor:null,TextAlign:null}};return n.Callback(n,o,this),o.Out.Text&&(i.Text=o.Out.Text),o.Out.TextColor&&(i.TextColor=o.Out.TextColor),o.Out.TextAlign&&(i.TextAlign=o.Out.TextAlign),o.Out.BGColor&&(i.BGColor=o.Out.BGColor),!0},this.FormatDrawInfo=function(t,e,a,i){if(!t.IsDrawCallback)return!1;var r=this.GetEventCallback(w.ON_REPORT_FORMAT_DRAW_INFO);if(!r||!r.Callback)return!1;var n={Stock:e,Column:t,Data:i,DrawInfo:a};r.Callback(r,n,this)},this.GetFixedRowTextDrawInfo=function(t,e,a,i){var r=this.GetEventCallback(w.ON_DRAW_REPORT_FIXEDROW_TEXT);if(!r||!r.Callback)return!1;var n={RowIndex:t,ColIndex:e,Column:a,Data:this.FixedRowData,Out:{Text:null,TextColor:null,TextAlign:null}};return r.Callback(r,n,this),n.Out.Text&&(i.Text=n.Out.Text),n.Out.TextColor&&(i.TextColor=n.Out.TextColor),n.Out.TextAlign&&(i.TextAlign=n.Out.TextAlign),!0},this.GetVolColor=function(t,e){var a=this.GetEventCallback(w.ON_DRAW_DEAL_VOL_COLOR);if(a&&a.Callback){var i={Data:e,TextColor:null};if(a.Callback(a,i,this),i.TextColor)return i.TextColor}return t.TextColor},this.GetNameColor=function(t,e,a){var i=this.GetEventCallback(w.ON_DRAW_REPORT_NAME_COLOR);if(i&&i.Callback){var r={Symbol:e,TextColor:null,RowType:a};if(i.Callback(i,r,this),r.TextColor)return r.TextColor}return t.TextColor},this.GetFontHeight=function(t,e){return O(this.Canvas,t,e)},this.OnMouseDown=function(t,e,a){if(!this.Data)return null;if(this.Tab){var i=this.Tab.OnMouseDown(t,e,a);if(i)return{Type:1,Tab:i}}var r=A(),n={X:t/r,Y:e/r};if(this.UIElement)var o={Left:this.UIElement.getBoundingClientRect().left,Top:this.UIElement.getBoundingClientRect().top};else var o={Left:null,Top:null};var s=this.PtInFixedBody(t,e);if(s){var h=!0,l=w.ON_CLICK_REPORT_FIXEDROW;return 2==a.button&&(l=w.ON_RCLICK_REPORT_FIXEDROW),this.SendClickEvent(l,{Data:s,X:t,Y:e,e:a,Inside:n,UIElement:o}),this.SelectedFixedRow=s.Index,this.SelectedRow=-1,{Type:4,Redraw:h,Row:s}}var s=this.PtInBody(t,e);if(s){var h=!0;0==this.SelectedModel?(this.SelectedRow==s.Index&&(h=!1),this.SelectedRow=s.Index,this.SelectedFixedRow=-1):(this.SelectedRow==s.DataIndex&&(h=!1),this.SelectedRow=s.DataIndex,this.SelectedFixedRow=-1);var l=w.ON_CLICK_REPORT_ROW;return 2==a.button&&(l=w.ON_RCLICK_REPORT_ROW),this.SendClickEvent(l,{Data:s,X:t,Y:e,e:a,Inside:n,UIElement:o}),{Type:2,Redraw:h,Row:s}}var u=this.PtInHeader(t,e);if(u){var l=w.ON_CLICK_REPORT_HEADER;return 2==a.button?l=w.ON_RCLICK_REPORT_HEADER:0==a.button&&(l=w.ON_CLICK_REPORT_HEADER),this.SendClickEvent(l,{Data:s,X:t,Y:e,e:a,Inside:n,UIElement:o}),{Type:3,Redraw:h,Header:u}}return null},this.OnDrawgRow=function(t,e,a){if(!this.Data)return null;if(!Te.IsNonEmptyArray(this.Data.Data))return null;var i=this.RowHeight/2,r=this.RectClient.Top+this.HeaderHeight,n=this.ChartBorder.GetChartWidth(),o=r+this.FixedRowHeight*this.FixedRowCount;if(e<o+i)return{Type:5};for(var s=this.Data.YOffset,h=0;s<this.Data.Data.length&&h<this.RowCount;++s,++h){var l=this.Data.Data[s],u={Left:0,Top:o,Right:n,Bottom:o+this.RowHeight};if(u.Top+=i,u.Bottom+=i,t>=u.Left&&t<=u.Right&&e>=u.Top&&e<=u.Bottom){var c={DataIndex:s,Index:h,Symbol:l,Pos:0};return 0==h?c.Pos=1:h==this.RowCount-1&&(c.Pos=2),{Type:2,Data:c}}o+=this.RowHeight}return h<this.RowCount?{Type:6}:{Type:7}},this.OnDblClick=function(t,e,a){if(!this.Data)return!1;var i=this.PtInHeaderDragBorder(t,e);if(i)return this.SendClickEvent(w.ON_DBCLICK_REPORT_DRAG_COLUMN_WIDTH,{Data:i,X:t,Y:e}),!0;var r=this.PtInBody(t,e);return!!r&&(this.SendClickEvent(w.ON_DBCLICK_REPORT_ROW,{Data:r,X:t,Y:e}),!0)},this.PtInBody=function(t,e){if(!this.Data)return null;if(!Te.IsNonEmptyArray(this.Data.Data))return null;for(var a=this.RectClient.Top+this.HeaderHeight,i=this.RectClient.Left,r=this.RectClient.Right,n=(this.RectClient.Right,this.RectClient.Left,a+this.FixedRowHeight*this.FixedRowCount),o=this.Data.YOffset,s=0;o<this.Data.Data.length&&s<this.RowCount;++o,++s){var h=this.Data.Data[o],l={Left:i,Top:n,Right:r,Bottom:n+this.RowHeight};if(t>=l.Left&&t<=l.Right&&e>=l.Top&&e<=l.Bottom){var u={Rect:l,DataIndex:o,Index:s,Symbol:h};return u.Item=this.PtInItem(t,e,l.Top,l.Bottom),u}n+=this.RowHeight}return null},this.PtInFixedBody=function(t,e){if(this.FixedRowCount<=0)return null;for(var a=this.RectClient.Top+this.HeaderHeight,i=this.RectClient.Left,r=this.RectClient.Right,n=(this.RectClient.Right,this.RectClient.Left,a),o=0;o<this.FixedRowCount;++o){var s={Left:i,Top:n,Right:r,Bottom:n+this.FixedRowHeight};if(t>=s.Left&&t<=s.Right&&e>=s.Top&&e<=s.Bottom){var h={Rect:s,Index:o};return h.Item=this.PtInItem(t,e,s.Top,s.Bottom),h}n+=this.FixedRowHeight}return null},this.PtInItem=function(t,e,a,i){for(var r=this.RectClient.Left,n=this.RectClient.Right,o=r,s=0;s<this.FixedColumn&&s<this.Column.length;++s){var h=this.Column[s],l={Left:o,Right:o+h.Width,Top:a,Bottom:i};if(t>=l.Left&&t<=l.Right&&e>=l.Top&&e<=l.Bottom)return{Rect:l,Column:h,Index:s,IsFixed:!0};o+=h.Width}for(var s=this.FixedColumn+this.Data.XOffset;s<this.Column.length;++s){var h=this.Column[s];if(o>=n)break;var l={Left:o,Right:o+h.Width,Top:a,Bottom:i};if(t>=l.Left&&t<=l.Right&&e>=l.Top&&e<=l.Bottom)return{Rect:l,Column:h,Index:s,IsFixed:!1};o+=h.Width}return null},this.PtInHeader=function(t,e){if(!this.IsShowHeader)return null;var a=this.RectClient.Left,i=this.RectClient.Right,r=this.RectClient.Top,n=r+this.HeaderHeight;return t>=a&&t<=i&&e>=r&&e<=n?this.PtInItem(t,e,r,n):null},this.IsPtInBody=function(t,e){var a=this.RectClient.Top+this.HeaderHeight,i=this.RectClient.Left,r=this.RectClient.Right,n=this.RectClient.Bottom;return t>=i&&t<=r&&e>=a&&e<=n},this.IsPtInHeader=function(t,e){if(!this.IsShowHeader)return!1;var a=this.RectClient.Left,i=this.RectClient.Right,r=this.RectClient.Top,n=r+this.HeaderHeight;return t>=a&&t<=i&&e>=r&&e<=n},this.SendClickEvent=function(t,e){var a=this.GetEventCallback(t);a&&a.Callback&&a.Callback(a,e,this)},this.DrawDragRow=function(){if(this.DragRow){var t=this.DragRow;if(t.Data&&t.Inside&&t.Data.Row){var e=t.Data.Row.DataIndex;if(Te.IsNumber(e)&&!(e<0)){var a=t.Inside.Y-this.RowHeight/2,i=a,r=this.RectClient.Left,n=this.RectClient.Right-this.RectClient.Left;this.Canvas.fillStyle=this.DragRowColor,this.Canvas.fillRect(r,a,n,this.RowHeight);var o=this.Data.Data[e],s={Symbol:o,Stock:null,Block:null};this.GetStockDataCallback&&(s.Stock=this.GetStockDataCallback(o)),this.GetBlockDataCallback&&(s.Block=this.GetBlockDataCallback(o)),s.Decimal=Ga(o);var h=this.RectClient.Right;this.Canvas.font=this.ItemFont;for(var l=0;l<this.FixedColumn&&l<this.Column.length;++l){var u=this.Column[l];if(this.DrawItem(e,s,u,r,i,3),(r+=u.Width)>=h)break}for(var l=this.FixedColumn+this.Data.XOffset;l<this.Column.length;++l){var u=this.Column[l];if(this.DrawItem(e,s,u,r,i,3),(r+=u.Width)>=h)break}}}}},this.PtInCell=function(t,e){if(!Te.IsNonEmptyArray(this.TooltipRect))return null;for(var a=0;a<this.TooltipRect.length;++a){var i=this.TooltipRect[a],r=i.Rect;if(r&&(t>=r.Left&&t<=r.Right&&e>=r.Top&&e<=r.Bottom))return{Rect:i.Rect,Stock:i.Stock,Column:i.Column,Index:i.Index}}},this.PtInHeaderDragBorder=function(t,e){if(!this.IsShowHeader)return null;var a=this.RectClient.Left,i=this.RectClient.Right,r=this.RectClient.Top,n=r+this.HeaderHeight;if(!(t>=a&&t<=i&&e>=r&&e<=n))return null;for(var o=a,s=5*A(),h=0;h<this.FixedColumn&&h<this.Column.length;++h){var l=this.Column[h];if(!0===l.EnableDragWidth){var u={Right:o+l.Width,Top:r,Bottom:n};if(u.Left=u.Right-s,t>=u.Left&&t<=u.Right&&e>=u.Top&&e<=u.Bottom)return{Rect:u,Column:l,Index:h,IsFixed:!0}}o+=l.Width}for(var h=this.FixedColumn+this.Data.XOffset;h<this.Column.length;++h){var l=this.Column[h];if(o>=i)break;if(!0===l.EnableDragWidth){var u={Right:o+l.Width,Top:r,Bottom:n};if(u.Left=u.Right-s,t>=u.Left&&t<=u.Right&&e>=u.Top&&e<=u.Bottom)return{Rect:u,Column:l,Index:h,IsFixed:!1}}o+=l.Width}return null}};if(a.Frame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.UIElement=this.UIElement,a.GetEventCallback=function(t){return e.GetEventCallback(t)},a.GetStockDataCallback=function(t){return e.GetStockData(t)},a.GetBlockDataCallback=function(t){return e.GetBlockData(t)},a.GetFlashBGDataCallback=function(t,a){return e.GetFlashBGData(t,a)},a.Data=this.Data,a.GlobalOption=this.GlobalOption,a.FixedRowData=this.FixedRowData,a.SortInfo=this.SortInfo,a.Tab=new function(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartReportTab",this.IsDrawFirst=!1,this.GetEventCallback,this.Report,this.IsShow=!0,this.TabList=[],this.SelectedTabIndex=-1,this.MoveOnTabIndex=-1,this.MaxPos=15,this.CurrentPos=15,this.Step=1,this.ScrollBarWidth=ia.Report.Tab.ScrollBarWidth,this.ButtonColor=ia.Report.Tab.ButtonColor,this.BarColor=ia.Report.Tab.BarColor,this.BorderColor=ia.Report.Tab.BorderColor,this.Mergin={Left:2,Right:2,Top:2,Bottom:2},this.TabFontConfig={Size:ia.Report.Tab.Font.Size,Name:ia.Report.Tab.Font.Name},this.TabFont,this.TabTitleColor=ia.Report.Tab.TabTitleColor,this.TabSelectedTitleColor=ia.Report.Tab.TabSelectedTitleColor,this.TabSelectedBGColor=ia.Report.Tab.TabSelectedBGColor,this.TabMoveOnTitleColor=ia.Report.Tab.TabMoveOnTitleColor,this.TabBGColor=ia.Report.Tab.TabBGColor,this.TabMergin={Top:ia.Report.Tab.Mergin.Top,Left:ia.Report.Tab.Mergin.Left,Right:ia.Report.Tab.Mergin.Right,Bottom:ia.Report.Tab.Mergin.Bottom},this.Height,this.ButtonSize=25,this.TabWidth=0,this.RectScroll={Left:null,Right:null,Bar:null,Client:null},this.ReloadResource=function(t){this.ScrollBarWidth=ia.Report.Tab.ScrollBarWidth,this.ButtonColor=ia.Report.Tab.ButtonColor,this.BarColor=ia.Report.Tab.BarColor,this.BorderColor=ia.Report.Tab.BorderColor,this.TabFontConfig={Size:ia.Report.Tab.Font.Size,Name:ia.Report.Tab.Font.Name},this.TabTitleColor=ia.Report.Tab.TabTitleColor,this.TabSelectedTitleColor=ia.Report.Tab.TabSelectedTitleColor,this.TabSelectedBGColor=ia.Report.Tab.TabSelectedBGColor,this.TabMoveOnTitleColor=ia.Report.Tab.TabMoveOnTitleColor,this.TabBGColor=ia.Report.Tab.TabBGColor,this.TabMergin={Top:ia.Report.Tab.Mergin.Top,Left:ia.Report.Tab.Mergin.Left,Right:ia.Report.Tab.Mergin.Right,Bottom:ia.Report.Tab.Mergin.Bottom}},this.SetTabList=function(t){this.TabList=[];for(var e=0;e<t.length;++e){var a=t[e];if(a.Title){var i={Title:a.Title,IsMenu:!1,FixedSymbol:[],FixedRowCount:0};if(a.ID&&(i.ID=a.ID),a.MenuID&&(i.MenuID=a.MenuID),Te.IsBool(a.IsMenu)&&(i.IsMenu=a.IsMenu),Te.IsNonEmptyArray(a.FixedSymbol))for(var r=0;r<a.FixedSymbol.length;++r){var n=a.FixedSymbol[r];n&&n.Symbol&&(i.FixedSymbol.push(n),++i.FixedRowCount)}this.TabList.push(i)}}},this.CalculateSize=function(){var t=A();this.TabFont=this.TabFontConfig.Size*t+"px "+this.TabFontConfig.Name,this.Height=this.GetFontHeight(this.TabFont,"8")+this.Mergin.Top+this.Mergin.Bottom;var e=Math.min(25,this.Height-this.Mergin.Top-this.Mergin.Bottom);this.ButtonSize=e},this.DrawScrollbar=function(t,e,a,i){this.RectScroll={Left:null,Right:null,Bar:null,Client:null};var r=this.Report.GetXScrollPos(),n=this.Report.GetXScrollRange();if(!(n<=0||this.Report.IsShowAllColumn)){var t=t+this.TabWidth;if(!(t+2*this.ScrollBarWidth>a)){this.MaxPos=n,this.CurrentPos=r;var o=this.ButtonSize,s={Left:t+this.Mergin.Left,Top:i-o-this.Mergin.Bottom,Width:o,Height:o};s.Right=s.Left+o,s.Bottom=s.Top+o;var h={Left:a-o-this.Mergin.Right,Top:s.Top,Width:o,Height:o};h.Right=h.Left+o,h.Bottom=h.Top+o,this.Canvas.fillStyle=this.ButtonColor,this.Canvas.fillRect(s.Left,s.Top,s.Width,s.Height),this.Canvas.fillRect(h.Left,h.Top,h.Width,h.Height),this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(s.Left,s.Top,s.Width,s.Height),this.Canvas.strokeRect(h.Left,h.Top,h.Width,h.Height);var l=h.Left-2-(s.Right+2),u=l-this.ScrollBarWidth,c=u*this.CurrentPos/this.MaxPos,f=s.Right+2+c,d={Left:f,Top:s.Top,Width:this.ScrollBarWidth,Height:s.Height};d.Right=d.Left+this.ScrollBarWidth,d.Bottom=s.Bottom,this.Canvas.fillStyle=this.BarColor,this.Canvas.fillRect(d.Left,d.Top,d.Width,d.Height),this.RectScroll.Left=s,this.RectScroll.Right=h,this.RectScroll.Bar=d,this.RectScroll.Client={Left:s.Right,Right:h.Left,Top:s.Top,Bottom:s.Bottom}}}},this.DrawTab=function(t,e,a,i){this.TabWidth=0,this.Canvas.font=this.TabFont,this.Canvas.textBaseline="bottom";var r,n=i-e,o=t+1,s=i-this.TabMergin.Bottom,h=0,l=0,u=0;for(u=0;u<this.TabList.length;++u){var c=this.TabList[u];r=c.Title,c.IsMenu&&(r+="▲"),h=o+this.TabMergin.Left,l=this.Canvas.measureText(r).width;var f={Left:o,Top:e,Width:l+this.TabMergin.Left+this.TabMergin.Right,Height:n};if(f.Right=f.Left+f.Width,f.Bottom=f.Top+f.Height,f.Right>a)break;var d=this.TabBGColor;u==this.SelectedTabIndex&&(d=this.TabSelectedBGColor),this.Canvas.fillStyle=d,this.Canvas.fillRect(f.Left,f.Top,f.Width,f.Height),this.Canvas.textAlign="left";var C=this.TabTitleColor;u==this.MoveOnTabIndex&&(C=this.TabMoveOnTitleColor),u==this.SelectedTabIndex&&(C=this.TabSelectedTitleColor),this.Canvas.fillStyle=C,this.Canvas.fillText(r,h,s),c.Rect=f,o+=f.Width+1,this.TabWidth+=f.Width+1}for(;u<this.TabList.length;++u){var c=this.TabList[u];c.Rect=null}},this.OnMouseDown=function(t,e,a){var i=this.PtInTab(t,e);return i||this.PtInScroll(t,e)},this.PtInScroll=function(t,e){if(!this.RectScroll)return null;if(this.RectScroll.Left){var a=this.RectScroll.Left;if(t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom)return{Type:1,Rect:a}}if(this.RectScroll.Right){var a=this.RectScroll.Right;if(t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom)return{Type:2,Rect:a}}if(this.RectScroll.Bar){var a=this.RectScroll.Bar;if(t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom)return{Type:3,Rect:a}}if(this.RectScroll.Client){var a=this.RectScroll.Client;if(t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom)return{Type:4,Rect:a,Pos:this.GetScrollPostionByPoint(t,e)}}return null},this.PtInTab=function(t,e){for(var a=0;a<this.TabList.length;++a){var i=this.TabList[a];if(i.Rect){var r=i.Rect;if(t>=r.Left&&t<=r.Right&&e>=r.Top&&e<=r.Bottom){var n={Type:5,Rect:r,Tab:i,Index:a};return i.IsMenu,n}}}return null},this.GetFontHeight=function(t,e){return O(this.Canvas,t,e)},this.GetScrollPostionByPoint=function(t,e){var a=this.RectScroll.Client,i=a.Right-a.Left-this.ScrollBarWidth,r=parseInt(this.MaxPos*(t-a.Left)/i);return r}},a.Tab.Frame=this.Frame,a.Tab.Canvas=this.Canvas,a.Tab.ChartBorder=this.Frame.ChartBorder,a.Tab.Report=a,this.ChartPaint[0]=a,t&&!0===t.PageInfo){var i=new function(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartPageInfo",this.IsDrawFirst=!1,this.IsShow=!1,this.SizeChange=!0,this.Report,this.FontConfig={Size:ia.Report.PageInfo.Font.Size,Name:ia.Report.PageInfo.Font.Name},this.TextColor=ia.Report.PageInfo.TextColor,this.BGColor=ia.Report.PageInfo.BGColor,this.Mergin={Top:ia.Report.PageInfo.Mergin.Top,Left:ia.Report.PageInfo.Mergin.Left,Right:ia.Report.PageInfo.Mergin.Right,Bottom:ia.Report.PageInfo.Mergin.Bottom},this.Font,this.TextHeight=0,this.ReloadResource=function(t){this.FontConfig={Size:ia.Report.PageInfo.Font.Size,Name:ia.Report.PageInfo.Font.Name},this.TextColor=ia.Report.PageInfo.TextColor,this.BGColor=ia.Report.PageInfo.BGColor,this.Mergin={Top:ia.Report.PageInfo.Mergin.Top,Left:ia.Report.PageInfo.Mergin.Left,Right:ia.Report.PageInfo.Mergin.Right,Bottom:ia.Report.PageInfo.Mergin.Bottom}},this.Draw=function(){if(this.IsShow&&this.Report){var t=this.Report.GetCurrentPageStatus();if(!t.IsSinglePage){if(this.SizeChange){var e=A();this.Font=this.FontConfig.Size*e+"px "+this.FontConfig.Name,this.TextHeight=O(this.Canvas,this.Font,"擎")+this.Mergin.Top+this.Mergin.Bottom}var a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetRight(),r=this.ChartBorder.GetBottom()-2,n=a+(i-a)/2,o=t.DataCount+"/"+t.DataCount;this.Canvas.font=this.Font;var s=this.Canvas.measureText(o).width+4,h=n-s/2-this.Mergin.Left,l=r-this.TextHeight;this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(h,l,s+(this.Mergin.Left+this.Mergin.Right),this.TextHeight),o=t.Start+1+"/"+t.DataCount,this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(o,n,r-this.Mergin.Bottom),this.SizeChange=!1}}}};i.Frame=this.Frame,i.ChartBorder=this.Frame.ChartBorder,i.Canvas=this.Canvas,i.Report=a,this.ChartPaint[1]=i}if(t&&(Te.IsBool(t.IsShowHeader)&&(a.IsShowHeader=t.IsShowHeader),Te.IsNumber(t.FixedColumn)&&(a.FixedColumn=t.FixedColumn),Te.IsNumber(t.BorderLine)&&(this.Frame.BorderLine=t.BorderLine),Te.IsBool(t.TabShow)&&(a.Tab.IsShow=t.TabShow),Te.IsNumber(t.FixedRowCount)&&(a.FixedRowCount=t.FixedRowCount),Te.IsBool(t.ItemBorder)&&(a.IsDrawBorder=t.ItemBorder),Te.IsNumber(t.SelectedModel)&&(a.SelectedModel=t.SelectedModel),Te.IsNonEmptyArray(t.FixedSymbol))){a.FixedRowCount=0,this.FixedRowData.Type=1,this.FixedRowData.Symbol=[];for(var r=t.FixedSymbol,n=0;n<r.length;++n){var o=r[n];this.FixedRowData.Symbol.push(o.Symbol),++a.FixedRowCount}}var s=!0,h=!0;t&&(!1===t.KeyDown&&(s=!1,D.Chart.Log("[JSDealChartContainer::Create] not register keydown event.")),!1===t.Wheel&&(h=!1,D.Chart.Log("[JSDealChartContainer::Create] not register wheel event."))),s&&this.UIElement.addEventListener("keydown",function(t){e.OnKeyDown(t)},!0),h&&this.UIElement.addEventListener("wheel",function(t){e.OnWheel(t)},!0),this.UIElement.ondblclick=function(t){e.UIOnDblClick(t)},this.UIElement.onmousedown=function(t){e.UIOnMouseDown(t)},this.UIElement.onmouseup=function(t){e.UIOnMounseUp(t)},this.UIElement.oncontextmenu=function(t){e.UIOnContextMenu(t)},this.UIElement.onmousemove=function(t){e.UIOnMouseMove(t)},this.UIElement.onmouseout=function(t){e.UIOnMounseOut(t)},this.UIElement.onmouseleave=function(t){e.UIOnMouseleave(t)},this.UIElement.ontouchstart=function(t){e.OnTouchStart(t)},this.UIElement.ontouchmove=function(t){e.OnTouchMove(t)},this.UIElement.ontouchend=function(t){e.OnTouchEnd(t)}},this.Draw=function(){if(!(this.UIElement.width<=0||this.UIElement.height<=0)){this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var t=A();if(this.Canvas.lineWidth=t,this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return this.Frame.Draw({IsEnableSplash:this.ChartSplashPaint.IsEnableSplash}),void this.ChartSplashPaint.Draw();this.Frame.Draw(),this.Frame.DrawLogo();for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst&&a.Draw()}for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst||a.Draw()}this.GlobalOption.FlashBGCount>0&&this.DelayDraw(500)}},this.DelayDraw=function(t){var e=this;"number"==typeof this.FlashBGTimer&&(clearTimeout(this.FlashBGTimer),this.FlashBGTimer=null),this.FlashBGTimer=setTimeout(function(){e.Draw()},t)},this.ResetReportStatus=function(){this.Data.XOffset=0,this.Data.YOffset=0},this.ResetReportSelectStatus=function(){var t=this.GetReportChart();t&&(t.SelectedRow=-1,t.SelectedFixedRow=-1)},this.ClearData=function(){this.SourceData.Data=[],this.Data.Data=[],this.BlockData=new C.default},this.ResetSortStatus=function(){this.SortInfo.Field=-1,this.SortInfo.Sort=0},this.SetSymbolList=function(t,e){if(this.ClearData(),this.ResetReportStatus(),this.ResetSortStatus(),Te.IsNonEmptyArray(t))for(var a=0;a<t.length;++a)this.Data.Data.push(t[a]);var i=this.ChartPaint[0];i&&(i.Data=this.Data),this.Draw()},this.ChangeSymbol=function(t,e){if(this.Symbol=t,this.ClearData(),this.ResetReportStatus(),this.ResetSortStatus(),this.ResetReportSelectStatus(),e){if(Te.IsNumber(e.TabSelected)){var a=this.GetTabChart();a&&(a.SelectedTabIndex=e.TabSelected)}if(Array.isArray(e.FixedSymbol)){var i=this.GetReportChart();if(i){i.FixedRowCount=0,this.FixedRowData.Type=1,this.FixedRowData.Symbol=[];for(var r=e.FixedSymbol,n=0;n<r.length;++n){var o=r[n];this.FixedRowData.Symbol.push(o.Symbol),++i.FixedRowCount}this.SetSizeChange(!0)}}if(e.SortInfo){var o=e.SortInfo;Te.IsNumber(o.Field)&&(this.SortInfo.Field=o.Field),Te.IsNumber(o.Sort)&&(this.SortInfo.Sort=o.Sort)}}this.RequestMemberListData()},this.RequestMemberListData=function(){var t=this;if(this.NetworkFilter){var e={Name:"JSReportChartContainer::RequestMemberListData",Explain:"板块成分数据",Request:{Data:{symbol:this.Symbol}},Self:this,PreventDefault:!1};if(this.SortInfo.Field>=0&&this.SortInfo.Sort>0){var a=this.GetReportChart();if(a){var i=a.Column[this.SortInfo.Field];e.Sort={Column:i,Field:this.SortInfo.Field,Sort:this.SortInfo.Sort}}}if(this.NetworkFilter(e,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMemberListData(e)}),1==e.PreventDefault)return}throw{Name:"JSReportChartContainer::RequestMemberListData",Error:"(板块成分数据)不提供内置测试数据"}},this.RecvMemberListData=function(t){if(this.ClearData(),Te.IsNonEmptyArray(t.data))for(var e=0;e<t.data.length;++e)this.Data.Data.push(t.data[e]),this.SourceData.Data.push(t.data[e]);this.Draw(),this.UpdateStockData()},this.AutoUpdateEvent=function(t,e){var a=t?w.RECV_START_AUTOUPDATE:w.RECV_STOP_AUTOUPDATE;if(this.mapEvent.has(a)){var i=this,r=this.mapEvent.get(a),n={Stock:{Symbol:this.Symbol,Name:this.Name,DayCount:this.DayCount},Explain:e};t&&(n.Callback=function(t){i.RecvDealUpdateData(t)}),r.Callback(r,n,this)}},this.RequestStockListData=function(t){this.ChartSplashPaint.SetTitle(this.SplashTitle.StockList),this.ChartSplashPaint.EnableSplash(!0),this.Draw();var e=this;if(this.NetworkFilter){var a={Name:"JSReportChartContainer::RequestStockListData",Explain:"码表数据",Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(a){e.ChartSplashPaint.EnableSplash(!1),e.RecvStockListData(a,t)}),1==a.PreventDefault)return}throw{Name:"JSReportChartContainer::RequestStockListData",Error:"(码表数据)不提供内置测试数据"}},this.RecvStockListData=function(t,e){if(Te.IsNonEmptyArray(t.data))for(var a=0;a<t.data.length;++a){var i=t.data[a],r=i[0],n=null;this.MapStockData.has(r)?n=this.MapStockData.get(r):((n=new Si).OriginalSymbol=r,this.MapStockData.set(r,n)),n.Symbol=this.GetSymbolNoSuffix(r),n.Name=i[1],this.ReadStockJsonData(n,i)}e&&e.Callback?e.Callback():(this.Draw(),this.UpdateStockData())},this.UpdateMapStockData=function(t){if(t&&Te.IsNonEmptyArray(t.data))for(var e=0;e<t.data.length;++e){var a=t.data[e],i=a[0],r=null;this.MapStockData.has(i)?r=this.MapStockData.get(i):((r=new Si).OriginalSymbol=i,this.MapStockData.set(i,r)),r.Symbol=this.GetSymbolNoSuffix(i),r.Name=a[1],this.ReadStockJsonData(r,a)}},this.GetStockData=function(t){return this.MapStockData&&this.MapStockData.has(t)?this.MapStockData.get(t):null},this.GetBlockData=function(t){return this.BlockData&&this.BlockData.has(t)?this.BlockData.get(t):null},this.SetFlashBGItem=function(t,e){var a={ID:e.ID,Color:e.Color,Count:1};if(Te.IsNumber(e.Count)&&(a.Count=e.Count),Te.IsNumber(e.Time)?a.Time=e.Time:a.Time=Date.now(),this.FlashBG.has(t)){var i=this.FlashBG.get(t);i.LastTime=a.Time,i.Data.set(a.ID,a)}else{var i={LastTime:a.Time,Data:new C.default([[a.ID,a]])};this.FlashBG.set(t,i)}},this.GetFlashBGData=function(t,e){if(!this.FlashBG)return null;if(!this.FlashBG.has(t))return null;var a=this.FlashBG.get(t);if(e-a.LastTime>=3e3)return this.FlashBG.delete(t),null;if(!a.Data||a.Data.size<=0)return this.FlashBG.delete(t),null;var i=[],r=!0,n=!1,o=void 0;try{for(var s,h=(0,f.default)(a.Data);!(r=(s=h.next()).done);r=!0){var l=s.value,u=l[1];(e-u.Time>=3e3||u.Count<=0)&&i.push(u.ID)}}catch(t){n=!0,o=t}finally{try{!r&&h.return&&h.return()}finally{if(n)throw o}}if(Te.IsNonEmptyArray(i)){for(var c=0;c<i.length;++c)a.Data.delete(i[c]);if(a.Data.size<=0)return this.FlashBG.delete(t),null}return a},this.DelayUpdateStockData=function(){var t=this;null!=this.DelayUpdateTimer&&(clearTimeout(this.DelayUpdateTimer),this.DelayUpdateTimer=null);var e=this.DelayUpdateFrequency;this.DelayUpdateTimer=setTimeout(function(){t.UpdateStockData()},e)},this.UpdateStockData=function(){if(Te.IsNonEmptyArray(this.Data.Data)){var t=this.ChartPaint[0];if(t){if(this.SortInfo&&this.SortInfo.Field>=0&&this.SortInfo.Sort>0){var e=t.Column[this.SortInfo.Field];if(2==e.Sort)return void this.RequestStockSortData(e,this.SortInfo.Field,this.SortInfo.Sort)}var a=t.ShowSymbol;Te.IsNonEmptyArray(a)&&this.RequestStockData(a)}}},this.RequestStockData=function(t){var e=this;if(this.NetworkFilter){var a={Name:"JSDealChartContainer::RequestStockData",Explain:"报价列表股票数据",Request:{Data:{stocks:t}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(t){e.RecvStockData(t),e.AutoUpdate()}),1==a.PreventDefault)return}throw{Name:"JSReportChartContainer::RequestStockData",Error:"(报价列表股票数据)不提供内置测试数据"}},this.RecvStockData=function(t){var e=new c.default;if(Te.IsNonEmptyArray(t.data))for(var a=0;a<t.data.length;++a){var i=t.data[a],r=i[0];if(r){var n=null;this.MapStockData.has(r)?n=this.MapStockData.get(r):((n=new Si).OriginalSymbol=r,n.Symbol=this.GetSymbolNoSuffix(r),this.MapStockData.set(r,n)),this.ReadStockJsonData(n,i),e.has(r)||e.add(r)}}var o=this.ChartPaint[0];if(o){for(var s=!1,h=o.ShowSymbol,a=0;a<h.length;++a)if(e.has(h[a].Symbol)){s=!0;break}s&&this.Draw()}},this.ReadStockJsonData=function(t,e){Te.IsString(e[1])&&(t.Name=e[1]),Te.IsNumber(e[2])&&(t.YClose=e[2]),Te.IsNumber(e[3])&&(t.Open=e[3]),Te.IsNumber(e[4])&&(t.High=e[4]),Te.IsNumber(e[5])&&(t.Low=e[5]),Te.IsNumber(e[6])&&(t.Price=e[6]),Te.IsNumber(e[7])&&(t.Vol=e[7]),Te.IsNumber(e[8])&&(t.Amount=e[8]),Te.IsNumber(e[9])&&(t.BuyPrice=e[9]),Te.IsNumber(e[10])&&(t.BuyVol=e[10]),Te.IsNumber(e[11])&&(t.SellPrice=e[11]),Te.IsNumber(e[12])&&(t.SellVol=e[12]),Te.IsNumber(e[13])&&(t.AvPrice=e[13]),Te.IsNumber(e[14])&&(t.OutShares=e[14]),Te.IsNumber(e[15])&&(t.TotalShares=e[15]),Te.IsNumber(e[16])&&(t.LimitHigh=e[16]),Te.IsNumber(e[17])&&(t.LimitLow=e[17]),Te.IsNumber(e[18])&&(t.VolIn=e[18]),Te.IsNumber(e[19])&&(t.VolOut=e[19]),Te.IsNumber(e[20])&&(t.DealNum=e[20]),Te.IsNumber(e[21])&&(t.Increase=e[21]),Te.IsNumber(e[22])&&(t.UpDown=e[22]),Te.IsNumber(e[23])&&(t.Exchange=e[23]),Te.IsNumber(e[24])&&(t.Amplitude=e[24]),Te.IsNumber(e[25])&&(t.CircMarketValue=e[25]),Te.IsNumber(e[26])&&(t.MarketValue=e[26]),e[27]&&(t.NameEx=e[27]),Te.IsNumber(e[21])||Te.IsNumber(t.Price)&&Te.IsNumber(t.YClose)&&0!=t.YClose&&(t.Increase=(t.Price-t.YClose)/t.YClose*100),Te.IsNumber(e[22])||Te.IsNumber(t.Price)&&Te.IsNumber(t.YClose)&&(t.UpDown=t.Price-t.YClose),Te.IsNumber(e[23])||Te.IsNumber(t.Vol)&&Te.IsNumber(t.OutShares)&&t.OutShares>0&&(t.Exchange=t.Vol/t.OutShares*100),Te.IsNumber(e[24])||Te.IsNumber(t.High)&&Te.IsNumber(t.Low)&&Te.IsNumber(t.YClose)&&0!=t.YClose&&(t.Amplitude=(t.High-t.Low)/t.YClose*100),Te.IsNumber(e[25])||Te.IsNumber(t.OutShares)&&Te.IsNumber(t.Price)&&(t.CircMarketValue=t.OutShares*t.Price),Te.IsNumber(e[26])||Te.IsNumber(t.TotalShares)&&Te.IsNumber(t.Price)&&(t.MarketValue=t.TotalShares*t.Price),e[30]&&(t.ExtendData=e[30]),e[31]&&this.BlockData.set(t.OriginalSymbol,e[31]),e[32]&&(t.CloseLine=e[32]),e[33]&&(t.KLine=e[33])},this.GetSymbolNoSuffix=function(t){var e=t.lastIndexOf(".");return e>0?t.substring(0,e):t},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=null)},this.AutoUpdate=function(t){if(this.CancelAutoUpdate(),this.IsAutoUpdate){var e=this,a=2,i=this.GetEventCallback(w.ON_REPORT_MARKET_STATUS);if(i&&i.Callback){var r={MarketStatus:2};i.Callback(i,r,this),Te.IsNumber(r.MarketStatus)&&(a=r.MarketStatus)}if(0!=a&&3!=a){var n=this.AutoUpdateFrequency;1==a?this.AutoUpdateTimer=setTimeout(function(){e.AutoUpdate()},n):2==a&&(this.AutoUpdateTimer=setTimeout(function(){e.UpdateStockData()},n))}}},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"JSDealChartContainer::StopAutoUpdate"),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){if(!this.mapEvent.has(t))return null;var e=this.mapEvent.get(t);return e},this.OnSize=function(){this.Frame&&(this.SetSizeChange(!0),this.Draw(),this.DelayUpdateStockData())},this.SetSizeChange=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&(a.SizeChange=t)}},this.OnWheel=function(t){if(D.Chart.Log("[JSReportChartContainer::OnWheel]",t),(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash)&&this.Data&&Te.IsNonEmptyArray(this.Data.Data)){var e=t.clientX-this.UIElement.getBoundingClientRect().left,a=t.clientY-this.UIElement.getBoundingClientRect().top;if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),this.Canvas.isPointInPath(e,a)){var i=this.ChartPaint[0];if(i){var r=t.wheelDelta;Te.IsObjectExist(t.wheelDelta)||(r=-.01*t.deltaY),r<0?this.GotoNextPage(this.PageUpDownCycle)&&(this.Draw(),this.DelayUpdateStockData()):r>0&&this.GotoPreviousPage(this.PageUpDownCycle)&&(this.Draw(),this.DelayUpdateStockData()),t.preventDefault?t.preventDefault():t.returnValue=!1}}}},this.OnKeyDown=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=this.GetReportChart();if(e){var a=t.keyCode?t.keyCode:t.which;switch(a){case 33:this.GotoPreviousPage(this.PageUpDownCycle)&&(this.Draw(),this.DelayUpdateStockData());break;case 34:this.GotoNextPage(this.PageUpDownCycle)&&(this.Draw(),this.DelayUpdateStockData());break;case 38:var i=this.MoveSelectedRow(-1);i&&(i.Redraw&&this.Draw(),i.Update&&this.DelayUpdateStockData());break;case 40:var i=this.MoveSelectedRow(1);i&&(i.Redraw&&this.Draw(),i.Update&&this.DelayUpdateStockData());break;case 37:this.MoveXOffset(-1)&&this.Draw();break;case 39:this.MoveXOffset(1)&&this.Draw()}t.preventDefault?t.preventDefault():t.returnValue=!1}}},this.UIOnDblClick=function(t){var e=A(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e,r=this.ChartPaint[0];r&&r.OnDblClick(a,i,t)},this.UIOnMouseDown=function(t){var e=this;this.DragXScroll=null,this.DragHeader=null,this.DragColumnWidth=null,this.DragMove={Click:{X:t.clientX,Y:t.clientY},Move:{X:t.clientX,Y:t.clientY},PreMove:{X:t.clientX,Y:t.clientY}};var a=A(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a,n=this.ChartPaint[0];if(n){var o=n.PtInHeaderDragBorder(i,r);if(o)this.DragColumnWidth={ClickPoint:{X:i,Y:r},LastPoint:{X:i,Y:r},ClickData:o,ColumnWidth:o.Column.Width};else{var s=n.OnMouseDown(i,r,t);if(!s)return;if(2!=s.Type&&4!=s.Type||0!=t.button&&2!=t.button){if(3==s.Type&&0==t.button)this.DragHeader={ClickPoint:{X:i,Y:r},Click:{X:t.clientX,Y:t.clientY},ClickData:s,LastMove:{X:t.clientX,Y:t.clientY},MovePoint:null,MoveToData:null};else if(1==s.Type&&0==t.button){var h=s.Tab;1==h.Type?this.MoveXOffset(-1)&&this.Draw():2==h.Type?this.MoveXOffset(1)&&this.Draw():3==h.Type?this.DragXScroll={Click:{X:i,Y:r},LastMove:{X:i,Y:r}}:4==h.Type?this.SetXOffset(h.Pos)&&this.Draw():5==h.Type&&this.OnClickTab(h,t)}}else 0==t.button&&2==s.Type&&this.EnableDragRow&&this.SortInfo.Sort<=0&&(this.DragRow={Click:{X:t.clientX,Y:t.clientY},LastMove:{X:t.clientX,Y:t.clientY},Data:s}),1==s.Redraw&&this.Draw()}}document.onmousemove=function(t){e.DocOnMouseMove(t)},document.onmouseup=function(t){e.DocOnMouseUp(t)}},this.UIOnMounseUp=function(t){console.log('"UIOnMounseUp')},this.UIOnContextMenu=function(t){t.preventDefault()},this.UIOnMouseMove=function(t){var e=A(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;if(!this.DragRow&&!this.DrawHeader&&!this.DragColumnWidth){var r=this.GetTabChart();if(r){var n=r.PtInTab(a,i);if(n){var o=n.Index;r.MoveOnTabIndex!=o&&(r.MoveOnTabIndex=o,this.Draw())}}var s={Cursor:"default",Name:"Default"},h=this.GetReportChart(),l=null;if(h){var u=h.PtInHeaderDragBorder(a,i);u?(s={Cursor:"col-resize",Name:"DragHeaderWidth"},D.Chart.Log("[JSReportChartContainer::UIOnMouseMove] drag column width ",u)):l=h.PtInCell(a,i)}var c=this.GetEventCallback(w.ON_REPORT_MOUSE_MOVE);if(c){var f={X:a,Y:i,Cell:l};c.Callback(c,f,this)}s&&(this.UIElement.style.cursor=s.Cursor)}},this.UIOnMounseOut=function(t){var e=this.GetTabChart();e&&e.MoveOnTabIndex>=0&&(e.MoveOnTabIndex=-1,this.Draw())},this.UIOnMouseleave=function(t){var e=this.GetTabChart();e&&e.MoveOnTabIndex>=0&&(e.MoveOnTabIndex=-1,this.Draw())},this.DocOnMouseMove=function(t){if(this.DragMove.PreMove.X=this.DragMove.Move.X,this.DragMove.PreMove.Y=this.DragMove.Move.Y,this.DragMove.Move.X=t.clientX,this.DragMove.Move.Y=t.clientX,this.DragMove.Move.X==this.DragMove.PreMove.X&&this.DragMove.Move.Y==this.DragMove.PreMove.Y||this.StopAutoDragScrollTimer(),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=A(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;if(this.DragRow){var r=this.DragRow,n=r.LastMove.Y-t.clientY;if(Math.abs(n)<2)return;var o=this.GetReportChart();if(r.LastMove.X=t.clientX,r.LastMove.Y=t.clientY,r.Inside={X:a,Y:i},o){var s=o.OnDrawgRow(a,i,t);if(s)if(2==s.Type)s.Data.DataIndex!=r.Data.Row.DataIndex&&(r.MoveRow=s);else if(7==s.Type){var h=o.GetCurrentPageStatus();h.IsEnd||(this.MoveYOffset(1,!1),r.MoveRow=null,this.EnablePageScroll=!0,this.AutoScrollPage(2))}else 5==s.Type&&this.Data.YOffset>0&&(this.MoveYOffset(-1,!1),r.MoveRow=null,this.EnablePageScroll=!0,this.AutoScrollPage(-2));o.DragRow=r}this.Draw()}else if(this.DragXScroll){var l=this.ChartPaint[0];if(!l||!l.Tab)return;this.DragXScroll.LastMove.X=a,this.DragXScroll.LastMove.Y=i;var u=l.Tab.GetScrollPostionByPoint(a,i);this.SetXOffset(u)&&this.Draw()}else if(this.DragHeader&&this.DragHeader.ClickData){if(this.DragHeader.ClickData.Header.IsFixed)return;if(!this.EnableDragHeader)return;var c=t.clientX-this.DragHeader.Click.X,f=t.clientY-this.DragHeader.Click.Y;if(Math.abs(f)<=1&&Math.abs(c)<=1)return;this.DragHeader.LastMove.X=t.clientX,this.DragHeader.LastMove.Y=t.clientY,this.DragHeader.MovePoint?(this.DragHeader.MovePoint.X=a,this.DragHeader.MovePoint.Y=i):this.DragHeader.MovePoint={X:a,Y:i},this.OnMoveDragHeader(a,i,t),this.ShowDragHeaderTooltip(a,i,t)}else if(this.DragColumnWidth&&this.DragColumnWidth.ClickData){var c=a-this.DragColumnWidth.ClickPoint.X;if(Math.abs(c)<1)return;var d=this.DragColumnWidth.ColumnWidth+c;if(d<=10)return;var C=this.DragColumnWidth.ClickData.Index,p=this.GetEventCallback(w.ON_REPORT_DRAG_COLUMN_WIDTH);if(p&&p.Callback){var m={Index:C,Width:d,PreventDefault:!1};if(this.DragColumnWidth&&this.DragColumnWidth.ClickData&&(m.Column=this.DragColumnWidth.ClickData.Column),p.Callback(p,m,this),m.PreventDefault)return}this.SetColumnFixedWidth(C,d),this.DragColumnWidth.LastPoint.X=a,this.DragColumnWidth.LastPoint.Y=i}}},this.SetColumnFixedWidth=function(t,e){var a=this.ChartPaint[0];if(a){var i=a.Column[t];i&&(i.FixedWidth=e,this.SetSizeChange(!0),this.Draw())}},this.OnMoveDragHeader=function(t,e,a){var i=this.ChartPaint[0];if(i){var r=this.DragHeader.ClickData;if(this.DragHeader.MoveToData=null,!r.Header.IsFixed){var n=this.DragHeader.ClickPoint.Y,o=i.OnMouseDown(t,n,a);if(!o||!o.Header)return;if(o.Header.IsFixed)return;if(o.Header.Index==r.Header.Index)return;this.DragHeader.MoveToData=o,console.log("[JSReportChartContainer::OnMoveDragHeader] Click[Index="+r.Header.Index+", Title="+r.Header.Column.Title+"] => Move[Index="+o.Header.Index+", Title="+o.Header.Column.Title+"]")}}},this.ShowDragHeaderTooltip=function(t,e,a){if(this.DragHeader){var i=this.DragHeader;if(i.ClickData&&i.MovePoint){var r=this.GetEventCallback(w.ON_REPORT_DRAG_HEADER_TOOLTIP);if(r){var n={PreventDefault:!1,e:a,X:t,Y:e,DragHeader:this.DragHeader,Tooltip:this.Tooltip};if(r.Callback(r,n,this),n.PreventDefault)return}var o=i.ClickData.Header.Column.Title;this.Tooltip.className="jchart-chartdrawsvg-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=a.clientX+"px",this.Tooltip.style.top=a.clientY+"px",this.Tooltip.style.width="100px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=o,this.Tooltip.style.display="block"}}},this.HideTooltip=function(){"none"!=this.Tooltip.style.display&&(this.Tooltip.style.display="none")},this.DocOnMouseUp=function(t){document.onmousemove=null,document.onmouseup=null,this.StopAutoDragScrollTimer(),this.HideTooltip();var e=this.GetReportChart(),a={Cursor:"default",Name:"Default"},i=!1;this.DragRow&&(e&&(this.OnDragRow(),e.DragRow=null),i=!0);var r=this.DragHeader;if(this.DragHeader=null,this.DragXScroll=null,this.DragRow=null,this.DragMove=null,this.DragColumnWidth=null,i&&this.Draw(),r){var n=r.ClickData,o=r.MoveToData;n&&o?this.SwapColumn(n.Header.Index,o.Header.Index,{Redraw:!0}):this.OnClickHeader(n,t)}a&&(this.UIElement.style.cursor=a.Cursor)},this.OnDragRow=function(){if(this.SourceData&&Te.IsNonEmptyArray(this.SourceData.Data)&&this.DragRow&&this.DragRow.MoveRow){var t=this.DragRow,e=t.Data.Row.DataIndex,a=t.MoveRow.Data.DataIndex;if(!(e==a||e<0||a<0)){var i=this.SourceData.Data;if(!(e>=i.length||a>=i.length)){var r=this.GetEventCallback(w.ON_REPORT_DRAG_ROW);if(r){var n={Symbol:this.Symbol,Src:{Index:e,Symbol:i[e]},To:{Index:a,Symbol:i[a]},PreventDefault:!1};if(r.Callback(r,n,this),n.PreventDefault)return}if(1==this.DragRowType){var o=i[e];i[e]=i[a],i[a]=o,this.Data.Data=i.slice(0)}else{var s=i[e];i.splice(e,1),i.splice(a,0,s),this.Data.Data=i.slice(0)}var h=this.GetReportChart();h&&(0==h.SelectedModel?h.SelectedRow=t.MoveRow.Data.Index:h.SelectedRow=t.MoveRow.Data.DataIndex)}}}},this.IsPhoneDragging=function(t){var e=t.changedTouches.length,a=t.touches.length;return 1==e&&1==a},this.GetTouchData=function(t){for(var e=[],a=A(),i=0;i<t.touches.length;++i){var r=t.touches[i],n={clientX:r.clientX*a,clientY:r.clientY*a,pageX:r.pageX*a,pageY:r.pageY*a,InsideX:(r.clientX-this.UIElement.getBoundingClientRect().left)*a,InsideY:(r.clientY-this.UIElement.getBoundingClientRect().top)*a};e.push(n)}return e},this.GetMoveAngle=function(t,e){var a=Math.abs(t.X-e.X),i=Math.abs(t.Y-e.Y),r=180*Math.atan(a/i)/Math.PI;return r},this.PreventTouchEvent=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()},this.OnTouchStart=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.IsOnTouch=!0;var e=this.GetReportChart();if(e&&this.IsPhoneDragging(t)){var a={Click:{},LastMove:{},InsideClick:{}},i=this.GetTouchData(t);a.Click.X=i[0].clientX,a.Click.Y=i[0].clientY,a.InsideClick.X=i[0].InsideX,a.InsideClick.Y=i[0].InsideY,a.LastMove.X=i[0].clientX,a.LastMove.Y=i[0].clientY,a.IsXMove=!1,a.IsYMove=!1,e.IsPtInBody(a.InsideClick.X,a.InsideClick.Y)&&(this.TouchDrag=a),this.TouchInfo={InsideClick:{X:i[0].InsideX,Y:i[0].InsideY},Click:{X:i[0].clientX,Y:i[0].clientY}},this.PreventTouchEvent(t)}}},this.OnDragYOffset=function(t,e,a,i){if(a<5)return!1;var r=!0;t.LastMove.Y<e[0].clientY&&(r=!1);var n=this.YStepPixel;n<=0&&(n=5);var o=parseInt(a/n);return!(o<=0)&&(0==r&&(o*=-1),this.MoveYOffset(o,this.DragPageCycle)&&(t.IsYMove=!0,this.Draw(),this.DelayUpdateStockData()),!0)},this.OnDragXOffset=function(t,e,a,i){if(a<5)return!1;var r=!0;t.LastMove.X<e[0].clientX&&(r=!1);var n=this.XStepPixel;n<=0&&(n=5);var o=parseInt(a/n);return!(o<=0)&&(r||(o*=-1),this.MoveXOffset(o)&&(t.IsXMove=!0,this.Draw()),!0)},this.OnTouchMove=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=this.GetReportChart();if(e){var a=this.GetTouchData(t);if(this.IsPhoneDragging(t)){var i=this.TouchDrag;if(this.TouchInfo.Move={X:a[0].clientX,Y:a[0].clientY},i){this.PreventTouchEvent(t);var r=this.GetMoveAngle(i.LastMove,{X:a[0].clientX,Y:a[0].clientY}),n=Math.abs(i.LastMove.X-a[0].clientX),o=Math.abs(i.LastMove.Y-a[0].clientY);if(1==i.IsYMove){if(this.ShowPageInfo(!0),!this.OnDragYOffset(i,a,o,t))return}else if(1==i.IsXMove){if(!this.OnDragXOffset(i,a,n,t))return}else if(o>0&&r<this.TouchMoveMinAngle){if(this.ShowPageInfo(!0),!this.OnDragYOffset(i,a,o,t))return}else{if(!(n>0&&r>=this.TouchMoveMinAngle))return;if(!this.OnDragXOffset(i,a,n,t))return}i.LastMove.X=a[0].clientX,i.LastMove.Y=a[0].clientY}}}}},this.OnTouchEnd=function(t){D.Chart.Log("[JSReportChartContainer:OnTouchEnd]",t),this.ChartSplashPaint&&1==this.ChartSplashPaint.IsEnableSplash||(this.ShowPageInfo(!1),this.OnTouchClick(this.TouchInfo,t),this.IsOnTouch=!1,this.TouchDrag=null,this.TouchInfo=null)},this.OnTouchClick=function(t,e){if(!t||!t.Click)return!1;if(t.Move)return!1;var a=t.InsideClick,i=this.GetReportChart();if(!i)return!1;var r=i.OnMouseDown(a.X,a.Y,e);if(!r)return!1;2==r.Type||4==r.Type?1==r.Redraw&&this.Draw():3==r.Type&&this.OnClickHeader(r,e),D.Chart.Log("[JSReportChartContainer:OnTouchClick] clickData",r)},this.GetTabChart=function(){var t=this.ChartPaint[0];return t?t.Tab:null},this.GetReportChart=function(){var t=this.ChartPaint[0];return t},this.GotoNextPage=function(t){if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetPageSize();if(a>this.Data.Data.length)return!1;if(this.Data.YOffset+a>=this.Data.Data.length)return!0===t&&(this.Data.YOffset=0,!0);this.Data.YOffset+=a;var i=this.Data.Data.length-this.Data.YOffset;return 0==e.SelectedModel&&e.SelectedRow>i-1&&(e.SelectedRow=i-1),!0},this.GotoPreviousPage=function(t){if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetPageSize();if(a>this.Data.Data.length)return!1;if(this.Data.YOffset<=0)return!0===t&&(this.Data.YOffset=this.Data.Data.length-a,!0);var i=this.Data.YOffset;return(i-=a)<0&&(i=0),this.Data.YOffset=i,!0},this.MoveYOffset=function(t,e){if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return!1;var a=this.ChartPaint[0];if(!a)return!1;var i=a.GetCurrentPageStatus();if(i.IsSinglePage)return!1;if(t>0){var r=this.Data.Data.length,n=i.PageSize,o=this.Data.YOffset;if(e)for(var s=0;s<t;++s)++o+n>r&&(o=0);else{if(o+n>=r)return!1;for(var s=0;s<t&&!(o+n+1>r);++s)++o}return this.Data.YOffset=o,!0}if(t<0){t=Math.abs(t);var o=this.Data.YOffset;if(e)for(var n=i.PageSize,s=0;s<t;++s)--o<0&&(o=this.Data.Data.length-n);else{if(this.Data.YOffset<=0)return!1;for(var s=0;s<t&&!(o-1<0);++s)--o}return this.Data.YOffset=o,!0}return!1},this.MoveSelectedRow=function(t){var e=this.ChartPaint[0];if(!e)return null;if(!Te.IsNonEmptyArray(this.Data.Data))return null;var a={Redraw:!1,Update:!1};if(0==e.SelectedModel){var i=e.GetCurrentPageStatus(),r=i.End-i.Start+1,n=i.SelectedRow;if(t>0)return n+=t,n%=r,e.SelectedRow=n,e.SelectedFixedRow=-1,a.Redraw=!0,a;if(t<0)return(n+=t)<0&&(n=r+(n%=r)),e.SelectedRow=n,e.SelectedFixedRow=-1,a.Redraw=!0,a}else if(1==e.SelectedModel){var i=e.GetCurrentPageStatus(),r=i.PageSize,n=i.SelectedRow;if(t>0){if(n<0||n<i.Start||n>i.End)return e.SelectedRow=i.Start,a.Redraw=!0,a;for(var o=this.Data.YOffset,s=0;s<t;++s)++n>i.End&&++o,n>=this.Data.Data.length&&(n=0,o=0);return a.Redraw=!0,a.Update=o!=this.Data.YOffset,e.SelectedRow=n,this.Data.YOffset=o,a}if(t<0){if(n<0||n<i.Start||n>i.End)return e.SelectedRow=i.End,a.Redraw=!0,a;t=Math.abs(t);for(var o=this.Data.YOffset,s=0;s<t;++s)--n<i.Start&&--o,n<0&&(n=this.Data.Data.length-1,(o=this.Data.Data.length-r)<0&&(o=0));return a.Redraw=!0,a.Update=o!=this.Data.YOffset,e.SelectedRow=n,this.Data.YOffset=o,a}}return null},this.MoveXOffset=function(t){var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetXScrollRange();if(a<=0)return!1;if(t>0){if(this.Data.XOffset>=a)return!1;for(var i=0;i<t&&!(this.Data.XOffset>=a);++i)++this.Data.XOffset;return!0}if(t<0){if(this.Data.XOffset<=0)return!1;t=Math.abs(t);for(var i=0;i<t&&!(this.Data.XOffset-1<0);++i)--this.Data.XOffset;return!0}return!1},this.SetXOffset=function(t){if(!Te.IsNumber(t))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetXScrollRange();return t<0&&(t=0),t>a&&(t=a),this.Data.XOffset=t,!0},this.GotoLastPage=function(){var t=this.ChartPaint[0];if(t){var e=t.GetPageSize(!0),a=this.Data.Data.length-e;a<0&&(a=0),this.Data.DataOffset=a}},this.SetColumn=function(t,e){var a=this.ChartPaint[0];a&&(a.SetColumn(t),a.SizeChange=!0,e&&e.Redraw&&this.Draw())},this.SetTab=function(t,e){var a=this.ChartPaint[0];if(a){var i=a.Tab;i&&(i.SetTabList(t),e&&e.Redraw&&this.Draw())}},this.SetSelectedTab=function(t,e){var a=this.ChartPaint[0];if(a){var i=a.Tab;i&&(i.SelectedTabIndex=t)}},this.ReloadResource=function(t){this.Frame.ReloadResource(t);for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}t&&t.Redraw&&(this.SetSizeChange(!0),this.Draw())},this.OnClickHeader=function(t,e){var a=this,i=t.Header;if(i.Column&&(1==i.Column.Sort||2==i.Column.Sort)){var r=i.Index,n={Field:this.SortInfo.Field,Sort:this.SortInfo.Sort},o=i.Column.SortType;if(n.Field!=r)n.Field=r,n.Sort=o[0];else if(1==o.length)n.Sort=o[0];else for(var s=0;s<o.length;++s)if(n.Sort==o[s]){n.Sort=o[(s+1)%o.length];break}if(1==i.Column.Sort||2==i.Column.Sort){if(0==n.Sort){this.Data.Data=[];for(var s=0;s<this.SourceData.Data.length;++s)this.Data.Data.push(this.SourceData.Data[s])}else if(1==i.Column.Sort){var h=this.GetEventCallback(w.ON_REPORT_LOCAL_SORT);if(h&&h.Callback){var l={Column:i.Column,SortInfo:n,SymbolList:this.Data.Data,Result:null};h.Callback(h,l,this),Array.isArray(l.Result)&&(this.Data.Data=l.Result)}else this.Data.Data.sort(function(t,e){return a.LocalSort(t,e,i.Column,n.Sort)})}else if(2==i.Column.Sort){if(!Te.IsNonEmptyArray(this.Data.Data))return;return this.SortInfo.Field=n.Field,this.SortInfo.Sort=n.Sort,this.Data.YOffset=0,this.ResetReportSelectStatus(),void this.RequestStockSortData(i.Column,n.Field,n.Sort)}this.Data.YOffset=0,this.ResetReportSelectStatus(),this.SortInfo.Field=n.Field,this.SortInfo.Sort=n.Sort,this.Draw(),this.DelayUpdateStockData()}}},this.OnClickTab=function(t,e){if(t.Tab){var a=!1,i=A(),r=(e.clientX-this.UIElement.getBoundingClientRect().left)*i,n=(e.clientY,this.UIElement.getBoundingClientRect().top,{Left:this.UIElement.getBoundingClientRect().left,Top:this.UIElement.getBoundingClientRect().top});if(t.Tab.IsMenu){var o=this.GetEventCallback(w.ON_CLICK_REPORT_TABMENU);if(o&&o.Callback){a=!0;var s=t.Rect,h={Left:s.Left/i,Right:s.Right/i,Top:s.Top/i,Bottom:s.Bottom/i},l={Data:t,IsSide:{X:r,Y:r},UIElement:n,Rect:h,e:e,Redraw:a};o.Callback(o,l,this),Te.IsBool(l.Redraw)&&(a=l.Redraw)}this.SetSelectedTab(t.Index)}else{var o=this.GetEventCallback(w.ON_CLICK_REPORT_TAB);if(o&&o.Callback){var l={Data:t,IsSide:{X:r,Y:r},UIElement:n,e:e,Redraw:a};o.Callback(o,l,this),Te.IsBool(l.Redraw)&&(a=l.Redraw)}this.SetSelectedTab(t.Index)}a&&this.Draw()}},this.SwapColumn=function(t,e,a){var i=this.GetReportChart();i&&i.SwapColumn(t,e)&&a&&a.Redraw&&(this.SetSizeChange(!0),this.Draw())},this.LocalSort=function(t,e,a,i){switch(a.Type){case Ti.SYMBOL_ID:case Ti.NAME_ID:return this.LocalStringSort(t,e,a,i);case Ti.NAME_EX_ID:return this.LocalNameExSort(t,e,a,i);case Ti.PRICE_ID:case Ti.VOL_ID:case Ti.INCREASE_ID:case Ti.UPDOWN_ID:case Ti.BUY_PRICE_ID:case Ti.SELL_PRICE_ID:case Ti.AMOUNT_ID:case Ti.BUY_VOL_ID:case Ti.SELL_VOL_ID:case Ti.YCLOSE_ID:case Ti.OPEN_ID:case Ti.HIGH_ID:case Ti.LOW_ID:case Ti.AVERAGE_PRICE_ID:case Ti.OUTSTANDING_SHARES_ID:case Ti.TOTAL_SHARES_ID:case Ti.CIRC_MARKET_VALUE_ID:case Ti.MARKET_VALUE_ID:case Ti.EXCHANGE_RATE_ID:case Ti.AMPLITUDE_ID:case Ti.LIMIT_HIGH_ID:case Ti.LIMIT_LOW_ID:case Ti.VOL_IN_ID:case Ti.VOL_OUT_ID:return this.LocalNumberSort(t,e,a,i);case Ti.CUSTOM_NUMBER_TEXT_ID:return this.LoacCustomNumberSort(t,e,a,i);case Ti.CUSTOM_STRING_TEXT_ID:return this.LoacCustomStringSort(t,e,a,i);case Ti.CUSTOM_DATETIME_TEXT_ID:return this.LoacCustomDateTimeSort(t,e,a,i);default:return 0}},this.GetStockExtendData=function(t,e){if(Te.IsNumber(e.DataIndex)){if(e.DataIndex<0)return null;var a=this.GetStockData(t);return a&&a.ExtendData?a.ExtendData[e.DataIndex]:null}if(Te.IsNumber(e.BlockIndex)){if(e.BlockIndex<0)return null;var a=this.GetBlockData(t);return a?a[e.BlockIndex]:null}return null},this.LocalNameExSort=function(t,e,a,i){var r=this.GetStockData(t),n=this.GetStockData(e),o="",s="";return 2==i&&(o="啊啊啊啊啊",s="啊啊啊啊啊"),r&&r.Name&&(o=r.Name),n&&n.Name&&(s=n.Name),1==i?s<o?-1:s<o?1:0:o<s?-1:o>s?1:0},this.LocalStringSort=function(t,e,a,i){var r=this.GetStockData(t),n=this.GetStockData(e),o="",s="";2==i&&(o="啊啊啊啊啊",s="啊啊啊啊啊");var h=Ii.get(a.Type);return r&&r[h]&&(o=r[h]),n&&n[h]&&(s=n[h]),1==i?s<o?-1:s<o?1:0:o<s?-1:o>s?1:0},this.LocalNumberSort=function(t,e,a,i){var r=this.GetStockData(t),n=this.GetStockData(e),o=-99999999999999,s=-99999999999999;2==i&&(o=s=99999999999999);var h=Ii.get(a.Type);return r&&Te.IsNumber(r[h])&&(o=r[h]),n&&Te.IsNumber(n[h])&&(s=n[h]),1==i?s<o?-1:s<o?1:0:o<s?-1:o>s?1:0},this.LoacCustomNumberSort=function(t,e,a,i){var r=-99999999999999,n=-99999999999999;2==i&&(r=n=99999999999999);var o=this.GetStockExtendData(t,a);Te.IsNumber(o)&&(r=o);var o=this.GetStockExtendData(e,a);return Te.IsNumber(o)&&(n=o),1==i?n<r?-1:n<r?1:0:r<n?-1:r>n?1:0},this.LoacCustomDateTimeSort=function(t,e,a,i){var r=-99999999999999,n=-99999999999999;2==i&&(r=n=99999999999999);var o=this.GetStockExtendData(t,a);Te.IsNumber(o)&&(r=o);var o=this.GetStockExtendData(e,a);return Te.IsNumber(o)&&(n=o),1==i?n<r?-1:n<r?1:0:r<n?-1:r>n?1:0},this.RequestStockSortData=function(t,e,a){var i=this.ChartPaint[0];if(i){var r=this,n=this.Data.YOffset,o=i.GetPageSize(),s=n+o;if(s>=this.Data.Data.length&&(s=this.Data.Data.length-1),this.NetworkFilter){var h={Name:"JSDealChartContainer::RequestStockSortData",Explain:"报价列表股票排序数据",Request:{Data:{range:{start:n,end:s,count:this.Data.Data.length},column:{name:t.Title,type:t.Type,index:e,ID:t.ID},sort:a,symbol:this.Symbol,name:this.Name,pageSize:o}},Self:this,PreventDefault:!1};if(i.FixedRowCount>0&&1==i.FixedRowData.Type){for(var l=[],u=0;u<i.FixedRowData.Symbol.length;++u){var c=i.FixedRowData.Symbol[u];c&&l.push(c)}h.Request.FixedSymbol=l}if(this.NetworkFilter(h,function(t){r.RecvStockSortData(t),r.AutoUpdate()}),1==h.PreventDefault)return}throw{Name:"JSReportChartContainer::RequestStockSortData",Error:"(报价列表股票排序数据)不提供内置测试数据"}}},this.RecvStockSortData=function(t){var e=[];if(Te.IsNonEmptyArray(t.data))for(var a=0;a<t.data.length;++a){var i=t.data[a],r=i[0];if(r){var n=null;this.MapStockData.has(r)?n=this.MapStockData.get(r):((n=new Si).OriginalSymbol=r,n.Symbol=this.GetSymbolNoSuffix(r),this.MapStockData.set(r,n)),this.ReadStockJsonData(n,i),e.push(r)}}if(Te.IsNonEmptyArray(t.index))for(var a=0;a<t.index.length;++a){var o=t.index[a],s=e[a],h=this.Data.Data[o];s!=h&&(this.Data.Data[o]=s)}var l=this.ChartPaint[0];if(l){this.Draw()}},this.ShowPageInfo=function(t){var e=this.ChartPaint[1];return!!e&&(e.IsShow=t,!0)}}(this.CanvasElement);if(e.Create(t),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),Te.IsNonEmptyArray(t.Column)&&e.SetColumn(t.Column),Te.IsNonEmptyArray(t.Tab)&&e.SetTab(t.Tab),Te.IsNumber(t.TabSelected)&&e.SetSelectedTab(t.TabSelected),Te.IsBool(t.EnableDragRow)&&(e.EnableDragRow=t.EnableDragRow),Te.IsNumber(t.DragRowType)&&(e.DragRowType=t.DragRowType),Te.IsBool(t.EnableDragHeader)&&(e.EnableDragHeader=t.EnableDragHeader),t.SortInfo){var a=t.SortInfo;Te.IsNumber(a.Field)&&(e.SortInfo.Field=a.Field),Te.IsNumber(a.Sort)&&(e.SortInfo.Sort=a.Sort)}if(this.SetChartBorder(e,t),null!=t.IsAutoUpdate&&(e.IsAutoUpdate=t.IsAutoUpdate),t.AutoUpdateFrequency>0&&(e.AutoUpdateFrequency=t.AutoUpdateFrequency),Te.IsBool(t.EnableFilter)&&(e.EnableFilter=t.EnableFilter),t.EventCallback)for(var i=0;i<t.EventCallback.length;++i){a=t.EventCallback[i];e.AddEventCallback(a)}return e},this.SetChartBorder=function(t,e){if(e.Border){e.Border;Te.IsNumber(e.Border.Left)&&(t.Frame.ChartBorder.Left=e.Border.Left),Te.IsNumber(e.Border.Right)&&(t.Frame.ChartBorder.Right=e.Border.Right),Te.IsNumber(e.Border.Top)&&(t.Frame.ChartBorder.Top=e.Border.Top),Te.IsNumber(e.Border.Bottom)&&(t.Frame.ChartBorder.Bottom=e.Border.Bottom);var a=A();t.Frame.ChartBorder.Left*=a,t.Frame.ChartBorder.Right*=a,t.Frame.ChartBorder.Top*=a,t.Frame.ChartBorder.Bottom*=a}},this.ChangeSymbol=function(t,e){this.JSChartContainer&&this.JSChartContainer.ChangeSymbol(t,e)},this.SetColumn=function(t,e){this.JSChartContainer&&this.JSChartContainer.SetColumn(t,e)},this.EnableFilter=function(t,e){this.JSChartContainer&&this.JSChartContainer.EnableFilter(t,e)},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(D.Chart.Log("[JSReportChart:AddEventCallback] obj=",t),this.JSChartContainer.AddEventCallback(t))},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(D.Chart.Log("[JSReportChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))},this.ChartDestory=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChartDestory&&this.JSChartContainer.ChartDestory()},this.Draw=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Draw&&(D.Chart.Log("[JSReportChart:Draw] "),this.JSChartContainer.Draw())}}function Si(){this.OriginalSymbol,this.Symbol,this.Name,this.YClose,this.Open,this.Price,this.High,this.Low,this.Amount,this.Vol,this.Increase,this.UpDown,this.Exchange,this.Amplitude,this.BuyPrice,this.BuyVol,this.SellPrice,this.SellVol,this.AvPrice,this.LimitHigh,this.LimitLow,this.VolIn,this.VolOut,this.DealNum,this.OutShares,this.TotalShares,this.MarketValue,this.CircMarketValue,this.CloseLine,this.ExtendData}gi.Init=function(t){var e=new gi(t);return e.OnSize(),e},gi.SetStyle=function(t){t&&ia.SetStyle(t)},gi.GetResource=function(){return ia};var Ti={SYMBOL_ID:0,NAME_ID:1,PRICE_ID:2,VOL_ID:3,INCREASE_ID:4,UPDOWN_ID:5,BUY_PRICE_ID:6,SELL_PRICE_ID:7,AMOUNT_ID:8,BUY_VOL_ID:9,SELL_VOL_ID:10,YCLOSE_ID:11,OPEN_ID:12,HIGH_ID:13,LOW_ID:14,AVERAGE_PRICE_ID:15,INDEX_ID:16,OUTSTANDING_SHARES_ID:17,TOTAL_SHARES_ID:18,CIRC_MARKET_VALUE_ID:19,MARKET_VALUE_ID:20,EXCHANGE_RATE_ID:21,AMPLITUDE_ID:22,LIMIT_HIGH_ID:23,LIMIT_LOW_ID:24,VOL_IN_ID:25,VOL_OUT_ID:26,NAME_EX_ID:27,CLOSE_LINE_ID:28,KLINE_ID:29,SYMBOL_NAME_ID:99,CUSTOM_STRING_TEXT_ID:100,CUSTOM_NUMBER_TEXT_ID:101,CUSTOM_DATETIME_TEXT_ID:102,CUSTOM_ICON_ID:103},Ii=new C.default([[Ti.SYMBOL_ID,"Symbol"],[Ti.NAME_ID,"Name"],[Ti.PRICE_ID,"Price"],[Ti.INCREASE_ID,"Increase"],[Ti.UPDOWN_ID,"UpDown"],[Ti.VOL_ID,"Vol"],[Ti.BUY_PRICE_ID,"BuyPrice"],[Ti.SELL_PRICE_ID,"SellPrice"],[Ti.AMOUNT_ID,"Amount"],[Ti.BUY_VOL_ID,"BuyVol"],[Ti.SELL_VOL_ID,"SellVol"],[Ti.YCLOSE_ID,"YClose"],[Ti.OPEN_ID,"Open"],[Ti.HIGH_ID,"High"],[Ti.LOW_ID,"Low"],[Ti.AVERAGE_PRICE_ID,"AvPrice"],[Ti.OUTSTANDING_SHARES_ID,"OutShares"],[Ti.TOTAL_SHARES_ID,"TotalShares"],[Ti.CIRC_MARKET_VALUE_ID,"CircMarketValue"],[Ti.MARKET_VALUE_ID,"MarketValue"],[Ti.EXCHANGE_RATE_ID,"Exchange"],[Ti.AMPLITUDE_ID,"Amplitude"],[Ti.LIMIT_HIGH_ID,"LimitHigh"],[Ti.LIMIT_LOW_ID,"LimitLow"],[Ti.VOL_IN_ID,"VolIn"],[Ti.VOL_OUT_ID,"VolOut"],[Ti.NAME_EX_ID,"NameEx"]]);function yi(t){this.DivElement=t,this.JSChartContainer,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jskeyboard-drawing",this.CanvasElement.id=P(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&D.Chart.Log("[JSKeyboardChart::JSRepoJSKeyboardChartrtChart] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.OnSize=function(){var t=parseInt(this.DivElement.style.height.replace("px",""));this.CanvasElement.height=t,this.CanvasElement.width=parseInt(this.DivElement.style.width.replace("px","")),this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var e=A();this.CanvasElement.height*=e,this.CanvasElement.width*=e,D.Chart.Log("[JSKeyboardChart::OnSize] devicePixelRatio="+window.devicePixelRatio+", height="+this.CanvasElement.height+", width="+this.CanvasElement.width),this.JSChartContainer&&this.JSChartContainer.OnSize&&this.JSChartContainer.OnSize()},this.SetOption=function(t){var e=this.CreateJSKeyboardChartContainer(t);if(!e)return!1;t.OnCreatedCallback&&t.OnCreatedCallback(e),this.JSChartContainer=e,this.DivElement.JSChart=this,e.Draw()},this.CreateJSKeyboardChartContainer=function(t){var e=new function(t){this.ClassName="JSKeyboardChartContainer",this.Frame,this.ChartPaint=[],this.Canvas=t.getContext("2d"),this.ShowCanvas=null,this.NetworkFilter,this.Data={XOffset:0,YOffset:0,Data:[]},this.MapSymbol=new C.default,this.SourceData={Data:[]},this.mapEvent=new C.default,this.UIElement=t,this.LastPoint=new V,this.DragYScroll=null,this.IsDestroy=!1,this.ChartDestory=function(){this.IsDestroy=!0},this.ClearSearch=function(t){this.Data.Data=[],this.Data.XOffset=0,this.Data.YOffset=0,t&&1==t.Redraw&&this.Draw()},this.Search=function(t){var e=[],a=[];this.MapSymbol.clear(),this.Data.Data=[],this.Data.XOffset=0,this.Data.YOffset=0;var i=t.trim();if(i.length>0)for(var r=0;r<this.SourceData.Data.length;++r){var n=this.SourceData.Data[r];this.SearchSymbol(n,i,e,a)||this.SearchSpell(n,i,e,a)}(Te.IsNonEmptyArray(e)||Te.IsNonEmptyArray(a))&&(this.Data.Data=e.concat(a)),this.ChartPaint[0].SelectedRow=0,D.Chart.Log("[JSKeyboardChart:Search] search="+i+", source="+this.SourceData.Data.length+" match="+this.Data.Data.length),this.Draw()},this.SearchSymbol=function(t,e,a,i){var r=t.Symbol.indexOf(e);return!(r<0)&&(0==r?a.push(t.Symbol):i.push(t.Symbol),this.MapSymbol.set(t.Symbol,t),!0)},this.SearchSpell=function(t,e,a,i){if(!Te.IsString(t.Spell))return!1;var r=t.Spell.indexOf(e);return 0==r&&(a.push(t.Symbol),this.MapSymbol.set(t.Symbol,t),!0)},this.SetSymbolData=function(t){this.SourceData.Data=t},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.Frame=new function(){this.ChartBorder,this.Canvas,this.BorderLine=null,this.BorderColor=ia.Report.BorderColor,this.LogoTextColor=ia.FrameLogo.TextColor,this.LogoTextFont=ia.FrameLogo.Font,this.ReloadResource=function(t){this.BorderColor=ia.Report.BorderColor,this.LogoTextColor=ia.FrameLogo.TextColor,this.LogoTextFont=ia.FrameLogo.Font},this.Draw=function(){var t=_(this.ChartBorder.GetLeft()),e=_(this.ChartBorder.GetTop()),a=_(this.ChartBorder.GetRight()),i=_(this.ChartBorder.GetBottom()),r=a-t,n=i-e;Te.IsNumber(this.BorderLine)?(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(a,e)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(t,i),this.Canvas.lineTo(a,i)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(t,i)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(a,e),this.Canvas.lineTo(a,i)),this.Canvas.stroke()):(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(t,e,r,n))},this.DrawLogo=function(){var t=ia.FrameLogo.Text;if(Te.IsString(t)){this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="right",this.Canvas.textBaseline="bottom";var e=this.ChartBorder.GetRight()-30,a=this.ChartBorder.GetBottom()-5;this.Canvas.fillText(t,e,a)}}},this.Frame.ChartBorder=new X,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas;var a=new function(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartSymbolList",this.UIElement,this.IsDrawFirst=!1,this.GetEventCallback,this.Data,this.SizeChange=!0,this.SelectedRow=-1,this.IsDrawBorder=!1,this.ShowSymbol=[],this.BorderColor=ia.Keyboard.BorderColor,this.SelectedColor=ia.Keyboard.SelectedColor,this.TextColor=ia.Keyboard.TextColor,this.ItemFontConfig={Size:ia.Keyboard.Item.Font.Size,Name:ia.Keyboard.Item.Font.Name},this.ItemMergin={Left:ia.Keyboard.Item.Mergin.Left,Right:ia.Keyboard.Item.Mergin.Right,Top:ia.Keyboard.Item.Mergin.Top,Bottom:ia.Keyboard.Item.Mergin.Bottom},this.ItemFont=15*A()+"px 微软雅黑",this.ItemSymbolFont=12*A()+"px 微软雅黑",this.ItemNameFont=15*A()+"px 微软雅黑",this.ItemNameHeight=0,this.RowCount=0,this.RowHeight=0,this.Column=[{Type:xi.SHORT_SYMBOL_ID,Title:"代码",TextAlign:"left",Width:null,MaxText:"888888"},{Type:xi.NAME_ID,Title:"名称",TextAlign:"left",Width:null,MaxText:"擎擎擎擎擎擎"},{Type:xi.TYPE_ID,Title:"类型",TextAlign:"right",Width:null,MaxText:"擎擎擎擎"}],this.RectClient={},this.ReloadResource=function(t){},this.SetColumn=function(t){Te.IsNonEmptyArray(t)},this.Draw=function(){this.ShowSymbol=[],this.SizeChange?this.CalculateSize():this.UpdateCacheData(),this.Canvas.save(),this.Canvas.beginPath(),this.Canvas.rect(this.RectClient.Left,this.RectClient.Top,this.RectClient.Right-this.RectClient.Left,this.RectClient.Bottom-this.RectClient.Top),this.Canvas.clip(),this.DrawBody(),this.Canvas.restore(),this.DrawBorder(),this.SizeChange=!1},this.UpdateCacheData=function(){this.RectClient.Left=this.ChartBorder.GetLeft(),this.RectClient.Right=this.ChartBorder.GetRight(),this.RectClient.Top=this.ChartBorder.GetTop(),this.RectClient.Bottom=this.ChartBorder.GetBottom()},this.GetPageSize=function(t){t&&this.CalculateSize();var e=this.RowCount;return e},this.GetCurrentPageStatus=function(){var t={Start:this.Data.YOffset,PageSize:this.RowCount,IsEnd:!1,SelectedRow:this.SelectedRow,IsSinglePage:!1,DataCount:0};return Te.IsNonEmptyArray(this.Data.Data)?(t.End=this.Data.YOffset+this.RowCount-1,t.IsSinglePage=this.Data.Data.length<=this.RowCount,t.DataCount=this.Data.Data.length,t.End>=this.Data.Data.length-1&&(t.IsEnd=!0),t.End>=this.Data.Data.length&&(t.End=this.Data.Data.length-1)):(t.Star=0,t.End=0,t.IsEnd=!0,t.IsSinglePage=!0),t},this.CalculateSize=function(){this.UpdateCacheData();var t=A();this.ItemFont=this.ItemFontConfig.Size*t+"px "+this.ItemFontConfig.Name,this.RowHeight=this.GetFontHeight(this.ItemFont,"擎")+this.ItemMergin.Top+this.ItemMergin.Bottom;var e=this.RectClient.Left,a=this.RectClient.Right;this.Canvas.font=this.ItemFont;for(var i=0,r=0;r<this.Column.length;++r){var n=this.Column[r];i=this.Canvas.measureText(n.MaxText).width,n.Width=i+4+this.ItemMergin.Left+this.ItemMergin.Right,r==this.Column.length-1&&e+n.Width<a&&(n.Width=a-e),e+=n.Width}this.RowCount=parseInt((this.RectClient.Bottom-this.RectClient.Top)/this.RowHeight)},this.DrawText=function(t,e,a,i,r){"center"==e?(a+=r/2,this.Canvas.textAlign="center"):"right"==e?(a+=r,this.Canvas.textAlign="right"):this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(t,a,i)},this.DrawBorder=function(){if(this.IsDrawBorder){var t=this.RectClient.Left,e=this.RectClient.Right,a=this.RectClient.Top;this.RectClient.Bottom;this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),this.Canvas.moveTo(t,_(a)),this.Canvas.lineTo(e,_(a));for(var i=a+this.RowHeight,r=i,n=0;n<this.RowCount;++n){var o=_(i);this.Canvas.moveTo(t,o),this.Canvas.lineTo(e,o),r=i,i+=this.RowHeight}for(var s=t,n=this.Data.XOffset;n<this.Column.length;++n){var h=this.Column[n],l=_(s+h.Width);this.Canvas.moveTo(l,a),this.Canvas.lineTo(l,r),s+=h.Width}this.Canvas.stroke()}},this.GetSelectedSymbol=function(){return this.SelectedRow<0||this.SelectedRow>=this.Data.Data.length?null:{Symbol:this.Data.Data[this.SelectedRow],RowID:this.SelectedRow}},this.DrawBody=function(){if(this.Data&&Te.IsNonEmptyArray(this.Data.Data)){this.Canvas.font=this.ItemFont;var t=this.RectClient.Top,e=this.RectClient.Left,a=this.RectClient.Right-this.RectClient.Left,i=t;this.Canvas.font=this.ItemFont;for(var r=this.Data.YOffset,n=0;r<this.Data.Data.length&&n<this.RowCount;++r,++n){var o=this.Data.Data[r],s=!1;r==this.SelectedRow&&(s=!0),s&&(this.Canvas.fillStyle=this.SelectedColor,this.Canvas.fillRect(e+1,i,a,this.RowHeight)),this.DrawRow(o,i,r),this.ShowSymbol.push({Index:r,Symbol:o}),i+=this.RowHeight}}},this.DrawRow=function(t,e,a,i){var r=this.RectClient.Left,n=this.RectClient.Right,o={Symbol:t,Stock:null,Block:null};this.GetStockDataCallback&&(o.Stock=this.GetStockDataCallback(t));for(var s=this.Data.XOffset;s<this.Column.length;++s){var h=this.Column[s];if(this.DrawItem(a,o,h,r,e,i),(r+=h.Width)>=n)break}},this.DrawItem=function(t,e,a,i,r,n){a.Width;var o=i+this.ItemMergin.Left,s=a.Width-this.ItemMergin.Left-this.ItemMergin.Right,h=e.Stock,l={Text:null,TextColor:this.TextColor,TextAlign:a.TextAlign};a.Type==xi.SHORT_SYMBOL_ID?(h&&h.ShortSymbol?l.Text=h.ShortSymbol:l.Text=e.Symbol,h.Color&&(l.TextColor=h.Color)):a.Type==xi.NAME_ID?h&&h.Name&&(l.Text=this.TextEllipsis(h.Name,s,a.MaxText),h.Color&&(l.TextColor=h.Color)):a.Type==xi.TYPE_ID&&h&&h.Type&&(l.Text=this.TextEllipsis(h.Type,s,a.MaxText),h.Color&&(l.TextColor=h.Color)),this.DrawItemText(l.Text,l.TextColor,l.TextAlign,o,r,s)},this.DrawItemText=function(t,e,a,i,r,n){if(t){var o=i;"center"==a?(o=i+n/2,this.Canvas.textAlign="center"):"right"==a?(o=i+n-2,this.Canvas.textAlign="right"):(o+=2,this.Canvas.textAlign="left"),this.Canvas.textBaseline="middle",this.Canvas.fillStyle=e,this.Canvas.fillText(t,o,r+this.ItemMergin.Top+this.RowHeight/2)}},this.TextEllipsis=function(t,e,a){if(!t)return null;if(t.length<a.length)return t;var i=a.length-3;if(i<0)return null;for(var r=t.slice(0,i),n=i;n<t.length;++n){var o=r+t[n]+"...",s=this.Canvas.measureText(o).width;if(s>e){r+="...";break}r+=t[n]}return r},this.GetFontHeight=function(t,e){return O(this.Canvas,t,e)},this.OnMouseDown=function(t,e,a){if(!this.Data)return null;var i=A(),r={X:t/i,Y:e/i};if(this.UIElement)var n={Left:this.UIElement.getBoundingClientRect().left,Top:this.UIElement.getBoundingClientRect().top};else var n={Left:null,Top:null};var o=this.PtInBody(t,e);if(o){var s=!0;0==this.SelectedModel?(this.SelectedRow==o.Index&&(s=!1),this.SelectedRow=o.Index,this.SelectedFixedRow=-1):(this.SelectedRow==o.DataIndex&&(s=!1),this.SelectedRow=o.DataIndex,this.SelectedFixedRow=-1);var h=w.ON_CLICK_REPORT_ROW;return 2==a.button&&(h=w.ON_RCLICK_REPORT_ROW),this.SendClickEvent(h,{Data:o,X:t,Y:e,e:a,Inside:r,UIElement:n}),{Type:2,Redraw:s,Row:o}}return null},this.OnDrawgRow=function(t,e,a){if(!this.Data)return null;if(!Te.IsNonEmptyArray(this.Data.Data))return null;var i=this.RowHeight/2,r=this.RectClient.Top+this.HeaderHeight,n=this.ChartBorder.GetChartWidth(),o=r;if(e<o+i)return{Type:5};for(var s=this.Data.YOffset,h=0;s<this.Data.Data.length&&h<this.RowCount;++s,++h){var l=this.Data.Data[s],u={Left:0,Top:o,Right:n,Bottom:o+this.RowHeight};if(u.Top+=i,u.Bottom+=i,t>=u.Left&&t<=u.Right&&e>=u.Top&&e<=u.Bottom){var c={DataIndex:s,Index:h,Symbol:l,Pos:0};return 0==h?c.Pos=1:h==this.RowCount-1&&(c.Pos=2),{Type:2,Data:c}}o+=this.RowHeight}return h<this.RowCount?{Type:6}:{Type:7}},this.OnDblClick=function(t,e,a){if(!this.Data)return!1;var i=this.PtInBody(t,e);return!!i},this.PtInBody=function(t,e){if(!this.Data)return null;if(!Te.IsNonEmptyArray(this.Data.Data))return null;for(var a=this.RectClient.Top,i=this.RectClient.Left,r=this.RectClient.Right,n=(this.RectClient.Right,this.RectClient.Left,a),o=this.Data.YOffset,s=0;o<this.Data.Data.length&&s<this.RowCount;++o,++s){var h=this.Data.Data[o],l={Left:i,Top:n,Right:r,Bottom:n+this.RowHeight};if(t>=l.Left&&t<=l.Right&&e>=l.Top&&e<=l.Bottom){var u={Rect:l,DataIndex:o,Index:s,Symbol:h};return u.Item=this.PtInItem(t,e,l.Top,l.Bottom),u}n+=this.RowHeight}return null},this.PtInItem=function(t,e,a,i){for(var r=this.RectClient.Left,n=this.RectClient.Right,o=r,s=0;s<this.FixedColumn&&s<this.Column.length;++s){var h=this.Column[s],l={Left:o,Right:o+h.Width,Top:a,Bottom:i};if(t>=l.Left&&t<=l.Right&&e>=l.Top&&e<=l.Bottom)return{Rect:l,Column:h,Index:s};o+=h.Width}for(var s=this.FixedColumn+this.Data.XOffset;s<this.Column.length;++s){var h=this.Column[s];if(o>=n)break;var l={Left:o,Right:o+h.Width,Top:a,Bottom:i};if(t>=l.Left&&t<=l.Right&&e>=l.Top&&e<=l.Bottom)return{Rect:l,Column:h,Index:s};o+=h.Width}return null},this.IsPtInBody=function(t,e){var a=this.RectClient.Top,i=this.RectClient.Left,r=this.RectClient.Right,n=this.RectClient.Bottom;return t>=i&&t<=r&&e>=a&&e<=n},this.SendClickEvent=function(t,e){var a=this.GetEventCallback(t);a&&a.Callback&&a.Callback(a,e,this)}};a.Frame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.UIElement=this.UIElement,a.GetEventCallback=function(t){return e.GetEventCallback(t)},a.GetStockDataCallback=function(t){return e.GetStockData(t)},a.Data=this.Data,this.ChartPaint[0]=a;var i=!0,r=!0;t&&(!1===t.KeyDown&&(i=!1,D.Chart.Log("[JSKeyboardChartContainer::Create] not register keydown event.")),!1===t.Wheel&&(r=!1,D.Chart.Log("[JSKeyboardChartContainer::Create] not register wheel event."))),i&&this.UIElement.addEventListener("keydown",function(t){e.OnKeyDown(t)},!0),r&&this.UIElement.addEventListener("wheel",function(t){e.OnWheel(t)},!0),this.UIElement.ondblclick=function(t){e.UIOnDblClick(t)},this.UIElement.onmousedown=function(t){e.UIOnMouseDown(t)},this.UIElement.oncontextmenu=function(t){e.UIOnContextMenu(t)},this.UIElement.onmousemove=function(t){e.UIOnMouseMove(t)},this.UIElement.onmouseout=function(t){e.UIOnMounseOut(t)},this.UIElement.onmouseleave=function(t){e.UIOnMouseleave(t)}},this.Draw=function(){if(!(this.UIElement.width<=0||this.UIElement.height<=0)){this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var t=A();this.Canvas.lineWidth=t,this.Frame.Draw(),this.Frame.DrawLogo();for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst&&a.Draw()}for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst||a.Draw()}}},this.GetStockData=function(t){return this.MapSymbol.has(t)?this.MapSymbol.get(t):null},this.ResetStatus=function(){this.Data.XOffset=0,this.Data.YOffset=0},this.ResetSelectStatus=function(){var t=this.GetReportChart();t&&(t.SelectedRow=-1,t.SelectedFixedRow=-1)},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){if(!this.mapEvent.has(t))return null;var e=this.mapEvent.get(t);return e},this.OnSize=function(){this.Frame&&(this.SetSizeChange(!0),this.Draw())},this.SetSizeChange=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&(a.SizeChange=t)}},this.OnWheel=function(t){if(D.Chart.Log("[JSKeyboardChartContainer::OnWheel]",t),(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash)&&this.Data&&Te.IsNonEmptyArray(this.Data.Data)){var e=t.clientX-this.UIElement.getBoundingClientRect().left,a=t.clientY-this.UIElement.getBoundingClientRect().top;if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),this.Canvas.isPointInPath(e,a)){var i=this.ChartPaint[0];if(i){var r=t.wheelDelta;Te.IsObjectExist(t.wheelDelta)||(r=-.01*t.deltaY),r<0?this.GotoNextPage(this.PageUpDownCycle)&&this.Draw():r>0&&this.GotoPreviousPage(this.PageUpDownCycle)&&this.Draw(),t.preventDefault?t.preventDefault():t.returnValue=!1}}}},this.OnKeyDown=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=this.GetReportChart();if(e){var a=t.keyCode?t.keyCode:t.which;switch(a){case 33:this.GotoPreviousPage(this.PageUpDownCycle)&&this.Draw();break;case 34:this.GotoNextPage(this.PageUpDownCycle)&&this.Draw();break;case 38:var i=this.MoveSelectedRow(-1);i&&i.Redraw&&this.Draw();break;case 40:var i=this.MoveSelectedRow(1);i&&i.Redraw&&this.Draw();break;case 37:this.MoveXOffset(-1)&&this.Draw();break;case 39:this.MoveXOffset(1)&&this.Draw();break;case 13:this.OnSelectedSymbol()}t.preventDefault?t.preventDefault():t.returnValue=!1}}},this.OnSelectedSymbol=function(){if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return!1;var t=this.ChartPaint[0];if(!t)return!1;var e=t.GetSelectedSymbol(),a=this.GetEventCallback(w.ON_KEYBOARD_SELECTED);a&&a.Callback&&a.Callback(a,{Data:e},this)},this.UIOnDblClick=function(t){var e=A(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e,r=this.ChartPaint[0];r&&r.OnDblClick(a,i,t)&&this.OnSelectedSymbol()},this.UIOnMouseDown=function(t){var e=this;this.DragXScroll=null,this.DragMove={Click:{X:t.clientX,Y:t.clientY},Move:{X:t.clientX,Y:t.clientY},PreMove:{X:t.clientX,Y:t.clientY}};var a=A(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a,n=this.ChartPaint[0];if(n){var o=n.OnMouseDown(i,r,t);if(!o)return;2!=o.Type||0!=t.button&&2!=t.button||1==o.Redraw&&this.Draw()}document.onmousemove=function(t){e.DocOnMouseMove(t)},document.onmouseup=function(t){e.DocOnMouseUp(t)}},this.UIOnContextMenu=function(t){t.preventDefault()},this.UIOnMouseMove=function(t){var e=A();t.clientX,this.UIElement.getBoundingClientRect().left,t.clientY,this.UIElement.getBoundingClientRect().top},this.UIOnMounseOut=function(t){},this.UIOnMouseleave=function(t){},this.DocOnMouseMove=function(t){if(this.DragMove.PreMove.X=this.DragMove.Move.X,this.DragMove.PreMove.Y=this.DragMove.Move.Y,this.DragMove.Move.X=t.clientX,this.DragMove.Move.Y=t.clientX,!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=A(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;if(this.DragRow){var r=this.DragRow,n=r.LastMove.Y-t.clientY;if(Math.abs(n)<2)return;var o=this.GetReportChart();if(r.LastMove.X=t.clientX,r.LastMove.Y=t.clientY,r.Inside={X:a,Y:i},o){var s=o.OnDrawgRow(a,i,t);if(s)if(2==s.Type)s.Data.DataIndex!=r.Data.Row.DataIndex&&(r.MoveRow=s);else if(7==s.Type){var h=o.GetCurrentPageStatus();h.IsEnd||(this.MoveYOffset(1,!1),r.MoveRow=null,this.EnablePageScroll=!0,this.AutoScrollPage(2))}else 5==s.Type&&this.Data.YOffset>0&&(this.MoveYOffset(-1,!1),r.MoveRow=null,this.EnablePageScroll=!0,this.AutoScrollPage(-2));o.DragRow=r}this.Draw()}else if(this.DragXScroll){var l=this.ChartPaint[0];if(!l||!l.Tab)return;this.DragXScroll.LastMove.X=a,this.DragXScroll.LastMove.Y=i;var u=l.Tab.GetScrollPostionByPoint(a,i);this.SetXOffset(u)&&this.Draw()}}},this.DocOnMouseUp=function(t){document.onmousemove=null,document.onmouseup=null;var e=this.GetEventCallback(w.ON_KEYBOARD_MOUSEUP);e&&e.Callback&&e.Callback(e,{},this)},this.GetMoveAngle=function(t,e){var a=Math.abs(t.X-e.X),i=Math.abs(t.Y-e.Y),r=180*Math.atan(a/i)/Math.PI;return r},this.PreventTouchEvent=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()},this.OnDragYOffset=function(t,e,a,i){if(a<5)return!1;var r=!0;t.LastMove.Y<e[0].clientY&&(r=!1);var n=this.YStepPixel;n<=0&&(n=5);var o=parseInt(a/n);return!(o<=0)&&(0==r&&(o*=-1),this.MoveYOffset(o,this.DragPageCycle)&&(t.IsYMove=!0,this.Draw(),this.DelayUpdateStockData()),!0)},this.OnDragXOffset=function(t,e,a,i){if(a<5)return!1;var r=!0;t.LastMove.X<e[0].clientX&&(r=!1);var n=this.XStepPixel;n<=0&&(n=5);var o=parseInt(a/n);return!(o<=0)&&(r||(o*=-1),this.MoveXOffset(o)&&(t.IsXMove=!0,this.Draw()),!0)},this.GetReportChart=function(){var t=this.ChartPaint[0];return t},this.GotoNextPage=function(t){if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetPageSize();if(a>this.Data.Data.length)return!1;if(this.Data.YOffset+a>=this.Data.Data.length)return!0===t&&(this.Data.YOffset=0,!0);this.Data.YOffset+=a;this.Data.Data.length,this.Data.YOffset;return e.SelectedRow=this.Data.YOffset,!0},this.GotoPreviousPage=function(t){if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetPageSize();if(a>this.Data.Data.length)return!1;if(this.Data.YOffset<=0)return!0===t&&(this.Data.YOffset=this.Data.Data.length-a,!0);var i=this.Data.YOffset;return(i-=a)<0&&(i=0),this.Data.YOffset=i,e.SelectedRow=this.Data.YOffset,!0},this.MoveYOffset=function(t,e){if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return!1;var a=this.ChartPaint[0];if(!a)return!1;var i=a.GetCurrentPageStatus();if(i.IsSinglePage)return!1;if(t>0){var r=this.Data.Data.length,n=i.PageSize,o=this.Data.YOffset;if(e)for(var s=0;s<t;++s)++o+n>r&&(o=0);else{if(o+n>=r)return!1;for(var s=0;s<t&&!(o+n+1>r);++s)++o}return this.Data.YOffset=o,!0}if(t<0){t=Math.abs(t);var o=this.Data.YOffset;if(e)for(var n=i.PageSize,s=0;s<t;++s)--o<0&&(o=this.Data.Data.length-n);else{if(this.Data.YOffset<=0)return!1;for(var s=0;s<t&&!(o-1<0);++s)--o}return this.Data.YOffset=o,!0}return!1},this.GotoLastPage=function(){var t=this.ChartPaint[0];if(t){var e=t.GetPageSize(!0),a=this.Data.Data.length-e;a<0&&(a=0),this.Data.DataOffset=a}},this.SetColumn=function(t,e){var a=this.ChartPaint[0];a&&(a.SetColumn(t),a.SizeChange=!0,e&&e.Redraw&&this.Draw())},this.ReloadResource=function(t){this.Frame.ReloadResource(t);for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}t&&t.Redraw&&(this.SetSizeChange(!0),this.Draw())},this.MoveSelectedRow=function(t){var e=this.ChartPaint[0];if(!e)return null;if(!Te.IsNonEmptyArray(this.Data.Data))return null;var a={Redraw:!1},i=e.GetCurrentPageStatus(),r=(i.PageSize,i.SelectedRow);if(t>0){if(r<0||r<i.Start||r>i.End)return e.SelectedRow=i.Start,a.Redraw=!0,a;for(var n=this.Data.YOffset,o=0;o<t&&(++r>i.End&&++n,!(r>=this.Data.Data.length));++o)a.Redraw=!0,e.SelectedRow=r,this.Data.YOffset=n;return a}if(t<0){if(r<0||r<i.Start||r>i.End)return e.SelectedRow=i.End,a.Redraw=!0,a;t=Math.abs(t);for(var n=this.Data.YOffset,o=0;o<t&&(--r<i.Start&&--n,!(r<0));++o)a.Redraw=!0,e.SelectedRow=r,this.Data.YOffset=n;return a}}}(this.CanvasElement);if(e.Create(t),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),Te.IsNonEmptyArray(t.Column)&&e.SetColumn(t.Column),Te.IsNumber(t.BorderLine)&&(e.Frame.BorderLine=t.BorderLine),this.SetChartBorder(e,t),t.EventCallback)for(var a=0;a<t.EventCallback.length;++a){var i=t.EventCallback[a];e.AddEventCallback(i)}return e},this.SetChartBorder=function(t,e){if(e.Border){e.Border;Te.IsNumber(e.Border.Left)&&(t.Frame.ChartBorder.Left=e.Border.Left),Te.IsNumber(e.Border.Right)&&(t.Frame.ChartBorder.Right=e.Border.Right),Te.IsNumber(e.Border.Top)&&(t.Frame.ChartBorder.Top=e.Border.Top),Te.IsNumber(e.Border.Bottom)&&(t.Frame.ChartBorder.Bottom=e.Border.Bottom);var a=A();t.Frame.ChartBorder.Left*=a,t.Frame.ChartBorder.Right*=a,t.Frame.ChartBorder.Top*=a,t.Frame.ChartBorder.Bottom*=a}},this.SetColumn=function(t,e){this.JSChartContainer&&this.JSChartContainer.SetColumn(t,e)},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(D.Chart.Log("[JSKeyboardChart:AddEventCallback] obj=",t),this.JSChartContainer.AddEventCallback(t))},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(D.Chart.Log("[JSKeyboardChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))},this.ChartDestory=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChartDestory&&this.JSChartContainer.ChartDestory()},this.Draw=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Draw&&(D.Chart.Log("[JSKeyboardChart:Draw] "),this.JSChartContainer.Draw())},this.SetSymbolData=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Draw&&(D.Chart.Log("[JSKeyboardChart:SetSymbolData] ",t),this.JSChartContainer.SetSymbolData(t))},this.Search=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Search&&(D.Chart.Log("[JSKeyboardChart:Search] ",t),this.JSChartContainer.Search(t))},this.OnKeyDown=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.OnKeyDown&&(D.Chart.Log("[JSKeyboardChart:OnKeyDown] ",t),this.JSChartContainer.OnKeyDown(t))},this.ClearSearch=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearSearch&&(D.Chart.Log("[JSKeyboardChart:ClearSearch] ",t),this.JSChartContainer.ClearSearch(t))}}yi.Init=function(t){var e=new yi(t);return e.OnSize(),e},yi.SetStyle=function(t){t&&ia.SetStyle(t)};var xi={SHORT_SYMBOL_ID:0,SYMBOL_ID:1,NAME_ID:2,TYPE_ID:3};function wi(t){this.DivElement=t,this.JSChartContainer,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jsscrollbar-drawing",this.CanvasElement.id=P(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&D.Chart.Log("[JSScrollBarChart::JSScrollBarChart] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.OnSize=function(){var t=parseInt(this.DivElement.style.height.replace("px",""));this.CanvasElement.height=t,this.CanvasElement.width=parseInt(this.DivElement.style.width.replace("px","")),this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var e=A();this.CanvasElement.height*=e,this.CanvasElement.width*=e,D.Chart.Log("[JSScrollBarChart::OnSize] devicePixelRatio="+window.devicePixelRatio+", height="+this.CanvasElement.height+", width="+this.CanvasElement.width),this.JSChartContainer&&this.JSChartContainer.OnSize&&this.JSChartContainer.OnSize()},this.SetOption=function(t){var e=this.CreateJSScrollBarChartContainer(t);if(!e)return!1;t.OnCreatedCallback&&t.OnCreatedCallback(e),e.Draw(),this.JSChartContainer=e,this.DivElement.JSChart=this},this.CreateJSScrollBarChartContainer=function(t){var e=new function(t){this.ClassName="JSScrollBarChartContainer",this.Frame,this.ChartPaint=[],this.ChartSplashPaint=null,this.LoadDataSplashTitle="无数据",this.Canvas=t.getContext("2d"),this.ShowCanvas=null,this.XOffsetData={Start:-1,End:-1,Count:0},this.SourceData,this.SliderChart,this.DragMove,this.DragSlider,this.DragTimer,this.DelayDragFrequency=150,this.AutoMargin={Left:!1,Right:!1},this.mapEvent=new C.default,this.UIElement=t,this.LastPoint=new V,this.IsDestroy=!1,this.HQChart=null,this.ChartDestory=function(){this.IsDestroy=!0},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){if(!this.mapEvent.has(t))return null;var e=this.mapEvent.get(t);return e},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new Le,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.IsEnableSplash=!0,this.Frame=new function(){this.ChartBorder,this.Canvas,this.BorderLine=null,this.Data,this.Count=0,this.ClassName="JSScrollBarFrame",this.HorizontalMax=10,this.HorizontalMin=5,this.XPointCount=0,this.XSplitTextFont=ia.ScrollBar.XSplitTextFont,this.XSplitTextColor=ia.ScrollBar.XSplitTextColor,this.XSplitLineColor=ia.ScrollBar.XSplitLineColor,this.BorderColor=ia.ScrollBar.BorderColor,this.LogoTextColor=ia.FrameLogo.TextColor,this.LogoTextFont=ia.FrameLogo.Font,this.ReloadResource=function(t){this.BorderColor=ia.ScrollBar.BorderColor,this.LogoTextColor=ia.FrameLogo.TextColor,this.LogoTextFont=ia.FrameLogo.Font},this.Draw=function(){this.DrawBorder(),this.DrawLogo(),this.DrawVertical()},this.DrawLogo=function(){var t=ia.FrameLogo.Text;if(Te.IsString(t)){this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="left",this.Canvas.textBaseline="top";var e=this.ChartBorder.GetLeft()+2,a=this.ChartBorder.GetTop()+2;this.Canvas.fillText(t,e,a)}},this.DrawBorder=function(){var t=_(this.ChartBorder.GetLeft()),e=_(this.ChartBorder.GetTop()),a=_(this.ChartBorder.GetRight()),i=_(this.ChartBorder.GetBottom()),r=a-t,n=i-e;Te.IsNumber(this.BorderLine)?(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(a,e)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(t,i),this.Canvas.lineTo(a,i)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(t,i)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(a,e),this.Canvas.lineTo(a,i)),this.Canvas.stroke()):(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(t,e,r,n))},this.GetXFromIndex=function(t){var e=this.XPointCount;if(1==e)return 0==t?this.ChartBorder.GetLeft():this.ChartBorder.GetRight();if(e<=0)return this.ChartBorder.GetLeft();if(t>=e)return this.ChartBorder.GetRight();var a=this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()*t/e;return a},this.GetYFromData=function(t){if(t<=this.HorizontalMin)return this.ChartBorder.GetBottomEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetTopEx();var e=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetBottomEx()-e},this.GetXData=function(t){return t<=this.ChartBorder.GetLeft()?0:t>=this.ChartBorder.GetRight()?this.XPointCount:(t-this.ChartBorder.GetLeft())*(1*this.XPointCount/this.ChartBorder.GetWidth())},this.GetPreSetpWidth=function(){return 1*this.XPointCount/this.ChartBorder.GetWidth()},this.DrawVertical=function(){if(!(this.ChartBorder.Bottom<=5)&&this.Data&&Te.IsNonEmptyArray(this.Data.Data)){var t=this.Data.Data[0],e=parseInt(t.Date/1e4),a=t.Date%1e4;this.Canvas.font=this.XSplitTextFont,this.Canvas.fillStyle=this.XSplitTextColor,this.Canvas.textBaseline="top";var i=this.ChartBorder.GetBottom()+2,r=this.ChartBorder.GetTop(),n=this.ChartBorder.GetBottom(),o=0,s=pt.IsMinutePeriod(this.Data.Period,!0);if(s)for(var h=0;h<this.Data.Data.length;++h){var t=this.Data.Data[h],l=t.Date%1e4;if(0!=h){if(l!=a){var u=Te.FormatDateString(t.Date,"MM-DD"),c=this.GetXFromIndex(h),f=this.Canvas.measureText(u).width+2;c-f/2>o&&(this.Canvas.textAlign="center",this.Canvas.fillText(u,c,i),o=c+f/2),c=_(c),this.Canvas.strokeStyle=this.XSplitLineColor,this.Canvas.beginPath(),this.Canvas.moveTo(c,r),this.Canvas.lineTo(c,n),this.Canvas.stroke(),a=l}}else{var u=Te.FormatDateString(t.Date,"MM-DD"),c=this.ChartBorder.GetLeft();this.Canvas.textAlign="left",this.Canvas.fillText(u,c,i);var f=this.Canvas.measureText(u).width+2;o=c+f,a=l}}else for(var h=0;h<this.Data.Data.length;++h){var t=this.Data.Data[h],d=parseInt(t.Date/1e4);if(0!=h){if(d!=e){var u=""+d,c=this.GetXFromIndex(h),f=this.Canvas.measureText(u).width+2;c-f/2>o&&(this.Canvas.textAlign="center",this.Canvas.fillText(u,c,i),o=c+f/2),c=_(c),this.Canvas.strokeStyle=this.XSplitLineColor,this.Canvas.beginPath(),this.Canvas.moveTo(c,r),this.Canvas.lineTo(c,n),this.Canvas.stroke(),e=d}}else{var u=""+d,c=this.ChartBorder.GetLeft(),f=this.Canvas.measureText(u).width+2;this.Canvas.textAlign="left",this.Canvas.fillText(u,c,i),o=c+f,e=d}}}}},this.Frame.ChartBorder=new X,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame;var a=new function(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ScrollBarBGChart",this.SizeChange=!0,this.Data,this.Color=ia.ScrollBar.BGChart.Color,this.LineWidth=ia.ScrollBar.BGChart.LineWidth,this.AreaColor=ia.ScrollBar.BGChart.AreaColor,this.ReloadResource=function(t){this.Color=ia.ScrollBar.BGChart.Color,this.LineWidth=ia.ScrollBar.BGChart.LineWidth,this.AreaColor=ia.ScrollBar.BGChart.AreaColor},this.Draw=function(){if(this.Data&&Te.IsNonEmptyArray(this.Data.Data)){this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*A());var t=this.ChartBorder.GetBottom();this.Canvas.strokeStyle=this.Color;for(var e,a,i=!0,r=0,n={},o=0;o<this.Data.Data.length;++o){var s=this.Data.Data[o],h=s.Close;Te.IsNumber(h)&&(e=this.ChartFrame.GetXFromIndex(o),a=this.ChartFrame.GetYFromData(h),i?(this.Canvas.beginPath(),this.Canvas.moveTo(e,a),i=!1,n={X:e,Y:a}):this.Canvas.lineTo(e,a),++r)}r>0&&(this.Canvas.stroke(),this.Canvas.lineTo(e,t),this.Canvas.lineTo(n.X,t),this.Canvas.closePath(),this.Canvas.fillStyle=this.AreaColor,this.Canvas.fill()),this.Canvas.restore()}},this.GetMaxMin=function(){var t={Max:null,Min:null};if(!this.Data||!Te.IsNonEmptyArray(this.Data.Data))return t;for(var e=0;e<this.Data.Data.length;++e){var a=this.Data.Data[e],i=a.Close;Te.IsNumber(i)&&((null==t.Max||t.Max<i)&&(t.Max=i),(null==t.Min||t.Min>i)&&(t.Min=i))}return t}};a.ChartFrame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ChartPaint.push(a);var a=new function(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="SliderChart",this.OffsetData,this.Color=ia.ScrollBar.Slider.BarAreaColor,this.BarColor=ia.ScrollBar.Slider.BarColor,this.BarWidth=10,this.BarPadding=10,this.DateFont=ia.ScrollBar.Slider.DateFont,this.DateColor=ia.ScrollBar.Slider.DateColor,this.AryRect=[],this.XStart,this.XEnd,this.SizeChange=!0,this.DragMode=!1,this.ReloadResource=function(t){this.Color=ia.ScrollBar.Slider.BarAreaColor,this.BarColor=ia.ScrollBar.Slider.BarColor,this.DateFont=ia.ScrollBar.Slider.DateFont,this.DateColor=ia.ScrollBar.Slider.DateColor},this.Draw=function(){if(this.AryRect=[],this.OffsetData&&Te.IsPlusNumber(this.OffsetData.Count)&&Te.IsNumber(this.OffsetData.Start)&&Te.IsNumber(this.OffsetData.End)){var t,e,a=this.ChartBorder.GetTop(),i=this.ChartBorder.GetBottom();if(this.DragMode){var r=this.XStart,n=this.XEnd,o=this.ChartFrame.GetXData(r),s=this.ChartFrame.GetXData(n);o=parseInt(o),s=parseInt(s),t={Data:this.Data.Data[this.OffsetData.Start],X:r,Type:o<s?0:1},e={Data:this.Data.Data[this.OffsetData.End],X:n,Type:s>o?1:0}}else{var h=this.OffsetData.Start,l=this.OffsetData.End,r=this.ChartFrame.GetXFromIndex(h),n=this.ChartFrame.GetXFromIndex(l);this.XStart=r,this.XEnd=n,t={Data:this.Data.Data[this.OffsetData.Start],X:r,Type:r<n?0:1},e={Data:this.Data.Data[this.OffsetData.End],X:n,Type:n>r?1:0}}this.Canvas.fillStyle=this.Color;var u={Left:Math.min(r,n),Top:a,Width:Math.abs(n-r),Height:i-a};u.Right=u.Left+u.Width,u.Bottom=u.Top+u.Height,this.Canvas.fillRect(u.Left,u.Top,u.Width,u.Height),this.AryRect.push({Rect:u,Type:0});var c=A(),f=this.BarWidth*c,d=i-a-2*this.BarPadding*c,C=r-this.BarWidth/2,p=a+this.BarPadding*c;this.Canvas.fillStyle=this.BarColor;var u={Left:C,Top:p,Width:f,Height:d};u.Right=u.Left+u.Width,u.Bottom=u.Top+u.Height,this.Canvas.fillRect(u.Left,u.Top,u.Width,u.Height),this.AryRect.push({Rect:u,Type:1});var C=n-this.BarWidth/2,u={Left:C,Top:p,Width:f,Height:d};u.Right=u.Left+u.Width,u.Bottom=u.Top+u.Height,this.Canvas.fillRect(u.Left,u.Top,u.Width,u.Height),this.AryRect.push({Rect:u,Type:2}),this.DrawDateTime(t),this.DrawDateTime(e)}},this.DrawDateTime=function(t){if(t&&t.Data){var e=Te.FormatDateString(t.Data.Date),a=this.ChartBorder.GetTop(),i=this.ChartBorder.GetBottom(),r=pt.IsMinutePeriod(this.Data.Period,!0),n=null;if(r&&(n=Te.FormatTimeString(t.Data.Time,"HH:MM")),0==t.Type){this.Canvas.textAlign="right";var o=t.X-this.BarWidth/2}else if(1==t.Type){this.Canvas.textAlign="left";var o=t.X+this.BarWidth/2}this.Canvas.font=this.DateFont;var s=this.Canvas.measureText("擎").width;this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.DateColor;var h=a+(i-a)/2;this.Canvas.fillText(e,o,h),n&&(h+=s,this.Canvas.fillText(n,o,h))}},this.PtInChart=function(t,e){if(!Te.IsNonEmptyArray(this.AryRect))return null;for(var a=this.AryRect.length-1;a>=0;--a){var i=this.AryRect[a],r=i.Rect;if(t>=r.Left&&t<=r.Right&&e>=r.Top&&e<=r.Bottom)return{Data:i}}return null}};a.ChartFrame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.OffsetData=this.XOffsetData,a.GetEventCallback=function(t){return e.GetEventCallback(t)},this.SliderChart=a,this.ChartPaint.push(a),this.UIElement.onmousedown=function(t){e.UIOnMouseDown(t)},this.UIElement.oncontextmenu=function(t){e.UIOnContextMenu(t)},this.UIElement.onmousemove=function(t){e.UIOnMouseMove(t)},this.UIElement.onmouseout=function(t){e.UIOnMounseOut(t)},this.UIElement.onmouseleave=function(t){e.UIOnMouseleave(t)}},this.Draw=function(){if(!(this.UIElement.width<=0||this.UIElement.height<=0)){this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var t=A();if(this.Canvas.lineWidth=t,this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return this.Frame.Draw({IsEnableSplash:this.ChartSplashPaint.IsEnableSplash}),void this.ChartSplashPaint.Draw();this.Frame.Draw(),this.Frame.DrawLogo();for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst&&a.Draw()}for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst||a.Draw()}}},this.OnSize=function(){this.Frame&&(this.SetSizeChange(!0),this.Draw())},this.SetSizeChange=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&(a.SizeChange=t)}},this.UpdateFrameMaxMin=function(){for(var t=null,e=null,a=0;a<this.ChartPaint.length;++a){var i=this.ChartPaint[a];if(i.GetMaxMin){var r=i.GetMaxMin();null!=r&&null!=r.Max&&null!=r.Min&&((null==t||t<r.Max)&&(t=r.Max),(null==e||e>r.Min)&&(e=r.Min))}}Te.IsNumber(t)&&Te.IsNumber(e)&&(this.Frame.HorizontalMax=t,this.Frame.HorizontalMin=e)},this.UIOnDblClick=function(t){},this.CancelDragTimer=function(){this.DragTimer&&(clearTimeout(this.DragTimer),this.DragTimer=null)},this.UIOnMouseDown=function(t){var e=this;this.CancelDragTimer(),this.DragSlider=null,this.DragMove={Click:{X:t.clientX,Y:t.clientY},Move:{X:t.clientX,Y:t.clientY},PreMove:{X:t.clientX,Y:t.clientY}};var a=A(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a;if(this.SliderChart){var n=this.SliderChart.PtInChart(i,r);if(!n)return;this.DragSlider={Click:{X:t.clientX,Y:t.clientY},LastMove:{X:t.clientX,Y:t.clientY},Data:n},this.DragSlider.DrawCount=0}document.onmousemove=function(t){e.DocOnMouseMove(t)},document.onmouseup=function(t){e.DocOnMouseUp(t)}},this.UIOnContextMenu=function(t){t.preventDefault()},this.UIOnMouseMove=function(t){var e=A(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;if(!this.DragSlider){var r=r={Cursor:"default"},n=this.SliderChart.PtInChart(a,i);if(n)switch(n.Data.Type){case 0:r={Cursor:"move",Name:"SliderChart"};break;case 1:case 2:r={Cursor:"ew-resize",Name:"SliderChart"}}r&&(this.UIElement.style.cursor=r.Cursor)}},this.UIOnMounseOut=function(t){},this.UIOnMouseleave=function(t){},this.DocOnMouseMove=function(t){var e=this;if(this.DragMove.PreMove.X=this.DragMove.Move.X,this.DragMove.PreMove.Y=this.DragMove.Move.Y,this.DragMove.Move.X=t.clientX,this.DragMove.Move.Y=t.clientX,!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var a=A(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a;if(D.Chart.Log("[JSScrollBarChartContainer::DocOnMouseMove] x="+i+", y="+r),this.DragSlider){var n=this.DragSlider,o=(t.clientX-n.LastMove.X)*a;if(Math.abs(o)<1)return;var s=this.GetPageRange(),h=this.Frame.ChartBorder.GetLeft(),l=this.Frame.ChartBorder.GetRight();this.SliderChart.DragMode=!0;var u=n.Data.Data.Type,c=this.SliderChart.XStart+o,f=this.SliderChart.XEnd+o;0==u?(c<h?(c=s.First.XStart,f=s.First.XEnd):f>=l&&(c=s.Last.XStart,f=s.Last.XEnd),this.SliderChart.XStart=c,this.SliderChart.XEnd=f):1==u?(c<=h&&(c=s.First.XStart),this.SliderChart.XStart=c):2==u&&(f>=l&&(f=s.Last.XEnd),this.SliderChart.XEnd=f),n.UpdateData={XStart:c,XEnd:f,Type:u},n.LastMove.X=t.clientX,n.LastMove.Y=t.clientY,0==n.DrawCount?this.DragUpdate(n):this.DragTimer=setTimeout(function(){e.DragUpdate(e.DragSlider)},this.DelayDragFrequency)}}},this.DocOnMouseUp=function(t){document.onmousemove=null,document.onmouseup=null,this.CancelDragTimer();var e=this.DragSlider;this.DragMove=null,this.DragSlider=null,this.SliderChart.DragMode=!1,this.DragUpdate(e)},this.DragUpdate=function(t){t&&t.UpdateData&&(this.UpdateXDataOffset(t.UpdateData),this.Draw(),++t.DrawCount)},this.Reset=function(t){this.SourceData=null,this.XOffsetData.Start=-1,this.XOffsetData.End=-1,this.XOffsetData.Count=0,this.Frame.Data=null;for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.Data=null}this.ChartSplashPaint&&(this.ChartSplashPaint.IsEnableSplash=!0),t.Draw&&this.Draw()},this.UpdateSlider=function(t){if(!this.SliderChart.DragMode){var e=!1;(this.AutoMargin.Left||this.AutoMargin.Right)&&t.Border&&(this.AutoMargin.Left&&this.Frame.ChartBorder.Left!=t.Border.Left&&(e=!0),this.AutoMargin.Right&&this.Frame.ChartBorder.Right!=t.Border.Right&&(e=!0));var a=t.Data;if(this.XOffsetData.Start!=t.Start||this.XOffsetData.End!=t.End||this.SourceData!=a||e){this.SourceData=a;var i=a.Data.length;Te.IsNumber(t.RightSpaceCount)&&(i+=t.RightSpaceCount),this.Frame.XPointCount=i,this.Frame.Data=a,this.XOffsetData.Count=i,this.XOffsetData.Start=t.Start,this.XOffsetData.End=t.End;for(var r=0;r<this.ChartPaint.length;++r){var n=this.ChartPaint[r];n.Data=a}this.AutoMargin.Left&&t.Border&&Te.IsNumber(t.Border.Left)&&(this.Frame.ChartBorder.Left=t.Border.Left),this.AutoMargin.Right&&t.Border&&Te.IsNumber(t.Border.Right)&&(this.Frame.ChartBorder.Right=t.Border.Right),this.UpdateFrameMaxMin(),this.ChartSplashPaint&&(this.ChartSplashPaint.IsEnableSplash=!1),t.Draw&&this.Draw()}}},this.UpdateXDataOffset=function(t){if(0==t.Type){var e=this.Frame.GetXData(t.XStart),a=(e=parseInt(e))-this.XOffsetData.Start;this.XOffsetData.Start=e,this.XOffsetData.End+=a}else if(1==t.Type){var e=this.Frame.GetXData(t.XStart);e=parseInt(e),this.XOffsetData.Start=e}else if(2==t.Type){var i=this.Frame.GetXData(t.XEnd);i=parseInt(i),this.XOffsetData.End=i}var r=this.SourceData.Data[this.XOffsetData.End],n=this.SourceData.Data[this.XOffsetData.Start],o={Type:t.Type,Count:this.XOffsetData.Count};if(this.XOffsetData.End>this.XOffsetData.Start?(o.Start={Index:this.XOffsetData.Start,Item:n},o.End={Index:this.XOffsetData.End,Item:r}):(o.Start={Index:this.XOffsetData.End,Item:r},o.End={Index:this.XOffsetData.Start,Item:n}),this.HQChart&&this.HQChart.JSChartContainer){var s=this.HQChart.JSChartContainer;if(s.ChartOperator){var t={ID:F.OP_SCROOLBAR_SLIDER_CHANGED,Start:o.Start,End:o.End,Type:o.Type};s.ChartOperator(t)}}var h=this.GetEventCallback(w.ON_SCROLLBAR_SLIDER_CHANGED);h&&h.Callback(h,o,this)},this.ReloadResource=function(t){this.Frame.ReloadResource(t);for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}t&&t.Redraw&&(this.SetSizeChange(!0),this.Draw())},this.GetPageRange=function(){var t={},e=Math.abs(this.XOffsetData.Start-this.XOffsetData.End);t.ShowCount=e;var a=this.Frame.GetXFromIndex(0),i=this.Frame.GetXFromIndex(e);t.First={XStart:a,XEnd:i};var r=this.Frame.XPointCount-1,i=this.Frame.GetXFromIndex(r),a=this.Frame.GetXFromIndex(r-e);return t.Last={XStart:a,XEnd:i},t},this.ReloadResource=function(t){this.Frame.ReloadResource(t);for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}1==t.Draw&&this.Draw()}}(this.CanvasElement);if(e.Create(t),Te.IsNumber(t.DelayDragFrequency)&&(e.DelayDragFrequency=t.DelayDragFrequency),this.SetChartBorder(e,t),t.EventCallback)for(var a=0;a<t.EventCallback.length;++a){var i=t.EventCallback[a];e.AddEventCallback(i)}return e},this.SetChartBorder=function(t,e){if(e.Border){var a=e.Border;Te.IsNumber(e.Border.Left)&&(t.Frame.ChartBorder.Left=e.Border.Left),Te.IsNumber(e.Border.Right)&&(t.Frame.ChartBorder.Right=e.Border.Right),Te.IsNumber(e.Border.Top)&&(t.Frame.ChartBorder.Top=e.Border.Top),Te.IsNumber(e.Border.Bottom)&&(t.Frame.ChartBorder.Bottom=e.Border.Bottom);var i=A();t.Frame.ChartBorder.Left*=i,t.Frame.ChartBorder.Right*=i,t.Frame.ChartBorder.Top*=i,t.Frame.ChartBorder.Bottom*=i,Te.IsBool(a.AutoLeft)&&(t.AutoMargin.Left=a.AutoLeft),Te.IsBool(a.AutoRight)&&(t.AutoMargin.Right=a.AutoRight)}},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(D.Chart.Log("[JSScrollBarChart:AddEventCallback] obj=",t),this.JSChartContainer.AddEventCallback(t))},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(D.Chart.Log("[JSScrollBarChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))},this.ChartDestory=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChartDestory&&this.JSChartContainer.ChartDestory()},this.Draw=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Draw&&(D.Chart.Log("[JSScrollBarChart:Draw] "),this.JSChartContainer.Draw())},this.RecvData=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.RecvData&&(D.Chart.Log("[JSScrollBarChart:RecvData] "),this.JSChartContainer.RecvData(t,e))},this.UpdateSlider=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.UpdateSlider&&(D.Chart.Log("[JSScrollBarChart:UpdateSlider] "),this.JSChartContainer.UpdateSlider(t))},this.Reset=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Reset&&(D.Chart.Log("[JSScrollBarChart:Reset] "),this.JSChartContainer.Reset(t))},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(D.Chart.Log("[JSScrollBarChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))}}wi.Init=function(t){var e=new wi(t);return e.OnSize(),e},wi.SetStyle=function(t){t&&ia.SetStyle(t)},wi.GetResource=function(){return ia},e.default=(r={jsChartInit:I.Init,jsChartStyle:I.SetStyle,JSChart:I,ChartData:pt,SingleData:ct,HistoryData:st,MARKET_SUFFIX_NAME:Ea,IFrameSplitOperator:Te,FrameSplitKLinePriceY:Ie,FrameSplitKLineX:xe,JSKLineInfoMap:ga,JSCHART_EVENT_ID:w,JSCHART_OPERATOR_ID:F,JSCHART_DATA_FIELD_ID:L,JSCHART_CUSTOM_YCOORDINATE_ID:Se,JSAlgorithm:Za,JSComplier:ii,JSIndexScript:T,GetDevicePixelRatio:A},(0,u.default)(r,"GetDevicePixelRatio",A),(0,u.default)(r,"ScriptIndexConsole",ci),(0,u.default)(r,"STYLE_TYPE_ID",Ci),(0,u.default)(r,"HQChartStyle",pi),(0,u.default)(r,"JSConsole",D),(0,u.default)(r,"KLineTooltipPaint",pe),(0,u.default)(r,"MinuteTooltipPaint",me),(0,u.default)(r,"ChartDrawTwoPointDemo",Qe),(0,u.default)(r,"ChartDrawThreePointDemo",$e),(0,u.default)(r,"CoordinateInfo",Y),(0,u.default)(r,"JSDealChart",mi),(0,u.default)(r,"DEAL_COLUMN_ID",vi),(0,u.default)(r,"JSReportChart",gi),(0,u.default)(r,"REPORT_COLUMN_ID",Ti),(0,u.default)(r,"JSKeyboardChart",yi),(0,u.default)(r,"KEYBOARD_COLUMN_ID",xi),(0,u.default)(r,"JSScrollBarChart",wi),(0,u.default)(r,"IChartPainting",wt),(0,u.default)(r,"IExtendChartPainting",Ce),(0,u.default)(r,"IChartTitlePainting",Be),(0,u.default)(r,"IChartDrawPicture",We),(0,u.default)(r,"DynamicTitleData",Ye),(0,u.default)(r,"CONDITION_PERIOD",g),(0,u.default)(r,"ChartMinuteVolumBar",Mt),(0,u.default)(r,"ChartKLine",Et),(0,u.default)(r,"KLineFrame",$),(0,u.default)(r,"JS_Frame",{KLineFrame:$,KLineHScreenFrame:et}),(0,u.default)(r,"JS_ChangeStringFormat",{IChangeStringFormat:Me,HQMinuteTimeStringFormat:Pe,HQDateStringFormat:Ne,HQPriceStringFormat:Oe}),(0,u.default)(r,"JS_ID",{JSCHART_EVENT_ID:w,JSCHART_OPERATOR_ID:F,JSCHART_DRAG_ID:E,JSCHART_BUTTON_ID:b,JSCHART_DATA_FIELD_ID:L}),r)},"8nMs":function(t,e,a){var i=a("bYtY"),r=a("IwbS"),n=a("+rIm"),o=a("Znkb"),s=a("AVZG"),h=a("WN+l"),l=h.rectCoordAxisBuildSplitArea,u=h.rectCoordAxisHandleRemove,c=["axisLine","axisTickLabel","axisName"],f=["splitArea","splitLine","minorSplitLine"],d=o.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(t,e,a,o){this.group.removeAll();var h=this._axisGroup;if(this._axisGroup=new r.Group,this.group.add(this._axisGroup),t.get("show")){var l=t.getCoordSysModel(),u=s.layout(l,t),C=new n(t,u);i.each(c,C.add,C),this._axisGroup.add(C.getGroup()),i.each(f,function(e){t.get(e+".show")&&this["_"+e](t,l)},this),r.groupTransition(h,this._axisGroup,t),d.superCall(this,"render",t,e,a,o)}},remove:function(){u(this)},_splitLine:function(t,e){var a=t.axis;if(!a.scale.isBlank()){var n=t.getModel("splitLine"),o=n.getModel("lineStyle"),s=o.get("color");s=i.isArray(s)?s:[s];for(var h=e.coordinateSystem.getRect(),l=a.isHorizontal(),u=0,c=a.getTicksCoords({tickModel:n}),f=[],d=[],C=o.getLineStyle(),p=0;p<c.length;p++){var m=a.toGlobalCoord(c[p].coord);l?(f[0]=m,f[1]=h.y,d[0]=m,d[1]=h.y+h.height):(f[0]=h.x,f[1]=m,d[0]=h.x+h.width,d[1]=m);var D=u++%s.length,v=c[p].tickValue;this._axisGroup.add(new r.Line({anid:null!=v?"line_"+c[p].tickValue:null,subPixelOptimize:!0,shape:{x1:f[0],y1:f[1],x2:d[0],y2:d[1]},style:i.defaults({stroke:s[D]},C),silent:!0}))}}},_minorSplitLine:function(t,e){var a=t.axis,i=t.getModel("minorSplitLine").getModel("lineStyle"),n=e.coordinateSystem.getRect(),o=a.isHorizontal(),s=a.getMinorTicksCoords();if(s.length)for(var h=[],l=[],u=i.getLineStyle(),c=0;c<s.length;c++)for(var f=0;f<s[c].length;f++){var d=a.toGlobalCoord(s[c][f].coord);o?(h[0]=d,h[1]=n.y,l[0]=d,l[1]=n.y+n.height):(h[0]=n.x,h[1]=d,l[0]=n.x+n.width,l[1]=d),this._axisGroup.add(new r.Line({anid:"minor_line_"+s[c][f].tickValue,subPixelOptimize:!0,shape:{x1:h[0],y1:h[1],x2:l[0],y2:l[1]},style:u,silent:!0}))}},_splitArea:function(t,e){l(this,this._axisGroup,t,e)}});d.extend({type:"xAxis"}),d.extend({type:"yAxis"})},"8nly":function(t,e,a){var i=a("mFDi"),r=a("4mN7"),n=a("QBsz"),o=a("BlVb");function s(t,e,a){if(this.name=t,this.geometries=e,a)a=[a[0],a[1]];else{var i=this.getBoundingRect();a=[i.x+i.width/2,i.y+i.height/2]}this.center=a}s.prototype={constructor:s,properties:null,getBoundingRect:function(){var t=this._rect;if(t)return t;for(var e=Number.MAX_VALUE,a=[e,e],o=[-e,-e],s=[],h=[],l=this.geometries,u=0;u<l.length;u++)if("polygon"===l[u].type){var c=l[u].exterior;r.fromPoints(c,s,h),n.min(a,a,s),n.max(o,o,h)}return 0===u&&(a[0]=a[1]=o[0]=o[1]=0),this._rect=new i(a[0],a[1],o[0]-a[0],o[1]-a[1])},contain:function(t){var e=this.getBoundingRect(),a=this.geometries;if(!e.contain(t[0],t[1]))return!1;t:for(var i=0,r=a.length;i<r;i++)if("polygon"===a[i].type){var n=a[i].exterior,s=a[i].interiors;if(o.contain(n,t[0],t[1])){for(var h=0;h<(s?s.length:0);h++)if(o.contain(s[h]))continue t;return!0}}return!1},transformTo:function(t,e,a,r){var o=this.getBoundingRect(),s=o.width/o.height;a?r||(r=a/s):a=s*r;for(var h=new i(t,e,a,r),l=o.calculateTransform(h),u=this.geometries,c=0;c<u.length;c++)if("polygon"===u[c].type){for(var f=u[c].exterior,d=u[c].interiors,C=0;C<f.length;C++)n.applyTransform(f[C],f[C],l);for(var p=0;p<(d?d.length:0);p++)for(C=0;C<d[p].length;C++)n.applyTransform(d[p][C],d[p][C],l)}(o=this._rect).copy(h),this.center=[o.x+o.width/2,o.y+o.height/2]},cloneShallow:function(t){null==t&&(t=this.name);var e=new s(t,this.geometries,this.center);return e._rect=this._rect,e.transformTo=null,e}};var h=s;t.exports=h},"8oxB":function(t,e){var a,i,r=t.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(a===setTimeout)return setTimeout(t,0);if((a===n||!a)&&setTimeout)return a=setTimeout,setTimeout(t,0);try{return a(t,0)}catch(e){try{return a.call(null,t,0)}catch(e){return a.call(this,t,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:n}catch(t){a=n}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var h,l=[],u=!1,c=-1;function f(){u&&h&&(u=!1,h.length?l=h.concat(l):c=-1,l.length&&d())}function d(){if(!u){var t=s(f);u=!0;for(var e=l.length;e;){for(h=l,l=[];++c<e;)h&&h[c].run();c=-1,e=l.length}h=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function C(t,e){this.fun=t,this.array=e}function p(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)e[a-1]=arguments[a];l.push(new C(t,e)),1!==l.length||u||s(d)},C.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},"8sL3":function(t,e,a){"use strict";var i=a("FgkJ");t.exports.f=function(t){return new function(t){var e,a;this.promise=new t(function(t,i){if(void 0!==e||void 0!==a)throw TypeError("Bad Promise constructor");e=t,a=i}),this.resolve=i(e),this.reject=i(a)}(t)}},"9H2F":function(t,e,a){var i=a("bYtY"),r=(i.assert,i.isArray);a("Tghj").__DEV__;function n(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0,this.context}var o=n.prototype;o.perform=function(t){var e,a=this._upstream,i=t&&t.skip;if(this._dirty&&a){var n=this.context;n.data=n.outputData=a.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!i&&(e=this._plan(this.context));var o,s=f(this._modBy),l=this._modDataCount||0,u=f(t&&t.modBy),c=t&&t.modDataCount||0;function f(t){return!(t>=1)&&(t=1),t}s===u&&l===c||(e="reset"),(this._dirty||"reset"===e)&&(this._dirty=!1,o=function(t,e){var a,i;t._dueIndex=t._outputDueEnd=t._dueEnd=0,t._settedOutputEnd=null,!e&&t._reset&&((a=t._reset(t.context))&&a.progress&&(i=a.forceFirstProgress,a=a.progress),r(a)&&!a.length&&(a=null));t._progress=a,t._modBy=t._modDataCount=null;var n=t._downstream;return n&&n.dirty(),i}(this,i)),this._modBy=u,this._modDataCount=c;var d=t&&t.step;if(this._dueEnd=a?a._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var C=this._dueIndex,p=Math.min(null!=d?this._dueIndex+d:1/0,this._dueEnd);if(!i&&(o||C<p)){var m=this._progress;if(r(m))for(var D=0;D<m.length;D++)h(this,m[D],C,p,u,c);else h(this,m,C,p,u,c)}this._dueIndex=p;var v=null!=this._settedOutputEnd?this._settedOutputEnd:p;this._outputDueEnd=v}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var s=function(){var t,e,a,i,r,n={reset:function(h,l,u,c){e=h,t=l,a=u,i=c,r=Math.ceil(i/a),n.next=a>1&&i>0?s:o}};return n;function o(){return e<t?e++:null}function s(){var n=e%r*a+Math.ceil(e/r),o=e>=t?null:n<i?n:e;return e++,o}}();function h(t,e,a,i,r,n){s.reset(a,i,r,n),t._callingProgress=e,t._callingProgress({start:a,end:i,count:i-a,next:s.next},t.context)}o.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},o.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},o.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},o.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},o.getUpstream=function(){return this._upstream},o.getDownstream=function(){return this._downstream},o.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e.createTask=function(t){return new n(t)}},"9d8Q":function(t,e,a){},"9rSQ":function(t,e,a){"use strict";var i=a("xTJ+");function r(){this.handlers=[]}r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},"9wZj":function(t,e,a){var i=a("IwbS"),r=a("FBjb"),n=a("bYtY").isObject;function o(t){this.group=new i.Group,this._symbolCtor=t||r}var s=o.prototype;function h(t,e,a,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(i.isIgnore&&i.isIgnore(a))&&!(i.clipShape&&!i.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(a,"symbol")}function l(t){return null==t||n(t)||(t={isIgnore:t}),t||{}}function u(t){var e=t.hostModel;return{itemStyle:e.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:e.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label"),cursorStyle:e.get("cursor")}}s.updateData=function(t,e){e=l(e);var a=this.group,r=t.hostModel,n=this._data,o=this._symbolCtor,s=u(t);n||a.removeAll(),t.diff(n).add(function(i){var r=t.getItemLayout(i);if(h(t,r,i,e)){var n=new o(t,i,s);n.attr("position",r),t.setItemGraphicEl(i,n),a.add(n)}}).update(function(l,u){var c=n.getItemGraphicEl(u),f=t.getItemLayout(l);h(t,f,l,e)?(c?(c.updateData(t,l,s),i.updateProps(c,{position:f},r)):(c=new o(t,l)).attr("position",f),a.add(c),t.setItemGraphicEl(l,c)):a.remove(c)}).remove(function(t){var e=n.getItemGraphicEl(t);e&&e.fadeOut(function(){a.remove(e)})}).execute(),this._data=t},s.isPersistent=function(){return!0},s.updateLayout=function(){var t=this._data;t&&t.eachItemGraphicEl(function(e,a){var i=t.getItemLayout(a);e.attr("position",i)})},s.incrementalPrepareUpdate=function(t){this._seriesScope=u(t),this._data=null,this.group.removeAll()},s.incrementalUpdate=function(t,e,a){function i(t){t.isGroup||(t.incremental=t.useHoverLayer=!0)}a=l(a);for(var r=t.start;r<t.end;r++){var n=e.getItemLayout(r);if(h(e,n,r,a)){var o=new this._symbolCtor(e,r,this._seriesScope);o.traverse(i),o.attr("position",n),this.group.add(o),e.setItemGraphicEl(r,o)}}},s.remove=function(t){var e=this.group,a=this._data;a&&t?a.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)})}):e.removeAll()};var c=o;t.exports=c},A1Ka:function(t,e,a){var i=a("bLfw"),r=a("sS/r"),n=a("D5nY").detectSourceFormat,o=a("k9D9").SERIES_LAYOUT_BY_COLUMN;i.extend({type:"dataset",defaultOption:{seriesLayoutBy:o,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){n(this)}}),r.extend({type:"dataset"})},A9a0:function(t,e,a){var i=a("nA4W"),r=a("bKEA"),n=a("Oa1h")(!1),o=a("WpRT")("IE_PROTO");t.exports=function(t,e){var a,s=r(t),h=0,l=[];for(a in s)a!=o&&i(s,a)&&l.push(a);for(;e.length>h;)i(s,a=e[h++])&&(~n(l,a)||l.push(a));return l}},AH3D:function(t,e,a){var i=a("ProS");a("y4/Y"),a("qWt2"),a("Qvb6"),i.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),i.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){})},AVZG:function(t,e,a){var i=a("bYtY");e.layout=function(t,e,a){a=a||{};var r=t.coordinateSystem,n=e.axis,o={},s=n.getAxesOnZeroOf()[0],h=n.position,l=s?"onZero":h,u=n.dim,c=r.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],d={left:0,right:1,top:0,bottom:1,onZero:2},C=e.get("offset")||0,p="x"===u?[f[2]-C,f[3]+C]:[f[0]-C,f[1]+C];if(s){var m=s.toGlobalCoord(s.dataToCoord(0));p[d.onZero]=Math.max(Math.min(m,p[1]),p[0])}o.position=["y"===u?p[d[l]]:f[0],"x"===u?p[d[l]]:f[3]],o.rotation=Math.PI/2*("x"===u?0:1),o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,left:-1,right:1}[h],o.labelOffset=s?p[d[h]]-p[d.onZero]:0,e.get("axisTick.inside")&&(o.tickDirection=-o.tickDirection),i.retrieve(a.labelInside,e.get("axisLabel.inside"))&&(o.labelDirection=-o.labelDirection);var D=e.get("axisLabel.rotate");return o.labelRotate="top"===l?-D:D,o.z2=1,o}},Ae16:function(t,e,a){var i=a("ProS"),r=a("bYtY"),n=a("IwbS");a("Wqna"),a("rySg"),i.extendComponentView({type:"grid",render:function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new n.Rect({shape:t.coordinateSystem.getRect(),style:r.defaults({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))}}),i.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})},AjXP:function(t,e,a){var i=a("wlNh");t.exports=function(t,e){var a=[];return i(t,!1,a.push,a,e),a}},AyUB:function(t,e,a){t.exports={default:a("vNbC"),__esModule:!0}},B9fm:function(t,e,a){var i=a("bYtY"),r=a("Qe9p"),n=a("YH21"),o=a("Ze12"),s=a("ItGF"),h=a("7aKB"),l=i.each,u=h.toCamelCase,c=["","-webkit-","-moz-","-o-"];function f(t){var e=[],a=t.get("transitionDuration"),n=t.get("backgroundColor"),o=t.getModel("textStyle"),f=t.get("padding");return a&&e.push(function(t){var e="left "+t+"s cubic-bezier(0.23, 1, 0.32, 1),top "+t+"s cubic-bezier(0.23, 1, 0.32, 1)";return i.map(c,function(t){return t+"transition:"+e}).join(";")}(a)),n&&(s.canvasSupported?e.push("background-Color:"+n):(e.push("background-Color:#"+r.toHex(n)),e.push("filter:alpha(opacity=70)"))),l(["width","color","radius"],function(a){var i="border-"+a,r=u(i),n=t.get(r);null!=n&&e.push(i+":"+n+("color"===a?"":"px"))}),e.push(function(t){var e=[],a=t.get("fontSize"),i=t.getTextColor();i&&e.push("color:"+i),e.push("font:"+t.getFont());var r=t.get("lineHeight");null==r&&(r=Math.round(3*a/2)),a&&e.push("line-height:"+r+"px");var n=t.get("textShadowColor"),o=t.get("textShadowBlur")||0,s=t.get("textShadowOffsetX")||0,h=t.get("textShadowOffsetY")||0;return o&&e.push("text-shadow:"+s+"px "+h+"px "+o+"px "+n),l(["decoration","align"],function(a){var i=t.get(a);i&&e.push("text-"+a+":"+i)}),e.join(";")}(o)),null!=f&&e.push("padding:"+h.normalizeCssArray(f).join("px ")+"px"),e.join(";")+";"}function d(t,e,a,i,r){var n=e&&e.painter;if(a){var s=n&&n.getViewportRoot();s&&o.transformLocalCoord(t,s,document.body,i,r)}else{t[0]=i,t[1]=r;var h=n&&n.getViewportRootOffset();h&&(t[0]+=h.offsetLeft,t[1]+=h.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}function C(t,e,a){if(s.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var r=this._zr=e.getZr(),o=this._appendToBody=a&&a.appendToBody;this._styleCoord=[0,0,0,0],d(this._styleCoord,r,o,e.getWidth()/2,e.getHeight()/2),o?document.body.appendChild(i):t.appendChild(i),this._container=t,this._show=!1,this._hideTimeout;var h=this;i.onmouseenter=function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0},i.onmousemove=function(t){if(t=t||window.event,!h._enterable){var e=r.handler,a=r.painter.getViewportRoot();n.normalizeEvent(a,t,!0),e.dispatch("mousemove",t)}},i.onmouseleave=function(){h._enterable&&h._show&&h.hideLater(h._hideDelay),h._inContent=!1}}C.prototype={constructor:C,_enterable:!0,update:function(t){var e=this._container,a=e.currentStyle||document.defaultView.getComputedStyle(e),i=e.style;"absolute"!==i.position&&"absolute"!==a.position&&(i.position="relative"),t.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[2],e=this._styleCoord[3],a=t*this._zr.getWidth(),i=e*this._zr.getHeight();this.moveTo(a,i)},show:function(t){clearTimeout(this._hideTimeout);var e=this.el,a=this._styleCoord;e.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+f(t)+";left:"+a[0]+"px;top:"+a[1]+"px;"+(t.get("extraCssText")||""),e.style.display=e.innerHTML?"block":"none",e.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(t){this.el.innerHTML=null==t?"":t},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el;return[t.clientWidth,t.clientHeight]},moveTo:function(t,e){var a=this._styleCoord;d(a,this._zr,this._appendToBody,t,e);var i=this.el.style;i.left=a[0]+"px",i.top=a[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(i.bind(this.hide,this),t)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var t=this.el.clientWidth,e=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var a=document.defaultView.getComputedStyle(this.el);a&&(t+=parseInt(a.borderLeftWidth,10)+parseInt(a.borderRightWidth,10),e+=parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10))}return{width:t,height:e}}};var p=C;t.exports=p},BPZU:function(t,e){var a=32,i=7;function r(t,e,a,i){var r=e+1;if(r===a)return 1;if(i(t[r++],t[e])<0){for(;r<a&&i(t[r],t[r-1])<0;)r++;!function(t,e,a){a--;for(;e<a;){var i=t[e];t[e++]=t[a],t[a--]=i}}(t,e,r)}else for(;r<a&&i(t[r],t[r-1])>=0;)r++;return r-e}function n(t,e,a,i,r){for(i===e&&i++;i<a;i++){for(var n,o=t[i],s=e,h=i;s<h;)r(o,t[n=s+h>>>1])<0?h=n:s=n+1;var l=i-s;switch(l){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;l>0;)t[s+l]=t[s+l-1],l--}t[s]=o}}function o(t,e,a,i,r,n){var o=0,s=0,h=1;if(n(t,e[a+r])>0){for(s=i-r;h<s&&n(t,e[a+r+h])>0;)o=h,(h=1+(h<<1))<=0&&(h=s);h>s&&(h=s),o+=r,h+=r}else{for(s=r+1;h<s&&n(t,e[a+r-h])<=0;)o=h,(h=1+(h<<1))<=0&&(h=s);h>s&&(h=s);var l=o;o=r-h,h=r-l}for(o++;o<h;){var u=o+(h-o>>>1);n(t,e[a+u])>0?o=u+1:h=u}return h}function s(t,e,a,i,r,n){var o=0,s=0,h=1;if(n(t,e[a+r])<0){for(s=r+1;h<s&&n(t,e[a+r-h])<0;)o=h,(h=1+(h<<1))<=0&&(h=s);h>s&&(h=s);var l=o;o=r-h,h=r-l}else{for(s=i-r;h<s&&n(t,e[a+r+h])>=0;)o=h,(h=1+(h<<1))<=0&&(h=s);h>s&&(h=s),o+=r,h+=r}for(o++;o<h;){var u=o+(h-o>>>1);n(t,e[a+u])<0?h=u:o=u+1}return h}function h(t,e){var a,r,n,h=i,l=0;a=t.length;var u=[];function c(a){var c=r[a],f=n[a],d=r[a+1],C=n[a+1];n[a]=f+C,a===l-3&&(r[a+1]=r[a+2],n[a+1]=n[a+2]),l--;var p=s(t[d],t,c,f,0,e);c+=p,0!==(f-=p)&&0!==(C=o(t[c+f-1],t,d,C,C-1,e))&&(f<=C?function(a,r,n,l){var c=0;for(c=0;c<r;c++)u[c]=t[a+c];var f=0,d=n,C=a;if(t[C++]=t[d++],0==--l){for(c=0;c<r;c++)t[C+c]=u[f+c];return}if(1===r){for(c=0;c<l;c++)t[C+c]=t[d+c];return void(t[C+l]=u[f])}var p,m,D,v=h;for(;;){p=0,m=0,D=!1;do{if(e(t[d],u[f])<0){if(t[C++]=t[d++],m++,p=0,0==--l){D=!0;break}}else if(t[C++]=u[f++],p++,m=0,1==--r){D=!0;break}}while((p|m)<v);if(D)break;do{if(0!==(p=s(t[d],u,f,r,0,e))){for(c=0;c<p;c++)t[C+c]=u[f+c];if(C+=p,f+=p,(r-=p)<=1){D=!0;break}}if(t[C++]=t[d++],0==--l){D=!0;break}if(0!==(m=o(u[f],t,d,l,0,e))){for(c=0;c<m;c++)t[C+c]=t[d+c];if(C+=m,d+=m,0===(l-=m)){D=!0;break}}if(t[C++]=u[f++],1==--r){D=!0;break}v--}while(p>=i||m>=i);if(D)break;v<0&&(v=0),v+=2}if((h=v)<1&&(h=1),1===r){for(c=0;c<l;c++)t[C+c]=t[d+c];t[C+l]=u[f]}else{if(0===r)throw new Error;for(c=0;c<r;c++)t[C+c]=u[f+c]}}(c,f,d,C):function(a,r,n,l){var c=0;for(c=0;c<l;c++)u[c]=t[n+c];var f=a+r-1,d=l-1,C=n+l-1,p=0,m=0;if(t[C--]=t[f--],0==--r){for(p=C-(l-1),c=0;c<l;c++)t[p+c]=u[c];return}if(1===l){for(m=(C-=r)+1,p=(f-=r)+1,c=r-1;c>=0;c--)t[m+c]=t[p+c];return void(t[C]=u[d])}var D=h;for(;;){var v=0,g=0,S=!1;do{if(e(u[d],t[f])<0){if(t[C--]=t[f--],v++,g=0,0==--r){S=!0;break}}else if(t[C--]=u[d--],g++,v=0,1==--l){S=!0;break}}while((v|g)<D);if(S)break;do{if(0!==(v=r-s(u[d],t,a,r,r-1,e))){for(r-=v,m=(C-=v)+1,p=(f-=v)+1,c=v-1;c>=0;c--)t[m+c]=t[p+c];if(0===r){S=!0;break}}if(t[C--]=u[d--],1==--l){S=!0;break}if(0!==(g=l-o(t[f],u,0,l,l-1,e))){for(l-=g,m=(C-=g)+1,p=(d-=g)+1,c=0;c<g;c++)t[m+c]=u[p+c];if(l<=1){S=!0;break}}if(t[C--]=t[f--],0==--r){S=!0;break}D--}while(v>=i||g>=i);if(S)break;D<0&&(D=0),D+=2}(h=D)<1&&(h=1);if(1===l){for(m=(C-=r)+1,p=(f-=r)+1,c=r-1;c>=0;c--)t[m+c]=t[p+c];t[C]=u[d]}else{if(0===l)throw new Error;for(p=C-(l-1),c=0;c<l;c++)t[p+c]=u[c]}}(c,f,d,C))}r=[],n=[],this.mergeRuns=function(){for(;l>1;){var t=l-2;if(t>=1&&n[t-1]<=n[t]+n[t+1]||t>=2&&n[t-2]<=n[t]+n[t-1])n[t-1]<n[t+1]&&t--;else if(n[t]>n[t+1])break;c(t)}},this.forceMergeRuns=function(){for(;l>1;){var t=l-2;t>0&&n[t-1]<n[t+1]&&t--,c(t)}},this.pushRun=function(t,e){r[l]=t,n[l]=e,l+=1}}t.exports=function(t,e,i,o){i||(i=0),o||(o=t.length);var s=o-i;if(!(s<2)){var l=0;if(s<a)n(t,i,o,i+(l=r(t,i,o,e)),e);else{var u=new h(t,e),c=function(t){for(var e=0;t>=a;)e|=1&t,t>>=1;return t+e}(s);do{if((l=r(t,i,o,e))<c){var f=s;f>c&&(f=c),n(t,i,i+f,i+l,e),l=f}u.pushRun(i,l),u.mergeRuns(),s-=l,i+=l}while(0!==s);u.forceMergeRuns()}}}},BRsN:function(t,e,a){var i=a("GhSp"),r=a("ENu8");t.exports=a("C61u")?function(t,e,a){return i.f(t,e,r(1,a))}:function(t,e,a){return t[e]=a,t}},BfU5:function(t,e,a){var i=a("ekG2"),r=a("7whZ").document,n=i(r)&&i(r.createElement);t.exports=function(t){return n?r.createElement(t):{}}},BlVb:function(t,e,a){var i=a("hyiK"),r=1e-8;function n(t,e){return Math.abs(t-e)<r}e.contain=function(t,e,a){var r=0,o=t[0];if(!o)return!1;for(var s=1;s<t.length;s++){var h=t[s];r+=i(o[0],o[1],h[0],h[1],e,a),o=h}var l=t[0];return n(o[0],l[0])&&n(o[1],l[1])||(r+=i(o[0],o[1],l[0],l[1],e,a)),0!==r}},BoVL:function(t,e,a){(function(e){var i,r=void 0!==e?e:"undefined"!=typeof window?window:{},n=a(36);"undefined"!=typeof document?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"])||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=n),t.exports=i}).call(this,a("yLpj"))},Bq2U:function(t,e,a){var i=a("RDYZ"),r=a("Qe9p"),n=a("bYtY").isArrayLike,o=Array.prototype.slice;function s(t,e){return t[e]}function h(t,e,a){t[e]=a}function l(t,e,a){return(e-t)*a+t}function u(t,e,a){return a>.5?e:t}function c(t,e,a,i,r){var n=t.length;if(1===r)for(var o=0;o<n;o++)i[o]=l(t[o],e[o],a);else{var s=n&&t[0].length;for(o=0;o<n;o++)for(var h=0;h<s;h++)i[o][h]=l(t[o][h],e[o][h],a)}}function f(t,e,a){var i=t.length,r=e.length;if(i!==r)if(i>r)t.length=r;else for(var n=i;n<r;n++)t.push(1===a?e[n]:o.call(e[n]));var s=t[0]&&t[0].length;for(n=0;n<t.length;n++)if(1===a)isNaN(t[n])&&(t[n]=e[n]);else for(var h=0;h<s;h++)isNaN(t[n][h])&&(t[n][h]=e[n][h])}function d(t,e,a){if(t===e)return!0;var i=t.length;if(i!==e.length)return!1;if(1===a){for(var r=0;r<i;r++)if(t[r]!==e[r])return!1}else{var n=t[0].length;for(r=0;r<i;r++)for(var o=0;o<n;o++)if(t[r][o]!==e[r][o])return!1}return!0}function C(t,e,a,i,r,n,o,s,h){var l=t.length;if(1===h)for(var u=0;u<l;u++)s[u]=p(t[u],e[u],a[u],i[u],r,n,o);else{var c=t[0].length;for(u=0;u<l;u++)for(var f=0;f<c;f++)s[u][f]=p(t[u][f],e[u][f],a[u][f],i[u][f],r,n,o)}}function p(t,e,a,i,r,n,o){var s=.5*(a-t),h=.5*(i-e);return(2*(e-a)+s+h)*o+(-3*(e-a)-2*s-h)*n+s*r+e}function m(t){if(n(t)){var e=t.length;if(n(t[0])){for(var a=[],i=0;i<e;i++)a.push(o.call(t[i]));return a}return o.call(t)}return t}function D(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function v(t,e,a,o,s,h){var m=t._getter,v=t._setter,g="spline"===e,S=o.length;if(S){var T,I=o[0].value,y=n(I),x=!1,w=!1,F=y?function(t){var e=t[t.length-1].value;return n(e&&e[0])?2:1}(o):0;o.sort(function(t,e){return t.time-e.time}),T=o[S-1].time;for(var E=[],b=[],L=o[0].value,M=!0,A=0;A<S;A++){E.push(o[A].time/T);var O=o[A].value;if(y&&d(O,L,F)||!y&&O===L||(M=!1),L=O,"string"==typeof O){var N=r.parse(O);N?(O=N,x=!0):w=!0}b.push(O)}if(h||!M){var P=b[S-1];for(A=0;A<S-1;A++)y?f(b[A],P,F):!isNaN(b[A])||isNaN(P)||w||x||(b[A]=P);y&&f(m(t._target,s),P,F);var R,_,B,k,G,V=0,H=0;if(x)var Y=[0,0,0,0];var X=new i({target:t._target,life:T,loop:t._loop,delay:t._delay,onframe:function(t,e){var a;if(e<0)a=0;else if(e<H){for(a=Math.min(V+1,S-1);a>=0&&!(E[a]<=e);a--);a=Math.min(a,S-2)}else{for(a=V;a<S&&!(E[a]>e);a++);a=Math.min(a-1,S-2)}V=a,H=e;var i=E[a+1]-E[a];if(0!==i)if(R=(e-E[a])/i,g)if(B=b[a],_=b[0===a?a:a-1],k=b[a>S-2?S-1:a+1],G=b[a>S-3?S-1:a+2],y)C(_,B,k,G,R,R*R,R*R*R,m(t,s),F);else{if(x)r=C(_,B,k,G,R,R*R,R*R*R,Y,1),r=D(Y);else{if(w)return u(B,k,R);r=p(_,B,k,G,R,R*R,R*R*R)}v(t,s,r)}else if(y)c(b[a],b[a+1],R,m(t,s),F);else{var r;if(x)c(b[a],b[a+1],R,Y,1),r=D(Y);else{if(w)return u(b[a],b[a+1],R);r=l(b[a],b[a+1],R)}v(t,s,r)}},ondestroy:a});return e&&"spline"!==e&&(X.easing=e),X}}}var g=function(t,e,a,i){this._tracks={},this._target=t,this._loop=e||!1,this._getter=a||s,this._setter=i||h,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};g.prototype={when:function(t,e){var a=this._tracks;for(var i in e)if(e.hasOwnProperty(i)){if(!a[i]){a[i]=[];var r=this._getter(this._target,i);if(null==r)continue;0!==t&&a[i].push({time:0,value:m(r)})}a[i].push({time:t,value:e[i]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,a=0;a<e;a++)t[a].call(this)},start:function(t,e){var a,i=this,r=0,n=function(){--r||i._doneCallback()};for(var o in this._tracks)if(this._tracks.hasOwnProperty(o)){var s=v(this,t,n,this._tracks[o],o,e);s&&(this._clipList.push(s),r++,this.animation&&this.animation.addClip(s),a=s)}if(a){var h=a.onframe;a.onframe=function(t,e){h(t,e);for(var a=0;a<i._onframeList.length;a++)i._onframeList[a](t,e)}}return r||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,a=this.animation,i=0;i<e.length;i++){var r=e[i];t&&r.onframe(this._target,1),a&&a.removeClip(r)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}};var S=g;t.exports=S},By1P:function(t,e,a){"use strict";var i=a("C61u"),r=a("mHY4"),n=a("/tXR"),o=a("GRew"),s=a("CYMq"),h=a("n7vu"),l=Object.assign;t.exports=!l||a("S4vA")(function(){var t={},e={},a=Symbol(),i="abcdefghijklmnopqrst";return t[a]=7,i.split("").forEach(function(t){e[t]=t}),7!=l({},t)[a]||Object.keys(l({},e)).join("")!=i})?function(t,e){for(var a=s(t),l=arguments.length,u=1,c=n.f,f=o.f;l>u;)for(var d,C=h(arguments[u++]),p=c?r(C).concat(c(C)):r(C),m=p.length,D=0;m>D;)d=p[D++],i&&!f.call(C,d)||(a[d]=C[d]);return a}:l},C0SR:function(t,e,a){var i=a("YH21"),r=function(){this._track=[]};function n(t){var e=t[1][0]-t[0][0],a=t[1][1]-t[0][1];return Math.sqrt(e*e+a*a)}r.prototype={constructor:r,recognize:function(t,e,a){return this._doTrack(t,e,a),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,a){var r=t.touches;if(r){for(var n={points:[],touches:[],target:e,event:t},o=0,s=r.length;o<s;o++){var h=r[o],l=i.clientToLocal(a,h,{});n.points.push([l.zrX,l.zrY]),n.touches.push(h)}this._track.push(n)}},_recognize:function(t){for(var e in o)if(o.hasOwnProperty(e)){var a=o[e](this._track,t);if(a)return a}}};var o={pinch:function(t,e){var a=t.length;if(a){var i=(t[a-1]||{}).points,r=(t[a-2]||{}).points||i;if(r&&r.length>1&&i&&i.length>1){var o=n(i)/n(r);!isFinite(o)&&(o=1),e.pinchScale=o;var s=function(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}(i);return e.pinchX=s[0],e.pinchY=s[1],{type:"pinch",target:t[0].target,event:e}}}}},s=r;t.exports=s},C5kU:function(t,e,a){"use strict";var i=a("GfoU")(!0);a("OTpG")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=i(e,a),this._i+=t.length,{value:t,done:!1})})},C61u:function(t,e,a){t.exports=!a("S4vA")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"CE4/":function(t,e,a){"use strict";var i=a("nAx8"),r=a("USwo"),n=a("CYMq"),o=a("xMGN"),s=a("bS86"),h=a("0WpP"),l=a("SkeG"),u=a("I90/");r(r.S+r.F*!a("h3Hq")(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,r,c,f=n(t),d="function"==typeof this?this:Array,C=arguments.length,p=C>1?arguments[1]:void 0,m=void 0!==p,D=0,v=u(f);if(m&&(p=i(p,C>2?arguments[2]:void 0,2)),void 0==v||d==Array&&s(v))for(a=new d(e=h(f.length));e>D;D++)l(a,D,m?p(f[D],D):f[D]);else for(c=v.call(f),a=new d;!(r=c.next()).done;D++)l(a,D,m?o(c,p,[r.value,D],!0):r.value);return a.length=D,a}})},CF2D:function(t,e,a){var i=a("ProS");a("vZI5"),a("GeKi");var r=a("6r85"),n=a("TJmX"),o=a("CbHG");i.registerPreprocessor(r),i.registerVisual(n),i.registerLayout(o)},CYMq:function(t,e,a){var i=a("yQFZ");t.exports=function(t){return Object(i(t))}},Cb4k:function(t,e){var a=Object.create||function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function i(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}function r(t){function e(t,e,a,i){return 3600*(0|t)+60*(0|e)+(0|a)+(0|i)/1e3}var a=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return a?a[3]?e(a[1],a[2],a[3].replace(":",""),a[4]):a[1]>59?e(a[1],a[2],0,a[4]):e(0,a[1],a[2],a[4]):null}function n(){this.values=a(null)}function o(t,e,a,i){var r=i?t.split(i):[t];for(var n in r)if("string"==typeof r[n]){var o=r[n].split(a);if(2===o.length)e(o[0],o[1])}}function s(t,e,a){var s=t;function h(){var e=r(t);if(null===e)throw new i(i.Errors.BadTimeStamp,"Malformed timestamp: "+s);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function l(){t=t.replace(/^\s+/,"")}if(l(),e.startTime=h(),l(),"--\x3e"!==t.substr(0,3))throw new i(i.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+s);t=t.substr(3),l(),e.endTime=h(),l(),function(t,e){var i=new n;o(t,function(t,e){switch(t){case"region":for(var r=a.length-1;r>=0;r--)if(a[r].id===e){i.set(t,a[r].region);break}break;case"vertical":i.alt(t,e,["rl","lr"]);break;case"line":var n=e.split(","),o=n[0];i.integer(t,o),i.percent(t,o)&&i.set("snapToLines",!1),i.alt(t,o,["auto"]),2===n.length&&i.alt("lineAlign",n[1],["start","middle","end"]);break;case"position":n=e.split(","),i.percent(t,n[0]),2===n.length&&i.alt("positionAlign",n[1],["start","middle","end"]);break;case"size":i.percent(t,e);break;case"align":i.alt(t,e,["start","middle","end","left","right"])}},/:/,/\s/),e.region=i.get("region",null),e.vertical=i.get("vertical",""),e.line=i.get("line","auto"),e.lineAlign=i.get("lineAlign","start"),e.snapToLines=i.get("snapToLines",!0),e.size=i.get("size",100),e.align=i.get("align","middle"),e.position=i.get("position",{start:0,left:0,middle:50,end:100,right:100},e.align),e.positionAlign=i.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},e.align)}(t,e)}i.prototype=a(Error.prototype),i.prototype.constructor=i,i.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},n.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,a){return a?this.has(t)?this.values[t]:e[a]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,a){for(var i=0;i<a.length;++i)if(e===a[i]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var h={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},l={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},u={v:"title",lang:"lang"},c={rt:"ruby"};function f(t,e){function a(){if(!e)return null;var t=e.match(/^([^<]*)(<[^>]*>?)?/);return function(t){return e=e.substr(t.length),t}(t[1]?t[1]:t[2])}function i(t){return h[t]}function n(t){for(;v=t.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)t=t.replace(v[0],i);return t}function o(t,e){return!c[e.localName]||c[e.localName]===t.localName}function s(e,a){var i=l[e];if(!i)return null;var r=t.document.createElement(i);r.localName=i;var n=u[e];return n&&a&&(r[n]=a.trim()),r}for(var f,d=t.document.createElement("div"),C=d,p=[];null!==(f=a());)if("<"!==f[0])C.appendChild(t.document.createTextNode(n(f)));else{if("/"===f[1]){p.length&&p[p.length-1]===f.substr(2).replace(">","")&&(p.pop(),C=C.parentNode);continue}var m,D=r(f.substr(1,f.length-2));if(D){m=t.document.createProcessingInstruction("timestamp",D),C.appendChild(m);continue}var v=f.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!v)continue;if(!(m=s(v[1],v[3])))continue;if(!o(C,m))continue;v[2]&&(m.className=v[2].substr(1).replace("."," ")),p.push(v[1]),C.appendChild(m),C=m}return d}var d=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function C(t){for(var e=0;e<d.length;e++){var a=d[e];if(t>=a[0]&&t<=a[1])return!0}return!1}function p(){}function m(t,e,a){var i=/MSIE\s8\.0/.test(navigator.userAgent),r="rgba(255, 255, 255, 1)",n="rgba(0, 0, 0, 0.8)";i&&(r="rgb(255, 255, 255)",n="rgb(0, 0, 0)"),p.call(this),this.cue=e,this.cueDiv=f(t,e.text);var o={color:r,backgroundColor:n,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};i||(o.writingMode=""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",o.unicodeBidi="plaintext"),this.applyStyles(o,this.cueDiv),this.div=t.document.createElement("div"),o={textAlign:"middle"===e.align?"center":e.align,font:a.font,whiteSpace:"pre-line",position:"absolute"},i||(o.direction=function(t){var e=[],a="";if(!t||!t.childNodes)return"ltr";function i(t,e){for(var a=e.childNodes.length-1;a>=0;a--)t.push(e.childNodes[a])}function r(t){if(!t||!t.length)return null;var e=t.pop(),a=e.textContent||e.innerText;if(a){var n=a.match(/^.*(\n|\r)/);return n?(t.length=0,n[0]):a}return"ruby"===e.tagName?r(t):e.childNodes?(i(t,e),r(t)):void 0}for(i(e,t);a=r(e);)for(var n=0;n<a.length;n++)if(C(a.charCodeAt(n)))return"rtl";return"ltr"}(this.cueDiv),o.writingMode=""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(o),this.div.appendChild(this.cueDiv);var s=0;switch(e.positionAlign){case"start":s=e.position;break;case"middle":s=e.position-e.size/2;break;case"end":s=e.position-e.size}""===e.vertical?this.applyStyles({left:this.formatStyle(s,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(s,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function D(t){var e,a,i,r,n=/MSIE\s8\.0/.test(navigator.userAgent);if(t.div){a=t.div.offsetHeight,i=t.div.offsetWidth,r=t.div.offsetTop;var o=(o=t.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();t=t.div.getBoundingClientRect(),e=o?Math.max(o[0]&&o[0].height||0,t.height/o.length):0}this.left=t.left,this.right=t.right,this.top=t.top||r,this.height=t.height||a,this.bottom=t.bottom||r+(t.height||a),this.width=t.width||i,this.lineHeight=void 0!==e?e:t.lineHeight,n&&!this.lineHeight&&(this.lineHeight=13)}function v(t,e,a,i){var r=new D(e),n=e.cue,o=function(t){if("number"==typeof t.line&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,a=e.textTrackList,i=0,r=0;r<a.length&&a[r]!==e;r++)"showing"===a[r].mode&&i++;return-1*++i}(n),s=[];if(n.snapToLines){var h;switch(n.vertical){case"":s=["+y","-y"],h="height";break;case"rl":s=["+x","-x"],h="width";break;case"lr":s=["-x","+x"],h="width"}var l=r.lineHeight,u=l*Math.round(o),c=a[h]+l,f=s[0];Math.abs(u)>c&&(u=u<0?-1:1,u*=Math.ceil(c/l)*l),o<0&&(u+=""===n.vertical?a.height:a.width,s=s.reverse()),r.move(f,u)}else{var d=r.lineHeight/a.height*100;switch(n.lineAlign){case"middle":o-=d/2;break;case"end":o-=d}switch(n.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")})}s=["+y","-x","+x","-y"],r=new D(e)}var C=function(t,e){for(var r,n=new D(t),o=1,s=0;s<e.length;s++){for(;t.overlapsOppositeAxis(a,e[s])||t.within(a)&&t.overlapsAny(i);)t.move(e[s]);if(t.within(a))return t;var h=t.intersectPercentage(a);o>h&&(r=new D(t),o=h),t=new D(n)}return r||n}(r,s);e.move(C.toCSSCompatValues(a))}function g(){}p.prototype.applyStyles=function(t,e){for(var a in e=e||this.div,t)t.hasOwnProperty(a)&&(e.style[a]=t[a])},p.prototype.formatStyle=function(t,e){return 0===t?0:t+e},m.prototype=a(p.prototype),m.prototype.constructor=m,D.prototype.move=function(t,e){switch(e=void 0!==e?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e}},D.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},D.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},D.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},D.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},D.prototype.intersectPercentage=function(t){return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},D.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},D.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,a=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,i=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;return{left:(t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t).left,right:t.right,top:t.top||i,height:t.height||e,bottom:t.bottom||i+(t.height||e),width:t.width||a}},g.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},g.convertCueToDOMTree=function(t,e){return t&&e?f(t,e):null};g.processCues=function(t,e,a){if(!t||!e||!a)return null;for(;a.firstChild;)a.removeChild(a.firstChild);var i=t.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",a.appendChild(i),function(t){for(var e=0;e<t.length;e++)if(t[e].hasBeenReset||!t[e].displayState)return!0;return!1}(e)){var r=[],n=D.getSimpleBoxPosition(i),o={font:Math.round(.05*n.height*100)/100+"px sans-serif"};!function(){for(var a,s,h=0;h<e.length;h++)s=e[h],a=new m(t,s,o),i.appendChild(a.div),v(0,a,n,r),s.displayState=a.div,r.push(D.getSimpleBoxPosition(a))}()}else for(var s=0;s<e.length;s++)i.appendChild(e[s].displayState)},g.Parser=function(t,e,a){a||(a=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=a||new TextDecoder("utf8"),this.regionList=[]},g.Parser.prototype={reportOrThrowError:function(t){if(!(t instanceof i))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){var e=this;function a(){for(var t=e.buffer,a=0;a<t.length&&"\r"!==t[a]&&"\n"!==t[a];)++a;var i=t.substr(0,a);return"\r"===t[a]&&++a,"\n"===t[a]&&++a,e.buffer=t.substr(a),i}function h(t){t.match(/X-TIMESTAMP-MAP/)?o(t,function(t,a){switch(t){case"X-TIMESTAMP-MAP":!function(t){var a=new n;o(t,function(t,e){switch(t){case"MPEGT":a.integer(t+"S",e);break;case"LOCA":a.set(t+"L",r(e))}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:a.get("MPEGTS"),LOCAL:a.get("LOCAL")})}(a)}},/=/):o(t,function(t,a){switch(t){case"Region":!function(t){var a=new n;if(o(t,function(t,e){switch(t){case"id":a.set(t,e);break;case"width":a.percent(t,e);break;case"lines":a.integer(t,e);break;case"regionanchor":case"viewportanchor":var i=e.split(",");if(2!==i.length)break;var r=new n;if(r.percent("x",i[0]),r.percent("y",i[1]),!r.has("x")||!r.has("y"))break;a.set(t+"X",r.get("x")),a.set(t+"Y",r.get("y"));break;case"scroll":a.alt(t,e,["up"])}},/=/,/\s/),a.has("id")){var i=new(e.vttjs.VTTRegion||e.window.VTTRegion);i.width=a.get("width",100),i.lines=a.get("lines",3),i.regionAnchorX=a.get("regionanchorX",0),i.regionAnchorY=a.get("regionanchorY",100),i.viewportAnchorX=a.get("viewportanchorX",0),i.viewportAnchorY=a.get("viewportanchorY",100),i.scroll=a.get("scroll",""),e.onregion&&e.onregion(i),e.regionList.push({id:a.get("id"),region:i})}}(a)}},/:/)}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var l;if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var u=(l=a()).match(/^WEBVTT([ \t].*)?$/);if(!u||!u[0])throw new i(i.Errors.BadSignature);e.state="HEADER"}for(var c=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(c?c=!1:l=a(),e.state){case"HEADER":/:/.test(l)?h(l):l||(e.state="ID");continue;case"NOTE":l||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(l)){e.state="NOTE";break}if(!l)continue;if(e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,""),e.state="CUE",-1===l.indexOf("--\x3e")){e.cue.id=l;continue}case"CUE":try{s(l,e.cue,e.regionList)}catch(t){e.reportOrThrowError(t),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var f=-1!==l.indexOf("--\x3e");if(!l||f&&(c=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+="\n"),e.cue.text+=l;continue;case"BADCUE":l||(e.state="ID");continue}}}catch(t){e.reportOrThrowError(t),"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new i(i.Errors.BadSignature)}catch(t){this.reportOrThrowError(t)}return this.onflush&&this.onflush(),this}},t.exports=g},CbHG:function(t,e,a){var i=a("IwbS").subPixelOptimize,r=a("zM3Q"),n=a("OELB").parsePercent,o=a("bYtY").retrieve2,s="undefined"!=typeof Float32Array?Float32Array:Array,h={seriesType:"candlestick",plan:r(),reset:function(t){var e=t.coordinateSystem,a=t.getData(),r=function(t,e){var a,i=t.getBaseAxis(),r="category"===i.type?i.getBandWidth():(a=i.getExtent(),Math.abs(a[1]-a[0])/e.count()),s=n(o(t.get("barMaxWidth"),r),r),h=n(o(t.get("barMinWidth"),1),r),l=t.get("barWidth");return null!=l?n(l,r):Math.max(Math.min(r/2,s),h)}(t,a),h=0,u=1,c=["x","y"],f=a.mapDimension(c[h]),d=a.mapDimension(c[u],!0),C=d[0],p=d[1],m=d[2],D=d[3];if(a.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),!(null==f||d.length<4))return{progress:t.pipelineContext.large?function(t,a){var i,r,n=new s(4*t.count),o=0,c=[],d=[];for(;null!=(r=t.next());){var v=a.get(f,r),g=a.get(C,r),S=a.get(p,r),T=a.get(m,r),I=a.get(D,r);isNaN(v)||isNaN(T)||isNaN(I)?(n[o++]=NaN,o+=3):(n[o++]=l(a,r,g,S,p),c[h]=v,c[u]=T,i=e.dataToPoint(c,null,d),n[o++]=i?i[0]:NaN,n[o++]=i?i[1]:NaN,c[u]=I,i=e.dataToPoint(c,null,d),n[o++]=i?i[1]:NaN)}a.setLayout("largePoints",n)}:function(t,a){var n;for(;null!=(n=t.next());){var o=a.get(f,n),s=a.get(C,n),c=a.get(p,n),d=a.get(m,n),v=a.get(D,n),g=Math.min(s,c),S=Math.max(s,c),T=F(g,o),I=F(S,o),y=F(d,o),x=F(v,o),w=[];E(w,I,0),E(w,T,1),w.push(L(x),L(I),L(y),L(T)),a.setItemLayout(n,{sign:l(a,n,s,c,p),initBaseline:s>c?I[u]:T[u],ends:w,brushRect:b(d,v,o)})}function F(t,a){var i=[];return i[h]=a,i[u]=t,isNaN(a)||isNaN(t)?[NaN,NaN]:e.dataToPoint(i)}function E(t,e,a){var n=e.slice(),o=e.slice();n[h]=i(n[h]+r/2,1,!1),o[h]=i(o[h]-r/2,1,!0),a?t.push(n,o):t.push(o,n)}function b(t,e,a){var i=F(t,a),n=F(e,a);return i[h]-=r/2,n[h]-=r/2,{x:i[0],y:i[1],width:u?r:n[0]-i[0],height:u?n[1]-i[1]:r}}function L(t){return t[h]=i(t[h],1),t}}}}};function l(t,e,a,i,r){return a>i?-1:a<i?1:e>0?t.get(r,e-1)<=i?1:-1:1}t.exports=h},CgaS:function(t,e,a){"use strict";var i=a("xTJ+"),r=a("MLWZ"),n=a("9rSQ"),o=a("UnBK"),s=a("SntB");function h(t){this.defaults=t,this.interceptors={request:new n,response:new n}}h.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[o,void 0],a=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)a=a.then(e.shift(),e.shift());return a},h.prototype.getUri=function(t){return t=s(this.defaults,t),r(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(t){h.prototype[t]=function(e,a){return this.request(i.merge(a||{},{method:t,url:e}))}}),i.forEach(["post","put","patch"],function(t){h.prototype[t]=function(e,a,r){return this.request(i.merge(r||{},{method:t,url:e,data:a}))}}),t.exports=h},CuL1:function(t,e,a){var i=a("mHY4"),r=a("/tXR"),n=a("GRew");t.exports=function(t){var e=i(t),a=r.f;if(a)for(var o,s=a(t),h=n.f,l=0;s.length>l;)h.call(t,o=s[l++])&&e.push(o);return e}},D3Ub:function(t,e,a){"use strict";e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(a("4d7F"));e.default=function(t){return function(){var e=t.apply(this,arguments);return new i.default(function(t,a){return function r(n,o){try{var s=e[n](o),h=s.value}catch(t){return void a(t)}if(!s.done)return i.default.resolve(h).then(function(t){r("next",t)},function(t){r("throw",t)});t(h)}("next")})}}},D5nY:function(t,e,a){a("Tghj").__DEV__;var i=a("4NO4"),r=i.makeInner,n=i.getDataItemValue,o=a("bYtY"),s=o.createHashMap,h=o.each,l=o.map,u=o.isArray,c=o.isString,f=o.isObject,d=o.isTypedArray,C=o.isArrayLike,p=o.extend,m=(o.assert,a("7G+c")),D=a("k9D9"),v=D.SOURCE_FORMAT_ORIGINAL,g=D.SOURCE_FORMAT_ARRAY_ROWS,S=D.SOURCE_FORMAT_OBJECT_ROWS,T=D.SOURCE_FORMAT_KEYED_COLUMNS,I=D.SOURCE_FORMAT_UNKNOWN,y=D.SOURCE_FORMAT_TYPED_ARRAY,x=D.SERIES_LAYOUT_BY_ROW,w={Must:1,Might:2,Not:3},F=r();function E(t){if(t){var e=s();return l(t,function(t,a){if(null==(t=p({},f(t)?t:{name:t})).name)return t;t.name+="",null==t.displayName&&(t.displayName=t.name);var i=e.get(t.name);return i?t.name+="-"+i.count++:e.set(t.name,{count:1}),t})}}function b(t,e,a,i){if(null==i&&(i=1/0),e===x)for(var r=0;r<a.length&&r<i;r++)t(a[r]?a[r][0]:null,r);else{var n=a[0]||[];for(r=0;r<n.length&&r<i;r++)t(n[r],r)}}function L(t){var e=t.option;if(!e.data)return t.ecModel.getComponent("dataset",e.datasetIndex||0)}function M(t,e,a,i,r,o){var s,h,l;if(d(t))return w.Not;if(i){var C=i[o];f(C)?(h=C.name,l=C.type):c(C)&&(h=C)}if(null!=l)return"ordinal"===l?w.Must:w.Not;if(e===g)if(a===x){for(var p=t[o],m=0;m<(p||[]).length&&m<5;m++)if(null!=(s=F(p[r+m])))return s}else for(m=0;m<t.length&&m<5;m++){var D=t[r+m];if(D&&null!=(s=F(D[o])))return s}else if(e===S){if(!h)return w.Not;for(m=0;m<t.length&&m<5;m++){if((I=t[m])&&null!=(s=F(I[h])))return s}}else if(e===T){if(!h)return w.Not;if(!(p=t[h])||d(p))return w.Not;for(m=0;m<p.length&&m<5;m++)if(null!=(s=F(p[m])))return s}else if(e===v)for(m=0;m<t.length&&m<5;m++){var I=t[m],y=n(I);if(!u(y))return w.Not;if(null!=(s=F(y[o])))return s}function F(t){var e=c(t);return null!=t&&isFinite(t)&&""!==t?e?w.Might:w.Not:e&&"-"!==t?w.Must:void 0}return w.Not}e.BE_ORDINAL=w,e.detectSourceFormat=function(t){var e=t.option.source,a=I;if(d(e))a=y;else if(u(e)){0===e.length&&(a=g);for(var i=0,r=e.length;i<r;i++){var n=e[i];if(null!=n){if(u(n)){a=g;break}if(f(n)){a=S;break}}}}else if(f(e)){for(var o in e)if(e.hasOwnProperty(o)&&C(e[o])){a=T;break}}else if(null!=e)throw new Error("Invalid data");F(t).sourceFormat=a},e.getSource=function(t){return F(t).source},e.resetSourceDefaulter=function(t){F(t).datasetMap=s()},e.prepareSource=function(t){var e=t.option,a=e.data,i=d(a)?y:v,r=!1,o=e.seriesLayoutBy,s=e.sourceHeader,l=e.dimensions,f=L(t);if(f){var C=f.option;a=C.source,i=F(f).sourceFormat,r=!0,o=o||C.seriesLayoutBy,null==s&&(s=C.sourceHeader),l=l||C.dimensions}var p=function(t,e,a,i,r){if(!t)return{dimensionsDefine:E(r)};var o,s;if(e===g)"auto"===i||null==i?b(function(t){null!=t&&"-"!==t&&(c(t)?null==s&&(s=1):s=0)},a,t,10):s=i?1:0,r||1!==s||(r=[],b(function(t,e){r[e]=null!=t?t:""},a,t)),o=r?r.length:a===x?t.length:t[0]?t[0].length:null;else if(e===S)r||(r=function(t){for(var e,a=0;a<t.length&&!(e=t[a++]););if(e){var i=[];return h(e,function(t,e){i.push(e)}),i}}(t));else if(e===T)r||(r=[],h(t,function(t,e){r.push(e)}));else if(e===v){var l=n(t[0]);o=u(l)&&l.length||1}return{startIndex:s,dimensionsDefine:E(r),dimensionsDetectCount:o}}(a,i,o,s,l);F(t).source=new m({data:a,fromDataset:r,seriesLayoutBy:o,sourceFormat:i,dimensionsDefine:p.dimensionsDefine,startIndex:p.startIndex,dimensionsDetectCount:p.dimensionsDetectCount,encodeDefine:e.encode})},e.makeSeriesEncodeForAxisCoordSys=function(t,e,a){var i={},r=L(e);if(!r||!t)return i;var n,o,s=[],l=[],u=e.ecModel,c=F(u).datasetMap,d=r.uid+"_"+a.seriesLayoutBy;t=t.slice(),h(t,function(e,a){!f(e)&&(t[a]={name:e}),"ordinal"===e.type&&null==n&&(n=a,o=m(t[a])),i[e.name]=[]});var C=c.get(d)||c.set(d,{categoryWayDim:o,valueWayDim:0});function p(t,e,a){for(var i=0;i<a;i++)t.push(e+i)}function m(t){var e=t.dimsDef;return e?e.length:1}return h(t,function(t,e){var a=t.name,r=m(t);if(null==n){var o=C.valueWayDim;p(i[a],o,r),p(l,o,r),C.valueWayDim+=r}else n===e?(p(i[a],0,r),p(s,0,r)):(o=C.categoryWayDim,p(i[a],o,r),p(l,o,r),C.categoryWayDim+=r)}),s.length&&(i.itemName=s),l.length&&(i.seriesName=l),i},e.makeSeriesEncodeForNameBased=function(t,e,a){var i={};if(!L(t))return i;var r,n=e.sourceFormat,o=e.dimensionsDefine;n!==S&&n!==T||h(o,function(t,e){"name"===(f(t)?t.name:t)&&(r=e)});var s=function(){for(var t={},i={},s=[],h=0,l=Math.min(5,a);h<l;h++){var u=M(e.data,n,e.seriesLayoutBy,o,e.startIndex,h);s.push(u);var c=u===w.Not;if(c&&null==t.v&&h!==r&&(t.v=h),(null==t.n||t.n===t.v||!c&&s[t.n]===w.Not)&&(t.n=h),f(t)&&s[t.n]!==w.Not)return t;c||(u===w.Might&&null==i.v&&h!==r&&(i.v=h),null!=i.n&&i.n!==i.v||(i.n=h))}function f(t){return null!=t.v&&null!=t.n}return f(t)?t:f(i)?i:null}();if(s){i.value=s.v;var l=null!=r?r:s.n;i.itemName=[l],i.seriesName=[l]}return i},e.guessOrdinal=function(t,e){return M(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}},DN4a:function(t,e,a){var i=a("Fofx"),r=a("QBsz"),n=i.identity,o=5e-5;function s(t){return t>o||t<-o}var h=function(t){(t=t||{}).position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},l=h.prototype;l.transform=null,l.needLocalTransform=function(){return s(this.rotation)||s(this.position[0])||s(this.position[1])||s(this.scale[0]-1)||s(this.scale[1]-1)};var u=[];l.updateTransform=function(){var t=this.parent,e=t&&t.transform,a=this.needLocalTransform(),r=this.transform;if(a||e){r=r||i.create(),a?this.getLocalTransform(r):n(r),e&&(a?i.mul(r,t.transform,r):i.copy(r,t.transform)),this.transform=r;var o=this.globalScaleRatio;if(null!=o&&1!==o){this.getGlobalScale(u);var s=u[0]<0?-1:1,h=u[1]<0?-1:1,l=((u[0]-s)*o+s)/u[0]||0,c=((u[1]-h)*o+h)/u[1]||0;r[0]*=l,r[1]*=l,r[2]*=c,r[3]*=c}this.invTransform=this.invTransform||i.create(),i.invert(this.invTransform,r)}else r&&n(r)},l.getLocalTransform=function(t){return h.getLocalTransform(this,t)},l.setTransform=function(t){var e=this.transform,a=t.dpr||1;e?t.setTransform(a*e[0],a*e[1],a*e[2],a*e[3],a*e[4],a*e[5]):t.setTransform(a,0,0,a,0,0)},l.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var c=[],f=i.create();l.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],a=t[2]*t[2]+t[3]*t[3],i=this.position,r=this.scale;s(e-1)&&(e=Math.sqrt(e)),s(a-1)&&(a=Math.sqrt(a)),t[0]<0&&(e=-e),t[3]<0&&(a=-a),i[0]=t[4],i[1]=t[5],r[0]=e,r[1]=a,this.rotation=Math.atan2(-t[1]/a,t[0]/e)}},l.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(i.mul(c,t.invTransform,e),e=c);var a=this.origin;a&&(a[0]||a[1])&&(f[4]=a[0],f[5]=a[1],i.mul(c,e,f),c[4]-=a[0],c[5]-=a[1],e=c),this.setLocalTransform(e)}},l.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},l.transformCoordToLocal=function(t,e){var a=[t,e],i=this.invTransform;return i&&r.applyTransform(a,a,i),a},l.transformCoordToGlobal=function(t,e){var a=[t,e],i=this.transform;return i&&r.applyTransform(a,a,i),a},h.getLocalTransform=function(t,e){n(e=e||[]);var a=t.origin,r=t.scale||[1,1],o=t.rotation||0,s=t.position||[0,0];return a&&(e[4]-=a[0],e[5]-=a[1]),i.scale(e,e,r),o&&i.rotate(e,e,o),a&&(e[4]+=a[0],e[5]+=a[1]),e[4]+=s[0],e[5]+=s[1],e};var d=h;t.exports=d},DTdt:function(t,e,a){a("/JZe");var i=a("VSTI").Object;t.exports=function(t,e){return i.defineProperties(t,e)}},Dagg:function(t,e,a){var i=a("Gev7"),r=a("mFDi"),n=a("bYtY"),o=a("Xnb7");function s(t){i.call(this,t)}s.prototype={constructor:s,type:"image",brush:function(t,e){var a=this.style,i=a.image;a.bind(t,this,e);var r=this._image=o.createOrUpdateImage(i,this._image,this,this.onload);if(r&&o.isImageReady(r)){var n=a.x||0,s=a.y||0,h=a.width,l=a.height,u=r.width/r.height;if(null==h&&null!=l?h=l*u:null==l&&null!=h?l=h/u:null==h&&null==l&&(h=r.width,l=r.height),this.setTransform(t),a.sWidth&&a.sHeight){var c=a.sx||0,f=a.sy||0;t.drawImage(r,c,f,a.sWidth,a.sHeight,n,s,h,l)}else if(a.sx&&a.sy){var d=h-(c=a.sx),C=l-(f=a.sy);t.drawImage(r,c,f,d,C,n,s,h,l)}else t.drawImage(r,n,s,h,l);null!=a.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new r(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},n.inherits(s,i);var h=s;t.exports=h},DfZB:function(t,e,a){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},DhVD:function(t,e,a){var i=a("WX/U");t.exports=function(t,e,a){return void 0===a?i(t,e,!1):i(t,a,!1!==e)}},DrT7:function(t,e,a){var i=a("ekG2"),r=a("d+lc"),n=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=a("nAx8")(Function.call,a("TSC6").f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,a){return n(t,a),e?t.__proto__=a:i(t,a),t}}({},!1):void 0),check:n}},Dzbc:function(t,e,a){"use strict";t.exports.Chart=a("8hsP").default,t.exports.Stock=a("F9+3").default,t.exports.RegressionTest=a("G+3P").default},EJiy:function(t,e,a){"use strict";e.__esModule=!0;var i=o(a("F+2o")),r=o(a("+JPL")),n="function"==typeof r.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":typeof t};function o(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof r.default&&"symbol"===n(i.default)?function(t){return void 0===t?"undefined":n(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":void 0===t?"undefined":n(t)}},ENu8:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},EVdn:function(t,e,a){var i;
/*!
 * jQuery JavaScript Library v3.7.0
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-05-11T18:29Z
 */
/*!
 * jQuery JavaScript Library v3.7.0
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-05-11T18:29Z
 */
!function(e,a){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?a(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return a(t)}:a(e)}("undefined"!=typeof window?window:this,function(a,r){"use strict";var n=[],o=Object.getPrototypeOf,s=n.slice,h=n.flat?function(t){return n.flat.call(t)}:function(t){return n.concat.apply([],t)},l=n.push,u=n.indexOf,c={},f=c.toString,d=c.hasOwnProperty,C=d.toString,p=C.call(Object),m={},D=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},v=function(t){return null!=t&&t===t.window},g=a.document,S={type:!0,src:!0,nonce:!0,noModule:!0};function T(t,e,a){var i,r,n=(a=a||g).createElement("script");if(n.text=t,e)for(i in S)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&n.setAttribute(i,r);a.head.appendChild(n).parentNode.removeChild(n)}function I(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?c[f.call(t)]||"object":typeof t}var y=/HTML$/i,x=function(t,e){return new x.fn.init(t,e)};function w(t){var e=!!t&&"length"in t&&t.length,a=I(t);return!D(t)&&!v(t)&&("array"===a||0===e||"number"==typeof e&&e>0&&e-1 in t)}function F(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}x.fn=x.prototype={jquery:"3.7.0",constructor:x,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=x.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return x.each(this,t)},map:function(t){return this.pushStack(x.map(this,function(e,a){return t.call(e,a,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,a=+t+(t<0?e:0);return this.pushStack(a>=0&&a<e?[this[a]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:n.sort,splice:n.splice},x.extend=x.fn.extend=function(){var t,e,a,i,r,n,o=arguments[0]||{},s=1,h=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[s]||{},s++),"object"==typeof o||D(o)||(o={}),s===h&&(o=this,s--);s<h;s++)if(null!=(t=arguments[s]))for(e in t)i=t[e],"__proto__"!==e&&o!==i&&(l&&i&&(x.isPlainObject(i)||(r=Array.isArray(i)))?(a=o[e],n=r&&!Array.isArray(a)?[]:r||x.isPlainObject(a)?a:{},r=!1,o[e]=x.extend(l,n,i)):void 0!==i&&(o[e]=i));return o},x.extend({expando:"jQuery"+("3.7.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,a;return!(!t||"[object Object]"!==f.call(t))&&(!(e=o(t))||"function"==typeof(a=d.call(e,"constructor")&&e.constructor)&&C.call(a)===p)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,a){T(t,{nonce:e&&e.nonce},a)},each:function(t,e){var a,i=0;if(w(t))for(a=t.length;i<a&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},text:function(t){var e,a="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r)return t.textContent;if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)a+=x.text(e);return a},makeArray:function(t,e){var a=e||[];return null!=t&&(w(Object(t))?x.merge(a,"string"==typeof t?[t]:t):l.call(a,t)),a},inArray:function(t,e,a){return null==e?-1:u.call(e,t,a)},isXMLDoc:function(t){var e=t&&t.namespaceURI,a=t&&(t.ownerDocument||t).documentElement;return!y.test(e||a&&a.nodeName||"HTML")},merge:function(t,e){for(var a=+e.length,i=0,r=t.length;i<a;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,a){for(var i=[],r=0,n=t.length,o=!a;r<n;r++)!e(t[r],r)!==o&&i.push(t[r]);return i},map:function(t,e,a){var i,r,n=0,o=[];if(w(t))for(i=t.length;n<i;n++)null!=(r=e(t[n],n,a))&&o.push(r);else for(n in t)null!=(r=e(t[n],n,a))&&o.push(r);return h(o)},guid:1,support:m}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=n[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){c["[object "+e+"]"]=e.toLowerCase()});var E=n.pop,b=n.sort,L=n.splice,M="[\\x20\\t\\r\\n\\f]",A=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g");x.contains=function(t,e){var a=e&&e.parentNode;return t===a||!(!a||1!==a.nodeType||!(t.contains?t.contains(a):t.compareDocumentPosition&&16&t.compareDocumentPosition(a)))};var O=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function N(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}x.escapeSelector=function(t){return(t+"").replace(O,N)};var P=g,R=l;!function(){var t,e,i,r,o,h,l,c,f,C,p=R,D=x.expando,v=0,g=0,S=tt(),T=tt(),I=tt(),y=tt(),w=function(t,e){return t===e&&(o=!0),0},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",_="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+M+"*\\]",B=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+_+")*)|.*)\\)|)",k=new RegExp(M+"+","g"),G=new RegExp("^"+M+"*,"+M+"*"),V=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),H=new RegExp(M+"|>"),Y=new RegExp(B),X=new RegExp("^"+N+"$"),W={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+_),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},U=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,j=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),q=function(t,e){var a="0x"+t.slice(1)-65536;return e||(a<0?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,1023&a|56320))},Z=function(){ht()},Q=ft(function(t){return!0===t.disabled&&F(t,"fieldset")},{dir:"parentNode",next:"legend"});try{p.apply(n=s.call(P.childNodes),P.childNodes),n[P.childNodes.length].nodeType}catch(t){p={apply:function(t,e){R.apply(t,s.call(e))},call:function(t){R.apply(t,s.call(arguments,1))}}}function $(t,e,a,i){var r,n,o,s,l,u,d,C=e&&e.ownerDocument,v=e?e.nodeType:9;if(a=a||[],"string"!=typeof t||!t||1!==v&&9!==v&&11!==v)return a;if(!i&&(ht(e),e=e||h,c)){if(11!==v&&(l=z.exec(t)))if(r=l[1]){if(9===v){if(!(o=e.getElementById(r)))return a;if(o.id===r)return p.call(a,o),a}else if(C&&(o=C.getElementById(r))&&$.contains(e,o)&&o.id===r)return p.call(a,o),a}else{if(l[2])return p.apply(a,e.getElementsByTagName(t)),a;if((r=l[3])&&e.getElementsByClassName)return p.apply(a,e.getElementsByClassName(r)),a}if(!(y[t+" "]||f&&f.test(t))){if(d=t,C=e,1===v&&(H.test(t)||V.test(t))){for((C=J.test(t)&&st(e.parentNode)||e)==e&&m.scope||((s=e.getAttribute("id"))?s=x.escapeSelector(s):e.setAttribute("id",s=D)),n=(u=ut(t)).length;n--;)u[n]=(s?"#"+s:":scope")+" "+ct(u[n]);d=u.join(",")}try{return p.apply(a,C.querySelectorAll(d)),a}catch(e){y(t,!0)}finally{s===D&&e.removeAttribute("id")}}}return vt(t.replace(A,"$1"),e,a,i)}function tt(){var t=[];return function a(i,r){return t.push(i+" ")>e.cacheLength&&delete a[t.shift()],a[i+" "]=r}}function et(t){return t[D]=!0,t}function at(t){var e=h.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function it(t){return function(e){return F(e,"input")&&e.type===t}}function rt(t){return function(e){return(F(e,"input")||F(e,"button"))&&e.type===t}}function nt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Q(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ot(t){return et(function(e){return e=+e,et(function(a,i){for(var r,n=t([],a.length,e),o=n.length;o--;)a[r=n[o]]&&(a[r]=!(i[r]=a[r]))})})}function st(t){return t&&void 0!==t.getElementsByTagName&&t}function ht(t){var a,i=t?t.ownerDocument||t:P;return i!=h&&9===i.nodeType&&i.documentElement?(l=(h=i).documentElement,c=!x.isXMLDoc(h),C=l.matches||l.webkitMatchesSelector||l.msMatchesSelector,P!=h&&(a=h.defaultView)&&a.top!==a&&a.addEventListener("unload",Z),m.getById=at(function(t){return l.appendChild(t).id=x.expando,!h.getElementsByName||!h.getElementsByName(x.expando).length}),m.disconnectedMatch=at(function(t){return C.call(t,"*")}),m.scope=at(function(){return h.querySelectorAll(":scope")}),m.cssHas=at(function(){try{return h.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}}),m.getById?(e.filter.ID=function(t){var e=t.replace(j,q);return function(t){return t.getAttribute("id")===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&c){var a=e.getElementById(t);return a?[a]:[]}}):(e.filter.ID=function(t){var e=t.replace(j,q);return function(t){var a=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return a&&a.value===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&c){var a,i,r,n=e.getElementById(t);if(n){if((a=n.getAttributeNode("id"))&&a.value===t)return[n];for(r=e.getElementsByName(t),i=0;n=r[i++];)if((a=n.getAttributeNode("id"))&&a.value===t)return[n]}return[]}}),e.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},e.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&c)return e.getElementsByClassName(t)},f=[],at(function(t){var e;l.appendChild(t).innerHTML="<a id='"+D+"' href='' disabled='disabled'></a><select id='"+D+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||f.push("\\["+M+"*(?:value|"+O+")"),t.querySelectorAll("[id~="+D+"-]").length||f.push("~="),t.querySelectorAll("a#"+D+"+*").length||f.push(".#.+[+~]"),t.querySelectorAll(":checked").length||f.push(":checked"),(e=h.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),l.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),(e=h.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||f.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")")}),m.cssHas||f.push(":has"),f=f.length&&new RegExp(f.join("|")),w=function(t,e){if(t===e)return o=!0,0;var a=!t.compareDocumentPosition-!e.compareDocumentPosition;return a||(1&(a=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!m.sortDetached&&e.compareDocumentPosition(t)===a?t===h||t.ownerDocument==P&&$.contains(P,t)?-1:e===h||e.ownerDocument==P&&$.contains(P,e)?1:r?u.call(r,t)-u.call(r,e):0:4&a?-1:1)},h):h}for(t in $.matches=function(t,e){return $(t,null,null,e)},$.matchesSelector=function(t,e){if(ht(t),c&&!y[e+" "]&&(!f||!f.test(e)))try{var a=C.call(t,e);if(a||m.disconnectedMatch||t.document&&11!==t.document.nodeType)return a}catch(t){y(e,!0)}return $(e,h,null,[t]).length>0},$.contains=function(t,e){return(t.ownerDocument||t)!=h&&ht(t),x.contains(t,e)},$.attr=function(t,a){(t.ownerDocument||t)!=h&&ht(t);var i=e.attrHandle[a.toLowerCase()],r=i&&d.call(e.attrHandle,a.toLowerCase())?i(t,a,!c):void 0;return void 0!==r?r:t.getAttribute(a)},$.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},x.uniqueSort=function(t){var e,a=[],i=0,n=0;if(o=!m.sortStable,r=!m.sortStable&&s.call(t,0),b.call(t,w),o){for(;e=t[n++];)e===t[n]&&(i=a.push(n));for(;i--;)L.call(t,a[i],1)}return r=null,t},x.fn.uniqueSort=function(){return this.pushStack(x.uniqueSort(s.apply(this)))},(e=x.expr={cacheLength:50,createPseudo:et,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(j,q),t[3]=(t[3]||t[4]||t[5]||"").replace(j,q),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||$.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&$.error(t[0]),t},PSEUDO:function(t){var e,a=!t[6]&&t[2];return W.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":a&&Y.test(a)&&(e=ut(a,!0))&&(e=a.indexOf(")",a.length-e)-a.length)&&(t[0]=t[0].slice(0,e),t[2]=a.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(j,q).toLowerCase();return"*"===t?function(){return!0}:function(t){return F(t,e)}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|"+M+")"+t+"("+M+"|$)"))&&S(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,a){return function(i){var r=$.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===a:"!="===e?r!==a:"^="===e?a&&0===r.indexOf(a):"*="===e?a&&r.indexOf(a)>-1:"$="===e?a&&r.slice(-a.length)===a:"~="===e?(" "+r.replace(k," ")+" ").indexOf(a)>-1:"|="===e&&(r===a||r.slice(0,a.length+1)===a+"-"))}},CHILD:function(t,e,a,i,r){var n="nth"!==t.slice(0,3),o="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,a,h){var l,u,c,f,d,C=n!==o?"nextSibling":"previousSibling",p=e.parentNode,m=s&&e.nodeName.toLowerCase(),g=!h&&!s,S=!1;if(p){if(n){for(;C;){for(c=e;c=c[C];)if(s?F(c,m):1===c.nodeType)return!1;d=C="only"===t&&!d&&"nextSibling"}return!0}if(d=[o?p.firstChild:p.lastChild],o&&g){for(S=(f=(l=(u=p[D]||(p[D]={}))[t]||[])[0]===v&&l[1])&&l[2],c=f&&p.childNodes[f];c=++f&&c&&c[C]||(S=f=0)||d.pop();)if(1===c.nodeType&&++S&&c===e){u[t]=[v,f,S];break}}else if(g&&(S=f=(l=(u=e[D]||(e[D]={}))[t]||[])[0]===v&&l[1]),!1===S)for(;(c=++f&&c&&c[C]||(S=f=0)||d.pop())&&((s?!F(c,m):1!==c.nodeType)||!++S||(g&&((u=c[D]||(c[D]={}))[t]=[v,S]),c!==e)););return(S-=r)===i||S%i==0&&S/i>=0}}},PSEUDO:function(t,a){var i,r=e.pseudos[t]||e.setFilters[t.toLowerCase()]||$.error("unsupported pseudo: "+t);return r[D]?r(a):r.length>1?(i=[t,t,"",a],e.setFilters.hasOwnProperty(t.toLowerCase())?et(function(t,e){for(var i,n=r(t,a),o=n.length;o--;)t[i=u.call(t,n[o])]=!(e[i]=n[o])}):function(t){return r(t,0,i)}):r}},pseudos:{not:et(function(t){var e=[],a=[],i=Dt(t.replace(A,"$1"));return i[D]?et(function(t,e,a,r){for(var n,o=i(t,null,r,[]),s=t.length;s--;)(n=o[s])&&(t[s]=!(e[s]=n))}):function(t,r,n){return e[0]=t,i(e,null,n,a),e[0]=null,!a.pop()}}),has:et(function(t){return function(e){return $(t,e).length>0}}),contains:et(function(t){return t=t.replace(j,q),function(e){return(e.textContent||x.text(e)).indexOf(t)>-1}}),lang:et(function(t){return X.test(t||"")||$.error("unsupported lang: "+t),t=t.replace(j,q).toLowerCase(),function(e){var a;do{if(a=c?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(a=a.toLowerCase())===t||0===a.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(t){var e=a.location&&a.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===l},focus:function(t){return t===function(){try{return h.activeElement}catch(t){}}()&&h.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:nt(!1),disabled:nt(!0),checked:function(t){return F(t,"input")&&!!t.checked||F(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(t){return K.test(t.nodeName)},input:function(t){return U.test(t.nodeName)},button:function(t){return F(t,"input")&&"button"===t.type||F(t,"button")},text:function(t){var e;return F(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ot(function(){return[0]}),last:ot(function(t,e){return[e-1]}),eq:ot(function(t,e,a){return[a<0?a+e:a]}),even:ot(function(t,e){for(var a=0;a<e;a+=2)t.push(a);return t}),odd:ot(function(t,e){for(var a=1;a<e;a+=2)t.push(a);return t}),lt:ot(function(t,e,a){var i;for(i=a<0?a+e:a>e?e:a;--i>=0;)t.push(i);return t}),gt:ot(function(t,e,a){for(var i=a<0?a+e:a;++i<e;)t.push(i);return t})}}).pseudos.nth=e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[t]=it(t);for(t in{submit:!0,reset:!0})e.pseudos[t]=rt(t);function lt(){}function ut(t,a){var i,r,n,o,s,h,l,u=T[t+" "];if(u)return a?0:u.slice(0);for(s=t,h=[],l=e.preFilter;s;){for(o in i&&!(r=G.exec(s))||(r&&(s=s.slice(r[0].length)||s),h.push(n=[])),i=!1,(r=V.exec(s))&&(i=r.shift(),n.push({value:i,type:r[0].replace(A," ")}),s=s.slice(i.length)),e.filter)!(r=W[o].exec(s))||l[o]&&!(r=l[o](r))||(i=r.shift(),n.push({value:i,type:o,matches:r}),s=s.slice(i.length));if(!i)break}return a?s.length:s?$.error(t):T(t,h).slice(0)}function ct(t){for(var e=0,a=t.length,i="";e<a;e++)i+=t[e].value;return i}function ft(t,e,a){var i=e.dir,r=e.next,n=r||i,o=a&&"parentNode"===n,s=g++;return e.first?function(e,a,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,a,r);return!1}:function(e,a,h){var l,u,c=[v,s];if(h){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,a,h))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(u=e[D]||(e[D]={}),r&&F(e,r))e=e[i]||e;else{if((l=u[n])&&l[0]===v&&l[1]===s)return c[2]=l[2];if(u[n]=c,c[2]=t(e,a,h))return!0}return!1}}function dt(t){return t.length>1?function(e,a,i){for(var r=t.length;r--;)if(!t[r](e,a,i))return!1;return!0}:t[0]}function Ct(t,e,a,i,r){for(var n,o=[],s=0,h=t.length,l=null!=e;s<h;s++)(n=t[s])&&(a&&!a(n,i,r)||(o.push(n),l&&e.push(s)));return o}function pt(t,e,a,i,r,n){return i&&!i[D]&&(i=pt(i)),r&&!r[D]&&(r=pt(r,n)),et(function(n,o,s,h){var l,c,f,d,C=[],m=[],D=o.length,v=n||function(t,e,a){for(var i=0,r=e.length;i<r;i++)$(t,e[i],a);return a}(e||"*",s.nodeType?[s]:s,[]),g=!t||!n&&e?v:Ct(v,C,t,s,h);if(a?a(g,d=r||(n?t:D||i)?[]:o,s,h):d=g,i)for(l=Ct(d,m),i(l,[],s,h),c=l.length;c--;)(f=l[c])&&(d[m[c]]=!(g[m[c]]=f));if(n){if(r||t){if(r){for(l=[],c=d.length;c--;)(f=d[c])&&l.push(g[c]=f);r(null,d=[],l,h)}for(c=d.length;c--;)(f=d[c])&&(l=r?u.call(n,f):C[c])>-1&&(n[l]=!(o[l]=f))}}else d=Ct(d===o?d.splice(D,d.length):d),r?r(null,o,d,h):p.apply(o,d)})}function mt(t){for(var a,r,n,o=t.length,s=e.relative[t[0].type],h=s||e.relative[" "],l=s?1:0,c=ft(function(t){return t===a},h,!0),f=ft(function(t){return u.call(a,t)>-1},h,!0),d=[function(t,e,r){var n=!s&&(r||e!=i)||((a=e).nodeType?c(t,e,r):f(t,e,r));return a=null,n}];l<o;l++)if(r=e.relative[t[l].type])d=[ft(dt(d),r)];else{if((r=e.filter[t[l].type].apply(null,t[l].matches))[D]){for(n=++l;n<o&&!e.relative[t[n].type];n++);return pt(l>1&&dt(d),l>1&&ct(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(A,"$1"),r,l<n&&mt(t.slice(l,n)),n<o&&mt(t=t.slice(n)),n<o&&ct(t))}d.push(r)}return dt(d)}function Dt(t,a){var r,n=[],o=[],s=I[t+" "];if(!s){for(a||(a=ut(t)),r=a.length;r--;)(s=mt(a[r]))[D]?n.push(s):o.push(s);(s=I(t,function(t,a){var r=a.length>0,n=t.length>0,o=function(o,s,l,u,f){var d,C,m,D=0,g="0",S=o&&[],T=[],I=i,y=o||n&&e.find.TAG("*",f),w=v+=null==I?1:Math.random()||.1,F=y.length;for(f&&(i=s==h||s||f);g!==F&&null!=(d=y[g]);g++){if(n&&d){for(C=0,s||d.ownerDocument==h||(ht(d),l=!c);m=t[C++];)if(m(d,s||h,l)){p.call(u,d);break}f&&(v=w)}r&&((d=!m&&d)&&D--,o&&S.push(d))}if(D+=g,r&&g!==D){for(C=0;m=a[C++];)m(S,T,s,l);if(o){if(D>0)for(;g--;)S[g]||T[g]||(T[g]=E.call(u));T=Ct(T)}p.apply(u,T),f&&!o&&T.length>0&&D+a.length>1&&x.uniqueSort(u)}return f&&(v=w,i=I),S};return r?et(o):o}(o,n))).selector=t}return s}function vt(t,a,i,r){var n,o,s,h,l,u="function"==typeof t&&t,f=!r&&ut(t=u.selector||t);if(i=i||[],1===f.length){if((o=f[0]=f[0].slice(0)).length>2&&"ID"===(s=o[0]).type&&9===a.nodeType&&c&&e.relative[o[1].type]){if(!(a=(e.find.ID(s.matches[0].replace(j,q),a)||[])[0]))return i;u&&(a=a.parentNode),t=t.slice(o.shift().value.length)}for(n=W.needsContext.test(t)?0:o.length;n--&&(s=o[n],!e.relative[h=s.type]);)if((l=e.find[h])&&(r=l(s.matches[0].replace(j,q),J.test(o[0].type)&&st(a.parentNode)||a))){if(o.splice(n,1),!(t=r.length&&ct(o)))return p.apply(i,r),i;break}}return(u||Dt(t,f))(r,a,!c,i,!a||J.test(t)&&st(a.parentNode)||a),i}lt.prototype=e.filters=e.pseudos,e.setFilters=new lt,m.sortStable=D.split("").sort(w).join("")===D,ht(),m.sortDetached=at(function(t){return 1&t.compareDocumentPosition(h.createElement("fieldset"))}),x.find=$,x.expr[":"]=x.expr.pseudos,x.unique=x.uniqueSort,$.compile=Dt,$.select=vt,$.setDocument=ht,$.escape=x.escapeSelector,$.getText=x.text,$.isXML=x.isXMLDoc,$.selectors=x.expr,$.support=x.support,$.uniqueSort=x.uniqueSort}();var _=function(t,e,a){for(var i=[],r=void 0!==a;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&x(t).is(a))break;i.push(t)}return i},B=function(t,e){for(var a=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&a.push(t);return a},k=x.expr.match.needsContext,G=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function V(t,e,a){return D(e)?x.grep(t,function(t,i){return!!e.call(t,i,t)!==a}):e.nodeType?x.grep(t,function(t){return t===e!==a}):"string"!=typeof e?x.grep(t,function(t){return u.call(e,t)>-1!==a}):x.filter(e,t,a)}x.filter=function(t,e,a){var i=e[0];return a&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?x.find.matchesSelector(i,t)?[i]:[]:x.find.matches(t,x.grep(e,function(t){return 1===t.nodeType}))},x.fn.extend({find:function(t){var e,a,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(x(t).filter(function(){for(e=0;e<i;e++)if(x.contains(r[e],this))return!0}));for(a=this.pushStack([]),e=0;e<i;e++)x.find(t,r[e],a);return i>1?x.uniqueSort(a):a},filter:function(t){return this.pushStack(V(this,t||[],!1))},not:function(t){return this.pushStack(V(this,t||[],!0))},is:function(t){return!!V(this,"string"==typeof t&&k.test(t)?x(t):t||[],!1).length}});var H,Y=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(t,e,a){var i,r;if(!t)return this;if(a=a||H,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Y.exec(t))||!i[1]&&e)return!e||e.jquery?(e||a).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof x?e[0]:e,x.merge(this,x.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:g,!0)),G.test(i[1])&&x.isPlainObject(e))for(i in e)D(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=g.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):D(t)?void 0!==a.ready?a.ready(t):t(x):x.makeArray(t,this)}).prototype=x.fn,H=x(g);var X=/^(?:parents|prev(?:Until|All))/,W={children:!0,contents:!0,next:!0,prev:!0};function U(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}x.fn.extend({has:function(t){var e=x(t,this),a=e.length;return this.filter(function(){for(var t=0;t<a;t++)if(x.contains(this,e[t]))return!0})},closest:function(t,e){var a,i=0,r=this.length,n=[],o="string"!=typeof t&&x(t);if(!k.test(t))for(;i<r;i++)for(a=this[i];a&&a!==e;a=a.parentNode)if(a.nodeType<11&&(o?o.index(a)>-1:1===a.nodeType&&x.find.matchesSelector(a,t))){n.push(a);break}return this.pushStack(n.length>1?x.uniqueSort(n):n)},index:function(t){return t?"string"==typeof t?u.call(x(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),x.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return _(t,"parentNode")},parentsUntil:function(t,e,a){return _(t,"parentNode",a)},next:function(t){return U(t,"nextSibling")},prev:function(t){return U(t,"previousSibling")},nextAll:function(t){return _(t,"nextSibling")},prevAll:function(t){return _(t,"previousSibling")},nextUntil:function(t,e,a){return _(t,"nextSibling",a)},prevUntil:function(t,e,a){return _(t,"previousSibling",a)},siblings:function(t){return B((t.parentNode||{}).firstChild,t)},children:function(t){return B(t.firstChild)},contents:function(t){return null!=t.contentDocument&&o(t.contentDocument)?t.contentDocument:(F(t,"template")&&(t=t.content||t),x.merge([],t.childNodes))}},function(t,e){x.fn[t]=function(a,i){var r=x.map(this,e,a);return"Until"!==t.slice(-5)&&(i=a),i&&"string"==typeof i&&(r=x.filter(i,r)),this.length>1&&(W[t]||x.uniqueSort(r),X.test(t)&&r.reverse()),this.pushStack(r)}});var K=/[^\x20\t\r\n\f]+/g;function z(t){return t}function J(t){throw t}function j(t,e,a,i){var r;try{t&&D(r=t.promise)?r.call(t).done(e).fail(a):t&&D(r=t.then)?r.call(t,e,a):e.apply(void 0,[t].slice(i))}catch(t){a.apply(void 0,[t])}}x.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return x.each(t.match(K)||[],function(t,a){e[a]=!0}),e}(t):x.extend({},t);var e,a,i,r,n=[],o=[],s=-1,h=function(){for(r=r||t.once,i=e=!0;o.length;s=-1)for(a=o.shift();++s<n.length;)!1===n[s].apply(a[0],a[1])&&t.stopOnFalse&&(s=n.length,a=!1);t.memory||(a=!1),e=!1,r&&(n=a?[]:"")},l={add:function(){return n&&(a&&!e&&(s=n.length-1,o.push(a)),function e(a){x.each(a,function(a,i){D(i)?t.unique&&l.has(i)||n.push(i):i&&i.length&&"string"!==I(i)&&e(i)})}(arguments),a&&!e&&h()),this},remove:function(){return x.each(arguments,function(t,e){for(var a;(a=x.inArray(e,n,a))>-1;)n.splice(a,1),a<=s&&s--}),this},has:function(t){return t?x.inArray(t,n)>-1:n.length>0},empty:function(){return n&&(n=[]),this},disable:function(){return r=o=[],n=a="",this},disabled:function(){return!n},lock:function(){return r=o=[],a||e||(n=a=""),this},locked:function(){return!!r},fireWith:function(t,a){return r||(a=[t,(a=a||[]).slice?a.slice():a],o.push(a),e||h()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},x.extend({Deferred:function(t){var e=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return n.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return x.Deferred(function(a){x.each(e,function(e,i){var r=D(t[i[4]])&&t[i[4]];n[i[1]](function(){var t=r&&r.apply(this,arguments);t&&D(t.promise)?t.promise().progress(a.notify).done(a.resolve).fail(a.reject):a[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(t,i,r){var n=0;function o(t,e,i,r){return function(){var s=this,h=arguments,l=function(){var a,l;if(!(t<n)){if((a=i.apply(s,h))===e.promise())throw new TypeError("Thenable self-resolution");l=a&&("object"==typeof a||"function"==typeof a)&&a.then,D(l)?r?l.call(a,o(n,e,z,r),o(n,e,J,r)):(n++,l.call(a,o(n,e,z,r),o(n,e,J,r),o(n,e,z,e.notifyWith))):(i!==z&&(s=void 0,h=[a]),(r||e.resolveWith)(s,h))}},u=r?l:function(){try{l()}catch(a){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(a,u.error),t+1>=n&&(i!==J&&(s=void 0,h=[a]),e.rejectWith(s,h))}};t?u():(x.Deferred.getErrorHook?u.error=x.Deferred.getErrorHook():x.Deferred.getStackHook&&(u.error=x.Deferred.getStackHook()),a.setTimeout(u))}}return x.Deferred(function(a){e[0][3].add(o(0,a,D(r)?r:z,a.notifyWith)),e[1][3].add(o(0,a,D(t)?t:z)),e[2][3].add(o(0,a,D(i)?i:J))}).promise()},promise:function(t){return null!=t?x.extend(t,r):r}},n={};return x.each(e,function(t,a){var o=a[2],s=a[5];r[a[1]]=o.add,s&&o.add(function(){i=s},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),o.add(a[3].fire),n[a[0]]=function(){return n[a[0]+"With"](this===n?void 0:this,arguments),this},n[a[0]+"With"]=o.fireWith}),r.promise(n),t&&t.call(n,n),n},when:function(t){var e=arguments.length,a=e,i=Array(a),r=s.call(arguments),n=x.Deferred(),o=function(t){return function(a){i[t]=this,r[t]=arguments.length>1?s.call(arguments):a,--e||n.resolveWith(i,r)}};if(e<=1&&(j(t,n.done(o(a)).resolve,n.reject,!e),"pending"===n.state()||D(r[a]&&r[a].then)))return n.then();for(;a--;)j(r[a],o(a),n.reject);return n.promise()}});var q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(t,e){a.console&&a.console.warn&&t&&q.test(t.name)&&a.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},x.readyException=function(t){a.setTimeout(function(){throw t})};var Z=x.Deferred();function Q(){g.removeEventListener("DOMContentLoaded",Q),a.removeEventListener("load",Q),x.ready()}x.fn.ready=function(t){return Z.then(t).catch(function(t){x.readyException(t)}),this},x.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==t&&--x.readyWait>0||Z.resolveWith(g,[x]))}}),x.ready.then=Z.then,"complete"===g.readyState||"loading"!==g.readyState&&!g.documentElement.doScroll?a.setTimeout(x.ready):(g.addEventListener("DOMContentLoaded",Q),a.addEventListener("load",Q));var $=function(t,e,a,i,r,n,o){var s=0,h=t.length,l=null==a;if("object"===I(a))for(s in r=!0,a)$(t,e,s,a[s],!0,n,o);else if(void 0!==i&&(r=!0,D(i)||(o=!0),l&&(o?(e.call(t,i),e=null):(l=e,e=function(t,e,a){return l.call(x(t),a)})),e))for(;s<h;s++)e(t[s],a,o?i:i.call(t[s],s,e(t[s],a)));return r?t:l?e.call(t):h?e(t[0],a):n},tt=/^-ms-/,et=/-([a-z])/g;function at(t,e){return e.toUpperCase()}function it(t){return t.replace(tt,"ms-").replace(et,at)}var rt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function nt(){this.expando=x.expando+nt.uid++}nt.uid=1,nt.prototype={cache:function(t){var e=t[this.expando];return e||(e={},rt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,a){var i,r=this.cache(t);if("string"==typeof e)r[it(e)]=a;else for(i in e)r[it(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][it(e)]},access:function(t,e,a){return void 0===e||e&&"string"==typeof e&&void 0===a?this.get(t,e):(this.set(t,e,a),void 0!==a?a:e)},remove:function(t,e){var a,i=t[this.expando];if(void 0!==i){if(void 0!==e){a=(e=Array.isArray(e)?e.map(it):(e=it(e))in i?[e]:e.match(K)||[]).length;for(;a--;)delete i[e[a]]}(void 0===e||x.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!x.isEmptyObject(e)}};var ot=new nt,st=new nt,ht=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,lt=/[A-Z]/g;function ut(t,e,a){var i;if(void 0===a&&1===t.nodeType)if(i="data-"+e.replace(lt,"-$&").toLowerCase(),"string"==typeof(a=t.getAttribute(i))){try{a=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:ht.test(t)?JSON.parse(t):t)}(a)}catch(t){}st.set(t,e,a)}else a=void 0;return a}x.extend({hasData:function(t){return st.hasData(t)||ot.hasData(t)},data:function(t,e,a){return st.access(t,e,a)},removeData:function(t,e){st.remove(t,e)},_data:function(t,e,a){return ot.access(t,e,a)},_removeData:function(t,e){ot.remove(t,e)}}),x.fn.extend({data:function(t,e){var a,i,r,n=this[0],o=n&&n.attributes;if(void 0===t){if(this.length&&(r=st.get(n),1===n.nodeType&&!ot.get(n,"hasDataAttrs"))){for(a=o.length;a--;)o[a]&&0===(i=o[a].name).indexOf("data-")&&(i=it(i.slice(5)),ut(n,i,r[i]));ot.set(n,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){st.set(this,t)}):$(this,function(e){var a;if(n&&void 0===e)return void 0!==(a=st.get(n,t))?a:void 0!==(a=ut(n,t))?a:void 0;this.each(function(){st.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){st.remove(this,t)})}}),x.extend({queue:function(t,e,a){var i;if(t)return e=(e||"fx")+"queue",i=ot.get(t,e),a&&(!i||Array.isArray(a)?i=ot.access(t,e,x.makeArray(a)):i.push(a)),i||[]},dequeue:function(t,e){e=e||"fx";var a=x.queue(t,e),i=a.length,r=a.shift(),n=x._queueHooks(t,e);"inprogress"===r&&(r=a.shift(),i--),r&&("fx"===e&&a.unshift("inprogress"),delete n.stop,r.call(t,function(){x.dequeue(t,e)},n)),!i&&n&&n.empty.fire()},_queueHooks:function(t,e){var a=e+"queueHooks";return ot.get(t,a)||ot.access(t,a,{empty:x.Callbacks("once memory").add(function(){ot.remove(t,[e+"queue",a])})})}}),x.fn.extend({queue:function(t,e){var a=2;return"string"!=typeof t&&(e=t,t="fx",a--),arguments.length<a?x.queue(this[0],t):void 0===e?this:this.each(function(){var a=x.queue(this,t,e);x._queueHooks(this,t),"fx"===t&&"inprogress"!==a[0]&&x.dequeue(this,t)})},dequeue:function(t){return this.each(function(){x.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var a,i=1,r=x.Deferred(),n=this,o=this.length,s=function(){--i||r.resolveWith(n,[n])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(a=ot.get(n[o],t+"queueHooks"))&&a.empty&&(i++,a.empty.add(s));return s(),r.promise(e)}});var ct=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ft=new RegExp("^(?:([+-])=|)("+ct+")([a-z%]*)$","i"),dt=["Top","Right","Bottom","Left"],Ct=g.documentElement,pt=function(t){return x.contains(t.ownerDocument,t)},mt={composed:!0};Ct.getRootNode&&(pt=function(t){return x.contains(t.ownerDocument,t)||t.getRootNode(mt)===t.ownerDocument});var Dt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&pt(t)&&"none"===x.css(t,"display")};function vt(t,e,a,i){var r,n,o=20,s=i?function(){return i.cur()}:function(){return x.css(t,e,"")},h=s(),l=a&&a[3]||(x.cssNumber[e]?"":"px"),u=t.nodeType&&(x.cssNumber[e]||"px"!==l&&+h)&&ft.exec(x.css(t,e));if(u&&u[3]!==l){for(h/=2,l=l||u[3],u=+h||1;o--;)x.style(t,e,u+l),(1-n)*(1-(n=s()/h||.5))<=0&&(o=0),u/=n;u*=2,x.style(t,e,u+l),a=a||[]}return a&&(u=+u||+h||0,r=a[1]?u+(a[1]+1)*a[2]:+a[2],i&&(i.unit=l,i.start=u,i.end=r)),r}var gt={};function St(t){var e,a=t.ownerDocument,i=t.nodeName,r=gt[i];return r||(e=a.body.appendChild(a.createElement(i)),r=x.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),gt[i]=r,r)}function Tt(t,e){for(var a,i,r=[],n=0,o=t.length;n<o;n++)(i=t[n]).style&&(a=i.style.display,e?("none"===a&&(r[n]=ot.get(i,"display")||null,r[n]||(i.style.display="")),""===i.style.display&&Dt(i)&&(r[n]=St(i))):"none"!==a&&(r[n]="none",ot.set(i,"display",a)));for(n=0;n<o;n++)null!=r[n]&&(t[n].style.display=r[n]);return t}x.fn.extend({show:function(){return Tt(this,!0)},hide:function(){return Tt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Dt(this)?x(this).show():x(this).hide()})}});var It=/^(?:checkbox|radio)$/i,yt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,xt=/^$|^module$|\/(?:java|ecma)script/i;!function(){var t=g.createDocumentFragment().appendChild(g.createElement("div")),e=g.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),m.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,t.innerHTML="<option></option>",m.option=!!t.lastChild}();var wt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ft(t,e){var a;return a=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&F(t,e)?x.merge([t],a):a}function Et(t,e){for(var a=0,i=t.length;a<i;a++)ot.set(t[a],"globalEval",!e||ot.get(e[a],"globalEval"))}wt.tbody=wt.tfoot=wt.colgroup=wt.caption=wt.thead,wt.th=wt.td,m.option||(wt.optgroup=wt.option=[1,"<select multiple='multiple'>","</select>"]);var bt=/<|&#?\w+;/;function Lt(t,e,a,i,r){for(var n,o,s,h,l,u,c=e.createDocumentFragment(),f=[],d=0,C=t.length;d<C;d++)if((n=t[d])||0===n)if("object"===I(n))x.merge(f,n.nodeType?[n]:n);else if(bt.test(n)){for(o=o||c.appendChild(e.createElement("div")),s=(yt.exec(n)||["",""])[1].toLowerCase(),h=wt[s]||wt._default,o.innerHTML=h[1]+x.htmlPrefilter(n)+h[2],u=h[0];u--;)o=o.lastChild;x.merge(f,o.childNodes),(o=c.firstChild).textContent=""}else f.push(e.createTextNode(n));for(c.textContent="",d=0;n=f[d++];)if(i&&x.inArray(n,i)>-1)r&&r.push(n);else if(l=pt(n),o=Ft(c.appendChild(n),"script"),l&&Et(o),a)for(u=0;n=o[u++];)xt.test(n.type||"")&&a.push(n);return c}var Mt=/^([^.]*)(?:\.(.+)|)/;function At(){return!0}function Ot(){return!1}function Nt(t,e,a,i,r,n){var o,s;if("object"==typeof e){for(s in"string"!=typeof a&&(i=i||a,a=void 0),e)Nt(t,s,a,i,e[s],n);return t}if(null==i&&null==r?(r=a,i=a=void 0):null==r&&("string"==typeof a?(r=i,i=void 0):(r=i,i=a,a=void 0)),!1===r)r=Ot;else if(!r)return t;return 1===n&&(o=r,(r=function(t){return x().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=x.guid++)),t.each(function(){x.event.add(this,e,r,i,a)})}function Pt(t,e,a){a?(ot.set(t,e,!1),x.event.add(t,e,{namespace:!1,handler:function(t){var a,i=ot.get(this,e);if(1&t.isTrigger&&this[e]){if(i)(x.event.special[e]||{}).delegateType&&t.stopPropagation();else if(i=s.call(arguments),ot.set(this,e,i),this[e](),a=ot.get(this,e),ot.set(this,e,!1),i!==a)return t.stopImmediatePropagation(),t.preventDefault(),a}else i&&(ot.set(this,e,x.event.trigger(i[0],i.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=At)}})):void 0===ot.get(t,e)&&x.event.add(t,e,At)}x.event={global:{},add:function(t,e,a,i,r){var n,o,s,h,l,u,c,f,d,C,p,m=ot.get(t);if(rt(t))for(a.handler&&(a=(n=a).handler,r=n.selector),r&&x.find.matchesSelector(Ct,r),a.guid||(a.guid=x.guid++),(h=m.events)||(h=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(e){return void 0!==x&&x.event.triggered!==e.type?x.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(K)||[""]).length;l--;)d=p=(s=Mt.exec(e[l])||[])[1],C=(s[2]||"").split(".").sort(),d&&(c=x.event.special[d]||{},d=(r?c.delegateType:c.bindType)||d,c=x.event.special[d]||{},u=x.extend({type:d,origType:p,data:i,handler:a,guid:a.guid,selector:r,needsContext:r&&x.expr.match.needsContext.test(r),namespace:C.join(".")},n),(f=h[d])||((f=h[d]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,i,C,o)||t.addEventListener&&t.addEventListener(d,o)),c.add&&(c.add.call(t,u),u.handler.guid||(u.handler.guid=a.guid)),r?f.splice(f.delegateCount++,0,u):f.push(u),x.event.global[d]=!0)},remove:function(t,e,a,i,r){var n,o,s,h,l,u,c,f,d,C,p,m=ot.hasData(t)&&ot.get(t);if(m&&(h=m.events)){for(l=(e=(e||"").match(K)||[""]).length;l--;)if(d=p=(s=Mt.exec(e[l])||[])[1],C=(s[2]||"").split(".").sort(),d){for(c=x.event.special[d]||{},f=h[d=(i?c.delegateType:c.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+C.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=n=f.length;n--;)u=f[n],!r&&p!==u.origType||a&&a.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(f.splice(n,1),u.selector&&f.delegateCount--,c.remove&&c.remove.call(t,u));o&&!f.length&&(c.teardown&&!1!==c.teardown.call(t,C,m.handle)||x.removeEvent(t,d,m.handle),delete h[d])}else for(d in h)x.event.remove(t,d+e[l],a,i,!0);x.isEmptyObject(h)&&ot.remove(t,"handle events")}},dispatch:function(t){var e,a,i,r,n,o,s=new Array(arguments.length),h=x.event.fix(t),l=(ot.get(this,"events")||Object.create(null))[h.type]||[],u=x.event.special[h.type]||{};for(s[0]=h,e=1;e<arguments.length;e++)s[e]=arguments[e];if(h.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,h)){for(o=x.event.handlers.call(this,h,l),e=0;(r=o[e++])&&!h.isPropagationStopped();)for(h.currentTarget=r.elem,a=0;(n=r.handlers[a++])&&!h.isImmediatePropagationStopped();)h.rnamespace&&!1!==n.namespace&&!h.rnamespace.test(n.namespace)||(h.handleObj=n,h.data=n.data,void 0!==(i=((x.event.special[n.origType]||{}).handle||n.handler).apply(r.elem,s))&&!1===(h.result=i)&&(h.preventDefault(),h.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,h),h.result}},handlers:function(t,e){var a,i,r,n,o,s=[],h=e.delegateCount,l=t.target;if(h&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(n=[],o={},a=0;a<h;a++)void 0===o[r=(i=e[a]).selector+" "]&&(o[r]=i.needsContext?x(r,this).index(l)>-1:x.find(r,this,null,[l]).length),o[r]&&n.push(i);n.length&&s.push({elem:l,handlers:n})}return l=this,h<e.length&&s.push({elem:l,handlers:e.slice(h)}),s},addProp:function(t,e){Object.defineProperty(x.Event.prototype,t,{enumerable:!0,configurable:!0,get:D(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[x.expando]?t:new x.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return It.test(e.type)&&e.click&&F(e,"input")&&Pt(e,"click",!0),!1},trigger:function(t){var e=this||t;return It.test(e.type)&&e.click&&F(e,"input")&&Pt(e,"click"),!0},_default:function(t){var e=t.target;return It.test(e.type)&&e.click&&F(e,"input")&&ot.get(e,"click")||F(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},x.removeEvent=function(t,e,a){t.removeEventListener&&t.removeEventListener(e,a)},x.Event=function(t,e){if(!(this instanceof x.Event))return new x.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?At:Ot,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&x.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Ot,isPropagationStopped:Ot,isImmediatePropagationStopped:Ot,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=At,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=At,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=At,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(t,e){function a(t){if(g.documentMode){var a=ot.get(this,"handle"),i=x.event.fix(t);i.type="focusin"===t.type?"focus":"blur",i.isSimulated=!0,a(t),i.target===i.currentTarget&&a(i)}else x.event.simulate(e,t.target,x.event.fix(t))}x.event.special[t]={setup:function(){var i;if(Pt(this,t,!0),!g.documentMode)return!1;(i=ot.get(this,e))||this.addEventListener(e,a),ot.set(this,e,(i||0)+1)},trigger:function(){return Pt(this,t),!0},teardown:function(){var t;if(!g.documentMode)return!1;(t=ot.get(this,e)-1)?ot.set(this,e,t):(this.removeEventListener(e,a),ot.remove(this,e))},_default:function(e){return ot.get(e.target,t)},delegateType:e},x.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,r=g.documentMode?this:i,n=ot.get(r,e);n||(g.documentMode?this.addEventListener(e,a):i.addEventListener(t,a,!0)),ot.set(r,e,(n||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=g.documentMode?this:i,n=ot.get(r,e)-1;n?ot.set(r,e,n):(g.documentMode?this.removeEventListener(e,a):i.removeEventListener(t,a,!0),ot.remove(r,e))}}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){x.event.special[t]={delegateType:e,bindType:e,handle:function(t){var a,i=t.relatedTarget,r=t.handleObj;return i&&(i===this||x.contains(this,i))||(t.type=r.origType,a=r.handler.apply(this,arguments),t.type=e),a}}}),x.fn.extend({on:function(t,e,a,i){return Nt(this,t,e,a,i)},one:function(t,e,a,i){return Nt(this,t,e,a,i,1)},off:function(t,e,a){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,x(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(a=e,e=void 0),!1===a&&(a=Ot),this.each(function(){x.event.remove(this,t,a,e)})}});var Rt=/<script|<style|<link/i,_t=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function kt(t,e){return F(t,"table")&&F(11!==e.nodeType?e:e.firstChild,"tr")&&x(t).children("tbody")[0]||t}function Gt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Vt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ht(t,e){var a,i,r,n,o,s;if(1===e.nodeType){if(ot.hasData(t)&&(s=ot.get(t).events))for(r in ot.remove(e,"handle events"),s)for(a=0,i=s[r].length;a<i;a++)x.event.add(e,r,s[r][a]);st.hasData(t)&&(n=st.access(t),o=x.extend({},n),st.set(e,o))}}function Yt(t,e){var a=e.nodeName.toLowerCase();"input"===a&&It.test(t.type)?e.checked=t.checked:"input"!==a&&"textarea"!==a||(e.defaultValue=t.defaultValue)}function Xt(t,e,a,i){e=h(e);var r,n,o,s,l,u,c=0,f=t.length,d=f-1,C=e[0],p=D(C);if(p||f>1&&"string"==typeof C&&!m.checkClone&&_t.test(C))return t.each(function(r){var n=t.eq(r);p&&(e[0]=C.call(this,r,n.html())),Xt(n,e,a,i)});if(f&&(n=(r=Lt(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=n),n||i)){for(s=(o=x.map(Ft(r,"script"),Gt)).length;c<f;c++)l=r,c!==d&&(l=x.clone(l,!0,!0),s&&x.merge(o,Ft(l,"script"))),a.call(t[c],l,c);if(s)for(u=o[o.length-1].ownerDocument,x.map(o,Vt),c=0;c<s;c++)l=o[c],xt.test(l.type||"")&&!ot.access(l,"globalEval")&&x.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?x._evalUrl&&!l.noModule&&x._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):T(l.textContent.replace(Bt,""),l,u))}return t}function Wt(t,e,a){for(var i,r=e?x.filter(e,t):t,n=0;null!=(i=r[n]);n++)a||1!==i.nodeType||x.cleanData(Ft(i)),i.parentNode&&(a&&pt(i)&&Et(Ft(i,"script")),i.parentNode.removeChild(i));return t}x.extend({htmlPrefilter:function(t){return t},clone:function(t,e,a){var i,r,n,o,s=t.cloneNode(!0),h=pt(t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||x.isXMLDoc(t)))for(o=Ft(s),i=0,r=(n=Ft(t)).length;i<r;i++)Yt(n[i],o[i]);if(e)if(a)for(n=n||Ft(t),o=o||Ft(s),i=0,r=n.length;i<r;i++)Ht(n[i],o[i]);else Ht(t,s);return(o=Ft(s,"script")).length>0&&Et(o,!h&&Ft(t,"script")),s},cleanData:function(t){for(var e,a,i,r=x.event.special,n=0;void 0!==(a=t[n]);n++)if(rt(a)){if(e=a[ot.expando]){if(e.events)for(i in e.events)r[i]?x.event.remove(a,i):x.removeEvent(a,i,e.handle);a[ot.expando]=void 0}a[st.expando]&&(a[st.expando]=void 0)}}}),x.fn.extend({detach:function(t){return Wt(this,t,!0)},remove:function(t){return Wt(this,t)},text:function(t){return $(this,function(t){return void 0===t?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Xt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||kt(this,t).appendChild(t)})},prepend:function(){return Xt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=kt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Xt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Xt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(x.cleanData(Ft(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return x.clone(this,t,e)})},html:function(t){return $(this,function(t){var e=this[0]||{},a=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Rt.test(t)&&!wt[(yt.exec(t)||["",""])[1].toLowerCase()]){t=x.htmlPrefilter(t);try{for(;a<i;a++)1===(e=this[a]||{}).nodeType&&(x.cleanData(Ft(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Xt(this,arguments,function(e){var a=this.parentNode;x.inArray(this,t)<0&&(x.cleanData(Ft(this)),a&&a.replaceChild(e,this))},t)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){x.fn[t]=function(t){for(var a,i=[],r=x(t),n=r.length-1,o=0;o<=n;o++)a=o===n?this:this.clone(!0),x(r[o])[e](a),l.apply(i,a.get());return this.pushStack(i)}});var Ut=new RegExp("^("+ct+")(?!px)[a-z%]+$","i"),Kt=/^--/,zt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=a),e.getComputedStyle(t)},Jt=function(t,e,a){var i,r,n={};for(r in e)n[r]=t.style[r],t.style[r]=e[r];for(r in i=a.call(t),e)t.style[r]=n[r];return i},jt=new RegExp(dt.join("|"),"i");function qt(t,e,a){var i,r,n,o,s=Kt.test(e),h=t.style;return(a=a||zt(t))&&(o=a.getPropertyValue(e)||a[e],s&&o&&(o=o.replace(A,"$1")||void 0),""!==o||pt(t)||(o=x.style(t,e)),!m.pixelBoxStyles()&&Ut.test(o)&&jt.test(e)&&(i=h.width,r=h.minWidth,n=h.maxWidth,h.minWidth=h.maxWidth=h.width=o,o=a.width,h.width=i,h.minWidth=r,h.maxWidth=n)),void 0!==o?o+"":o}function Zt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ct.appendChild(l).appendChild(u);var t=a.getComputedStyle(u);i="1%"!==t.top,h=12===e(t.marginLeft),u.style.right="60%",o=36===e(t.right),r=36===e(t.width),u.style.position="absolute",n=12===e(u.offsetWidth/3),Ct.removeChild(l),u=null}}function e(t){return Math.round(parseFloat(t))}var i,r,n,o,s,h,l=g.createElement("div"),u=g.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,x.extend(m,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),h},scrollboxSize:function(){return t(),n},reliableTrDimensions:function(){var t,e,i,r;return null==s&&(t=g.createElement("table"),e=g.createElement("tr"),i=g.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",i.style.height="9px",i.style.display="block",Ct.appendChild(t).appendChild(e).appendChild(i),r=a.getComputedStyle(e),s=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===e.offsetHeight,Ct.removeChild(t)),s}}))}();var Qt=["Webkit","Moz","ms"],$t=g.createElement("div").style,te={};function ee(t){var e=x.cssProps[t]||te[t];return e||(t in $t?t:te[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),a=Qt.length;a--;)if((t=Qt[a]+e)in $t)return t}(t)||t)}var ae=/^(none|table(?!-c[ea]).+)/,ie={position:"absolute",visibility:"hidden",display:"block"},re={letterSpacing:"0",fontWeight:"400"};function ne(t,e,a){var i=ft.exec(e);return i?Math.max(0,i[2]-(a||0))+(i[3]||"px"):e}function oe(t,e,a,i,r,n){var o="width"===e?1:0,s=0,h=0,l=0;if(a===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===a&&(l+=x.css(t,a+dt[o],!0,r)),i?("content"===a&&(h-=x.css(t,"padding"+dt[o],!0,r)),"margin"!==a&&(h-=x.css(t,"border"+dt[o]+"Width",!0,r))):(h+=x.css(t,"padding"+dt[o],!0,r),"padding"!==a?h+=x.css(t,"border"+dt[o]+"Width",!0,r):s+=x.css(t,"border"+dt[o]+"Width",!0,r));return!i&&n>=0&&(h+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-n-h-s-.5))||0),h+l}function se(t,e,a){var i=zt(t),r=(!m.boxSizingReliable()||a)&&"border-box"===x.css(t,"boxSizing",!1,i),n=r,o=qt(t,e,i),s="offset"+e[0].toUpperCase()+e.slice(1);if(Ut.test(o)){if(!a)return o;o="auto"}return(!m.boxSizingReliable()&&r||!m.reliableTrDimensions()&&F(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===x.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===x.css(t,"boxSizing",!1,i),(n=s in t)&&(o=t[s])),(o=parseFloat(o)||0)+oe(t,e,a||(r?"border":"content"),n,i,o)+"px"}function he(t,e,a,i,r){return new he.prototype.init(t,e,a,i,r)}x.extend({cssHooks:{opacity:{get:function(t,e){if(e){var a=qt(t,"opacity");return""===a?"1":a}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,a,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,n,o,s=it(e),h=Kt.test(e),l=t.style;if(h||(e=ee(s)),o=x.cssHooks[e]||x.cssHooks[s],void 0===a)return o&&"get"in o&&void 0!==(r=o.get(t,!1,i))?r:l[e];"string"===(n=typeof a)&&(r=ft.exec(a))&&r[1]&&(a=vt(t,e,r),n="number"),null!=a&&a==a&&("number"!==n||h||(a+=r&&r[3]||(x.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==a||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(a=o.set(t,a,i))||(h?l.setProperty(e,a):l[e]=a))}},css:function(t,e,a,i){var r,n,o,s=it(e);return Kt.test(e)||(e=ee(s)),(o=x.cssHooks[e]||x.cssHooks[s])&&"get"in o&&(r=o.get(t,!0,a)),void 0===r&&(r=qt(t,e,i)),"normal"===r&&e in re&&(r=re[e]),""===a||a?(n=parseFloat(r),!0===a||isFinite(n)?n||0:r):r}}),x.each(["height","width"],function(t,e){x.cssHooks[e]={get:function(t,a,i){if(a)return!ae.test(x.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?se(t,e,i):Jt(t,ie,function(){return se(t,e,i)})},set:function(t,a,i){var r,n=zt(t),o=!m.scrollboxSize()&&"absolute"===n.position,s=(o||i)&&"border-box"===x.css(t,"boxSizing",!1,n),h=i?oe(t,e,i,s,n):0;return s&&o&&(h-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(n[e])-oe(t,e,"border",!1,n)-.5)),h&&(r=ft.exec(a))&&"px"!==(r[3]||"px")&&(t.style[e]=a,a=x.css(t,e)),ne(0,a,h)}}}),x.cssHooks.marginLeft=Zt(m.reliableMarginLeft,function(t,e){if(e)return(parseFloat(qt(t,"marginLeft"))||t.getBoundingClientRect().left-Jt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(t,e){x.cssHooks[t+e]={expand:function(a){for(var i=0,r={},n="string"==typeof a?a.split(" "):[a];i<4;i++)r[t+dt[i]+e]=n[i]||n[i-2]||n[0];return r}},"margin"!==t&&(x.cssHooks[t+e].set=ne)}),x.fn.extend({css:function(t,e){return $(this,function(t,e,a){var i,r,n={},o=0;if(Array.isArray(e)){for(i=zt(t),r=e.length;o<r;o++)n[e[o]]=x.css(t,e[o],!1,i);return n}return void 0!==a?x.style(t,e,a):x.css(t,e)},t,e,arguments.length>1)}}),x.Tween=he,he.prototype={constructor:he,init:function(t,e,a,i,r,n){this.elem=t,this.prop=a,this.easing=r||x.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=n||(x.cssNumber[a]?"":"px")},cur:function(){var t=he.propHooks[this.prop];return t&&t.get?t.get(this):he.propHooks._default.get(this)},run:function(t){var e,a=he.propHooks[this.prop];return this.options.duration?this.pos=e=x.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),a&&a.set?a.set(this):he.propHooks._default.set(this),this}},he.prototype.init.prototype=he.prototype,he.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=x.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){x.fx.step[t.prop]?x.fx.step[t.prop](t):1!==t.elem.nodeType||!x.cssHooks[t.prop]&&null==t.elem.style[ee(t.prop)]?t.elem[t.prop]=t.now:x.style(t.elem,t.prop,t.now+t.unit)}}},he.propHooks.scrollTop=he.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},x.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},x.fx=he.prototype.init,x.fx.step={};var le,ue,ce=/^(?:toggle|show|hide)$/,fe=/queueHooks$/;function de(){ue&&(!1===g.hidden&&a.requestAnimationFrame?a.requestAnimationFrame(de):a.setTimeout(de,x.fx.interval),x.fx.tick())}function Ce(){return a.setTimeout(function(){le=void 0}),le=Date.now()}function pe(t,e){var a,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(a=dt[i])]=r["padding"+a]=t;return e&&(r.opacity=r.width=t),r}function me(t,e,a){for(var i,r=(De.tweeners[e]||[]).concat(De.tweeners["*"]),n=0,o=r.length;n<o;n++)if(i=r[n].call(a,e,t))return i}function De(t,e,a){var i,r,n=0,o=De.prefilters.length,s=x.Deferred().always(function(){delete h.elem}),h=function(){if(r)return!1;for(var e=le||Ce(),a=Math.max(0,l.startTime+l.duration-e),i=1-(a/l.duration||0),n=0,o=l.tweens.length;n<o;n++)l.tweens[n].run(i);return s.notifyWith(t,[l,i,a]),i<1&&o?a:(o||s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l]),!1)},l=s.promise({elem:t,props:x.extend({},e),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},a),originalProperties:e,originalOptions:a,startTime:le||Ce(),duration:a.duration,tweens:[],createTween:function(e,a){var i=x.Tween(t,l.opts,e,a,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var a=0,i=e?l.tweens.length:0;if(r)return this;for(r=!0;a<i;a++)l.tweens[a].run(1);return e?(s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l,e])):s.rejectWith(t,[l,e]),this}}),u=l.props;for(!function(t,e){var a,i,r,n,o;for(a in t)if(r=e[i=it(a)],n=t[a],Array.isArray(n)&&(r=n[1],n=t[a]=n[0]),a!==i&&(t[i]=n,delete t[a]),(o=x.cssHooks[i])&&"expand"in o)for(a in n=o.expand(n),delete t[i],n)a in t||(t[a]=n[a],e[a]=r);else e[i]=r}(u,l.opts.specialEasing);n<o;n++)if(i=De.prefilters[n].call(l,t,u,l.opts))return D(i.stop)&&(x._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return x.map(u,me,l),D(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),x.fx.timer(x.extend(h,{elem:t,anim:l,queue:l.opts.queue})),l}x.Animation=x.extend(De,{tweeners:{"*":[function(t,e){var a=this.createTween(t,e);return vt(a.elem,t,ft.exec(e),a),a}]},tweener:function(t,e){D(t)?(e=t,t=["*"]):t=t.match(K);for(var a,i=0,r=t.length;i<r;i++)a=t[i],De.tweeners[a]=De.tweeners[a]||[],De.tweeners[a].unshift(e)},prefilters:[function(t,e,a){var i,r,n,o,s,h,l,u,c="width"in e||"height"in e,f=this,d={},C=t.style,p=t.nodeType&&Dt(t),m=ot.get(t,"fxshow");for(i in a.queue||(null==(o=x._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,f.always(function(){f.always(function(){o.unqueued--,x.queue(t,"fx").length||o.empty.fire()})})),e)if(r=e[i],ce.test(r)){if(delete e[i],n=n||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;p=!0}d[i]=m&&m[i]||x.style(t,i)}if((h=!x.isEmptyObject(e))||!x.isEmptyObject(d))for(i in c&&1===t.nodeType&&(a.overflow=[C.overflow,C.overflowX,C.overflowY],null==(l=m&&m.display)&&(l=ot.get(t,"display")),"none"===(u=x.css(t,"display"))&&(l?u=l:(Tt([t],!0),l=t.style.display||l,u=x.css(t,"display"),Tt([t]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===x.css(t,"float")&&(h||(f.done(function(){C.display=l}),null==l&&(u=C.display,l="none"===u?"":u)),C.display="inline-block")),a.overflow&&(C.overflow="hidden",f.always(function(){C.overflow=a.overflow[0],C.overflowX=a.overflow[1],C.overflowY=a.overflow[2]})),h=!1,d)h||(m?"hidden"in m&&(p=m.hidden):m=ot.access(t,"fxshow",{display:l}),n&&(m.hidden=!p),p&&Tt([t],!0),f.done(function(){for(i in p||Tt([t]),ot.remove(t,"fxshow"),d)x.style(t,i,d[i])})),h=me(p?m[i]:0,i,f),i in m||(m[i]=h.start,p&&(h.end=h.start,h.start=0))}],prefilter:function(t,e){e?De.prefilters.unshift(t):De.prefilters.push(t)}}),x.speed=function(t,e,a){var i=t&&"object"==typeof t?x.extend({},t):{complete:a||!a&&e||D(t)&&t,duration:t,easing:a&&e||e&&!D(e)&&e};return x.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in x.fx.speeds?i.duration=x.fx.speeds[i.duration]:i.duration=x.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){D(i.old)&&i.old.call(this),i.queue&&x.dequeue(this,i.queue)},i},x.fn.extend({fadeTo:function(t,e,a,i){return this.filter(Dt).css("opacity",0).show().end().animate({opacity:e},t,a,i)},animate:function(t,e,a,i){var r=x.isEmptyObject(t),n=x.speed(e,a,i),o=function(){var e=De(this,x.extend({},t),n);(r||ot.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===n.queue?this.each(o):this.queue(n.queue,o)},stop:function(t,e,a){var i=function(t){var e=t.stop;delete t.stop,e(a)};return"string"!=typeof t&&(a=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",n=x.timers,o=ot.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&fe.test(r)&&i(o[r]);for(r=n.length;r--;)n[r].elem!==this||null!=t&&n[r].queue!==t||(n[r].anim.stop(a),e=!1,n.splice(r,1));!e&&a||x.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,a=ot.get(this),i=a[t+"queue"],r=a[t+"queueHooks"],n=x.timers,o=i?i.length:0;for(a.finish=!0,x.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=n.length;e--;)n[e].elem===this&&n[e].queue===t&&(n[e].anim.stop(!0),n.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete a.finish})}}),x.each(["toggle","show","hide"],function(t,e){var a=x.fn[e];x.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?a.apply(this,arguments):this.animate(pe(e,!0),t,i,r)}}),x.each({slideDown:pe("show"),slideUp:pe("hide"),slideToggle:pe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){x.fn[t]=function(t,a,i){return this.animate(e,t,a,i)}}),x.timers=[],x.fx.tick=function(){var t,e=0,a=x.timers;for(le=Date.now();e<a.length;e++)(t=a[e])()||a[e]!==t||a.splice(e--,1);a.length||x.fx.stop(),le=void 0},x.fx.timer=function(t){x.timers.push(t),x.fx.start()},x.fx.interval=13,x.fx.start=function(){ue||(ue=!0,de())},x.fx.stop=function(){ue=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(t,e){return t=x.fx&&x.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,i){var r=a.setTimeout(e,t);i.stop=function(){a.clearTimeout(r)}})},function(){var t=g.createElement("input"),e=g.createElement("select").appendChild(g.createElement("option"));t.type="checkbox",m.checkOn=""!==t.value,m.optSelected=e.selected,(t=g.createElement("input")).value="t",t.type="radio",m.radioValue="t"===t.value}();var ve,ge=x.expr.attrHandle;x.fn.extend({attr:function(t,e){return $(this,x.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){x.removeAttr(this,t)})}}),x.extend({attr:function(t,e,a){var i,r,n=t.nodeType;if(3!==n&&8!==n&&2!==n)return void 0===t.getAttribute?x.prop(t,e,a):(1===n&&x.isXMLDoc(t)||(r=x.attrHooks[e.toLowerCase()]||(x.expr.match.bool.test(e)?ve:void 0)),void 0!==a?null===a?void x.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,a,e))?i:(t.setAttribute(e,a+""),a):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=x.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&F(t,"input")){var a=t.value;return t.setAttribute("type",e),a&&(t.value=a),e}}}},removeAttr:function(t,e){var a,i=0,r=e&&e.match(K);if(r&&1===t.nodeType)for(;a=r[i++];)t.removeAttribute(a)}}),ve={set:function(t,e,a){return!1===e?x.removeAttr(t,a):t.setAttribute(a,a),a}},x.each(x.expr.match.bool.source.match(/\w+/g),function(t,e){var a=ge[e]||x.find.attr;ge[e]=function(t,e,i){var r,n,o=e.toLowerCase();return i||(n=ge[o],ge[o]=r,r=null!=a(t,e,i)?o:null,ge[o]=n),r}});var Se=/^(?:input|select|textarea|button)$/i,Te=/^(?:a|area)$/i;function Ie(t){return(t.match(K)||[]).join(" ")}function ye(t){return t.getAttribute&&t.getAttribute("class")||""}function xe(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(K)||[]}x.fn.extend({prop:function(t,e){return $(this,x.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[x.propFix[t]||t]})}}),x.extend({prop:function(t,e,a){var i,r,n=t.nodeType;if(3!==n&&8!==n&&2!==n)return 1===n&&x.isXMLDoc(t)||(e=x.propFix[e]||e,r=x.propHooks[e]),void 0!==a?r&&"set"in r&&void 0!==(i=r.set(t,a,e))?i:t[e]=a:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=x.find.attr(t,"tabindex");return e?parseInt(e,10):Se.test(t.nodeName)||Te.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(x.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(t){var e,a,i,r,n,o;return D(t)?this.each(function(e){x(this).addClass(t.call(this,e,ye(this)))}):(e=xe(t)).length?this.each(function(){if(i=ye(this),a=1===this.nodeType&&" "+Ie(i)+" "){for(n=0;n<e.length;n++)r=e[n],a.indexOf(" "+r+" ")<0&&(a+=r+" ");o=Ie(a),i!==o&&this.setAttribute("class",o)}}):this},removeClass:function(t){var e,a,i,r,n,o;return D(t)?this.each(function(e){x(this).removeClass(t.call(this,e,ye(this)))}):arguments.length?(e=xe(t)).length?this.each(function(){if(i=ye(this),a=1===this.nodeType&&" "+Ie(i)+" "){for(n=0;n<e.length;n++)for(r=e[n];a.indexOf(" "+r+" ")>-1;)a=a.replace(" "+r+" "," ");o=Ie(a),i!==o&&this.setAttribute("class",o)}}):this:this.attr("class","")},toggleClass:function(t,e){var a,i,r,n,o=typeof t,s="string"===o||Array.isArray(t);return D(t)?this.each(function(a){x(this).toggleClass(t.call(this,a,ye(this),e),e)}):"boolean"==typeof e&&s?e?this.addClass(t):this.removeClass(t):(a=xe(t),this.each(function(){if(s)for(n=x(this),r=0;r<a.length;r++)i=a[r],n.hasClass(i)?n.removeClass(i):n.addClass(i);else void 0!==t&&"boolean"!==o||((i=ye(this))&&ot.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===t?"":ot.get(this,"__className__")||""))}))},hasClass:function(t){var e,a,i=0;for(e=" "+t+" ";a=this[i++];)if(1===a.nodeType&&(" "+Ie(ye(a))+" ").indexOf(e)>-1)return!0;return!1}});var we=/\r/g;x.fn.extend({val:function(t){var e,a,i,r=this[0];return arguments.length?(i=D(t),this.each(function(a){var r;1===this.nodeType&&(null==(r=i?t.call(this,a,x(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=x.map(r,function(t){return null==t?"":t+""})),(e=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=x.valHooks[r.type]||x.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(a=e.get(r,"value"))?a:"string"==typeof(a=r.value)?a.replace(we,""):null==a?"":a:void 0}}),x.extend({valHooks:{option:{get:function(t){var e=x.find.attr(t,"value");return null!=e?e:Ie(x.text(t))}},select:{get:function(t){var e,a,i,r=t.options,n=t.selectedIndex,o="select-one"===t.type,s=o?null:[],h=o?n+1:r.length;for(i=n<0?h:o?n:0;i<h;i++)if(((a=r[i]).selected||i===n)&&!a.disabled&&(!a.parentNode.disabled||!F(a.parentNode,"optgroup"))){if(e=x(a).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var a,i,r=t.options,n=x.makeArray(e),o=r.length;o--;)((i=r[o]).selected=x.inArray(x.valHooks.option.get(i),n)>-1)&&(a=!0);return a||(t.selectedIndex=-1),n}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=x.inArray(x(t).val(),e)>-1}},m.checkOn||(x.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Fe=a.location,Ee={guid:Date.now()},be=/\?/;x.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{e=(new a.DOMParser).parseFromString(t,"text/xml")}catch(t){}return i=e&&e.getElementsByTagName("parsererror")[0],e&&!i||x.error("Invalid XML: "+(i?x.map(i.childNodes,function(t){return t.textContent}).join("\n"):t)),e};var Le=/^(?:focusinfocus|focusoutblur)$/,Me=function(t){t.stopPropagation()};x.extend(x.event,{trigger:function(t,e,i,r){var n,o,s,h,l,u,c,f,C=[i||g],p=d.call(t,"type")?t.type:t,m=d.call(t,"namespace")?t.namespace.split("."):[];if(o=f=s=i=i||g,3!==i.nodeType&&8!==i.nodeType&&!Le.test(p+x.event.triggered)&&(p.indexOf(".")>-1&&(p=(m=p.split(".")).shift(),m.sort()),l=p.indexOf(":")<0&&"on"+p,(t=t[x.expando]?t:new x.Event(p,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:x.makeArray(e,[t]),c=x.event.special[p]||{},r||!c.trigger||!1!==c.trigger.apply(i,e))){if(!r&&!c.noBubble&&!v(i)){for(h=c.delegateType||p,Le.test(h+p)||(o=o.parentNode);o;o=o.parentNode)C.push(o),s=o;s===(i.ownerDocument||g)&&C.push(s.defaultView||s.parentWindow||a)}for(n=0;(o=C[n++])&&!t.isPropagationStopped();)f=o,t.type=n>1?h:c.bindType||p,(u=(ot.get(o,"events")||Object.create(null))[t.type]&&ot.get(o,"handle"))&&u.apply(o,e),(u=l&&o[l])&&u.apply&&rt(o)&&(t.result=u.apply(o,e),!1===t.result&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(C.pop(),e)||!rt(i)||l&&D(i[p])&&!v(i)&&((s=i[l])&&(i[l]=null),x.event.triggered=p,t.isPropagationStopped()&&f.addEventListener(p,Me),i[p](),t.isPropagationStopped()&&f.removeEventListener(p,Me),x.event.triggered=void 0,s&&(i[l]=s)),t.result}},simulate:function(t,e,a){var i=x.extend(new x.Event,a,{type:t,isSimulated:!0});x.event.trigger(i,null,e)}}),x.fn.extend({trigger:function(t,e){return this.each(function(){x.event.trigger(t,e,this)})},triggerHandler:function(t,e){var a=this[0];if(a)return x.event.trigger(t,e,a,!0)}});var Ae=/\[\]$/,Oe=/\r?\n/g,Ne=/^(?:submit|button|image|reset|file)$/i,Pe=/^(?:input|select|textarea|keygen)/i;function Re(t,e,a,i){var r;if(Array.isArray(e))x.each(e,function(e,r){a||Ae.test(t)?i(t,r):Re(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,a,i)});else if(a||"object"!==I(e))i(t,e);else for(r in e)Re(t+"["+r+"]",e[r],a,i)}x.param=function(t,e){var a,i=[],r=function(t,e){var a=D(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==a?"":a)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!x.isPlainObject(t))x.each(t,function(){r(this.name,this.value)});else for(a in t)Re(a,t[a],e,r);return i.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=x.prop(this,"elements");return t?x.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!x(this).is(":disabled")&&Pe.test(this.nodeName)&&!Ne.test(t)&&(this.checked||!It.test(t))}).map(function(t,e){var a=x(this).val();return null==a?null:Array.isArray(a)?x.map(a,function(t){return{name:e.name,value:t.replace(Oe,"\r\n")}}):{name:e.name,value:a.replace(Oe,"\r\n")}}).get()}});var _e=/%20/g,Be=/#.*$/,ke=/([?&])_=[^&]*/,Ge=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ve=/^(?:GET|HEAD)$/,He=/^\/\//,Ye={},Xe={},We="*/".concat("*"),Ue=g.createElement("a");function Ke(t){return function(e,a){"string"!=typeof e&&(a=e,e="*");var i,r=0,n=e.toLowerCase().match(K)||[];if(D(a))for(;i=n[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(a)):(t[i]=t[i]||[]).push(a)}}function ze(t,e,a,i){var r={},n=t===Xe;function o(s){var h;return r[s]=!0,x.each(t[s]||[],function(t,s){var l=s(e,a,i);return"string"!=typeof l||n||r[l]?n?!(h=l):void 0:(e.dataTypes.unshift(l),o(l),!1)}),h}return o(e.dataTypes[0])||!r["*"]&&o("*")}function Je(t,e){var a,i,r=x.ajaxSettings.flatOptions||{};for(a in e)void 0!==e[a]&&((r[a]?t:i||(i={}))[a]=e[a]);return i&&x.extend(!0,t,i),t}Ue.href=Fe.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fe.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Fe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":We,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Je(Je(t,x.ajaxSettings),e):Je(x.ajaxSettings,t)},ajaxPrefilter:Ke(Ye),ajaxTransport:Ke(Xe),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,n,o,s,h,l,u,c,f,d=x.ajaxSetup({},e),C=d.context||d,p=d.context&&(C.nodeType||C.jquery)?x(C):x.event,m=x.Deferred(),D=x.Callbacks("once memory"),v=d.statusCode||{},S={},T={},I="canceled",y={readyState:0,getResponseHeader:function(t){var e;if(l){if(!o)for(o={};e=Ge.exec(n);)o[e[1].toLowerCase()+" "]=(o[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=o[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?n:null},setRequestHeader:function(t,e){return null==l&&(t=T[t.toLowerCase()]=T[t.toLowerCase()]||t,S[t]=e),this},overrideMimeType:function(t){return null==l&&(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)y.always(t[y.status]);else for(e in t)v[e]=[v[e],t[e]];return this},abort:function(t){var e=t||I;return i&&i.abort(e),w(0,e),this}};if(m.promise(y),d.url=((t||d.url||Fe.href)+"").replace(He,Fe.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(K)||[""],null==d.crossDomain){h=g.createElement("a");try{h.href=d.url,h.href=h.href,d.crossDomain=Ue.protocol+"//"+Ue.host!=h.protocol+"//"+h.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=x.param(d.data,d.traditional)),ze(Ye,d,e,y),l)return y;for(c in(u=x.event&&d.global)&&0==x.active++&&x.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Ve.test(d.type),r=d.url.replace(Be,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(_e,"+")):(f=d.url.slice(r.length),d.data&&(d.processData||"string"==typeof d.data)&&(r+=(be.test(r)?"&":"?")+d.data,delete d.data),!1===d.cache&&(r=r.replace(ke,"$1"),f=(be.test(r)?"&":"?")+"_="+Ee.guid+++f),d.url=r+f),d.ifModified&&(x.lastModified[r]&&y.setRequestHeader("If-Modified-Since",x.lastModified[r]),x.etag[r]&&y.setRequestHeader("If-None-Match",x.etag[r])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&y.setRequestHeader("Content-Type",d.contentType),y.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+We+"; q=0.01":""):d.accepts["*"]),d.headers)y.setRequestHeader(c,d.headers[c]);if(d.beforeSend&&(!1===d.beforeSend.call(C,y,d)||l))return y.abort();if(I="abort",D.add(d.complete),y.done(d.success),y.fail(d.error),i=ze(Xe,d,e,y)){if(y.readyState=1,u&&p.trigger("ajaxSend",[y,d]),l)return y;d.async&&d.timeout>0&&(s=a.setTimeout(function(){y.abort("timeout")},d.timeout));try{l=!1,i.send(S,w)}catch(t){if(l)throw t;w(-1,t)}}else w(-1,"No Transport");function w(t,e,o,h){var c,f,g,S,T,I=e;l||(l=!0,s&&a.clearTimeout(s),i=void 0,n=h||"",y.readyState=t>0?4:0,c=t>=200&&t<300||304===t,o&&(S=function(t,e,a){for(var i,r,n,o,s=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){h.unshift(r);break}if(h[0]in a)n=h[0];else{for(r in a){if(!h[0]||t.converters[r+" "+h[0]]){n=r;break}o||(o=r)}n=n||o}if(n)return n!==h[0]&&h.unshift(n),a[n]}(d,y,o)),!c&&x.inArray("script",d.dataTypes)>-1&&x.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),S=function(t,e,a,i){var r,n,o,s,h,l={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)l[o.toLowerCase()]=t.converters[o];for(n=u.shift();n;)if(t.responseFields[n]&&(a[t.responseFields[n]]=e),!h&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),h=n,n=u.shift())if("*"===n)n=h;else if("*"!==h&&h!==n){if(!(o=l[h+" "+n]||l["* "+n]))for(r in l)if((s=r.split(" "))[1]===n&&(o=l[h+" "+s[0]]||l["* "+s[0]])){!0===o?o=l[r]:!0!==l[r]&&(n=s[0],u.unshift(s[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+h+" to "+n}}}return{state:"success",data:e}}(d,S,y,c),c?(d.ifModified&&((T=y.getResponseHeader("Last-Modified"))&&(x.lastModified[r]=T),(T=y.getResponseHeader("etag"))&&(x.etag[r]=T)),204===t||"HEAD"===d.type?I="nocontent":304===t?I="notmodified":(I=S.state,f=S.data,c=!(g=S.error))):(g=I,!t&&I||(I="error",t<0&&(t=0))),y.status=t,y.statusText=(e||I)+"",c?m.resolveWith(C,[f,I,y]):m.rejectWith(C,[y,I,g]),y.statusCode(v),v=void 0,u&&p.trigger(c?"ajaxSuccess":"ajaxError",[y,d,c?f:g]),D.fireWith(C,[y,I]),u&&(p.trigger("ajaxComplete",[y,d]),--x.active||x.event.trigger("ajaxStop")))}return y},getJSON:function(t,e,a){return x.get(t,e,a,"json")},getScript:function(t,e){return x.get(t,void 0,e,"script")}}),x.each(["get","post"],function(t,e){x[e]=function(t,a,i,r){return D(a)&&(r=r||i,i=a,a=void 0),x.ajax(x.extend({url:t,type:e,dataType:r,data:a,success:i},x.isPlainObject(t)&&t))}}),x.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),x._evalUrl=function(t,e,a){return x.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){x.globalEval(t,e,a)}})},x.fn.extend({wrapAll:function(t){var e;return this[0]&&(D(t)&&(t=t.call(this[0])),e=x(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return D(t)?this.each(function(e){x(this).wrapInner(t.call(this,e))}):this.each(function(){var e=x(this),a=e.contents();a.length?a.wrapAll(t):e.append(t)})},wrap:function(t){var e=D(t);return this.each(function(a){x(this).wrapAll(e?t.call(this,a):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(t){return!x.expr.pseudos.visible(t)},x.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(t){}};var je={0:200,1223:204},qe=x.ajaxSettings.xhr();m.cors=!!qe&&"withCredentials"in qe,m.ajax=qe=!!qe,x.ajaxTransport(function(t){var e,i;if(m.cors||qe&&!t.crossDomain)return{send:function(r,n){var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];for(o in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(o,r[o]);e=function(t){return function(){e&&(e=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?n(0,"error"):n(s.status,s.statusText):n(je[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),i=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&a.setTimeout(function(){e&&i()})},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),x.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return x.globalEval(t),t}}}),x.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),x.ajaxTransport("script",function(t){var e,a;if(t.crossDomain||t.scriptAttrs)return{send:function(i,r){e=x("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",a=function(t){e.remove(),a=null,t&&r("error"===t.type?404:200,t.type)}),g.head.appendChild(e[0])},abort:function(){a&&a()}}});var Ze=[],Qe=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ze.pop()||x.expando+"_"+Ee.guid++;return this[t]=!0,t}}),x.ajaxPrefilter("json jsonp",function(t,e,i){var r,n,o,s=!1!==t.jsonp&&(Qe.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qe.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=D(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Qe,"$1"+r):!1!==t.jsonp&&(t.url+=(be.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||x.error(r+" was not called"),o[0]},t.dataTypes[0]="json",n=a[r],a[r]=function(){o=arguments},i.always(function(){void 0===n?x(a).removeProp(r):a[r]=n,t[r]&&(t.jsonpCallback=e.jsonpCallback,Ze.push(r)),o&&D(n)&&n(o[0]),o=n=void 0}),"script"}),m.createHTMLDocument=function(){var t=g.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),x.parseHTML=function(t,e,a){return"string"!=typeof t?[]:("boolean"==typeof e&&(a=e,e=!1),e||(m.createHTMLDocument?((i=(e=g.implementation.createHTMLDocument("")).createElement("base")).href=g.location.href,e.head.appendChild(i)):e=g),r=G.exec(t),n=!a&&[],r?[e.createElement(r[1])]:(r=Lt([t],e,n),n&&n.length&&x(n).remove(),x.merge([],r.childNodes)));var i,r,n},x.fn.load=function(t,e,a){var i,r,n,o=this,s=t.indexOf(" ");return s>-1&&(i=Ie(t.slice(s)),t=t.slice(0,s)),D(e)?(a=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&x.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){n=arguments,o.html(i?x("<div>").append(x.parseHTML(t)).find(i):t)}).always(a&&function(t,e){o.each(function(){a.apply(this,n||[t.responseText,e,t])})}),this},x.expr.pseudos.animated=function(t){return x.grep(x.timers,function(e){return t===e.elem}).length},x.offset={setOffset:function(t,e,a){var i,r,n,o,s,h,l=x.css(t,"position"),u=x(t),c={};"static"===l&&(t.style.position="relative"),s=u.offset(),n=x.css(t,"top"),h=x.css(t,"left"),("absolute"===l||"fixed"===l)&&(n+h).indexOf("auto")>-1?(o=(i=u.position()).top,r=i.left):(o=parseFloat(n)||0,r=parseFloat(h)||0),D(e)&&(e=e.call(t,a,x.extend({},s))),null!=e.top&&(c.top=e.top-s.top+o),null!=e.left&&(c.left=e.left-s.left+r),"using"in e?e.using.call(t,c):u.css(c)}},x.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){x.offset.setOffset(this,t,e)});var e,a,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),a=i.ownerDocument.defaultView,{top:e.top+a.pageYOffset,left:e.left+a.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,a,i=this[0],r={top:0,left:0};if("fixed"===x.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),a=i.ownerDocument,t=i.offsetParent||a.documentElement;t&&(t===a.body||t===a.documentElement)&&"static"===x.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=x(t).offset()).top+=x.css(t,"borderTopWidth",!0),r.left+=x.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-x.css(i,"marginTop",!0),left:e.left-r.left-x.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===x.css(t,"position");)t=t.offsetParent;return t||Ct})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var a="pageYOffset"===e;x.fn[t]=function(i){return $(this,function(t,i,r){var n;if(v(t)?n=t:9===t.nodeType&&(n=t.defaultView),void 0===r)return n?n[e]:t[i];n?n.scrollTo(a?n.pageXOffset:r,a?r:n.pageYOffset):t[i]=r},t,i,arguments.length)}}),x.each(["top","left"],function(t,e){x.cssHooks[e]=Zt(m.pixelPosition,function(t,a){if(a)return a=qt(t,e),Ut.test(a)?x(t).position()[e]+"px":a})}),x.each({Height:"height",Width:"width"},function(t,e){x.each({padding:"inner"+t,content:e,"":"outer"+t},function(a,i){x.fn[i]=function(r,n){var o=arguments.length&&(a||"boolean"!=typeof r),s=a||(!0===r||!0===n?"margin":"border");return $(this,function(e,a,r){var n;return v(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+t],n["scroll"+t],e.body["offset"+t],n["offset"+t],n["client"+t])):void 0===r?x.css(e,a,s):x.style(e,a,r,s)},e,o?r:void 0,o)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){x.fn[e]=function(t){return this.on(e,t)}}),x.fn.extend({bind:function(t,e,a){return this.on(t,null,e,a)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,a,i){return this.on(e,t,a,i)},undelegate:function(t,e,a){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",a)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){x.fn[e]=function(t,a){return arguments.length>0?this.on(e,null,t,a):this.trigger(e)}});var $e=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(t,e){var a,i,r;if("string"==typeof e&&(a=t[e],e=t,t=a),D(t))return i=s.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(s.call(arguments)))}).guid=t.guid=t.guid||x.guid++,r},x.holdReady=function(t){t?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=F,x.isFunction=D,x.isWindow=v,x.camelCase=it,x.type=I,x.now=Date.now,x.isNumeric=function(t){var e=x.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},x.trim=function(t){return null==t?"":(t+"").replace($e,"$1")},void 0===(i=function(){return x}.apply(e,[]))||(t.exports=i);var ta=a.jQuery,ea=a.$;return x.noConflict=function(t){return a.$===x&&(a.$=ea),t&&a.jQuery===x&&(a.jQuery=ta),x},void 0===r&&(a.jQuery=a.$=x),x})},Ez2D:function(t,e,a){var i=a("bYtY"),r=a("4NO4");t.exports=function(t,e){var a,n=[],o=t.seriesIndex;if(null==o||!(a=e.getSeriesByIndex(o)))return{point:[]};var s=a.getData(),h=r.queryDataIndex(s,t);if(null==h||h<0||i.isArray(h))return{point:[]};var l=s.getItemGraphicEl(h),u=a.coordinateSystem;if(a.getTooltipPosition)n=a.getTooltipPosition(h)||[];else if(u&&u.dataToPoint)n=u.dataToPoint(s.getValues(i.map(u.dimensions,function(t){return s.mapDimension(t)}),h,!0))||[];else if(l){var c=l.getBoundingRect().clone();c.applyTransform(l.transform),n=[c.x+c.width/2,c.y+c.height/2]}return{point:n,el:l}}},"F+2o":function(t,e,a){t.exports={default:a("UR8F"),__esModule:!0}},F7hV:function(t,e,a){var i=a("MBQ8").extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>t&&(t=e),t},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});t.exports=i},"F9+3":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=l(a("YEIV")),n=l(a("FyfS")),o=l(a("ODRq")),s=l(a("jWXv")),h=l(a("EVdn"));function l(t){return t&&t.__esModule?t:{default:t}}var u=new function(){this.Domain="https://opensource.zealink.com",this.CacheDomain="https://opensourcecache.zealink.com"};function c(){this.SuperIn,this.SuperOut,this.BigIn,this.BigOut,this.MidIn,this.MidOut,this.SmallIn,this.SmallOut,this.MainIn,this.MainOut,this.MainNetIn,this.MainNetInRatio,this.SetData=function(t){this.SuperIn=t.superin,this.SuperOut=t.superout,this.BigIn=t.bigin,this.BigOut=t.bigout,this.MidIn=t.midin,this.MidOut=t.midout,this.SmallIn=t.smallin,this.SmallOut=t.smallout,this.MainIn=t.mainin,this.MainOut=t.mainout,this.MainNetIn=t.mainnetin,this.MainNetInRatio=t.mainnetinratio}}function f(){this.DDX,this.DDY,this.DDZ,this.SetData=function(t){this.DDX=t.ddx,this.DDY=t.ddy,this.DDZ=t.ddz}}function d(t){var e=t.toUpperCase();if(e.indexOf(".SH")>0){if("0"==(e=e.replace(".SH","")).charAt(0)&&parseInt(e)<=3e3)return!0}else if(e.indexOf(".SZ")>0){if("3"==(e=e.replace(".SZ","")).charAt(0)&&"9"==e.charAt(1))return!0}else if(e.indexOf(".CI")>0)return!0;return!1}function C(t){this.Symbol=t,this.Name,this.Open,this.Price,this.High,this.Low,this.YClose,this.Vol,this.Amount,this.Date,this.Time,this.ExchangeRate,this.Amplitude,this.VolRatio,this.Increase,this.MaxPrice,this.MinPrice,this.RFPrice,this.IndexTop,this.Week,this.MinuteAmplitude={},this.RiseFallSpeed={},this.MAmount={},this.GetBaseData=function(t,e){switch(this.BaseDataTagID.add(t),e){case p.SYMBOL:return this.Symbol;case p.NAME:return this.Name;case p.OPEN:return this.Open;case p.PRICE:return this.Price;case p.YCLOSE:return this.YClose;case p.HIGH:return this.High;case p.LOW:return this.Low;case p.VOL:return this.Vol;case p.AMOUNT:return this.Amount;case p.DATE:return this.Date;case p.TIME:return this.Time;case p.INCREASE:return this.Increase;case p.EXCHANGE_RATE:return this.ExchangeRate;case p.AMPLITUDE:return this.Amplitude;case p.MAX_PRICE:return this.MaxPrice;case p.MIN_PRICE:return this.MinPrice;case p.RISE_FALL_PRICE:return this.RFPrice;case p.VOLRATIO:return this.VolRatio;case p.INDEXTOP:return this.IndexTop;case p.WEEK:return this.Week}},this.Heat,this.GetHeatData=function(t){return this.HeatTagID.add(t),this.Heat},this.Sort=new o.default,this.GetSortData=function(t,e,a){var i=e.toString()+"-"+a.toString();if(!this.Sort.has(i)){var r=new function(t,e,a){this.arySymbol=new Array,this.SortField=t,this.Order=e,this.TagID=new s.default([a])}(e,a,t);return this.Sort.set(i,r),r}return(r=this.Sort.get(i)).TagID.add(t),r},this.Buy5,this.GetBuy5=function(t){return this.BuySellTagID.add(t),this.Buy5},this.Sell5,this.GetSell5=function(t){return this.BuySellTagID.add(t),this.Sell5},this.Deal,this.GetDeal=function(t){return this.DealTagID.add(t),this.Deal},this.MarketValue,this.FlowMarketValue,this.Bookrate,this.Bookdiffer,this.PE,this.PE2,this.PE3,this.PB,this.GetDerivative=function(t,e){switch(this.DerivativeTagID.add(t),e){case p.MARKET_VALUE:return this.MarketValue;case p.FLOW_MARKET_VALUE:return this.FlowMarketValue;case p.BOOK_RATE:return this.Bookrate;case p.BOOK_DIFFER:return this.Bookdiffer;case p.PE:return this.PE;case p.PE2:return this.PE2;case p.PE3:return this.PE3;case p.PB:return this.PB}},this.Finance,this.GetFinance=function(t,e){if(!this.Finance)return this.FinanceTagID.add(t),null;switch(e){case p.ROE:return this.Finance.ROE;case p.FINANCE_DATE:return this.Finance.Date;case p.FINANCE_PERSEARNING:return this.Finance.PerSEarning;case p.FINANCE_PERNETASSET:return this.Finance.PerNetAsset;case p.FINANCE_NPROFIT:return this.Finance.NProfit;case p.FINANCE_NPROFITINCREASE:return this.Finance.NProfitIncrease;case p.FINANCE_NNETPROFIT:return this.Finance.NnetProfit;case p.FINANCE_NNPROFITINCREASE:return this.Finance.NnProfitIncrease;case p.FINANCE_NNPROFITSPEED:return this.Finance.NnProfitSpeed;case p.FINANCE_EPS:return this.Finance.EPS;case p.FINANCE_BENFORD:return this.Finance.Benford}},this.Capital,this.GetCapital=function(t,e){if(!this.Capital)return this.CapitalTagID.add(t),null;switch(e){case p.CAPITAL_TOTAL:return this.Capital.Total;case p.CAPITAL_A:return this.Capital.A;case p.CAPTIAL_ARATE:return this.Capital.ARate}},this.CapitalFlowDay,this.CapitalFlowDay3,this.CapitalFlowDay5,this.CapitalFlowDay10,this.GetCapitalFlowDay=function(t,e){var a=null;switch(e){case p.CAPITAL_FLOW_DAY:this.CapitalFlowDayID.add(t),this.CapitalFlowDay&&(a=this.CapitalFlowDay);break;case p.CAPITAL_FLOW_DAY3:this.CapitalFlowDay3ID.add(t),this.CapitalFlowDay3&&(a=this.CapitalFlowDay3);break;case p.CAPITAL_FLOW_DAY5:this.CapitalFlowDay5ID.add(t),this.CapitalFlowDay5&&(a=this.CapitalFlowDay5);break;case p.CAPITAL_FLOW_DAY10:this.CapitalFlowDay10ID.add(t),this.CapitalFlowDay10&&(a=this.CapitalFlowDay10)}return a},this.DDE,this.DDE3,this.DDE5,this.DDE10,this.GetDDE=function(t,e){var a=null;switch(e){case p.DDE:this.DDEID.add(t),this.DDE&&(a=this.DDE);break;case p.DDE3:this.DDE3ID.add(t),this.DDE3&&(a=this.DDE3);break;case p.DDE5:this.DDE5ID.add(t),this.DDE5&&(a=this.DDE5);break;case p.DDE10:this.DDE10ID.add(t),this.DDE10&&(a=this.DDE10)}return a},this.Event,this.GetEvent=function(t,e){return this.Event?this.Event:(this.EventTagID.add(t),null)},this.Company,this.GetCompany=function(t,e){if(!this.Company)return this.CompanyTagID.add(t),null;switch(e){case p.COMPANY_NAME:return this.Company.Name;case p.COMPANY_BUSINESS:return this.Company.Business;case p.COMPANY_VOL:return this.Company.Vol;case p.COMPANY_PRICE:return this.Company.Price;case p.COMPANY_RELEASEDATE:return this.Company.ReleaseDate;case p.COMPANY_COMPETENCE:return this.Company.Competence}},this.Plate,this.GetPlate=function(t,e){if(!this.Plate)return this.PlateTagID.add(t),null;switch(e){case p.PLATE_INDUSTRY:return this.Plate.Industry;case p.PLATE_CONCEPT:return this.Plate.Concept;case p.PLATE_REGION:return this.Plate.Region}},this.TagID=new s.default,this.BaseDataTagID=new s.default,this.HeatTagID=new s.default,this.BuySellTagID=new s.default,this.DealTagID=new s.default,this.DerivativeTagID=new s.default,this.FinanceTagID=new s.default,this.CapitalTagID=new s.default,this.CapitalFlowDayID=new s.default,this.CapitalFlowDay3ID=new s.default,this.CapitalFlowDay5ID=new s.default,this.CapitalFlowDay10ID=new s.default,this.DDEID=new s.default,this.DDE3ID=new s.default,this.DDE5ID=new s.default,this.DDE10ID=new s.default,this.EventTagID=new s.default,this.CompanyTagID=new s.default,this.PlateTagID=new s.default,this.AttachTagID=function(t){this.TagID.add(t)},this.ClearTagID=function(){this.TagID.clear(),this.BaseDataTagID.clear(),this.HeatTagID.clear(),this.BuySellTagID.clear(),this.DealTagID.clear(),this.DerivativeTagID.clear(),this.FinanceTagID.clear(),this.CapitalTagID.clear(),this.CapitalFlowDayID.clear(),this.CapitalFlowDay3ID.clear(),this.CapitalFlowDay5ID.clear(),this.CapitalFlowDay10ID.clear(),this.DDEID.clear(),this.DDE3ID.clear(),this.DDE5ID.clear(),this.DDE10ID.clear(),this.EventTagID.clear(),this.CompanyTagID.clear();var t=!0,e=!1,a=void 0;try{for(var i,r=(0,n.default)(this.Sort);!(t=(i=r.next()).done);t=!0){i.value[1].TagID.clear()}}catch(t){e=!0,a=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw a}}},this.RemoveTagID=function(t){this.TagID.delete(t),this.BaseDataTagID.delete(t),this.HeatTagID.delete(t),this.BuySellTagID.delete(t),this.DealTagID.delete(t),this.DerivativeTagID.delete(t),this.FinanceTagID.delete(t),this.CapitalTagID.delete(t),this.CapitalFlowDayID.delete(t),this.CapitalFlowDay3ID.delete(t),this.CapitalFlowDay5ID.delete(t),this.CapitalFlowDay10ID.delete(t),this.DDEID.delete(t),this.DDE3ID.delete(t),this.DDE5ID.delete(t),this.DDE10ID.delete(t),this.EventTagID.delete(t),this.CompanyTagID.delete(t);var e=!0,a=!1,i=void 0;try{for(var r,o=(0,n.default)(this.Sort);!(e=(r=o.next()).done);e=!0){r.value[1].TagID.delete(t)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}},this.SetBaseData=function(t){this.Name=t.name,this.YClose=t.yclose,this.Price=t.price,this.High=t.high,this.Low=t.low,this.Open=t.open,this.Vol=t.vol,this.Amount=t.amount,this.Date=t.date,this.Time=t.time,this.Increase=t.increase,isNaN(t.exchangerate)||(this.ExchangeRate=t.exchangerate),isNaN(t.amplitude)||(this.Amplitude=t.amplitude),isNaN(t.volratio)||(this.VolRatio=t.volratio),this.Name.indexOf("ST")>=0?(this.MaxPrice=1.05*this.Open,this.MinPrice=.95*this.Open):(this.MaxPrice=1.1*this.Open,this.MinPrice=.9*this.Open),this.Price&&this.YClose&&(this.RFPrice=this.Price-this.YClose),t.week&&(this.Week={},this.Week.Week1=t.week.week1,this.Week.Week4=t.week.week4,this.Week.Week13=t.week.week13,this.Week.Week26=t.week.week26,this.Week.Week52=t.week.week52)},this.SetDerivativeData=function(t){this.MarketValue=t.marketvalue,this.FlowMarketValue=t.flowmarketvalue,this.Bookrate=t.bookrate,this.Bookdiffer=t.bookdiffer,this.PE=t.pe,this.PE2=t.pe2,this.PE3=t.pe3,this.PB=t.pb},this.SetFinanceData=function(t){console.log(t),t.finance&&(this.Finance=new function(){this.ROE,this.Date,this.PerSEarning,this.EPS,this.PerNetAsset,this.NProfit,this.NProfitIncrease,this.NnetProfit,this.NnProfitIncrease,this.NnProfitSpeed,this.Benford,this.SetData=function(t){isNaN(t.roe)||(this.ROE=t.roe),isNaN(t.finance.date)||(this.Date=t.finance.date),isNaN(t.finance.persearning)||(this.PerSEarning=t.finance.persearning),isNaN(t.finance.eps)||(this.EPS=t.finance.eps),isNaN(t.finance.pernetasset)||(this.PerNetAsset=t.finance.pernetasset),isNaN(t.finance.nprofit)||(this.NProfit=t.finance.nprofit),isNaN(t.finance.nprofitincrease)||(this.NProfitIncrease=t.finance.nprofitincrease),isNaN(t.finance.nnetprofit)||(this.NnetProfit=t.finance.nnetprofit),isNaN(t.finance.nnprofitincrease)||(this.NnProfitIncrease=t.finance.nnprofitincrease),isNaN(t.finance.nnprofitspeed)||(this.NnProfitSpeed=t.finance.nnprofitspeed),isNaN(t.finance.benford)||(this.Benford=t.finance.benford)}},this.Finance.SetData(t))},this.SetCapitalData=function(t){t.capital&&(this.Capital=new function(){this.Date,this.A,this.Total,this.ARate,this.SetData=function(t){isNaN(t.capital.date)||(this.Date=t.capital.date),isNaN(t.capital.a)||(this.A=t.capital.a),isNaN(t.capital.total)||(this.Total=t.capital.total),isNaN(t.capital.arate)||(this.ARate=t.capital.arate)}},this.Capital.SetData(t))},this.SetIndexBaseData=function(t){this.SetBaseData(t);var e=new function(){this.Stop,this.Down,this.Up,this.Unchanged,this.UpStock={Symbol:null,Name:null},this.DownStock={Symbol:null,Name:null}};t.indextop&&(e.Up=t.indextop.up,e.Down=t.indextop.down,e.Unchanged=t.indextop.unchanged,e.Stop=t.indextop.stop,e.UpStock.Symbol=t.indextop.upstock.symbol,e.UpStock.Name=t.indextop.upstock.name,e.DownStock.Symbol=t.indextop.downstock.symbol,e.DownStock.Name=t.indextop.downstock.name),this.IndexTop=e},this.SetBuySellData=function(t){for(var e in this.SetBaseData(t),this.Buy5=new Array,this.Sell5=new Array,t.buy){var a=t.buy[e];this.Buy5.push({Price:a.price,Vol:a.vol})}for(var e in t.sell){a=t.sell[e];this.Sell5.push({Price:a.price,Vol:a.vol})}},this.SetDealData=function(t){for(var e in this.Price=t.price,this.High=t.high,this.Low=t.low,this.Vol=t.vol,this.Amount=t.amount,this.Date=t.date,this.Time=t.time,this.Increase=t.increase,this.Deal=new Array,t.deal){var a=t.deal[e];if(!isNaN(a.price)&&!isNaN(a.time)){var i="";0===a.bs?i="B":1===a.bs&&(i="S"),this.Deal.push({Price:a.price,Amount:a.amount,Vol:a.vol,Time:a.time,BS:i})}}},this.SetHeatData=function(t){var e=new function(){this.Good,this.GoodIncrease={Day1:null,Week1:null,Week4:null}};e.Good=t.quadrant.good,e.GoodIncrease.Day1=t.quadrant.gincrease.day1,e.GoodIncrease.Week1=t.quadrant.gincrease.week1,e.GoodIncrease.Week4=t.quadrant.gincrease.week4,this.Heat=e},this.SetCapitalFlowDayData=function(t,e){if(t)switch(e){case v.CAPITAL_FLOW_DAY_DATA:this.CapitalFlowDay=new function(){this.SuperIn,this.SuperOut,this.BigIn,this.BigOut,this.MidIn,this.MidOut,this.SmallIn,this.SmallOut,this.MainIn,this.MainOut,this.MainNetIn,this.SetData=function(t){this.SuperIn=t.superin,this.SuperOut=t.superout,this.BigIn=t.bigin,this.BigOut=t.bigout,this.MidIn=t.midin,this.MidOut=t.midout,this.SmallIn=t.smallin,this.SmallOut=t.smallout,this.MainIn=t.mainin,this.MainOut=t.mainout,this.MainNetIn=t.mainnetin}},this.CapitalFlowDay.SetData(t);break;case v.CAPITAL_FLOW_DAY3_DATA:this.CapitalFlowDay3=new c,this.CapitalFlowDay3.SetData(t);break;case v.CAPITAL_FLOW_DAY5_DATA:this.CapitalFlowDay5=new c,this.CapitalFlowDay5.SetData(t);break;case v.CAPITAL_FLOW_DAY10_DATA:this.CapitalFlowDay10=new c,this.CapitalFlowDay10.SetData(t)}},this.SetDDE=function(t,e){if(t){switch(e){case v.DDE_DAY_DATA:this.DDE=new f,this.DDE.SetData(t);break;case v.DDE_DAY3_DATA:this.DDE3=new f,this.DDE3.SetData(t);break;case v.DDE_DAY5_DATA:this.DDE5=new f,this.DDE5.SetData(t);break;case v.DDE_DAY10_DATA:this.DDE10=new f,this.DDE10.SetData(t)}return t}},this.SetEventData=function(t){t.events&&(this.Event=new function(){this.IsMargin=!1,this.IsHK=!1,this.IsSHHK=!1,this.IsSZHK=!1,this.STType=0,this.HK,this.SetData=function(t){t.events&&(isNaN(t.events.margin)||(this.IsMargin=1==t.events.margin),isNaN(t.events.hk)||(this.IsHK=1==t.events.hk),isNaN(t.events.shhk)||(this.IsSHHK=1==t.events.shhk),isNaN(t.events.szhk)||(this.IsSZHK=1==t.events.szhk),isNaN(t.events.st)||(this.STType=t.events.st),this.IsHK&&t.events.hksymbol&&t.events.hkname&&(this.HK={Symbol:t.events.hksymbol,Name:t.events.hkname}))}},this.Event.SetData(t))},this.SetCompanyData=function(t){t.company&&(this.Company=new function(){this.Name,this.Business,this.Vol,this.Price,this.ReleaseDate,this.Competence,this.SetData=function(t){t.company&&(this.Name=t.company.name,this.Business=t.company.business,this.Vol=t.company.vol,this.Price=t.company.price,this.ReleaseDate=t.company.releasedate,this.Competence=t.company.corecompetence)}},this.Company.SetData(t))},this.SetPlateData=function(t){(t.industry||t.region||t.concept)&&(this.Plate=new function(){this.Industry,this.Region,this.Concept,this.SetData=function(t){this.SetIndustryData(t),this.SetRegionData(t),this.SetConceptData(t)},this.SetIndustryData=function(t){if(t.industry)for(var e in this.Industry=[],t.industry){var a=t.industry[e];this.Industry.push({Name:a.name,Symbol:a.symbol})}},this.SetRegionData=function(t){if(t.region)for(var e in this.Region=[],t.region){var a=t.region[e];this.Region.push({Name:a.name,Symbol:a.symbol})}},this.SetConceptData=function(t){if(t.concept)for(var e in this.Concept=[],t.concept){var a=t.concept[e];this.Concept.push({Name:a.name,Symbol:a.symbol})}}},this.Plate.SetData(t))},this.SetData=function(t){t.name&&(this.Name=t.name),isNaN(t.yclose)||(this.YClose=t.yclose),isNaN(t.price)||(this.Price=t.price),isNaN(t.high)||(this.High=t.high),isNaN(t.low)||(this.Low=t.low),isNaN(t.vol)||(this.Vol=t.vol),isNaN(t.amount)||(this.Amount=t.amount),isNaN(t.date)||(this.Date=t.date),isNaN(t.time)||(this.Time=t.time),isNaN(t.increase)||(this.Increase=t.increase),isNaN(t.marketvalue)||(this.MarketValue=t.marketvalue),isNaN(t.flowmarketvalue)||(this.FlowMarketValue=t.flowmarketvalue),isNaN(t.bookrate)||(this.Bookrate=t.bookrate),isNaN(t.bookdiffer)||(this.Bookdiffer=t.bookdiffer),isNaN(t.pe)||(this.PE=t.pe),isNaN(t.pb)||(this.PB=t.pb),t.finance&&this.SetFinanceData(t),t.finance&&this.SetFinanceDetailData(t),t.capital&&this.SetCapitalData(t),t.mamplitude&&(isNaN(t.mamplitude[1])||(this.MinuteAmplitude.M1=t.mamplitude[1]),isNaN(t.mamplitude[3])||(this.MinuteAmplitude.M3=t.mamplitude[3]),isNaN(t.mamplitude[5])||(this.MinuteAmplitude.M5=t.mamplitude[5]),isNaN(t.mamplitude[10])||(this.MinuteAmplitude.M10=t.mamplitude[10]),isNaN(t.mamplitude[15])||(this.MinuteAmplitude.M15=t.mamplitude[15])),t.risefallspeed&&(isNaN(t.risefallspeed[1])||(this.RiseFallSpeed.M1=t.risefallspeed[1]),isNaN(t.risefallspeed[3])||(this.RiseFallSpeed.M3=t.risefallspeed[3]),isNaN(t.risefallspeed[5])||(this.RiseFallSpeed.M5=t.risefallspeed[5]),isNaN(t.risefallspeed[10])||(this.RiseFallSpeed.M10=t.risefallspeed[10]),isNaN(t.risefallspeed[15])||(this.RiseFallSpeed.M15=t.risefallspeed[15])),t.mamount&&(isNaN(t.mamount[1])||(this.MAmount.M1=t.mamount[1]),isNaN(t.mamount[3])||(this.MAmount.M5=t.mamount[3]),isNaN(t.mamount[5])||(this.MAmount.M5=t.mamount[5]),isNaN(t.mamount[10])||(this.MAmount.M10=t.mamount[10]),isNaN(t.mamount[15])||(this.MAmount.M15=t.mamount[15]))}}var p={SYMBOL:0,NAME:1,OPEN:2,PRICE:3,HIGH:4,LOW:5,YCLOSE:6,VOL:7,AMOUNT:8,DATE:9,TIME:10,INCREASE:11,BUY5:12,SELL5:13,DEAL:14,AMPLITUDE:15,MARKET_VALUE:16,FLOW_MARKET_VALUE:17,BOOK_RATE:18,BOOK_DIFFER:19,PE:20,PB:21,EXCHANGE_RATE:23,ROE:24,FINANCE_DATE:25,FINANCE_PERSEARNING:26,FINANCE_PERNETASSET:27,FINANCE_NPROFIT:28,FINANCE_NPROFITINCREASE:29,FINANCE_NNETPROFIT:30,FINANCE_NNPROFITINCREASE:31,FINANCE_NNPROFITSPEED:32,FINANCE_EPS:33,MAX_PRICE:34,MIN_PRICE:35,RISE_FALL_PRICE:36,FINANCE_BENFORD:37,RISEFALLSPEED_1:38,RISEFALLSPEED_3:39,RISEFALLSPEED_5:40,RISEFALLSPEED_10:41,RISEFALLSPEED_15:42,MINUTE_AMPLITUDE_1:43,MINUTE_AMPLITUDE_3:44,MINUTE_AMPLITUDE_5:45,MINUTE_AMPLITUDE_10:46,MINUTE_AMPLITUDE_15:47,MINUTE_AMOUNT_1:48,MINUTE_AMOUNT_3:49,MINUTE_AMOUNT_5:50,MINUTE_AMOUNT_10:51,MINUTE_AMOUNT_15:52,COMPANY_NAME:53,PLATE_INDUSTRY:54,PLATE_CONCEPT:55,PLATE_REGION:56,COMPANY_BUSINESS:57,COMPANY_VOL:58,COMPANY_PRICE:59,COMPANY_RELEASEDATE:60,COMPANY_COMPETENCE:61,CAPITAL_FLOW_DAY:67,CAPITAL_FLOW_DAY3:68,CAPITAL_FLOW_DAY5:69,CAPITAL_FLOW_DAY10:70,DDE:71,DDE3:72,DDE5:73,DDE10:74,EVENTS:75,CAPITAL_A:76,CAPITAL_TOTAL:77,CAPTIAL_ARATE:78,VOLRATIO:79,PE2:80,PE3:81,INDEXTOP:100,WEEK:101,HEAT:102},m={m_mapFiled:new o.default([[p.NAME,"name"],[p.SYMBOL,"symbol"],[p.PRICE,"price"],[p.INCREASE,"increase"],[p.PE,"pe"],[p.FINANCE_BENFORD,"finance.benford"],[p.YCLOSE,"yclose"],[p.RISEFALLSPEED_1,"risefallspeed.1"],[p.RISEFALLSPEED_3,"risefallspeed.3"],[p.RISEFALLSPEED_5,"risefallspeed.5"],[p.RISEFALLSPEED_10,"risefallspeed.10"],[p.RISEFALLSPEED_15,"risefallspeed.15"],[p.MINUTE_AMPLITUDE_1,"mamplitude.1"],[p.MINUTE_AMPLITUDE_3,"mamplitude.3"],[p.MINUTE_AMPLITUDE_5,"mamplitude.5"],[p.MINUTE_AMPLITUDE_10,"mamplitude.10"],[p.MINUTE_AMPLITUDE_15,"mamplitude.15"],[p.MINUTE_AMOUNT_1,"mamount.1"],[p.MINUTE_AMOUNT_3,"mamount.3"],[p.MINUTE_AMOUNT_5,"mamount.5"],[p.MINUTE_AMOUNT_10,"mamount.10"],[p.MINUTE_AMOUNT_15,"mamount.15"]]),GetFieldName:function(t){return this.m_mapFiled.has(t)?this.m_mapFiled.get(t):null}};function D(t,e){this.JSStock=t,this.TagID=e,this.Get=function(e,a){var i=t.Get(e,this.TagID);if(!i)return null;switch(a){case p.SYMBOL:case p.NAME:case p.OPEN:case p.PRICE:case p.YCLOSE:case p.HIGH:case p.LOW:case p.VOL:case p.AMOUNT:case p.DATE:case p.TIME:case p.INCREASE:case p.EXCHANGE_RATE:case p.AMPLITUDE:case p.MAX_PRICE:case p.MIN_PRICE:case p.RISE_FALL_PRICE:case p.INDEXTOP:case p.WEEK:case p.VOLRATIO:return i.GetBaseData(this.TagID,a);case p.HEAT:return i.GetHeatData(this.TagID);case p.BUY5:return i.GetBuy5(this.TagID);case p.SELL5:return i.GetSell5(this.TagID);case p.DEAL:return i.GetDeal(this.TagID);case p.MARKET_VALUE:case p.FLOW_MARKET_VALUE:case p.BOOK_RATE:case p.BOOK_DIFFER:case p.PE:case p.PE2:case p.PE3:case p.PB:return i.GetDerivative(this.TagID,a);case p.ROE:case p.FINANCE_DATE:case p.FINANCE_PERSEARNING:case p.FINANCE_PERNETASSET:case p.FINANCE_NPROFIT:case p.FINANCE_NPROFITINCREASE:case p.FINANCE_NNETPROFIT:case p.FINANCE_NNPROFITINCREASE:case p.FINANCE_NNPROFITSPEED:case p.FINANCE_EPS:case p.FINANCE_BENFORD:return i.GetFinance(this.TagID,a);case p.PLATE_INDUSTRY:case p.PLATE_CONCEPT:case p.PLATE_REGION:return i.GetPlate(this.TagID,a);case p.CAPITAL_FLOW_DAY:case p.CAPITAL_FLOW_DAY3:case p.CAPITAL_FLOW_DAY5:case p.CAPITAL_FLOW_DAY10:return i.GetCapitalFlowDay(this.TagID,a);case p.DDE:case p.DDE3:case p.DDE5:case p.DDE10:return i.GetDDE(this.TagID,a);case p.EVENTS:return i.GetEvent(this.TagID,a);case p.COMPANY_NAME:case p.COMPANY_BUSINESS:case p.COMPANY_VOL:case p.COMPANY_PRICE:case p.COMPANY_RELEASEDATE:case p.COMPANY_COMPETENCE:return i.GetCompany(this.TagID,a);case p.CAPITAL_A:case p.CAPTIAL_ARATE:case p.CAPITAL_TOTAL:return i.GetCapital(this.TagID,a);default:return null}},this.GetSort=function(e,a,i){var r=t.Get(e,this.TagID);return null==r?r:r.GetSortData(this.TagID,a,i)},this.EndRead=function(t){1==t&&this.JSStock.ReqeustData()},this.SetQueryField=function(t,e){for(var a in e)this.Get(t,e[a])}}g.Init=function(){return new g},g.SetDomain=function(t,e){t&&(u.Domain=t),e&&(u.CacheDomain=e)},g.GetSearchStock=function(t){return new function(t){this.SearchStockApiUrl=u.Domain+"/API/StockSpell",this.UpdateUICallback=t,this.PageSize=50,this.Count,this.EndOffset,this.Data=new Array,this.SearchString="",this.SearchType=0,this.Search=function(t,e){if(this.SearchString==t&&this.SearchType==e)"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this);else{this.SearchString=t,this.SearchType=e,this.Count=0,this.EndOffset=0,this.Data=[];var a=this.PageSize-1;this.ReqeustSearchStock(this.SearchString,this.SearchType,this.EndOffset,a)}},this.IsEndPage=function(){return this.Count<=0||this.EndOffset>this.Count-1},this.NextPage=function(){if(!(this.EndOffset+1>this.Count)){var t=this.EndOffset+this.PageSize;this.ReqeustSearchStock(this.SearchString,this.SearchType,this.EndOffset,t)}},this.ReqeustSearchStock=function(t,e,a,i){var r=this;h.default.ajax({url:this.SearchStockApiUrl,data:{input:t,start:a,end:i,type:e},type:"post",dataType:"json",async:!0,success:function(t){r.RecvSearchStockData(t,v.SEARCH_STOCK_DATA)},error:function(t){r.RecvError(t,v.SEARCH_STOCK_DATA)}})},this.RecvSearchStockData=function(t){for(var e in t.stock){var a=t.stock[e];this.Data.push({Name:a.name,Symbol:a.symbol,Type:a.type})}0==t.count?(this.Count=0,this.EndOffset=0):(0==this.Count&&(this.Count=t.count),this.EndOffset=t.end,this.Count>0&&this.EndOffset>this.Count&&(this.EndOffset=this.Count-1)),"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this)},this.RecvError=function(t,e){console.log("[SearchStock::RecvError] datatype="+e.toString()),console.log(t),"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this,"error")}}(t)},g.GetShortTerm=function(t){return new function(t){this.newMethod=S,this.newMethod(),delete this.newMethod,this.Symbol=t,this.ApiUrl=u.Domain+"/API/StockShortTerm",this.Count=20,this.RequestData=function(){var t=this,e={count:this.Count};this.Symbol&&(e.symbol=this.Symbol),h.default.ajax({url:this.ApiUrl,data:e,type:"post",dataType:"json",async:!0,success:function(e){t.RecvData(e,v.SHORT_TERM_DATA)},fail:function(e){t.RecvError(e,v.SHORT_TERM_DATA)}})},this.RecvData=function(t,e){for(var a in this.Data=[],t.shortterm){var i=t.shortterm[a];this.Data.push({Date:i.date,Name:i.name,Symbol:i.symbol,Time:i.time,Content:i.content,TypeInfo:i.typeinfo,Type:i.type})}this.UpdateUICallback&&this.UpdateUICallback(this),this.AutoUpate()},this.RecvError=function(t,e){}}(t)},g.GetDealDay=function(t){return new function(t){this.newMethod=S,this.newMethod(),delete this.newMethod,this.Symbol=t,this.Date,this.RequestData=function(){this.Data=null,this.Error=null;var t=this,e=u.CacheDomain+"/cache/dealday/day/"+this.Date+"/"+this.Symbol+".json";console.log("[DealDay::RequestData] cache url ",e),h.default.ajax({url:e,type:"get",dataType:"json",async:!0,success:function(e){t.RecvData(e,v.DEAL_DAY_DATA)},error:function(e){t.RecvError(e,v.DEAL_DAY_DATA)}})},this.RecvData=function(t,e){if(t.day&&t.deal){var a=t.deal.amount,i=t.deal.price,r=t.deal.time,s=t.deal.vol,h=t.deal.flag;if(h&&s&&r&&i&&a){for(var l={Date:t.date,Open:t.day.open,Close:t.day.price,YClose:t.day.yclose,Symbol:t.symbol,Name:t.name,Deal:[],PriceList:[]},u=new o.default,c=0,f=Math.min(r.length,s.length,h.length,i.length,a.length),d=0;d<f;++d){var C,p={Time:r[d],Vol:s[d],Flag:"",Price:i[d],Amount:a[d]};0===h[d]?p.Flag="B":1===h[d]&&(p.Flag="S"),p.Time>15e4&&(p.Time=15e4),l.Deal.push(p),u.has(p.Price)?(C=u.get(p.Price)).Vol+=p.Vol:(C={Vol:p.Vol,Price:p.Price,BuyVol:0,SellVol:0,NoneVol:0},u.set(p.Price,C)),0===h[d]?C.BuyVol+=p.Vol:1===h[d]?C.SellVol+=p.Vol:C.NoneVol+=p.Vol,c+=p.Vol}var m=!0,D=!1,v=void 0;try{for(var g,S=(0,n.default)(u);!(m=(g=S.next()).done);m=!0){var T=g.value,I=T[1];c>0&&(I.Proportion=I.Vol/c),l.PriceList.push(I)}}catch(t){D=!0,v=t}finally{try{!m&&S.return&&S.return()}finally{if(D)throw v}}l.PriceList.sort(function(t,e){return e.Price-t.Price}),this.Data=l,this.InvokeUpdateUICallback()}else this.InvokeUpdateUICallback()}else this.InvokeUpdateUICallback()},this.RecvError=function(t,e){console.log("[DealDay::RecvError] status="+t.status+" statusText="+t.statusText+" responseText="+t.responseText),this.Error={Status:t.status,Message:t.responseText},this.InvokeUpdateUICallback()}}(t)},g.GetBlockMember=function(t){return new function(t){this.newMethod=S,this.newMethod(),delete this.newMethod,this.ApiUrl=u.Domain+"/API/StockBlockMember",this.PageSize=10,this.Start=0,this.OrderField,this.Order,this.Symbol=t,this.OrderNull=0,this.Field=new Array,this.Data=new Array,this.PageInfo,this.SetField=function(t){for(var e in this.Field=new Array,t){var a=t[e],i=m.GetFieldName(a);null!=i&&this.Field.push(i)}return this.Field.length>0},this.SetOrder=function(t,e){this.Order=null,this.OrderField=null;var a=m.GetFieldName(t);return null!=a&&(this.OrderField=a,this.Order=e,!0)},this.RequestData=function(){this.Data=[];var t=this;h.default.ajax({url:this.ApiUrl,data:{symbol:this.Symbol,field:this.Field,order:this.Order,orderfield:this.OrderField,start:this.Start,end:this.Start+this.PageSize,ordernull:this.OrderNull},type:"post",dataType:"json",success:function(e){t.RecvData(e,v.BLOCK_MEMBER_DATA)},error:function(e){t.RecvError(e,v.BLOCK_MEMBER_DATA)}})},this.RecvData=function(t,e){for(var a in t.stock){var i=t.stock[a];if(null!=i.symbol){var r=new C(i.symbol);r.SetData(i),this.Data.push(r)}}this.PageInfo={Count:t.count,Start:t.start,End:t.end},"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this),this.AutoUpate()},this.RecvError=function(t,e){}}(t)},g.GetBlockTop=function(){return new function(){this.newMethod=S,this.newMethod(),delete this.newMethod,this.BlockType=1,this.Count=20,this.OrderField="increase",this.Order=-1,this.Field=["symbol","price","name","vol","increase","indextop","risefall"],this.ApiUrl=u.Domain+"/API/StockBlockTop",this.SetField=function(t){},this.ReqeustData=function(){var t=this;h.default.ajax({url:this.ApiUrl,data:{blocktype:this.BlockType,start:0,end:this.Count,field:this.Field,orderfield:this.OrderField,order:this.Order},type:"post",dataType:"json",async:!0,success:function(e){t.RecvData(e,v.BLOCK_TOP_DATA)},fail:function(e){t.RecvError(e,v.BLOCK_TOP_DATA)}})},this.RecvData=function(t,e){var a=t;for(var i in this.Data=[],this.resCount=a.count,a.stock){var r=a.stock[i];if(null!=r.indextop)var n={Down:r.indextop.down,Stop:r.indextop.stop,Up:r.indextop.up,Unchanged:r.indextop.unchanged,DownStock:{Name:r.indextop.downstock.name,Symbol:r.indextop.downstock.symbol},UpStock:{Name:r.indextop.upstock.name,Symbol:r.indextop.upstock.symbol}};this.Data.push({Name:r.name,Symbol:r.symbol,Increase:r.increase,Risefall:r.risefall,IndexTop:n})}this.UpdateUICallback&&this.UpdateUICallback(this),this.AutoUpate()},this.RecvError=function(t,e){}}},g.GetMinuteImage=function(t){return new function(t){this.newMethod=S,this.newMethod(),delete this.newMethod,this.ApiUrl=u.Domain+"/API/StockMinuteImage",this.Symbol=[t],this.Data=[],this.RequestData=function(){this.Data=[];var t=this;h.default.ajax({url:this.ApiUrl,data:{symbol:this.Symbol},type:"post",dataType:"json",success:function(e){t.RecvData(e,v.IMAGE_MINUTE_DATA)},error:function(e){t.RecvError(e,v.IMAGE_MINUTE_DATA)}})},this.RecvData=function(t,e){for(var a in t.symbol){var i={Symbol:t.symbol[a],Image:t.imagerelative[a]};this.Data.push(i)}"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this)},this.RecvError=function(t,e){}}(t)},g.GetHistoryDayData=function(t){return new function(t){this.newMethod=S,this.newMethod(),delete this.newMethod,this.Symbol=t,this.RequestData=function(){this.Data=null,this.Error=null;var t=this,e=u.CacheDomain+"/cache/historyday/all/"+this.Symbol+".json";console.log("[HistoryDayData::RequestData] cache url ",e),h.default.ajax({url:e,type:"get",dataType:"json",async:!0,success:function(e){t.RecvData(e,v.HISTORY_DAY_DATA)},error:function(e){t.RecvError(e,v.HISTORY_DAY_DATA)}})},this.RecvData=function(t,e){if(t.symbol&&t.name){var a=t.amount,i=t.close,r=t.date,n=t.high,o=t.low,s=t.open,h=t.vol,l=t.yclose;if(a&&i&&r&&n&&o&&s&&h&&l){for(var u={UpdateDate:t.update,Symbol:t.symbol,Name:t.name,KLine:[]},c=0;c<r.length;++c){var f={Date:r[c],YClose:l[c],Open:s[c],High:n[c],Low:o[c],Close:i[c],Vol:h[c],Amount:a[c]};u.KLine.push(f)}this.Data=u,this.InvokeUpdateUICallback()}else this.InvokeUpdateUICallback()}else this.InvokeUpdateUICallback()},this.RecvError=function(t,e){console.log("[HistoryDayData::RecvError] status="+t.status+" statusText="+t.statusText+" responseText="+t.responseText),this.Error={Status:t.status,Message:t.responseText},this.InvokeUpdateUICallback()},this.GetWeekData=function(){if(!this.Data||!this.Data.KLine)return[];var t=this.GetDayPeriodData(1);return t},this.GetMonthData=function(){if(!this.Data||!this.Data.KLine)return[];var t=this.GetDayPeriodData(2);return t},this.GetDayPeriodData=function(t){var e=new Array,a=0,i=null;for(var r in this.Data.KLine){var n=!1,o=this.Data.KLine[r];switch(t){case 1:var s=this.GetFirday(o.Date);s!=a&&(n=!0,a=s);break;case 2:parseInt(o.Date/100)!=parseInt(a/100)&&(n=!0,a=o.Date);break;case 3:parseInt(o.Date/1e4)!=parseInt(a/1e4)&&(n=!0,a=o.Date)}if(n){if((i={}).Date=o.Date,e.push(i),null==o.Open||null==o.Close)continue;i.Open=o.Open,i.High=o.High,i.Low=o.Low,i.YClose=o.YClose,i.Close=o.Close,i.Vol=o.Vol,i.Amount=o.Amount}else{if(null==i)continue;if(null==o.Open||null==o.Close)continue;null==i.Open||null==i.Close?(i.Open=o.Open,i.High=o.High,i.Low=o.Low,i.YClose=o.YClose,i.Close=o.Close,i.Vol=o.Vol,i.Amount=o.Amount):(i.High<o.High&&(i.High=o.High),i.Low>o.Low&&(i.Low=o.Low),i.Close=o.Close,i.Vol+=o.Vol,i.Amount+=o.Amount,i.Date=o.Date)}}return e},this.GetFirday=function(t){var e=new Date(parseInt(t/1e4),t/100%100-1,t%100),a=e.getDay();if(5==a)return t;var i=e.getTime();if(a<5){var r=864e5*(5-a);i+=r}else{var r=864e5*(a-5);i-=r}e.setTime(i);var n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();e.getDay();return n}}(t)},g.GetDealPriceListData=function(t){return new function(t){this.newMethod=S,this.newMethod(),delete this.newMethod,this.Symbol=t,this.ApiUrl=u.Domain+"/API/StockPriceList",this.RequestData=function(){if(this.Symbol){var t=this,e={};Array.isArray(this.Symbol)?e.Symbol=this.Symbol:e.Symbol=[this.Symbol],h.default.ajax({url:this.ApiUrl,data:e,type:"post",dataType:"json",async:!0,success:function(e){t.RecvData(e,v.DEAL_PRICE_LIST_DATA)},fail:function(e){t.RecvError(e,v.DEAL_PRICE_LIST_DATA)}})}},this.RecvData=function(t,e){if(this.Data=null,!(t.statistics.length<=0)){this.Data={Day:{},PriceList:[]};var a=t.data[0];this.Data.Day={Date:a.date,YClose:a.yclose,Price:a.price,Vol:a.vol,Time:a.time},this.Data.Stock={Symbol:a.symbol,Name:a.name};var i=t.statistics[0];for(var r in i.list){var n=i.list[r],o={Price:n[0],Vol:n[1],BuyVol:n[2],SellVol:n[3],NoneVol:n[4]};a.vol>0&&(o.Proportion=o.Vol/a.vol),this.Data.PriceList.push(o)}this.UpdateUICallback&&this.UpdateUICallback(this),this.AutoUpate()}},this.RecvError=function(t,e){}}(t)},g.GetLatestDetailData=function(t){return new function(t){this.newMethod=S,this.newMethod(),delete this.newMethod,this.IsAutoUpdate=!1,this.Symbol=t,this.PageSize=20,this.Request=function(t,e){this.Error=null;var a=this,i=t*e,r=i+e,n=u.Domain+"/API/StockDetail";console.log("[LatestDetailData::RequestData] url="+n+", start="+i+" , end="+r),h.default.ajax({url:n,data:{symbol:this.Symbol,start:i,end:r},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,v.LATEST_DETAIL_DATA)},error:function(t){a.RecvError(t,v.LATEST_DETAIL_DATA)}})},this.RequestData=function(){this.Data={Deal:[],Count:0,Reqeust:{PageIndex:0},Response:{}},this.Request(0,this.PageSize)},this.RequestPage=function(t){this.Data||(this.Data={Deal:[],Count:0}),this.Data.Reqeust={PageIndex:t},this.Data.Response={};for(var e=t*this.PageSize,a=e+this.PageSize,i=!0,r=e;r<a;++r)if(!this.Data.Deal[r]){i=!1;break}i?(this.Data.Response={Start:e,End:a},this.InvokeUpdateUICallback()):this.Request(t,this.PageSize)},this.RecvData=function(t,e){if(this.Data.Count=t.count,t.detail){this.Data.Day={YClose:t.yclose,Open:t.open,Close:t.price,Date:t.date},this.Data.Stock={Symbol:t.symbol,Name:t.name};for(var a=t.start,i=0,r=a;i<t.detail.length;++i,++r){var n=t.detail[i],o={Time:n[0],Price:n[1],Vol:n[2],Amount:n[3],Flag:""};0===n[4]?o.Flag="B":1===n[4]&&(o.Flag="S"),this.Data.Deal[r]=o}this.Data.Response={Start:t.start,End:t.end},this.InvokeUpdateUICallback()}else this.InvokeUpdateUICallback()},this.RecvError=function(t,e){console.log("[LatestDetailData::RecvError] status="+t.status+" statusText="+t.statusText+" responseText="+t.responseText),this.Error={Status:t.status,Message:t.responseText},this.InvokeUpdateUICallback()}}(t)},g.GetAnalylisPlate=function(){return new function(){this.newMethod=S,this.newMethod(),delete this.newMethod,this.ApiUrl=u.Domain+"/api/StockListAnalyze",this.PolicyGuid,this.Plate="",this.SymbolList=[],this.RequestData=function(){var t=this;h.default.ajax({url:t.ApiUrl,data:{PolicyGuid:t.PolicyGuid,Plate:t.Plate,Symbol:t.SymbolList},type:"post",dataType:"json",async:!0,success:function(e){t.RecvData(e)},error:function(e){t.RecvError(e)}})},this.RecvData=function(t){this.Data={};var e=t;if(0!=e.count){if(e.concept){var a=[];for(var i in e.concept.data){var r=e.concept.data[i],n={};n.Name=r[0],n.Symbol=r[1],n.Ratio=r[2],n.Count=r[3],n.Increase=r[4],n.Price=r[5],n.Week1=r[6],n.Week4=r[7],a.push(n)}this.Data.Concept=a}e.distributed&&(this.Data.Distributed=e.distributed),e.industry&&(this.Data.Industry=e.industry),e.quadrant&&(this.Data.Quadrant=e.quadrant),e.region&&(this.Data.Region=e.region),this.UpdateUICallback&&this.UpdateUICallback(this)}},this.RecvError=function(t){console.log(t)}}},g.GetStockHistory=function(){return new function(){this.Symbol,this.Callback,this.Order=-1,this.SortField,this.Field,this.Plate,this.Data=new o.default,this.ApiUrl=u.Domain+"/API/StockHistoryDay",this.PageSize=20,this.PageIndex=1,this.Count,this.currentData=null,this.RequsetData=function(t,e){var a=this,i="string"==typeof a.Symbol?[this.Symbol]:this.Symbol,r=i?i.length:0;this.Plate?this.currentData={plate:this.Plate,symbol:i,start:0,end:this.PageSize,field:this.Field,orderfield:this.SortField,order:this.Order,condition:t.GetQuery(),condition2:e?e.GetQuery():[]}:this.currentData={symbol:i,start:0,end:r,field:this.Field,orderfield:this.SortField,order:this.Order,condition:t.GetQuery(),condition2:e?e.GetQuery():[]},h.default.ajax({url:this.ApiUrl,data:a.currentData,method:"POST",dataType:"json",success:function(e){a.Count=e.data.count,a.RecvData(e,t)},fail:function(e){a.RecvError(e,t)}})},this.GetNextPage=function(){var t=this;this.PageSize*this.PageIndex<this.Count?(this.currentData.start=this.PageSize*this.PageIndex,this.PageIndex++,this.currentData.end=this.PageSize*this.PageIndex,h.default.ajax({url:this.ApiUrl,data:t.currentData,method:"POST",dataType:"json",success:function(e){t.RecvData(e)},fail:function(e){t.RecvError(e)}})):alert("数据已全部加载")},this.RecvData=function(t,e){var a=t.data;for(var i in a.stock){var r=a.stock[i],n=r.symbol,s={};this.Data.has(n)?s=this.Data.get(n):(s={Symbol:r.symbol,Name:r.name,Data:new o.default},this.Data.set(n,s)),this.SetStockData(r,s)}this.Callback&&this.Callback(this,e)},this.SetStockData=function(t,e){for(var a in t.stockday){var i=t.stockday[a],r=i.date,n=new o.default;this.SetFinanceData(i,n),this.SetBlocktradingData(i,n),this.SetChangesData(i,n),this.SetLiftingData(i,n),this.SetPforecastData(i,n),this.SetShortIndicatorsData(i,n),e.Data.set(r,n)}return e},this.SetFinanceData=function(t,e){var a,i;(a=t.finance1)&&(isNaN(a.nprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_NPROFITINCREASE,a.nprofitincrease),isNaN(a.nnprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_NNPROFITINCREASE,a.nnprofitincrease),isNaN(a.nnprofitspeed)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_NNPROFITSPEED,a.nnprofitspeed),isNaN(a.benford)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_BENFORD,a.benford)),(i=t.announcement1)&&(isNaN(i.year)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_YEAR,i.year),isNaN(i.quarter)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_QUARTER,i.quarter)),(a=t.finance2)&&(isNaN(a.nprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_NPROFITINCREASE,a.nprofitincrease),isNaN(a.nnprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_NNPROFITINCREASE,a.nnprofitincrease),isNaN(a.nnprofitspeed)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_NNPROFITSPEED,a.nnprofitspeed),isNaN(a.benford)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_BENFORD,a.benford)),(i=t.announcement2)&&(isNaN(i.year)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_YEAR,i.year),isNaN(i.quarter)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_QUARTER,i.quarter)),(a=t.finance3)&&(isNaN(a.nprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_NPROFITINCREASE,a.nprofitincrease),isNaN(a.nnprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_NNPROFITINCREASE,a.nnprofitincrease),isNaN(a.nnprofitspeed)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_NNPROFITSPEED,a.nnprofitspeed),isNaN(a.benford)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_BENFORD,a.benford)),(i=t.announcement3)&&(isNaN(i.year)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_YEAR,i.year),isNaN(i.quarter)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_QUARTER,i.quarter)),(a=t.finance4)&&(isNaN(a.nprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_NPROFITINCREASE,a.nprofitincrease),isNaN(a.nnprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_NNPROFITINCREASE,a.nnprofitincrease),isNaN(a.nnprofitspeed)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_NNPROFITSPEED,a.nnprofitspeed),isNaN(a.benford)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_BENFORD,a.benford)),(i=t.announcement4)&&(isNaN(i.year)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_YEAR,i.year),isNaN(i.quarter)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_QUARTER,i.quarter))},this.SetBlocktradingData=function(t,e){var a=t.blocktrading;a&&e.set(STOCK_HISTORY_FIELD_NAME.BLOCK_TRADING,{Premium:a.premium,Price:a.price,Vol:a.vol,Amount:a.amount})},this.SetChangesData=function(t,e){var a=t.changes;a&&e.set(STOCK_HISTORY_FIELD_NAME.HOLDERS_CHANGES,{List:a.list})},this.SetLiftingData=function(t,e){var a=t.lifting;a&&e.set(STOCK_HISTORY_FIELD_NAME.LIFTING,{Lifting:a})},this.SetPforecastData=function(t,e){var a=t.pforecast;a&&e.set(STOCK_HISTORY_FIELD_NAME.PFORECAST,{Lowprofit:a[0].lowprofit,Highprofit:a[0].highprofit,Lowchange:a[0].lowchange,Highchange:a[0].highchange,Reportdate:a[0].reportdate})},this.SetShortIndicatorsData=function(t,e){var a=t.policy;if(a){var i=["三只乌鸦","乌云盖顶","黄昏之星","巨量阴线","头肩顶","射击之星","倾盆大雨","断头铡刀","淡友反攻","空方炮","连续1周空头排列"],r=0,n=[],o=0,s="";a.forEach(function(t){i.some(function(e){return e===t.name})&&(r++,n.push(t.time))}),r?(o=Math.max.apply(n,n),s=a.find(function(t){return t.time===o}).name):s="",console.log(s,r,"latestName-targetedCount"),e.set(STOCK_HISTORY_FIELD_NAME.SHORTIND_ICATORS,{latestIndicatorName:s,indicatorCount:r})}},this.RecvError=function(t,e){},this.CreateCondition=function(t){return new QueryCondition(t)}}};var v={BASE_DATA:1,INDEX_BASE_DATA:2,HEAT_DATA:3,SORT_DATA:4,BUY_SELL_DATA:5,DEAL_DATA:6,DERIVATIVE_DATA:7,FINANCE_DATA:8,SEARCH_STOCK_DATA:9,SELF_STOCK_DATA:10,LOGON_DATA:11,BLOCK_MEMBER_DATA:13,SHORT_TERM_DATA:14,COMPANY_DATA:15,PLATE_DATA:16,CAPITAL_DATA:17,CAPITAL_FLOW_DAY_DATA:23,CAPITAL_FLOW_DAY3_DATA:24,CAPITAL_FLOW_DAY5_DATA:25,CAPITAL_FLOW_DAY10_DATA:26,DDE_DAY_DATA:27,DDE_DAY3_DATA:28,DDE_DAY5_DATA:29,DDE_DAY10_DATA:30,DEAL_DAY_DATA:105,EVENT_DATA:106,IMAGE_MINUTE_DATA:107,HISTORY_DAY_DATA:108,DEAL_PRICE_LIST_DATA:109,LATEST_DETAIL_DATA:110};function g(){this.MapStock=new o.default,this.MapTagCallback=new o.default,this.RequestVersion=new Array([100,100,100]),this.RealtimeApiUrl=u.Domain+"/API/Stock",this.PlateQuadrantApiUrl=u.Domain+"/API/StockPlateQuadrant",this.IsAutoUpdate=!0,this.AutoUpateTimeout=15e3,this.Timeout,this.NetworkFilter,this.GetStockRead=function(t,e){var a=!0,i=!1,r=void 0;try{for(var o,s=(0,n.default)(this.MapStock);!(a=(o=s.next()).done);a=!0){o.value[1].RemoveTagID(t)}}catch(t){i=!0,r=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}return this.MapTagCallback.set(t,e),new D(this,t)},this.Unsubscribe=function(t){var e=!0,a=!1,i=void 0;try{for(var r,o=(0,n.default)(this.MapStock);!(e=(r=o.next()).done);e=!0){r.value[1].RemoveTagID(t)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}},this.UnsubscribeStock=function(t,e){var a=!0,i=!1,r=void 0;try{for(var o,s=(0,n.default)(this.MapStock);!(a=(o=s.next()).done);a=!0){var h=o.value;if(h[0]===t){e?h[1].RemoveTagID(e):h[1].ClearTagID(),console.log("[JSStock::UnsubscribeStock] symbol="+t+", tagID="+e);break}}}catch(t){i=!0,r=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}},this.Get=function(t,e){this.MapStock.has(t)||this.MapStock.set(t,new C(t));var a=this.MapStock.get(t);return e&&a.AttachTagID(e),a},this.RequestData=function(){this.ClearTimer();var t=new Array,e=new Array,a=new Array,i=new Array,r=new Array,o=new Array,s=new Array,h=[],l=[],u=[],c=[],f=[],C=[],p=[],m=[],D=new Array,v=new Array,g=new Array,S=new Array,T=!0,I=!1,y=void 0;try{for(var x,w=(0,n.default)(this.MapStock);!(T=(x=w.next()).done);T=!0){var F=x.value,E=F[1],b=F[0];E.BaseDataTagID.size>0&&(d(b)?e.push(b):t.push(b)),E.BuySellTagID.size>0&&i.push(b),E.CapitalFlowDayID.size>0&&h.push(b),E.CapitalFlowDay3ID.size>0&&l.push(b),E.CapitalFlowDay5ID.size>0&&u.push(b),E.CapitalFlowDay10ID.size>0&&c.push(b),E.DDEID.size>0&&f.push(b),E.DDE3ID.size>0&&C.push(b),E.DDE5ID.size>0&&p.push(b),E.DDE10ID.size>0&&m.push(b),E.HeatTagID.size>0&&a.push(b),E.DealTagID.size>0&&r.push(b),E.DerivativeTagID.size>0&&o.push(b),E.FinanceTagID.size>0&&s.push(b),E.CapitalTagID.size>0&&S.push(b),null==E.Event&&E.EventTagID.size>0&&D.push(b),null==E.Company&&E.CompanyTagID.size>0&&v.push(b),null==F[1].Plate&&F[1].PlateTagID.size>0&&g.push(F[0])}}catch(t){I=!0,y=t}finally{try{!T&&w.return&&w.return()}finally{if(I)throw y}}i.length>0&&this.RequestBuySellData(i),t.length>0&&this.RequestBaseData(t),e.length>0&&this.RequestIndexBaseData(e),a.length>0&&this.RequestIndexHeatData(a),r.length>0&&this.RequestDealData(r),o.length>0&&this.RequestDerivativeData(o),s.length>0&&this.RequestFinanceData(s),S.length>0&&this.RequestCapitalData(S),h.length>0&&this.RequestSubDocumentData(h,"flowday"),l.length>0&&this.RequestSubDocumentData(l,"flowday3"),u.length>0&&this.RequestSubDocumentData(u,"flowday5"),c.length>0&&this.RequestSubDocumentData(c,"flowday10"),f.length>0&&this.RequestSubDocumentData(f,"dde"),C.length>0&&this.RequestSubDocumentData(C,"dde3"),p.length>0&&this.RequestSubDocumentData(p,"dde5"),m.length>0&&this.RequestSubDocumentData(m,"dde10"),D.length>0&&this.RequestEventData(D),v.length>0&&this.RequestCompanyData(v),g.length>0&&this.RequestPlateData(g),this.ReqeustAllSortData()},this.ReqeustData=this.RequestData,this.RequestBaseData=function(t){var e=this,a=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","week","increase","exchangerate","amplitude","volratio"];if(this.NetworkFilter){var i={Name:"JSStock::RequestBaseData",Explain:"股票基础数据",ID:v.BASE_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,v.BASE_DATA)}),1==i.PreventDefault)return}h.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,v.BASE_DATA)},error:function(t){e.RecvError(t,v.BASE_DATA)}})},this.RequestDerivativeData=function(t){var e=this,a=["name","symbol","marketvalue","flowmarketvalue","pe","pe2","pe3","pb","bookrate","bookdiffer"];if(this.NetworkFilter){var i={Name:"JSStock::RequestDerivativeData",Explain:"实时衍生数据",ID:v.DERIVATIVE_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,v.DERIVATIVE_DATA)}),1==i.PreventDefault)return}h.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,v.DERIVATIVE_DATA)},error:function(t){e.RecvError(t,v.DERIVATIVE_DATA)}})},this.RequestFinanceData=function(t){var e=this,a=["name","symbol","roe","finance"];if(this.NetworkFilter){var i={Name:"JSStock::RequestFinanceData",Explain:"财务数据",ID:v.FINANCE_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,v.FINANCE_DATA)}),1==i.PreventDefault)return}h.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,v.FINANCE_DATA)},error:function(t){e.RecvError(t,v.FINANCE_DATA)}})},this.RequestCapitalData=function(t){var e=this,a=["name","symbol","capital"];if(this.NetworkFilter){var i={Name:"JSStock::RequestCapitalData",Explain:"股本数据",ID:v.CAPITAL_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,v.CAPITAL_DATA)}),1==i.PreventDefault)return}h.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,v.CAPITAL_DATA)},error:function(t){e.RecvError(t,v.CAPITAL_DATA)}})},this.RequestBuySellData=function(t){var e=this,a=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","week","increase","buy","sell","exchangerate","amplitude"];if(this.NetworkFilter){var i={Name:"JSStock::RequestBuySellData",Explain:"买卖盘数据",ID:v.BUY_SELL_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,v.BUY_SELL_DATA)}),1==i.PreventDefault)return}h.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,v.BUY_SELL_DATA)},error:function(t){e.RecvError(t,v.BUY_SELL_DATA)}})},this.RequestDealData=function(t){var e=this,a=["name","symbol","price","high","low","vol","amount","date","time","increase","deal"];if(this.NetworkFilter){var i={Name:"JSStock::RequestDealData",Explain:"分笔数据",ID:v.DEAL_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,v.DEAL_DATA)}),1==i.PreventDefault)return}h.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,v.DEAL_DATA)},error:function(t){e.RecvError(t,v.DEAL_DATA)}})},this.RequestIndexBaseData=function(t){var e=this,a=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","week","indextop","increase"];if(this.NetworkFilter){var i={Name:"JSStock::RequestIndexBaseData",Explain:"指数基础数据(包含上涨下跌家数)",ID:v.INDEX_BASE_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,v.INDEX_BASE_DATA)}),1==i.PreventDefault)return}h.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){console.log(t),e.RecvData(t,v.INDEX_BASE_DATA)},error:function(t){e.RecvError(t,v.INDEX_BASE_DATA)}})},this.RequestIndexHeatData=function(t){var e=this;h.default.ajax({url:this.PlateQuadrantApiUrl,data:{plate:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,v.HEAT_DATA)},error:function(t){e.RecvError(t,v.HEAT_DATA)}})},this.ReqeustAllSortData=function(){var t=new Array,e=!0,a=!1,i=void 0;try{for(var r,o=(0,n.default)(this.MapStock);!(e=(r=o.next()).done);e=!0){var s=r.value;if(d(s[0])&&!(null==s[1].Sort||s[1].Sort.size<=0)){var h=!0,l=!1,u=void 0;try{for(var c,f=(0,n.default)(s[1].Sort);!(h=(c=f.next()).done);h=!0){var C=(D=c.value)[1],p={Plate:s[0],SortField:C.SortField,Order:C.Order,TagID:C.TagID};t.push(p)}}catch(t){l=!0,u=t}finally{try{!h&&f.return&&f.return()}finally{if(l)throw u}}}}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}for(var m in t){var D=t[m];this.ReqeustSortData(D)}},this.ReqeustSortData=function(t){var e=this,a=t,i="";switch(a.SortField){case p.INCREASE:i="increase";break;case p.PRICE:i="price";break;default:return}var r=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","week","increase","exchangerate"];if(this.NetworkFilter){var n={Name:"JSStock::ReqeustSortData",Explain:"板块排序数据",ID:v.SORT_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:r,plate:[t.Plate],orderfield:i,order:t.Order,ordernull:1,filterstop:1},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(t){e.RecvData(t,v.SORT_DATA,a)}),1==n.PreventDefault)return}h.default.ajax({url:this.RealtimeApiUrl,data:{field:r,plate:[t.Plate],orderfield:i,order:t.Order,ordernull:1,filterstop:1},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,v.SORT_DATA,a)},error:function(t){e.RecvError(t,v.SORT_DATA,a)}})},this.RequestSubDocumentData=function(t,e){var a=this,i=new o.default([["flowday",{Field:"flowday",RecvID:v.CAPITAL_FLOW_DAY_DATA}],["flowday3",{Field:"flowday3",RecvID:v.CAPITAL_FLOW_DAY3_DATA}],["flowday5",{Field:"flowday5",RecvID:v.CAPITAL_FLOW_DAY5_DATA}],["flowday10",{Field:"flowday10",RecvID:v.CAPITAL_FLOW_DAY10_DATA}],["dde",{Field:"dde",RecvID:v.DDE_DAY_DATA}],["dde3",{Field:"dde3",RecvID:v.DDE_DAY3_DATA}],["dde5",{Field:"dde5",RecvID:v.DDE_DAY5_DATA}],["dde10",{Field:"dde10",RecvID:v.DDE_DAY10_DATA}]]);if(i.has(e)){var r=i.get(e);if(this.NetworkFilter){var n={Name:"JSStock::RequestSubDocumentData",Explain:"子文档数据",ID:r.RecvID,Request:{Url:a.RealtimeApiUrl,Data:{field:["symbol",r.Field],symbol:t,start:0,end:50},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(t){a.RecvData(t,r.RecvID)}),1==n.PreventDefault)return}h.default.ajax({url:this.RealtimeApiUrl,data:{field:["symbol",r.Field],symbol:t,start:0,end:50},type:"post",dataType:"json",success:function(t){a.RecvData(t,r.RecvID)},error:function(t){a.RecvError(t,r.RecvID)}})}},this.RequestEventData=function(t){var e=this;h.default.ajax({url:this.RealtimeApiUrl,data:{field:["symbol","events.margin","events.shhk","events.hk","events.st","events.hksymbol","events.hkname","events.szhk"],symbol:t,start:0,end:50},type:"POST",dataType:"json",success:function(t){e.RecvData(t,v.EVENT_DATA)},error:function(t){e.RecvError(t,v.EVENT_DATA)}})},this.RequestCompanyData=function(t){var e=this;h.default.ajax({url:this.RealtimeApiUrl,data:{field:["name","symbol","company"],symbol:t,start:0,end:50},type:"POST",dataType:"json",success:function(t){e.RecvData(t,v.COMPANY_DATA)},error:function(t){e.RecvError(t,v.COMPANY_DATA)}})},this.RequestPlateData=function(t){var e=this;h.default.ajax({url:this.RealtimeApiUrl,data:{field:["name","symbol","industry","region","concept"],symbol:t,start:0,end:50},type:"POST",dataType:"json",success:function(t){e.RecvData(t,v.PLATE_DATA)},error:function(t){e.RecvError(t,v.PLATE_DATA)}})},this.RecvError=function(t,e,a){console.log("RecvError: datatype="+e.toString()),console.log(t);var i=this;this.Timeout&&clearTimeout(this.Timeout),this.Timeout=setTimeout(function(){i.ReqeustData()},2*this.AutoUpateTimeout)},this.RecvData=function(t,e,a){var i;switch(e){case v.BASE_DATA:case v.INDEX_BASE_DATA:i=this.RecvBaseData(t,e);break;case v.HEAT_DATA:i=this.RecvHeatData(t,e);break;case v.SORT_DATA:i=this.RecvSortData(t,e,a);break;case v.BUY_SELL_DATA:i=this.RecvBuySellData(t,e);break;case v.DEAL_DATA:i=this.RecvDealData(t,e);break;case v.DERIVATIVE_DATA:i=this.RecvDerivativeData(t,e);break;case v.FINANCE_DATA:i=this.RecvFinanceData(t,e);break;case v.CAPITAL_DATA:i=this.RecvCapitalData(t,e);break;case v.CAPITAL_FLOW_DAY_DATA:case v.CAPITAL_FLOW_DAY3_DATA:case v.CAPITAL_FLOW_DAY5_DATA:case v.CAPITAL_FLOW_DAY10_DATA:case v.DDE_DAY_DATA:case v.DDE_DAY3_DATA:case v.DDE_DAY5_DATA:case v.DDE_DAY10_DATA:i=this.RecvSubDocumentData(t,e);break;case v.EVENT_DATA:i=this.RecvEventData(t,e);break;case v.COMPANY_DATA:i=this.RecvCompanyData(t,e);break;case v.PLATE_DATA:i=this.RecvPlateData(t,e)}var r=!0,o=!1,s=void 0;try{for(var h,l=(0,n.default)(i);!(r=(h=l.next()).done);r=!0){var u=h.value;this.MapTagCallback.has(u[0])&&this.MapTagCallback.get(u[0])(u[0],u[1],e,this)}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}this.AutoUpdate()},this.ClearTimer=function(){this.Timeout&&(clearTimeout(this.Timeout),this.Timeout=null)},this.AutoUpdate=function(){if(this.ClearTimer(),this.IsAutoUpdate){var t=this,e=!1,a=!0,i=!1,r=void 0;try{for(var o,s=(0,n.default)(this.MapStock);!(a=(o=s.next()).done);a=!0){var h=o.value,l=T.GetMarketStatus(h[0]);if(2==l)return void(this.Timeout=setTimeout(function(){t.ReqeustData()},this.AutoUpateTimeout));1==l&&(e=!0)}}catch(t){i=!0,r=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}e&&(this.Timeout=setTimeout(function(){t.AutoUpdate()},this.AutoUpateTimeout))}},this.RecvBaseData=function(t,e){var a=new o.default;for(var i in t.stock){var r=t.stock[i],s=this.MapStock.get(r.symbol);if(s){switch(e){case v.BASE_DATA:s.SetBaseData(r);break;case v.INDEX_BASE_DATA:s.SetIndexBaseData(r);break;default:continue}if(s.TagID.size>0){var h=!0,l=!1,u=void 0;try{for(var c,f=(0,n.default)(s.TagID);!(h=(c=f.next()).done);h=!0){var d=c.value;a.has(d)?a.get(d).push(s.Symbol):a.set(d,new Array(s.Symbol))}}catch(t){l=!0,u=t}finally{try{!h&&f.return&&f.return()}finally{if(l)throw u}}}}}return a},this.RecvBuySellData=function(t,e){var a=new o.default;for(var i in t.stock){var r=t.stock[i],s=this.MapStock.get(r.symbol);if(s){if(s.SetBuySellData(r),s.TagID.size>0){var h=!0,l=!1,u=void 0;try{for(var c,f=(0,n.default)(s.TagID);!(h=(c=f.next()).done);h=!0){var d=c.value;a.has(d)?a.get(d).push(s.Symbol):a.set(d,new Array(s.Symbol))}}catch(t){l=!0,u=t}finally{try{!h&&f.return&&f.return()}finally{if(l)throw u}}}if(s.BuySellTagID.size>0){var C=!0,p=!1,m=void 0;try{for(var D,v=(0,n.default)(s.BuySellTagID);!(C=(D=v.next()).done);C=!0){d=D.value;a.has(d)?a.get(d).push(s.Symbol):a.set(d,new Array(s.Symbol))}}catch(t){p=!0,m=t}finally{try{!C&&v.return&&v.return()}finally{if(p)throw m}}}}}return a},this.RecvDerivativeData=function(t,e){var a=new o.default;for(var i in t.stock){var r=t.stock[i],s=this.MapStock.get(r.symbol);if(s&&(s.SetDerivativeData(r),s.DerivativeTagID.size>0)){var h=!0,l=!1,u=void 0;try{for(var c,f=(0,n.default)(s.DerivativeTagID);!(h=(c=f.next()).done);h=!0){var d=c.value;a.has(d)?a.get(d).push(s.Symbol):a.set(d,new Array(s.Symbol))}}catch(t){l=!0,u=t}finally{try{!h&&f.return&&f.return()}finally{if(l)throw u}}}}return a},this.RecvFinanceData=function(t,e){var a=new o.default;for(var i in t.stock){var r=t.stock[i],s=this.MapStock.get(r.symbol);if(s&&(s.SetFinanceData(r),s.FinanceTagID.size>0)){var h=!0,l=!1,u=void 0;try{for(var c,f=(0,n.default)(s.FinanceTagID);!(h=(c=f.next()).done);h=!0){var d=c.value;a.has(d)?a.get(d).push(s.Symbol):a.set(d,new Array(s.Symbol))}}catch(t){l=!0,u=t}finally{try{!h&&f.return&&f.return()}finally{if(l)throw u}}}}return a},this.RecvCapitalData=function(t,e){var a=new o.default;for(var i in t.stock){var r=t.stock[i],s=this.MapStock.get(r.symbol);if(s&&(s.SetCapitalData(r),s.CapitalTagID.size>0)){var h=!0,l=!1,u=void 0;try{for(var c,f=(0,n.default)(s.CapitalTagID);!(h=(c=f.next()).done);h=!0){var d=c.value;a.has(d)?a.get(d).push(s.Symbol):a.set(d,new Array(s.Symbol))}}catch(t){l=!0,u=t}finally{try{!h&&f.return&&f.return()}finally{if(l)throw u}}}}return a},this.RecvDealData=function(t,e){var a=new o.default;for(var i in t.stock){var r=t.stock[i],s=this.MapStock.get(r.symbol);if(s&&(s.SetDealData(r),s.DealTagID.size>0)){var h=!0,l=!1,u=void 0;try{for(var c,f=(0,n.default)(s.DealTagID);!(h=(c=f.next()).done);h=!0){var d=c.value;a.has(d)?a.get(d).push(s.Symbol):a.set(d,new Array(s.Symbol))}}catch(t){l=!0,u=t}finally{try{!h&&f.return&&f.return()}finally{if(l)throw u}}}}return a},this.RecvHeatData=function(t,e){var a=new o.default;for(var i in t.data){var r=t.data[i],s=this.MapStock.get(r.symbol);if(s&&(s.SetHeatData(r),s.HeatTagID.size>0)){var h=!0,l=!1,u=void 0;try{for(var c,f=(0,n.default)(s.HeatTagID);!(h=(c=f.next()).done);h=!0){var d=c.value;a.has(d)?a.get(d).push(s.Symbol):a.set(d,new Array(s.Symbol))}}catch(t){l=!0,u=t}finally{try{!h&&f.return&&f.return()}finally{if(l)throw u}}}}return a},this.RecvSortData=function(t,e,a){var i=new o.default,r=new Array,s=this.MapStock.get(a.Plate);for(var h in t.stock){var l,u=t.stock[h];if(r.push(u.symbol),this.MapStock.has(u.symbol))(l=this.MapStock.get(u.symbol)).SetBaseData(u);else(l=new C(u.symbol)).SetBaseData(u),this.MapStock.set(u.symbol,l)}var c=a.SortField.toString()+"-"+a.Order.toString();if(!s.Sort.has(c))return i;s.Sort.get(c).arySymbol=r;var f=!0,d=!1,p=void 0;try{for(var m,D=(0,n.default)(a.TagID);!(f=(m=D.next()).done);f=!0){u=m.value;i.set(u,new Array([s.Symbol]))}}catch(t){d=!0,p=t}finally{try{!f&&D.return&&D.return()}finally{if(d)throw p}}return i},this.RecvSubDocumentData=function(t,e){var a=new o.default;for(var i in t.stock){var r=t.stock[i],s=this.MapStock.get(r.symbol);if(s){var h=null;switch(e){case v.CAPITAL_FLOW_DAY_DATA:s.SetCapitalFlowDayData(r.flowday,e),h=s.CapitalFlowDayID;break;case v.CAPITAL_FLOW_DAY3_DATA:s.SetCapitalFlowDayData(r.flowday3,e),h=s.CapitalFlowDay3ID;break;case v.CAPITAL_FLOW_DAY5_DATA:s.SetCapitalFlowDayData(r.flowday5,e),h=s.CapitalFlowDay5ID;break;case v.CAPITAL_FLOW_DAY10_DATA:s.SetCapitalFlowDayData(r.flowday10,e),h=s.CapitalFlowDay10ID;break;case v.DDE_DAY_DATA:s.SetDDE(r.dde,e),h=s.DDEID;break;case v.DDE_DAY3_DATA:s.SetDDE(r.dde3,e),h=s.DDE3ID;break;case v.DDE_DAY5_DATA:s.SetDDE(r.dde5,e),h=s.DDE5ID;break;case v.DDE_DAY10_DATA:s.SetDDE(r.dde10,e),h=s.DDE10ID}if(h&&h.size>0){var l=!0,u=!1,c=void 0;try{for(var f,d=(0,n.default)(h);!(l=(f=d.next()).done);l=!0){var C=f.value;a.has(C)?a.get(C).push(s.Symbol):a.set(C,new Array(s.Symbol))}}catch(t){u=!0,c=t}finally{try{!l&&d.return&&d.return()}finally{if(u)throw c}}}}}return a},this.RecvEventData=function(t,e){var a=new o.default;for(var i in t.stock){var r=t.stock[i],s=this.MapStock.get(r.symbol);if(s&&(s.SetEventData(r),s.EventTagID.size>0)){var h=!0,l=!1,u=void 0;try{for(var c,f=(0,n.default)(s.EventTagID);!(h=(c=f.next()).done);h=!0){var d=c.value;a.has(d)?a.get(d).push(s.Symbol):a.set(d,new Array(s.Symbol))}}catch(t){l=!0,u=t}finally{try{!h&&f.return&&f.return()}finally{if(l)throw u}}}}return a},this.RecvCompanyData=function(t,e){var a=new o.default;for(var i in t.stock){var r=t.stock[i],s=this.MapStock.get(r.symbol);if(s&&(s.SetCompanyData(r),s.CompanyTagID.size>0)){var h=!0,l=!1,u=void 0;try{for(var c,f=(0,n.default)(s.CompanyTagID);!(h=(c=f.next()).done);h=!0){var d=c.value;a.has(d)?a.get(d).push(s.Symbol):a.set(d,new Array(s.Symbol))}}catch(t){l=!0,u=t}finally{try{!h&&f.return&&f.return()}finally{if(l)throw u}}}}return a},this.RecvPlateData=function(t,e){var a=new o.default;for(var i in t.stock){var r=t.stock[i],s=this.MapStock.get(r.symbol);if(s&&(s.SetPlateData(r),s.PlateTagID.size>0)){var h=!0,l=!1,u=void 0;try{for(var c,f=(0,n.default)(s.PlateTagID);!(h=(c=f.next()).done);h=!0){var d=c.value;a.has(d)?a.get(d).push(s.Symbol):a.set(d,new Array(s.Symbol))}}catch(t){l=!0,u=t}finally{try{!h&&f.return&&f.return()}finally{if(l)throw u}}}}return a}}function S(){this.IsAutoUpdate=!0,this.AutoUpateTimeout=5e3,this.Timeout,this.ApiUrl,this.Data,this.Error,this.UpdateUICallback,this.RequestData=function(){},this.Stop=function(){this.IsAutoUpdate=!1,this.Timeout&&clearTimeout(this.Timeout)},this.AutoUpate=function(){if(this.Timeout&&clearTimeout(this.Timeout),this.IsAutoUpdate&&(this.Timeout&&clearTimeout(this.Timeout),this.IsAutoUpdate)){var t=this;if(this.Symbol){var e=T.GetMarketStatus(this.Symbol);2==e?this.Timeout=setTimeout(function(){t.RequestData()},this.AutoUpateTimeout):1==e&&(this.Timeout=setTimeout(function(){t.AutoUpdate()},this.AutoUpateTimeout))}else{t=this;var a=new Date,i=100*a.getHours()+a.getMinutes();a.getDay()>0&&a.getDay()<6&&i>=930&&i<1530&&(this.Timeout=setTimeout(function(){t.RequestData()},this.AutoUpateTimeout))}}},this.InvokeUpdateUICallback=function(){this.UpdateUICallback&&this.UpdateUICallback(this)}}var T={SH:".SH",SZ:".SZ",HK:".HK",SHFE:".SHF",CFFEX:".CFE",DCE:".DCE",CZCE:".CZC",USA:".USA",IsUSA:function(t){return!!t&&t.indexOf(this.USA)>0},IsSH:function(t){var e=t.length-this.SH.length;return t.indexOf(this.SH)==e},IsSZ:function(t){var e=t.length-this.SZ.length;return t.indexOf(this.SZ)==e},IsHK:function(t){var e=t.length-this.HK.length;return t.indexOf(this.HK)==e},IsSHFE:function(t){return t.indexOf(this.SHFE)>0},IsCFFEX:function(t){return t.indexOf(this.CFFEX)>0},IsDCE:function(t){return t.indexOf(this.DCE)>0},IsCZCE:function(t){return t.indexOf(this.CZCE)>0},IsChinaFutures:function(t){return this.IsCFFEX(t)||this.IsCZCE(t)||this.IsDCE(t)||this.IsSHFE(t)},IsSHSZ:function(t){return this.IsSZ(t)||this.IsSH(t)},IsSHSZFund:function(t){if(!t)return!1;if(this.IsSH(t)){if("5"==t.charAt(0)&&"1"==t.charAt(1))return!0}else if(this.IsSZ(t)&&"1"==t.charAt(0)&&("5"==t.charAt(1)||"6"==t.charAt(1)||"7"==t.charAt(1)||"8"==t.charAt(1)))return!0;return!1},IsSHSZIndex:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){var a=e.replace(".SH","");if("0"==e.charAt(0)&&parseInt(a)<=3e3)return!0}else if(this.IsSZ(e)){if("3"==e.charAt(0)&&"9"==e.charAt(1))return!0}else if(e.indexOf(".CI")>0)return!0;return!1},IsSHSZStockA:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){e.replace(".SH","");if("6"==e.charAt(0))return!0}else if(this.IsSZ(e)&&"0"==e.charAt(0)){if("0"==e.charAt(1)&&"2"==e.charAt(1))return!0;if("7"!=e.charAt(1)&&"8"!=e.charAt(1))return!0}return!1},IsSHStockSTAR:function(t){if(!t)return!1;var e=t.toUpperCase();return!!this.IsSH(e)&&("6"==e.charAt(0)&&"8"==e.charAt(1)&&"8"==e.charAt(2))},GetMarketStatus:function(t){if(!t)return 0;var e=t.toUpperCase();if(this.IsUSA(e)){var a=GetLocalTime(-4);return r=a.getDay(),n=100*a.getHours()+a.getMinutes(),6==r||0==r?0:n>1730?3:n<930?1:2}var i=new Date,r=i.getDay(),n=100*i.getHours()+i.getMinutes();return 6==r||0==r?0:n>1540?3:n<925?1:2}};e.default=(i={JSStockInit:g.Init,STOCK_FIELD_NAME:p,JSStock:g,StockRead:D},(0,r.default)(i,"STOCK_FIELD_NAME",p),(0,r.default)(i,"RECV_DATA_TYPE",v),i)},F9bG:function(t,e,a){var i=a("bYtY"),r=a("ItGF"),n=(0,a("4NO4").makeInner)(),o=i.each;function s(t,e,a){t.handler("leave",null,a)}function h(t,e,a,i){e.handler(t,a,i)}e.register=function(t,e,a){if(!r.node){var l=e.getZr();n(l).records||(n(l).records={}),function(t,e){function a(a,i){t.on(a,function(a){var r=function(t){var e={showTip:[],hideTip:[]},a=function(i){var r=e[i.type];r?r.push(i):(i.dispatchAction=a,t.dispatchAction(i))};return{dispatchAction:a,pendings:e}}(e);o(n(t).records,function(t){t&&i(t,a,r.dispatchAction)}),function(t,e){var a,i=t.showTip.length,r=t.hideTip.length;i?a=t.showTip[i-1]:r&&(a=t.hideTip[r-1]),a&&(a.dispatchAction=null,e.dispatchAction(a))}(r.pendings,e)})}n(t).initialized||(n(t).initialized=!0,a("click",i.curry(h,"click")),a("mousemove",i.curry(h,"mousemove")),a("globalout",s))}(l,e),(n(l).records[t]||(n(l).records[t]={})).handler=a}},e.unregister=function(t,e){if(!r.node){var a=e.getZr();(n(a).records||{})[t]&&(n(a).records[t]=null)}}},FBjb:function(t,e,a){var i=a("bYtY"),r=a("oVpE").createSymbol,n=a("IwbS"),o=a("OELB").parsePercent,s=a("x3X8").getDefaultLabel;function h(t,e,a){n.Group.call(this),this.updateData(t,e,a)}var l=h.prototype,u=h.getSymbolSize=function(t,e){var a=t.getItemVisual(e,"symbolSize");return a instanceof Array?a.slice():[+a,+a]};function c(t){return[t[0]/2,t[1]/2]}function f(t,e){this.parent.drift(t,e)}l._createSymbol=function(t,e,a,i,n){this.removeAll();var o=e.getItemVisual(a,"color"),s=r(t,-1,-1,2,2,o,n);s.attr({z2:100,culling:!0,scale:c(i)}),s.drift=f,this._symbolType=t,this.add(s)},l.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)},l.getSymbolPath=function(){return this.childAt(0)},l.getScale=function(){return this.childAt(0).scale},l.highlight=function(){this.childAt(0).trigger("emphasis")},l.downplay=function(){this.childAt(0).trigger("normal")},l.setZ=function(t,e){var a=this.childAt(0);a.zlevel=t,a.z=e},l.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":e.cursor},l.updateData=function(t,e,a){this.silent=!1;var i=t.getItemVisual(e,"symbol")||"circle",r=t.hostModel,o=u(t,e),s=i!==this._symbolType;if(s){var h=t.getItemVisual(e,"symbolKeepAspect");this._createSymbol(i,t,e,o,h)}else{(l=this.childAt(0)).silent=!1,n.updateProps(l,{scale:c(o)},r,e)}if(this._updateCommon(t,e,o,a),s){var l=this.childAt(0),f=a&&a.fadeIn,d={scale:l.scale.slice()};f&&(d.style={opacity:l.style.opacity}),l.scale=[0,0],f&&(l.style.opacity=0),n.initProps(l,d,r,e)}this._seriesModel=r};var d=["itemStyle"],C=["emphasis","itemStyle"],p=["label"],m=["emphasis","label"];function D(t,e){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===e){var a=this.__symbolOriginalScale,i=a[1]/a[0],r={scale:[Math.max(1.1*a[0],a[0]+3),Math.max(1.1*a[1],a[1]+3*i)]};this.animateTo(r,400,"elasticOut")}else"normal"===e&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}l._updateCommon=function(t,e,a,r){var h=this.childAt(0),l=t.hostModel,u=t.getItemVisual(e,"color");"image"!==h.type?h.useStyle({strokeNoScale:!0}):h.setStyle({opacity:1,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var f=r&&r.itemStyle,v=r&&r.hoverItemStyle,g=r&&r.symbolOffset,S=r&&r.labelModel,T=r&&r.hoverLabelModel,I=r&&r.hoverAnimation,y=r&&r.cursorStyle;if(!r||t.hasItemOption){var x=r&&r.itemModel?r.itemModel:t.getItemModel(e);f=x.getModel(d).getItemStyle(["color"]),v=x.getModel(C).getItemStyle(),g=x.getShallow("symbolOffset"),S=x.getModel(p),T=x.getModel(m),I=x.getShallow("hoverAnimation"),y=x.getShallow("cursor")}else v=i.extend({},v);var w=h.style,F=t.getItemVisual(e,"symbolRotate");h.attr("rotation",(F||0)*Math.PI/180||0),g&&h.attr("position",[o(g[0],a[0]),o(g[1],a[1])]),y&&h.attr("cursor",y),h.setColor(u,r&&r.symbolInnerColor),h.setStyle(f);var E=t.getItemVisual(e,"opacity");null!=E&&(w.opacity=E);var b=t.getItemVisual(e,"liftZ"),L=h.__z2Origin;null!=b?null==L&&(h.__z2Origin=h.z2,h.z2+=b):null!=L&&(h.z2=L,h.__z2Origin=null);var M=r&&r.useNameLabel;n.setLabelStyle(w,v,S,T,{labelFetcher:l,labelDataIndex:e,defaultText:function(e,a){return M?t.getName(e):s(t,e)},isRectText:!0,autoColor:u}),h.__symbolOriginalScale=c(a),h.hoverStyle=v,h.highDownOnUpdate=I&&l.isAnimationEnabled()?D:null,n.setHoverStyle(h)},l.fadeOut=function(t,e){var a=this.childAt(0);this.silent=a.silent=!0,(!e||!e.keepLabel)&&(a.style.text=null),n.updateProps(a,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,t)},i.inherits(h,n.Group);var v=h;t.exports=v},FUi9:function(t,e,a){var i=a("bYtY"),r=a("MwEJ"),n=a("aX7z"),o=a("ICMv"),s=a("Qxkt"),h=a("+TT/");h.getLayoutRect;e.getLayoutRect=h.getLayoutRect;var l=a("7hqr"),u=l.enableDataStack,c=l.isDimensionStacked,f=l.getStackedDimension,d=a("hi0g");e.completeDimensions=d;var C=a("sdST");e.createDimensions=C;var p=a("oVpE");e.createSymbol=p.createSymbol;var m={isDimensionStacked:c,enableDataStack:u,getStackedDimension:f};e.createList=function(t){return r(t.getSource(),t)},e.dataStack=m,e.createScale=function(t,e){var a=e;s.isInstance(e)||(a=new s(e),i.mixin(a,o));var r=n.createScaleByModel(a);return r.setExtent(t[0],t[1]),n.niceScaleExtent(r,a),r},e.mixinAxisModelCommonMethods=function(t){i.mixin(t,o)}},FYw3:function(t,e,a){"use strict";e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(a("EJiy"));e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,i.default)(e))&&"function"!=typeof e?t:e}},FgkJ:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},FkhZ:function(t,e,a){a("3+Ww"),a("C5kU"),a("ZY/g"),a("ZWGZ"),a("3P3t"),a("nhJU"),a("l+6R"),t.exports=a("VSTI").Map},Fofx:function(t,e){var a="undefined"==typeof Float32Array?Array:Float32Array;function i(){var t=new a(6);return r(t),t}function r(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}e.create=i,e.identity=r,e.copy=n,e.mul=function(t,e,a){var i=e[0]*a[0]+e[2]*a[1],r=e[1]*a[0]+e[3]*a[1],n=e[0]*a[2]+e[2]*a[3],o=e[1]*a[2]+e[3]*a[3],s=e[0]*a[4]+e[2]*a[5]+e[4],h=e[1]*a[4]+e[3]*a[5]+e[5];return t[0]=i,t[1]=r,t[2]=n,t[3]=o,t[4]=s,t[5]=h,t},e.translate=function(t,e,a){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+a[0],t[5]=e[5]+a[1],t},e.rotate=function(t,e,a){var i=e[0],r=e[2],n=e[4],o=e[1],s=e[3],h=e[5],l=Math.sin(a),u=Math.cos(a);return t[0]=i*u+o*l,t[1]=-i*l+o*u,t[2]=r*u+s*l,t[3]=-r*l+u*s,t[4]=u*n+l*h,t[5]=u*h-l*n,t},e.scale=function(t,e,a){var i=a[0],r=a[1];return t[0]=e[0]*i,t[1]=e[1]*r,t[2]=e[2]*i,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*r,t},e.invert=function(t,e){var a=e[0],i=e[2],r=e[4],n=e[1],o=e[3],s=e[5],h=a*o-n*i;return h?(h=1/h,t[0]=o*h,t[1]=-n*h,t[2]=-i*h,t[3]=a*h,t[4]=(i*s-o*r)*h,t[5]=(n*r-a*s)*h,t):null},e.clone=function(t){var e=i();return n(e,t),e}},FyfS:function(t,e,a){t.exports={default:a("fUKC"),__esModule:!0}},"G+3P":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(a("ODRq"));function r(){this.HistoryData,this.BuyData,this.SellData,this.IndexClose,this.NetCalculateModel=0,this.InitialCapital=1e4,this.Data=new i.default,this.SetPolicyData=function(t){this.HistoryData=t.KLineData,this.BuyData=t.BuyData,this.SellData=t.SellData,t.IndexClose&&(this.IndexClose=t.IndexClose)},this.ClearData=function(){this.Data=new i.default},this.GetBSData=function(t){for(var e=null,a=0;a<this.HistoryData.length;++a){if(this.HistoryData[a].Date>=t){e=a;break}}if(null===e)return null;console.log("[RegressionTest::GetBSData] startDate="+t+" index="+e);var i=[],r=null;for(a=e;a<this.HistoryData.length;++a){var n=this.BuyData[a],o=this.SellData[a],s=this.HistoryData[a];if(null===r){if(n>0){var h={Data:s,Count:0};a+1<this.HistoryData.length&&(h.NextOpen=this.HistoryData[a+1].Open),r={B:[h],S:null}}}else{for(var l in r.B)++r.B[l].Count;if(n>0){h={Data:s,Count:0};a+1<this.HistoryData.length&&(h.NextOpen=this.HistoryData[a+1].Open),r.B.push(h)}else o>0&&(r.S={Data:s},i.push(r),r=null)}}var u={StartDate:this.HistoryData[e].Date,StartIndex:e,Count:this.HistoryData.length-e,BSData:i};return console.log("[RegressionTest::GetBSData] data",u),u},this.Calculate=function(t){var e={Count:t.Count,Max:null,Min:null,Average:null},a={Count:0,Days:0,Success:0,Fail:0,SuccessRate:0};for(var i in t.BSData){var r=t.BSData[i];for(var n in r.B){var o=r.B[n];null===e.Max?e.Max=o.Count:e.Max<o.Count&&(e.Max=o.Count),null===e.Min?e.Min=o.Count:e.Min>o.Count&&(e.Min=o.Count),++a.Count,a.Days+=o.Count,r.S.Data.Close>o.Data.Open?++a.Success:++a.Fail}}a.Count>0&&(e.Average=a.Days/a.Count,a.SuccessRate=a.Success/a.Count);var s,h=1;for(var i in t.BSData){r=t.BSData[i];s=1===this.NetCalculateModel&&r.B[0].NextOpen>0?r.B[0].NextOpen:r.B[0].Data.Open,h*=(r.S.Data.Close-s)/s+1}h-=1;var l=this.HistoryData[t.StartIndex].Close,u=(this.HistoryData[this.HistoryData.length-1].Close-l)/l;console.log("[RegressionTest::Calculate] stock profit first["+this.HistoryData[t.StartIndex].Date+", YClose="+this.HistoryData[t.StartIndex].YClose+"] end["+this.HistoryData[this.HistoryData.length-1].Date+", Close="+this.HistoryData[this.HistoryData.length-1].Close+"]");var c=this.CaclulateNetValue(t),f=null,d=null;c&&c.length>0&&(f=this.CaclulateMaxDropdown(c),this.IndexClose&&(d=this.CaclulateBeta(c)));var C={Day:e,Trade:a,Profit:h,StockProfit:u,Excess:h-u,NetValue:c,MaxDropdown:f,Beta:d,BSDataPair:t.BSData};return console.log("[RegressionTest::Calculate] NetCalculateModel, result ",this.NetCalculateModel,C),C},this.CaclulateNetValue=function(t){for(var e,a=t.StartIndex,i=[],r={Position:0,Cache:this.InitialCapital},n=null,o=a;o<this.HistoryData.length;++o){var s=this.BuyData[o],h=this.SellData[o],l=this.HistoryData[o],u={Date:l.Date,Position:r.Position,Cache:r.Cache,Open:l.Open,Close:l.Close};if(u.MarketValue=u.Position*u.Close+u.Cache,null===n){if(s>0){n={B:{Data:l},S:null},e=1===this.NetCalculateModel&&o+1<this.HistoryData.length&&this.HistoryData[o+1].Open>0?this.HistoryData[o+1].Open:u.Open;var c=parseInt(u.Cache/e),f=u.Cache-e*c;u.Position=c,u.Cache=f,u.MarketValue=u.Position*u.Close+u.Cache}}else if(h>0){n.S={Data:l},n=null;var d=u.Position*u.Close;u.Position=0,u.Cache+=d,u.MarketValue=u.Position*u.Close+u.Cache}r.Position=u.Position,r.Cache=u.Cache,u.Net=u.MarketValue/this.InitialCapital,this.IndexClose&&(u.IndexClose=this.IndexClose[o]),i.push(u)}if(i.length<=0)return[];var C=[];for(o=0;o<i.length;++o){var p=i[o],m={Net:p.Net,Date:p.Date,Close:p.Close};p.IndexClose&&(m.IndexClose=p.IndexClose),C.push(m)}return C},this.CaclulateMaxDropdown=function(t){for(var e,a=t[0].Net,i=0,r=1;r<t.length;++r){var n=t[r],o=1-n.Net/a;i<o&&(i=o,e=n),a<n.Net&&(a=n.Net)}return console.log("[RegressionTest::CaclulateMaxDropdown] maxDay",e),i},this.CaclulateBeta=function(t){for(var e=t[0],a=[],i=[],r=0,n=0,o=1;o<t.length;++o){a[o-1]=0,i[o-1]=0;var s=t[o];s.IndexClose>0&&e.IndexClose>0&&(a[o-1]=(s.IndexClose-e.IndexClose)/e.IndexClose),s.Net>0&&e.Net>0&&(i[o-1]=(s.Net-e.Net)/e.Net),r+=a[o-1],n+=i[o-1],e=s}var h=r/a.length,l=n/i.length,u=0;for(o=0;o<a.length;++o)u+=(i[o]-l)*(a[o]-h);var c=0;for(o=0;o<a.length;++o)c+=(a[o]-h)*(a[o]-h);return u/c},this.Execute=function(t){for(var e in t){var a=t[e];if(this.Data.has(a.Name))console.log("[RegressionTest::Execute] id="+e+" Name="+a.Name+" Date:"+a.Date+" is exsit.");else{console.log("[RegressionTest::Execute] id="+e+" Name="+a.Name+" Date:"+a.Date);var i=this.GetBSData(a.Date),r=this.Calculate(i);this.Data.set(a.Name,r)}}}}r.CaclulateOverlayData=function(t){if(!t.Main||!t.Sub)return null;var e=t.Main.length;for(var a in t.Sub){if(t.Sub[a].length!=e)return console.log("[RegressionTest::OverlayData] id="+a+" data count not match. MainData count="+e),null}var i=[],r={Sub:[]};r.Main=t.Main[0],i.push([]);for(a=0;a<t.Sub.length;++a){var n=t.Sub[a];r.Sub[a]=n[0],i.push([])}for(a=0;a<t.Main.length;++a){var o=(t.Main[a]-r.Main)/r.Main;i[0][a]=o;for(var s=0;s<t.Sub.length;++s){var h=((n=t.Sub[s])[a]-r.Sub[s])/r.Sub[s];i[s+1][a]=h}}return i},r.GetPolicyData=function(t){var e={KLineData:null,IndexClose:null,BuyData:null,SellData:null};for(var a in e.KLineData=t.HistoryData.Data,t.OutVar){var i=t.OutVar[a];"INDEXCLOSE"==i.Name?e.IndexClose=i.Data:"DRAWICON"==i.Name&&i.Draw&&i.Draw.Icon&&(13===i.Draw.Icon.ID?e.BuyData=i.Draw.DrawData:14===i.Draw.Icon.ID&&(e.SellData=i.Draw.DrawData))}return e.KLineData&&e.BuyData&&e.SellData?e:null},e.default={RegressionTest:r}},G43f:function(t,e){function a(t){return t.replace(/\n\r?\s*/g,"")}t.exports=function(t){for(var e="",i=0;i<arguments.length;i++)e+=a(t[i])+(arguments[i+1]||"");return e}},GDZC:function(t,e,a){var i=a("bKEA"),r=a("ZDin").f,n={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"[object Window]"==n.call(t)?function(t){try{return r(t)}catch(t){return o.slice()}}(t):r(i(t))}},GMDS:function(t,e,a){var i=a("bYtY"),r=a("4NgU"),n=a("jkPA"),o=r.prototype,s=r.extend({type:"ordinal",init:function(t,e){t&&!i.isArray(t)||(t=new n({categories:t})),this._ordinalMeta=t,this._extent=e||[0,t.categories.length-1]},parse:function(t){return"string"==typeof t?this._ordinalMeta.getOrdinal(t):Math.round(t)},contain:function(t){return t=this.parse(t),o.contain.call(this,t)&&null!=this._ordinalMeta.categories[t]},normalize:function(t){return o.normalize.call(this,this.parse(t))},scale:function(t){return Math.round(o.scale.call(this,t))},getTicks:function(){for(var t=[],e=this._extent,a=e[0];a<=e[1];)t.push(a),a++;return t},getLabel:function(t){if(!this.isBlank())return this._ordinalMeta.categories[t]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:i.noop,niceExtent:i.noop});s.create=function(){return new s};var h=s;t.exports=h},GQeE:function(t,e,a){t.exports={default:a("1GvH"),__esModule:!0}},GRew:function(t,e){e.f={}.propertyIsEnumerable},GeKi:function(t,e,a){var i=a("bYtY"),r=a("6Ic6"),n=a("IwbS"),o=a("y+Vt"),s=a("sK/D").createClipPath,h=["itemStyle"],l=["emphasis","itemStyle"],u=["color","color0","borderColor","borderColor0"],c=r.extend({type:"candlestick",render:function(t,e,a){this.group.removeClipPath(),this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},incrementalPrepareRender:function(t,e,a){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,a,i){this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t){var e=t.getData(),a=this._data,i=this.group,r=e.getLayout("isSimpleBox"),o=t.get("clip",!0),s=t.coordinateSystem,h=s.getArea&&s.getArea();this._data||i.removeAll(),e.diff(a).add(function(a){if(e.hasValue(a)){var s,l=e.getItemLayout(a);if(o&&C(h,l))return;s=d(l,a,!0),n.initProps(s,{shape:{points:l.ends}},t,a),p(s,e,a,r),i.add(s),e.setItemGraphicEl(a,s)}}).update(function(s,l){var u=a.getItemGraphicEl(l);if(e.hasValue(s)){var c=e.getItemLayout(s);o&&C(h,c)?i.remove(u):(u?n.updateProps(u,{shape:{points:c.ends}},t,s):u=d(c,s),p(u,e,s,r),i.add(u),e.setItemGraphicEl(s,u))}else i.remove(u)}).remove(function(t){var e=a.getItemGraphicEl(t);e&&i.remove(e)}).execute(),this._data=e},_renderLarge:function(t){this._clear(),D(t,this.group);var e=t.get("clip",!0)?s(t.coordinateSystem,!1,t):null;e?this.group.setClipPath(e):this.group.removeClipPath()},_incrementalRenderNormal:function(t,e){for(var a,i=e.getData(),r=i.getLayout("isSimpleBox");null!=(a=t.next());){var n;p(n=d(i.getItemLayout(a),a),i,a,r),n.incremental=!0,this.group.add(n)}},_incrementalRenderLarge:function(t,e){D(e,this.group,!0)},remove:function(t){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:i.noop}),f=o.extend({type:"normalCandlestickBox",shape:{},buildPath:function(t,e){var a=e.points;this.__simpleBox?(t.moveTo(a[4][0],a[4][1]),t.lineTo(a[6][0],a[6][1])):(t.moveTo(a[0][0],a[0][1]),t.lineTo(a[1][0],a[1][1]),t.lineTo(a[2][0],a[2][1]),t.lineTo(a[3][0],a[3][1]),t.closePath(),t.moveTo(a[4][0],a[4][1]),t.lineTo(a[5][0],a[5][1]),t.moveTo(a[6][0],a[6][1]),t.lineTo(a[7][0],a[7][1]))}});function d(t,e,a){var r=t.ends;return new f({shape:{points:a?function(t,e){return i.map(t,function(t){return(t=t.slice())[1]=e.initBaseline,t})}(r,t):r},z2:100})}function C(t,e){for(var a=!0,i=0;i<e.ends.length;i++)if(t.contain(e.ends[i][0],e.ends[i][1])){a=!1;break}return a}function p(t,e,a,i){var r=e.getItemModel(a),o=r.getModel(h),s=e.getItemVisual(a,"color"),c=e.getItemVisual(a,"borderColor")||s,f=o.getItemStyle(u);t.useStyle(f),t.style.strokeNoScale=!0,t.style.fill=s,t.style.stroke=c,t.__simpleBox=i;var d=r.getModel(l).getItemStyle();n.setHoverStyle(t,d)}var m=o.extend({type:"largeCandlestickBox",shape:{},buildPath:function(t,e){for(var a=e.points,i=0;i<a.length;)if(this.__sign===a[i++]){var r=a[i++];t.moveTo(r,a[i++]),t.lineTo(r,a[i++])}else i+=3}});function D(t,e,a){var i=t.getData(),r=i.getLayout("largePoints"),n=new m({shape:{points:r},__sign:1});e.add(n);var o=new m({shape:{points:r},__sign:-1});e.add(o),v(1,n,t,i),v(-1,o,t,i),a&&(n.incremental=!0,o.incremental=!0)}function v(t,e,a,i){var r=t>0?"P":"N",n=i.getVisual("borderColor"+r)||i.getVisual("color"+r),o=a.getModel(h).getItemStyle(u);e.useStyle(o),e.style.fill=null,e.style.stroke=n}var g=c;t.exports=g},Gev7:function(t,e,a){var i=a("bYtY"),r=a("K2GJ"),n=a("1bdT"),o=a("ni6a");function s(t){for(var e in t=t||{},n.call(this,t),t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new r(t.style,this),this._rect=null,this.__clipPaths=null}s.prototype={constructor:s,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var a=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(a[0],a[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?n.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new r(t,this),this.dirty(!1),this},calculateTextPosition:null},i.inherits(s,n),i.mixin(s,o);var h=s;t.exports=h},GfoU:function(t,e,a){var i=a("/F7N"),r=a("yQFZ");t.exports=function(t){return function(e,a){var n,o,s=String(r(e)),h=i(a),l=s.length;return h<0||h>=l?t?"":void 0:(n=s.charCodeAt(h))<55296||n>56319||h+1===l||(o=s.charCodeAt(h+1))<56320||o>57343?t?s.charAt(h):n:t?s.slice(h,h+2):o-56320+(n-55296<<10)+65536}}},GhSp:function(t,e,a){var i=a("d+lc"),r=a("+vXQ"),n=a("M5dz"),o=Object.defineProperty;e.f=a("C61u")?Object.defineProperty:function(t,e,a){if(i(t),e=n(e,!0),i(a),r)try{return o(t,e,a)}catch(t){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(t[e]=a.value),t}},H6uX:function(t,e){var a=Array.prototype.slice,i=function(t){this._$handlers={},this._$eventProcessor=t};function r(t,e,a,i,r,n){var o=t._$handlers;if("function"==typeof a&&(r=i,i=a,a=null),!i||!e)return t;a=function(t,e){var a=t._$eventProcessor;return null!=e&&a&&a.normalizeQuery&&(e=a.normalizeQuery(e)),e}(t,a),o[e]||(o[e]=[]);for(var s=0;s<o[e].length;s++)if(o[e][s].h===i)return t;var h={h:i,one:n,query:a,ctx:r||t,callAtLast:i.zrEventfulCallAtLast},l=o[e].length-1,u=o[e][l];return u&&u.callAtLast?o[e].splice(l,0,h):o[e].push(h),t}i.prototype={constructor:i,one:function(t,e,a,i){return r(this,t,e,a,i,!0)},on:function(t,e,a,i){return r(this,t,e,a,i,!1)},isSilent:function(t){var e=this._$handlers;return!e[t]||!e[t].length},off:function(t,e){var a=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(a[t]){for(var i=[],r=0,n=a[t].length;r<n;r++)a[t][r].h!==e&&i.push(a[t][r]);a[t]=i}a[t]&&0===a[t].length&&delete a[t]}else delete a[t];return this},trigger:function(t){var e=this._$handlers[t],i=this._$eventProcessor;if(e){var r=arguments,n=r.length;n>3&&(r=a.call(r,1));for(var o=e.length,s=0;s<o;){var h=e[s];if(i&&i.filter&&null!=h.query&&!i.filter(t,h.query))s++;else{switch(n){case 1:h.h.call(h.ctx);break;case 2:h.h.call(h.ctx,r[1]);break;case 3:h.h.call(h.ctx,r[1],r[2]);break;default:h.h.apply(h.ctx,r)}h.one?(e.splice(s,1),o--):s++}}}return i&&i.afterTrigger&&i.afterTrigger(t),this},triggerWithContext:function(t){var e=this._$handlers[t],i=this._$eventProcessor;if(e){var r=arguments,n=r.length;n>4&&(r=a.call(r,1,r.length-1));for(var o=r[r.length-1],s=e.length,h=0;h<s;){var l=e[h];if(i&&i.filter&&null!=l.query&&!i.filter(t,l.query))h++;else{switch(n){case 1:l.h.call(o);break;case 2:l.h.call(o,r[1]);break;case 3:l.h.call(o,r[1],r[2]);break;default:l.h.apply(o,r)}l.one?(e.splice(h,1),s--):h++}}}return i&&i.afterTrigger&&i.afterTrigger(t),this}};var n=i;t.exports=n},HEqF:function(t,e){var a="auto",i={"":!0,lr:!0,rl:!0},r={start:!0,middle:!0,end:!0,left:!0,right:!0};function n(t){return"string"==typeof t&&(!!r[t.toLowerCase()]&&t.toLowerCase())}function o(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)t[i]=a[i]}return t}function s(t,e,r){var s=this,h=/MSIE\s8\.0/.test(navigator.userAgent),l={};h?s=document.createElement("custom"):l.enumerable=!0,s.hasBeenReset=!1;var u="",c=!1,f=t,d=e,C=r,p=null,m="",D=!0,v="auto",g="start",S=50,T="middle",I=50,y="middle";if(Object.defineProperty(s,"id",o({},l,{get:function(){return u},set:function(t){u=""+t}})),Object.defineProperty(s,"pauseOnExit",o({},l,{get:function(){return c},set:function(t){c=!!t}})),Object.defineProperty(s,"startTime",o({},l,{get:function(){return f},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",o({},l,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",o({},l,{get:function(){return C},set:function(t){C=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",o({},l,{get:function(){return p},set:function(t){p=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",o({},l,{get:function(){return m},set:function(t){var e=function(t){return"string"==typeof t&&!!i[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",o({},l,{get:function(){return D},set:function(t){D=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",o({},l,{get:function(){return v},set:function(t){if("number"!=typeof t&&t!==a)throw new SyntaxError("An invalid number or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",o({},l,{get:function(){return g},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",o({},l,{get:function(){return S},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");S=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",o({},l,{get:function(){return T},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",o({},l,{get:function(){return I},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");I=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",o({},l,{get:function(){return y},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),s.displayState=void 0,h)return s}s.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},t.exports=s},HSsa:function(t,e,a){"use strict";t.exports=function(t,e){return function(){for(var a=new Array(arguments.length),i=0;i<a.length;i++)a[i]=arguments[i];return t.apply(e,a)}}},Huux:function(t,e,a){a("PJ8w")("Set")},"I90/":function(t,e,a){var i=a("aqg2"),r=a("zBWt")("iterator"),n=a("ig3W");t.exports=a("VSTI").getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||n[i(t)]}},ICMv:function(t,e,a){var i=a("bYtY"),r={getMin:function(t){var e=this.option,a=t||null==e.rangeStart?e.min:e.rangeStart;return this.axis&&null!=a&&"dataMin"!==a&&"function"!=typeof a&&!i.eqNaN(a)&&(a=this.axis.scale.parse(a)),a},getMax:function(t){var e=this.option,a=t||null==e.rangeEnd?e.max:e.rangeEnd;return this.axis&&null!=a&&"dataMax"!==a&&"function"!=typeof a&&!i.eqNaN(a)&&(a=this.axis.scale.parse(a)),a},getNeedCrossZero:function(){var t=this.option;return null==t.rangeStart&&null==t.rangeEnd&&!t.scale},getCoordSysModel:i.noop,setRange:function(t,e){this.option.rangeStart=t,this.option.rangeEnd=e},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}};t.exports=r},IDmD:function(t,e,a){var i=a("bYtY"),r={};function n(){this._coordinateSystems=[]}n.prototype={constructor:n,create:function(t,e){var a=[];i.each(r,function(i,r){var n=i.create(t,e);a=a.concat(n||[])}),this._coordinateSystems=a},update:function(t,e){i.each(this._coordinateSystems,function(a){a.update&&a.update(t,e)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},n.register=function(t,e){r[t]=e},n.get=function(t){return r[t]};var o=n;t.exports=o},IMiH:function(t,e,a){var i=a("Sj9i"),r=a("QBsz"),n=a("4mN7"),o=a("mFDi"),s=a("LPTA").devicePixelRatio,h={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},l=[],u=[],c=[],f=[],d=Math.min,C=Math.max,p=Math.cos,m=Math.sin,D=Math.sqrt,v=Math.abs,g="undefined"!=typeof Float32Array,S=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};S.prototype={constructor:S,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e,a){a=a||0,this._ux=v(a/s/t)||0,this._uy=v(a/s/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return this._ctx=t,t&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(h.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var a=v(t-this._xi)>this._ux||v(e-this._yi)>this._uy||this._len<5;return this.addData(h.L,t,e),this._ctx&&a&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),a&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,a,i,r,n){return this.addData(h.C,t,e,a,i,r,n),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,a,i,r,n):this._ctx.bezierCurveTo(t,e,a,i,r,n)),this._xi=r,this._yi=n,this},quadraticCurveTo:function(t,e,a,i){return this.addData(h.Q,t,e,a,i),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,a,i):this._ctx.quadraticCurveTo(t,e,a,i)),this._xi=a,this._yi=i,this},arc:function(t,e,a,i,r,n){return this.addData(h.A,t,e,a,a,i,r-i,0,n?0:1),this._ctx&&this._ctx.arc(t,e,a,i,r,n),this._xi=p(r)*a+t,this._yi=m(r)*a+e,this},arcTo:function(t,e,a,i,r){return this._ctx&&this._ctx.arcTo(t,e,a,i,r),this},rect:function(t,e,a,i){return this._ctx&&this._ctx.rect(t,e,a,i),this.addData(h.R,t,e,a,i),this},closePath:function(){this.addData(h.Z);var t=this._ctx,e=this._x0,a=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,a),t.closePath()),this._xi=e,this._yi=a,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,a=0;a<t.length;a++)e+=t[a];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length===e||!g||(this.data=new Float32Array(e));for(var a=0;a<e;a++)this.data[a]=t[a];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,a=0,i=this._len,r=0;r<e;r++)a+=t[r].len();g&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+a));for(r=0;r<e;r++)for(var n=t[r].data,o=0;o<n.length;o++)this.data[i++]=n[o];this._len=i},addData:function(t){if(this._saveData){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var a=0;a<arguments.length;a++)e[this._len++]=arguments[a];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var a,i,r=this._dashSum,n=this._dashOffset,o=this._lineDash,s=this._ctx,h=this._xi,l=this._yi,u=t-h,c=e-l,f=D(u*u+c*c),p=h,m=l,v=o.length;for(u/=f,c/=f,n<0&&(n=r+n),p-=(n%=r)*u,m-=n*c;u>0&&p<=t||u<0&&p>=t||0===u&&(c>0&&m<=e||c<0&&m>=e);)p+=u*(a=o[i=this._dashIdx]),m+=c*a,this._dashIdx=(i+1)%v,u>0&&p<h||u<0&&p>h||c>0&&m<l||c<0&&m>l||s[i%2?"moveTo":"lineTo"](u>=0?d(p,t):C(p,t),c>=0?d(m,e):C(m,e));u=p-t,c=m-e,this._dashOffset=-D(u*u+c*c)},_dashedBezierTo:function(t,e,a,r,n,o){var s,h,l,u,c,f=this._dashSum,d=this._dashOffset,C=this._lineDash,p=this._ctx,m=this._xi,v=this._yi,g=i.cubicAt,S=0,T=this._dashIdx,I=C.length,y=0;for(d<0&&(d=f+d),d%=f,s=0;s<1;s+=.1)h=g(m,t,a,n,s+.1)-g(m,t,a,n,s),l=g(v,e,r,o,s+.1)-g(v,e,r,o,s),S+=D(h*h+l*l);for(;T<I&&!((y+=C[T])>d);T++);for(s=(y-d)/S;s<=1;)u=g(m,t,a,n,s),c=g(v,e,r,o,s),T%2?p.moveTo(u,c):p.lineTo(u,c),s+=C[T]/S,T=(T+1)%I;T%2!=0&&p.lineTo(n,o),h=n-u,l=o-c,this._dashOffset=-D(h*h+l*l)},_dashedQuadraticTo:function(t,e,a,i){var r=a,n=i;a=(a+2*t)/3,i=(i+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,a,i,r,n)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,g&&(this.data=new Float32Array(t)))},getBoundingRect:function(){l[0]=l[1]=c[0]=c[1]=Number.MAX_VALUE,u[0]=u[1]=f[0]=f[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,a=0,i=0,s=0,d=0;d<t.length;){var C=t[d++];switch(1===d&&(i=e=t[d],s=a=t[d+1]),C){case h.M:e=i=t[d++],a=s=t[d++],c[0]=i,c[1]=s,f[0]=i,f[1]=s;break;case h.L:n.fromLine(e,a,t[d],t[d+1],c,f),e=t[d++],a=t[d++];break;case h.C:n.fromCubic(e,a,t[d++],t[d++],t[d++],t[d++],t[d],t[d+1],c,f),e=t[d++],a=t[d++];break;case h.Q:n.fromQuadratic(e,a,t[d++],t[d++],t[d],t[d+1],c,f),e=t[d++],a=t[d++];break;case h.A:var D=t[d++],v=t[d++],g=t[d++],S=t[d++],T=t[d++],I=t[d++]+T;d+=1;var y=1-t[d++];1===d&&(i=p(T)*g+D,s=m(T)*S+v),n.fromArc(D,v,g,S,T,I,y,c,f),e=p(I)*g+D,a=m(I)*S+v;break;case h.R:i=e=t[d++],s=a=t[d++];var x=t[d++],w=t[d++];n.fromLine(i,s,i+x,s+w,c,f);break;case h.Z:e=i,a=s}r.min(l,l,c),r.max(u,u,f)}return 0===d&&(l[0]=l[1]=u[0]=u[1]=0),new o(l[0],l[1],u[0]-l[0],u[1]-l[1])},rebuildPath:function(t){for(var e,a,i,r,n,o,s=this.data,l=this._ux,u=this._uy,c=this._len,f=0;f<c;){var d=s[f++];switch(1===f&&(e=i=s[f],a=r=s[f+1]),d){case h.M:e=i=s[f++],a=r=s[f++],t.moveTo(i,r);break;case h.L:n=s[f++],o=s[f++],(v(n-i)>l||v(o-r)>u||f===c-1)&&(t.lineTo(n,o),i=n,r=o);break;case h.C:t.bezierCurveTo(s[f++],s[f++],s[f++],s[f++],s[f++],s[f++]),i=s[f-2],r=s[f-1];break;case h.Q:t.quadraticCurveTo(s[f++],s[f++],s[f++],s[f++]),i=s[f-2],r=s[f-1];break;case h.A:var C=s[f++],D=s[f++],g=s[f++],S=s[f++],T=s[f++],I=s[f++],y=s[f++],x=s[f++],w=g>S?g:S,F=g>S?1:g/S,E=g>S?S/g:1,b=T+I;Math.abs(g-S)>.001?(t.translate(C,D),t.rotate(y),t.scale(F,E),t.arc(0,0,w,T,b,1-x),t.scale(1/F,1/E),t.rotate(-y),t.translate(-C,-D)):t.arc(C,D,w,T,b,1-x),1===f&&(e=p(T)*g+C,a=m(T)*S+D),i=p(b)*g+C,r=m(b)*S+D;break;case h.R:e=i=s[f],a=r=s[f+1],t.rect(s[f++],s[f++],s[f++],s[f++]);break;case h.Z:t.closePath(),i=e,r=a}}}},S.CMD=h;var T=S;t.exports=T},IWp7:function(t,e,a){var i=a("bYtY"),r=a("OELB"),n=a("7aKB"),o=a("lE7J"),s=a("ieMj"),h=s.prototype,l=Math.ceil,u=Math.floor,c=s.extend({type:"time",getLabel:function(t){var e=this._stepLvl,a=new Date(t);return n.formatTime(e[0],a,this.getSetting("useUTC"))},niceExtent:function(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=864e5,e[1]+=864e5),e[1]===-1/0&&e[0]===1/0){var a=new Date;e[1]=+new Date(a.getFullYear(),a.getMonth(),a.getDate()),e[0]=e[1]-864e5}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var i=this._interval;t.fixMin||(e[0]=r.round(u(e[0]/i)*i)),t.fixMax||(e[1]=r.round(l(e[1]/i)*i))},niceTicks:function(t,e,a){t=t||10;var i=this._extent,n=i[1]-i[0],s=n/t;null!=e&&s<e&&(s=e),null!=a&&s>a&&(s=a);var h=f.length,c=function(t,e,a,i){for(;a<i;){var r=a+i>>>1;t[r][1]<e?a=r+1:i=r}return a}(f,s,0,h),d=f[Math.min(c,h-1)],C=d[1];if("year"===d[0]){var p=n/C;C*=r.nice(p/t,!0)}var m=this.getSetting("useUTC")?0:60*new Date(+i[0]||+i[1]).getTimezoneOffset()*1e3,D=[Math.round(l((i[0]-m)/C)*C+m),Math.round(u((i[1]-m)/C)*C+m)];o.fixExtent(D,i),this._stepLvl=d,this._interval=C,this._niceExtent=D},parse:function(t){return+r.parseDate(t)}});i.each(["contain","normalize"],function(t){c.prototype[t]=function(e){return h[t].call(this,this.parse(e))}});var f=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",36e5],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",216e5],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",864e5],["MM-dd\nyyyy",1728e5],["MM-dd\nyyyy",2592e5],["MM-dd\nyyyy",3456e5],["MM-dd\nyyyy",432e6],["MM-dd\nyyyy",5184e5],["week",6048e5],["MM-dd\nyyyy",864e6],["week",12096e5],["week",18144e5],["month",26784e5],["week",36288e5],["month",53568e5],["week",6048e6],["quarter",8208e6],["month",107136e5],["month",13392e6],["half-year",16416e6],["month",214272e5],["month",26784e6],["year",32832e6]];c.create=function(t){return new c({useUTC:t.ecModel.get("useUTC")})};var d=c;t.exports=d},IXuL:function(t,e,a){a("Tghj").__DEV__;var i=a("MwEJ"),r=a("T4UG").extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(t,e){return i(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});t.exports=r},IaFt:function(t,e,a){(function(e){!function(e,a){t.exports=a()}(0,function(){"use strict";"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self;function t(t,e){return t(e={exports:{}},e.exports),e.exports}var a=t(function(t,e){t.exports=function(){function t(t){var e=t&&"object"==typeof t;return e&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function e(e,a){var r=a&&!0===a.clone;return r&&t(e)?i(function(t){return Array.isArray(t)?[]:{}}(e),e,a):e}function a(a,r,n){var o=a.slice();return r.forEach(function(r,s){void 0===o[s]?o[s]=e(r,n):t(r)?o[s]=i(a[s],r,n):-1===a.indexOf(r)&&o.push(e(r,n))}),o}function i(r,n,o){var s=Array.isArray(n),h=o||{arrayMerge:a},l=h.arrayMerge||a;return s?Array.isArray(r)?l(r,n,o):e(n,o):function(a,r,n){var o={};return t(a)&&Object.keys(a).forEach(function(t){o[t]=e(a[t],n)}),Object.keys(r).forEach(function(s){t(r[s])&&a[s]?o[s]=i(a[s],r[s],n):o[s]=e(r[s],n)}),o}(r,n,o)}return i.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce(function(t,a){return i(t,a,e)})},i}()});var i=t(function(t,e){e.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},t.exports=e.default}),r=i.svg,n=i.xlink,o={};o[r.name]=r.uri,o[n.name]=n.uri;var s,h=function(t,e){return void 0===t&&(t=""),"<svg "+function(t){return Object.keys(t).map(function(e){return e+'="'+t[e].toString().replace(/"/g,"&quot;")+'"'}).join(" ")}(a(o,e||{}))+">"+t+"</svg>"},l=i.svg,u=i.xlink,c={attrs:(s={style:["position: absolute","width: 0","height: 0"].join("; ")},s[l.name]=l.uri,s[u.name]=u.uri,s)},f=function(t){this.config=a(c,t||{}),this.symbols=[]};f.prototype.add=function(t){var e=this.symbols,a=this.find(t.id);return a?(e[e.indexOf(a)]=t,!1):(e.push(t),!0)},f.prototype.remove=function(t){var e=this.symbols,a=this.find(t);return!!a&&(e.splice(e.indexOf(a),1),a.destroy(),!0)},f.prototype.find=function(t){return this.symbols.filter(function(e){return e.id===t})[0]||null},f.prototype.has=function(t){return null!==this.find(t)},f.prototype.stringify=function(){var t=this.config.attrs,e=this.symbols.map(function(t){return t.stringify()}).join("");return h(e,t)},f.prototype.toString=function(){return this.stringify()},f.prototype.destroy=function(){this.symbols.forEach(function(t){return t.destroy()})};var d=function(t){var e=t.id,a=t.viewBox,i=t.content;this.id=e,this.viewBox=a,this.content=i};d.prototype.stringify=function(){return this.content},d.prototype.toString=function(){return this.stringify()},d.prototype.destroy=function(){var t=this;["id","viewBox","content"].forEach(function(e){return delete t[e]})};var C=function(t){var e=!!document.importNode,a=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement;return e?document.importNode(a,!0):a},p=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var a={isMounted:{}};return a.isMounted.get=function(){return!!this.node},e.createFromExistingNode=function(t){return new e({id:t.getAttribute("id"),viewBox:t.getAttribute("viewBox"),content:t.outerHTML})},e.prototype.destroy=function(){this.isMounted&&this.unmount(),t.prototype.destroy.call(this)},e.prototype.mount=function(t){if(this.isMounted)return this.node;var e="string"==typeof t?document.querySelector(t):t,a=this.render();return this.node=a,e.appendChild(a),a},e.prototype.render=function(){var t=this.stringify();return C(h(t)).childNodes[0]},e.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(e.prototype,a),e}(d),m={autoConfigure:!0,mountTo:"body",syncUrlsWithBaseTag:!1,listenLocationChangeEvent:!0,locationChangeEvent:"locationChange",locationChangeAngularEmitter:!1,usagesToUpdate:"use[*|href]",moveGradientsOutsideSymbol:!1},D=function(t){return Array.prototype.slice.call(t,0)},v=navigator.userAgent,g={isChrome:/chrome/i.test(v),isFirefox:/firefox/i.test(v),isIE:/msie/i.test(v)||/trident/i.test(v),isEdge:/edge/i.test(v)},S=function(t){var e=[];return D(t.querySelectorAll("style")).forEach(function(t){t.textContent+="",e.push(t)}),e},T=function(t){return(t||window.location.href).split("#")[0]},I=function(t){angular.module("ng").run(["$rootScope",function(e){e.$on("$locationChangeSuccess",function(e,a,i){!function(t,e){var a=document.createEvent("CustomEvent");a.initCustomEvent(t,!1,!1,e),window.dispatchEvent(a)}(t,{oldUrl:i,newUrl:a})})}])},y=function(t,e){return void 0===e&&(e="linearGradient, radialGradient, pattern"),D(t.querySelectorAll("symbol")).forEach(function(t){D(t.querySelectorAll(e)).forEach(function(e){t.parentNode.insertBefore(e,t)})}),t};var x=i.xlink.uri,w="xlink:href",F=/[{}|\\\^\[\]`"<>]/g;function E(t){return t.replace(F,function(t){return"%"+t[0].charCodeAt(0).toString(16).toUpperCase()})}var b,L=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke","style"],M=L.map(function(t){return"["+t+"]"}).join(","),A=function(t,e,a,i){var r=E(a),n=E(i);(function(t,e){return D(t).reduce(function(t,a){if(!a.attributes)return t;var i=D(a.attributes),r=e?i.filter(e):i;return t.concat(r)},[])})(t.querySelectorAll(M),function(t){var e=t.localName,a=t.value;return-1!==L.indexOf(e)&&-1!==a.indexOf("url("+r)}).forEach(function(t){return t.value=t.value.replace(r,n)}),function(t,e,a){D(t).forEach(function(t){var i=t.getAttribute(w);if(i&&0===i.indexOf(e)){var r=i.replace(e,a);t.setAttributeNS(x,w,r)}})}(e,r,n)},O={MOUNT:"mount",SYMBOL_MOUNT:"symbol_mount"},N=function(t){function e(e){var i=this;void 0===e&&(e={}),t.call(this,a(m,e));var r=function(t){return t=t||Object.create(null),{on:function(e,a){(t[e]||(t[e]=[])).push(a)},off:function(e,a){t[e]&&t[e].splice(t[e].indexOf(a)>>>0,1)},emit:function(e,a){(t[e]||[]).map(function(t){t(a)}),(t["*"]||[]).map(function(t){t(e,a)})}}}();this._emitter=r,this.node=null;var n=this.config;if(n.autoConfigure&&this._autoConfigure(e),n.syncUrlsWithBaseTag){var o=document.getElementsByTagName("base")[0].getAttribute("href");r.on(O.MOUNT,function(){return i.updateUrls("#",o)})}var s=this._handleLocationChange.bind(this);this._handleLocationChange=s,n.listenLocationChangeEvent&&window.addEventListener(n.locationChangeEvent,s),n.locationChangeAngularEmitter&&I(n.locationChangeEvent),r.on(O.MOUNT,function(t){n.moveGradientsOutsideSymbol&&y(t)}),r.on(O.SYMBOL_MOUNT,function(t){n.moveGradientsOutsideSymbol&&y(t.parentNode),(g.isIE||g.isEdge)&&S(t)})}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={isMounted:{}};return i.isMounted.get=function(){return!!this.node},e.prototype._autoConfigure=function(t){var e=this.config;void 0===t.syncUrlsWithBaseTag&&(e.syncUrlsWithBaseTag=void 0!==document.getElementsByTagName("base")[0]),void 0===t.locationChangeAngularEmitter&&(e.locationChangeAngularEmitter="angular"in window),void 0===t.moveGradientsOutsideSymbol&&(e.moveGradientsOutsideSymbol=g.isFirefox)},e.prototype._handleLocationChange=function(t){var e=t.detail,a=e.oldUrl,i=e.newUrl;this.updateUrls(a,i)},e.prototype.add=function(e){var a=t.prototype.add.call(this,e);return this.isMounted&&a&&(e.mount(this.node),this._emitter.emit(O.SYMBOL_MOUNT,e.node)),a},e.prototype.attach=function(t){var e=this,a=this;if(a.isMounted)return a.node;var i="string"==typeof t?document.querySelector(t):t;return a.node=i,this.symbols.forEach(function(t){t.mount(a.node),e._emitter.emit(O.SYMBOL_MOUNT,t.node)}),D(i.querySelectorAll("symbol")).forEach(function(t){var e=p.createFromExistingNode(t);e.node=t,a.add(e)}),this._emitter.emit(O.MOUNT,i),i},e.prototype.destroy=function(){var t=this.config,e=this.symbols,a=this._emitter;e.forEach(function(t){return t.destroy()}),a.off("*"),window.removeEventListener(t.locationChangeEvent,this._handleLocationChange),this.isMounted&&this.unmount()},e.prototype.mount=function(t,e){void 0===t&&(t=this.config.mountTo),void 0===e&&(e=!1);if(this.isMounted)return this.node;var a="string"==typeof t?document.querySelector(t):t,i=this.render();return this.node=i,e&&a.childNodes[0]?a.insertBefore(i,a.childNodes[0]):a.appendChild(i),this._emitter.emit(O.MOUNT,i),i},e.prototype.render=function(){return C(this.stringify())},e.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},e.prototype.updateUrls=function(t,e){if(!this.isMounted)return!1;var a=document.querySelectorAll(this.config.usagesToUpdate);return A(this.node,a,T(t)+"#",T(e)+"#"),!0},Object.defineProperties(e.prototype,i),e}(f),P=t(function(t){
/*!
  * domready (c) Dustin Diaz 2014 - License MIT
  */
t.exports=function(){var t,e=[],a=document,i=(a.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(a.readyState);return i||a.addEventListener("DOMContentLoaded",t=function(){for(a.removeEventListener("DOMContentLoaded",t),i=1;t=e.shift();)t()}),function(t){i?setTimeout(t,0):e.push(t)}}()});!!window.__SVG_SPRITE__?b=window.__SVG_SPRITE__:(b=new N({attrs:{id:"__SVG_SPRITE_NODE__"}}),window.__SVG_SPRITE__=b);var R=function(){var t=document.getElementById("__SVG_SPRITE_NODE__");t?b.attach(t):b.mount(document.body,!0)};return document.body?R():P(R),b})}).call(this,a("yLpj"))},"Ir+t":function(t,e,a){a("3+Ww"),a("C5kU"),a("ZY/g"),a("xXl2"),a("Nlwn"),a("XLeT"),t.exports=a("VSTI").Promise},ItGF:function(t,e){var a="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:function(t){var e={},a=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),r=t.match(/Edge\/([\d.]+)/),n=/micromessenger/i.test(t);a&&(e.firefox=!0,e.version=a[1]);i&&(e.ie=!0,e.version=i[1]);r&&(e.edge=!0,e.version=r[1]);n&&(e.weChat=!0);return{browser:e,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!e.ie&&!e.edge,pointerEventsSupported:"onpointerdown"in window&&(e.edge||e.ie&&e.version>=11),domSupported:"undefined"!=typeof document}}(navigator.userAgent);t.exports=a},IwbS:function(t,e,a){var i=a("bYtY"),r=a("NC18"),n=a("Qe9p"),o=a("Fofx"),s=a("QBsz"),h=a("y+Vt"),l=a("DN4a"),u=a("Dagg");e.Image=u;var c=a("4fz+");e.Group=c;var f=a("dqUG");e.Text=f;var d=a("2fw6");e.Circle=d;var C=a("SqI9");e.Sector=C;var p=a("RXMa");e.Ring=p;var m=a("h7HQ");e.Polygon=m;var D=a("1Jh7");e.Polyline=D;var v=a("x6Kt");e.Rect=v;var g=a("yxFR");e.Line=g;var S=a("rA99");e.BezierCurve=S;var T=a("jTL6");e.Arc=T;var I=a("1MYJ");e.CompoundPath=I;var y=a("SKnc");e.LinearGradient=y;var x=a("3e3G");e.RadialGradient=x;var w=a("mFDi");e.BoundingRect=w;var F=a("OS9S");e.IncrementalDisplayable=F;var E=a("nPnh"),b=Math.max,L=Math.min,M={},A=1,O="emphasis",N="normal",P=1,R={},_={};function B(t,e){_[t]=e}function k(t,e,a,i){var n=r.createFromString(t,e);return a&&("center"===i&&(a=G(a,n.getBoundingRect())),H(n,a)),n}function G(t,e){var a,i=e.width/e.height,r=t.height*i;return a=r<=t.width?t.height:(r=t.width)/i,{x:t.x+t.width/2-r/2,y:t.y+t.height/2-a/2,width:r,height:a}}var V=r.mergePath;function H(t,e){if(t.applyTransform){var a=t.getBoundingRect().calculateTransform(e);t.applyTransform(a)}}var Y=E.subPixelOptimize;function X(t){return null!=t&&"none"!==t}var W=i.createHashMap(),U=0;function K(t){var e=t.__hoverStl;if(e&&!t.__highlighted){var a=t.__zr,i=t.useHoverLayer&&a&&"canvas"===a.painter.type;if(t.__highlighted=i?"layer":"plain",!(t.isGroup||!a&&t.useHoverLayer)){var r=t,n=t.style;i&&(n=(r=a.addHover(t)).style),ht(n),i||function(t){if(t.__hoverStlDirty){t.__hoverStlDirty=!1;var e=t.__hoverStl;if(e){var a=t.__cachedNormalStl={};t.__cachedNormalZ2=t.z2;var i=t.style;for(var r in e)null!=e[r]&&(a[r]=i[r]);a.fill=i.fill,a.stroke=i.stroke}else t.__cachedNormalStl=t.__cachedNormalZ2=null}}(r),n.extendFrom(e),z(n,e,"fill"),z(n,e,"stroke"),st(n),i||(t.dirty(!1),t.z2+=A)}}}function z(t,e,a){!X(e[a])&&X(t[a])&&(t[a]=function(t){if("string"!=typeof t)return t;var e=W.get(t);return e||(e=n.lift(t,-.1),U<1e4&&(W.set(t,e),U++)),e}(t[a]))}function J(t){var e=t.__highlighted;if(e&&(t.__highlighted=!1,!t.isGroup))if("layer"===e)t.__zr&&t.__zr.removeHover(t);else{var a=t.style,i=t.__cachedNormalStl;i&&(ht(a),t.setStyle(i),st(a));var r=t.__cachedNormalZ2;null!=r&&t.z2-r===A&&(t.z2=r)}}function j(t,e,a){var i,r=N,n=N;t.__highlighted&&(r=O,i=!0),e(t,a),t.__highlighted&&(n=O,i=!0),t.isGroup&&t.traverse(function(t){!t.isGroup&&e(t,a)}),i&&t.__highDownOnUpdate&&t.__highDownOnUpdate(r,n)}function q(t,e){e=t.__hoverStl=!1!==e&&(t.hoverStyle||e||{}),t.__hoverStlDirty=!0,t.__highlighted&&(t.__cachedNormalStl=null,J(t),K(t))}function Z(t){!et(this,t)&&!this.__highByOuter&&j(this,K)}function Q(t){!et(this,t)&&!this.__highByOuter&&j(this,J)}function $(t){this.__highByOuter|=1<<(t||0),j(this,K)}function tt(t){!(this.__highByOuter&=~(1<<(t||0)))&&j(this,J)}function et(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function at(t,e){var a=!1===e;if(t.__highDownSilentOnTouch=t.highDownSilentOnTouch,t.__highDownOnUpdate=t.highDownOnUpdate,!a||t.__highDownDispatcher){var i=a?"off":"on";t[i]("mouseover",Z)[i]("mouseout",Q),t[i]("emphasis",$)[i]("normal",tt),t.__highByOuter=t.__highByOuter||0,t.__highDownDispatcher=!a}}function it(t,e,a,r,n){return rt(t,e,r,n),a&&i.extend(t,a),t}function rt(t,e,a,r){if((a=a||M).isRectText){var n;a.getTextPosition?n=a.getTextPosition(e,r):"outside"===(n=e.getShallow("position")||(r?null:"inside"))&&(n="top"),t.textPosition=n,t.textOffset=e.getShallow("offset");var o=e.getShallow("rotate");null!=o&&(o*=Math.PI/180),t.textRotation=o,t.textDistance=i.retrieve2(e.getShallow("distance"),r?null:5)}var s,h=e.ecModel,l=h&&h.option.textStyle,u=function(t){var e;for(;t&&t!==t.ecModel;){var a=(t.option||M).rich;if(a)for(var i in e=e||{},a)a.hasOwnProperty(i)&&(e[i]=1);t=t.parentModel}return e}(e);if(u)for(var c in s={},u)if(u.hasOwnProperty(c)){var f=e.getModel(["rich",c]);nt(s[c]={},f,l,a,r)}return t.rich=s,nt(t,e,l,a,r,!0),a.forceRich&&!a.textStyle&&(a.textStyle={}),t}function nt(t,e,a,r,n,o){a=!n&&a||M,t.textFill=ot(e.getShallow("color"),r)||a.color,t.textStroke=ot(e.getShallow("textBorderColor"),r)||a.textBorderColor,t.textStrokeWidth=i.retrieve2(e.getShallow("textBorderWidth"),a.textBorderWidth),n||(o&&(t.insideRollbackOpt=r,st(t)),null==t.textFill&&(t.textFill=r.autoColor)),t.fontStyle=e.getShallow("fontStyle")||a.fontStyle,t.fontWeight=e.getShallow("fontWeight")||a.fontWeight,t.fontSize=e.getShallow("fontSize")||a.fontSize,t.fontFamily=e.getShallow("fontFamily")||a.fontFamily,t.textAlign=e.getShallow("align"),t.textVerticalAlign=e.getShallow("verticalAlign")||e.getShallow("baseline"),t.textLineHeight=e.getShallow("lineHeight"),t.textWidth=e.getShallow("width"),t.textHeight=e.getShallow("height"),t.textTag=e.getShallow("tag"),o&&r.disableBox||(t.textBackgroundColor=ot(e.getShallow("backgroundColor"),r),t.textPadding=e.getShallow("padding"),t.textBorderColor=ot(e.getShallow("borderColor"),r),t.textBorderWidth=e.getShallow("borderWidth"),t.textBorderRadius=e.getShallow("borderRadius"),t.textBoxShadowColor=e.getShallow("shadowColor"),t.textBoxShadowBlur=e.getShallow("shadowBlur"),t.textBoxShadowOffsetX=e.getShallow("shadowOffsetX"),t.textBoxShadowOffsetY=e.getShallow("shadowOffsetY")),t.textShadowColor=e.getShallow("textShadowColor")||a.textShadowColor,t.textShadowBlur=e.getShallow("textShadowBlur")||a.textShadowBlur,t.textShadowOffsetX=e.getShallow("textShadowOffsetX")||a.textShadowOffsetX,t.textShadowOffsetY=e.getShallow("textShadowOffsetY")||a.textShadowOffsetY}function ot(t,e){return"auto"!==t?t:e&&e.autoColor?e.autoColor:null}function st(t){var e,a=t.textPosition,i=t.insideRollbackOpt;if(i&&null==t.textFill){var r=i.autoColor,n=i.isRectText,o=i.useInsideStyle,s=!1!==o&&(!0===o||n&&a&&"string"==typeof a&&a.indexOf("inside")>=0),h=!s&&null!=r;(s||h)&&(e={textFill:t.textFill,textStroke:t.textStroke,textStrokeWidth:t.textStrokeWidth}),s&&(t.textFill="#fff",null==t.textStroke&&(t.textStroke=r,null==t.textStrokeWidth&&(t.textStrokeWidth=2))),h&&(t.textFill=r)}t.insideRollback=e}function ht(t){var e=t.insideRollback;e&&(t.textFill=e.textFill,t.textStroke=e.textStroke,t.textStrokeWidth=e.textStrokeWidth,t.insideRollback=null)}function lt(t,e,a,i,r,n){if("function"==typeof r&&(n=r,r=null),i&&i.isAnimationEnabled()){var o=t?"Update":"",s=i.getShallow("animationDuration"+o),h=i.getShallow("animationEasing"+o),l=i.getShallow("animationDelay"+o);"function"==typeof l&&(l=l(r,i.getAnimationDelayParams?i.getAnimationDelayParams(e,r):null)),"function"==typeof s&&(s=s(r)),s>0?e.animateTo(a,s,l||0,h,n,!!n):(e.stopAnimation(),e.attr(a),n&&n())}else e.stopAnimation(),e.attr(a),n&&n()}function ut(t,e,a,i,r){lt(!0,t,e,a,i,r)}function ct(t,e,a){return e&&!i.isArrayLike(e)&&(e=l.getLocalTransform(e)),a&&(e=o.invert([],e)),s.applyTransform([],t,e)}function ft(t,e,a,i,r,n,o,s){var h=a-t,l=i-e,u=o-r,c=s-n,f=dt(u,c,h,l);if(function(t){return t<=1e-6&&t>=-1e-6}(f))return!1;var d=t-r,C=e-n,p=dt(d,C,h,l)/f;if(p<0||p>1)return!1;var m=dt(d,C,u,c)/f;return!(m<0||m>1)}function dt(t,e,a,i){return t*i-a*e}B("circle",d),B("sector",C),B("ring",p),B("polygon",m),B("polyline",D),B("rect",v),B("line",g),B("bezierCurve",S),B("arc",T),e.Z2_EMPHASIS_LIFT=A,e.CACHED_LABEL_STYLE_PROPERTIES={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},e.extendShape=function(t){return h.extend(t)},e.extendPath=function(t,e){return r.extendFromString(t,e)},e.registerShape=B,e.getShapeClass=function(t){if(_.hasOwnProperty(t))return _[t]},e.makePath=k,e.makeImage=function(t,e,a){var i=new u({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(t){if("center"===a){var r={width:t.width,height:t.height};i.setStyle(G(e,r))}}});return i},e.mergePath=V,e.resizePath=H,e.subPixelOptimizeLine=function(t){return E.subPixelOptimizeLine(t.shape,t.shape,t.style),t},e.subPixelOptimizeRect=function(t){return E.subPixelOptimizeRect(t.shape,t.shape,t.style),t},e.subPixelOptimize=Y,e.setElementHoverStyle=q,e.setHoverStyle=function(t,e){at(t,!0),j(t,q,e)},e.setAsHighDownDispatcher=at,e.isHighDownDispatcher=function(t){return!(!t||!t.__highDownDispatcher)},e.getHighlightDigit=function(t){var e=R[t];return null==e&&P<=32&&(e=R[t]=P++),e},e.setLabelStyle=function(t,e,a,r,n,o,s){var h,l=(n=n||M).labelFetcher,u=n.labelDataIndex,c=n.labelDimIndex,f=n.labelProp,d=a.getShallow("show"),C=r.getShallow("show");(d||C)&&(l&&(h=l.getFormattedLabel(u,"normal",null,c,f)),null==h&&(h=i.isFunction(n.defaultText)?n.defaultText(u,n):n.defaultText));var p=d?h:null,m=C?i.retrieve2(l?l.getFormattedLabel(u,"emphasis",null,c,f):null,h):null;null==p&&null==m||(it(t,a,o,n),it(e,r,s,n,!0)),t.text=p,e.text=m},e.modifyLabelStyle=function(t,e,a){var r=t.style;e&&(ht(r),t.setStyle(e),st(r)),r=t.__hoverStl,a&&r&&(ht(r),i.extend(r,a),st(r))},e.setTextStyle=it,e.setText=function(t,e,a){var i,r={isRectText:!0};!1===a?i=!0:r.autoColor=a,rt(t,e,r,i)},e.getFont=function(t,e){var a=e&&e.getModel("textStyle");return i.trim([t.fontStyle||a&&a.getShallow("fontStyle")||"",t.fontWeight||a&&a.getShallow("fontWeight")||"",(t.fontSize||a&&a.getShallow("fontSize")||12)+"px",t.fontFamily||a&&a.getShallow("fontFamily")||"sans-serif"].join(" "))},e.updateProps=ut,e.initProps=function(t,e,a,i,r){lt(!1,t,e,a,i,r)},e.getTransform=function(t,e){for(var a=o.identity([]);t&&t!==e;)o.mul(a,t.getLocalTransform(),a),t=t.parent;return a},e.applyTransform=ct,e.transformDirection=function(t,e,a){var i=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),r=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),n=["left"===t?-i:"right"===t?i:0,"top"===t?-r:"bottom"===t?r:0];return n=ct(n,e,a),Math.abs(n[0])>Math.abs(n[1])?n[0]>0?"right":"left":n[1]>0?"bottom":"top"},e.groupTransition=function(t,e,a,r){if(t&&e){var n=function(t){var e={};return t.traverse(function(t){!t.isGroup&&t.anid&&(e[t.anid]=t)}),e}(t);e.traverse(function(t){if(!t.isGroup&&t.anid){var e=n[t.anid];if(e){var i=o(t);t.attr(o(e)),ut(t,i,a,t.dataIndex)}}})}function o(t){var e={position:s.clone(t.position),rotation:t.rotation};return t.shape&&(e.shape=i.extend({},t.shape)),e}},e.clipPointsByRect=function(t,e){return i.map(t,function(t){var a=t[0];a=b(a,e.x),a=L(a,e.x+e.width);var i=t[1];return i=b(i,e.y),[a,i=L(i,e.y+e.height)]})},e.clipRectByRect=function(t,e){var a=b(t.x,e.x),i=L(t.x+t.width,e.x+e.width),r=b(t.y,e.y),n=L(t.y+t.height,e.y+e.height);if(i>=a&&n>=r)return{x:a,y:r,width:i-a,height:n-r}},e.createIcon=function(t,e,a){var r=(e=i.extend({rectHover:!0},e)).style={strokeNoScale:!0};if(a=a||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(r.image=t.slice(8),i.defaults(r,a),new u(e)):k(t.replace("path://",""),e,a,"center")},e.linePolygonIntersect=function(t,e,a,i,r){for(var n=0,o=r[r.length-1];n<r.length;n++){var s=r[n];if(ft(t,e,a,i,s[0],s[1],o[0],o[1]))return!0;o=s}},e.lineLineIntersect=ft},JAUQ:function(t,e,a){var i=a("ekG2");t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},JEQr:function(t,e,a){"use strict";(function(e){var i=a("xTJ+"),r=a("yK9s"),n={"Content-Type":"application/x-www-form-urlencoded"};function o(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=a("tQ2B"):void 0!==e&&"[object process]"===Object.prototype.toString.call(e)&&(t=a("tQ2B")),t}(),transformRequest:[function(t,e){return r(e,"Accept"),r(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(o(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],function(t){s.headers[t]={}}),i.forEach(["post","put","patch"],function(t){s.headers[t]=i.merge(n)}),t.exports=s}).call(this,a("8oxB"))},JKKi:function(t,e,a){var i=a("d+lc"),r=a("ekG2"),n=a("8sL3");t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var a=n.f(t);return(0,a.resolve)(e),a.promise}},JpO0:function(t,e,a){var i=a("CYMq"),r=a("znrX");a("czaS")("getPrototypeOf",function(){return function(t){return r(i(t))}})},Jt1Q:function(t,e,a){"use strict";var i=a("b08l"),r=a("ENu8"),n=a("kvAF"),o={};a("BRsN")(o,a("zBWt")("iterator"),function(){return this}),t.exports=function(t,e,a){t.prototype=i(o,{next:r(1,a)}),n(t,e+" Iterator")}},JuEJ:function(t,e,a){var i=a("bYtY"),r=a("4NO4"),n=i.each,o=i.isObject,s=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function h(t){var e=t&&t.itemStyle;if(e)for(var a=0,r=s.length;a<r;a++){var n=s[a],o=e.normal,h=e.emphasis;o&&o[n]&&(t[n]=t[n]||{},t[n].normal?i.merge(t[n].normal,o[n]):t[n].normal=o[n],o[n]=null),h&&h[n]&&(t[n]=t[n]||{},t[n].emphasis?i.merge(t[n].emphasis,h[n]):t[n].emphasis=h[n],h[n]=null)}}function l(t,e,a){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var r=t[e].normal,n=t[e].emphasis;r&&(a?(t[e].normal=t[e].emphasis=null,i.defaults(t[e],r)):t[e]=r),n&&(t.emphasis=t.emphasis||{},t.emphasis[e]=n)}}function u(t){l(t,"itemStyle"),l(t,"lineStyle"),l(t,"areaStyle"),l(t,"label"),l(t,"labelLine"),l(t,"upperLabel"),l(t,"edgeLabel")}function c(t,e){var a=o(t)&&t[e],i=o(a)&&a.textStyle;if(i)for(var n=0,s=r.TEXT_STYLE_OPTIONS.length;n<s;n++){e=r.TEXT_STYLE_OPTIONS[n];i.hasOwnProperty(e)&&(a[e]=i[e])}}function f(t){t&&(u(t),c(t,"label"),t.emphasis&&c(t.emphasis,"label"))}function d(t){return i.isArray(t)?t:t?[t]:[]}function C(t){return(i.isArray(t)?t[0]:t)||{}}t.exports=function(t,e){n(d(t.series),function(t){o(t)&&function(t){if(o(t)){h(t),u(t),c(t,"label"),c(t,"upperLabel"),c(t,"edgeLabel"),t.emphasis&&(c(t.emphasis,"label"),c(t.emphasis,"upperLabel"),c(t.emphasis,"edgeLabel")),(a=t.markPoint)&&(h(a),f(a)),(r=t.markLine)&&(h(r),f(r));var e=t.markArea;e&&f(e);var a,r,n=t.data;if("graph"===t.type){n=n||t.nodes;var s=t.links||t.edges;if(s&&!i.isTypedArray(s))for(var d=0;d<s.length;d++)f(s[d]);i.each(t.categories,function(t){u(t)})}if(n&&!i.isTypedArray(n))for(d=0;d<n.length;d++)f(n[d]);if((a=t.markPoint)&&a.data){var C=a.data;for(d=0;d<C.length;d++)f(C[d])}if((r=t.markLine)&&r.data){var p=r.data;for(d=0;d<p.length;d++)i.isArray(p[d])?(f(p[d][0]),f(p[d][1])):f(p[d])}"gauge"===t.type?(c(t,"axisLabel"),c(t,"title"),c(t,"detail")):"treemap"===t.type?(l(t.breadcrumb,"itemStyle"),i.each(t.levels,function(t){u(t)})):"tree"===t.type&&u(t.leaves)}}(t)});var a=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&a.push("valueAxis","categoryAxis","logAxis","timeAxis"),n(a,function(e){n(d(t[e]),function(t){t&&(c(t,"axisLabel"),c(t.axisPointer,"label"))})}),n(d(t.parallel),function(t){var e=t&&t.parallelAxisDefault;c(e,"axisLabel"),c(e&&e.axisPointer,"label")}),n(d(t.calendar),function(t){l(t,"itemStyle"),c(t,"dayLabel"),c(t,"monthLabel"),c(t,"yearLabel")}),n(d(t.radar),function(t){c(t,"name")}),n(d(t.geo),function(t){o(t)&&(f(t),n(d(t.regions),function(t){f(t)}))}),n(d(t.timeline),function(t){f(t),l(t,"label"),l(t,"itemStyle"),l(t,"controlStyle",!0);var e=t.data;i.isArray(e)&&i.each(e,function(t){i.isObject(t)&&(l(t,"label"),l(t,"itemStyle"))})}),n(d(t.toolbox),function(t){l(t,"iconStyle"),n(t.feature,function(t){l(t,"iconStyle")})}),c(C(t.axisPointer),"label"),c(C(t.tooltip).axisPointer,"label")}},K2GJ:function(t,e,a){var i=a("fW2E"),r=a("gut8").ContextCachedBy,n=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],o=function(t){this.extendFrom(t,!1)};function s(t,e,a){var i=null==e.x?0:e.x,r=null==e.x2?1:e.x2,n=null==e.y?0:e.y,o=null==e.y2?0:e.y2;return e.global||(i=i*a.width+a.x,r=r*a.width+a.x,n=n*a.height+a.y,o=o*a.height+a.y),i=isNaN(i)?0:i,r=isNaN(r)?1:r,n=isNaN(n)?0:n,o=isNaN(o)?0:o,t.createLinearGradient(i,n,r,o)}function h(t,e,a){var i=a.width,r=a.height,n=Math.min(i,r),o=null==e.x?.5:e.x,s=null==e.y?.5:e.y,h=null==e.r?.5:e.r;return e.global||(o=o*i+a.x,s=s*r+a.y,h*=n),t.createRadialGradient(o,s,0,o,s,h)}for(var l=o.prototype={constructor:o,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,a){var o=a&&a.style,s=!o||t.__attrCachedBy!==r.STYLE_BIND;t.__attrCachedBy=r.STYLE_BIND;for(var h=0;h<n.length;h++){var l=n[h],u=l[0];(s||this[u]!==o[u])&&(t[u]=i(t,u,this[u]||l[1]))}if((s||this.fill!==o.fill)&&(t.fillStyle=this.fill),(s||this.stroke!==o.stroke)&&(t.strokeStyle=this.stroke),(s||this.opacity!==o.opacity)&&(t.globalAlpha=null==this.opacity?1:this.opacity),(s||this.blend!==o.blend)&&(t.globalCompositeOperation=this.blend||"source-over"),this.hasStroke()){var c=this.lineWidth;t.lineWidth=c/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&this.lineWidth>0},extendFrom:function(t,e){if(t)for(var a in t)!t.hasOwnProperty(a)||!0!==e&&(!1===e?this.hasOwnProperty(a):null==t[a])||(this[a]=t[a])},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,a){for(var i=("radial"===e.type?h:s)(t,e,a),r=e.colorStops,n=0;n<r.length;n++)i.addColorStop(r[n].offset,r[n].color);return i}},u=0;u<n.length;u++){var c=n[u];c[0]in l||(l[c[0]]=c[1])}o.getGradient=l.getGradient;var f=o;t.exports=f},KCsZ:function(t,e,a){var i=a("bYtY");t.exports=function(t){for(var e=0;e<t.length;e++)t[e][1]||(t[e][1]=t[e][0]);return function(e,a,r){for(var n={},o=0;o<t.length;o++){var s=t[o][1];if(!(a&&i.indexOf(a,s)>=0||r&&i.indexOf(r,s)<0)){var h=e.getShallow(s);null!=h&&(n[t[o][0]]=h)}}return n}}},"KHd+":function(t,e,a){"use strict";function i(t,e,a,i,r,n,o,s){var h,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=a,l._compiled=!0),i&&(l.functional=!0),n&&(l._scopeId="data-v-"+n),o?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=h):r&&(h=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),h)if(l.functional){l._injectStyles=h;var u=l.render;l.render=function(t,e){return h.call(e),u(t,e)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,h):[h]}return{exports:t,options:l}}a.d(e,"a",function(){return i})},Kagy:function(t,e){t.exports={legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}}},KtlF:function(t,e,a){var i=a("aqg2"),r=a("AjXP");t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},Kw5r:function(t,e,a){"use strict";a.r(e),function(t){
/*!
 * Vue.js v2.5.17
 * (c) 2014-2018 Evan You
 * Released under the MIT License.
 */
var a=Object.freeze({});function i(t){return void 0===t||null===t}function r(t){return void 0!==t&&null!==t}function n(t){return!0===t}function o(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function s(t){return null!==t&&"object"==typeof t}var h=Object.prototype.toString;function l(t){return"[object Object]"===h.call(t)}function u(t){return"[object RegExp]"===h.call(t)}function c(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function f(t){return null==t?"":"object"==typeof t?JSON.stringify(t,null,2):String(t)}function d(t){var e=parseFloat(t);return isNaN(e)?t:e}function C(t,e){for(var a=Object.create(null),i=t.split(","),r=0;r<i.length;r++)a[i[r]]=!0;return e?function(t){return a[t.toLowerCase()]}:function(t){return a[t]}}C("slot,component",!0);var p=C("key,ref,slot,slot-scope,is");function m(t,e){if(t.length){var a=t.indexOf(e);if(a>-1)return t.splice(a,1)}}var D=Object.prototype.hasOwnProperty;function v(t,e){return D.call(t,e)}function g(t){var e=Object.create(null);return function(a){return e[a]||(e[a]=t(a))}}var S=/-(\w)/g,T=g(function(t){return t.replace(S,function(t,e){return e?e.toUpperCase():""})}),I=g(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),y=/\B([A-Z])/g,x=g(function(t){return t.replace(y,"-$1").toLowerCase()});var w=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function a(a){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,a):t.call(e)}return a._length=t.length,a};function F(t,e){e=e||0;for(var a=t.length-e,i=new Array(a);a--;)i[a]=t[a+e];return i}function E(t,e){for(var a in e)t[a]=e[a];return t}function b(t){for(var e={},a=0;a<t.length;a++)t[a]&&E(e,t[a]);return e}function L(t,e,a){}var M=function(t,e,a){return!1},A=function(t){return t};function O(t,e){if(t===e)return!0;var a=s(t),i=s(e);if(!a||!i)return!a&&!i&&String(t)===String(e);try{var r=Array.isArray(t),n=Array.isArray(e);if(r&&n)return t.length===e.length&&t.every(function(t,a){return O(t,e[a])});if(r||n)return!1;var o=Object.keys(t),h=Object.keys(e);return o.length===h.length&&o.every(function(a){return O(t[a],e[a])})}catch(t){return!1}}function N(t,e){for(var a=0;a<t.length;a++)if(O(t[a],e))return a;return-1}function P(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var R="data-server-rendered",_=["component","directive","filter"],B=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],k={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:M,isReservedAttr:M,isUnknownElement:M,getTagNamespace:L,parsePlatformTagName:A,mustUseProp:M,_lifecycleHooks:B};function G(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function V(t,e,a,i){Object.defineProperty(t,e,{value:a,enumerable:!!i,writable:!0,configurable:!0})}var H=/[^\w.$]/;var Y,X="__proto__"in{},W="undefined"!=typeof window,U="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,K=U&&WXEnvironment.platform.toLowerCase(),z=W&&window.navigator.userAgent.toLowerCase(),J=z&&/msie|trident/.test(z),j=z&&z.indexOf("msie 9.0")>0,q=z&&z.indexOf("edge/")>0,Z=(z&&z.indexOf("android"),z&&/iphone|ipad|ipod|ios/.test(z)||"ios"===K),Q=(z&&/chrome\/\d+/.test(z),{}.watch),$=!1;if(W)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){$=!0}}),window.addEventListener("test-passive",null,tt)}catch(t){}var et=function(){return void 0===Y&&(Y=!W&&!U&&void 0!==t&&"server"===t.process.env.VUE_ENV),Y},at=W&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function it(t){return"function"==typeof t&&/native code/.test(t.toString())}var rt,nt="undefined"!=typeof Symbol&&it(Symbol)&&"undefined"!=typeof Reflect&&it(Reflect.ownKeys);rt="undefined"!=typeof Set&&it(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var ot=L,st=0,ht=function(){this.id=st++,this.subs=[]};ht.prototype.addSub=function(t){this.subs.push(t)},ht.prototype.removeSub=function(t){m(this.subs,t)},ht.prototype.depend=function(){ht.target&&ht.target.addDep(this)},ht.prototype.notify=function(){for(var t=this.subs.slice(),e=0,a=t.length;e<a;e++)t[e].update()},ht.target=null;var lt=[];function ut(t){ht.target&&lt.push(ht.target),ht.target=t}function ct(){ht.target=lt.pop()}var ft=function(t,e,a,i,r,n,o,s){this.tag=t,this.data=e,this.children=a,this.text=i,this.elm=r,this.ns=void 0,this.context=n,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},dt={child:{configurable:!0}};dt.child.get=function(){return this.componentInstance},Object.defineProperties(ft.prototype,dt);var Ct=function(t){void 0===t&&(t="");var e=new ft;return e.text=t,e.isComment=!0,e};function pt(t){return new ft(void 0,void 0,void 0,String(t))}function mt(t){var e=new ft(t.tag,t.data,t.children,t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.isCloned=!0,e}var Dt=Array.prototype,vt=Object.create(Dt);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=Dt[t];V(vt,t,function(){for(var a=[],i=arguments.length;i--;)a[i]=arguments[i];var r,n=e.apply(this,a),o=this.__ob__;switch(t){case"push":case"unshift":r=a;break;case"splice":r=a.slice(2)}return r&&o.observeArray(r),o.dep.notify(),n})});var gt=Object.getOwnPropertyNames(vt),St=!0;function Tt(t){St=t}var It=function(t){(this.value=t,this.dep=new ht,this.vmCount=0,V(t,"__ob__",this),Array.isArray(t))?((X?yt:xt)(t,vt,gt),this.observeArray(t)):this.walk(t)};function yt(t,e,a){t.__proto__=e}function xt(t,e,a){for(var i=0,r=a.length;i<r;i++){var n=a[i];V(t,n,e[n])}}function wt(t,e){var a;if(s(t)&&!(t instanceof ft))return v(t,"__ob__")&&t.__ob__ instanceof It?a=t.__ob__:St&&!et()&&(Array.isArray(t)||l(t))&&Object.isExtensible(t)&&!t._isVue&&(a=new It(t)),e&&a&&a.vmCount++,a}function Ft(t,e,a,i,r){var n=new ht,o=Object.getOwnPropertyDescriptor(t,e);if(!o||!1!==o.configurable){var s=o&&o.get;s||2!==arguments.length||(a=t[e]);var h=o&&o.set,l=!r&&wt(a);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):a;return ht.target&&(n.depend(),l&&(l.dep.depend(),Array.isArray(e)&&function t(e){for(var a=void 0,i=0,r=e.length;i<r;i++)(a=e[i])&&a.__ob__&&a.__ob__.dep.depend(),Array.isArray(a)&&t(a)}(e))),e},set:function(e){var i=s?s.call(t):a;e===i||e!=e&&i!=i||(h?h.call(t,e):a=e,l=!r&&wt(e),n.notify())}})}}function Et(t,e,a){if(Array.isArray(t)&&c(e))return t.length=Math.max(t.length,e),t.splice(e,1,a),a;if(e in t&&!(e in Object.prototype))return t[e]=a,a;var i=t.__ob__;return t._isVue||i&&i.vmCount?a:i?(Ft(i.value,e,a),i.dep.notify(),a):(t[e]=a,a)}function bt(t,e){if(Array.isArray(t)&&c(e))t.splice(e,1);else{var a=t.__ob__;t._isVue||a&&a.vmCount||v(t,e)&&(delete t[e],a&&a.dep.notify())}}It.prototype.walk=function(t){for(var e=Object.keys(t),a=0;a<e.length;a++)Ft(t,e[a])},It.prototype.observeArray=function(t){for(var e=0,a=t.length;e<a;e++)wt(t[e])};var Lt=k.optionMergeStrategies;function Mt(t,e){if(!e)return t;for(var a,i,r,n=Object.keys(e),o=0;o<n.length;o++)i=t[a=n[o]],r=e[a],v(t,a)?l(i)&&l(r)&&Mt(i,r):Et(t,a,r);return t}function At(t,e,a){return a?function(){var i="function"==typeof e?e.call(a,a):e,r="function"==typeof t?t.call(a,a):t;return i?Mt(i,r):r}:e?t?function(){return Mt("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function Ot(t,e){return e?t?t.concat(e):Array.isArray(e)?e:[e]:t}function Nt(t,e,a,i){var r=Object.create(t||null);return e?E(r,e):r}Lt.data=function(t,e,a){return a?At(t,e,a):e&&"function"!=typeof e?t:At(t,e)},B.forEach(function(t){Lt[t]=Ot}),_.forEach(function(t){Lt[t+"s"]=Nt}),Lt.watch=function(t,e,a,i){if(t===Q&&(t=void 0),e===Q&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var r={};for(var n in E(r,t),e){var o=r[n],s=e[n];o&&!Array.isArray(o)&&(o=[o]),r[n]=o?o.concat(s):Array.isArray(s)?s:[s]}return r},Lt.props=Lt.methods=Lt.inject=Lt.computed=function(t,e,a,i){if(!t)return e;var r=Object.create(null);return E(r,t),e&&E(r,e),r},Lt.provide=At;var Pt=function(t,e){return void 0===e?t:e};function Rt(t,e,a){"function"==typeof e&&(e=e.options),function(t,e){var a=t.props;if(a){var i,r,n={};if(Array.isArray(a))for(i=a.length;i--;)"string"==typeof(r=a[i])&&(n[T(r)]={type:null});else if(l(a))for(var o in a)r=a[o],n[T(o)]=l(r)?r:{type:r};t.props=n}}(e),function(t,e){var a=t.inject;if(a){var i=t.inject={};if(Array.isArray(a))for(var r=0;r<a.length;r++)i[a[r]]={from:a[r]};else if(l(a))for(var n in a){var o=a[n];i[n]=l(o)?E({from:n},o):{from:o}}}}(e),function(t){var e=t.directives;if(e)for(var a in e){var i=e[a];"function"==typeof i&&(e[a]={bind:i,update:i})}}(e);var i=e.extends;if(i&&(t=Rt(t,i,a)),e.mixins)for(var r=0,n=e.mixins.length;r<n;r++)t=Rt(t,e.mixins[r],a);var o,s={};for(o in t)h(o);for(o in e)v(t,o)||h(o);function h(i){var r=Lt[i]||Pt;s[i]=r(t[i],e[i],a,i)}return s}function _t(t,e,a,i){if("string"==typeof a){var r=t[e];if(v(r,a))return r[a];var n=T(a);if(v(r,n))return r[n];var o=I(n);return v(r,o)?r[o]:r[a]||r[n]||r[o]}}function Bt(t,e,a,i){var r=e[t],n=!v(a,t),o=a[t],s=Vt(Boolean,r.type);if(s>-1)if(n&&!v(r,"default"))o=!1;else if(""===o||o===x(t)){var h=Vt(String,r.type);(h<0||s<h)&&(o=!0)}if(void 0===o){o=function(t,e,a){if(!v(e,"default"))return;var i=e.default;0;if(t&&t.$options.propsData&&void 0===t.$options.propsData[a]&&void 0!==t._props[a])return t._props[a];return"function"==typeof i&&"Function"!==kt(e.type)?i.call(t):i}(i,r,t);var l=St;Tt(!0),wt(o),Tt(l)}return o}function kt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Gt(t,e){return kt(t)===kt(e)}function Vt(t,e){if(!Array.isArray(e))return Gt(e,t)?0:-1;for(var a=0,i=e.length;a<i;a++)if(Gt(e[a],t))return a;return-1}function Ht(t,e,a){if(e)for(var i=e;i=i.$parent;){var r=i.$options.errorCaptured;if(r)for(var n=0;n<r.length;n++)try{if(!1===r[n].call(i,t,e,a))return}catch(t){Yt(t,i,"errorCaptured hook")}}Yt(t,e,a)}function Yt(t,e,a){if(k.errorHandler)try{return k.errorHandler.call(null,t,e,a)}catch(t){Xt(t,null,"config.errorHandler")}Xt(t,e,a)}function Xt(t,e,a){if(!W&&!U||"undefined"==typeof console)throw t;console.error(t)}var Wt,Ut,Kt=[],zt=!1;function Jt(){zt=!1;var t=Kt.slice(0);Kt.length=0;for(var e=0;e<t.length;e++)t[e]()}var jt=!1;if("undefined"!=typeof setImmediate&&it(setImmediate))Ut=function(){setImmediate(Jt)};else if("undefined"==typeof MessageChannel||!it(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())Ut=function(){setTimeout(Jt,0)};else{var qt=new MessageChannel,Zt=qt.port2;qt.port1.onmessage=Jt,Ut=function(){Zt.postMessage(1)}}if("undefined"!=typeof Promise&&it(Promise)){var Qt=Promise.resolve();Wt=function(){Qt.then(Jt),Z&&setTimeout(L)}}else Wt=Ut;function $t(t,e){var a;if(Kt.push(function(){if(t)try{t.call(e)}catch(t){Ht(t,e,"nextTick")}else a&&a(e)}),zt||(zt=!0,jt?Ut():Wt()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){a=t})}var te=new rt;function ee(t){!function t(e,a){var i,r;var n=Array.isArray(e);if(!n&&!s(e)||Object.isFrozen(e)||e instanceof ft)return;if(e.__ob__){var o=e.__ob__.dep.id;if(a.has(o))return;a.add(o)}if(n)for(i=e.length;i--;)t(e[i],a);else for(r=Object.keys(e),i=r.length;i--;)t(e[r[i]],a)}(t,te),te.clear()}var ae,ie=g(function(t){var e="&"===t.charAt(0),a="~"===(t=e?t.slice(1):t).charAt(0),i="!"===(t=a?t.slice(1):t).charAt(0);return{name:t=i?t.slice(1):t,once:a,capture:i,passive:e}});function re(t){function e(){var t=arguments,a=e.fns;if(!Array.isArray(a))return a.apply(null,arguments);for(var i=a.slice(),r=0;r<i.length;r++)i[r].apply(null,t)}return e.fns=t,e}function ne(t,e,a,r,n){var o,s,h,l;for(o in t)s=t[o],h=e[o],l=ie(o),i(s)||(i(h)?(i(s.fns)&&(s=t[o]=re(s)),a(l.name,s,l.once,l.capture,l.passive,l.params)):s!==h&&(h.fns=s,t[o]=h));for(o in e)i(t[o])&&r((l=ie(o)).name,e[o],l.capture)}function oe(t,e,a){var o;t instanceof ft&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function h(){a.apply(this,arguments),m(o.fns,h)}i(s)?o=re([h]):r(s.fns)&&n(s.merged)?(o=s).fns.push(h):o=re([s,h]),o.merged=!0,t[e]=o}function se(t,e,a,i,n){if(r(e)){if(v(e,a))return t[a]=e[a],n||delete e[a],!0;if(v(e,i))return t[a]=e[i],n||delete e[i],!0}return!1}function he(t){return o(t)?[pt(t)]:Array.isArray(t)?function t(e,a){var s=[];var h,l,u,c;for(h=0;h<e.length;h++)i(l=e[h])||"boolean"==typeof l||(u=s.length-1,c=s[u],Array.isArray(l)?l.length>0&&(le((l=t(l,(a||"")+"_"+h))[0])&&le(c)&&(s[u]=pt(c.text+l[0].text),l.shift()),s.push.apply(s,l)):o(l)?le(c)?s[u]=pt(c.text+l):""!==l&&s.push(pt(l)):le(l)&&le(c)?s[u]=pt(c.text+l.text):(n(e._isVList)&&r(l.tag)&&i(l.key)&&r(a)&&(l.key="__vlist"+a+"_"+h+"__"),s.push(l)));return s}(t):void 0}function le(t){return r(t)&&r(t.text)&&function(t){return!1===t}(t.isComment)}function ue(t,e){return(t.__esModule||nt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),s(t)?e.extend(t):t}function ce(t){return t.isComment&&t.asyncFactory}function fe(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var a=t[e];if(r(a)&&(r(a.componentOptions)||ce(a)))return a}}function de(t,e,a){a?ae.$once(t,e):ae.$on(t,e)}function Ce(t,e){ae.$off(t,e)}function pe(t,e,a){ae=t,ne(e,a||{},de,Ce),ae=void 0}function me(t,e){var a={};if(!t)return a;for(var i=0,r=t.length;i<r;i++){var n=t[i],o=n.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,n.context!==e&&n.fnContext!==e||!o||null==o.slot)(a.default||(a.default=[])).push(n);else{var s=o.slot,h=a[s]||(a[s]=[]);"template"===n.tag?h.push.apply(h,n.children||[]):h.push(n)}}for(var l in a)a[l].every(De)&&delete a[l];return a}function De(t){return t.isComment&&!t.asyncFactory||" "===t.text}function ve(t,e){e=e||{};for(var a=0;a<t.length;a++)Array.isArray(t[a])?ve(t[a],e):e[t[a].key]=t[a].fn;return e}var ge=null;function Se(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function Te(t,e){if(e){if(t._directInactive=!1,Se(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var a=0;a<t.$children.length;a++)Te(t.$children[a]);Ie(t,"activated")}}function Ie(t,e){ut();var a=t.$options[e];if(a)for(var i=0,r=a.length;i<r;i++)try{a[i].call(t)}catch(a){Ht(a,t,e+" hook")}t._hasHookEvent&&t.$emit("hook:"+e),ct()}var ye=[],xe=[],we={},Fe=!1,Ee=!1,be=0;function Le(){var t,e;for(Ee=!0,ye.sort(function(t,e){return t.id-e.id}),be=0;be<ye.length;be++)e=(t=ye[be]).id,we[e]=null,t.run();var a=xe.slice(),i=ye.slice();be=ye.length=xe.length=0,we={},Fe=Ee=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Te(t[e],!0)}(a),function(t){var e=t.length;for(;e--;){var a=t[e],i=a.vm;i._watcher===a&&i._isMounted&&Ie(i,"updated")}}(i),at&&k.devtools&&at.emit("flush")}var Me=0,Ae=function(t,e,a,i,r){this.vm=t,r&&(t._watcher=this),t._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=a,this.id=++Me,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new rt,this.newDepIds=new rt,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(t){if(!H.test(t)){var e=t.split(".");return function(t){for(var a=0;a<e.length;a++){if(!t)return;t=t[e[a]]}return t}}}(e),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()};Ae.prototype.get=function(){var t;ut(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;Ht(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ee(t),ct(),this.cleanupDeps()}return t},Ae.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},Ae.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var a=this.depIds;this.depIds=this.newDepIds,this.newDepIds=a,this.newDepIds.clear(),a=this.deps,this.deps=this.newDeps,this.newDeps=a,this.newDeps.length=0},Ae.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==we[e]){if(we[e]=!0,Ee){for(var a=ye.length-1;a>be&&ye[a].id>t.id;)a--;ye.splice(a+1,0,t)}else ye.push(t);Fe||(Fe=!0,$t(Le))}}(this)},Ae.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||s(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){Ht(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},Ae.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Ae.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},Ae.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||m(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var Oe={enumerable:!0,configurable:!0,get:L,set:L};function Ne(t,e,a){Oe.get=function(){return this[e][a]},Oe.set=function(t){this[e][a]=t},Object.defineProperty(t,a,Oe)}function Pe(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var a=t.$options.propsData||{},i=t._props={},r=t.$options._propKeys=[];t.$parent&&Tt(!1);var n=function(n){r.push(n);var o=Bt(n,e,a,t);Ft(i,n,o),n in t||Ne(t,"_props",n)};for(var o in e)n(o);Tt(!0)}(t,e.props),e.methods&&function(t,e){t.$options.props;for(var a in e)t[a]=null==e[a]?L:w(e[a],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;l(e=t._data="function"==typeof e?function(t,e){ut();try{return t.call(e,e)}catch(t){return Ht(t,e,"data()"),{}}finally{ct()}}(e,t):e||{})||(e={});var a=Object.keys(e),i=t.$options.props,r=(t.$options.methods,a.length);for(;r--;){var n=a[r];0,i&&v(i,n)||G(n)||Ne(t,"_data",n)}wt(e,!0)}(t):wt(t._data={},!0),e.computed&&function(t,e){var a=t._computedWatchers=Object.create(null),i=et();for(var r in e){var n=e[r],o="function"==typeof n?n:n.get;0,i||(a[r]=new Ae(t,o||L,L,Re)),r in t||_e(t,r,n)}}(t,e.computed),e.watch&&e.watch!==Q&&function(t,e){for(var a in e){var i=e[a];if(Array.isArray(i))for(var r=0;r<i.length;r++)ke(t,a,i[r]);else ke(t,a,i)}}(t,e.watch)}var Re={lazy:!0};function _e(t,e,a){var i=!et();"function"==typeof a?(Oe.get=i?Be(e):a,Oe.set=L):(Oe.get=a.get?i&&!1!==a.cache?Be(e):a.get:L,Oe.set=a.set?a.set:L),Object.defineProperty(t,e,Oe)}function Be(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),ht.target&&e.depend(),e.value}}function ke(t,e,a,i){return l(a)&&(i=a,a=a.handler),"string"==typeof a&&(a=t[a]),t.$watch(e,a,i)}function Ge(t,e){if(t){for(var a=Object.create(null),i=nt?Reflect.ownKeys(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}):Object.keys(t),r=0;r<i.length;r++){for(var n=i[r],o=t[n].from,s=e;s;){if(s._provided&&v(s._provided,o)){a[n]=s._provided[o];break}s=s.$parent}if(!s)if("default"in t[n]){var h=t[n].default;a[n]="function"==typeof h?h.call(e):h}else 0}return a}}function Ve(t,e){var a,i,n,o,h;if(Array.isArray(t)||"string"==typeof t)for(a=new Array(t.length),i=0,n=t.length;i<n;i++)a[i]=e(t[i],i);else if("number"==typeof t)for(a=new Array(t),i=0;i<t;i++)a[i]=e(i+1,i);else if(s(t))for(o=Object.keys(t),a=new Array(o.length),i=0,n=o.length;i<n;i++)h=o[i],a[i]=e(t[h],h,i);return r(a)&&(a._isVList=!0),a}function He(t,e,a,i){var r,n=this.$scopedSlots[t];if(n)a=a||{},i&&(a=E(E({},i),a)),r=n(a)||e;else{var o=this.$slots[t];o&&(o._rendered=!0),r=o||e}var s=a&&a.slot;return s?this.$createElement("template",{slot:s},r):r}function Ye(t){return _t(this.$options,"filters",t)||A}function Xe(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function We(t,e,a,i,r){var n=k.keyCodes[e]||a;return r&&i&&!k.keyCodes[e]?Xe(r,i):n?Xe(n,t):i?x(i)!==e:void 0}function Ue(t,e,a,i,r){if(a)if(s(a)){var n;Array.isArray(a)&&(a=b(a));var o=function(o){if("class"===o||"style"===o||p(o))n=t;else{var s=t.attrs&&t.attrs.type;n=i||k.mustUseProp(e,s,o)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}o in n||(n[o]=a[o],r&&((t.on||(t.on={}))["update:"+o]=function(t){a[o]=t}))};for(var h in a)o(h)}else;return t}function Ke(t,e){var a=this._staticTrees||(this._staticTrees=[]),i=a[t];return i&&!e?i:(Je(i=a[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__"+t,!1),i)}function ze(t,e,a){return Je(t,"__once__"+e+(a?"_"+a:""),!0),t}function Je(t,e,a){if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]&&"string"!=typeof t[i]&&je(t[i],e+"_"+i,a);else je(t,e,a)}function je(t,e,a){t.isStatic=!0,t.key=e,t.isOnce=a}function qe(t,e){if(e)if(l(e)){var a=t.on=t.on?E({},t.on):{};for(var i in e){var r=a[i],n=e[i];a[i]=r?[].concat(r,n):n}}else;return t}function Ze(t){t._o=ze,t._n=d,t._s=f,t._l=Ve,t._t=He,t._q=O,t._i=N,t._m=Ke,t._f=Ye,t._k=We,t._b=Ue,t._v=pt,t._e=Ct,t._u=ve,t._g=qe}function Qe(t,e,i,r,o){var s,h=o.options;v(r,"_uid")?(s=Object.create(r))._original=r:(s=r,r=r._original);var l=n(h._compiled),u=!l;this.data=t,this.props=e,this.children=i,this.parent=r,this.listeners=t.on||a,this.injections=Ge(h.inject,r),this.slots=function(){return me(i,r)},l&&(this.$options=h,this.$slots=this.slots(),this.$scopedSlots=t.scopedSlots||a),h._scopeId?this._c=function(t,e,a,i){var n=oa(s,t,e,a,i,u);return n&&!Array.isArray(n)&&(n.fnScopeId=h._scopeId,n.fnContext=r),n}:this._c=function(t,e,a,i){return oa(s,t,e,a,i,u)}}function $e(t,e,a,i){var r=mt(t);return r.fnContext=a,r.fnOptions=i,e.slot&&((r.data||(r.data={})).slot=e.slot),r}function ta(t,e){for(var a in e)t[T(a)]=e[a]}Ze(Qe.prototype);var ea={init:function(t,e,a,i){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;ea.prepatch(n,n)}else{(t.componentInstance=function(t,e,a,i){var n={_isComponent:!0,parent:e,_parentVnode:t,_parentElm:a||null,_refElm:i||null},o=t.data.inlineTemplate;r(o)&&(n.render=o.render,n.staticRenderFns=o.staticRenderFns);return new t.componentOptions.Ctor(n)}(t,ge,a,i)).$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var i=e.componentOptions;!function(t,e,i,r,n){var o=!!(n||t.$options._renderChildren||r.data.scopedSlots||t.$scopedSlots!==a);if(t.$options._parentVnode=r,t.$vnode=r,t._vnode&&(t._vnode.parent=r),t.$options._renderChildren=n,t.$attrs=r.data.attrs||a,t.$listeners=i||a,e&&t.$options.props){Tt(!1);for(var s=t._props,h=t.$options._propKeys||[],l=0;l<h.length;l++){var u=h[l],c=t.$options.props;s[u]=Bt(u,c,e,t)}Tt(!0),t.$options.propsData=e}i=i||a;var f=t.$options._parentListeners;t.$options._parentListeners=i,pe(t,i,f),o&&(t.$slots=me(n,r.context),t.$forceUpdate())}(e.componentInstance=t.componentInstance,i.propsData,i.listeners,e,i.children)},insert:function(t){var e=t.context,a=t.componentInstance;a._isMounted||(a._isMounted=!0,Ie(a,"mounted")),t.data.keepAlive&&(e._isMounted?function(t){t._inactive=!1,xe.push(t)}(a):Te(a,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?function t(e,a){if(!(a&&(e._directInactive=!0,Se(e))||e._inactive)){e._inactive=!0;for(var i=0;i<e.$children.length;i++)t(e.$children[i]);Ie(e,"deactivated")}}(e,!0):e.$destroy())}},aa=Object.keys(ea);function ia(t,e,o,h,l){if(!i(t)){var u=o.$options._base;if(s(t)&&(t=u.extend(t)),"function"==typeof t){var c;if(i(t.cid)&&void 0===(t=function(t,e,a){if(n(t.error)&&r(t.errorComp))return t.errorComp;if(r(t.resolved))return t.resolved;if(n(t.loading)&&r(t.loadingComp))return t.loadingComp;if(!r(t.contexts)){var o=t.contexts=[a],h=!0,l=function(){for(var t=0,e=o.length;t<e;t++)o[t].$forceUpdate()},u=P(function(a){t.resolved=ue(a,e),h||l()}),c=P(function(e){r(t.errorComp)&&(t.error=!0,l())}),f=t(u,c);return s(f)&&("function"==typeof f.then?i(t.resolved)&&f.then(u,c):r(f.component)&&"function"==typeof f.component.then&&(f.component.then(u,c),r(f.error)&&(t.errorComp=ue(f.error,e)),r(f.loading)&&(t.loadingComp=ue(f.loading,e),0===f.delay?t.loading=!0:setTimeout(function(){i(t.resolved)&&i(t.error)&&(t.loading=!0,l())},f.delay||200)),r(f.timeout)&&setTimeout(function(){i(t.resolved)&&c(null)},f.timeout))),h=!1,t.loading?t.loadingComp:t.resolved}t.contexts.push(a)}(c=t,u,o)))return function(t,e,a,i,r){var n=Ct();return n.asyncFactory=t,n.asyncMeta={data:e,context:a,children:i,tag:r},n}(c,e,o,h,l);e=e||{},ha(t),r(e.model)&&function(t,e){var a=t.model&&t.model.prop||"value",i=t.model&&t.model.event||"input";(e.props||(e.props={}))[a]=e.model.value;var n=e.on||(e.on={});r(n[i])?n[i]=[e.model.callback].concat(n[i]):n[i]=e.model.callback}(t.options,e);var f=function(t,e,a){var n=e.options.props;if(!i(n)){var o={},s=t.attrs,h=t.props;if(r(s)||r(h))for(var l in n){var u=x(l);se(o,h,l,u,!0)||se(o,s,l,u,!1)}return o}}(e,t);if(n(t.options.functional))return function(t,e,i,n,o){var s=t.options,h={},l=s.props;if(r(l))for(var u in l)h[u]=Bt(u,l,e||a);else r(i.attrs)&&ta(h,i.attrs),r(i.props)&&ta(h,i.props);var c=new Qe(i,h,o,n,t),f=s.render.call(null,c._c,c);if(f instanceof ft)return $e(f,i,c.parent,s);if(Array.isArray(f)){for(var d=he(f)||[],C=new Array(d.length),p=0;p<d.length;p++)C[p]=$e(d[p],i,c.parent,s);return C}}(t,f,e,o,h);var d=e.on;if(e.on=e.nativeOn,n(t.options.abstract)){var C=e.slot;e={},C&&(e.slot=C)}!function(t){for(var e=t.hook||(t.hook={}),a=0;a<aa.length;a++){var i=aa[a];e[i]=ea[i]}}(e);var p=t.options.name||l;return new ft("vue-component-"+t.cid+(p?"-"+p:""),e,void 0,void 0,void 0,o,{Ctor:t,propsData:f,listeners:d,tag:l,children:h},c)}}}var ra=1,na=2;function oa(t,e,a,h,l,u){return(Array.isArray(a)||o(a))&&(l=h,h=a,a=void 0),n(u)&&(l=na),function(t,e,a,o,h){if(r(a)&&r(a.__ob__))return Ct();r(a)&&r(a.is)&&(e=a.is);if(!e)return Ct();0;Array.isArray(o)&&"function"==typeof o[0]&&((a=a||{}).scopedSlots={default:o[0]},o.length=0);h===na?o=he(o):h===ra&&(o=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(o));var l,u;if("string"==typeof e){var c;u=t.$vnode&&t.$vnode.ns||k.getTagNamespace(e),l=k.isReservedTag(e)?new ft(k.parsePlatformTagName(e),a,o,void 0,void 0,t):r(c=_t(t.$options,"components",e))?ia(c,a,t,o,e):new ft(e,a,o,void 0,void 0,t)}else l=ia(e,a,t,o);return Array.isArray(l)?l:r(l)?(r(u)&&function t(e,a,o){e.ns=a;"foreignObject"===e.tag&&(a=void 0,o=!0);if(r(e.children))for(var s=0,h=e.children.length;s<h;s++){var l=e.children[s];r(l.tag)&&(i(l.ns)||n(o)&&"svg"!==l.tag)&&t(l,a,o)}}(l,u),r(a)&&function(t){s(t.style)&&ee(t.style);s(t.class)&&ee(t.class)}(a),l):Ct()}(t,e,a,h,l)}var sa=0;function ha(t){var e=t.options;if(t.super){var a=ha(t.super);if(a!==t.superOptions){t.superOptions=a;var i=function(t){var e,a=t.options,i=t.extendOptions,r=t.sealedOptions;for(var n in a)a[n]!==r[n]&&(e||(e={}),e[n]=la(a[n],i[n],r[n]));return e}(t);i&&E(t.extendOptions,i),(e=t.options=Rt(a,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function la(t,e,a){if(Array.isArray(t)){var i=[];a=Array.isArray(a)?a:[a],e=Array.isArray(e)?e:[e];for(var r=0;r<t.length;r++)(e.indexOf(t[r])>=0||a.indexOf(t[r])<0)&&i.push(t[r]);return i}return t}function ua(t){this._init(t)}function ca(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var a=this,i=a.cid,r=t._Ctor||(t._Ctor={});if(r[i])return r[i];var n=t.name||a.options.name;var o=function(t){this._init(t)};return(o.prototype=Object.create(a.prototype)).constructor=o,o.cid=e++,o.options=Rt(a.options,t),o.super=a,o.options.props&&function(t){var e=t.options.props;for(var a in e)Ne(t.prototype,"_props",a)}(o),o.options.computed&&function(t){var e=t.options.computed;for(var a in e)_e(t.prototype,a,e[a])}(o),o.extend=a.extend,o.mixin=a.mixin,o.use=a.use,_.forEach(function(t){o[t]=a[t]}),n&&(o.options.components[n]=o),o.superOptions=a.options,o.extendOptions=t,o.sealedOptions=E({},o.options),r[i]=o,o}}function fa(t){return t&&(t.Ctor.options.name||t.tag)}function da(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!u(t)&&t.test(e)}function Ca(t,e){var a=t.cache,i=t.keys,r=t._vnode;for(var n in a){var o=a[n];if(o){var s=fa(o.componentOptions);s&&!e(s)&&pa(a,n,i,r)}}}function pa(t,e,a,i){var r=t[e];!r||i&&r.tag===i.tag||r.componentInstance.$destroy(),t[e]=null,m(a,e)}!function(t){t.prototype._init=function(t){var e=this;e._uid=sa++,e._isVue=!0,t&&t._isComponent?function(t,e){var a=t.$options=Object.create(t.constructor.options),i=e._parentVnode;a.parent=e.parent,a._parentVnode=i,a._parentElm=e._parentElm,a._refElm=e._refElm;var r=i.componentOptions;a.propsData=r.propsData,a._parentListeners=r.listeners,a._renderChildren=r.children,a._componentTag=r.tag,e.render&&(a.render=e.render,a.staticRenderFns=e.staticRenderFns)}(e,t):e.$options=Rt(ha(e.constructor),t||{},e),e._renderProxy=e,e._self=e,function(t){var e=t.$options,a=e.parent;if(a&&!e.abstract){for(;a.$options.abstract&&a.$parent;)a=a.$parent;a.$children.push(t)}t.$parent=a,t.$root=a?a.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(e),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&pe(t,e)}(e),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,i=t.$vnode=e._parentVnode,r=i&&i.context;t.$slots=me(e._renderChildren,r),t.$scopedSlots=a,t._c=function(e,a,i,r){return oa(t,e,a,i,r,!1)},t.$createElement=function(e,a,i,r){return oa(t,e,a,i,r,!0)};var n=i&&i.data;Ft(t,"$attrs",n&&n.attrs||a,null,!0),Ft(t,"$listeners",e._parentListeners||a,null,!0)}(e),Ie(e,"beforeCreate"),function(t){var e=Ge(t.$options.inject,t);e&&(Tt(!1),Object.keys(e).forEach(function(a){Ft(t,a,e[a])}),Tt(!0))}(e),Pe(e),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(e),Ie(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(ua),function(t){var e={get:function(){return this._data}},a={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",a),t.prototype.$set=Et,t.prototype.$delete=bt,t.prototype.$watch=function(t,e,a){if(l(e))return ke(this,t,e,a);(a=a||{}).user=!0;var i=new Ae(this,t,e,a);return a.immediate&&e.call(this,i.value),function(){i.teardown()}}}(ua),function(t){var e=/^hook:/;t.prototype.$on=function(t,a){if(Array.isArray(t))for(var i=0,r=t.length;i<r;i++)this.$on(t[i],a);else(this._events[t]||(this._events[t]=[])).push(a),e.test(t)&&(this._hasHookEvent=!0);return this},t.prototype.$once=function(t,e){var a=this;function i(){a.$off(t,i),e.apply(a,arguments)}return i.fn=e,a.$on(t,i),a},t.prototype.$off=function(t,e){var a=this;if(!arguments.length)return a._events=Object.create(null),a;if(Array.isArray(t)){for(var i=0,r=t.length;i<r;i++)this.$off(t[i],e);return a}var n=a._events[t];if(!n)return a;if(!e)return a._events[t]=null,a;if(e)for(var o,s=n.length;s--;)if((o=n[s])===e||o.fn===e){n.splice(s,1);break}return a},t.prototype.$emit=function(t){var e=this._events[t];if(e){e=e.length>1?F(e):e;for(var a=F(arguments,1),i=0,r=e.length;i<r;i++)try{e[i].apply(this,a)}catch(e){Ht(e,this,'event handler for "'+t+'"')}}return this}}(ua),function(t){t.prototype._update=function(t,e){var a=this;a._isMounted&&Ie(a,"beforeUpdate");var i=a.$el,r=a._vnode,n=ge;ge=a,a._vnode=t,r?a.$el=a.__patch__(r,t):(a.$el=a.__patch__(a.$el,t,e,!1,a.$options._parentElm,a.$options._refElm),a.$options._parentElm=a.$options._refElm=null),ge=n,i&&(i.__vue__=null),a.$el&&(a.$el.__vue__=a),a.$vnode&&a.$parent&&a.$vnode===a.$parent._vnode&&(a.$parent.$el=a.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Ie(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||m(e.$children,t),t._watcher&&t._watcher.teardown();for(var a=t._watchers.length;a--;)t._watchers[a].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Ie(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(ua),function(t){Ze(t.prototype),t.prototype.$nextTick=function(t){return $t(t,this)},t.prototype._render=function(){var t,e=this,i=e.$options,r=i.render,n=i._parentVnode;n&&(e.$scopedSlots=n.data.scopedSlots||a),e.$vnode=n;try{t=r.call(e._renderProxy,e.$createElement)}catch(a){Ht(a,e,"render"),t=e._vnode}return t instanceof ft||(t=Ct()),t.parent=n,t}}(ua);var ma=[String,RegExp,Array],Da={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:ma,exclude:ma,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)pa(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",function(e){Ca(t,function(t){return da(e,t)})}),this.$watch("exclude",function(e){Ca(t,function(t){return!da(e,t)})})},render:function(){var t=this.$slots.default,e=fe(t),a=e&&e.componentOptions;if(a){var i=fa(a),r=this.include,n=this.exclude;if(r&&(!i||!da(r,i))||n&&i&&da(n,i))return e;var o=this.cache,s=this.keys,h=null==e.key?a.Ctor.cid+(a.tag?"::"+a.tag:""):e.key;o[h]?(e.componentInstance=o[h].componentInstance,m(s,h),s.push(h)):(o[h]=e,s.push(h),this.max&&s.length>parseInt(this.max)&&pa(o,s[0],s,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return k}};Object.defineProperty(t,"config",e),t.util={warn:ot,extend:E,mergeOptions:Rt,defineReactive:Ft},t.set=Et,t.delete=bt,t.nextTick=$t,t.options=Object.create(null),_.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,E(t.options.components,Da),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var a=F(arguments,1);return a.unshift(this),"function"==typeof t.install?t.install.apply(t,a):"function"==typeof t&&t.apply(null,a),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=Rt(this.options,t),this}}(t),ca(t),function(t){_.forEach(function(e){t[e]=function(t,a){return a?("component"===e&&l(a)&&(a.name=a.name||t,a=this.options._base.extend(a)),"directive"===e&&"function"==typeof a&&(a={bind:a,update:a}),this.options[e+"s"][t]=a,a):this.options[e+"s"][t]}})}(t)}(ua),Object.defineProperty(ua.prototype,"$isServer",{get:et}),Object.defineProperty(ua.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(ua,"FunctionalRenderContext",{value:Qe}),ua.version="2.5.17";var va=C("style,class"),ga=C("input,textarea,option,select,progress"),Sa=C("contenteditable,draggable,spellcheck"),Ta=C("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Ia="http://www.w3.org/1999/xlink",ya=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},xa=function(t){return ya(t)?t.slice(6,t.length):""},wa=function(t){return null==t||!1===t};function Fa(t){for(var e=t.data,a=t,i=t;r(i.componentInstance);)(i=i.componentInstance._vnode)&&i.data&&(e=Ea(i.data,e));for(;r(a=a.parent);)a&&a.data&&(e=Ea(e,a.data));return function(t,e){if(r(t)||r(e))return ba(t,La(e));return""}(e.staticClass,e.class)}function Ea(t,e){return{staticClass:ba(t.staticClass,e.staticClass),class:r(t.class)?[t.class,e.class]:e.class}}function ba(t,e){return t?e?t+" "+e:t:e||""}function La(t){return Array.isArray(t)?function(t){for(var e,a="",i=0,n=t.length;i<n;i++)r(e=La(t[i]))&&""!==e&&(a&&(a+=" "),a+=e);return a}(t):s(t)?function(t){var e="";for(var a in t)t[a]&&(e&&(e+=" "),e+=a);return e}(t):"string"==typeof t?t:""}var Ma={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Aa=C("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Oa=C("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Na=function(t){return Aa(t)||Oa(t)};var Pa=Object.create(null);var Ra=C("text,number,password,search,email,tel,url");var _a=Object.freeze({createElement:function(t,e){var a=document.createElement(t);return"select"!==t?a:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&a.setAttribute("multiple","multiple"),a)},createElementNS:function(t,e){return document.createElementNS(Ma[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,a){t.insertBefore(e,a)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),Ba={create:function(t,e){ka(e)},update:function(t,e){t.data.ref!==e.data.ref&&(ka(t,!0),ka(e))},destroy:function(t){ka(t,!0)}};function ka(t,e){var a=t.data.ref;if(r(a)){var i=t.context,n=t.componentInstance||t.elm,o=i.$refs;e?Array.isArray(o[a])?m(o[a],n):o[a]===n&&(o[a]=void 0):t.data.refInFor?Array.isArray(o[a])?o[a].indexOf(n)<0&&o[a].push(n):o[a]=[n]:o[a]=n}}var Ga=new ft("",{},[]),Va=["create","activate","update","remove","destroy"];function Ha(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&r(t.data)===r(e.data)&&function(t,e){if("input"!==t.tag)return!0;var a,i=r(a=t.data)&&r(a=a.attrs)&&a.type,n=r(a=e.data)&&r(a=a.attrs)&&a.type;return i===n||Ra(i)&&Ra(n)}(t,e)||n(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&i(e.asyncFactory.error))}function Ya(t,e,a){var i,n,o={};for(i=e;i<=a;++i)r(n=t[i].key)&&(o[n]=i);return o}var Xa={create:Wa,update:Wa,destroy:function(t){Wa(t,Ga)}};function Wa(t,e){(t.data.directives||e.data.directives)&&function(t,e){var a,i,r,n=t===Ga,o=e===Ga,s=Ka(t.data.directives,t.context),h=Ka(e.data.directives,e.context),l=[],u=[];for(a in h)i=s[a],r=h[a],i?(r.oldValue=i.value,Ja(r,"update",e,t),r.def&&r.def.componentUpdated&&u.push(r)):(Ja(r,"bind",e,t),r.def&&r.def.inserted&&l.push(r));if(l.length){var c=function(){for(var a=0;a<l.length;a++)Ja(l[a],"inserted",e,t)};n?oe(e,"insert",c):c()}u.length&&oe(e,"postpatch",function(){for(var a=0;a<u.length;a++)Ja(u[a],"componentUpdated",e,t)});if(!n)for(a in s)h[a]||Ja(s[a],"unbind",t,t,o)}(t,e)}var Ua=Object.create(null);function Ka(t,e){var a,i,r=Object.create(null);if(!t)return r;for(a=0;a<t.length;a++)(i=t[a]).modifiers||(i.modifiers=Ua),r[za(i)]=i,i.def=_t(e.$options,"directives",i.name);return r}function za(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Ja(t,e,a,i,r){var n=t.def&&t.def[e];if(n)try{n(a.elm,t,a,i,r)}catch(i){Ht(i,a.context,"directive "+t.name+" "+e+" hook")}}var ja=[Ba,Xa];function qa(t,e){var a=e.componentOptions;if(!(r(a)&&!1===a.Ctor.options.inheritAttrs||i(t.data.attrs)&&i(e.data.attrs))){var n,o,s=e.elm,h=t.data.attrs||{},l=e.data.attrs||{};for(n in r(l.__ob__)&&(l=e.data.attrs=E({},l)),l)o=l[n],h[n]!==o&&Za(s,n,o);for(n in(J||q)&&l.value!==h.value&&Za(s,"value",l.value),h)i(l[n])&&(ya(n)?s.removeAttributeNS(Ia,xa(n)):Sa(n)||s.removeAttribute(n))}}function Za(t,e,a){t.tagName.indexOf("-")>-1?Qa(t,e,a):Ta(e)?wa(a)?t.removeAttribute(e):(a="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,a)):Sa(e)?t.setAttribute(e,wa(a)||"false"===a?"false":"true"):ya(e)?wa(a)?t.removeAttributeNS(Ia,xa(e)):t.setAttributeNS(Ia,e,a):Qa(t,e,a)}function Qa(t,e,a){if(wa(a))t.removeAttribute(e);else{if(J&&!j&&"TEXTAREA"===t.tagName&&"placeholder"===e&&!t.__ieph){var i=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",i)};t.addEventListener("input",i),t.__ieph=!0}t.setAttribute(e,a)}}var $a={create:qa,update:qa};function ti(t,e){var a=e.elm,n=e.data,o=t.data;if(!(i(n.staticClass)&&i(n.class)&&(i(o)||i(o.staticClass)&&i(o.class)))){var s=Fa(e),h=a._transitionClasses;r(h)&&(s=ba(s,La(h))),s!==a._prevClass&&(a.setAttribute("class",s),a._prevClass=s)}}var ei,ai={create:ti,update:ti},ii="__r",ri="__c";function ni(t,e,a,i,r){e=function(t){return t._withTask||(t._withTask=function(){jt=!0;var e=t.apply(null,arguments);return jt=!1,e})}(e),a&&(e=function(t,e,a){var i=ei;return function r(){null!==t.apply(null,arguments)&&oi(e,r,a,i)}}(e,t,i)),ei.addEventListener(t,e,$?{capture:i,passive:r}:i)}function oi(t,e,a,i){(i||ei).removeEventListener(t,e._withTask||e,a)}function si(t,e){if(!i(t.data.on)||!i(e.data.on)){var a=e.data.on||{},n=t.data.on||{};ei=e.elm,function(t){if(r(t[ii])){var e=J?"change":"input";t[e]=[].concat(t[ii],t[e]||[]),delete t[ii]}r(t[ri])&&(t.change=[].concat(t[ri],t.change||[]),delete t[ri])}(a),ne(a,n,ni,oi,e.context),ei=void 0}}var hi={create:si,update:si};function li(t,e){if(!i(t.data.domProps)||!i(e.data.domProps)){var a,n,o=e.elm,s=t.data.domProps||{},h=e.data.domProps||{};for(a in r(h.__ob__)&&(h=e.data.domProps=E({},h)),s)i(h[a])&&(o[a]="");for(a in h){if(n=h[a],"textContent"===a||"innerHTML"===a){if(e.children&&(e.children.length=0),n===s[a])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===a){o._value=n;var l=i(n)?"":String(n);ui(o,l)&&(o.value=l)}else o[a]=n}}}function ui(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var a=!0;try{a=document.activeElement!==t}catch(t){}return a&&t.value!==e}(t,e)||function(t,e){var a=t.value,i=t._vModifiers;if(r(i)){if(i.lazy)return!1;if(i.number)return d(a)!==d(e);if(i.trim)return a.trim()!==e.trim()}return a!==e}(t,e))}var ci={create:li,update:li},fi=g(function(t){var e={},a=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach(function(t){if(t){var i=t.split(a);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e});function di(t){var e=Ci(t.style);return t.staticStyle?E(t.staticStyle,e):e}function Ci(t){return Array.isArray(t)?b(t):"string"==typeof t?fi(t):t}var pi,mi=/^--/,Di=/\s*!important$/,vi=function(t,e,a){if(mi.test(e))t.style.setProperty(e,a);else if(Di.test(a))t.style.setProperty(e,a.replace(Di,""),"important");else{var i=Si(e);if(Array.isArray(a))for(var r=0,n=a.length;r<n;r++)t.style[i]=a[r];else t.style[i]=a}},gi=["Webkit","Moz","ms"],Si=g(function(t){if(pi=pi||document.createElement("div").style,"filter"!==(t=T(t))&&t in pi)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),a=0;a<gi.length;a++){var i=gi[a]+e;if(i in pi)return i}});function Ti(t,e){var a=e.data,n=t.data;if(!(i(a.staticStyle)&&i(a.style)&&i(n.staticStyle)&&i(n.style))){var o,s,h=e.elm,l=n.staticStyle,u=n.normalizedStyle||n.style||{},c=l||u,f=Ci(e.data.style)||{};e.data.normalizedStyle=r(f.__ob__)?E({},f):f;var d=function(t,e){var a,i={};if(e)for(var r=t;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(a=di(r.data))&&E(i,a);(a=di(t.data))&&E(i,a);for(var n=t;n=n.parent;)n.data&&(a=di(n.data))&&E(i,a);return i}(e,!0);for(s in c)i(d[s])&&vi(h,s,"");for(s in d)(o=d[s])!==c[s]&&vi(h,s,null==o?"":o)}}var Ii={create:Ti,update:Ti};function yi(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var a=" "+(t.getAttribute("class")||"")+" ";a.indexOf(" "+e+" ")<0&&t.setAttribute("class",(a+e).trim())}}function xi(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var a=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";a.indexOf(i)>=0;)a=a.replace(i," ");(a=a.trim())?t.setAttribute("class",a):t.removeAttribute("class")}}function wi(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&E(e,Fi(t.name||"v")),E(e,t),e}return"string"==typeof t?Fi(t):void 0}}var Fi=g(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),Ei=W&&!j,bi="transition",Li="animation",Mi="transition",Ai="transitionend",Oi="animation",Ni="animationend";Ei&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Mi="WebkitTransition",Ai="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Oi="WebkitAnimation",Ni="webkitAnimationEnd"));var Pi=W?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Ri(t){Pi(function(){Pi(t)})}function _i(t,e){var a=t._transitionClasses||(t._transitionClasses=[]);a.indexOf(e)<0&&(a.push(e),yi(t,e))}function Bi(t,e){t._transitionClasses&&m(t._transitionClasses,e),xi(t,e)}function ki(t,e,a){var i=Vi(t,e),r=i.type,n=i.timeout,o=i.propCount;if(!r)return a();var s=r===bi?Ai:Ni,h=0,l=function(){t.removeEventListener(s,u),a()},u=function(e){e.target===t&&++h>=o&&l()};setTimeout(function(){h<o&&l()},n+1),t.addEventListener(s,u)}var Gi=/\b(transform|all)(,|$)/;function Vi(t,e){var a,i=window.getComputedStyle(t),r=i[Mi+"Delay"].split(", "),n=i[Mi+"Duration"].split(", "),o=Hi(r,n),s=i[Oi+"Delay"].split(", "),h=i[Oi+"Duration"].split(", "),l=Hi(s,h),u=0,c=0;return e===bi?o>0&&(a=bi,u=o,c=n.length):e===Li?l>0&&(a=Li,u=l,c=h.length):c=(a=(u=Math.max(o,l))>0?o>l?bi:Li:null)?a===bi?n.length:h.length:0,{type:a,timeout:u,propCount:c,hasTransform:a===bi&&Gi.test(i[Mi+"Property"])}}function Hi(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,a){return Yi(e)+Yi(t[a])}))}function Yi(t){return 1e3*Number(t.slice(0,-1))}function Xi(t,e){var a=t.elm;r(a._leaveCb)&&(a._leaveCb.cancelled=!0,a._leaveCb());var n=wi(t.data.transition);if(!i(n)&&!r(a._enterCb)&&1===a.nodeType){for(var o=n.css,h=n.type,l=n.enterClass,u=n.enterToClass,c=n.enterActiveClass,f=n.appearClass,C=n.appearToClass,p=n.appearActiveClass,m=n.beforeEnter,D=n.enter,v=n.afterEnter,g=n.enterCancelled,S=n.beforeAppear,T=n.appear,I=n.afterAppear,y=n.appearCancelled,x=n.duration,w=ge,F=ge.$vnode;F&&F.parent;)w=(F=F.parent).context;var E=!w._isMounted||!t.isRootInsert;if(!E||T||""===T){var b=E&&f?f:l,L=E&&p?p:c,M=E&&C?C:u,A=E&&S||m,O=E&&"function"==typeof T?T:D,N=E&&I||v,R=E&&y||g,_=d(s(x)?x.enter:x);0;var B=!1!==o&&!j,k=Ki(O),G=a._enterCb=P(function(){B&&(Bi(a,M),Bi(a,L)),G.cancelled?(B&&Bi(a,b),R&&R(a)):N&&N(a),a._enterCb=null});t.data.show||oe(t,"insert",function(){var e=a.parentNode,i=e&&e._pending&&e._pending[t.key];i&&i.tag===t.tag&&i.elm._leaveCb&&i.elm._leaveCb(),O&&O(a,G)}),A&&A(a),B&&(_i(a,b),_i(a,L),Ri(function(){Bi(a,b),G.cancelled||(_i(a,M),k||(Ui(_)?setTimeout(G,_):ki(a,h,G)))})),t.data.show&&(e&&e(),O&&O(a,G)),B||k||G()}}}function Wi(t,e){var a=t.elm;r(a._enterCb)&&(a._enterCb.cancelled=!0,a._enterCb());var n=wi(t.data.transition);if(i(n)||1!==a.nodeType)return e();if(!r(a._leaveCb)){var o=n.css,h=n.type,l=n.leaveClass,u=n.leaveToClass,c=n.leaveActiveClass,f=n.beforeLeave,C=n.leave,p=n.afterLeave,m=n.leaveCancelled,D=n.delayLeave,v=n.duration,g=!1!==o&&!j,S=Ki(C),T=d(s(v)?v.leave:v);0;var I=a._leaveCb=P(function(){a.parentNode&&a.parentNode._pending&&(a.parentNode._pending[t.key]=null),g&&(Bi(a,u),Bi(a,c)),I.cancelled?(g&&Bi(a,l),m&&m(a)):(e(),p&&p(a)),a._leaveCb=null});D?D(y):y()}function y(){I.cancelled||(t.data.show||((a.parentNode._pending||(a.parentNode._pending={}))[t.key]=t),f&&f(a),g&&(_i(a,l),_i(a,c),Ri(function(){Bi(a,l),I.cancelled||(_i(a,u),S||(Ui(T)?setTimeout(I,T):ki(a,h,I)))})),C&&C(a,I),g||S||I())}}function Ui(t){return"number"==typeof t&&!isNaN(t)}function Ki(t){if(i(t))return!1;var e=t.fns;return r(e)?Ki(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function zi(t,e){!0!==e.data.show&&Xi(e)}var Ji=function(t){var e,a,s={},h=t.modules,l=t.nodeOps;for(e=0;e<Va.length;++e)for(s[Va[e]]=[],a=0;a<h.length;++a)r(h[a][Va[e]])&&s[Va[e]].push(h[a][Va[e]]);function u(t){var e=l.parentNode(t);r(e)&&l.removeChild(e,t)}function c(t,e,a,i,o,h,u){if(r(t.elm)&&r(h)&&(t=h[u]=mt(t)),t.isRootInsert=!o,!function(t,e,a,i){var o=t.data;if(r(o)){var h=r(t.componentInstance)&&o.keepAlive;if(r(o=o.hook)&&r(o=o.init)&&o(t,!1,a,i),r(t.componentInstance))return f(t,e),n(h)&&function(t,e,a,i){for(var n,o=t;o.componentInstance;)if(o=o.componentInstance._vnode,r(n=o.data)&&r(n=n.transition)){for(n=0;n<s.activate.length;++n)s.activate[n](Ga,o);e.push(o);break}d(a,t.elm,i)}(t,e,a,i),!0}}(t,e,a,i)){var c=t.data,C=t.children,m=t.tag;r(m)?(t.elm=t.ns?l.createElementNS(t.ns,m):l.createElement(m,t),v(t),p(t,C,e),r(c)&&D(t,e),d(a,t.elm,i)):n(t.isComment)?(t.elm=l.createComment(t.text),d(a,t.elm,i)):(t.elm=l.createTextNode(t.text),d(a,t.elm,i))}}function f(t,e){r(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,m(t)?(D(t,e),v(t)):(ka(t),e.push(t))}function d(t,e,a){r(t)&&(r(a)?a.parentNode===t&&l.insertBefore(t,e,a):l.appendChild(t,e))}function p(t,e,a){if(Array.isArray(e))for(var i=0;i<e.length;++i)c(e[i],a,t.elm,null,!0,e,i);else o(t.text)&&l.appendChild(t.elm,l.createTextNode(String(t.text)))}function m(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return r(t.tag)}function D(t,a){for(var i=0;i<s.create.length;++i)s.create[i](Ga,t);r(e=t.data.hook)&&(r(e.create)&&e.create(Ga,t),r(e.insert)&&a.push(t))}function v(t){var e;if(r(e=t.fnScopeId))l.setStyleScope(t.elm,e);else for(var a=t;a;)r(e=a.context)&&r(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e),a=a.parent;r(e=ge)&&e!==t.context&&e!==t.fnContext&&r(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e)}function g(t,e,a,i,r,n){for(;i<=r;++i)c(a[i],n,t,e,!1,a,i)}function S(t){var e,a,i=t.data;if(r(i))for(r(e=i.hook)&&r(e=e.destroy)&&e(t),e=0;e<s.destroy.length;++e)s.destroy[e](t);if(r(e=t.children))for(a=0;a<t.children.length;++a)S(t.children[a])}function T(t,e,a,i){for(;a<=i;++a){var n=e[a];r(n)&&(r(n.tag)?(I(n),S(n)):u(n.elm))}}function I(t,e){if(r(e)||r(t.data)){var a,i=s.remove.length+1;for(r(e)?e.listeners+=i:e=function(t,e){function a(){0==--a.listeners&&u(t)}return a.listeners=e,a}(t.elm,i),r(a=t.componentInstance)&&r(a=a._vnode)&&r(a.data)&&I(a,e),a=0;a<s.remove.length;++a)s.remove[a](t,e);r(a=t.data.hook)&&r(a=a.remove)?a(t,e):e()}else u(t.elm)}function y(t,e,a,i){for(var n=a;n<i;n++){var o=e[n];if(r(o)&&Ha(t,o))return n}}function x(t,e,a,o){if(t!==e){var h=e.elm=t.elm;if(n(t.isAsyncPlaceholder))r(e.asyncFactory.resolved)?E(t.elm,e,a):e.isAsyncPlaceholder=!0;else if(n(e.isStatic)&&n(t.isStatic)&&e.key===t.key&&(n(e.isCloned)||n(e.isOnce)))e.componentInstance=t.componentInstance;else{var u,f=e.data;r(f)&&r(u=f.hook)&&r(u=u.prepatch)&&u(t,e);var d=t.children,C=e.children;if(r(f)&&m(e)){for(u=0;u<s.update.length;++u)s.update[u](t,e);r(u=f.hook)&&r(u=u.update)&&u(t,e)}i(e.text)?r(d)&&r(C)?d!==C&&function(t,e,a,n,o){for(var s,h,u,f=0,d=0,C=e.length-1,p=e[0],m=e[C],D=a.length-1,v=a[0],S=a[D],I=!o;f<=C&&d<=D;)i(p)?p=e[++f]:i(m)?m=e[--C]:Ha(p,v)?(x(p,v,n),p=e[++f],v=a[++d]):Ha(m,S)?(x(m,S,n),m=e[--C],S=a[--D]):Ha(p,S)?(x(p,S,n),I&&l.insertBefore(t,p.elm,l.nextSibling(m.elm)),p=e[++f],S=a[--D]):Ha(m,v)?(x(m,v,n),I&&l.insertBefore(t,m.elm,p.elm),m=e[--C],v=a[++d]):(i(s)&&(s=Ya(e,f,C)),i(h=r(v.key)?s[v.key]:y(v,e,f,C))?c(v,n,t,p.elm,!1,a,d):Ha(u=e[h],v)?(x(u,v,n),e[h]=void 0,I&&l.insertBefore(t,u.elm,p.elm)):c(v,n,t,p.elm,!1,a,d),v=a[++d]);f>C?g(t,i(a[D+1])?null:a[D+1].elm,a,d,D,n):d>D&&T(0,e,f,C)}(h,d,C,a,o):r(C)?(r(t.text)&&l.setTextContent(h,""),g(h,null,C,0,C.length-1,a)):r(d)?T(0,d,0,d.length-1):r(t.text)&&l.setTextContent(h,""):t.text!==e.text&&l.setTextContent(h,e.text),r(f)&&r(u=f.hook)&&r(u=u.postpatch)&&u(t,e)}}}function w(t,e,a){if(n(a)&&r(t.parent))t.parent.data.pendingInsert=e;else for(var i=0;i<e.length;++i)e[i].data.hook.insert(e[i])}var F=C("attrs,class,staticClass,staticStyle,key");function E(t,e,a,i){var o,s=e.tag,h=e.data,l=e.children;if(i=i||h&&h.pre,e.elm=t,n(e.isComment)&&r(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(r(h)&&(r(o=h.hook)&&r(o=o.init)&&o(e,!0),r(o=e.componentInstance)))return f(e,a),!0;if(r(s)){if(r(l))if(t.hasChildNodes())if(r(o=h)&&r(o=o.domProps)&&r(o=o.innerHTML)){if(o!==t.innerHTML)return!1}else{for(var u=!0,c=t.firstChild,d=0;d<l.length;d++){if(!c||!E(c,l[d],a,i)){u=!1;break}c=c.nextSibling}if(!u||c)return!1}else p(e,l,a);if(r(h)){var C=!1;for(var m in h)if(!F(m)){C=!0,D(e,a);break}!C&&h.class&&ee(h.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,a,o,h,u){if(!i(e)){var f=!1,d=[];if(i(t))f=!0,c(e,d,h,u);else{var C=r(t.nodeType);if(!C&&Ha(t,e))x(t,e,d,o);else{if(C){if(1===t.nodeType&&t.hasAttribute(R)&&(t.removeAttribute(R),a=!0),n(a)&&E(t,e,d))return w(e,d,!0),t;t=function(t){return new ft(l.tagName(t).toLowerCase(),{},[],void 0,t)}(t)}var p=t.elm,D=l.parentNode(p);if(c(e,d,p._leaveCb?null:D,l.nextSibling(p)),r(e.parent))for(var v=e.parent,g=m(e);v;){for(var I=0;I<s.destroy.length;++I)s.destroy[I](v);if(v.elm=e.elm,g){for(var y=0;y<s.create.length;++y)s.create[y](Ga,v);var F=v.data.hook.insert;if(F.merged)for(var b=1;b<F.fns.length;b++)F.fns[b]()}else ka(v);v=v.parent}r(D)?T(0,[t],0,0):r(t.tag)&&S(t)}}return w(e,d,f),e.elm}r(t)&&S(t)}}({nodeOps:_a,modules:[$a,ai,hi,ci,Ii,W?{create:zi,activate:zi,remove:function(t,e){!0!==t.data.show?Wi(t,e):e()}}:{}].concat(ja)});j&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&ar(t,"input")});var ji={inserted:function(t,e,a,i){"select"===a.tag?(i.elm&&!i.elm._vOptions?oe(a,"postpatch",function(){ji.componentUpdated(t,e,a)}):qi(t,e,a.context),t._vOptions=[].map.call(t.options,$i)):("textarea"===a.tag||Ra(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",tr),t.addEventListener("compositionend",er),t.addEventListener("change",er),j&&(t.vmodel=!0)))},componentUpdated:function(t,e,a){if("select"===a.tag){qi(t,e,a.context);var i=t._vOptions,r=t._vOptions=[].map.call(t.options,$i);if(r.some(function(t,e){return!O(t,i[e])}))(t.multiple?e.value.some(function(t){return Qi(t,r)}):e.value!==e.oldValue&&Qi(e.value,r))&&ar(t,"change")}}};function qi(t,e,a){Zi(t,e,a),(J||q)&&setTimeout(function(){Zi(t,e,a)},0)}function Zi(t,e,a){var i=e.value,r=t.multiple;if(!r||Array.isArray(i)){for(var n,o,s=0,h=t.options.length;s<h;s++)if(o=t.options[s],r)n=N(i,$i(o))>-1,o.selected!==n&&(o.selected=n);else if(O($i(o),i))return void(t.selectedIndex!==s&&(t.selectedIndex=s));r||(t.selectedIndex=-1)}}function Qi(t,e){return e.every(function(e){return!O(e,t)})}function $i(t){return"_value"in t?t._value:t.value}function tr(t){t.target.composing=!0}function er(t){t.target.composing&&(t.target.composing=!1,ar(t.target,"input"))}function ar(t,e){var a=document.createEvent("HTMLEvents");a.initEvent(e,!0,!0),t.dispatchEvent(a)}function ir(t){return!t.componentInstance||t.data&&t.data.transition?t:ir(t.componentInstance._vnode)}var rr={model:ji,show:{bind:function(t,e,a){var i=e.value,r=(a=ir(a)).data&&a.data.transition,n=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;i&&r?(a.data.show=!0,Xi(a,function(){t.style.display=n})):t.style.display=i?n:"none"},update:function(t,e,a){var i=e.value;!i!=!e.oldValue&&((a=ir(a)).data&&a.data.transition?(a.data.show=!0,i?Xi(a,function(){t.style.display=t.__vOriginalDisplay}):Wi(a,function(){t.style.display="none"})):t.style.display=i?t.__vOriginalDisplay:"none")},unbind:function(t,e,a,i,r){r||(t.style.display=t.__vOriginalDisplay)}}},nr={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function or(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?or(fe(e.children)):t}function sr(t){var e={},a=t.$options;for(var i in a.propsData)e[i]=t[i];var r=a._parentListeners;for(var n in r)e[T(n)]=r[n];return e}function hr(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var lr={name:"transition",props:nr,abstract:!0,render:function(t){var e=this,a=this.$slots.default;if(a&&(a=a.filter(function(t){return t.tag||ce(t)})).length){0;var i=this.mode;0;var r=a[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return r;var n=or(r);if(!n)return r;if(this._leaving)return hr(t,r);var s="__transition-"+this._uid+"-";n.key=null==n.key?n.isComment?s+"comment":s+n.tag:o(n.key)?0===String(n.key).indexOf(s)?n.key:s+n.key:n.key;var h=(n.data||(n.data={})).transition=sr(this),l=this._vnode,u=or(l);if(n.data.directives&&n.data.directives.some(function(t){return"show"===t.name})&&(n.data.show=!0),u&&u.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(n,u)&&!ce(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var c=u.data.transition=E({},h);if("out-in"===i)return this._leaving=!0,oe(c,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),hr(t,r);if("in-out"===i){if(ce(n))return l;var f,d=function(){f()};oe(h,"afterEnter",d),oe(h,"enterCancelled",d),oe(c,"delayLeave",function(t){f=t})}}return r}}},ur=E({tag:String,moveClass:String},nr);function cr(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function fr(t){t.data.newPos=t.elm.getBoundingClientRect()}function dr(t){var e=t.data.pos,a=t.data.newPos,i=e.left-a.left,r=e.top-a.top;if(i||r){t.data.moved=!0;var n=t.elm.style;n.transform=n.WebkitTransform="translate("+i+"px,"+r+"px)",n.transitionDuration="0s"}}delete ur.mode;var Cr={Transition:lr,TransitionGroup:{props:ur,render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",a=Object.create(null),i=this.prevChildren=this.children,r=this.$slots.default||[],n=this.children=[],o=sr(this),s=0;s<r.length;s++){var h=r[s];if(h.tag)if(null!=h.key&&0!==String(h.key).indexOf("__vlist"))n.push(h),a[h.key]=h,(h.data||(h.data={})).transition=o;else;}if(i){for(var l=[],u=[],c=0;c<i.length;c++){var f=i[c];f.data.transition=o,f.data.pos=f.elm.getBoundingClientRect(),a[f.key]?l.push(f):u.push(f)}this.kept=t(e,null,l),this.removed=u}return t(e,null,n)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(cr),t.forEach(fr),t.forEach(dr),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var a=t.elm,i=a.style;_i(a,e),i.transform=i.WebkitTransform=i.transitionDuration="",a.addEventListener(Ai,a._moveCb=function t(i){i&&!/transform$/.test(i.propertyName)||(a.removeEventListener(Ai,t),a._moveCb=null,Bi(a,e))})}}))},methods:{hasMove:function(t,e){if(!Ei)return!1;if(this._hasMove)return this._hasMove;var a=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){xi(a,t)}),yi(a,e),a.style.display="none",this.$el.appendChild(a);var i=Vi(a);return this.$el.removeChild(a),this._hasMove=i.hasTransform}}}};ua.config.mustUseProp=function(t,e,a){return"value"===a&&ga(t)&&"button"!==e||"selected"===a&&"option"===t||"checked"===a&&"input"===t||"muted"===a&&"video"===t},ua.config.isReservedTag=Na,ua.config.isReservedAttr=va,ua.config.getTagNamespace=function(t){return Oa(t)?"svg":"math"===t?"math":void 0},ua.config.isUnknownElement=function(t){if(!W)return!0;if(Na(t))return!1;if(t=t.toLowerCase(),null!=Pa[t])return Pa[t];var e=document.createElement(t);return t.indexOf("-")>-1?Pa[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Pa[t]=/HTMLUnknownElement/.test(e.toString())},E(ua.options.directives,rr),E(ua.options.components,Cr),ua.prototype.__patch__=W?Ji:L,ua.prototype.$mount=function(t,e){return function(t,e,a){return t.$el=e,t.$options.render||(t.$options.render=Ct),Ie(t,"beforeMount"),new Ae(t,function(){t._update(t._render(),a)},L,null,!0),a=!1,null==t.$vnode&&(t._isMounted=!0,Ie(t,"mounted")),t}(this,t=t&&W?function(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}(t):void 0,e)},W&&setTimeout(function(){k.devtools&&at&&at.emit("init",ua)},0),e.default=ua}.call(this,a("yLpj"))},KxfA:function(t,e,a){a("Tghj").__DEV__;var i=a("bYtY"),r=(i.isTypedArray,i.extend),n=(i.assert,i.each),o=i.isObject,s=a("4NO4"),h=s.getDataItemValue,l=s.isDataItemOption,u=a("OELB").parseDate,c=a("7G+c"),f=a("k9D9"),d=f.SOURCE_FORMAT_TYPED_ARRAY,C=f.SOURCE_FORMAT_ARRAY_ROWS,p=f.SOURCE_FORMAT_ORIGINAL,m=f.SOURCE_FORMAT_OBJECT_ROWS;function D(t,e){c.isInstance(t)||(t=c.seriesDataToSource(t)),this._source=t;var a=this._data=t.data,i=t.sourceFormat;i===d&&(this._offset=0,this._dimSize=e,this._data=a);var n=g[i===C?i+"_"+t.seriesLayoutBy:i];r(this,n)}var v=D.prototype;v.pure=!1,v.persistent=!0,v.getSource=function(){return this._source};var g={arrayRows_column:{pure:!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(t){return this._data[t+this._source.startIndex]},appendData:I},arrayRows_row:{pure:!0,count:function(){var t=this._data[0];return t?Math.max(0,t.length-this._source.startIndex):0},getItem:function(t){t+=this._source.startIndex;for(var e=[],a=this._data,i=0;i<a.length;i++){var r=a[i];e.push(r?r[t]:null)}return e},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:S,getItem:T,appendData:I},keyedColumns:{pure:!0,count:function(){var t=this._source.dimensionsDefine[0].name,e=this._data[t];return e?e.length:0},getItem:function(t){for(var e=[],a=this._source.dimensionsDefine,i=0;i<a.length;i++){var r=this._data[a[i].name];e.push(r?r[t]:null)}return e},appendData:function(t){var e=this._data;n(t,function(t,a){for(var i=e[a]||(e[a]=[]),r=0;r<(t||[]).length;r++)i.push(t[r])})}},original:{count:S,getItem:T,appendData:I},typedArray:{persistent:!1,pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(t,e){t-=this._offset,e=e||[];for(var a=this._dimSize*t,i=0;i<this._dimSize;i++)e[i]=this._data[a+i];return e},appendData:function(t){this._data=t},clean:function(){this._offset+=this.count(),this._data=null}}};function S(){return this._data.length}function T(t){return this._data[t]}function I(t){for(var e=0;e<t.length;e++)this._data.push(t[e])}var y={arrayRows:x,objectRows:function(t,e,a,i){return null!=a?t[i]:t},keyedColumns:x,original:function(t,e,a,i){var r=h(t);return null!=a&&r instanceof Array?r[a]:r},typedArray:x};function x(t,e,a,i){return null!=a?t[a]:t}var w={arrayRows:F,objectRows:function(t,e,a,i){return E(t[e],this._dimensionInfos[e])},keyedColumns:F,original:function(t,e,a,i){var r=t&&(null==t.value?t:t.value);return!this._rawData.pure&&l(t)&&(this.hasItemOption=!0),E(r instanceof Array?r[i]:r,this._dimensionInfos[e])},typedArray:function(t,e,a,i){return t[i]}};function F(t,e,a,i){return E(t[i],this._dimensionInfos[e])}function E(t,e){var a=e&&e.type;if("ordinal"===a){var i=e&&e.ordinalMeta;return i?i.parseAndCollect(t):t}return"time"===a&&"number"!=typeof t&&null!=t&&"-"!==t&&(t=+u(t)),null==t||""===t?NaN:+t}e.DefaultDataProvider=D,e.defaultDimValueGetters=w,e.retrieveRawValue=function(t,e,a){if(t){var i=t.getRawDataItem(e);if(null!=i){var r,n,o=t.getProvider().getSource().sourceFormat,s=t.getDimensionInfo(a);return s&&(r=s.name,n=s.index),y[o](i,e,n,r)}}},e.retrieveRawAttr=function(t,e,a){if(t){var i=t.getProvider().getSource().sourceFormat;if(i===p||i===m){var r=t.getRawDataItem(e);return i!==p||o(r)||(r=null),r?r[a]:void 0}}}},L0Ub:function(t,e,a){var i=a("bYtY"),r=i.each,n=i.createHashMap,o=(i.assert,a("Tghj").__DEV__,n(["tooltip","label","itemName","itemId","seriesName"]));function s(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}e.OTHER_DIMENSIONS=o,e.summarizeDimensions=function(t){var e={},a=e.encode={},i=n(),h=[],l=[],u=e.userOutput={dimensionNames:t.dimensions.slice(),encode:{}};r(t.dimensions,function(e){var r=t.getDimensionInfo(e),n=r.coordDim;if(n){var c=r.coordDimIndex;s(a,n)[c]=e,r.isExtraCoord||(i.set(n,1),function(t){return!("ordinal"===t||"time"===t)}(r.type)&&(h[0]=e),s(u.encode,n)[c]=r.index),r.defaultTooltip&&l.push(e)}o.each(function(t,e){var i=s(a,e),n=r.otherDims[e];null!=n&&!1!==n&&(i[n]=r.name)})});var c=[],f={};i.each(function(t,e){var i=a[e];f[e]=i[0],c=c.concat(i)}),e.dataDimsOnCoord=c,e.encodeFirstDimNotExtra=f;var d=a.label;d&&d.length&&(h=d.slice());var C=a.tooltip;return C&&C.length?l=C.slice():l.length||(l=h.slice()),a.defaultedLabel=h,a.defaultedTooltip=l,e},e.getDimensionTypeByAxis=function(t){return"category"===t?"ordinal":"time"===t?"time":"float"}},L2JU:function(t,e,a){"use strict";a.r(e),a.d(e,"Store",function(){return u}),a.d(e,"install",function(){return v}),a.d(e,"mapState",function(){return g}),a.d(e,"mapMutations",function(){return S}),a.d(e,"mapGetters",function(){return T}),a.d(e,"mapActions",function(){return I}),a.d(e,"createNamespacedHelpers",function(){return y});
/**
 * vuex v3.0.1
 * (c) 2017 Evan You
 * @license MIT
 */
var i=function(t){if(Number(t.version.split(".")[0])>=2)t.mixin({beforeCreate:a});else{var e=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[a].concat(t.init):a,e.call(this,t)}}function a(){var t=this.$options;t.store?this.$store="function"==typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}},r="undefined"!=typeof window&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function n(t,e){Object.keys(t).forEach(function(a){return e(t[a],a)})}var o=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var a=t.state;this.state=("function"==typeof a?a():a)||{}},s={namespaced:{configurable:!0}};s.namespaced.get=function(){return!!this._rawModule.namespaced},o.prototype.addChild=function(t,e){this._children[t]=e},o.prototype.removeChild=function(t){delete this._children[t]},o.prototype.getChild=function(t){return this._children[t]},o.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},o.prototype.forEachChild=function(t){n(this._children,t)},o.prototype.forEachGetter=function(t){this._rawModule.getters&&n(this._rawModule.getters,t)},o.prototype.forEachAction=function(t){this._rawModule.actions&&n(this._rawModule.actions,t)},o.prototype.forEachMutation=function(t){this._rawModule.mutations&&n(this._rawModule.mutations,t)},Object.defineProperties(o.prototype,s);var h=function(t){this.register([],t,!1)};h.prototype.get=function(t){return t.reduce(function(t,e){return t.getChild(e)},this.root)},h.prototype.getNamespace=function(t){var e=this.root;return t.reduce(function(t,a){return t+((e=e.getChild(a)).namespaced?a+"/":"")},"")},h.prototype.update=function(t){!function t(e,a,i){0;a.update(i);if(i.modules)for(var r in i.modules){if(!a.getChild(r))return void 0;t(e.concat(r),a.getChild(r),i.modules[r])}}([],this.root,t)},h.prototype.register=function(t,e,a){var i=this;void 0===a&&(a=!0);var r=new o(e,a);0===t.length?this.root=r:this.get(t.slice(0,-1)).addChild(t[t.length-1],r);e.modules&&n(e.modules,function(e,r){i.register(t.concat(r),e,a)})},h.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),a=t[t.length-1];e.getChild(a).runtime&&e.removeChild(a)};var l;var u=function(t){var e=this;void 0===t&&(t={}),!l&&"undefined"!=typeof window&&window.Vue&&v(window.Vue);var a=t.plugins;void 0===a&&(a=[]);var i=t.strict;void 0===i&&(i=!1);var n=t.state;void 0===n&&(n={}),"function"==typeof n&&(n=n()||{}),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new h(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new l;var o=this,s=this.dispatch,u=this.commit;this.dispatch=function(t,e){return s.call(o,t,e)},this.commit=function(t,e,a){return u.call(o,t,e,a)},this.strict=i,p(this,n,[],this._modules.root),C(this,n),a.forEach(function(t){return t(e)}),l.config.devtools&&function(t){r&&(t._devtoolHook=r,r.emit("vuex:init",t),r.on("vuex:travel-to-state",function(e){t.replaceState(e)}),t.subscribe(function(t,e){r.emit("vuex:mutation",t,e)}))}(this)},c={state:{configurable:!0}};function f(t,e){return e.indexOf(t)<0&&e.push(t),function(){var a=e.indexOf(t);a>-1&&e.splice(a,1)}}function d(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var a=t.state;p(t,a,[],t._modules.root,!0),C(t,a,e)}function C(t,e,a){var i=t._vm;t.getters={};var r={};n(t._wrappedGetters,function(e,a){r[a]=function(){return e(t)},Object.defineProperty(t.getters,a,{get:function(){return t._vm[a]},enumerable:!0})});var o=l.config.silent;l.config.silent=!0,t._vm=new l({data:{$$state:e},computed:r}),l.config.silent=o,t.strict&&function(t){t._vm.$watch(function(){return this._data.$$state},function(){0},{deep:!0,sync:!0})}(t),i&&(a&&t._withCommit(function(){i._data.$$state=null}),l.nextTick(function(){return i.$destroy()}))}function p(t,e,a,i,r){var n=!a.length,o=t._modules.getNamespace(a);if(i.namespaced&&(t._modulesNamespaceMap[o]=i),!n&&!r){var s=m(e,a.slice(0,-1)),h=a[a.length-1];t._withCommit(function(){l.set(s,h,i.state)})}var u=i.context=function(t,e,a){var i=""===e,r={dispatch:i?t.dispatch:function(a,i,r){var n=D(a,i,r),o=n.payload,s=n.options,h=n.type;return s&&s.root||(h=e+h),t.dispatch(h,o)},commit:i?t.commit:function(a,i,r){var n=D(a,i,r),o=n.payload,s=n.options,h=n.type;s&&s.root||(h=e+h),t.commit(h,o,s)}};return Object.defineProperties(r,{getters:{get:i?function(){return t.getters}:function(){return function(t,e){var a={},i=e.length;return Object.keys(t.getters).forEach(function(r){if(r.slice(0,i)===e){var n=r.slice(i);Object.defineProperty(a,n,{get:function(){return t.getters[r]},enumerable:!0})}}),a}(t,e)}},state:{get:function(){return m(t.state,a)}}}),r}(t,o,a);i.forEachMutation(function(e,a){!function(t,e,a,i){(t._mutations[e]||(t._mutations[e]=[])).push(function(e){a.call(t,i.state,e)})}(t,o+a,e,u)}),i.forEachAction(function(e,a){var i=e.root?a:o+a,r=e.handler||e;!function(t,e,a,i){(t._actions[e]||(t._actions[e]=[])).push(function(e,r){var n=a.call(t,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:t.getters,rootState:t.state},e,r);return function(t){return t&&"function"==typeof t.then}(n)||(n=Promise.resolve(n)),t._devtoolHook?n.catch(function(e){throw t._devtoolHook.emit("vuex:error",e),e}):n})}(t,i,r,u)}),i.forEachGetter(function(e,a){!function(t,e,a,i){if(t._wrappedGetters[e])return void 0;t._wrappedGetters[e]=function(t){return a(i.state,i.getters,t.state,t.getters)}}(t,o+a,e,u)}),i.forEachChild(function(i,n){p(t,e,a.concat(n),i,r)})}function m(t,e){return e.length?e.reduce(function(t,e){return t[e]},t):t}function D(t,e,a){return function(t){return null!==t&&"object"==typeof t}(t)&&t.type&&(a=e,e=t,t=t.type),{type:t,payload:e,options:a}}function v(t){l&&t===l||i(l=t)}c.state.get=function(){return this._vm._data.$$state},c.state.set=function(t){0},u.prototype.commit=function(t,e,a){var i=this,r=D(t,e,a),n=r.type,o=r.payload,s=(r.options,{type:n,payload:o}),h=this._mutations[n];h&&(this._withCommit(function(){h.forEach(function(t){t(o)})}),this._subscribers.forEach(function(t){return t(s,i.state)}))},u.prototype.dispatch=function(t,e){var a=this,i=D(t,e),r=i.type,n=i.payload,o={type:r,payload:n},s=this._actions[r];if(s)return this._actionSubscribers.forEach(function(t){return t(o,a.state)}),s.length>1?Promise.all(s.map(function(t){return t(n)})):s[0](n)},u.prototype.subscribe=function(t){return f(t,this._subscribers)},u.prototype.subscribeAction=function(t){return f(t,this._actionSubscribers)},u.prototype.watch=function(t,e,a){var i=this;return this._watcherVM.$watch(function(){return t(i.state,i.getters)},e,a)},u.prototype.replaceState=function(t){var e=this;this._withCommit(function(){e._vm._data.$$state=t})},u.prototype.registerModule=function(t,e,a){void 0===a&&(a={}),"string"==typeof t&&(t=[t]),this._modules.register(t,e),p(this,this.state,t,this._modules.get(t),a.preserveState),C(this,this.state)},u.prototype.unregisterModule=function(t){var e=this;"string"==typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var a=m(e.state,t.slice(0,-1));l.delete(a,t[t.length-1])}),d(this)},u.prototype.hotUpdate=function(t){this._modules.update(t),d(this,!0)},u.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(u.prototype,c);var g=w(function(t,e){var a={};return x(e).forEach(function(e){var i=e.key,r=e.val;a[i]=function(){var e=this.$store.state,a=this.$store.getters;if(t){var i=F(this.$store,"mapState",t);if(!i)return;e=i.context.state,a=i.context.getters}return"function"==typeof r?r.call(this,e,a):e[r]},a[i].vuex=!0}),a}),S=w(function(t,e){var a={};return x(e).forEach(function(e){var i=e.key,r=e.val;a[i]=function(){for(var e=[],a=arguments.length;a--;)e[a]=arguments[a];var i=this.$store.commit;if(t){var n=F(this.$store,"mapMutations",t);if(!n)return;i=n.context.commit}return"function"==typeof r?r.apply(this,[i].concat(e)):i.apply(this.$store,[r].concat(e))}}),a}),T=w(function(t,e){var a={};return x(e).forEach(function(e){var i=e.key,r=e.val;r=t+r,a[i]=function(){if(!t||F(this.$store,"mapGetters",t))return this.$store.getters[r]},a[i].vuex=!0}),a}),I=w(function(t,e){var a={};return x(e).forEach(function(e){var i=e.key,r=e.val;a[i]=function(){for(var e=[],a=arguments.length;a--;)e[a]=arguments[a];var i=this.$store.dispatch;if(t){var n=F(this.$store,"mapActions",t);if(!n)return;i=n.context.dispatch}return"function"==typeof r?r.apply(this,[i].concat(e)):i.apply(this.$store,[r].concat(e))}}),a}),y=function(t){return{mapState:g.bind(null,t),mapGetters:T.bind(null,t),mapMutations:S.bind(null,t),mapActions:I.bind(null,t)}};function x(t){return Array.isArray(t)?t.map(function(t){return{key:t,val:t}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}})}function w(t){return function(e,a){return"string"!=typeof e?(a=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,a)}}function F(t,e,a){return t._modulesNamespaceMap[a]}var E={Store:u,install:v,version:"3.0.1",mapState:g,mapMutations:S,mapGetters:T,mapActions:I,createNamespacedHelpers:y};e.default=E},L5pH:function(t,e){t.exports=function(){}},LPTA:function(t,e){var a=1;"undefined"!=typeof window&&(a=Math.max(window.devicePixelRatio||1,1));var i=a;e.debugMode=0,e.devicePixelRatio=i},LYNF:function(t,e,a){"use strict";var i=a("OH9c");t.exports=function(t,e,a,r,n){var o=new Error(t);return i(o,e,a,r,n)}},Li4W:function(t,e,a){a("1i29")("Set")},Lmem:function(t,e,a){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},Lr1a:function(t,e,a){a("JpO0"),t.exports=a("VSTI").Object.getPrototypeOf},LvDl:function(t,e,a){(function(t,i){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var n,o=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",h="Expected a function",l="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",d=1,C=2,p=4,m=1,D=2,v=1,g=2,S=4,T=8,I=16,y=32,x=64,w=128,F=256,E=512,b=30,L="...",M=800,A=16,O=1,N=2,P=1/0,R=9007199254740991,_=1.7976931348623157e308,B=NaN,k=4294967295,G=k-1,V=k>>>1,H=[["ary",w],["bind",v],["bindKey",g],["curry",T],["curryRight",I],["flip",E],["partial",y],["partialRight",x],["rearg",F]],Y="[object Arguments]",X="[object Array]",W="[object AsyncFunction]",U="[object Boolean]",K="[object Date]",z="[object DOMException]",J="[object Error]",j="[object Function]",q="[object GeneratorFunction]",Z="[object Map]",Q="[object Number]",$="[object Null]",tt="[object Object]",et="[object Proxy]",at="[object RegExp]",it="[object Set]",rt="[object String]",nt="[object Symbol]",ot="[object Undefined]",st="[object WeakMap]",ht="[object WeakSet]",lt="[object ArrayBuffer]",ut="[object DataView]",ct="[object Float32Array]",ft="[object Float64Array]",dt="[object Int8Array]",Ct="[object Int16Array]",pt="[object Int32Array]",mt="[object Uint8Array]",Dt="[object Uint8ClampedArray]",vt="[object Uint16Array]",gt="[object Uint32Array]",St=/\b__p \+= '';/g,Tt=/\b(__p \+=) '' \+/g,It=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yt=/&(?:amp|lt|gt|quot|#39);/g,xt=/[&<>"']/g,wt=RegExp(yt.source),Ft=RegExp(xt.source),Et=/<%-([\s\S]+?)%>/g,bt=/<%([\s\S]+?)%>/g,Lt=/<%=([\s\S]+?)%>/g,Mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,At=/^\w*$/,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nt=/[\\^$.*+?()[\]{}|]/g,Pt=RegExp(Nt.source),Rt=/^\s+/,_t=/\s/,Bt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,kt=/\{\n\/\* \[wrapped with (.+)\] \*/,Gt=/,? & /,Vt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ht=/[()=,{}\[\]\/\s]/,Yt=/\\(\\)?/g,Xt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wt=/\w*$/,Ut=/^[-+]0x[0-9a-f]+$/i,Kt=/^0b[01]+$/i,zt=/^\[object .+?Constructor\]$/,Jt=/^0o[0-7]+$/i,jt=/^(?:0|[1-9]\d*)$/,qt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zt=/($^)/,Qt=/['\n\r\u2028\u2029\\]/g,$t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ee="[\\ud800-\\udfff]",ae="["+te+"]",ie="["+$t+"]",re="\\d+",ne="[\\u2700-\\u27bf]",oe="[a-z\\xdf-\\xf6\\xf8-\\xff]",se="[^\\ud800-\\udfff"+te+re+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",he="\\ud83c[\\udffb-\\udfff]",le="[^\\ud800-\\udfff]",ue="(?:\\ud83c[\\udde6-\\uddff]){2}",ce="[\\ud800-\\udbff][\\udc00-\\udfff]",fe="[A-Z\\xc0-\\xd6\\xd8-\\xde]",de="(?:"+oe+"|"+se+")",Ce="(?:"+fe+"|"+se+")",pe="(?:"+ie+"|"+he+")"+"?",me="[\\ufe0e\\ufe0f]?"+pe+("(?:\\u200d(?:"+[le,ue,ce].join("|")+")[\\ufe0e\\ufe0f]?"+pe+")*"),De="(?:"+[ne,ue,ce].join("|")+")"+me,ve="(?:"+[le+ie+"?",ie,ue,ce,ee].join("|")+")",ge=RegExp("['’]","g"),Se=RegExp(ie,"g"),Te=RegExp(he+"(?="+he+")|"+ve+me,"g"),Ie=RegExp([fe+"?"+oe+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ae,fe,"$"].join("|")+")",Ce+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ae,fe+de,"$"].join("|")+")",fe+"?"+de+"+(?:['’](?:d|ll|m|re|s|t|ve))?",fe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",re,De].join("|"),"g"),ye=RegExp("[\\u200d\\ud800-\\udfff"+$t+"\\ufe0e\\ufe0f]"),xe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,we=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Fe=-1,Ee={};Ee[ct]=Ee[ft]=Ee[dt]=Ee[Ct]=Ee[pt]=Ee[mt]=Ee[Dt]=Ee[vt]=Ee[gt]=!0,Ee[Y]=Ee[X]=Ee[lt]=Ee[U]=Ee[ut]=Ee[K]=Ee[J]=Ee[j]=Ee[Z]=Ee[Q]=Ee[tt]=Ee[at]=Ee[it]=Ee[rt]=Ee[st]=!1;var be={};be[Y]=be[X]=be[lt]=be[ut]=be[U]=be[K]=be[ct]=be[ft]=be[dt]=be[Ct]=be[pt]=be[Z]=be[Q]=be[tt]=be[at]=be[it]=be[rt]=be[nt]=be[mt]=be[Dt]=be[vt]=be[gt]=!0,be[J]=be[j]=be[st]=!1;var Le={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Me=parseFloat,Ae=parseInt,Oe="object"==typeof t&&t&&t.Object===Object&&t,Ne="object"==typeof self&&self&&self.Object===Object&&self,Pe=Oe||Ne||Function("return this")(),Re="object"==typeof e&&e&&!e.nodeType&&e,_e=Re&&"object"==typeof i&&i&&!i.nodeType&&i,Be=_e&&_e.exports===Re,ke=Be&&Oe.process,Ge=function(){try{var t=_e&&_e.require&&_e.require("util").types;return t||ke&&ke.binding&&ke.binding("util")}catch(t){}}(),Ve=Ge&&Ge.isArrayBuffer,He=Ge&&Ge.isDate,Ye=Ge&&Ge.isMap,Xe=Ge&&Ge.isRegExp,We=Ge&&Ge.isSet,Ue=Ge&&Ge.isTypedArray;function Ke(t,e,a){switch(a.length){case 0:return t.call(e);case 1:return t.call(e,a[0]);case 2:return t.call(e,a[0],a[1]);case 3:return t.call(e,a[0],a[1],a[2])}return t.apply(e,a)}function ze(t,e,a,i){for(var r=-1,n=null==t?0:t.length;++r<n;){var o=t[r];e(i,o,a(o),t)}return i}function Je(t,e){for(var a=-1,i=null==t?0:t.length;++a<i&&!1!==e(t[a],a,t););return t}function je(t,e){for(var a=null==t?0:t.length;a--&&!1!==e(t[a],a,t););return t}function qe(t,e){for(var a=-1,i=null==t?0:t.length;++a<i;)if(!e(t[a],a,t))return!1;return!0}function Ze(t,e){for(var a=-1,i=null==t?0:t.length,r=0,n=[];++a<i;){var o=t[a];e(o,a,t)&&(n[r++]=o)}return n}function Qe(t,e){return!!(null==t?0:t.length)&&ha(t,e,0)>-1}function $e(t,e,a){for(var i=-1,r=null==t?0:t.length;++i<r;)if(a(e,t[i]))return!0;return!1}function ta(t,e){for(var a=-1,i=null==t?0:t.length,r=Array(i);++a<i;)r[a]=e(t[a],a,t);return r}function ea(t,e){for(var a=-1,i=e.length,r=t.length;++a<i;)t[r+a]=e[a];return t}function aa(t,e,a,i){var r=-1,n=null==t?0:t.length;for(i&&n&&(a=t[++r]);++r<n;)a=e(a,t[r],r,t);return a}function ia(t,e,a,i){var r=null==t?0:t.length;for(i&&r&&(a=t[--r]);r--;)a=e(a,t[r],r,t);return a}function ra(t,e){for(var a=-1,i=null==t?0:t.length;++a<i;)if(e(t[a],a,t))return!0;return!1}var na=fa("length");function oa(t,e,a){var i;return a(t,function(t,a,r){if(e(t,a,r))return i=a,!1}),i}function sa(t,e,a,i){for(var r=t.length,n=a+(i?1:-1);i?n--:++n<r;)if(e(t[n],n,t))return n;return-1}function ha(t,e,a){return e==e?function(t,e,a){var i=a-1,r=t.length;for(;++i<r;)if(t[i]===e)return i;return-1}(t,e,a):sa(t,ua,a)}function la(t,e,a,i){for(var r=a-1,n=t.length;++r<n;)if(i(t[r],e))return r;return-1}function ua(t){return t!=t}function ca(t,e){var a=null==t?0:t.length;return a?pa(t,e)/a:B}function fa(t){return function(e){return null==e?n:e[t]}}function da(t){return function(e){return null==t?n:t[e]}}function Ca(t,e,a,i,r){return r(t,function(t,r,n){a=i?(i=!1,t):e(a,t,r,n)}),a}function pa(t,e){for(var a,i=-1,r=t.length;++i<r;){var o=e(t[i]);o!==n&&(a=a===n?o:a+o)}return a}function ma(t,e){for(var a=-1,i=Array(t);++a<t;)i[a]=e(a);return i}function Da(t){return t?t.slice(0,Pa(t)+1).replace(Rt,""):t}function va(t){return function(e){return t(e)}}function ga(t,e){return ta(e,function(e){return t[e]})}function Sa(t,e){return t.has(e)}function Ta(t,e){for(var a=-1,i=t.length;++a<i&&ha(e,t[a],0)>-1;);return a}function Ia(t,e){for(var a=t.length;a--&&ha(e,t[a],0)>-1;);return a}var ya=da({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),xa=da({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function wa(t){return"\\"+Le[t]}function Fa(t){return ye.test(t)}function Ea(t){var e=-1,a=Array(t.size);return t.forEach(function(t,i){a[++e]=[i,t]}),a}function ba(t,e){return function(a){return t(e(a))}}function La(t,e){for(var a=-1,i=t.length,r=0,n=[];++a<i;){var o=t[a];o!==e&&o!==f||(t[a]=f,n[r++]=a)}return n}function Ma(t){var e=-1,a=Array(t.size);return t.forEach(function(t){a[++e]=t}),a}function Aa(t){var e=-1,a=Array(t.size);return t.forEach(function(t){a[++e]=[t,t]}),a}function Oa(t){return Fa(t)?function(t){var e=Te.lastIndex=0;for(;Te.test(t);)++e;return e}(t):na(t)}function Na(t){return Fa(t)?function(t){return t.match(Te)||[]}(t):function(t){return t.split("")}(t)}function Pa(t){for(var e=t.length;e--&&_t.test(t.charAt(e)););return e}var Ra=da({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var _a=function t(e){var a=(e=null==e?Pe:_a.defaults(Pe.Object(),e,_a.pick(Pe,we))).Array,i=e.Date,r=e.Error,_t=e.Function,$t=e.Math,te=e.Object,ee=e.RegExp,ae=e.String,ie=e.TypeError,re=a.prototype,ne=_t.prototype,oe=te.prototype,se=e["__core-js_shared__"],he=ne.toString,le=oe.hasOwnProperty,ue=0,ce=function(){var t=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),fe=oe.toString,de=he.call(te),Ce=Pe._,pe=ee("^"+he.call(le).replace(Nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=Be?e.Buffer:n,De=e.Symbol,ve=e.Uint8Array,Te=me?me.allocUnsafe:n,ye=ba(te.getPrototypeOf,te),Le=te.create,Oe=oe.propertyIsEnumerable,Ne=re.splice,Re=De?De.isConcatSpreadable:n,_e=De?De.iterator:n,ke=De?De.toStringTag:n,Ge=function(){try{var t=Gn(te,"defineProperty");return t({},"",{}),t}catch(t){}}(),na=e.clearTimeout!==Pe.clearTimeout&&e.clearTimeout,da=i&&i.now!==Pe.Date.now&&i.now,Ba=e.setTimeout!==Pe.setTimeout&&e.setTimeout,ka=$t.ceil,Ga=$t.floor,Va=te.getOwnPropertySymbols,Ha=me?me.isBuffer:n,Ya=e.isFinite,Xa=re.join,Wa=ba(te.keys,te),Ua=$t.max,Ka=$t.min,za=i.now,Ja=e.parseInt,ja=$t.random,qa=re.reverse,Za=Gn(e,"DataView"),Qa=Gn(e,"Map"),$a=Gn(e,"Promise"),ti=Gn(e,"Set"),ei=Gn(e,"WeakMap"),ai=Gn(te,"create"),ii=ei&&new ei,ri={},ni=co(Za),oi=co(Qa),si=co($a),hi=co(ti),li=co(ei),ui=De?De.prototype:n,ci=ui?ui.valueOf:n,fi=ui?ui.toString:n;function di(t){if(Ls(t)&&!vs(t)&&!(t instanceof Di)){if(t instanceof mi)return t;if(le.call(t,"__wrapped__"))return fo(t)}return new mi(t)}var Ci=function(){function t(){}return function(e){if(!bs(e))return{};if(Le)return Le(e);t.prototype=e;var a=new t;return t.prototype=n,a}}();function pi(){}function mi(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function Di(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=k,this.__views__=[]}function vi(t){var e=-1,a=null==t?0:t.length;for(this.clear();++e<a;){var i=t[e];this.set(i[0],i[1])}}function gi(t){var e=-1,a=null==t?0:t.length;for(this.clear();++e<a;){var i=t[e];this.set(i[0],i[1])}}function Si(t){var e=-1,a=null==t?0:t.length;for(this.clear();++e<a;){var i=t[e];this.set(i[0],i[1])}}function Ti(t){var e=-1,a=null==t?0:t.length;for(this.__data__=new Si;++e<a;)this.add(t[e])}function Ii(t){var e=this.__data__=new gi(t);this.size=e.size}function yi(t,e){var a=vs(t),i=!a&&Ds(t),r=!a&&!i&&Is(t),n=!a&&!i&&!r&&Bs(t),o=a||i||r||n,s=o?ma(t.length,ae):[],h=s.length;for(var l in t)!e&&!le.call(t,l)||o&&("length"==l||r&&("offset"==l||"parent"==l)||n&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Kn(l,h))||s.push(l);return s}function xi(t){var e=t.length;return e?t[Tr(0,e-1)]:n}function wi(t,e){return ho(an(t),Pi(e,0,t.length))}function Fi(t){return ho(an(t))}function Ei(t,e,a){(a===n||Cs(t[e],a))&&(a!==n||e in t)||Oi(t,e,a)}function bi(t,e,a){var i=t[e];le.call(t,e)&&Cs(i,a)&&(a!==n||e in t)||Oi(t,e,a)}function Li(t,e){for(var a=t.length;a--;)if(Cs(t[a][0],e))return a;return-1}function Mi(t,e,a,i){return Gi(t,function(t,r,n){e(i,t,a(t),n)}),i}function Ai(t,e){return t&&rn(e,nh(e),t)}function Oi(t,e,a){"__proto__"==e&&Ge?Ge(t,e,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[e]=a}function Ni(t,e){for(var i=-1,r=e.length,o=a(r),s=null==t;++i<r;)o[i]=s?n:th(t,e[i]);return o}function Pi(t,e,a){return t==t&&(a!==n&&(t=t<=a?t:a),e!==n&&(t=t>=e?t:e)),t}function Ri(t,e,a,i,r,o){var s,h=e&d,l=e&C,u=e&p;if(a&&(s=r?a(t,i,r,o):a(t)),s!==n)return s;if(!bs(t))return t;var c=vs(t);if(c){if(s=function(t){var e=t.length,a=new t.constructor(e);return e&&"string"==typeof t[0]&&le.call(t,"index")&&(a.index=t.index,a.input=t.input),a}(t),!h)return an(t,s)}else{var f=Yn(t),m=f==j||f==q;if(Is(t))return qr(t,h);if(f==tt||f==Y||m&&!r){if(s=l||m?{}:Wn(t),!h)return l?function(t,e){return rn(t,Hn(t),e)}(t,function(t,e){return t&&rn(e,oh(e),t)}(s,t)):function(t,e){return rn(t,Vn(t),e)}(t,Ai(s,t))}else{if(!be[f])return r?t:{};s=function(t,e,a){var i=t.constructor;switch(e){case lt:return Zr(t);case U:case K:return new i(+t);case ut:return function(t,e){var a=e?Zr(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}(t,a);case ct:case ft:case dt:case Ct:case pt:case mt:case Dt:case vt:case gt:return Qr(t,a);case Z:return new i;case Q:case rt:return new i(t);case at:return function(t){var e=new t.constructor(t.source,Wt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case it:return new i;case nt:return function(t){return ci?te(ci.call(t)):{}}(t)}}(t,f,h)}}o||(o=new Ii);var D=o.get(t);if(D)return D;o.set(t,s),Ps(t)?t.forEach(function(i){s.add(Ri(i,e,a,i,t,o))}):Ms(t)&&t.forEach(function(i,r){s.set(r,Ri(i,e,a,r,t,o))});var v=c?n:(u?l?On:An:l?oh:nh)(t);return Je(v||t,function(i,r){v&&(i=t[r=i]),bi(s,r,Ri(i,e,a,r,t,o))}),s}function _i(t,e,a){var i=a.length;if(null==t)return!i;for(t=te(t);i--;){var r=a[i],o=e[r],s=t[r];if(s===n&&!(r in t)||!o(s))return!1}return!0}function Bi(t,e,a){if("function"!=typeof t)throw new ie(h);return ro(function(){t.apply(n,a)},e)}function ki(t,e,a,i){var r=-1,n=Qe,s=!0,h=t.length,l=[],u=e.length;if(!h)return l;a&&(e=ta(e,va(a))),i?(n=$e,s=!1):e.length>=o&&(n=Sa,s=!1,e=new Ti(e));t:for(;++r<h;){var c=t[r],f=null==a?c:a(c);if(c=i||0!==c?c:0,s&&f==f){for(var d=u;d--;)if(e[d]===f)continue t;l.push(c)}else n(e,f,i)||l.push(c)}return l}di.templateSettings={escape:Et,evaluate:bt,interpolate:Lt,variable:"",imports:{_:di}},di.prototype=pi.prototype,di.prototype.constructor=di,mi.prototype=Ci(pi.prototype),mi.prototype.constructor=mi,Di.prototype=Ci(pi.prototype),Di.prototype.constructor=Di,vi.prototype.clear=function(){this.__data__=ai?ai(null):{},this.size=0},vi.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},vi.prototype.get=function(t){var e=this.__data__;if(ai){var a=e[t];return a===u?n:a}return le.call(e,t)?e[t]:n},vi.prototype.has=function(t){var e=this.__data__;return ai?e[t]!==n:le.call(e,t)},vi.prototype.set=function(t,e){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=ai&&e===n?u:e,this},gi.prototype.clear=function(){this.__data__=[],this.size=0},gi.prototype.delete=function(t){var e=this.__data__,a=Li(e,t);return!(a<0||(a==e.length-1?e.pop():Ne.call(e,a,1),--this.size,0))},gi.prototype.get=function(t){var e=this.__data__,a=Li(e,t);return a<0?n:e[a][1]},gi.prototype.has=function(t){return Li(this.__data__,t)>-1},gi.prototype.set=function(t,e){var a=this.__data__,i=Li(a,t);return i<0?(++this.size,a.push([t,e])):a[i][1]=e,this},Si.prototype.clear=function(){this.size=0,this.__data__={hash:new vi,map:new(Qa||gi),string:new vi}},Si.prototype.delete=function(t){var e=Bn(this,t).delete(t);return this.size-=e?1:0,e},Si.prototype.get=function(t){return Bn(this,t).get(t)},Si.prototype.has=function(t){return Bn(this,t).has(t)},Si.prototype.set=function(t,e){var a=Bn(this,t),i=a.size;return a.set(t,e),this.size+=a.size==i?0:1,this},Ti.prototype.add=Ti.prototype.push=function(t){return this.__data__.set(t,u),this},Ti.prototype.has=function(t){return this.__data__.has(t)},Ii.prototype.clear=function(){this.__data__=new gi,this.size=0},Ii.prototype.delete=function(t){var e=this.__data__,a=e.delete(t);return this.size=e.size,a},Ii.prototype.get=function(t){return this.__data__.get(t)},Ii.prototype.has=function(t){return this.__data__.has(t)},Ii.prototype.set=function(t,e){var a=this.__data__;if(a instanceof gi){var i=a.__data__;if(!Qa||i.length<o-1)return i.push([t,e]),this.size=++a.size,this;a=this.__data__=new Si(i)}return a.set(t,e),this.size=a.size,this};var Gi=sn(zi),Vi=sn(Ji,!0);function Hi(t,e){var a=!0;return Gi(t,function(t,i,r){return a=!!e(t,i,r)}),a}function Yi(t,e,a){for(var i=-1,r=t.length;++i<r;){var o=t[i],s=e(o);if(null!=s&&(h===n?s==s&&!_s(s):a(s,h)))var h=s,l=o}return l}function Xi(t,e){var a=[];return Gi(t,function(t,i,r){e(t,i,r)&&a.push(t)}),a}function Wi(t,e,a,i,r){var n=-1,o=t.length;for(a||(a=Un),r||(r=[]);++n<o;){var s=t[n];e>0&&a(s)?e>1?Wi(s,e-1,a,i,r):ea(r,s):i||(r[r.length]=s)}return r}var Ui=hn(),Ki=hn(!0);function zi(t,e){return t&&Ui(t,e,nh)}function Ji(t,e){return t&&Ki(t,e,nh)}function ji(t,e){return Ze(e,function(e){return ws(t[e])})}function qi(t,e){for(var a=0,i=(e=Kr(e,t)).length;null!=t&&a<i;)t=t[uo(e[a++])];return a&&a==i?t:n}function Zi(t,e,a){var i=e(t);return vs(t)?i:ea(i,a(t))}function Qi(t){return null==t?t===n?ot:$:ke&&ke in te(t)?function(t){var e=le.call(t,ke),a=t[ke];try{t[ke]=n;var i=!0}catch(t){}var r=fe.call(t);return i&&(e?t[ke]=a:delete t[ke]),r}(t):function(t){return fe.call(t)}(t)}function $i(t,e){return t>e}function tr(t,e){return null!=t&&le.call(t,e)}function er(t,e){return null!=t&&e in te(t)}function ar(t,e,i){for(var r=i?$e:Qe,o=t[0].length,s=t.length,h=s,l=a(s),u=1/0,c=[];h--;){var f=t[h];h&&e&&(f=ta(f,va(e))),u=Ka(f.length,u),l[h]=!i&&(e||o>=120&&f.length>=120)?new Ti(h&&f):n}f=t[0];var d=-1,C=l[0];t:for(;++d<o&&c.length<u;){var p=f[d],m=e?e(p):p;if(p=i||0!==p?p:0,!(C?Sa(C,m):r(c,m,i))){for(h=s;--h;){var D=l[h];if(!(D?Sa(D,m):r(t[h],m,i)))continue t}C&&C.push(m),c.push(p)}}return c}function ir(t,e,a){var i=null==(t=eo(t,e=Kr(e,t)))?t:t[uo(xo(e))];return null==i?n:Ke(i,t,a)}function rr(t){return Ls(t)&&Qi(t)==Y}function nr(t,e,a,i,r){return t===e||(null==t||null==e||!Ls(t)&&!Ls(e)?t!=t&&e!=e:function(t,e,a,i,r,o){var s=vs(t),h=vs(e),l=s?X:Yn(t),u=h?X:Yn(e),c=(l=l==Y?tt:l)==tt,f=(u=u==Y?tt:u)==tt,d=l==u;if(d&&Is(t)){if(!Is(e))return!1;s=!0,c=!1}if(d&&!c)return o||(o=new Ii),s||Bs(t)?Ln(t,e,a,i,r,o):function(t,e,a,i,r,n,o){switch(a){case ut:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case lt:return!(t.byteLength!=e.byteLength||!n(new ve(t),new ve(e)));case U:case K:case Q:return Cs(+t,+e);case J:return t.name==e.name&&t.message==e.message;case at:case rt:return t==e+"";case Z:var s=Ea;case it:var h=i&m;if(s||(s=Ma),t.size!=e.size&&!h)return!1;var l=o.get(t);if(l)return l==e;i|=D,o.set(t,e);var u=Ln(s(t),s(e),i,r,n,o);return o.delete(t),u;case nt:if(ci)return ci.call(t)==ci.call(e)}return!1}(t,e,l,a,i,r,o);if(!(a&m)){var C=c&&le.call(t,"__wrapped__"),p=f&&le.call(e,"__wrapped__");if(C||p){var v=C?t.value():t,g=p?e.value():e;return o||(o=new Ii),r(v,g,a,i,o)}}return!!d&&(o||(o=new Ii),function(t,e,a,i,r,o){var s=a&m,h=An(t),l=h.length,u=An(e).length;if(l!=u&&!s)return!1;for(var c=l;c--;){var f=h[c];if(!(s?f in e:le.call(e,f)))return!1}var d=o.get(t),C=o.get(e);if(d&&C)return d==e&&C==t;var p=!0;o.set(t,e),o.set(e,t);for(var D=s;++c<l;){f=h[c];var v=t[f],g=e[f];if(i)var S=s?i(g,v,f,e,t,o):i(v,g,f,t,e,o);if(!(S===n?v===g||r(v,g,a,i,o):S)){p=!1;break}D||(D="constructor"==f)}if(p&&!D){var T=t.constructor,I=e.constructor;T!=I&&"constructor"in t&&"constructor"in e&&!("function"==typeof T&&T instanceof T&&"function"==typeof I&&I instanceof I)&&(p=!1)}return o.delete(t),o.delete(e),p}(t,e,a,i,r,o))}(t,e,a,i,nr,r))}function or(t,e,a,i){var r=a.length,o=r,s=!i;if(null==t)return!o;for(t=te(t);r--;){var h=a[r];if(s&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++r<o;){var l=(h=a[r])[0],u=t[l],c=h[1];if(s&&h[2]){if(u===n&&!(l in t))return!1}else{var f=new Ii;if(i)var d=i(u,c,l,t,e,f);if(!(d===n?nr(c,u,m|D,i,f):d))return!1}}return!0}function sr(t){return!(!bs(t)||function(t){return!!ce&&ce in t}(t))&&(ws(t)?pe:zt).test(co(t))}function hr(t){return"function"==typeof t?t:null==t?Ah:"object"==typeof t?vs(t)?Cr(t[0],t[1]):dr(t):Vh(t)}function lr(t){if(!Zn(t))return Wa(t);var e=[];for(var a in te(t))le.call(t,a)&&"constructor"!=a&&e.push(a);return e}function ur(t){if(!bs(t))return function(t){var e=[];if(null!=t)for(var a in te(t))e.push(a);return e}(t);var e=Zn(t),a=[];for(var i in t)("constructor"!=i||!e&&le.call(t,i))&&a.push(i);return a}function cr(t,e){return t<e}function fr(t,e){var i=-1,r=Ss(t)?a(t.length):[];return Gi(t,function(t,a,n){r[++i]=e(t,a,n)}),r}function dr(t){var e=kn(t);return 1==e.length&&e[0][2]?$n(e[0][0],e[0][1]):function(a){return a===t||or(a,t,e)}}function Cr(t,e){return Jn(t)&&Qn(e)?$n(uo(t),e):function(a){var i=th(a,t);return i===n&&i===e?eh(a,t):nr(e,i,m|D)}}function pr(t,e,a,i,r){t!==e&&Ui(e,function(o,s){if(r||(r=new Ii),bs(o))!function(t,e,a,i,r,o,s){var h=ao(t,a),l=ao(e,a),u=s.get(l);if(u)Ei(t,a,u);else{var c=o?o(h,l,a+"",t,e,s):n,f=c===n;if(f){var d=vs(l),C=!d&&Is(l),p=!d&&!C&&Bs(l);c=l,d||C||p?vs(h)?c=h:Ts(h)?c=an(h):C?(f=!1,c=qr(l,!0)):p?(f=!1,c=Qr(l,!0)):c=[]:Os(l)||Ds(l)?(c=h,Ds(h)?c=Us(h):bs(h)&&!ws(h)||(c=Wn(l))):f=!1}f&&(s.set(l,c),r(c,l,i,o,s),s.delete(l)),Ei(t,a,c)}}(t,e,s,a,pr,i,r);else{var h=i?i(ao(t,s),o,s+"",t,e,r):n;h===n&&(h=o),Ei(t,s,h)}},oh)}function mr(t,e){var a=t.length;if(a)return Kn(e+=e<0?a:0,a)?t[e]:n}function Dr(t,e,a){var i=-1;return e=ta(e=e.length?ta(e,function(t){return vs(t)?function(e){return qi(e,1===t.length?t[0]:t)}:t}):[Ah],va(_n())),function(t,e){var a=t.length;for(t.sort(e);a--;)t[a]=t[a].value;return t}(fr(t,function(t,a,r){return{criteria:ta(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return function(t,e,a){for(var i=-1,r=t.criteria,n=e.criteria,o=r.length,s=a.length;++i<o;){var h=$r(r[i],n[i]);if(h){if(i>=s)return h;var l=a[i];return h*("desc"==l?-1:1)}}return t.index-e.index}(t,e,a)})}function vr(t,e,a){for(var i=-1,r=e.length,n={};++i<r;){var o=e[i],s=qi(t,o);a(s,o)&&Fr(n,Kr(o,t),s)}return n}function gr(t,e,a,i){var r=i?la:ha,n=-1,o=e.length,s=t;for(t===e&&(e=an(e)),a&&(s=ta(t,va(a)));++n<o;)for(var h=0,l=e[n],u=a?a(l):l;(h=r(s,u,h,i))>-1;)s!==t&&Ne.call(s,h,1),Ne.call(t,h,1);return t}function Sr(t,e){for(var a=t?e.length:0,i=a-1;a--;){var r=e[a];if(a==i||r!==n){var n=r;Kn(r)?Ne.call(t,r,1):kr(t,r)}}return t}function Tr(t,e){return t+Ga(ja()*(e-t+1))}function Ir(t,e){var a="";if(!t||e<1||e>R)return a;do{e%2&&(a+=t),(e=Ga(e/2))&&(t+=t)}while(e);return a}function yr(t,e){return no(to(t,e,Ah),t+"")}function xr(t){return xi(Ch(t))}function wr(t,e){var a=Ch(t);return ho(a,Pi(e,0,a.length))}function Fr(t,e,a,i){if(!bs(t))return t;for(var r=-1,o=(e=Kr(e,t)).length,s=o-1,h=t;null!=h&&++r<o;){var l=uo(e[r]),u=a;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(r!=s){var c=h[l];(u=i?i(c,l,h):n)===n&&(u=bs(c)?c:Kn(e[r+1])?[]:{})}bi(h,l,u),h=h[l]}return t}var Er=ii?function(t,e){return ii.set(t,e),t}:Ah,br=Ge?function(t,e){return Ge(t,"toString",{configurable:!0,enumerable:!1,value:bh(e),writable:!0})}:Ah;function Lr(t){return ho(Ch(t))}function Mr(t,e,i){var r=-1,n=t.length;e<0&&(e=-e>n?0:n+e),(i=i>n?n:i)<0&&(i+=n),n=e>i?0:i-e>>>0,e>>>=0;for(var o=a(n);++r<n;)o[r]=t[r+e];return o}function Ar(t,e){var a;return Gi(t,function(t,i,r){return!(a=e(t,i,r))}),!!a}function Or(t,e,a){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=V){for(;i<r;){var n=i+r>>>1,o=t[n];null!==o&&!_s(o)&&(a?o<=e:o<e)?i=n+1:r=n}return r}return Nr(t,e,Ah,a)}function Nr(t,e,a,i){var r=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(e=a(e))!=e,h=null===e,l=_s(e),u=e===n;r<o;){var c=Ga((r+o)/2),f=a(t[c]),d=f!==n,C=null===f,p=f==f,m=_s(f);if(s)var D=i||p;else D=u?p&&(i||d):h?p&&d&&(i||!C):l?p&&d&&!C&&(i||!m):!C&&!m&&(i?f<=e:f<e);D?r=c+1:o=c}return Ka(o,G)}function Pr(t,e){for(var a=-1,i=t.length,r=0,n=[];++a<i;){var o=t[a],s=e?e(o):o;if(!a||!Cs(s,h)){var h=s;n[r++]=0===o?0:o}}return n}function Rr(t){return"number"==typeof t?t:_s(t)?B:+t}function _r(t){if("string"==typeof t)return t;if(vs(t))return ta(t,_r)+"";if(_s(t))return fi?fi.call(t):"";var e=t+"";return"0"==e&&1/t==-P?"-0":e}function Br(t,e,a){var i=-1,r=Qe,n=t.length,s=!0,h=[],l=h;if(a)s=!1,r=$e;else if(n>=o){var u=e?null:yn(t);if(u)return Ma(u);s=!1,r=Sa,l=new Ti}else l=e?[]:h;t:for(;++i<n;){var c=t[i],f=e?e(c):c;if(c=a||0!==c?c:0,s&&f==f){for(var d=l.length;d--;)if(l[d]===f)continue t;e&&l.push(f),h.push(c)}else r(l,f,a)||(l!==h&&l.push(f),h.push(c))}return h}function kr(t,e){return null==(t=eo(t,e=Kr(e,t)))||delete t[uo(xo(e))]}function Gr(t,e,a,i){return Fr(t,e,a(qi(t,e)),i)}function Vr(t,e,a,i){for(var r=t.length,n=i?r:-1;(i?n--:++n<r)&&e(t[n],n,t););return a?Mr(t,i?0:n,i?n+1:r):Mr(t,i?n+1:0,i?r:n)}function Hr(t,e){var a=t;return a instanceof Di&&(a=a.value()),aa(e,function(t,e){return e.func.apply(e.thisArg,ea([t],e.args))},a)}function Yr(t,e,i){var r=t.length;if(r<2)return r?Br(t[0]):[];for(var n=-1,o=a(r);++n<r;)for(var s=t[n],h=-1;++h<r;)h!=n&&(o[n]=ki(o[n]||s,t[h],e,i));return Br(Wi(o,1),e,i)}function Xr(t,e,a){for(var i=-1,r=t.length,o=e.length,s={};++i<r;){var h=i<o?e[i]:n;a(s,t[i],h)}return s}function Wr(t){return Ts(t)?t:[]}function Ur(t){return"function"==typeof t?t:Ah}function Kr(t,e){return vs(t)?t:Jn(t,e)?[t]:lo(Ks(t))}var zr=yr;function Jr(t,e,a){var i=t.length;return a=a===n?i:a,!e&&a>=i?t:Mr(t,e,a)}var jr=na||function(t){return Pe.clearTimeout(t)};function qr(t,e){if(e)return t.slice();var a=t.length,i=Te?Te(a):new t.constructor(a);return t.copy(i),i}function Zr(t){var e=new t.constructor(t.byteLength);return new ve(e).set(new ve(t)),e}function Qr(t,e){var a=e?Zr(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function $r(t,e){if(t!==e){var a=t!==n,i=null===t,r=t==t,o=_s(t),s=e!==n,h=null===e,l=e==e,u=_s(e);if(!h&&!u&&!o&&t>e||o&&s&&l&&!h&&!u||i&&s&&l||!a&&l||!r)return 1;if(!i&&!o&&!u&&t<e||u&&a&&r&&!i&&!o||h&&a&&r||!s&&r||!l)return-1}return 0}function tn(t,e,i,r){for(var n=-1,o=t.length,s=i.length,h=-1,l=e.length,u=Ua(o-s,0),c=a(l+u),f=!r;++h<l;)c[h]=e[h];for(;++n<s;)(f||n<o)&&(c[i[n]]=t[n]);for(;u--;)c[h++]=t[n++];return c}function en(t,e,i,r){for(var n=-1,o=t.length,s=-1,h=i.length,l=-1,u=e.length,c=Ua(o-h,0),f=a(c+u),d=!r;++n<c;)f[n]=t[n];for(var C=n;++l<u;)f[C+l]=e[l];for(;++s<h;)(d||n<o)&&(f[C+i[s]]=t[n++]);return f}function an(t,e){var i=-1,r=t.length;for(e||(e=a(r));++i<r;)e[i]=t[i];return e}function rn(t,e,a,i){var r=!a;a||(a={});for(var o=-1,s=e.length;++o<s;){var h=e[o],l=i?i(a[h],t[h],h,a,t):n;l===n&&(l=t[h]),r?Oi(a,h,l):bi(a,h,l)}return a}function nn(t,e){return function(a,i){var r=vs(a)?ze:Mi,n=e?e():{};return r(a,t,_n(i,2),n)}}function on(t){return yr(function(e,a){var i=-1,r=a.length,o=r>1?a[r-1]:n,s=r>2?a[2]:n;for(o=t.length>3&&"function"==typeof o?(r--,o):n,s&&zn(a[0],a[1],s)&&(o=r<3?n:o,r=1),e=te(e);++i<r;){var h=a[i];h&&t(e,h,i,o)}return e})}function sn(t,e){return function(a,i){if(null==a)return a;if(!Ss(a))return t(a,i);for(var r=a.length,n=e?r:-1,o=te(a);(e?n--:++n<r)&&!1!==i(o[n],n,o););return a}}function hn(t){return function(e,a,i){for(var r=-1,n=te(e),o=i(e),s=o.length;s--;){var h=o[t?s:++r];if(!1===a(n[h],h,n))break}return e}}function ln(t){return function(e){var a=Fa(e=Ks(e))?Na(e):n,i=a?a[0]:e.charAt(0),r=a?Jr(a,1).join(""):e.slice(1);return i[t]()+r}}function un(t){return function(e){return aa(wh(Dh(e).replace(ge,"")),t,"")}}function cn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var a=Ci(t.prototype),i=t.apply(a,e);return bs(i)?i:a}}function fn(t){return function(e,a,i){var r=te(e);if(!Ss(e)){var o=_n(a,3);e=nh(e),a=function(t){return o(r[t],t,r)}}var s=t(e,a,i);return s>-1?r[o?e[s]:s]:n}}function dn(t){return Mn(function(e){var a=e.length,i=a,r=mi.prototype.thru;for(t&&e.reverse();i--;){var o=e[i];if("function"!=typeof o)throw new ie(h);if(r&&!s&&"wrapper"==Pn(o))var s=new mi([],!0)}for(i=s?i:a;++i<a;){var l=Pn(o=e[i]),u="wrapper"==l?Nn(o):n;s=u&&jn(u[0])&&u[1]==(w|T|y|F)&&!u[4].length&&1==u[9]?s[Pn(u[0])].apply(s,u[3]):1==o.length&&jn(o)?s[l]():s.thru(o)}return function(){var t=arguments,i=t[0];if(s&&1==t.length&&vs(i))return s.plant(i).value();for(var r=0,n=a?e[r].apply(this,t):i;++r<a;)n=e[r].call(this,n);return n}})}function Cn(t,e,i,r,o,s,h,l,u,c){var f=e&w,d=e&v,C=e&g,p=e&(T|I),m=e&E,D=C?n:cn(t);return function v(){for(var g=arguments.length,S=a(g),T=g;T--;)S[T]=arguments[T];if(p)var I=Rn(v),y=function(t,e){for(var a=t.length,i=0;a--;)t[a]===e&&++i;return i}(S,I);if(r&&(S=tn(S,r,o,p)),s&&(S=en(S,s,h,p)),g-=y,p&&g<c){var x=La(S,I);return Tn(t,e,Cn,v.placeholder,i,S,x,l,u,c-g)}var w=d?i:this,F=C?w[t]:t;return g=S.length,l?S=function(t,e){for(var a=t.length,i=Ka(e.length,a),r=an(t);i--;){var o=e[i];t[i]=Kn(o,a)?r[o]:n}return t}(S,l):m&&g>1&&S.reverse(),f&&u<g&&(S.length=u),this&&this!==Pe&&this instanceof v&&(F=D||cn(F)),F.apply(w,S)}}function pn(t,e){return function(a,i){return function(t,e,a,i){return zi(t,function(t,r,n){e(i,a(t),r,n)}),i}(a,t,e(i),{})}}function mn(t,e){return function(a,i){var r;if(a===n&&i===n)return e;if(a!==n&&(r=a),i!==n){if(r===n)return i;"string"==typeof a||"string"==typeof i?(a=_r(a),i=_r(i)):(a=Rr(a),i=Rr(i)),r=t(a,i)}return r}}function Dn(t){return Mn(function(e){return e=ta(e,va(_n())),yr(function(a){var i=this;return t(e,function(t){return Ke(t,i,a)})})})}function vn(t,e){var a=(e=e===n?" ":_r(e)).length;if(a<2)return a?Ir(e,t):e;var i=Ir(e,ka(t/Oa(e)));return Fa(e)?Jr(Na(i),0,t).join(""):i.slice(0,t)}function gn(t){return function(e,i,r){return r&&"number"!=typeof r&&zn(e,i,r)&&(i=r=n),e=Hs(e),i===n?(i=e,e=0):i=Hs(i),function(t,e,i,r){for(var n=-1,o=Ua(ka((e-t)/(i||1)),0),s=a(o);o--;)s[r?o:++n]=t,t+=i;return s}(e,i,r=r===n?e<i?1:-1:Hs(r),t)}}function Sn(t){return function(e,a){return"string"==typeof e&&"string"==typeof a||(e=Ws(e),a=Ws(a)),t(e,a)}}function Tn(t,e,a,i,r,o,s,h,l,u){var c=e&T;e|=c?y:x,(e&=~(c?x:y))&S||(e&=~(v|g));var f=[t,e,r,c?o:n,c?s:n,c?n:o,c?n:s,h,l,u],d=a.apply(n,f);return jn(t)&&io(d,f),d.placeholder=i,oo(d,t,e)}function In(t){var e=$t[t];return function(t,a){if(t=Ws(t),(a=null==a?0:Ka(Ys(a),292))&&Ya(t)){var i=(Ks(t)+"e").split("e");return+((i=(Ks(e(i[0]+"e"+(+i[1]+a)))+"e").split("e"))[0]+"e"+(+i[1]-a))}return e(t)}}var yn=ti&&1/Ma(new ti([,-0]))[1]==P?function(t){return new ti(t)}:_h;function xn(t){return function(e){var a=Yn(e);return a==Z?Ea(e):a==it?Aa(e):function(t,e){return ta(e,function(e){return[e,t[e]]})}(e,t(e))}}function wn(t,e,i,r,o,s,l,u){var c=e&g;if(!c&&"function"!=typeof t)throw new ie(h);var d=r?r.length:0;if(d||(e&=~(y|x),r=o=n),l=l===n?l:Ua(Ys(l),0),u=u===n?u:Ys(u),d-=o?o.length:0,e&x){var C=r,p=o;r=o=n}var m=c?n:Nn(t),D=[t,e,i,r,o,C,p,s,l,u];if(m&&function(t,e){var a=t[1],i=e[1],r=a|i,n=r<(v|g|w),o=i==w&&a==T||i==w&&a==F&&t[7].length<=e[8]||i==(w|F)&&e[7].length<=e[8]&&a==T;if(!n&&!o)return t;i&v&&(t[2]=e[2],r|=a&v?0:S);var s=e[3];if(s){var h=t[3];t[3]=h?tn(h,s,e[4]):s,t[4]=h?La(t[3],f):e[4]}(s=e[5])&&(h=t[5],t[5]=h?en(h,s,e[6]):s,t[6]=h?La(t[5],f):e[6]),(s=e[7])&&(t[7]=s),i&w&&(t[8]=null==t[8]?e[8]:Ka(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(D,m),t=D[0],e=D[1],i=D[2],r=D[3],o=D[4],!(u=D[9]=D[9]===n?c?0:t.length:Ua(D[9]-d,0))&&e&(T|I)&&(e&=~(T|I)),e&&e!=v)E=e==T||e==I?function(t,e,i){var r=cn(t);return function o(){for(var s=arguments.length,h=a(s),l=s,u=Rn(o);l--;)h[l]=arguments[l];var c=s<3&&h[0]!==u&&h[s-1]!==u?[]:La(h,u);return(s-=c.length)<i?Tn(t,e,Cn,o.placeholder,n,h,c,n,n,i-s):Ke(this&&this!==Pe&&this instanceof o?r:t,this,h)}}(t,e,u):e!=y&&e!=(v|y)||o.length?Cn.apply(n,D):function(t,e,i,r){var n=e&v,o=cn(t);return function e(){for(var s=-1,h=arguments.length,l=-1,u=r.length,c=a(u+h),f=this&&this!==Pe&&this instanceof e?o:t;++l<u;)c[l]=r[l];for(;h--;)c[l++]=arguments[++s];return Ke(f,n?i:this,c)}}(t,e,i,r);else var E=function(t,e,a){var i=e&v,r=cn(t);return function e(){return(this&&this!==Pe&&this instanceof e?r:t).apply(i?a:this,arguments)}}(t,e,i);return oo((m?Er:io)(E,D),t,e)}function Fn(t,e,a,i){return t===n||Cs(t,oe[a])&&!le.call(i,a)?e:t}function En(t,e,a,i,r,o){return bs(t)&&bs(e)&&(o.set(e,t),pr(t,e,n,En,o),o.delete(e)),t}function bn(t){return Os(t)?n:t}function Ln(t,e,a,i,r,o){var s=a&m,h=t.length,l=e.length;if(h!=l&&!(s&&l>h))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var f=-1,d=!0,C=a&D?new Ti:n;for(o.set(t,e),o.set(e,t);++f<h;){var p=t[f],v=e[f];if(i)var g=s?i(v,p,f,e,t,o):i(p,v,f,t,e,o);if(g!==n){if(g)continue;d=!1;break}if(C){if(!ra(e,function(t,e){if(!Sa(C,e)&&(p===t||r(p,t,a,i,o)))return C.push(e)})){d=!1;break}}else if(p!==v&&!r(p,v,a,i,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function Mn(t){return no(to(t,n,go),t+"")}function An(t){return Zi(t,nh,Vn)}function On(t){return Zi(t,oh,Hn)}var Nn=ii?function(t){return ii.get(t)}:_h;function Pn(t){for(var e=t.name+"",a=ri[e],i=le.call(ri,e)?a.length:0;i--;){var r=a[i],n=r.func;if(null==n||n==t)return r.name}return e}function Rn(t){return(le.call(di,"placeholder")?di:t).placeholder}function _n(){var t=di.iteratee||Oh;return t=t===Oh?hr:t,arguments.length?t(arguments[0],arguments[1]):t}function Bn(t,e){var a=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?a["string"==typeof e?"string":"hash"]:a.map}function kn(t){for(var e=nh(t),a=e.length;a--;){var i=e[a],r=t[i];e[a]=[i,r,Qn(r)]}return e}function Gn(t,e){var a=function(t,e){return null==t?n:t[e]}(t,e);return sr(a)?a:n}var Vn=Va?function(t){return null==t?[]:(t=te(t),Ze(Va(t),function(e){return Oe.call(t,e)}))}:Xh,Hn=Va?function(t){for(var e=[];t;)ea(e,Vn(t)),t=ye(t);return e}:Xh,Yn=Qi;function Xn(t,e,a){for(var i=-1,r=(e=Kr(e,t)).length,n=!1;++i<r;){var o=uo(e[i]);if(!(n=null!=t&&a(t,o)))break;t=t[o]}return n||++i!=r?n:!!(r=null==t?0:t.length)&&Es(r)&&Kn(o,r)&&(vs(t)||Ds(t))}function Wn(t){return"function"!=typeof t.constructor||Zn(t)?{}:Ci(ye(t))}function Un(t){return vs(t)||Ds(t)||!!(Re&&t&&t[Re])}function Kn(t,e){var a=typeof t;return!!(e=null==e?R:e)&&("number"==a||"symbol"!=a&&jt.test(t))&&t>-1&&t%1==0&&t<e}function zn(t,e,a){if(!bs(a))return!1;var i=typeof e;return!!("number"==i?Ss(a)&&Kn(e,a.length):"string"==i&&e in a)&&Cs(a[e],t)}function Jn(t,e){if(vs(t))return!1;var a=typeof t;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=t&&!_s(t))||At.test(t)||!Mt.test(t)||null!=e&&t in te(e)}function jn(t){var e=Pn(t),a=di[e];if("function"!=typeof a||!(e in Di.prototype))return!1;if(t===a)return!0;var i=Nn(a);return!!i&&t===i[0]}(Za&&Yn(new Za(new ArrayBuffer(1)))!=ut||Qa&&Yn(new Qa)!=Z||$a&&"[object Promise]"!=Yn($a.resolve())||ti&&Yn(new ti)!=it||ei&&Yn(new ei)!=st)&&(Yn=function(t){var e=Qi(t),a=e==tt?t.constructor:n,i=a?co(a):"";if(i)switch(i){case ni:return ut;case oi:return Z;case si:return"[object Promise]";case hi:return it;case li:return st}return e});var qn=se?ws:Wh;function Zn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||oe)}function Qn(t){return t==t&&!bs(t)}function $n(t,e){return function(a){return null!=a&&a[t]===e&&(e!==n||t in te(a))}}function to(t,e,i){return e=Ua(e===n?t.length-1:e,0),function(){for(var r=arguments,n=-1,o=Ua(r.length-e,0),s=a(o);++n<o;)s[n]=r[e+n];n=-1;for(var h=a(e+1);++n<e;)h[n]=r[n];return h[e]=i(s),Ke(t,this,h)}}function eo(t,e){return e.length<2?t:qi(t,Mr(e,0,-1))}function ao(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var io=so(Er),ro=Ba||function(t,e){return Pe.setTimeout(t,e)},no=so(br);function oo(t,e,a){var i=e+"";return no(t,function(t,e){var a=e.length;if(!a)return t;var i=a-1;return e[i]=(a>1?"& ":"")+e[i],e=e.join(a>2?", ":" "),t.replace(Bt,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return Je(H,function(a){var i="_."+a[0];e&a[1]&&!Qe(t,i)&&t.push(i)}),t.sort()}(function(t){var e=t.match(kt);return e?e[1].split(Gt):[]}(i),a)))}function so(t){var e=0,a=0;return function(){var i=za(),r=A-(i-a);if(a=i,r>0){if(++e>=M)return arguments[0]}else e=0;return t.apply(n,arguments)}}function ho(t,e){var a=-1,i=t.length,r=i-1;for(e=e===n?i:e;++a<e;){var o=Tr(a,r),s=t[o];t[o]=t[a],t[a]=s}return t.length=e,t}var lo=function(t){var e=hs(t,function(t){return a.size===c&&a.clear(),t}),a=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ot,function(t,a,i,r){e.push(i?r.replace(Yt,"$1"):a||t)}),e});function uo(t){if("string"==typeof t||_s(t))return t;var e=t+"";return"0"==e&&1/t==-P?"-0":e}function co(t){if(null!=t){try{return he.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function fo(t){if(t instanceof Di)return t.clone();var e=new mi(t.__wrapped__,t.__chain__);return e.__actions__=an(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Co=yr(function(t,e){return Ts(t)?ki(t,Wi(e,1,Ts,!0)):[]}),po=yr(function(t,e){var a=xo(e);return Ts(a)&&(a=n),Ts(t)?ki(t,Wi(e,1,Ts,!0),_n(a,2)):[]}),mo=yr(function(t,e){var a=xo(e);return Ts(a)&&(a=n),Ts(t)?ki(t,Wi(e,1,Ts,!0),n,a):[]});function Do(t,e,a){var i=null==t?0:t.length;if(!i)return-1;var r=null==a?0:Ys(a);return r<0&&(r=Ua(i+r,0)),sa(t,_n(e,3),r)}function vo(t,e,a){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return a!==n&&(r=Ys(a),r=a<0?Ua(i+r,0):Ka(r,i-1)),sa(t,_n(e,3),r,!0)}function go(t){return null!=t&&t.length?Wi(t,1):[]}function So(t){return t&&t.length?t[0]:n}var To=yr(function(t){var e=ta(t,Wr);return e.length&&e[0]===t[0]?ar(e):[]}),Io=yr(function(t){var e=xo(t),a=ta(t,Wr);return e===xo(a)?e=n:a.pop(),a.length&&a[0]===t[0]?ar(a,_n(e,2)):[]}),yo=yr(function(t){var e=xo(t),a=ta(t,Wr);return(e="function"==typeof e?e:n)&&a.pop(),a.length&&a[0]===t[0]?ar(a,n,e):[]});function xo(t){var e=null==t?0:t.length;return e?t[e-1]:n}var wo=yr(Fo);function Fo(t,e){return t&&t.length&&e&&e.length?gr(t,e):t}var Eo=Mn(function(t,e){var a=null==t?0:t.length,i=Ni(t,e);return Sr(t,ta(e,function(t){return Kn(t,a)?+t:t}).sort($r)),i});function bo(t){return null==t?t:qa.call(t)}var Lo=yr(function(t){return Br(Wi(t,1,Ts,!0))}),Mo=yr(function(t){var e=xo(t);return Ts(e)&&(e=n),Br(Wi(t,1,Ts,!0),_n(e,2))}),Ao=yr(function(t){var e=xo(t);return e="function"==typeof e?e:n,Br(Wi(t,1,Ts,!0),n,e)});function Oo(t){if(!t||!t.length)return[];var e=0;return t=Ze(t,function(t){if(Ts(t))return e=Ua(t.length,e),!0}),ma(e,function(e){return ta(t,fa(e))})}function No(t,e){if(!t||!t.length)return[];var a=Oo(t);return null==e?a:ta(a,function(t){return Ke(e,n,t)})}var Po=yr(function(t,e){return Ts(t)?ki(t,e):[]}),Ro=yr(function(t){return Yr(Ze(t,Ts))}),_o=yr(function(t){var e=xo(t);return Ts(e)&&(e=n),Yr(Ze(t,Ts),_n(e,2))}),Bo=yr(function(t){var e=xo(t);return e="function"==typeof e?e:n,Yr(Ze(t,Ts),n,e)}),ko=yr(Oo);var Go=yr(function(t){var e=t.length,a=e>1?t[e-1]:n;return No(t,a="function"==typeof a?(t.pop(),a):n)});function Vo(t){var e=di(t);return e.__chain__=!0,e}function Ho(t,e){return e(t)}var Yo=Mn(function(t){var e=t.length,a=e?t[0]:0,i=this.__wrapped__,r=function(e){return Ni(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Di&&Kn(a)?((i=i.slice(a,+a+(e?1:0))).__actions__.push({func:Ho,args:[r],thisArg:n}),new mi(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(n),t})):this.thru(r)});var Xo=nn(function(t,e,a){le.call(t,a)?++t[a]:Oi(t,a,1)});var Wo=fn(Do),Uo=fn(vo);function Ko(t,e){return(vs(t)?Je:Gi)(t,_n(e,3))}function zo(t,e){return(vs(t)?je:Vi)(t,_n(e,3))}var Jo=nn(function(t,e,a){le.call(t,a)?t[a].push(e):Oi(t,a,[e])});var jo=yr(function(t,e,i){var r=-1,n="function"==typeof e,o=Ss(t)?a(t.length):[];return Gi(t,function(t){o[++r]=n?Ke(e,t,i):ir(t,e,i)}),o}),qo=nn(function(t,e,a){Oi(t,a,e)});function Zo(t,e){return(vs(t)?ta:fr)(t,_n(e,3))}var Qo=nn(function(t,e,a){t[a?0:1].push(e)},function(){return[[],[]]});var $o=yr(function(t,e){if(null==t)return[];var a=e.length;return a>1&&zn(t,e[0],e[1])?e=[]:a>2&&zn(e[0],e[1],e[2])&&(e=[e[0]]),Dr(t,Wi(e,1),[])}),ts=da||function(){return Pe.Date.now()};function es(t,e,a){return e=a?n:e,e=t&&null==e?t.length:e,wn(t,w,n,n,n,n,e)}function as(t,e){var a;if("function"!=typeof e)throw new ie(h);return t=Ys(t),function(){return--t>0&&(a=e.apply(this,arguments)),t<=1&&(e=n),a}}var is=yr(function(t,e,a){var i=v;if(a.length){var r=La(a,Rn(is));i|=y}return wn(t,i,e,a,r)}),rs=yr(function(t,e,a){var i=v|g;if(a.length){var r=La(a,Rn(rs));i|=y}return wn(e,i,t,a,r)});function ns(t,e,a){var i,r,o,s,l,u,c=0,f=!1,d=!1,C=!0;if("function"!=typeof t)throw new ie(h);function p(e){var a=i,o=r;return i=r=n,c=e,s=t.apply(o,a)}function m(t){var a=t-u;return u===n||a>=e||a<0||d&&t-c>=o}function D(){var t=ts();if(m(t))return v(t);l=ro(D,function(t){var a=e-(t-u);return d?Ka(a,o-(t-c)):a}(t))}function v(t){return l=n,C&&i?p(t):(i=r=n,s)}function g(){var t=ts(),a=m(t);if(i=arguments,r=this,u=t,a){if(l===n)return function(t){return c=t,l=ro(D,e),f?p(t):s}(u);if(d)return jr(l),l=ro(D,e),p(u)}return l===n&&(l=ro(D,e)),s}return e=Ws(e)||0,bs(a)&&(f=!!a.leading,o=(d="maxWait"in a)?Ua(Ws(a.maxWait)||0,e):o,C="trailing"in a?!!a.trailing:C),g.cancel=function(){l!==n&&jr(l),c=0,i=u=r=l=n},g.flush=function(){return l===n?s:v(ts())},g}var os=yr(function(t,e){return Bi(t,1,e)}),ss=yr(function(t,e,a){return Bi(t,Ws(e)||0,a)});function hs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ie(h);var a=function(){var i=arguments,r=e?e.apply(this,i):i[0],n=a.cache;if(n.has(r))return n.get(r);var o=t.apply(this,i);return a.cache=n.set(r,o)||n,o};return a.cache=new(hs.Cache||Si),a}function ls(t){if("function"!=typeof t)throw new ie(h);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}hs.Cache=Si;var us=zr(function(t,e){var a=(e=1==e.length&&vs(e[0])?ta(e[0],va(_n())):ta(Wi(e,1),va(_n()))).length;return yr(function(i){for(var r=-1,n=Ka(i.length,a);++r<n;)i[r]=e[r].call(this,i[r]);return Ke(t,this,i)})}),cs=yr(function(t,e){var a=La(e,Rn(cs));return wn(t,y,n,e,a)}),fs=yr(function(t,e){var a=La(e,Rn(fs));return wn(t,x,n,e,a)}),ds=Mn(function(t,e){return wn(t,F,n,n,n,e)});function Cs(t,e){return t===e||t!=t&&e!=e}var ps=Sn($i),ms=Sn(function(t,e){return t>=e}),Ds=rr(function(){return arguments}())?rr:function(t){return Ls(t)&&le.call(t,"callee")&&!Oe.call(t,"callee")},vs=a.isArray,gs=Ve?va(Ve):function(t){return Ls(t)&&Qi(t)==lt};function Ss(t){return null!=t&&Es(t.length)&&!ws(t)}function Ts(t){return Ls(t)&&Ss(t)}var Is=Ha||Wh,ys=He?va(He):function(t){return Ls(t)&&Qi(t)==K};function xs(t){if(!Ls(t))return!1;var e=Qi(t);return e==J||e==z||"string"==typeof t.message&&"string"==typeof t.name&&!Os(t)}function ws(t){if(!bs(t))return!1;var e=Qi(t);return e==j||e==q||e==W||e==et}function Fs(t){return"number"==typeof t&&t==Ys(t)}function Es(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=R}function bs(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ls(t){return null!=t&&"object"==typeof t}var Ms=Ye?va(Ye):function(t){return Ls(t)&&Yn(t)==Z};function As(t){return"number"==typeof t||Ls(t)&&Qi(t)==Q}function Os(t){if(!Ls(t)||Qi(t)!=tt)return!1;var e=ye(t);if(null===e)return!0;var a=le.call(e,"constructor")&&e.constructor;return"function"==typeof a&&a instanceof a&&he.call(a)==de}var Ns=Xe?va(Xe):function(t){return Ls(t)&&Qi(t)==at};var Ps=We?va(We):function(t){return Ls(t)&&Yn(t)==it};function Rs(t){return"string"==typeof t||!vs(t)&&Ls(t)&&Qi(t)==rt}function _s(t){return"symbol"==typeof t||Ls(t)&&Qi(t)==nt}var Bs=Ue?va(Ue):function(t){return Ls(t)&&Es(t.length)&&!!Ee[Qi(t)]};var ks=Sn(cr),Gs=Sn(function(t,e){return t<=e});function Vs(t){if(!t)return[];if(Ss(t))return Rs(t)?Na(t):an(t);if(_e&&t[_e])return function(t){for(var e,a=[];!(e=t.next()).done;)a.push(e.value);return a}(t[_e]());var e=Yn(t);return(e==Z?Ea:e==it?Ma:Ch)(t)}function Hs(t){return t?(t=Ws(t))===P||t===-P?(t<0?-1:1)*_:t==t?t:0:0===t?t:0}function Ys(t){var e=Hs(t),a=e%1;return e==e?a?e-a:e:0}function Xs(t){return t?Pi(Ys(t),0,k):0}function Ws(t){if("number"==typeof t)return t;if(_s(t))return B;if(bs(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=bs(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Da(t);var a=Kt.test(t);return a||Jt.test(t)?Ae(t.slice(2),a?2:8):Ut.test(t)?B:+t}function Us(t){return rn(t,oh(t))}function Ks(t){return null==t?"":_r(t)}var zs=on(function(t,e){if(Zn(e)||Ss(e))rn(e,nh(e),t);else for(var a in e)le.call(e,a)&&bi(t,a,e[a])}),Js=on(function(t,e){rn(e,oh(e),t)}),js=on(function(t,e,a,i){rn(e,oh(e),t,i)}),qs=on(function(t,e,a,i){rn(e,nh(e),t,i)}),Zs=Mn(Ni);var Qs=yr(function(t,e){t=te(t);var a=-1,i=e.length,r=i>2?e[2]:n;for(r&&zn(e[0],e[1],r)&&(i=1);++a<i;)for(var o=e[a],s=oh(o),h=-1,l=s.length;++h<l;){var u=s[h],c=t[u];(c===n||Cs(c,oe[u])&&!le.call(t,u))&&(t[u]=o[u])}return t}),$s=yr(function(t){return t.push(n,En),Ke(hh,n,t)});function th(t,e,a){var i=null==t?n:qi(t,e);return i===n?a:i}function eh(t,e){return null!=t&&Xn(t,e,er)}var ah=pn(function(t,e,a){null!=e&&"function"!=typeof e.toString&&(e=fe.call(e)),t[e]=a},bh(Ah)),ih=pn(function(t,e,a){null!=e&&"function"!=typeof e.toString&&(e=fe.call(e)),le.call(t,e)?t[e].push(a):t[e]=[a]},_n),rh=yr(ir);function nh(t){return Ss(t)?yi(t):lr(t)}function oh(t){return Ss(t)?yi(t,!0):ur(t)}var sh=on(function(t,e,a){pr(t,e,a)}),hh=on(function(t,e,a,i){pr(t,e,a,i)}),lh=Mn(function(t,e){var a={};if(null==t)return a;var i=!1;e=ta(e,function(e){return e=Kr(e,t),i||(i=e.length>1),e}),rn(t,On(t),a),i&&(a=Ri(a,d|C|p,bn));for(var r=e.length;r--;)kr(a,e[r]);return a});var uh=Mn(function(t,e){return null==t?{}:function(t,e){return vr(t,e,function(e,a){return eh(t,a)})}(t,e)});function ch(t,e){if(null==t)return{};var a=ta(On(t),function(t){return[t]});return e=_n(e),vr(t,a,function(t,a){return e(t,a[0])})}var fh=xn(nh),dh=xn(oh);function Ch(t){return null==t?[]:ga(t,nh(t))}var ph=un(function(t,e,a){return e=e.toLowerCase(),t+(a?mh(e):e)});function mh(t){return xh(Ks(t).toLowerCase())}function Dh(t){return(t=Ks(t))&&t.replace(qt,ya).replace(Se,"")}var vh=un(function(t,e,a){return t+(a?"-":"")+e.toLowerCase()}),gh=un(function(t,e,a){return t+(a?" ":"")+e.toLowerCase()}),Sh=ln("toLowerCase");var Th=un(function(t,e,a){return t+(a?"_":"")+e.toLowerCase()});var Ih=un(function(t,e,a){return t+(a?" ":"")+xh(e)});var yh=un(function(t,e,a){return t+(a?" ":"")+e.toUpperCase()}),xh=ln("toUpperCase");function wh(t,e,a){return t=Ks(t),(e=a?n:e)===n?function(t){return xe.test(t)}(t)?function(t){return t.match(Ie)||[]}(t):function(t){return t.match(Vt)||[]}(t):t.match(e)||[]}var Fh=yr(function(t,e){try{return Ke(t,n,e)}catch(t){return xs(t)?t:new r(t)}}),Eh=Mn(function(t,e){return Je(e,function(e){e=uo(e),Oi(t,e,is(t[e],t))}),t});function bh(t){return function(){return t}}var Lh=dn(),Mh=dn(!0);function Ah(t){return t}function Oh(t){return hr("function"==typeof t?t:Ri(t,d))}var Nh=yr(function(t,e){return function(a){return ir(a,t,e)}}),Ph=yr(function(t,e){return function(a){return ir(t,a,e)}});function Rh(t,e,a){var i=nh(e),r=ji(e,i);null!=a||bs(e)&&(r.length||!i.length)||(a=e,e=t,t=this,r=ji(e,nh(e)));var n=!(bs(a)&&"chain"in a&&!a.chain),o=ws(t);return Je(r,function(a){var i=e[a];t[a]=i,o&&(t.prototype[a]=function(){var e=this.__chain__;if(n||e){var a=t(this.__wrapped__);return(a.__actions__=an(this.__actions__)).push({func:i,args:arguments,thisArg:t}),a.__chain__=e,a}return i.apply(t,ea([this.value()],arguments))})}),t}function _h(){}var Bh=Dn(ta),kh=Dn(qe),Gh=Dn(ra);function Vh(t){return Jn(t)?fa(uo(t)):function(t){return function(e){return qi(e,t)}}(t)}var Hh=gn(),Yh=gn(!0);function Xh(){return[]}function Wh(){return!1}var Uh=mn(function(t,e){return t+e},0),Kh=In("ceil"),zh=mn(function(t,e){return t/e},1),Jh=In("floor");var jh=mn(function(t,e){return t*e},1),qh=In("round"),Zh=mn(function(t,e){return t-e},0);return di.after=function(t,e){if("function"!=typeof e)throw new ie(h);return t=Ys(t),function(){if(--t<1)return e.apply(this,arguments)}},di.ary=es,di.assign=zs,di.assignIn=Js,di.assignInWith=js,di.assignWith=qs,di.at=Zs,di.before=as,di.bind=is,di.bindAll=Eh,di.bindKey=rs,di.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return vs(t)?t:[t]},di.chain=Vo,di.chunk=function(t,e,i){e=(i?zn(t,e,i):e===n)?1:Ua(Ys(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var o=0,s=0,h=a(ka(r/e));o<r;)h[s++]=Mr(t,o,o+=e);return h},di.compact=function(t){for(var e=-1,a=null==t?0:t.length,i=0,r=[];++e<a;){var n=t[e];n&&(r[i++]=n)}return r},di.concat=function(){var t=arguments.length;if(!t)return[];for(var e=a(t-1),i=arguments[0],r=t;r--;)e[r-1]=arguments[r];return ea(vs(i)?an(i):[i],Wi(e,1))},di.cond=function(t){var e=null==t?0:t.length,a=_n();return t=e?ta(t,function(t){if("function"!=typeof t[1])throw new ie(h);return[a(t[0]),t[1]]}):[],yr(function(a){for(var i=-1;++i<e;){var r=t[i];if(Ke(r[0],this,a))return Ke(r[1],this,a)}})},di.conforms=function(t){return function(t){var e=nh(t);return function(a){return _i(a,t,e)}}(Ri(t,d))},di.constant=bh,di.countBy=Xo,di.create=function(t,e){var a=Ci(t);return null==e?a:Ai(a,e)},di.curry=function t(e,a,i){var r=wn(e,T,n,n,n,n,n,a=i?n:a);return r.placeholder=t.placeholder,r},di.curryRight=function t(e,a,i){var r=wn(e,I,n,n,n,n,n,a=i?n:a);return r.placeholder=t.placeholder,r},di.debounce=ns,di.defaults=Qs,di.defaultsDeep=$s,di.defer=os,di.delay=ss,di.difference=Co,di.differenceBy=po,di.differenceWith=mo,di.drop=function(t,e,a){var i=null==t?0:t.length;return i?Mr(t,(e=a||e===n?1:Ys(e))<0?0:e,i):[]},di.dropRight=function(t,e,a){var i=null==t?0:t.length;return i?Mr(t,0,(e=i-(e=a||e===n?1:Ys(e)))<0?0:e):[]},di.dropRightWhile=function(t,e){return t&&t.length?Vr(t,_n(e,3),!0,!0):[]},di.dropWhile=function(t,e){return t&&t.length?Vr(t,_n(e,3),!0):[]},di.fill=function(t,e,a,i){var r=null==t?0:t.length;return r?(a&&"number"!=typeof a&&zn(t,e,a)&&(a=0,i=r),function(t,e,a,i){var r=t.length;for((a=Ys(a))<0&&(a=-a>r?0:r+a),(i=i===n||i>r?r:Ys(i))<0&&(i+=r),i=a>i?0:Xs(i);a<i;)t[a++]=e;return t}(t,e,a,i)):[]},di.filter=function(t,e){return(vs(t)?Ze:Xi)(t,_n(e,3))},di.flatMap=function(t,e){return Wi(Zo(t,e),1)},di.flatMapDeep=function(t,e){return Wi(Zo(t,e),P)},di.flatMapDepth=function(t,e,a){return a=a===n?1:Ys(a),Wi(Zo(t,e),a)},di.flatten=go,di.flattenDeep=function(t){return null!=t&&t.length?Wi(t,P):[]},di.flattenDepth=function(t,e){return null!=t&&t.length?Wi(t,e=e===n?1:Ys(e)):[]},di.flip=function(t){return wn(t,E)},di.flow=Lh,di.flowRight=Mh,di.fromPairs=function(t){for(var e=-1,a=null==t?0:t.length,i={};++e<a;){var r=t[e];i[r[0]]=r[1]}return i},di.functions=function(t){return null==t?[]:ji(t,nh(t))},di.functionsIn=function(t){return null==t?[]:ji(t,oh(t))},di.groupBy=Jo,di.initial=function(t){return null!=t&&t.length?Mr(t,0,-1):[]},di.intersection=To,di.intersectionBy=Io,di.intersectionWith=yo,di.invert=ah,di.invertBy=ih,di.invokeMap=jo,di.iteratee=Oh,di.keyBy=qo,di.keys=nh,di.keysIn=oh,di.map=Zo,di.mapKeys=function(t,e){var a={};return e=_n(e,3),zi(t,function(t,i,r){Oi(a,e(t,i,r),t)}),a},di.mapValues=function(t,e){var a={};return e=_n(e,3),zi(t,function(t,i,r){Oi(a,i,e(t,i,r))}),a},di.matches=function(t){return dr(Ri(t,d))},di.matchesProperty=function(t,e){return Cr(t,Ri(e,d))},di.memoize=hs,di.merge=sh,di.mergeWith=hh,di.method=Nh,di.methodOf=Ph,di.mixin=Rh,di.negate=ls,di.nthArg=function(t){return t=Ys(t),yr(function(e){return mr(e,t)})},di.omit=lh,di.omitBy=function(t,e){return ch(t,ls(_n(e)))},di.once=function(t){return as(2,t)},di.orderBy=function(t,e,a,i){return null==t?[]:(vs(e)||(e=null==e?[]:[e]),vs(a=i?n:a)||(a=null==a?[]:[a]),Dr(t,e,a))},di.over=Bh,di.overArgs=us,di.overEvery=kh,di.overSome=Gh,di.partial=cs,di.partialRight=fs,di.partition=Qo,di.pick=uh,di.pickBy=ch,di.property=Vh,di.propertyOf=function(t){return function(e){return null==t?n:qi(t,e)}},di.pull=wo,di.pullAll=Fo,di.pullAllBy=function(t,e,a){return t&&t.length&&e&&e.length?gr(t,e,_n(a,2)):t},di.pullAllWith=function(t,e,a){return t&&t.length&&e&&e.length?gr(t,e,n,a):t},di.pullAt=Eo,di.range=Hh,di.rangeRight=Yh,di.rearg=ds,di.reject=function(t,e){return(vs(t)?Ze:Xi)(t,ls(_n(e,3)))},di.remove=function(t,e){var a=[];if(!t||!t.length)return a;var i=-1,r=[],n=t.length;for(e=_n(e,3);++i<n;){var o=t[i];e(o,i,t)&&(a.push(o),r.push(i))}return Sr(t,r),a},di.rest=function(t,e){if("function"!=typeof t)throw new ie(h);return yr(t,e=e===n?e:Ys(e))},di.reverse=bo,di.sampleSize=function(t,e,a){return e=(a?zn(t,e,a):e===n)?1:Ys(e),(vs(t)?wi:wr)(t,e)},di.set=function(t,e,a){return null==t?t:Fr(t,e,a)},di.setWith=function(t,e,a,i){return i="function"==typeof i?i:n,null==t?t:Fr(t,e,a,i)},di.shuffle=function(t){return(vs(t)?Fi:Lr)(t)},di.slice=function(t,e,a){var i=null==t?0:t.length;return i?(a&&"number"!=typeof a&&zn(t,e,a)?(e=0,a=i):(e=null==e?0:Ys(e),a=a===n?i:Ys(a)),Mr(t,e,a)):[]},di.sortBy=$o,di.sortedUniq=function(t){return t&&t.length?Pr(t):[]},di.sortedUniqBy=function(t,e){return t&&t.length?Pr(t,_n(e,2)):[]},di.split=function(t,e,a){return a&&"number"!=typeof a&&zn(t,e,a)&&(e=a=n),(a=a===n?k:a>>>0)?(t=Ks(t))&&("string"==typeof e||null!=e&&!Ns(e))&&!(e=_r(e))&&Fa(t)?Jr(Na(t),0,a):t.split(e,a):[]},di.spread=function(t,e){if("function"!=typeof t)throw new ie(h);return e=null==e?0:Ua(Ys(e),0),yr(function(a){var i=a[e],r=Jr(a,0,e);return i&&ea(r,i),Ke(t,this,r)})},di.tail=function(t){var e=null==t?0:t.length;return e?Mr(t,1,e):[]},di.take=function(t,e,a){return t&&t.length?Mr(t,0,(e=a||e===n?1:Ys(e))<0?0:e):[]},di.takeRight=function(t,e,a){var i=null==t?0:t.length;return i?Mr(t,(e=i-(e=a||e===n?1:Ys(e)))<0?0:e,i):[]},di.takeRightWhile=function(t,e){return t&&t.length?Vr(t,_n(e,3),!1,!0):[]},di.takeWhile=function(t,e){return t&&t.length?Vr(t,_n(e,3)):[]},di.tap=function(t,e){return e(t),t},di.throttle=function(t,e,a){var i=!0,r=!0;if("function"!=typeof t)throw new ie(h);return bs(a)&&(i="leading"in a?!!a.leading:i,r="trailing"in a?!!a.trailing:r),ns(t,e,{leading:i,maxWait:e,trailing:r})},di.thru=Ho,di.toArray=Vs,di.toPairs=fh,di.toPairsIn=dh,di.toPath=function(t){return vs(t)?ta(t,uo):_s(t)?[t]:an(lo(Ks(t)))},di.toPlainObject=Us,di.transform=function(t,e,a){var i=vs(t),r=i||Is(t)||Bs(t);if(e=_n(e,4),null==a){var n=t&&t.constructor;a=r?i?new n:[]:bs(t)&&ws(n)?Ci(ye(t)):{}}return(r?Je:zi)(t,function(t,i,r){return e(a,t,i,r)}),a},di.unary=function(t){return es(t,1)},di.union=Lo,di.unionBy=Mo,di.unionWith=Ao,di.uniq=function(t){return t&&t.length?Br(t):[]},di.uniqBy=function(t,e){return t&&t.length?Br(t,_n(e,2)):[]},di.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?Br(t,n,e):[]},di.unset=function(t,e){return null==t||kr(t,e)},di.unzip=Oo,di.unzipWith=No,di.update=function(t,e,a){return null==t?t:Gr(t,e,Ur(a))},di.updateWith=function(t,e,a,i){return i="function"==typeof i?i:n,null==t?t:Gr(t,e,Ur(a),i)},di.values=Ch,di.valuesIn=function(t){return null==t?[]:ga(t,oh(t))},di.without=Po,di.words=wh,di.wrap=function(t,e){return cs(Ur(e),t)},di.xor=Ro,di.xorBy=_o,di.xorWith=Bo,di.zip=ko,di.zipObject=function(t,e){return Xr(t||[],e||[],bi)},di.zipObjectDeep=function(t,e){return Xr(t||[],e||[],Fr)},di.zipWith=Go,di.entries=fh,di.entriesIn=dh,di.extend=Js,di.extendWith=js,Rh(di,di),di.add=Uh,di.attempt=Fh,di.camelCase=ph,di.capitalize=mh,di.ceil=Kh,di.clamp=function(t,e,a){return a===n&&(a=e,e=n),a!==n&&(a=(a=Ws(a))==a?a:0),e!==n&&(e=(e=Ws(e))==e?e:0),Pi(Ws(t),e,a)},di.clone=function(t){return Ri(t,p)},di.cloneDeep=function(t){return Ri(t,d|p)},di.cloneDeepWith=function(t,e){return Ri(t,d|p,e="function"==typeof e?e:n)},di.cloneWith=function(t,e){return Ri(t,p,e="function"==typeof e?e:n)},di.conformsTo=function(t,e){return null==e||_i(t,e,nh(e))},di.deburr=Dh,di.defaultTo=function(t,e){return null==t||t!=t?e:t},di.divide=zh,di.endsWith=function(t,e,a){t=Ks(t),e=_r(e);var i=t.length,r=a=a===n?i:Pi(Ys(a),0,i);return(a-=e.length)>=0&&t.slice(a,r)==e},di.eq=Cs,di.escape=function(t){return(t=Ks(t))&&Ft.test(t)?t.replace(xt,xa):t},di.escapeRegExp=function(t){return(t=Ks(t))&&Pt.test(t)?t.replace(Nt,"\\$&"):t},di.every=function(t,e,a){var i=vs(t)?qe:Hi;return a&&zn(t,e,a)&&(e=n),i(t,_n(e,3))},di.find=Wo,di.findIndex=Do,di.findKey=function(t,e){return oa(t,_n(e,3),zi)},di.findLast=Uo,di.findLastIndex=vo,di.findLastKey=function(t,e){return oa(t,_n(e,3),Ji)},di.floor=Jh,di.forEach=Ko,di.forEachRight=zo,di.forIn=function(t,e){return null==t?t:Ui(t,_n(e,3),oh)},di.forInRight=function(t,e){return null==t?t:Ki(t,_n(e,3),oh)},di.forOwn=function(t,e){return t&&zi(t,_n(e,3))},di.forOwnRight=function(t,e){return t&&Ji(t,_n(e,3))},di.get=th,di.gt=ps,di.gte=ms,di.has=function(t,e){return null!=t&&Xn(t,e,tr)},di.hasIn=eh,di.head=So,di.identity=Ah,di.includes=function(t,e,a,i){t=Ss(t)?t:Ch(t),a=a&&!i?Ys(a):0;var r=t.length;return a<0&&(a=Ua(r+a,0)),Rs(t)?a<=r&&t.indexOf(e,a)>-1:!!r&&ha(t,e,a)>-1},di.indexOf=function(t,e,a){var i=null==t?0:t.length;if(!i)return-1;var r=null==a?0:Ys(a);return r<0&&(r=Ua(i+r,0)),ha(t,e,r)},di.inRange=function(t,e,a){return e=Hs(e),a===n?(a=e,e=0):a=Hs(a),function(t,e,a){return t>=Ka(e,a)&&t<Ua(e,a)}(t=Ws(t),e,a)},di.invoke=rh,di.isArguments=Ds,di.isArray=vs,di.isArrayBuffer=gs,di.isArrayLike=Ss,di.isArrayLikeObject=Ts,di.isBoolean=function(t){return!0===t||!1===t||Ls(t)&&Qi(t)==U},di.isBuffer=Is,di.isDate=ys,di.isElement=function(t){return Ls(t)&&1===t.nodeType&&!Os(t)},di.isEmpty=function(t){if(null==t)return!0;if(Ss(t)&&(vs(t)||"string"==typeof t||"function"==typeof t.splice||Is(t)||Bs(t)||Ds(t)))return!t.length;var e=Yn(t);if(e==Z||e==it)return!t.size;if(Zn(t))return!lr(t).length;for(var a in t)if(le.call(t,a))return!1;return!0},di.isEqual=function(t,e){return nr(t,e)},di.isEqualWith=function(t,e,a){var i=(a="function"==typeof a?a:n)?a(t,e):n;return i===n?nr(t,e,n,a):!!i},di.isError=xs,di.isFinite=function(t){return"number"==typeof t&&Ya(t)},di.isFunction=ws,di.isInteger=Fs,di.isLength=Es,di.isMap=Ms,di.isMatch=function(t,e){return t===e||or(t,e,kn(e))},di.isMatchWith=function(t,e,a){return a="function"==typeof a?a:n,or(t,e,kn(e),a)},di.isNaN=function(t){return As(t)&&t!=+t},di.isNative=function(t){if(qn(t))throw new r(s);return sr(t)},di.isNil=function(t){return null==t},di.isNull=function(t){return null===t},di.isNumber=As,di.isObject=bs,di.isObjectLike=Ls,di.isPlainObject=Os,di.isRegExp=Ns,di.isSafeInteger=function(t){return Fs(t)&&t>=-R&&t<=R},di.isSet=Ps,di.isString=Rs,di.isSymbol=_s,di.isTypedArray=Bs,di.isUndefined=function(t){return t===n},di.isWeakMap=function(t){return Ls(t)&&Yn(t)==st},di.isWeakSet=function(t){return Ls(t)&&Qi(t)==ht},di.join=function(t,e){return null==t?"":Xa.call(t,e)},di.kebabCase=vh,di.last=xo,di.lastIndexOf=function(t,e,a){var i=null==t?0:t.length;if(!i)return-1;var r=i;return a!==n&&(r=(r=Ys(a))<0?Ua(i+r,0):Ka(r,i-1)),e==e?function(t,e,a){for(var i=a+1;i--;)if(t[i]===e)return i;return i}(t,e,r):sa(t,ua,r,!0)},di.lowerCase=gh,di.lowerFirst=Sh,di.lt=ks,di.lte=Gs,di.max=function(t){return t&&t.length?Yi(t,Ah,$i):n},di.maxBy=function(t,e){return t&&t.length?Yi(t,_n(e,2),$i):n},di.mean=function(t){return ca(t,Ah)},di.meanBy=function(t,e){return ca(t,_n(e,2))},di.min=function(t){return t&&t.length?Yi(t,Ah,cr):n},di.minBy=function(t,e){return t&&t.length?Yi(t,_n(e,2),cr):n},di.stubArray=Xh,di.stubFalse=Wh,di.stubObject=function(){return{}},di.stubString=function(){return""},di.stubTrue=function(){return!0},di.multiply=jh,di.nth=function(t,e){return t&&t.length?mr(t,Ys(e)):n},di.noConflict=function(){return Pe._===this&&(Pe._=Ce),this},di.noop=_h,di.now=ts,di.pad=function(t,e,a){t=Ks(t);var i=(e=Ys(e))?Oa(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return vn(Ga(r),a)+t+vn(ka(r),a)},di.padEnd=function(t,e,a){t=Ks(t);var i=(e=Ys(e))?Oa(t):0;return e&&i<e?t+vn(e-i,a):t},di.padStart=function(t,e,a){t=Ks(t);var i=(e=Ys(e))?Oa(t):0;return e&&i<e?vn(e-i,a)+t:t},di.parseInt=function(t,e,a){return a||null==e?e=0:e&&(e=+e),Ja(Ks(t).replace(Rt,""),e||0)},di.random=function(t,e,a){if(a&&"boolean"!=typeof a&&zn(t,e,a)&&(e=a=n),a===n&&("boolean"==typeof e?(a=e,e=n):"boolean"==typeof t&&(a=t,t=n)),t===n&&e===n?(t=0,e=1):(t=Hs(t),e===n?(e=t,t=0):e=Hs(e)),t>e){var i=t;t=e,e=i}if(a||t%1||e%1){var r=ja();return Ka(t+r*(e-t+Me("1e-"+((r+"").length-1))),e)}return Tr(t,e)},di.reduce=function(t,e,a){var i=vs(t)?aa:Ca,r=arguments.length<3;return i(t,_n(e,4),a,r,Gi)},di.reduceRight=function(t,e,a){var i=vs(t)?ia:Ca,r=arguments.length<3;return i(t,_n(e,4),a,r,Vi)},di.repeat=function(t,e,a){return e=(a?zn(t,e,a):e===n)?1:Ys(e),Ir(Ks(t),e)},di.replace=function(){var t=arguments,e=Ks(t[0]);return t.length<3?e:e.replace(t[1],t[2])},di.result=function(t,e,a){var i=-1,r=(e=Kr(e,t)).length;for(r||(r=1,t=n);++i<r;){var o=null==t?n:t[uo(e[i])];o===n&&(i=r,o=a),t=ws(o)?o.call(t):o}return t},di.round=qh,di.runInContext=t,di.sample=function(t){return(vs(t)?xi:xr)(t)},di.size=function(t){if(null==t)return 0;if(Ss(t))return Rs(t)?Oa(t):t.length;var e=Yn(t);return e==Z||e==it?t.size:lr(t).length},di.snakeCase=Th,di.some=function(t,e,a){var i=vs(t)?ra:Ar;return a&&zn(t,e,a)&&(e=n),i(t,_n(e,3))},di.sortedIndex=function(t,e){return Or(t,e)},di.sortedIndexBy=function(t,e,a){return Nr(t,e,_n(a,2))},di.sortedIndexOf=function(t,e){var a=null==t?0:t.length;if(a){var i=Or(t,e);if(i<a&&Cs(t[i],e))return i}return-1},di.sortedLastIndex=function(t,e){return Or(t,e,!0)},di.sortedLastIndexBy=function(t,e,a){return Nr(t,e,_n(a,2),!0)},di.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var a=Or(t,e,!0)-1;if(Cs(t[a],e))return a}return-1},di.startCase=Ih,di.startsWith=function(t,e,a){return t=Ks(t),a=null==a?0:Pi(Ys(a),0,t.length),e=_r(e),t.slice(a,a+e.length)==e},di.subtract=Zh,di.sum=function(t){return t&&t.length?pa(t,Ah):0},di.sumBy=function(t,e){return t&&t.length?pa(t,_n(e,2)):0},di.template=function(t,e,a){var i=di.templateSettings;a&&zn(t,e,a)&&(e=n),t=Ks(t),e=js({},e,i,Fn);var o,s,h=js({},e.imports,i.imports,Fn),u=nh(h),c=ga(h,u),f=0,d=e.interpolate||Zt,C="__p += '",p=ee((e.escape||Zt).source+"|"+d.source+"|"+(d===Lt?Xt:Zt).source+"|"+(e.evaluate||Zt).source+"|$","g"),m="//# sourceURL="+(le.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Fe+"]")+"\n";t.replace(p,function(e,a,i,r,n,h){return i||(i=r),C+=t.slice(f,h).replace(Qt,wa),a&&(o=!0,C+="' +\n__e("+a+") +\n'"),n&&(s=!0,C+="';\n"+n+";\n__p += '"),i&&(C+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),f=h+e.length,e}),C+="';\n";var D=le.call(e,"variable")&&e.variable;if(D){if(Ht.test(D))throw new r(l)}else C="with (obj) {\n"+C+"\n}\n";C=(s?C.replace(St,""):C).replace(Tt,"$1").replace(It,"$1;"),C="function("+(D||"obj")+") {\n"+(D?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+C+"return __p\n}";var v=Fh(function(){return _t(u,m+"return "+C).apply(n,c)});if(v.source=C,xs(v))throw v;return v},di.times=function(t,e){if((t=Ys(t))<1||t>R)return[];var a=k,i=Ka(t,k);e=_n(e),t-=k;for(var r=ma(i,e);++a<t;)e(a);return r},di.toFinite=Hs,di.toInteger=Ys,di.toLength=Xs,di.toLower=function(t){return Ks(t).toLowerCase()},di.toNumber=Ws,di.toSafeInteger=function(t){return t?Pi(Ys(t),-R,R):0===t?t:0},di.toString=Ks,di.toUpper=function(t){return Ks(t).toUpperCase()},di.trim=function(t,e,a){if((t=Ks(t))&&(a||e===n))return Da(t);if(!t||!(e=_r(e)))return t;var i=Na(t),r=Na(e);return Jr(i,Ta(i,r),Ia(i,r)+1).join("")},di.trimEnd=function(t,e,a){if((t=Ks(t))&&(a||e===n))return t.slice(0,Pa(t)+1);if(!t||!(e=_r(e)))return t;var i=Na(t);return Jr(i,0,Ia(i,Na(e))+1).join("")},di.trimStart=function(t,e,a){if((t=Ks(t))&&(a||e===n))return t.replace(Rt,"");if(!t||!(e=_r(e)))return t;var i=Na(t);return Jr(i,Ta(i,Na(e))).join("")},di.truncate=function(t,e){var a=b,i=L;if(bs(e)){var r="separator"in e?e.separator:r;a="length"in e?Ys(e.length):a,i="omission"in e?_r(e.omission):i}var o=(t=Ks(t)).length;if(Fa(t)){var s=Na(t);o=s.length}if(a>=o)return t;var h=a-Oa(i);if(h<1)return i;var l=s?Jr(s,0,h).join(""):t.slice(0,h);if(r===n)return l+i;if(s&&(h+=l.length-h),Ns(r)){if(t.slice(h).search(r)){var u,c=l;for(r.global||(r=ee(r.source,Ks(Wt.exec(r))+"g")),r.lastIndex=0;u=r.exec(c);)var f=u.index;l=l.slice(0,f===n?h:f)}}else if(t.indexOf(_r(r),h)!=h){var d=l.lastIndexOf(r);d>-1&&(l=l.slice(0,d))}return l+i},di.unescape=function(t){return(t=Ks(t))&&wt.test(t)?t.replace(yt,Ra):t},di.uniqueId=function(t){var e=++ue;return Ks(t)+e},di.upperCase=yh,di.upperFirst=xh,di.each=Ko,di.eachRight=zo,di.first=So,Rh(di,function(){var t={};return zi(di,function(e,a){le.call(di.prototype,a)||(t[a]=e)}),t}(),{chain:!1}),di.VERSION="4.17.21",Je(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){di[t].placeholder=di}),Je(["drop","take"],function(t,e){Di.prototype[t]=function(a){a=a===n?1:Ua(Ys(a),0);var i=this.__filtered__&&!e?new Di(this):this.clone();return i.__filtered__?i.__takeCount__=Ka(a,i.__takeCount__):i.__views__.push({size:Ka(a,k),type:t+(i.__dir__<0?"Right":"")}),i},Di.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Je(["filter","map","takeWhile"],function(t,e){var a=e+1,i=a==O||3==a;Di.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:_n(t,3),type:a}),e.__filtered__=e.__filtered__||i,e}}),Je(["head","last"],function(t,e){var a="take"+(e?"Right":"");Di.prototype[t]=function(){return this[a](1).value()[0]}}),Je(["initial","tail"],function(t,e){var a="drop"+(e?"":"Right");Di.prototype[t]=function(){return this.__filtered__?new Di(this):this[a](1)}}),Di.prototype.compact=function(){return this.filter(Ah)},Di.prototype.find=function(t){return this.filter(t).head()},Di.prototype.findLast=function(t){return this.reverse().find(t)},Di.prototype.invokeMap=yr(function(t,e){return"function"==typeof t?new Di(this):this.map(function(a){return ir(a,t,e)})}),Di.prototype.reject=function(t){return this.filter(ls(_n(t)))},Di.prototype.slice=function(t,e){t=Ys(t);var a=this;return a.__filtered__&&(t>0||e<0)?new Di(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),e!==n&&(a=(e=Ys(e))<0?a.dropRight(-e):a.take(e-t)),a)},Di.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Di.prototype.toArray=function(){return this.take(k)},zi(Di.prototype,function(t,e){var a=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),r=di[i?"take"+("last"==e?"Right":""):e],o=i||/^find/.test(e);r&&(di.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,h=e instanceof Di,l=s[0],u=h||vs(e),c=function(t){var e=r.apply(di,ea([t],s));return i&&f?e[0]:e};u&&a&&"function"==typeof l&&1!=l.length&&(h=u=!1);var f=this.__chain__,d=!!this.__actions__.length,C=o&&!f,p=h&&!d;if(!o&&u){e=p?e:new Di(this);var m=t.apply(e,s);return m.__actions__.push({func:Ho,args:[c],thisArg:n}),new mi(m,f)}return C&&p?t.apply(this,s):(m=this.thru(c),C?i?m.value()[0]:m.value():m)})}),Je(["pop","push","shift","sort","splice","unshift"],function(t){var e=re[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);di.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(vs(r)?r:[],t)}return this[a](function(a){return e.apply(vs(a)?a:[],t)})}}),zi(Di.prototype,function(t,e){var a=di[e];if(a){var i=a.name+"";le.call(ri,i)||(ri[i]=[]),ri[i].push({name:e,func:a})}}),ri[Cn(n,g).name]=[{name:"wrapper",func:n}],Di.prototype.clone=function(){var t=new Di(this.__wrapped__);return t.__actions__=an(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=an(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=an(this.__views__),t},Di.prototype.reverse=function(){if(this.__filtered__){var t=new Di(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Di.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,a=vs(t),i=e<0,r=a?t.length:0,n=function(t,e,a){for(var i=-1,r=a.length;++i<r;){var n=a[i],o=n.size;switch(n.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=Ka(e,t+o);break;case"takeRight":t=Ua(t,e-o)}}return{start:t,end:e}}(0,r,this.__views__),o=n.start,s=n.end,h=s-o,l=i?s:o-1,u=this.__iteratees__,c=u.length,f=0,d=Ka(h,this.__takeCount__);if(!a||!i&&r==h&&d==h)return Hr(t,this.__actions__);var C=[];t:for(;h--&&f<d;){for(var p=-1,m=t[l+=e];++p<c;){var D=u[p],v=D.iteratee,g=D.type,S=v(m);if(g==N)m=S;else if(!S){if(g==O)continue t;break t}}C[f++]=m}return C},di.prototype.at=Yo,di.prototype.chain=function(){return Vo(this)},di.prototype.commit=function(){return new mi(this.value(),this.__chain__)},di.prototype.next=function(){this.__values__===n&&(this.__values__=Vs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},di.prototype.plant=function(t){for(var e,a=this;a instanceof pi;){var i=fo(a);i.__index__=0,i.__values__=n,e?r.__wrapped__=i:e=i;var r=i;a=a.__wrapped__}return r.__wrapped__=t,e},di.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Di){var e=t;return this.__actions__.length&&(e=new Di(this)),(e=e.reverse()).__actions__.push({func:Ho,args:[bo],thisArg:n}),new mi(e,this.__chain__)}return this.thru(bo)},di.prototype.toJSON=di.prototype.valueOf=di.prototype.value=function(){return Hr(this.__wrapped__,this.__actions__)},di.prototype.first=di.prototype.head,_e&&(di.prototype[_e]=function(){return this}),di}();Pe._=_a,(r=function(){return _a}.call(e,a,e,i))===n||(i.exports=r)}).call(this)}).call(this,a("yLpj"),a("YuTi")(t))},"M+fh":function(t,e,a){"use strict";var i=a("7whZ"),r=a("USwo"),n=a("40oJ"),o=a("S4vA"),s=a("BRsN"),h=a("iZ5/"),l=a("wlNh"),u=a("ukM9"),c=a("ekG2"),f=a("kvAF"),d=a("GhSp").f,C=a("rNHk")(0),p=a("C61u");t.exports=function(t,e,a,m,D,v){var g=i[t],S=g,T=D?"set":"add",I=S&&S.prototype,y={};return p&&"function"==typeof S&&(v||I.forEach&&!o(function(){(new S).entries().next()}))?(S=e(function(e,a){u(e,S,t,"_c"),e._c=new g,void 0!=a&&l(a,D,e[T],e)}),C("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in I&&(!v||"clear"!=t)&&s(S.prototype,t,function(a,i){if(u(this,S,t),!e&&v&&!c(a))return"get"==t&&void 0;var r=this._c[t](0===a?0:a,i);return e?this:r})}),v||d(S.prototype,"size",{get:function(){return this._c.size}})):(S=m.getConstructor(e,t,D,T),h(S.prototype,a),n.NEED=!0),f(S,t),y[t]=S,r(r.G+r.W+r.F,y),v||m.setStrong(S,t,D),S}},M5dz:function(t,e,a){var i=a("ekG2");t.exports=function(t,e){if(!i(t))return t;var a,r;if(e&&"function"==typeof(a=t.toString)&&!i(r=a.call(t)))return r;if("function"==typeof(a=t.valueOf)&&!i(r=a.call(t)))return r;if(!e&&"function"==typeof(a=t.toString)&&!i(r=a.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},MBQ8:function(t,e,a){var i=a("T4UG"),r=a("MwEJ"),n=i.extend({type:"series.__base_bar__",getInitialData:function(t,e){return r(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(t){var e=this.coordinateSystem;if(e){var a=e.dataToPoint(e.clampData(t)),i=this.getData(),r=i.getLayout("offset"),n=i.getLayout("size");return a[e.getBaseAxis().isHorizontal()?0:1]+=r+n/2,a}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});t.exports=n},MBy0:function(t,e,a){a("4Zg2")("asyncIterator")},MEGo:function(t,e,a){var i=a("4fz+"),r=a("Dagg"),n=a("dqUG"),o=a("2fw6"),s=a("x6Kt"),h=a("rmlV"),l=a("yxFR"),u=a("y+Vt"),c=a("h7HQ"),f=a("1Jh7"),d=a("SKnc"),C=a("K2GJ"),p=a("Fofx"),m=a("NC18").createFromString,D=a("bYtY"),v=D.isString,g=D.extend,S=D.defaults,T=D.trim,I=D.each,y=/[\s,]+/;function x(t){v(t)&&(t=(new DOMParser).parseFromString(t,"text/xml"));for(9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}function w(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}w.prototype.parse=function(t,e){e=e||{};var a=x(t);if(!a)throw new Error("Illegal svg");var r=new i;this._root=r;var n=a.getAttribute("viewBox")||"",o=parseFloat(a.getAttribute("width")||e.width),h=parseFloat(a.getAttribute("height")||e.height);isNaN(o)&&(o=null),isNaN(h)&&(h=null),A(a,r,null,!0);for(var l,u,c=a.firstChild;c;)this._parseNode(c,r),c=c.nextSibling;if(n){var f=T(n).split(y);f.length>=4&&(l={x:parseFloat(f[0]||0),y:parseFloat(f[1]||0),width:parseFloat(f[2]),height:parseFloat(f[3])})}if(l&&null!=o&&null!=h&&(u=_(l,o,h),!e.ignoreViewBox)){var d=r;(r=new i).add(d),d.scale=u.scale.slice(),d.position=u.position.slice()}return e.ignoreRootClip||null==o||null==h||r.setClipPath(new s({shape:{x:0,y:0,width:o,height:h}})),{root:r,width:o,height:h,viewBoxRect:l,viewBoxTransform:u}},w.prototype._parseNode=function(t,e){var a,i,r=t.nodeName.toLowerCase();if("defs"===r?this._isDefine=!0:"text"===r&&(this._isText=!0),this._isDefine){if(i=E[r]){var n=i.call(this,t),o=t.getAttribute("id");o&&(this._defs[o]=n)}}else(i=F[r])&&(a=i.call(this,t,e),e.add(a));for(var s=t.firstChild;s;)1===s.nodeType&&this._parseNode(s,a),3===s.nodeType&&this._isText&&this._parseText(s,a),s=s.nextSibling;"defs"===r?this._isDefine=!1:"text"===r&&(this._isText=!1)},w.prototype._parseText=function(t,e){if(1===t.nodeType){var a=t.getAttribute("dx")||0,i=t.getAttribute("dy")||0;this._textX+=parseFloat(a),this._textY+=parseFloat(i)}var r=new n({style:{text:t.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});b(e,r),A(t,r,this._defs);var o=r.style.fontSize;o&&o<9&&(r.style.fontSize=9,r.scale=r.scale||[1,1],r.scale[0]*=o/9,r.scale[1]*=o/9);var s=r.getBoundingRect();return this._textX+=s.width,e.add(r),r};var F={g:function(t,e){var a=new i;return b(e,a),A(t,a,this._defs),a},rect:function(t,e){var a=new s;return b(e,a),A(t,a,this._defs),a.setShape({x:parseFloat(t.getAttribute("x")||0),y:parseFloat(t.getAttribute("y")||0),width:parseFloat(t.getAttribute("width")||0),height:parseFloat(t.getAttribute("height")||0)}),a},circle:function(t,e){var a=new o;return b(e,a),A(t,a,this._defs),a.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),r:parseFloat(t.getAttribute("r")||0)}),a},line:function(t,e){var a=new l;return b(e,a),A(t,a,this._defs),a.setShape({x1:parseFloat(t.getAttribute("x1")||0),y1:parseFloat(t.getAttribute("y1")||0),x2:parseFloat(t.getAttribute("x2")||0),y2:parseFloat(t.getAttribute("y2")||0)}),a},ellipse:function(t,e){var a=new h;return b(e,a),A(t,a,this._defs),a.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),rx:parseFloat(t.getAttribute("rx")||0),ry:parseFloat(t.getAttribute("ry")||0)}),a},polygon:function(t,e){var a=t.getAttribute("points");a&&(a=L(a));var i=new c({shape:{points:a||[]}});return b(e,i),A(t,i,this._defs),i},polyline:function(t,e){var a=new u;b(e,a),A(t,a,this._defs);var i=t.getAttribute("points");return i&&(i=L(i)),new f({shape:{points:i||[]}})},image:function(t,e){var a=new r;return b(e,a),A(t,a,this._defs),a.setStyle({image:t.getAttribute("xlink:href"),x:t.getAttribute("x"),y:t.getAttribute("y"),width:t.getAttribute("width"),height:t.getAttribute("height")}),a},text:function(t,e){var a=t.getAttribute("x")||0,r=t.getAttribute("y")||0,n=t.getAttribute("dx")||0,o=t.getAttribute("dy")||0;this._textX=parseFloat(a)+parseFloat(n),this._textY=parseFloat(r)+parseFloat(o);var s=new i;return b(e,s),A(t,s,this._defs),s},tspan:function(t,e){var a=t.getAttribute("x"),r=t.getAttribute("y");null!=a&&(this._textX=parseFloat(a)),null!=r&&(this._textY=parseFloat(r));var n=t.getAttribute("dx")||0,o=t.getAttribute("dy")||0,s=new i;return b(e,s),A(t,s,this._defs),this._textX+=n,this._textY+=o,s},path:function(t,e){var a=t.getAttribute("d")||"",i=m(a);return b(e,i),A(t,i,this._defs),i}},E={lineargradient:function(t){var e=parseInt(t.getAttribute("x1")||0,10),a=parseInt(t.getAttribute("y1")||0,10),i=parseInt(t.getAttribute("x2")||10,10),r=parseInt(t.getAttribute("y2")||0,10),n=new d(e,a,i,r);return function(t,e){var a=t.firstChild;for(;a;){if(1===a.nodeType){var i=a.getAttribute("offset");i=i.indexOf("%")>0?parseInt(i,10)/100:i?parseFloat(i):0;var r=a.getAttribute("stop-color")||"#000000";e.addColorStop(i,r)}a=a.nextSibling}}(t,n),n},radialgradient:function(t){}};function b(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),S(e.__inheritedStyle,t.__inheritedStyle))}function L(t){for(var e=T(t).split(y),a=[],i=0;i<e.length;i+=2){var r=parseFloat(e[i]),n=parseFloat(e[i+1]);a.push([r,n])}return a}var M={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function A(t,e,a,i){var r=e.__inheritedStyle||{},n="text"===e.type;if(1===t.nodeType&&(function(t,e){var a=t.getAttribute("transform");if(a){var i=null,r=[];(a=a.replace(/,/g," ")).replace(P,function(t,e,a){r.push(e,a)});for(var n=r.length-1;n>0;n-=2){var o=r[n],s=r[n-1];switch(i=i||p.create(),s){case"translate":o=T(o).split(y),p.translate(i,i,[parseFloat(o[0]),parseFloat(o[1]||0)]);break;case"scale":o=T(o).split(y),p.scale(i,i,[parseFloat(o[0]),parseFloat(o[1]||o[0])]);break;case"rotate":o=T(o).split(y),p.rotate(i,i,parseFloat(o[0]));break;case"skew":o=T(o).split(y),console.warn("Skew transform is not supported yet");break;case"matrix":var o=T(o).split(y);i[0]=parseFloat(o[0]),i[1]=parseFloat(o[1]),i[2]=parseFloat(o[2]),i[3]=parseFloat(o[3]),i[4]=parseFloat(o[4]),i[5]=parseFloat(o[5])}}e.setLocalTransform(i)}}(t,e),g(r,function(t){var e=t.getAttribute("style"),a={};if(!e)return a;var i,r={};R.lastIndex=0;for(;null!=(i=R.exec(e));)r[i[1]]=i[2];for(var n in M)M.hasOwnProperty(n)&&null!=r[n]&&(a[M[n]]=r[n]);return a}(t)),!i))for(var o in M)if(M.hasOwnProperty(o)){var s=t.getAttribute(o);null!=s&&(r[M[o]]=s)}var h=n?"textFill":"fill",l=n?"textStroke":"stroke";e.style=e.style||new C;var u=e.style;null!=r.fill&&u.set(h,N(r.fill,a)),null!=r.stroke&&u.set(l,N(r.stroke,a)),I(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(t){var e="lineWidth"===t&&n?"textStrokeWidth":t;null!=r[t]&&u.set(e,parseFloat(r[t]))}),r.textBaseline&&"auto"!==r.textBaseline||(r.textBaseline="alphabetic"),"alphabetic"===r.textBaseline&&(r.textBaseline="bottom"),"start"===r.textAlign&&(r.textAlign="left"),"end"===r.textAlign&&(r.textAlign="right"),I(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(t){null!=r[t]&&u.set(t,r[t])}),r.lineDash&&(e.style.lineDash=T(r.lineDash).split(y)),u[l]&&"none"!==u[l]&&(e[l]=!0),e.__inheritedStyle=r}var O=/url\(\s*#(.*?)\)/;function N(t,e){var a=e&&t&&t.match(O);return a?e[T(a[1])]:t}var P=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g;var R=/([^\s:;]+)\s*:\s*([^:;]+)/g;function _(t,e,a){var i=e/t.width,r=a/t.height,n=Math.min(i,r);return{scale:[n,n],position:[-(t.x+t.width/2)*n+e/2,-(t.y+t.height/2)*n+a/2]}}e.parseXML=x,e.makeViewBoxTransform=_,e.parseSVG=function(t,e){return(new w).parse(t,e)}},MJxz:function(t,e,a){},MKOG:function(t,e,a){var i=a("bYtY"),r=a("YH21").Dispatcher,n=a("mLcG"),o=a("Bq2U"),s=function(t){t=t||{},this.stage=t.stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,r.call(this)};s.prototype={constructor:s,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),a=0;a<e.length;a++)this.addClip(e[a])},removeClip:function(t){var e=i.indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),a=0;a<e.length;a++)this.removeClip(e[a]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,a=this._clips,i=a.length,r=[],n=[],o=0;o<i;o++){var s=a[o],h=s.step(t,e);h&&(r.push(h),n.push(s))}for(o=0;o<i;)a[o]._needsRemove?(a[o]=a[i-1],a.pop(),i--):o++;i=r.length;for(o=0;o<i;o++)n[o].fire(r[o]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){var t=this;this._running=!0,n(function e(){t._running&&(n(e),!t._paused&&t._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(t,e){var a=new o(t,(e=e||{}).loop,e.getter,e.setter);return this.addAnimator(a),a}},i.mixin(s,r);var h=s;t.exports=h},MLWZ:function(t,e,a){"use strict";var i=a("xTJ+");function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,a){if(!e)return t;var n;if(a)n=a(e);else if(i.isURLSearchParams(e))n=e.toString();else{var o=[];i.forEach(e,function(t,e){null!==t&&void 0!==t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),o.push(r(e)+"="+r(t))}))}),n=o.join("&")}if(n){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+n}return t}},Mj6V:function(t,e,a){var i,r;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(r="function"==typeof(i=function(){var t={version:"0.2.0"},e=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function a(t,e,a){return t<e?e:t>a?a:t}function i(t){return 100*(-1+t)}t.configure=function(t){var a,i;for(a in t)void 0!==(i=t[a])&&t.hasOwnProperty(a)&&(e[a]=i);return this},t.status=null,t.set=function(o){var s=t.isStarted();o=a(o,e.minimum,1),t.status=1===o?null:o;var h=t.render(!s),l=h.querySelector(e.barSelector),u=e.speed,c=e.easing;return h.offsetWidth,r(function(a){""===e.positionUsing&&(e.positionUsing=t.getPositioningCSS()),n(l,function(t,a,r){var n;return(n="translate3d"===e.positionUsing?{transform:"translate3d("+i(t)+"%,0,0)"}:"translate"===e.positionUsing?{transform:"translate("+i(t)+"%,0)"}:{"margin-left":i(t)+"%"}).transition="all "+a+"ms "+r,n}(o,u,c)),1===o?(n(h,{transition:"none",opacity:1}),h.offsetWidth,setTimeout(function(){n(h,{transition:"all "+u+"ms linear",opacity:0}),setTimeout(function(){t.remove(),a()},u)},u)):setTimeout(a,u)}),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);var a=function(){setTimeout(function(){t.status&&(t.trickle(),a())},e.trickleSpeed)};return e.trickle&&a(),this},t.done=function(e){return e||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(e){var i=t.status;return i?("number"!=typeof e&&(e=(1-i)*a(Math.random()*i,.1,.95)),i=a(i+e,0,.994),t.set(i)):t.start()},t.trickle=function(){return t.inc(Math.random()*e.trickleRate)},function(){var e=0,a=0;t.promise=function(i){return i&&"resolved"!==i.state()?(0===a&&t.start(),e++,a++,i.always(function(){0==--a?(e=0,t.done()):t.set((e-a)/e)}),this):this}}(),t.render=function(a){if(t.isRendered())return document.getElementById("nprogress");s(document.documentElement,"nprogress-busy");var r=document.createElement("div");r.id="nprogress",r.innerHTML=e.template;var o,h=r.querySelector(e.barSelector),l=a?"-100":i(t.status||0),c=document.querySelector(e.parent);return n(h,{transition:"all 0 linear",transform:"translate3d("+l+"%,0,0)"}),e.showSpinner||(o=r.querySelector(e.spinnerSelector))&&u(o),c!=document.body&&s(c,"nprogress-custom-parent"),c.appendChild(r),r},t.remove=function(){h(document.documentElement,"nprogress-busy"),h(document.querySelector(e.parent),"nprogress-custom-parent");var t=document.getElementById("nprogress");t&&u(t)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var t=document.body.style,e="WebkitTransform"in t?"Webkit":"MozTransform"in t?"Moz":"msTransform"in t?"ms":"OTransform"in t?"O":"";return e+"Perspective"in t?"translate3d":e+"Transform"in t?"translate":"margin"};var r=function(){var t=[];function e(){var a=t.shift();a&&a(e)}return function(a){t.push(a),1==t.length&&e()}}(),n=function(){var t=["Webkit","O","Moz","ms"],e={};function a(a){return a=function(t){return t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()})}(a),e[a]||(e[a]=function(e){var a=document.body.style;if(e in a)return e;for(var i,r=t.length,n=e.charAt(0).toUpperCase()+e.slice(1);r--;)if((i=t[r]+n)in a)return i;return e}(a))}function i(t,e,i){e=a(e),t.style[e]=i}return function(t,e){var a,r,n=arguments;if(2==n.length)for(a in e)void 0!==(r=e[a])&&e.hasOwnProperty(a)&&i(t,a,r);else i(t,n[1],n[2])}}();function o(t,e){var a="string"==typeof t?t:l(t);return a.indexOf(" "+e+" ")>=0}function s(t,e){var a=l(t),i=a+e;o(a,e)||(t.className=i.substring(1))}function h(t,e){var a,i=l(t);o(t,e)&&(a=i.replace(" "+e+" "," "),t.className=a.substring(1,a.length-1))}function l(t){return(" "+(t.className||"")+" ").replace(/\s+/gi," ")}function u(t){t&&t.parentNode&&t.parentNode.removeChild(t)}return t})?i.call(e,a,e,t):i)||(t.exports=r)},MwEJ:function(t,e,a){var i=a("bYtY"),r=a("YXkt"),n=a("sdST"),o=a("k9D9").SOURCE_FORMAT_ORIGINAL,s=a("L0Ub").getDimensionTypeByAxis,h=a("4NO4").getDataItemValue,l=a("IDmD"),u=a("i38C").getCoordSysInfoBySeries,c=a("7G+c"),f=a("7hqr").enableDataStack,d=a("D5nY").makeSeriesEncodeForAxisCoordSys;var C=function(t,e,a){a=a||{},c.isInstance(t)||(t=c.seriesDataToSource(t));var C,p=e.get("coordinateSystem"),m=l.get(p),D=u(e);D&&(C=i.map(D.coordSysDims,function(t){var e={name:t},a=D.axisMap.get(t);if(a){var i=a.get("type");e.type=s(i)}return e})),C||(C=m&&(m.getDimensionsInfo?m.getDimensionsInfo():m.dimensions.slice())||["x","y"]);var v,g,S=n(t,{coordDimensions:C,generateCoord:a.generateCoord,encodeDefaulter:a.useEncodeDefaulter?i.curry(d,C,e):null});D&&i.each(S,function(t,e){var a=t.coordDim,i=D.categoryAxisMap.get(a);i&&(null==v&&(v=e),t.ordinalMeta=i.getOrdinalMeta()),null!=t.otherDims.itemName&&(g=!0)}),g||null==v||(S[v].otherDims.itemName=0);var T=f(e,S),I=new r(S,e);I.setCalculationInfo(T);var y=null!=v&&function(t){if(t.sourceFormat===o){var e=function(t){for(var e=0;e<t.length&&null==t[e];)e++;return t[e]}(t.data||[]);return null!=e&&!i.isArray(h(e))}}(t)?function(t,e,a,i){return i===v?a:this.defaultDimValueGetter(t,e,a,i)}:null;return I.hasItemOption=!1,I.initData(t,null,y),I};t.exports=C},N4c9:function(t,e,a){a("wYM1");var i=a("VSTI").Object;t.exports=function(t,e,a){return i.defineProperty(t,e,a)}},NC18:function(t,e,a){var i=a("y+Vt"),r=a("IMiH"),n=a("7oTu"),o=Math.sqrt,s=Math.sin,h=Math.cos,l=Math.PI,u=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},c=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(u(t)*u(e))},f=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(c(t,e))};function d(t,e,a,i,r,n,u,d,C,p,m){var D=C*(l/180),v=h(D)*(t-a)/2+s(D)*(e-i)/2,g=-1*s(D)*(t-a)/2+h(D)*(e-i)/2,S=v*v/(u*u)+g*g/(d*d);S>1&&(u*=o(S),d*=o(S));var T=(r===n?-1:1)*o((u*u*(d*d)-u*u*(g*g)-d*d*(v*v))/(u*u*(g*g)+d*d*(v*v)))||0,I=T*u*g/d,y=T*-d*v/u,x=(t+a)/2+h(D)*I-s(D)*y,w=(e+i)/2+s(D)*I+h(D)*y,F=f([1,0],[(v-I)/u,(g-y)/d]),E=[(v-I)/u,(g-y)/d],b=[(-1*v-I)/u,(-1*g-y)/d],L=f(E,b);c(E,b)<=-1&&(L=l),c(E,b)>=1&&(L=0),0===n&&L>0&&(L-=2*l),1===n&&L<0&&(L+=2*l),m.addData(p,x,w,u,d,F,L,D,n)}var C=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,p=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function m(t,e){var a=function(t){if(!t)return new r;for(var e,a=0,i=0,n=a,o=i,s=new r,h=r.CMD,l=t.match(C),u=0;u<l.length;u++){for(var c,f=l[u],m=f.charAt(0),D=f.match(p)||[],v=D.length,g=0;g<v;g++)D[g]=parseFloat(D[g]);for(var S=0;S<v;){var T,I,y,x,w,F,E,b=a,L=i;switch(m){case"l":a+=D[S++],i+=D[S++],c=h.L,s.addData(c,a,i);break;case"L":a=D[S++],i=D[S++],c=h.L,s.addData(c,a,i);break;case"m":a+=D[S++],i+=D[S++],c=h.M,s.addData(c,a,i),n=a,o=i,m="l";break;case"M":a=D[S++],i=D[S++],c=h.M,s.addData(c,a,i),n=a,o=i,m="L";break;case"h":a+=D[S++],c=h.L,s.addData(c,a,i);break;case"H":a=D[S++],c=h.L,s.addData(c,a,i);break;case"v":i+=D[S++],c=h.L,s.addData(c,a,i);break;case"V":i=D[S++],c=h.L,s.addData(c,a,i);break;case"C":c=h.C,s.addData(c,D[S++],D[S++],D[S++],D[S++],D[S++],D[S++]),a=D[S-2],i=D[S-1];break;case"c":c=h.C,s.addData(c,D[S++]+a,D[S++]+i,D[S++]+a,D[S++]+i,D[S++]+a,D[S++]+i),a+=D[S-2],i+=D[S-1];break;case"S":T=a,I=i;var M=s.len(),A=s.data;e===h.C&&(T+=a-A[M-4],I+=i-A[M-3]),c=h.C,b=D[S++],L=D[S++],a=D[S++],i=D[S++],s.addData(c,T,I,b,L,a,i);break;case"s":T=a,I=i,M=s.len(),A=s.data,e===h.C&&(T+=a-A[M-4],I+=i-A[M-3]),c=h.C,b=a+D[S++],L=i+D[S++],a+=D[S++],i+=D[S++],s.addData(c,T,I,b,L,a,i);break;case"Q":b=D[S++],L=D[S++],a=D[S++],i=D[S++],c=h.Q,s.addData(c,b,L,a,i);break;case"q":b=D[S++]+a,L=D[S++]+i,a+=D[S++],i+=D[S++],c=h.Q,s.addData(c,b,L,a,i);break;case"T":T=a,I=i,M=s.len(),A=s.data,e===h.Q&&(T+=a-A[M-4],I+=i-A[M-3]),a=D[S++],i=D[S++],c=h.Q,s.addData(c,T,I,a,i);break;case"t":T=a,I=i,M=s.len(),A=s.data,e===h.Q&&(T+=a-A[M-4],I+=i-A[M-3]),a+=D[S++],i+=D[S++],c=h.Q,s.addData(c,T,I,a,i);break;case"A":y=D[S++],x=D[S++],w=D[S++],F=D[S++],E=D[S++],d(b=a,L=i,a=D[S++],i=D[S++],F,E,y,x,w,c=h.A,s);break;case"a":y=D[S++],x=D[S++],w=D[S++],F=D[S++],E=D[S++],d(b=a,L=i,a+=D[S++],i+=D[S++],F,E,y,x,w,c=h.A,s)}}"z"!==m&&"Z"!==m||(c=h.Z,s.addData(c),a=n,i=o),e=c}return s.toStatic(),s}(t);return(e=e||{}).buildPath=function(t){if(t.setData){t.setData(a.data),(e=t.getContext())&&t.rebuildPath(e)}else{var e=t;a.rebuildPath(e)}},e.applyTransform=function(t){n(a,t),this.dirty(!0)},e}e.createFromString=function(t,e){return new i(m(t,e))},e.extendFromString=function(t,e){return i.extend(m(t,e))},e.mergePath=function(t,e){for(var a=[],r=t.length,n=0;n<r;n++){var o=t[n];o.path||o.createPathProxy(),o.__dirtyPath&&o.buildPath(o.path,o.shape,!0),a.push(o.path)}var s=new i(e);return s.createPathProxy(),s.buildPath=function(t){t.appendPath(a);var e=t.getContext();e&&t.rebuildPath(e)},s}},Nlwn:function(t,e,a){"use strict";var i=a("USwo"),r=a("VSTI"),n=a("7whZ"),o=a("2zfi"),s=a("JKKi");i(i.P+i.R,"Promise",{finally:function(t){var e=o(this,r.Promise||n.Promise),a="function"==typeof t;return this.then(a?function(a){return s(e,t()).then(function(){return a})}:t,a?function(a){return s(e,t()).then(function(){throw a})}:t)}})},ODRq:function(t,e,a){t.exports={default:a("FkhZ"),__esModule:!0}},OELB:function(t,e,a){var i=a("bYtY"),r=1e-4;var n=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function o(t){if(0===t)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,e)>=10&&e++,e}e.linearMap=function(t,e,a,i){var r=e[1]-e[0],n=a[1]-a[0];if(0===r)return 0===n?a[0]:(a[0]+a[1])/2;if(i)if(r>0){if(t<=e[0])return a[0];if(t>=e[1])return a[1]}else{if(t>=e[0])return a[0];if(t<=e[1])return a[1]}else{if(t===e[0])return a[0];if(t===e[1])return a[1]}return(t-e[0])/r*n+a[0]},e.parsePercent=function(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return"string"==typeof t?function(t){return t.replace(/^\s+|\s+$/g,"")}(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t},e.round=function(t,e,a){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),a?t:+t},e.asc=function(t){return t.sort(function(t,e){return t-e}),t},e.getPrecision=function(t){if(t=+t,isNaN(t))return 0;for(var e=1,a=0;Math.round(t*e)/e!==t;)e*=10,a++;return a},e.getPrecisionSafe=function(t){var e=t.toString(),a=e.indexOf("e");if(a>0){var i=+e.slice(a+1);return i<0?-i:0}var r=e.indexOf(".");return r<0?0:e.length-1-r},e.getPixelPrecision=function(t,e){var a=Math.log,i=Math.LN10,r=Math.floor(a(t[1]-t[0])/i),n=Math.round(a(Math.abs(e[1]-e[0]))/i),o=Math.min(Math.max(-r+n,0),20);return isFinite(o)?o:20},e.getPercentWithPrecision=function(t,e,a){if(!t[e])return 0;var r=i.reduce(t,function(t,e){return t+(isNaN(e)?0:e)},0);if(0===r)return 0;for(var n=Math.pow(10,a),o=i.map(t,function(t){return(isNaN(t)?0:t)/r*n*100}),s=100*n,h=i.map(o,function(t){return Math.floor(t)}),l=i.reduce(h,function(t,e){return t+e},0),u=i.map(o,function(t,e){return t-h[e]});l<s;){for(var c=Number.NEGATIVE_INFINITY,f=null,d=0,C=u.length;d<C;++d)u[d]>c&&(c=u[d],f=d);++h[f],u[f]=0,++l}return h[e]/n},e.MAX_SAFE_INTEGER=9007199254740991,e.remRadian=function(t){var e=2*Math.PI;return(t%e+e)%e},e.isRadianAroundZero=function(t){return t>-r&&t<r},e.parseDate=function(t){if(t instanceof Date)return t;if("string"==typeof t){var e=n.exec(t);if(!e)return new Date(NaN);if(e[8]){var a=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(a-=e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,a,+(e[5]||0),+e[6]||0,+e[7]||0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,+e[7]||0)}return null==t?new Date(NaN):new Date(Math.round(t))},e.quantity=function(t){return Math.pow(10,o(t))},e.quantityExponent=o,e.nice=function(t,e){var a=o(t),i=Math.pow(10,a),r=t/i;return t=(e?r<1.5?1:r<2.5?2:r<4?3:r<7?5:10:r<1?1:r<2?2:r<3?3:r<5?5:10)*i,a>=-20?+t.toFixed(a<0?-a:0):t},e.quantile=function(t,e){var a=(t.length-1)*e+1,i=Math.floor(a),r=+t[i-1],n=a-i;return n?r+n*(t[i]-r):r},e.reformIntervals=function(t){t.sort(function(t,e){return function t(e,a,i){return e.interval[i]<a.interval[i]||e.interval[i]===a.interval[i]&&(e.close[i]-a.close[i]==(i?-1:1)||!i&&t(e,a,1))}(t,e,0)?-1:1});for(var e=-1/0,a=1,i=0;i<t.length;){for(var r=t[i].interval,n=t[i].close,o=0;o<2;o++)r[o]<=e&&(r[o]=e,n[o]=o?1:1-a),e=r[o],a=n[o];r[0]===r[1]&&n[0]*n[1]!=1?t.splice(i,1):i++}return t},e.isNumeric=function(t){return t-parseFloat(t)>=0}},OH9c:function(t,e,a){"use strict";t.exports=function(t,e,a,i,r){return t.config=e,a&&(t.code=a),t.request=i,t.response=r,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},OKJ2:function(t,e,a){var i=a("KxfA").retrieveRawValue,r=a("7aKB"),n=r.getTooltipMarker,o=r.formatTpl,s=a("4NO4").getTooltipRenderMode,h=/\{@(.+?)\}/g,l={getDataParams:function(t,e){var a=this.getData(e),i=this.getRawValue(t,e),r=a.getRawIndex(t),o=a.getName(t),h=a.getRawDataItem(t),l=a.getItemVisual(t,"color"),u=a.getItemVisual(t,"borderColor"),c=this.ecModel.getComponent("tooltip"),f=c&&c.get("renderMode"),d=s(f),C=this.mainType,p="series"===C,m=a.userOutput;return{componentType:C,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:p?this.subType:null,seriesIndex:this.seriesIndex,seriesId:p?this.id:null,seriesName:p?this.name:null,name:o,dataIndex:r,data:h,dataType:e,value:i,color:l,borderColor:u,dimensionNames:m?m.dimensionNames:null,encode:m?m.encode:null,marker:n({color:l,renderMode:d}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(t,e,a,r,n){e=e||"normal";var s=this.getData(a),l=s.getItemModel(t),u=this.getDataParams(t,a);null!=r&&u.value instanceof Array&&(u.value=u.value[r]);var c=l.get("normal"===e?[n||"label","formatter"]:[e,n||"label","formatter"]);return"function"==typeof c?(u.status=e,u.dimensionIndex=r,c(u)):"string"==typeof c?o(c,u).replace(h,function(e,a){var r=a.length;return"["===a.charAt(0)&&"]"===a.charAt(r-1)&&(a=+a.slice(1,r-1)),i(s,t,a)}):void 0},getRawValue:function(t,e){return i(this.getData(e),t)},formatTooltip:function(){}};t.exports=l},OQFs:function(t,e,a){var i=a("KCsZ")([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),r={getLineStyle:function(t){var e=i(this,t);return e.lineDash=this.getLineDash(e.lineWidth),e},getLineDash:function(t){null==t&&(t=1);var e=this.get("type"),a=Math.max(t,2),i=4*t;return"solid"!==e&&null!=e&&("dashed"===e?[i,i]:[a,a])}};t.exports=r},OS9S:function(t,e,a){var i=a("bYtY").inherits,r=a("Gev7"),n=a("mFDi");function o(t){r.call(this,t),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}o.prototype.incremental=!0,o.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},o.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.dirty()},o.prototype.addDisplayables=function(t,e){e=e||!1;for(var a=0;a<t.length;a++)this.addDisplayable(t[a],e)},o.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},o.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){(e=this._displayables[t]).parent=this,e.update(),e.parent=null}for(t=0;t<this._temporaryDisplayables.length;t++){var e;(e=this._temporaryDisplayables[t]).parent=this,e.update(),e.parent=null}},o.prototype.brush=function(t,e){for(var a=this._cursor;a<this._displayables.length;a++){(i=this._displayables[a]).beforeBrush&&i.beforeBrush(t),i.brush(t,a===this._cursor?null:this._displayables[a-1]),i.afterBrush&&i.afterBrush(t)}this._cursor=a;for(a=0;a<this._temporaryDisplayables.length;a++){var i;(i=this._temporaryDisplayables[a]).beforeBrush&&i.beforeBrush(t),i.brush(t,0===a?null:this._temporaryDisplayables[a-1]),i.afterBrush&&i.afterBrush(t)}this._temporaryDisplayables=[],this.notClear=!0};var s=[];o.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new n(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var a=this._displayables[e],i=a.getBoundingRect().clone();a.needLocalTransform()&&i.applyTransform(a.getLocalTransform(s)),t.union(i)}this._rect=t}return this._rect},o.prototype.contain=function(t,e){var a=this.transformCoordToLocal(t,e);if(this.getBoundingRect().contain(a[0],a[1]))for(var i=0;i<this._displayables.length;i++){if(this._displayables[i].contain(t,e))return!0}return!1},i(o,r);var h=o;t.exports=h},OTTw:function(t,e,a){"use strict";var i=a("xTJ+");t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a");function r(t){var i=t;return e&&(a.setAttribute("href",i),i=a.href),a.setAttribute("href",i),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:"/"===a.pathname.charAt(0)?a.pathname:"/"+a.pathname}}return t=r(window.location.href),function(e){var a=i.isString(e)?r(e):e;return a.protocol===t.protocol&&a.host===t.host}}():function(){return!0}},OTpG:function(t,e,a){"use strict";var i=a("5ETA"),r=a("USwo"),n=a("ugGH"),o=a("BRsN"),s=a("ig3W"),h=a("Jt1Q"),l=a("kvAF"),u=a("znrX"),c=a("zBWt")("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,a,C,p,m,D){h(a,e,C);var v,g,S,T=function(t){if(!f&&t in w)return w[t];switch(t){case"keys":case"values":return function(){return new a(this,t)}}return function(){return new a(this,t)}},I=e+" Iterator",y="values"==p,x=!1,w=t.prototype,F=w[c]||w["@@iterator"]||p&&w[p],E=F||T(p),b=p?y?T("entries"):E:void 0,L="Array"==e&&w.entries||F;if(L&&(S=u(L.call(new t)))!==Object.prototype&&S.next&&(l(S,I,!0),i||"function"==typeof S[c]||o(S,c,d)),y&&F&&"values"!==F.name&&(x=!0,E=function(){return F.call(this)}),i&&!D||!f&&!x&&w[c]||o(w,c,E),s[e]=E,s[I]=d,p)if(v={values:y?E:T("values"),keys:m?E:T("keys"),entries:b},D)for(g in v)g in w||n(w,g,v[g]);else r(r.P+r.F*(f||x),e,v);return v}},Oa1h:function(t,e,a){var i=a("bKEA"),r=a("0WpP"),n=a("nRFE");t.exports=function(t){return function(e,a,o){var s,h=i(e),l=r(h.length),u=n(o,l);if(t&&a!=a){for(;l>u;)if((s=h[u++])!=s)return!0}else for(;l>u;u++)if((t||u in h)&&h[u]===a)return t||u||0;return!t&&-1}}},P2sY:function(t,e,a){t.exports={default:a("uccp"),__esModule:!0}},PDX0:function(t,e){(function(e){t.exports=e}).call(this,{})},PE4B:function(t,e,a){"use strict";var i=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===r}(t)}(t)};var r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(t,e){return e&&!0===e.clone&&i(t)?s(function(t){return Array.isArray(t)?[]:{}}(t),t,e):t}function o(t,e,a){var r=t.slice();return e.forEach(function(e,o){void 0===r[o]?r[o]=n(e,a):i(e)?r[o]=s(t[o],e,a):-1===t.indexOf(e)&&r.push(n(e,a))}),r}function s(t,e,a){var r=Array.isArray(e);return r===Array.isArray(t)?r?((a||{arrayMerge:o}).arrayMerge||o)(t,e,a):function(t,e,a){var r={};return i(t)&&Object.keys(t).forEach(function(e){r[e]=n(t[e],a)}),Object.keys(e).forEach(function(o){i(e[o])&&t[o]?r[o]=s(t[o],e[o],a):r[o]=n(e[o],a)}),r}(t,e,a):n(e,a)}s.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce(function(t,a){return s(t,a,e)})};var h=s;t.exports=h},PJ8w:function(t,e,a){"use strict";var i=a("USwo");t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},PfQu:function(t,e,a){"use strict";var i=a("rdj4"),r=a("JAUQ");t.exports=a("M+fh")("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(r(this,"Set"),t=0===t?0:t,t)}},i)},ProS:function(t,e,a){a("Tghj").__DEV__;var i=a("aX58"),r=a("bYtY"),n=a("Qe9p"),o=a("ItGF"),s=a("BPZU"),h=a("H6uX"),l=a("fmMI"),u=a("hD7B"),c=a("IDmD"),f=a("ypgQ"),d=a("+wW9"),C=a("0V0F"),p=a("bLfw"),m=a("T4UG"),D=a("sS/r"),v=a("6Ic6"),g=a("IwbS"),S=a("4NO4"),T=a("iLNv").throttle,I=a("/WM3"),y=a("uAnK"),x=a("mYwL"),w=a("af/B"),F=a("xTNl"),E=a("8hn6");a("A1Ka");var b=a("7DRL"),L=r.assert,M=r.each,A=r.isFunction,O=r.isObject,N=p.parseClassType,P=1e3,R=1e3,_=3e3,B={PROCESSOR:{FILTER:P,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:R,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:_,POST_CHART_LAYOUT:3500,COMPONENT:4e3,BRUSH:5e3}},k="__flagInMainProcess",G="__optionUpdated",V=/^[a-zA-Z0-9_]+$/;function H(t,e){return function(a,i,r){e||!this._disposed?(a=a&&a.toLowerCase(),h.prototype[t].call(this,a,i,r)):this.id}}function Y(){h.call(this)}function X(t,e,a){a=a||{},"string"==typeof e&&(e=dt[e]),this.id,this.group,this._dom=t;var n=this._zr=i.init(t,{renderer:a.renderer||"canvas",devicePixelRatio:a.devicePixelRatio,width:a.width,height:a.height});this._throttledZrFlush=T(r.bind(n.flush,n),17),(e=r.clone(e))&&d(e,!0),this._theme=e,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new c;var o=this._api=function(t){var e=t._coordSysMgr;return r.extend(new u(t),{getCoordinateSystems:r.bind(e.getCoordinateSystems,e),getComponentByElement:function(e){for(;e;){var a=e.__ecComponentInfo;if(null!=a)return t._model.getComponent(a.mainType,a.index);e=e.parent}}})}(this);function l(t,e){return t.__prio-e.__prio}s(ft,l),s(lt,l),this._scheduler=new w(this,o,lt,ft),h.call(this,this._ecEventProcessor=new ot),this._messageCenter=new Y,this._initEvents(),this.resize=r.bind(this.resize,this),this._pendingActions=[],n.animation.on("frame",this._onframe,this),function(t,e){t.on("rendered",function(){e.trigger("rendered"),!t.animation.isFinished()||e[G]||e._scheduler.unfinished||e._pendingActions.length||e.trigger("finished")})}(n,this),r.setAsPrimitive(this)}Y.prototype.on=H("on",!0),Y.prototype.off=H("off",!0),Y.prototype.one=H("one",!0),r.mixin(Y,h);var W=X.prototype;function U(t,e,a){if(this._disposed)this.id;else{var i,r=this._model,n=this._coordSysMgr.getCoordinateSystems();e=S.parseFinder(r,e);for(var o=0;o<n.length;o++){var s=n[o];if(s[t]&&null!=(i=s[t](r,e,a)))return i}}}W._onframe=function(){if(!this._disposed){var t=this._scheduler;if(this[G]){var e=this[G].silent;this[k]=!0,z(this),K.update.call(this),this[k]=!1,this[G]=!1,Z.call(this,e),Q.call(this,e)}else if(t.unfinished){var a=1,i=this._model,r=this._api;t.unfinished=!1;do{var n=+new Date;t.performSeriesTasks(i),t.performDataProcessorTasks(i),j(this,i),t.performVisualTasks(i),at(this,this._model,r,"remain"),a-=+new Date-n}while(a>0&&t.unfinished);t.unfinished||this._zr.flush()}}},W.getDom=function(){return this._dom},W.getZr=function(){return this._zr},W.setOption=function(t,e,a){if(this._disposed)this.id;else{var i;if(O(e)&&(a=e.lazyUpdate,i=e.silent,e=e.notMerge),this[k]=!0,!this._model||e){var r=new f(this._api),n=this._theme,o=this._model=new l;o.scheduler=this._scheduler,o.init(null,null,n,r)}this._model.setOption(t,ut),a?(this[G]={silent:i},this[k]=!1):(z(this),K.update.call(this),this._zr.flush(),this[G]=!1,this[k]=!1,Z.call(this,i),Q.call(this,i))}},W.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},W.getModel=function(){return this._model},W.getOption=function(){return this._model&&this._model.getOption()},W.getWidth=function(){return this._zr.getWidth()},W.getHeight=function(){return this._zr.getHeight()},W.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},W.getRenderedCanvas=function(t){if(o.canvasSupported)return(t=t||{}).pixelRatio=t.pixelRatio||1,t.backgroundColor=t.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(t)},W.getSvgDataURL=function(){if(o.svgSupported){var t=this._zr,e=t.storage.getDisplayList();return r.each(e,function(t){t.stopAnimation(!0)}),t.painter.toDataURL()}},W.getDataURL=function(t){if(!this._disposed){var e=(t=t||{}).excludeComponents,a=this._model,i=[],r=this;M(e,function(t){a.eachComponent({mainType:t},function(t){var e=r._componentsMap[t.__viewId];e.group.ignore||(i.push(e),e.group.ignore=!0)})});var n="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return M(i,function(t){t.group.ignore=!1}),n}this.id},W.getConnectedDataURL=function(t){if(this._disposed)this.id;else if(o.canvasSupported){var e="svg"===t.type,a=this.group,n=Math.min,s=Math.max;if(mt[a]){var h=1/0,l=1/0,u=-1/0,c=-1/0,f=[],d=t&&t.pixelRatio||1;r.each(pt,function(i,o){if(i.group===a){var d=e?i.getZr().painter.getSvgDom().innerHTML:i.getRenderedCanvas(r.clone(t)),C=i.getDom().getBoundingClientRect();h=n(C.left,h),l=n(C.top,l),u=s(C.right,u),c=s(C.bottom,c),f.push({dom:d,left:C.left,top:C.top})}});var C=(u*=d)-(h*=d),p=(c*=d)-(l*=d),m=r.createCanvas(),D=i.init(m,{renderer:e?"svg":"canvas"});if(D.resize({width:C,height:p}),e){var v="";return M(f,function(t){var e=t.left-h,a=t.top-l;v+='<g transform="translate('+e+","+a+')">'+t.dom+"</g>"}),D.painter.getSvgRoot().innerHTML=v,t.connectedBackgroundColor&&D.painter.setBackgroundColor(t.connectedBackgroundColor),D.refreshImmediately(),D.painter.toDataURL()}return t.connectedBackgroundColor&&D.add(new g.Rect({shape:{x:0,y:0,width:C,height:p},style:{fill:t.connectedBackgroundColor}})),M(f,function(t){var e=new g.Image({style:{x:t.left*d-h,y:t.top*d-l,image:t.dom}});D.add(e)}),D.refreshImmediately(),m.toDataURL("image/"+(t&&t.type||"png"))}return this.getDataURL(t)}},W.convertToPixel=r.curry(U,"convertToPixel"),W.convertFromPixel=r.curry(U,"convertFromPixel"),W.containPixel=function(t,e){if(!this._disposed){var a,i=this._model;return t=S.parseFinder(i,t),r.each(t,function(t,i){i.indexOf("Models")>=0&&r.each(t,function(t){var r=t.coordinateSystem;if(r&&r.containPoint)a|=!!r.containPoint(e);else if("seriesModels"===i){var n=this._chartsMap[t.__viewId];n&&n.containPoint&&(a|=n.containPoint(e,t))}},this)},this),!!a}this.id},W.getVisual=function(t,e){var a=this._model,i=(t=S.parseFinder(a,t,{defaultMainType:"series"})).seriesModel.getData(),r=t.hasOwnProperty("dataIndexInside")?t.dataIndexInside:t.hasOwnProperty("dataIndex")?i.indexOfRawIndex(t.dataIndex):null;return null!=r?i.getItemVisual(r,e):i.getVisual(e)},W.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},W.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]};var K={prepareAndUpdate:function(t){z(this),K.update.call(this,t)},update:function(t){var e=this._model,a=this._api,i=this._zr,r=this._coordSysMgr,s=this._scheduler;if(e){s.restoreData(e,t),s.performSeriesTasks(e),r.create(e,a),s.performDataProcessorTasks(e,t),j(this,e),r.update(e,a),tt(e),s.performVisualTasks(e,t),et(this,e,a,t);var h=e.get("backgroundColor")||"transparent";if(o.canvasSupported)i.setBackgroundColor(h);else{var l=n.parse(h);h=n.stringify(l,"rgb"),0===l[3]&&(h="transparent")}it(e,a)}},updateTransform:function(t){var e=this._model,a=this,i=this._api;if(e){var n=[];e.eachComponent(function(r,o){var s=a.getViewOfComponentModel(o);if(s&&s.__alive)if(s.updateTransform){var h=s.updateTransform(o,e,i,t);h&&h.update&&n.push(s)}else n.push(s)});var o=r.createHashMap();e.eachSeries(function(r){var n=a._chartsMap[r.__viewId];if(n.updateTransform){var s=n.updateTransform(r,e,i,t);s&&s.update&&o.set(r.uid,1)}else o.set(r.uid,1)}),tt(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0,dirtyMap:o}),at(a,e,i,t,o),it(e,this._api)}},updateView:function(t){var e=this._model;e&&(v.markUpdateMethod(t,"updateView"),tt(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0}),et(this,this._model,this._api,t),it(e,this._api))},updateVisual:function(t){K.update.call(this,t)},updateLayout:function(t){K.update.call(this,t)}};function z(t){var e=t._model,a=t._scheduler;a.restorePipelines(e),a.prepareStageTasks(),$(t,"component",e,a),$(t,"chart",e,a),a.plan()}function J(t,e,a,i,n){var o=t._model;if(i){var s={};s[i+"Id"]=a[i+"Id"],s[i+"Index"]=a[i+"Index"],s[i+"Name"]=a[i+"Name"];var h={mainType:i,query:s};n&&(h.subType=n);var l=a.excludeSeriesId;null!=l&&(l=r.createHashMap(S.normalizeToArray(l))),o&&o.eachComponent(h,function(e){l&&null!=l.get(e.id)||u(t["series"===i?"_chartsMap":"_componentsMap"][e.__viewId])},t)}else M(t._componentsViews.concat(t._chartsViews),u);function u(i){i&&i.__alive&&i[e]&&i[e](i.__model,o,t._api,a)}}function j(t,e){var a=t._chartsMap,i=t._scheduler;e.eachSeries(function(t){i.updateStreamModes(t,a[t.__viewId])})}function q(t,e){var a=t.type,i=t.escapeConnect,n=st[a],o=n.actionInfo,s=(o.update||"update").split(":"),h=s.pop();s=null!=s[0]&&N(s[0]),this[k]=!0;var l=[t],u=!1;t.batch&&(u=!0,l=r.map(t.batch,function(e){return(e=r.defaults(r.extend({},e),t)).batch=null,e}));var c,f=[],d="highlight"===a||"downplay"===a;M(l,function(t){(c=(c=n.action(t,this._model,this._api))||r.extend({},t)).type=o.event||c.type,f.push(c),d?J(this,h,t,"series"):s&&J(this,h,t,s.main,s.sub)},this),"none"===h||d||s||(this[G]?(z(this),K.update.call(this,t),this[G]=!1):K[h].call(this,t)),c=u?{type:o.event||a,escapeConnect:i,batch:f}:f[0],this[k]=!1,!e&&this._messageCenter.trigger(c.type,c)}function Z(t){for(var e=this._pendingActions;e.length;){var a=e.shift();q.call(this,a,t)}}function Q(t){!t&&this.trigger("updated")}function $(t,e,a,i){for(var r="component"===e,n=r?t._componentsViews:t._chartsViews,o=r?t._componentsMap:t._chartsMap,s=t._zr,h=t._api,l=0;l<n.length;l++)n[l].__alive=!1;function u(t){var e="_ec_"+t.id+"_"+t.type,l=o[e];if(!l){var u=N(t.type);(l=new(r?D.getClass(u.main,u.sub):v.getClass(u.sub))).init(a,h),o[e]=l,n.push(l),s.add(l.group)}t.__viewId=l.__id=e,l.__alive=!0,l.__model=t,l.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex},!r&&i.prepareView(l,t,a,h)}r?a.eachComponent(function(t,e){"series"!==t&&u(e)}):a.eachSeries(u);for(l=0;l<n.length;){var c=n[l];c.__alive?l++:(!r&&c.renderTask.dispose(),s.remove(c.group),c.dispose(a,h),n.splice(l,1),delete o[c.__id],c.__id=c.group.__ecComponentInfo=null)}}function tt(t){t.clearColorPalette(),t.eachSeries(function(t){t.clearColorPalette()})}function et(t,e,a,i){!function(t,e,a,i,r){M(r||t._componentsViews,function(t){var r=t.__model;t.render(r,e,a,i),nt(r,t)})}(t,e,a,i),M(t._chartsViews,function(t){t.__alive=!1}),at(t,e,a,i),M(t._chartsViews,function(t){t.__alive||t.remove(e,a)})}function at(t,e,a,i,r){var n,s=t._scheduler;e.eachSeries(function(e){var a=t._chartsMap[e.__viewId];a.__alive=!0;var o=a.renderTask;s.updatePayload(o,i),r&&r.get(e.uid)&&o.dirty(),n|=o.perform(s.getPerformArgs(o)),a.group.silent=!!e.get("silent"),nt(e,a),function(t,e){var a=t.get("blendMode")||null;e.group.traverse(function(t){t.isGroup||t.style.blend!==a&&t.setStyle("blend",a),t.eachPendingDisplayable&&t.eachPendingDisplayable(function(t){t.setStyle("blend",a)})})}(e,a)}),s.unfinished|=n,function(t,e){var a=0;t._zr.storage.traverse(function(t){a++}),a>e.get("hoverLayerThreshold")&&!o.node&&e.eachSeries(function(e){if(!e.preventUsingHoverLayer){var a=t._chartsMap[e.__viewId];a.__alive&&a.group.traverse(function(t){t.useHoverLayer=!0})}})}(t,e),y(t._zr.dom,e)}function it(t,e){M(ct,function(a){a(t,e)})}W.resize=function(t){if(this._disposed)this.id;else{this._zr.resize(t);var e=this._model;if(this._loadingFX&&this._loadingFX.resize(),e){var a=e.resetOption("media"),i=t&&t.silent;this[k]=!0,a&&z(this),K.update.call(this),this[k]=!1,Z.call(this,i),Q.call(this,i)}}},W.showLoading=function(t,e){if(this._disposed)this.id;else if(O(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),Ct[t]){var a=Ct[t](this._api,e),i=this._zr;this._loadingFX=a,i.add(a)}},W.hideLoading=function(){this._disposed?this.id:(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},W.makeActionFromEvent=function(t){var e=r.extend({},t);return e.type=ht[t.type],e},W.dispatchAction=function(t,e){this._disposed?this.id:(O(e)||(e={silent:!!e}),st[t.type]&&this._model&&(this[k]?this._pendingActions.push(t):(q.call(this,t,e.silent),e.flush?this._zr.flush(!0):!1!==e.flush&&o.browser.weChat&&this._throttledZrFlush(),Z.call(this,e.silent),Q.call(this,e.silent))))},W.appendData=function(t){if(this._disposed)this.id;else{var e=t.seriesIndex;this.getModel().getSeriesByIndex(e).appendData(t),this._scheduler.unfinished=!0}},W.on=H("on",!1),W.off=H("off",!1),W.one=H("one",!1);var rt=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function nt(t,e){var a=t.get("z"),i=t.get("zlevel");e.group.traverse(function(t){"group"!==t.type&&(null!=a&&(t.z=a),null!=i&&(t.zlevel=i))})}function ot(){this.eventInfo}W._initEvents=function(){M(rt,function(t){var e=function(e){var a,i=this.getModel(),n=e.target;if("globalout"===t)a={};else if(n&&null!=n.dataIndex){var o=n.dataModel||i.getSeriesByIndex(n.seriesIndex);a=o&&o.getDataParams(n.dataIndex,n.dataType,n)||{}}else n&&n.eventData&&(a=r.extend({},n.eventData));if(a){var s=a.componentType,h=a.componentIndex;"markLine"!==s&&"markPoint"!==s&&"markArea"!==s||(s="series",h=a.seriesIndex);var l=s&&null!=h&&i.getComponent(s,h),u=l&&this["series"===l.mainType?"_chartsMap":"_componentsMap"][l.__viewId];a.event=e,a.type=t,this._ecEventProcessor.eventInfo={targetEl:n,packedEvent:a,model:l,view:u},this.trigger(t,a)}};e.zrEventfulCallAtLast=!0,this._zr.on(t,e,this)},this),M(ht,function(t,e){this._messageCenter.on(e,function(t){this.trigger(e,t)},this)},this)},W.isDisposed=function(){return this._disposed},W.clear=function(){this._disposed?this.id:this.setOption({series:[]},!0)},W.dispose=function(){if(this._disposed)this.id;else{this._disposed=!0,S.setAttribute(this.getDom(),gt,"");var t=this._api,e=this._model;M(this._componentsViews,function(a){a.dispose(e,t)}),M(this._chartsViews,function(a){a.dispose(e,t)}),this._zr.dispose(),delete pt[this.id]}},r.mixin(X,h),ot.prototype={constructor:ot,normalizeQuery:function(t){var e={},a={},i={};if(r.isString(t)){var n=N(t);e.mainType=n.main||null,e.subType=n.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};r.each(t,function(t,r){for(var n=!1,h=0;h<o.length;h++){var l=o[h],u=r.lastIndexOf(l);if(u>0&&u===r.length-l.length){var c=r.slice(0,u);"data"!==c&&(e.mainType=c,e[l.toLowerCase()]=t,n=!0)}}s.hasOwnProperty(r)&&(a[r]=t,n=!0),n||(i[r]=t)})}return{cptQuery:e,dataQuery:a,otherQuery:i}},filter:function(t,e,a){var i=this.eventInfo;if(!i)return!0;var r=i.targetEl,n=i.packedEvent,o=i.model,s=i.view;if(!o||!s)return!0;var h=e.cptQuery,l=e.dataQuery;return u(h,o,"mainType")&&u(h,o,"subType")&&u(h,o,"index","componentIndex")&&u(h,o,"name")&&u(h,o,"id")&&u(l,n,"name")&&u(l,n,"dataIndex")&&u(l,n,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,e.otherQuery,r,n));function u(t,e,a,i){return null==t[a]||e[i||a]===t[a]}},afterTrigger:function(){this.eventInfo=null}};var st={},ht={},lt=[],ut=[],ct=[],ft=[],dt={},Ct={},pt={},mt={},Dt=new Date-0,vt=new Date-0,gt="_echarts_instance_";function St(t){mt[t]=!1}var Tt=St;function It(t){return pt[S.getAttribute(t,gt)]}function yt(t,e){dt[t]=e}function xt(t){ut.push(t)}function wt(t,e){bt(lt,t,e,P)}function Ft(t,e,a){"function"==typeof e&&(a=e,e="");var i=O(t)?t.type:[t,t={event:e}][0];t.event=(t.event||i).toLowerCase(),e=t.event,L(V.test(i)&&V.test(e)),st[i]||(st[i]={action:a,actionInfo:t}),ht[e]=i}function Et(t,e){bt(ft,t,e,_,"visual")}function bt(t,e,a,i,r){(A(e)||O(e))&&(a=e,e=i);var n=w.wrapStageHandler(a,r);return n.__prio=e,n.__raw=a,t.push(n),n}function Lt(t,e){Ct[t]=e}Et(2e3,I),xt(d),wt(900,C),Lt("default",x),Ft({type:"highlight",event:"highlight",update:"highlight"},r.noop),Ft({type:"downplay",event:"downplay",update:"downplay"},r.noop),yt("light",F),yt("dark",E);e.version="4.9.0",e.dependencies={zrender:"4.3.2"},e.PRIORITY=B,e.init=function(t,e,a){var i=It(t);if(i)return i;var r=new X(t,e,a);return r.id="ec_"+Dt++,pt[r.id]=r,S.setAttribute(t,gt,r.id),function(t){var e="__connectUpdateStatus";function a(t,a){for(var i=0;i<t.length;i++)t[i][e]=a}M(ht,function(i,r){t._messageCenter.on(r,function(i){if(mt[t.group]&&0!==t[e]){if(i&&i.escapeConnect)return;var r=t.makeActionFromEvent(i),n=[];M(pt,function(e){e!==t&&e.group===t.group&&n.push(e)}),a(n,0),M(n,function(t){1!==t[e]&&t.dispatchAction(r)}),a(n,2)}})})}(r),r},e.connect=function(t){if(r.isArray(t)){var e=t;t=null,M(e,function(e){null!=e.group&&(t=e.group)}),t=t||"g_"+vt++,M(e,function(e){e.group=t})}return mt[t]=!0,t},e.disConnect=St,e.disconnect=Tt,e.dispose=function(t){"string"==typeof t?t=pt[t]:t instanceof X||(t=It(t)),t instanceof X&&!t.isDisposed()&&t.dispose()},e.getInstanceByDom=It,e.getInstanceById=function(t){return pt[t]},e.registerTheme=yt,e.registerPreprocessor=xt,e.registerProcessor=wt,e.registerPostUpdate=function(t){ct.push(t)},e.registerAction=Ft,e.registerCoordinateSystem=function(t,e){c.register(t,e)},e.getCoordinateSystemDimensions=function(t){var e=c.get(t);if(e)return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()},e.registerLayout=function(t,e){bt(ft,t,e,R,"layout")},e.registerVisual=Et,e.registerLoading=Lt,e.extendComponentModel=function(t){return p.extend(t)},e.extendComponentView=function(t){return D.extend(t)},e.extendSeriesModel=function(t){return m.extend(t)},e.extendChartView=function(t){return v.extend(t)},e.setCanvasCreator=function(t){r.$override("createCanvas",t)},e.registerMap=function(t,e,a){b.registerMap(t,e,a)},e.getMap=function(t){var e=b.retrieveMap(t);return e&&e[0]&&{geoJson:e[0].geoJSON,specialAreas:e[0].specialAreas}},e.dataTool={};var Mt=a("txkQ");!function(){for(var t in Mt)Mt.hasOwnProperty(t)&&(e[t]=Mt[t])}()},QBsz:function(t,e){var a="undefined"==typeof Float32Array?Array:Float32Array;function i(t){return Math.sqrt(n(t))}var r=i;function n(t){return t[0]*t[0]+t[1]*t[1]}var o=n;function s(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var h=s;function l(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var u=l;e.create=function(t,e){var i=new a(2);return null==t&&(t=0),null==e&&(e=0),i[0]=t,i[1]=e,i},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.clone=function(t){var e=new a(2);return e[0]=t[0],e[1]=t[1],e},e.set=function(t,e,a){return t[0]=e,t[1]=a,t},e.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t},e.scaleAndAdd=function(t,e,a,i){return t[0]=e[0]+a[0]*i,t[1]=e[1]+a[1]*i,t},e.sub=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t},e.len=i,e.length=r,e.lenSquare=n,e.lengthSquare=o,e.mul=function(t,e,a){return t[0]=e[0]*a[0],t[1]=e[1]*a[1],t},e.div=function(t,e,a){return t[0]=e[0]/a[0],t[1]=e[1]/a[1],t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.scale=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t},e.normalize=function(t,e){var a=i(e);return 0===a?(t[0]=0,t[1]=0):(t[0]=e[0]/a,t[1]=e[1]/a),t},e.distance=s,e.dist=h,e.distanceSquare=l,e.distSquare=u,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.lerp=function(t,e,a,i){return t[0]=e[0]+i*(a[0]-e[0]),t[1]=e[1]+i*(a[1]-e[1]),t},e.applyTransform=function(t,e,a){var i=e[0],r=e[1];return t[0]=a[0]*i+a[2]*r+a[4],t[1]=a[1]*i+a[3]*r+a[5],t},e.min=function(t,e,a){return t[0]=Math.min(e[0],a[0]),t[1]=Math.min(e[1],a[1]),t},e.max=function(t,e,a){return t[0]=Math.max(e[0],a[0]),t[1]=Math.max(e[1],a[1]),t}},QRdY:function(t,e,a){a("xfML"),t.exports=a("VSTI").Object.setPrototypeOf},QbLZ:function(t,e,a){"use strict";e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(a("P2sY"));e.default=i.default||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t}},Qe9p:function(t,e,a){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function n(t){return t<0?0:t>1?1:t}function o(t){return t.length&&"%"===t.charAt(t.length-1)?r(parseFloat(t)/100*255):r(parseInt(t,10))}function s(t){return t.length&&"%"===t.charAt(t.length-1)?n(parseFloat(t)/100):n(parseFloat(t))}function h(t,e,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?t+(e-t)*a*6:2*a<1?e:3*a<2?t+(e-t)*(2/3-a)*6:t}function l(t,e,a){return t+(e-t)*a}function u(t,e,a,i,r){return t[0]=e,t[1]=a,t[2]=i,t[3]=r,t}function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var f=new(a("1RvN"))(20),d=null;function C(t,e){d&&c(d,e),d=f.put(t,d||e.slice())}function p(t,e){if(t){e=e||[];var a=f.get(t);if(a)return c(e,a);var r,n=(t+="").replace(/ /g,"").toLowerCase();if(n in i)return c(e,i[n]),C(t,e),e;if("#"===n.charAt(0))return 4===n.length?(r=parseInt(n.substr(1),16))>=0&&r<=4095?(u(e,(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,1),C(t,e),e):void u(e,0,0,0,1):7===n.length?(r=parseInt(n.substr(1),16))>=0&&r<=16777215?(u(e,(16711680&r)>>16,(65280&r)>>8,255&r,1),C(t,e),e):void u(e,0,0,0,1):void 0;var h=n.indexOf("("),l=n.indexOf(")");if(-1!==h&&l+1===n.length){var d=n.substr(0,h),p=n.substr(h+1,l-(h+1)).split(","),D=1;switch(d){case"rgba":if(4!==p.length)return void u(e,0,0,0,1);D=s(p.pop());case"rgb":return 3!==p.length?void u(e,0,0,0,1):(u(e,o(p[0]),o(p[1]),o(p[2]),D),C(t,e),e);case"hsla":return 4!==p.length?void u(e,0,0,0,1):(p[3]=s(p[3]),m(p,e),C(t,e),e);case"hsl":return 3!==p.length?void u(e,0,0,0,1):(m(p,e),C(t,e),e);default:return}}u(e,0,0,0,1)}}function m(t,e){var a=(parseFloat(t[0])%360+360)%360/360,i=s(t[1]),n=s(t[2]),o=n<=.5?n*(i+1):n+i-n*i,l=2*n-o;return u(e=e||[],r(255*h(l,o,a+1/3)),r(255*h(l,o,a)),r(255*h(l,o,a-1/3)),1),4===t.length&&(e[3]=t[3]),e}function D(t,e,a){if(e&&e.length&&t>=0&&t<=1){a=a||[];var i=t*(e.length-1),o=Math.floor(i),s=Math.ceil(i),h=e[o],u=e[s],c=i-o;return a[0]=r(l(h[0],u[0],c)),a[1]=r(l(h[1],u[1],c)),a[2]=r(l(h[2],u[2],c)),a[3]=n(l(h[3],u[3],c)),a}}var v=D;function g(t,e,a){if(e&&e.length&&t>=0&&t<=1){var i=t*(e.length-1),o=Math.floor(i),s=Math.ceil(i),h=p(e[o]),u=p(e[s]),c=i-o,f=T([r(l(h[0],u[0],c)),r(l(h[1],u[1],c)),r(l(h[2],u[2],c)),n(l(h[3],u[3],c))],"rgba");return a?{color:f,leftIndex:o,rightIndex:s,value:i}:f}}var S=g;function T(t,e){if(t&&t.length){var a=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(a+=","+t[3]),e+"("+a+")"}}e.parse=p,e.lift=function(t,e){var a=p(t);if(a){for(var i=0;i<3;i++)a[i]=e<0?a[i]*(1-e)|0:(255-a[i])*e+a[i]|0,a[i]>255?a[i]=255:t[i]<0&&(a[i]=0);return T(a,4===a.length?"rgba":"rgb")}},e.toHex=function(t){var e=p(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)},e.fastLerp=D,e.fastMapToColor=v,e.lerp=g,e.mapToColor=S,e.modifyHSL=function(t,e,a,i){if(t=p(t))return t=function(t){if(t){var e,a,i=t[0]/255,r=t[1]/255,n=t[2]/255,o=Math.min(i,r,n),s=Math.max(i,r,n),h=s-o,l=(s+o)/2;if(0===h)e=0,a=0;else{a=l<.5?h/(s+o):h/(2-s-o);var u=((s-i)/6+h/2)/h,c=((s-r)/6+h/2)/h,f=((s-n)/6+h/2)/h;i===s?e=f-c:r===s?e=1/3+u-f:n===s&&(e=2/3+c-u),e<0&&(e+=1),e>1&&(e-=1)}var d=[360*e,a,l];return null!=t[3]&&d.push(t[3]),d}}(t),null!=e&&(t[0]=function(t){return(t=Math.round(t))<0?0:t>360?360:t}(e)),null!=a&&(t[1]=s(a)),null!=i&&(t[2]=s(i)),T(m(t),"rgba")},e.modifyAlpha=function(t,e){if((t=p(t))&&null!=e)return t[3]=n(e),T(t,"rgba")},e.stringify=T},QuXc:function(t,e){var a=function(t){this.colorStops=t||[]};a.prototype={constructor:a,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}};var i=a;t.exports=i},Qvb6:function(t,e,a){var i=a("ProS"),r=a("bYtY"),n=a("ItGF"),o=a("B9fm"),s=a("gvm7"),h=a("7aKB"),l=a("OELB"),u=a("IwbS"),c=a("Ez2D"),f=a("+TT/"),d=a("Qxkt"),C=a("F9bG"),p=a("aX7z"),m=a("/y7N"),D=a("4NO4").getTooltipRenderMode,v=r.bind,g=r.each,S=l.parsePercent,T=new u.Rect({shape:{x:-1,y:-1,width:2,height:2}}),I=i.extendComponentView({type:"tooltip",init:function(t,e){if(!n.node){var a,i=t.getComponent("tooltip"),r=i.get("renderMode");this._renderMode=D(r),"html"===this._renderMode?(a=new o(e.getDom(),e,{appendToBody:i.get("appendToBody",!0)}),this._newLine="<br/>"):(a=new s(e),this._newLine="\n"),this._tooltipContent=a}},render:function(t,e,a){if(!n.node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=a,this._lastDataByCoordSys=null,this._alwaysShowContent=t.get("alwaysShowContent");var i=this._tooltipContent;i.update(t),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var t=this._tooltipModel.get("triggerOn");C.register("itemTooltip",this._api,v(function(e,a,i){"none"!==t&&(t.indexOf(e)>=0?this._tryShow(a,i):"leave"===e&&this._hide(i))},this))},_keepShow:function(){var t=this._tooltipModel,e=this._ecModel,a=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!a.isDisposed()&&i.manuallyShowTip(t,e,a,{x:i._lastX,y:i._lastY})})}},manuallyShowTip:function(t,e,a,i){if(i.from!==this.uid&&!n.node){var r=x(i,a);this._ticket="";var o=i.dataByCoordSys;if(i.tooltip&&null!=i.x&&null!=i.y){var s=T;s.position=[i.x,i.y],s.update(),s.tooltip=i.tooltip,this._tryShow({offsetX:i.x,offsetY:i.y,target:s},r)}else if(o)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:i.dataByCoordSys,tooltipOption:i.tooltipOption},r);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(t,e,a,i))return;var h=c(i,e),l=h.point[0],u=h.point[1];null!=l&&null!=u&&this._tryShow({offsetX:l,offsetY:u,position:i.position,target:h.el},r)}else null!=i.x&&null!=i.y&&(a.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:a.getZr().findHover(i.x,i.y).target},r))}},manuallyHideTip:function(t,e,a,i){var r=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&r.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,i.from!==this.uid&&this._hide(x(i,a))},_manuallyAxisShowTip:function(t,e,a,i){var r=i.seriesIndex,n=i.dataIndex,o=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=r&&null!=n&&null!=o){var s=e.getSeriesByIndex(r);if(s)if("axis"===(t=y([s.getData().getItemModel(n),s,(s.coordinateSystem||{}).model,t])).get("trigger"))return a.dispatchAction({type:"updateAxisPointer",seriesIndex:r,dataIndex:n,position:i.position}),!0}},_tryShow:function(t,e){var a=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var i=t.dataByCoordSys;i&&i.length?this._showAxisTooltip(i,t):a&&null!=a.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(t,a,e)):a&&a.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(t,a,e)):(this._lastDataByCoordSys=null,this._hide(e))}},_showOrMove:function(t,e){var a=t.get("showDelay");e=r.bind(e,this),clearTimeout(this._showTimout),a>0?this._showTimout=setTimeout(e,a):e()},_showAxisTooltip:function(t,e){var a=this._ecModel,i=this._tooltipModel,n=[e.offsetX,e.offsetY],o=[],s=[],l=y([e.tooltipOption,i]),u=this._renderMode,c=this._newLine,f={};g(t,function(t){g(t.dataByAxis,function(t){var e=a.getComponent(t.axisDim+"Axis",t.axisIndex),i=t.value,n=[];if(e&&null!=i){var l=m.getValueLabel(i,e.axis,a,t.seriesDataIndices,t.valueLabelOpt);r.each(t.seriesDataIndices,function(o){var h=a.getSeriesByIndex(o.seriesIndex),c=o.dataIndexInside,d=h&&h.getDataParams(c);if(d.axisDim=t.axisDim,d.axisIndex=t.axisIndex,d.axisType=t.axisType,d.axisId=t.axisId,d.axisValue=p.getAxisRawValue(e.axis,i),d.axisValueLabel=l,d){s.push(d);var C,m=h.formatTooltip(c,!0,null,u);if(r.isObject(m)){C=m.html;var D=m.markers;r.merge(f,D)}else C=m;n.push(C)}});var d=l;"html"!==u?o.push(n.join(c)):o.push((d?h.encodeHTML(d)+c:"")+n.join(c))}})},this),o.reverse(),o=o.join(this._newLine+this._newLine);var d=e.position;this._showOrMove(l,function(){this._updateContentNotChangedOnAxis(t)?this._updatePosition(l,d,n[0],n[1],this._tooltipContent,s):this._showTooltipContent(l,o,s,Math.random(),n[0],n[1],d,void 0,f)})},_showSeriesItemTooltip:function(t,e,a){var i=this._ecModel,n=e.seriesIndex,o=i.getSeriesByIndex(n),s=e.dataModel||o,h=e.dataIndex,l=e.dataType,u=s.getData(l),c=y([u.getItemModel(h),s,o&&(o.coordinateSystem||{}).model,this._tooltipModel]),f=c.get("trigger");if(null==f||"item"===f){var d,C,p=s.getDataParams(h,l),m=s.formatTooltip(h,!1,l,this._renderMode);r.isObject(m)?(d=m.html,C=m.markers):(d=m,C=null);var D="item_"+s.name+"_"+h;this._showOrMove(c,function(){this._showTooltipContent(c,d,p,D,t.offsetX,t.offsetY,t.position,t.target,C)}),a({type:"showTip",dataIndexInside:h,dataIndex:u.getRawIndex(h),seriesIndex:n,from:this.uid})}},_showComponentItemTooltip:function(t,e,a){var i=e.tooltip;if("string"==typeof i){i={content:i,formatter:i}}var r=new d(i,this._tooltipModel,this._ecModel),n=r.get("content"),o=Math.random();this._showOrMove(r,function(){this._showTooltipContent(r,n,r.get("formatterParams")||{},o,t.offsetX,t.offsetY,t.position,e)}),a({type:"showTip",from:this.uid})},_showTooltipContent:function(t,e,a,i,r,n,o,s,l){if(this._ticket="",t.get("showContent")&&t.get("show")){var u=this._tooltipContent,c=t.get("formatter");o=o||t.get("position");var f=e;if(c&&"string"==typeof c)f=h.formatTpl(c,a,!0);else if("function"==typeof c){var d=v(function(e,i){e===this._ticket&&(u.setContent(i,l,t),this._updatePosition(t,o,r,n,u,a,s))},this);this._ticket=i,f=c(a,i,d)}u.setContent(f,l,t),u.show(t),this._updatePosition(t,o,r,n,u,a,s)}},_updatePosition:function(t,e,a,i,n,o,s){var h=this._api.getWidth(),l=this._api.getHeight();e=e||t.get("position");var u=n.getSize(),c=t.get("align"),d=t.get("verticalAlign"),C=s&&s.getBoundingRect().clone();if(s&&C.applyTransform(s.transform),"function"==typeof e&&(e=e([a,i],o,n.el,C,{viewSize:[h,l],contentSize:u.slice()})),r.isArray(e))a=S(e[0],h),i=S(e[1],l);else if(r.isObject(e)){e.width=u[0],e.height=u[1];var p=f.getLayoutRect(e,{width:h,height:l});a=p.x,i=p.y,c=null,d=null}else if("string"==typeof e&&s){var m=function(t,e,a){var i=a[0],r=a[1],n=0,o=0,s=e.width,h=e.height;switch(t){case"inside":n=e.x+s/2-i/2,o=e.y+h/2-r/2;break;case"top":n=e.x+s/2-i/2,o=e.y-r-5;break;case"bottom":n=e.x+s/2-i/2,o=e.y+h+5;break;case"left":n=e.x-i-5,o=e.y+h/2-r/2;break;case"right":n=e.x+s+5,o=e.y+h/2-r/2}return[n,o]}(e,C,u);a=m[0],i=m[1]}else{m=function(t,e,a,i,r,n,o){var s=a.getOuterSize(),h=s.width,l=s.height;null!=n&&(t+h+n>i?t-=h+n:t+=n);null!=o&&(e+l+o>r?e-=l+o:e+=o);return[t,e]}(a,i,n,h,l,c?null:20,d?null:20);a=m[0],i=m[1]}if(c&&(a-=w(c)?u[0]/2:"right"===c?u[0]:0),d&&(i-=w(d)?u[1]/2:"bottom"===d?u[1]:0),t.get("confine")){m=function(t,e,a,i,r){var n=a.getOuterSize(),o=n.width,s=n.height;return t=Math.min(t+o,i)-o,e=Math.min(e+s,r)-s,t=Math.max(t,0),e=Math.max(e,0),[t,e]}(a,i,n,h,l);a=m[0],i=m[1]}n.moveTo(a,i)},_updateContentNotChangedOnAxis:function(t){var e=this._lastDataByCoordSys,a=!!e&&e.length===t.length;return a&&g(e,function(e,i){var r=e.dataByAxis||{},n=(t[i]||{}).dataByAxis||[];(a&=r.length===n.length)&&g(r,function(t,e){var i=n[e]||{},r=t.seriesDataIndices||[],o=i.seriesDataIndices||[];(a&=t.value===i.value&&t.axisType===i.axisType&&t.axisId===i.axisId&&r.length===o.length)&&g(r,function(t,e){var i=o[e];a&=t.seriesIndex===i.seriesIndex&&t.dataIndex===i.dataIndex})})}),this._lastDataByCoordSys=t,!!a},_hide:function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},dispose:function(t,e){n.node||(this._tooltipContent.dispose(),C.unregister("itemTooltip",e))}});function y(t){for(var e=t.pop();t.length;){var a=t.pop();a&&(d.isInstance(a)&&(a=a.get("tooltip",!0)),"string"==typeof a&&(a={formatter:a}),e=new d(a,e,e.ecModel))}return e}function x(t,e){return t.dispatchAction||r.bind(e.dispatchAction,e)}function w(t){return"center"===t||"middle"===t}t.exports=I},Qxkt:function(t,e,a){var i=a("bYtY"),r=a("ItGF"),n=a("4NO4").makeInner,o=a("Yl7c"),s=o.enableClassExtend,h=o.enableClassCheck,l=a("OQFs"),u=a("m9t5"),c=a("/iHx"),f=a("VR9l"),d=i.mixin,C=n();function p(t,e,a){this.parentModel=e,this.ecModel=a,this.option=t}function m(t,e,a){for(var i=0;i<e.length&&(!e[i]||null!=(t=t&&"object"==typeof t?t[e[i]]:null));i++);return null==t&&a&&(t=a.get(e)),t}function D(t,e){var a=C(t).getParent;return a?a.call(t,e):t.parentModel}p.prototype={constructor:p,init:null,mergeOption:function(t){i.merge(this.option,t,!0)},get:function(t,e){return null==t?this.option:m(this.option,this.parsePath(t),!e&&D(this,t))},getShallow:function(t,e){var a=this.option,i=null==a?a:a[t],r=!e&&D(this,t);return null==i&&r&&(i=r.getShallow(t)),i},getModel:function(t,e){var a;return new p(null==t?this.option:m(this.option,t=this.parsePath(t)),e=e||(a=D(this,t))&&a.getModel(t),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new(0,this.constructor)(i.clone(this.option))},setReadOnly:function(t){},parsePath:function(t){return"string"==typeof t&&(t=t.split(".")),t},customizeGetParent:function(t){C(this).getParent=t},isAnimationEnabled:function(){if(!r.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},s(p),h(p),d(p,l),d(p,u),d(p,c),d(p,f);var v=p;t.exports=v},RDYZ:function(t,e,a){var i=a("dMvE");function r(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}r.prototype={constructor:r,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=e;else{var a=(t-this._startTime-this._pausedTime)/this._life;if(!(a<0)){a=Math.min(a,1);var r=this.easing,n="string"==typeof r?i[r]:r,o="function"==typeof n?n(a):a;return this.fire("frame",o),1===a?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){this[t="on"+t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var n=r;t.exports=n},RV59:function(t,e,a){var i=a("+3vN"),r=t.exports={WebVTT:a("Cb4k"),VTTCue:a("HEqF"),VTTRegion:a("beoY")};i.vttjs=r,i.WebVTT=r.WebVTT;var n=r.VTTCue,o=r.VTTRegion,s=i.VTTCue,h=i.VTTRegion;r.shim=function(){i.VTTCue=n,i.VTTRegion=o},r.restore=function(){i.VTTCue=s,i.VTTRegion=h},i.VTTCue||r.shim()},RXMa:function(t,e,a){var i=a("y+Vt").extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var a=e.cx,i=e.cy,r=2*Math.PI;t.moveTo(a+e.r,i),t.arc(a,i,e.r,0,r,!1),t.moveTo(a+e.r0,i),t.arc(a,i,e.r0,0,r,!0)}});t.exports=i},RlCK:function(t,e,a){var i=a("ProS"),r=a("bYtY");function n(t,e,a){var i,n={},o="toggleSelected"===t;return a.eachComponent("legend",function(a){o&&null!=i?a[i?"select":"unSelect"](e.name):"allSelect"===t||"inverseSelect"===t?a[t]():(a[t](e.name),i=a.isSelected(e.name));var s=a.getData();r.each(s,function(t){var e=t.get("name");if("\n"!==e&&""!==e){var i=a.isSelected(e);n.hasOwnProperty(e)?n[e]=n[e]&&i:n[e]=i}})}),"allSelect"===t||"inverseSelect"===t?{selected:n}:{name:e.name,selected:n}}i.registerAction("legendToggleSelect","legendselectchanged",r.curry(n,"toggleSelected")),i.registerAction("legendAllSelect","legendselectall",r.curry(n,"allSelect")),i.registerAction("legendInverseSelect","legendinverseselect",r.curry(n,"inverseSelect")),i.registerAction("legendSelect","legendselected",r.curry(n,"select")),i.registerAction("legendUnSelect","legendunselected",r.curry(n,"unSelect"))},"Rn+g":function(t,e,a){"use strict";var i=a("LYNF");t.exports=function(t,e,a){var r=a.config.validateStatus;!r||r(a.status)?t(a):e(i("Request failed with status code "+a.status,a.config,null,a.request,a))}},S4vA:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},SEkw:function(t,e,a){t.exports={default:a("N4c9"),__esModule:!0}},SKnc:function(t,e,a){var i=a("bYtY"),r=a("QuXc"),n=function(t,e,a,i,n,o){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==a?1:a,this.y2=null==i?0:i,this.type="linear",this.global=o||!1,r.call(this,n)};n.prototype={constructor:n},i.inherits(n,r);var o=n;t.exports=o},"SKx+":function(t,e,a){var i=a("ProS").extendComponentModel({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});t.exports=i},SMc4:function(t,e,a){var i=a("bYtY"),r=a("bLfw"),n=a("nkfE"),o=a("ICMv"),s=r.extend({type:"cartesian2dAxis",axis:null,init:function(){s.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){s.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){s.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function h(t,e){return e.type||(e.data?"category":"value")}i.merge(s.prototype,o);var l={offset:0};n("x",s,h,l),n("y",s,h,l);var u=s;t.exports=u},SUKs:function(t,e,a){var i=function(){};1===a("LPTA").debugMode&&(i=console.error);var r=i;t.exports=r},Sj9i:function(t,e,a){var i=a("QBsz"),r=i.create,n=i.distSquare,o=Math.pow,s=Math.sqrt,h=1e-8,l=1e-4,u=s(3),c=1/3,f=r(),d=r(),C=r();function p(t){return t>-h&&t<h}function m(t){return t>h||t<-h}function D(t,e,a,i,r){var n=1-r;return n*n*(n*t+3*r*e)+r*r*(r*i+3*n*a)}function v(t,e,a,i){var r=1-i;return r*(r*t+2*i*e)+i*i*a}e.cubicAt=D,e.cubicDerivativeAt=function(t,e,a,i,r){var n=1-r;return 3*(((e-t)*n+2*(a-e)*r)*n+(i-a)*r*r)},e.cubicRootAt=function(t,e,a,i,r,n){var h=i+3*(e-a)-t,l=3*(a-2*e+t),f=3*(e-t),d=t-r,C=l*l-3*h*f,m=l*f-9*h*d,D=f*f-3*l*d,v=0;if(p(C)&&p(m))p(l)?n[0]=0:(L=-f/l)>=0&&L<=1&&(n[v++]=L);else{var g=m*m-4*C*D;if(p(g)){var S=m/C,T=-S/2;(L=-l/h+S)>=0&&L<=1&&(n[v++]=L),T>=0&&T<=1&&(n[v++]=T)}else if(g>0){var I=s(g),y=C*l+1.5*h*(-m+I),x=C*l+1.5*h*(-m-I);(L=(-l-((y=y<0?-o(-y,c):o(y,c))+(x=x<0?-o(-x,c):o(x,c))))/(3*h))>=0&&L<=1&&(n[v++]=L)}else{var w=(2*C*l-3*h*m)/(2*s(C*C*C)),F=Math.acos(w)/3,E=s(C),b=Math.cos(F),L=(-l-2*E*b)/(3*h),M=(T=(-l+E*(b+u*Math.sin(F)))/(3*h),(-l+E*(b-u*Math.sin(F)))/(3*h));L>=0&&L<=1&&(n[v++]=L),T>=0&&T<=1&&(n[v++]=T),M>=0&&M<=1&&(n[v++]=M)}}return v},e.cubicExtrema=function(t,e,a,i,r){var n=6*a-12*e+6*t,o=9*e+3*i-3*t-9*a,h=3*e-3*t,l=0;if(p(o))m(n)&&(c=-h/n)>=0&&c<=1&&(r[l++]=c);else{var u=n*n-4*o*h;if(p(u))r[0]=-n/(2*o);else if(u>0){var c,f=s(u),d=(-n-f)/(2*o);(c=(-n+f)/(2*o))>=0&&c<=1&&(r[l++]=c),d>=0&&d<=1&&(r[l++]=d)}}return l},e.cubicSubdivide=function(t,e,a,i,r,n){var o=(e-t)*r+t,s=(a-e)*r+e,h=(i-a)*r+a,l=(s-o)*r+o,u=(h-s)*r+s,c=(u-l)*r+l;n[0]=t,n[1]=o,n[2]=l,n[3]=c,n[4]=c,n[5]=u,n[6]=h,n[7]=i},e.cubicProjectPoint=function(t,e,a,i,r,o,h,u,c,p,m){var v,g,S,T,I,y=.005,x=1/0;f[0]=c,f[1]=p;for(var w=0;w<1;w+=.05)d[0]=D(t,a,r,h,w),d[1]=D(e,i,o,u,w),(T=n(f,d))<x&&(v=w,x=T);x=1/0;for(var F=0;F<32&&!(y<l);F++)g=v-y,S=v+y,d[0]=D(t,a,r,h,g),d[1]=D(e,i,o,u,g),T=n(d,f),g>=0&&T<x?(v=g,x=T):(C[0]=D(t,a,r,h,S),C[1]=D(e,i,o,u,S),I=n(C,f),S<=1&&I<x?(v=S,x=I):y*=.5);return m&&(m[0]=D(t,a,r,h,v),m[1]=D(e,i,o,u,v)),s(x)},e.quadraticAt=v,e.quadraticDerivativeAt=function(t,e,a,i){return 2*((1-i)*(e-t)+i*(a-e))},e.quadraticRootAt=function(t,e,a,i,r){var n=t-2*e+a,o=2*(e-t),h=t-i,l=0;if(p(n))m(o)&&(c=-h/o)>=0&&c<=1&&(r[l++]=c);else{var u=o*o-4*n*h;if(p(u))(c=-o/(2*n))>=0&&c<=1&&(r[l++]=c);else if(u>0){var c,f=s(u),d=(-o-f)/(2*n);(c=(-o+f)/(2*n))>=0&&c<=1&&(r[l++]=c),d>=0&&d<=1&&(r[l++]=d)}}return l},e.quadraticExtremum=function(t,e,a){var i=t+a-2*e;return 0===i?.5:(t-e)/i},e.quadraticSubdivide=function(t,e,a,i,r){var n=(e-t)*i+t,o=(a-e)*i+e,s=(o-n)*i+n;r[0]=t,r[1]=n,r[2]=s,r[3]=s,r[4]=o,r[5]=a},e.quadraticProjectPoint=function(t,e,a,i,r,o,h,u,c){var p,m=.005,D=1/0;f[0]=h,f[1]=u;for(var g=0;g<1;g+=.05)d[0]=v(t,a,r,g),d[1]=v(e,i,o,g),(y=n(f,d))<D&&(p=g,D=y);D=1/0;for(var S=0;S<32&&!(m<l);S++){var T=p-m,I=p+m;d[0]=v(t,a,r,T),d[1]=v(e,i,o,T);var y=n(d,f);if(T>=0&&y<D)p=T,D=y;else{C[0]=v(t,a,r,I),C[1]=v(e,i,o,I);var x=n(C,f);I<=1&&x<D?(p=I,D=x):m*=.5}}return c&&(c[0]=v(t,a,r,p),c[1]=v(e,i,o,p)),s(D)}},SkeG:function(t,e,a){"use strict";var i=a("GhSp"),r=a("ENu8");t.exports=function(t,e,a){e in t?i.f(t,e,r(0,a)):t[e]=a}},SntB:function(t,e,a){"use strict";var i=a("xTJ+");t.exports=function(t,e){e=e||{};var a={},r=["url","method","params","data"],n=["headers","auth","proxy"],o=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];i.forEach(r,function(t){void 0!==e[t]&&(a[t]=e[t])}),i.forEach(n,function(r){i.isObject(e[r])?a[r]=i.deepMerge(t[r],e[r]):void 0!==e[r]?a[r]=e[r]:i.isObject(t[r])?a[r]=i.deepMerge(t[r]):void 0!==t[r]&&(a[r]=t[r])}),i.forEach(o,function(i){void 0!==e[i]?a[i]=e[i]:void 0!==t[i]&&(a[i]=t[i])});var s=r.concat(n).concat(o),h=Object.keys(e).filter(function(t){return-1===s.indexOf(t)});return i.forEach(h,function(i){void 0!==e[i]?a[i]=e[i]:void 0!==t[i]&&(a[i]=t[i])}),a}},Sp2Z:function(t,e,a){var i=a("3LNs"),r=a("/y7N"),n=a("AVZG"),o=a("Znkb"),s=i.extend({makeElOption:function(t,e,a,i,o){var s=a.axis,u=s.grid,c=i.get("type"),f=h(u,s).getOtherAxis(s).getGlobalExtent(),d=s.toGlobalCoord(s.dataToCoord(e,!0));if(c&&"none"!==c){var C=r.buildElStyle(i),p=l[c](s,d,f);p.style=C,t.graphicKey=p.type,t.pointer=p}var m=n.layout(u.model,a);r.buildCartesianSingleLabelElOption(e,t,m,a,i,o)},getHandleTransform:function(t,e,a){var i=n.layout(e.axis.grid.model,e,{labelInside:!1});return i.labelMargin=a.get("handle.margin"),{position:r.getTransformedPosition(e.axis,t,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,a,i){var r=a.axis,n=r.grid,o=r.getGlobalExtent(!0),s=h(n,r).getOtherAxis(r).getGlobalExtent(),l="x"===r.dim?0:1,u=t.position;u[l]+=e[l],u[l]=Math.min(o[1],u[l]),u[l]=Math.max(o[0],u[l]);var c=(s[1]+s[0])/2,f=[c,c];f[l]=u[l];return{position:u,rotation:t.rotation,cursorPoint:f,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}}});function h(t,e){var a={};return a[e.dim+"AxisIndex"]=e.index,t.getCartesian(a)}var l={line:function(t,e,a){return{type:"Line",subPixelOptimize:!0,shape:r.makeLineShape([e,a[0]],[e,a[1]],u(t))}},shadow:function(t,e,a){var i=Math.max(1,t.getBandWidth()),n=a[1]-a[0];return{type:"Rect",shape:r.makeRectShape([e-i/2,a[0]],[i,n],u(t))}}};function u(t){return"x"===t.dim?0:1}o.registerAxisPointerClass("CartesianAxisPointer",s);var c=s;t.exports=c},SqI9:function(t,e,a){var i=a("y+Vt"),r=a("iXp4"),n=i.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:r(i.prototype.brush),buildPath:function(t,e){var a=e.cx,i=e.cy,r=Math.max(e.r0||0,0),n=Math.max(e.r,0),o=e.startAngle,s=e.endAngle,h=e.clockwise,l=Math.cos(o),u=Math.sin(o);t.moveTo(l*r+a,u*r+i),t.lineTo(l*n+a,u*n+i),t.arc(a,i,n,o,s,!h),t.lineTo(Math.cos(s)*r+a,Math.sin(s)*r+i),0!==r&&t.arc(a,i,r,s,o,h),t.closePath()}});t.exports=n},T4UG:function(t,e,a){a("Tghj").__DEV__;var i=a("bYtY"),r=a("ItGF"),n=a("7aKB"),o=n.formatTime,s=n.encodeHTML,h=n.addCommas,l=n.getTooltipMarker,u=a("4NO4"),c=a("bLfw"),f=a("5Hur"),d=a("OKJ2"),C=a("+TT/"),p=C.getLayoutParams,m=C.mergeLayoutParam,D=a("9H2F").createTask,v=a("D5nY"),g=v.prepareSource,S=v.getSource,T=a("KxfA").retrieveRawValue,I=u.makeInner(),y=c.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(t,e,a,i){this.seriesIndex=this.componentIndex,this.dataTask=D({count:w,reset:F}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,a),g(this);var r=this.getInitialData(t,a);b(r,this),this.dataTask.context.data=r,I(this).dataBeforeProcessed=r,x(this)},mergeDefaultAndTheme:function(t,e){var a=this.layoutMode,r=a?p(t):{},n=this.subType;c.hasClass(n)&&(n+="Series"),i.merge(t,e.getTheme().get(this.subType)),i.merge(t,this.getDefaultOption()),u.defaultEmphasis(t,"label",["show"]),this.fillDataTextStyle(t.data),a&&m(t,r,a)},mergeOption:function(t,e){t=i.merge(this.option,t,!0),this.fillDataTextStyle(t.data);var a=this.layoutMode;a&&m(this.option,t,a),g(this);var r=this.getInitialData(t,e);b(r,this),this.dataTask.dirty(),this.dataTask.context.data=r,I(this).dataBeforeProcessed=r,x(this)},fillDataTextStyle:function(t){if(t&&!i.isTypedArray(t))for(var e=["show"],a=0;a<t.length;a++)t[a]&&t[a].label&&u.defaultEmphasis(t[a],"label",e)},getInitialData:function(){},appendData:function(t){this.getRawData().appendData(t.data)},getData:function(t){var e=M(this);if(e){var a=e.context.data;return null==t?a:a.getLinkedData(t)}return I(this).data},setData:function(t){var e=M(this);if(e){var a=e.context;a.data!==t&&e.modifyOutputEnd&&e.setOutputEnd(t.count()),a.outputData=t,e!==this.dataTask&&(a.data=t)}I(this).data=t},getSource:function(){return S(this)},getRawData:function(){return I(this).dataBeforeProcessed},getBaseAxis:function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltip:function(t,e,a,r){var n=this,c="html"===(r=r||"html")?"<br/>":"\n",f="richText"===r,d={},C=0;function p(t){return{renderMode:r,content:s(h(t)),style:d}}var m=this.getData(),D=m.mapDimension("defaultedTooltip",!0),v=D.length,g=this.getRawValue(t),S=i.isArray(g),I=m.getItemVisual(t,"color");i.isObject(I)&&I.colorStops&&(I=(I.colorStops[0]||{}).color),I=I||"transparent";var y=(v>1||S&&!v?function(a){var u=i.reduce(a,function(t,e,a){var i=m.getDimensionInfo(a);return t|(i&&!1!==i.tooltip&&null!=i.displayName)},0),c=[];function p(t,a){var i=m.getDimensionInfo(a);if(i&&!1!==i.otherDims.tooltip){var p=i.type,D="sub"+n.seriesIndex+"at"+C,v=l({color:I,type:"subItem",renderMode:r,markerId:D}),g="string"==typeof v?v:v.content,S=(u?g+s(i.displayName||"-")+": ":"")+s("ordinal"===p?t+"":"time"===p?e?"":o("yyyy/MM/dd hh:mm:ss",t):h(t));S&&c.push(S),f&&(d[D]=I,++C)}}D.length?i.each(D,function(e){p(T(m,t,e),e)}):i.each(a,p);var v=u?f?"\n":"<br/>":"",g=v+c.join(v||", ");return{renderMode:r,content:g,style:d}}(g):p(v?T(m,t,D[0]):S?g[0]:g)).content,x=n.seriesIndex+"at"+C,w=l({color:I,type:"item",renderMode:r,markerId:x});d[x]=I,++C;var F=m.getName(t),E=this.name;u.isNameSpecified(this)||(E=""),E=E?s(E)+(e?": ":c):"";var b="string"==typeof w?w:w.content;return{html:e?b+E+y:E+b+(F?s(F)+": "+y:y),markers:d}},isAnimationEnabled:function(){if(r.node)return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),t},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(t,e,a){var i=this.ecModel,r=f.getColorFromPalette.call(this,t,e,a);return r||(r=i.getColorFromPalette(t,e,a)),r},coordDimToDataDim:function(t){return this.getRawData().mapDimension(t,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function x(t){var e=t.name;u.isNameSpecified(t)||(t.name=function(t){var e=t.getRawData(),a=e.mapDimension("seriesName",!0),r=[];return i.each(a,function(t){var a=e.getDimensionInfo(t);a.displayName&&r.push(a.displayName)}),r.join(" ")}(t)||e)}function w(t){return t.model.getRawData().count()}function F(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),E}function E(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function b(t,e){i.each(t.CHANGABLE_METHODS,function(a){t.wrapMethod(a,i.curry(L,e))})}function L(t){var e=M(t);e&&e.setOutputEnd(this.count())}function M(t){var e=(t.ecModel||{}).scheduler,a=e&&e.getPipeline(t.uid);if(a){var i=a.currentTask;if(i){var r=i.agentStubMap;r&&(i=r.get(t.uid))}return i}}i.mixin(y,d),i.mixin(y,f);var A=y;t.exports=A},T6xi:function(t,e,a){var i=a("YgsL"),r=a("nCxF");e.buildPath=function(t,e,a){var n=e.points,o=e.smooth;if(n&&n.length>=2){if(o&&"spline"!==o){var s=r(n,o,a,e.smoothConstraint);t.moveTo(n[0][0],n[0][1]);for(var h=n.length,l=0;l<(a?h:h-1);l++){var u=s[2*l],c=s[2*l+1],f=n[(l+1)%h];t.bezierCurveTo(u[0],u[1],c[0],c[1],f[0],f[1])}}else{"spline"===o&&(n=i(n,a)),t.moveTo(n[0][0],n[0][1]),l=1;for(var d=n.length;l<d;l++)t.lineTo(n[l][0],n[l][1])}a&&t.closePath()}}},TJmX:function(t,e,a){var i=["itemStyle","borderColor"],r=["itemStyle","borderColor0"],n=["itemStyle","color"],o=["itemStyle","color0"],s={seriesType:"candlestick",plan:a("zM3Q")(),performRawSeries:!0,reset:function(t,e){if(t.getData().setVisual({legendSymbol:"roundRect",colorP:a(1,t),colorN:a(-1,t),borderColorP:s(1,t),borderColorN:s(-1,t)}),!e.isSeriesFiltered(t))return!t.pipelineContext.large&&{progress:function(t,e){var i;for(;null!=(i=t.next());){var r=e.getItemModel(i),n=e.getItemLayout(i).sign;e.setItemVisual(i,{color:a(n,r),borderColor:s(n,r)})}}};function a(t,e){return e.get(t>0?n:o)}function s(t,e){return e.get(t>0?i:r)}}};t.exports=s},TSC6:function(t,e,a){var i=a("GRew"),r=a("ENu8"),n=a("bKEA"),o=a("M5dz"),s=a("nA4W"),h=a("+vXQ"),l=Object.getOwnPropertyDescriptor;e.f=a("C61u")?l:function(t,e){if(t=n(t),e=o(e,!0),h)try{return l(t,e)}catch(t){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},TYje:function(t,e){var a={}.toString;t.exports=function(t){return a.call(t).slice(8,-1)}},Temt:function(t,e){t.exports=function(t,e,a){var i=void 0===a;switch(e.length){case 0:return i?t():t.call(a);case 1:return i?t(e[0]):t.call(a,e[0]);case 2:return i?t(e[0],e[1]):t.call(a,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(a,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(a,e[0],e[1],e[2],e[3])}return t.apply(a,e)}},Tghj:function(t,e,a){(function(t){var a;"undefined"!=typeof window?a=window.__DEV__:void 0!==t&&(a=t.__DEV__),void 0===a&&(a=!0);var i=a;e.__DEV__=i}).call(this,a("yLpj"))},TnF5:function(t,e,a){a("4Zg2")("observable")},Trx6:function(t,e,a){var i=a("TYje");t.exports=Array.isArray||function(t){return"Array"==i(t)}},U6jy:function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];for(var r in i)a.call(i,r)&&(t[r]=i[r])}return t};var a=Object.prototype.hasOwnProperty},UR8F:function(t,e,a){a("C5kU"),a("ZY/g"),t.exports=a("/NTb").f("iterator")},USwo:function(t,e,a){var i=a("7whZ"),r=a("VSTI"),n=a("nAx8"),o=a("BRsN"),s=a("nA4W"),h=function(t,e,a){var l,u,c,f=t&h.F,d=t&h.G,C=t&h.S,p=t&h.P,m=t&h.B,D=t&h.W,v=d?r:r[e]||(r[e]={}),g=v.prototype,S=d?i:C?i[e]:(i[e]||{}).prototype;for(l in d&&(a=e),a)(u=!f&&S&&void 0!==S[l])&&s(v,l)||(c=u?S[l]:a[l],v[l]=d&&"function"!=typeof S[l]?a[l]:m&&u?n(c,i):D&&S[l]==c?function(t){var e=function(e,a,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,a)}return new t(e,a,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):p&&"function"==typeof c?n(Function.call,c):c,p&&((v.virtual||(v.virtual={}))[l]=c,t&h.R&&g&&!g[l]&&o(g,l,c)))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,t.exports=h},UnBK:function(t,e,a){"use strict";var i=a("xTJ+"),r=a("xAGQ"),n=a("Lmem"),o=a("JEQr");function s(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return s(t),t.headers=t.headers||{},t.data=r(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||o.adapter)(t).then(function(e){return s(t),e.data=r(e.data,e.headers,t.transformResponse),e},function(e){return n(e)||(s(t),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},V7oC:function(t,e,a){"use strict";e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(a("SEkw"));e.default=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(t,r.key,r)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}()},VR9l:function(t,e,a){var i=a("KCsZ")([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),r={getItemStyle:function(t,e){var a=i(this,t,e),r=this.getBorderLineDash();return r&&(a.lineDash=r),a},getBorderLineDash:function(){var t=this.get("borderType");return"solid"===t||null==t?null:"dashed"===t?[5,5]:[1,1]}};t.exports=r},VSTI:function(t,e){var a=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=a)},Vi4m:function(t,e,a){var i=a("bYtY");var r=function(t){null!=t&&i.extend(this,t),this.otherDims={}};t.exports=r},VpOo:function(t,e){e.buildPath=function(t,e){var a,i,r,n,o,s=e.x,h=e.y,l=e.width,u=e.height,c=e.r;l<0&&(s+=l,l=-l),u<0&&(h+=u,u=-u),"number"==typeof c?a=i=r=n=c:c instanceof Array?1===c.length?a=i=r=n=c[0]:2===c.length?(a=r=c[0],i=n=c[1]):3===c.length?(a=c[0],i=n=c[1],r=c[2]):(a=c[0],i=c[1],r=c[2],n=c[3]):a=i=r=n=0,a+i>l&&(a*=l/(o=a+i),i*=l/o),r+n>l&&(r*=l/(o=r+n),n*=l/o),i+r>u&&(i*=u/(o=i+r),r*=u/o),a+n>u&&(a*=u/(o=a+n),n*=u/o),t.moveTo(s+a,h),t.lineTo(s+l-i,h),0!==i&&t.arc(s+l-i,h+i,i,-Math.PI/2,0),t.lineTo(s+l,h+u-r),0!==r&&t.arc(s+l-r,h+u-r,r,0,Math.PI/2),t.lineTo(s+n,h+u),0!==n&&t.arc(s+n,h+u-n,n,Math.PI/2,Math.PI),t.lineTo(s,h+a),0!==a&&t.arc(s+a,h+a,a,Math.PI,1.5*Math.PI)}},"WN+l":function(t,e,a){var i=a("bYtY"),r=a("IwbS");e.rectCoordAxisBuildSplitArea=function(t,e,a,n){var o=a.axis;if(!o.scale.isBlank()){var s=a.getModel("splitArea"),h=s.getModel("areaStyle"),l=h.get("color"),u=n.coordinateSystem.getRect(),c=o.getTicksCoords({tickModel:s,clamp:!0});if(c.length){var f=l.length,d=t.__splitAreaColors,C=i.createHashMap(),p=0;if(d)for(var m=0;m<c.length;m++){var D=d.get(c[m].tickValue);if(null!=D){p=(D+(f-1)*m)%f;break}}var v=o.toGlobalCoord(c[0].coord),g=h.getAreaStyle();for(l=i.isArray(l)?l:[l],m=1;m<c.length;m++){var S,T,I,y,x=o.toGlobalCoord(c[m].coord);o.isHorizontal()?(S=v,T=u.y,I=x-S,y=u.height,v=S+I):(S=u.x,T=v,I=u.width,v=T+(y=x-T));var w=c[m-1].tickValue;null!=w&&C.set(w,p),e.add(new r.Rect({anid:null!=w?"area_"+w:null,shape:{x:S,y:T,width:I,height:y},style:i.defaults({fill:l[p]},g),silent:!0})),p=(p+1)%f}t.__splitAreaColors=C}}},e.rectCoordAxisHandleRemove=function(t){t.__splitAreaColors=null}},"WX/U":function(t,e){t.exports=function(t,e,a,i){var r,n=0;return"boolean"!=typeof e&&(i=a,a=e,e=void 0),function(){var o=this,s=Number(new Date)-n,h=arguments;function l(){n=Number(new Date),a.apply(o,h)}i&&!r&&l(),r&&clearTimeout(r),void 0===i&&s>t?l():!0!==e&&(r=setTimeout(i?function(){r=void 0}:l,void 0===i?t-s:t))}}},WpRT:function(t,e,a){var i=a("s2er")("keys"),r=a("ixoo");t.exports=function(t){return i[t]||(i[t]=r(t))}},Wqna:function(t,e,a){a("Tghj").__DEV__;var i=a("bYtY"),r=i.isObject,n=i.each,o=i.map,s=i.indexOf,h=(i.retrieve,a("+TT/").getLayoutRect),l=a("aX7z"),u=l.createScaleByModel,c=l.ifAxisCrossZero,f=l.niceScaleExtent,d=l.estimateLabelUnionRect,C=a("y+lR"),p=a("7AJT"),m=a("IDmD"),D=a("7hqr").getStackedDimension;function v(t,e,a){return t.getCoordSysModel()===e}function g(t,e,a){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(t,e,a),this.model=t}a("jtI2");var S=g.prototype;function T(t,e,a,i){a.getAxesOnZeroOf=function(){return r?[r]:[]};var r,n=t[e],o=a.model,s=o.get("axisLine.onZero"),h=o.get("axisLine.onZeroAxisIndex");if(s){if(null!=h)I(n[h])&&(r=n[h]);else for(var l in n)if(n.hasOwnProperty(l)&&I(n[l])&&!i[u(n[l])]){r=n[l];break}r&&(i[u(r)]=!0)}function u(t){return t.dim+"_"+t.index}}function I(t){return t&&"category"!==t.type&&"time"!==t.type&&c(t)}S.type="grid",S.axisPointerEnabled=!0,S.getRect=function(){return this._rect},S.update=function(t,e){var a=this._axesMap;this._updateScale(t,this.model),n(a.x,function(t){f(t.scale,t.model)}),n(a.y,function(t){f(t.scale,t.model)});var i={};n(a.x,function(t){T(a,"y",t,i)}),n(a.y,function(t){T(a,"x",t,i)}),this.resize(this.model,e)},S.resize=function(t,e,a){var i=h(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=i;var r=this._axesList;function o(){n(r,function(t){var e=t.isHorizontal(),a=e?[0,i.width]:[0,i.height],r=t.inverse?1:0;t.setExtent(a[r],a[1-r]),function(t,e){var a=t.getExtent(),i=a[0]+a[1];t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return i-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return i-t+e}}(t,e?i.x:i.y)})}o(),!a&&t.get("containLabel")&&(n(r,function(t){if(!t.model.get("axisLabel.inside")){var e=d(t);if(e){var a=t.isHorizontal()?"height":"width",r=t.model.get("axisLabel.margin");i[a]-=e[a]+r,"top"===t.position?i.y+=e.height+r:"left"===t.position&&(i.x+=e.width+r)}}}),o())},S.getAxis=function(t,e){var a=this._axesMap[t];if(null!=a){if(null==e)for(var i in a)if(a.hasOwnProperty(i))return a[i];return a[e]}},S.getAxes=function(){return this._axesList.slice()},S.getCartesian=function(t,e){if(null!=t&&null!=e){var a="x"+t+"y"+e;return this._coordsMap[a]}r(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,n=this._coordsList;i<n.length;i++)if(n[i].getAxis("x").index===t||n[i].getAxis("y").index===e)return n[i]},S.getCartesians=function(){return this._coordsList.slice()},S.convertToPixel=function(t,e,a){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.dataToPoint(a):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(a)):null},S.convertFromPixel=function(t,e,a){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.pointToData(a):i.axis?i.axis.coordToData(i.axis.toLocalCoord(a)):null},S._findConvertTarget=function(t,e){var a,i,r=e.seriesModel,n=e.xAxisModel||r&&r.getReferringComponents("xAxis")[0],o=e.yAxisModel||r&&r.getReferringComponents("yAxis")[0],h=e.gridModel,l=this._coordsList;if(r)a=r.coordinateSystem,s(l,a)<0&&(a=null);else if(n&&o)a=this.getCartesian(n.componentIndex,o.componentIndex);else if(n)i=this.getAxis("x",n.componentIndex);else if(o)i=this.getAxis("y",o.componentIndex);else if(h){h.coordinateSystem===this&&(a=this._coordsList[0])}return{cartesian:a,axis:i}},S.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},S._initCartesian=function(t,e,a){var i={left:!1,right:!1,top:!1,bottom:!1},r={x:{},y:{}},o={x:0,y:0};if(e.eachComponent("xAxis",s("x"),this),e.eachComponent("yAxis",s("y"),this),!o.x||!o.y)return this._axesMap={},void(this._axesList=[]);function s(e){return function(a,n){if(v(a,t)){var s=a.get("position");"x"===e?"top"!==s&&"bottom"!==s&&(s=i.bottom?"top":"bottom"):"left"!==s&&"right"!==s&&(s=i.left?"right":"left"),i[s]=!0;var h=new p(e,u(a),[0,0],a.get("type"),s),l="category"===h.type;h.onBand=l&&a.get("boundaryGap"),h.inverse=a.get("inverse"),a.axis=h,h.model=a,h.grid=this,h.index=n,this._axesList.push(h),r[e][n]=h,o[e]++}}}this._axesMap=r,n(r.x,function(e,a){n(r.y,function(i,r){var n="x"+a+"y"+r,o=new C(n);o.grid=this,o.model=t,this._coordsMap[n]=o,this._coordsList.push(o),o.addAxis(e),o.addAxis(i)},this)},this)},S._updateScale=function(t,e){function a(t,e,a){n(t.mapDimension(e.dim,!0),function(a){e.scale.unionExtentFromData(t,D(t,a))})}n(this._axesList,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeries(function(i){if(w(i)){var r=x(i,t),n=r[0],o=r[1];if(!v(n,e)||!v(o,e))return;var s=this.getCartesian(n.componentIndex,o.componentIndex),h=i.getData(),l=s.getAxis("x"),u=s.getAxis("y");"list"===h.type&&(a(h,l,i),a(h,u,i))}},this)},S.getTooltipAxes=function(t){var e=[],a=[];return n(this.getCartesians(),function(i){var r=null!=t&&"auto"!==t?i.getAxis(t):i.getBaseAxis(),n=i.getOtherAxis(r);s(e,r)<0&&e.push(r),s(a,n)<0&&a.push(n)}),{baseAxes:e,otherAxes:a}};var y=["xAxis","yAxis"];function x(t,e){return o(y,function(e){return t.getReferringComponents(e)[0]})}function w(t){return"cartesian2d"===t.get("coordinateSystem")}g.create=function(t,e){var a=[];return t.eachComponent("grid",function(i,r){var n=new g(i,t,e);n.name="grid_"+r,n.resize(i,e,!0),i.coordinateSystem=n,a.push(n)}),t.eachSeries(function(t){if(w(t)){var e=x(t),a=e[0],i=e[1],r=a.getCoordSysModel().coordinateSystem;t.coordinateSystem=r.getCartesian(a.componentIndex,i.componentIndex)}}),a},g.dimensions=g.prototype.dimensions=C.prototype.dimensions,m.register("cartesian2d",g);var F=g;t.exports=F},XLeT:function(t,e,a){"use strict";var i=a("USwo"),r=a("8sL3"),n=a("wqPz");i(i.S,"Promise",{try:function(t){var e=r.f(this),a=n(t);return(a.e?e.reject:e.resolve)(a.v),e.promise}})},Xmg4:function(t,e,a){var i=a("bYtY"),r=a("LPTA").devicePixelRatio,n=a("K2GJ"),o=a("3C/r");function s(){return!1}function h(t,e,a){var r=i.createCanvas(),n=e.getWidth(),o=e.getHeight(),s=r.style;return s&&(s.position="absolute",s.left=0,s.top=0,s.width=n+"px",s.height=o+"px",r.setAttribute("data-zr-dom-id",t)),r.width=n*a,r.height=o*a,r}var l=function(t,e,a){var n;a=a||r,"string"==typeof t?n=h(t,e,a):i.isObject(t)&&(t=(n=t).id),this.id=t,this.dom=n;var o=n.style;o&&(n.onselectstart=s,o["-webkit-user-select"]="none",o["user-select"]="none",o["-webkit-touch-callout"]="none",o["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",o.padding=0,o.margin=0,o["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=a};l.prototype={constructor:l,__dirty:!0,__used:!1,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=h("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},resize:function(t,e){var a=this.dpr,i=this.dom,r=i.style,n=this.domBack;r&&(r.width=t+"px",r.height=e+"px"),i.width=t*a,i.height=e*a,n&&(n.width=t*a,n.height=e*a,1!==a&&this.ctxBack.scale(a,a))},clear:function(t,e){var a,i=this.dom,r=this.ctx,s=i.width,h=i.height,l=(e=e||this.clearColor,this.motionBlur&&!t),u=this.lastFrameAlpha,c=this.dpr;(l&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,s/c,h/c)),r.clearRect(0,0,s,h),e&&"transparent"!==e)&&(e.colorStops?(a=e.__canvasGradient||n.getGradient(r,e,{x:0,y:0,width:s,height:h}),e.__canvasGradient=a):e.image&&(a=o.prototype.getCanvasPattern.call(e,r)),r.save(),r.fillStyle=a||e,r.fillRect(0,0,s,h),r.restore());if(l){var f=this.domBack;r.save(),r.globalAlpha=u,r.drawImage(f,0,0,s,h),r.restore()}}};var u=l;t.exports=u},Xnb7:function(t,e,a){var i=new(a("1RvN"))(50);function r(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var a=t.pending[e],i=a.cb;i&&i(this,a.cbPayload),a.hostEl.dirty()}t.pending.length=0}function n(t){return t&&t.width&&t.height}e.findExistImage=function(t){if("string"==typeof t){var e=i.get(t);return e&&e.image}return t},e.createOrUpdateImage=function(t,e,a,o,s){if(t){if("string"==typeof t){if(e&&e.__zrImageSrc===t||!a)return e;var h=i.get(t),l={hostEl:a,cb:o,cbPayload:s};return h?!n(e=h.image)&&h.pending.push(l):((e=new Image).onload=e.onerror=r,i.put(t,e.__cachedImgObj={image:e,pending:[l]}),e.src=e.__zrImageSrc=t),e}return t}return e},e.isImageReady=n},XpcN:function(t,e,a){a("Tghj").__DEV__;var i=a("ProS"),r=a("bYtY"),n=a("oVpE").createSymbol,o=a("IwbS"),s=a("eRkO").makeBackground,h=a("+TT/"),l=r.curry,u=r.each,c=o.Group,f=i.extendComponentView({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new c),this._backgroundEl,this.group.add(this._selectorGroup=new c),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(t,e,a){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var n=t.get("align"),o=t.get("orient");n&&"auto"!==n||(n="right"===t.get("left")&&"vertical"===o?"right":"left");var l=t.get("selector",!0),u=t.get("selectorPosition",!0);!l||u&&"auto"!==u||(u="horizontal"===o?"end":"start"),this.renderInner(n,t,e,a,l,o,u);var c=t.getBoxLayoutParams(),f={width:a.getWidth(),height:a.getHeight()},d=t.get("padding"),C=h.getLayoutRect(c,f,d),p=this.layoutInner(t,n,C,i,l,u),m=h.getLayoutRect(r.defaults({width:p.width,height:p.height},c),f,d);this.group.attr("position",[m.x-p.x,m.y-p.y]),this.group.add(this._backgroundEl=s(p,t))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(t,e,a,i,n,o,s){var h=this.getContentGroup(),f=r.createHashMap(),d=e.get("selectedMode"),D=[];a.eachRawSeries(function(t){!t.get("legendHoverLink")&&D.push(t.id)}),u(e.getData(),function(r,n){var o=r.get("name");if(this.newlineDisabled||""!==o&&"\n"!==o){var s=a.getSeriesByName(o)[0];if(!f.get(o))if(s){var u=s.getData(),v=u.getVisual("color"),g=u.getVisual("borderColor");"function"==typeof v&&(v=v(s.getDataParams(0))),"function"==typeof g&&(g=g(s.getDataParams(0)));var S=u.getVisual("legendSymbol")||"roundRect",T=u.getVisual("symbol");this._createItem(o,n,r,e,S,T,t,v,g,d).on("click",l(C,o,null,i,D)).on("mouseover",l(p,s.name,null,i,D)).on("mouseout",l(m,s.name,null,i,D)),f.set(o,!0)}else a.eachRawSeries(function(a){if(!f.get(o)&&a.legendVisualProvider){var s=a.legendVisualProvider;if(!s.containName(o))return;var h=s.indexOfName(o),u=s.getItemVisual(h,"color"),c=s.getItemVisual(h,"borderColor");this._createItem(o,n,r,e,"roundRect",null,t,u,c,d).on("click",l(C,null,o,i,D)).on("mouseover",l(p,null,o,i,D)).on("mouseout",l(m,null,o,i,D)),f.set(o,!0)}},this)}else h.add(new c({newline:!0}))},this),n&&this._createSelector(n,e,i,o,s)},_createSelector:function(t,e,a,i,r){var n=this.getSelectorGroup();u(t,function(t){!function(t){var i=t.type,r=new o.Text({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){a.dispatchAction({type:"all"===i?"legendAllSelect":"legendInverseSelect"})}});n.add(r);var s=e.getModel("selectorLabel"),h=e.getModel("emphasis.selectorLabel");o.setLabelStyle(r.style,r.hoverStyle={},s,h,{defaultText:t.title,isRectText:!1}),o.setHoverStyle(r)}(t)})},_createItem:function(t,e,a,i,s,h,l,u,f,C){var p=i.get("itemWidth"),m=i.get("itemHeight"),D=i.get("inactiveColor"),v=i.get("inactiveBorderColor"),g=i.get("symbolKeepAspect"),S=i.getModel("itemStyle"),T=i.isSelected(t),I=new c,y=a.getModel("textStyle"),x=a.get("icon"),w=a.getModel("tooltip"),F=w.parentModel,E=n(s=x||s,0,0,p,m,T?u:D,null==g||g);if(I.add(d(E,s,S,f,v,T)),!x&&h&&(h!==s||"none"===h)){var b=.8*m;"none"===h&&(h="circle");var L=n(h,(p-b)/2,(m-b)/2,b,b,T?u:D,null==g||g);I.add(d(L,h,S,f,v,T))}var M="left"===l?p+5:-5,A=l,O=i.get("formatter"),N=t;"string"==typeof O&&O?N=O.replace("{name}",null!=t?t:""):"function"==typeof O&&(N=O(t)),I.add(new o.Text({style:o.setTextStyle({},y,{text:N,x:M,y:m/2,textFill:T?y.getTextColor():D,textAlign:A,textVerticalAlign:"middle"})}));var P=new o.Rect({shape:I.getBoundingRect(),invisible:!0,tooltip:w.get("show")?r.extend({content:t,formatter:F.get("formatter",!0)||function(){return t},formatterParams:{componentType:"legend",legendIndex:i.componentIndex,name:t,$vars:["name"]}},w.option):null});return I.add(P),I.eachChild(function(t){t.silent=!0}),P.silent=!C,this.getContentGroup().add(I),o.setHoverStyle(I),I.__legendDataIndex=e,I},layoutInner:function(t,e,a,i,r,n){var o=this.getContentGroup(),s=this.getSelectorGroup();h.box(t.get("orient"),o,t.get("itemGap"),a.width,a.height);var l=o.getBoundingRect(),u=[-l.x,-l.y];if(r){h.box("horizontal",s,t.get("selectorItemGap",!0));var c=s.getBoundingRect(),f=[-c.x,-c.y],d=t.get("selectorButtonGap",!0),C=t.getOrient().index,p=0===C?"width":"height",m=0===C?"height":"width",D=0===C?"y":"x";"end"===n?f[C]+=l[p]+d:u[C]+=c[p]+d,f[1-C]+=l[m]/2-c[m]/2,s.attr("position",f),o.attr("position",u);var v={x:0,y:0};return v[p]=l[p]+d+c[p],v[m]=Math.max(l[m],c[m]),v[D]=Math.min(0,c[D]+f[1-C]),v}return o.attr("position",u),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function d(t,e,a,i,r,n){var o;return"line"!==e&&e.indexOf("empty")<0?(o=a.getItemStyle(),t.style.stroke=i,n||(o.stroke=r)):o=a.getItemStyle(["borderWidth","borderColor"]),t.setStyle(o)}function C(t,e,a,i){m(t,e,a,i),a.dispatchAction({type:"legendToggleSelect",name:null!=t?t:e}),p(t,e,a,i)}function p(t,e,a,i){var r=a.getZr().storage.getDisplayList()[0];r&&r.useHoverLayer||a.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:i})}function m(t,e,a,i){var r=a.getZr().storage.getDisplayList()[0];r&&r.useHoverLayer||a.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:i})}t.exports=f},YEIV:function(t,e,a){"use strict";e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(a("SEkw"));e.default=function(t,e,a){return e in t?(0,i.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},YH21:function(t,e,a){var i=a("H6uX");e.Dispatcher=i;var r=a("ItGF"),n=a("Ze12"),o=n.isCanvasEl,s=n.transformCoordWithViewport,h="undefined"!=typeof window&&!!window.addEventListener,l=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,u=[];function c(t,e,a,i){return a=a||{},i||!r.canvasSupported?f(t,e,a):r.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(a.zrX=e.layerX,a.zrY=e.layerY):null!=e.offsetX?(a.zrX=e.offsetX,a.zrY=e.offsetY):f(t,e,a),a}function f(t,e,a){if(r.domSupported&&t.getBoundingClientRect){var i=e.clientX,n=e.clientY;if(o(t)){var h=t.getBoundingClientRect();return a.zrX=i-h.left,void(a.zrY=n-h.top)}if(s(u,t,i,n))return a.zrX=u[0],void(a.zrY=u[1])}a.zrX=a.zrY=0}function d(t){return t||window.event}var C=h?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};e.clientToLocal=c,e.getNativeEvent=d,e.normalizeEvent=function(t,e,a){if(null!=(e=d(e)).zrX)return e;var i=e.type;if(i&&i.indexOf("touch")>=0){var r="touchend"!==i?e.targetTouches[0]:e.changedTouches[0];r&&c(t,r,e,a)}else c(t,e,e,a),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var n=e.button;return null==e.which&&void 0!==n&&l.test(e.type)&&(e.which=1&n?1:2&n?3:4&n?2:0),e},e.addEventListener=function(t,e,a,i){h?t.addEventListener(e,a,i):t.attachEvent("on"+e,a)},e.removeEventListener=function(t,e,a,i){h?t.removeEventListener(e,a,i):t.detachEvent("on"+e,a)},e.stop=C,e.isMiddleOrRightButtonOnMouseUpDown=function(t){return 2===t.which||3===t.which},e.notLeftMouse=function(t){return t.which>1}},YXkt:function(t,e,a){a("Tghj").__DEV__;var i=a("bYtY"),r=a("Qxkt"),n=a("gPAo"),o=a("7G+c"),s=a("KxfA"),h=s.defaultDimValueGetters,l=s.DefaultDataProvider,u=a("L0Ub").summarizeDimensions,c=a("Vi4m"),f=i.isObject,d=-1,C="e\0\0",p={float:"undefined"==typeof Float64Array?Array:Float64Array,int:"undefined"==typeof Int32Array?Array:Int32Array,ordinal:Array,number:Array,time:Array},m="undefined"==typeof Uint32Array?Array:Uint32Array,D="undefined"==typeof Int32Array?Array:Int32Array,v="undefined"==typeof Uint16Array?Array:Uint16Array;function g(t){return t._rawCount>65535?m:v}function S(t){var e=t.constructor;return e===Array?t.slice():new e(t)}var T=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],I=["_extent","_approximateExtent","_rawExtent"];function y(t,e){i.each(T.concat(e.__wrappedMethods||[]),function(a){e.hasOwnProperty(a)&&(t[a]=e[a])}),t.__wrappedMethods=e.__wrappedMethods,i.each(I,function(a){t[a]=i.clone(e[a])}),t._calculationInfo=i.extend(e._calculationInfo)}var x=function(t,e){t=t||["x","y"];for(var a={},r=[],n={},o=0;o<t.length;o++){var s=t[o];i.isString(s)?s=new c({name:s}):s instanceof c||(s=new c(s));var h=s.name;s.type=s.type||"float",s.coordDim||(s.coordDim=h,s.coordDimIndex=0),s.otherDims=s.otherDims||{},r.push(h),a[h]=s,s.index=o,s.createInvertedIndices&&(n[h]=[])}this.dimensions=r,this._dimensionInfos=a,this.hostModel=e,this.dataType,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawData,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=u(this),this._invertedIndicesMap=n,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},w=x.prototype;function F(t,e,a,i,r){var n=p[e.type],o=i-1,s=e.name,h=t[s][o];if(h&&h.length<a){for(var l=new n(Math.min(r-o*a,a)),u=0;u<h.length;u++)l[u]=h[u];t[s][o]=l}for(var c=i*a;c<r;c+=a)t[s].push(new n(Math.min(r-c,a)))}function E(t){var e=t._invertedIndicesMap;i.each(e,function(a,i){var r=t._dimensionInfos[i].ordinalMeta;if(r){a=e[i]=new D(r.categories.length);for(var n=0;n<a.length;n++)a[n]=d;for(n=0;n<t._count;n++)a[t.get(i,n)]=n}})}function b(t,e,a){var i;if(null!=e){var r=t._chunkSize,n=Math.floor(a/r),o=a%r,s=t.dimensions[e],h=t._storage[s][n];if(h){i=h[o];var l=t._dimensionInfos[s].ordinalMeta;l&&l.categories.length&&(i=l.categories[i])}}return i}function L(t){return t}function M(t){return t<this._count&&t>=0?this._indices[t]:-1}function A(t,e){var a=t._idList[e];return null==a&&(a=b(t,t._idDimIdx,e)),null==a&&(a=C+e),a}function O(t){return i.isArray(t)||(t=[t]),t}function N(t,e){var a=t.dimensions,r=new x(i.map(a,t.getDimensionInfo,t),t.hostModel);y(r,t);for(var n=r._storage={},o=t._storage,s=0;s<a.length;s++){var h=a[s];o[h]&&(i.indexOf(e,h)>=0?(n[h]=P(o[h]),r._rawExtent[h]=R(),r._extent[h]=null):n[h]=o[h])}return r}function P(t){for(var e=new Array(t.length),a=0;a<t.length;a++)e[a]=S(t[a]);return e}function R(){return[1/0,-1/0]}w.type="list",w.hasItemOption=!0,w.getDimension=function(t){return"number"!=typeof t&&(isNaN(t)||this._dimensionInfos.hasOwnProperty(t))||(t=this.dimensions[t]),t},w.getDimensionInfo=function(t){return this._dimensionInfos[this.getDimension(t)]},w.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},w.mapDimension=function(t,e){var a=this._dimensionsSummary;if(null==e)return a.encodeFirstDimNotExtra[t];var i=a.encode[t];return!0===e?(i||[]).slice():i&&i[e]},w.initData=function(t,e,a){(o.isInstance(t)||i.isArrayLike(t))&&(t=new l(t,this.dimensions.length)),this._rawData=t,this._storage={},this._indices=null,this._nameList=e||[],this._idList=[],this._nameRepeatCount={},a||(this.hasItemOption=!1),this.defaultDimValueGetter=h[this._rawData.getSource().sourceFormat],this._dimValueGetter=a=a||this.defaultDimValueGetter,this._dimValueGetterArrayRows=h.arrayRows,this._rawExtent={},this._initDataFromProvider(0,t.count()),t.pure&&(this.hasItemOption=!1)},w.getProvider=function(){return this._rawData},w.appendData=function(t){var e=this._rawData,a=this.count();e.appendData(t);var i=e.count();e.persistent||(i+=a),this._initDataFromProvider(a,i)},w.appendValues=function(t,e){for(var a=this._chunkSize,i=this._storage,r=this.dimensions,n=r.length,o=this._rawExtent,s=this.count(),h=s+Math.max(t.length,e?e.length:0),l=this._chunkCount,u=0;u<n;u++){o[D=r[u]]||(o[D]=R()),i[D]||(i[D]=[]),F(i,this._dimensionInfos[D],a,l,h),this._chunkCount=i[D].length}for(var c=new Array(n),f=s;f<h;f++){for(var d=f-s,C=Math.floor(f/a),p=f%a,m=0;m<n;m++){var D=r[m],v=this._dimValueGetterArrayRows(t[d]||c,D,d,m);i[D][C][p]=v;var g=o[D];v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}e&&(this._nameList[f]=e[d])}this._rawCount=this._count=h,this._extent={},E(this)},w._initDataFromProvider=function(t,e){if(!(t>=e)){for(var a,i=this._chunkSize,r=this._rawData,n=this._storage,o=this.dimensions,s=o.length,h=this._dimensionInfos,l=this._nameList,u=this._idList,c=this._rawExtent,f=this._nameRepeatCount={},d=this._chunkCount,C=0;C<s;C++){c[T=o[C]]||(c[T]=R());var p=h[T];0===p.otherDims.itemName&&(a=this._nameDimIdx=C),0===p.otherDims.itemId&&(this._idDimIdx=C),n[T]||(n[T]=[]),F(n,p,i,d,e),this._chunkCount=n[T].length}for(var m=new Array(s),D=t;D<e;D++){m=r.getItem(D,m);for(var v=Math.floor(D/i),g=D%i,S=0;S<s;S++){var T,I=n[T=o[S]][v],y=this._dimValueGetter(m,T,D,S);I[g]=y;var x=c[T];y<x[0]&&(x[0]=y),y>x[1]&&(x[1]=y)}if(!r.pure){var w=l[D];if(m&&null==w)if(null!=m.name)l[D]=w=m.name;else if(null!=a){var b=o[a],L=n[b][v];if(L){w=L[g];var M=h[b].ordinalMeta;M&&M.categories.length&&(w=M.categories[w])}}var A=null==m?null:m.id;null==A&&null!=w&&(f[w]=f[w]||0,A=w,f[w]>0&&(A+="__ec__"+f[w]),f[w]++),null!=A&&(u[D]=A)}}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=e,this._extent={},E(this)}},w.count=function(){return this._count},w.getIndices=function(){var t=this._indices;if(t){var e=t.constructor,a=this._count;if(e===Array){r=new e(a);for(var i=0;i<a;i++)r[i]=t[i]}else r=new e(t.buffer,0,a)}else{var r=new(e=g(this))(this.count());for(i=0;i<r.length;i++)r[i]=i}return r},w.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var a=this._storage;if(!a[t])return NaN;e=this.getRawIndex(e);var i=Math.floor(e/this._chunkSize),r=e%this._chunkSize;return a[t][i][r]},w.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var a=this._storage[t];if(!a)return NaN;var i=Math.floor(e/this._chunkSize),r=e%this._chunkSize;return a[i][r]},w._getFast=function(t,e){var a=Math.floor(e/this._chunkSize),i=e%this._chunkSize;return this._storage[t][a][i]},w.getValues=function(t,e){var a=[];i.isArray(t)||(e=t,t=this.dimensions);for(var r=0,n=t.length;r<n;r++)a.push(this.get(t[r],e));return a},w.hasValue=function(t){for(var e=this._dimensionsSummary.dataDimsOnCoord,a=0,i=e.length;a<i;a++)if(isNaN(this.get(e[a],t)))return!1;return!0},w.getDataExtent=function(t){t=this.getDimension(t);var e=this._storage[t],a=R();if(!e)return a;var i,r=this.count();if(!this._indices)return this._rawExtent[t].slice();if(i=this._extent[t])return i.slice();for(var n=(i=a)[0],o=i[1],s=0;s<r;s++){var h=this._getFast(t,this.getRawIndex(s));h<n&&(n=h),h>o&&(o=h)}return i=[n,o],this._extent[t]=i,i},w.getApproximateExtent=function(t){return t=this.getDimension(t),this._approximateExtent[t]||this.getDataExtent(t)},w.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},w.getCalculationInfo=function(t){return this._calculationInfo[t]},w.setCalculationInfo=function(t,e){f(t)?i.extend(this._calculationInfo,t):this._calculationInfo[t]=e},w.getSum=function(t){var e=0;if(this._storage[t])for(var a=0,i=this.count();a<i;a++){var r=this.get(t,a);isNaN(r)||(e+=r)}return e},w.getMedian=function(t){var e=[];this.each(t,function(t,a){isNaN(t)||e.push(t)});var a=[].concat(e).sort(function(t,e){return t-e}),i=this.count();return 0===i?0:i%2==1?a[(i-1)/2]:(a[i/2]+a[i/2-1])/2},w.rawIndexOf=function(t,e){var a=(t&&this._invertedIndicesMap[t])[e];return null==a||isNaN(a)?d:a},w.indexOfName=function(t){for(var e=0,a=this.count();e<a;e++)if(this.getName(e)===t)return e;return-1},w.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,a=e[t];if(null!=a&&a<this._count&&a===t)return t;for(var i=0,r=this._count-1;i<=r;){var n=(i+r)/2|0;if(e[n]<t)i=n+1;else{if(!(e[n]>t))return n;r=n-1}}return-1},w.indicesOfNearest=function(t,e,a){var i=[];if(!this._storage[t])return i;null==a&&(a=1/0);for(var r=1/0,n=-1,o=0,s=0,h=this.count();s<h;s++){var l=e-this.get(t,s),u=Math.abs(l);u<=a&&((u<r||u===r&&l>=0&&n<0)&&(r=u,n=l,o=0),l===n&&(i[o++]=s))}return i.length=o,i},w.getRawIndex=L,w.getRawDataItem=function(t){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(t));for(var e=[],a=0;a<this.dimensions.length;a++){var i=this.dimensions[a];e.push(this.get(i,t))}return e},w.getName=function(t){var e=this.getRawIndex(t);return this._nameList[e]||b(this,this._nameDimIdx,e)||""},w.getId=function(t){return A(this,this.getRawIndex(t))},w.each=function(t,e,a,r){"use strict";if(this._count){"function"==typeof t&&(r=a,a=e,e=t,t=[]),a=a||r||this;for(var n=(t=i.map(O(t),this.getDimension,this)).length,o=0;o<this.count();o++)switch(n){case 0:e.call(a,o);break;case 1:e.call(a,this.get(t[0],o),o);break;case 2:e.call(a,this.get(t[0],o),this.get(t[1],o),o);break;default:for(var s=0,h=[];s<n;s++)h[s]=this.get(t[s],o);h[s]=o,e.apply(a,h)}}},w.filterSelf=function(t,e,a,r){"use strict";if(this._count){"function"==typeof t&&(r=a,a=e,e=t,t=[]),a=a||r||this,t=i.map(O(t),this.getDimension,this);for(var n=this.count(),o=new(g(this))(n),s=[],h=t.length,l=0,u=t[0],c=0;c<n;c++){var f,d=this.getRawIndex(c);if(0===h)f=e.call(a,c);else if(1===h){var C=this._getFast(u,d);f=e.call(a,C,c)}else{for(var p=0;p<h;p++)s[p]=this._getFast(u,d);s[p]=c,f=e.apply(a,s)}f&&(o[l++]=d)}return l<n&&(this._indices=o),this._count=l,this._extent={},this.getRawIndex=this._indices?M:L,this}},w.selectRange=function(t){"use strict";if(this._count){var e=[];for(var a in t)t.hasOwnProperty(a)&&e.push(a);var i=e.length;if(i){var r=this.count(),n=new(g(this))(r),o=0,s=e[0],h=t[s][0],l=t[s][1],u=!1;if(!this._indices){var c=0;if(1===i){for(var f=this._storage[e[0]],d=0;d<this._chunkCount;d++)for(var C=f[d],p=Math.min(this._count-d*this._chunkSize,this._chunkSize),m=0;m<p;m++){((I=C[m])>=h&&I<=l||isNaN(I))&&(n[o++]=c),c++}u=!0}else if(2===i){f=this._storage[s];var D=this._storage[e[1]],v=t[e[1]][0],S=t[e[1]][1];for(d=0;d<this._chunkCount;d++){C=f[d];var T=D[d];for(p=Math.min(this._count-d*this._chunkSize,this._chunkSize),m=0;m<p;m++){var I=C[m],y=T[m];(I>=h&&I<=l||isNaN(I))&&(y>=v&&y<=S||isNaN(y))&&(n[o++]=c),c++}}u=!0}}if(!u)if(1===i)for(m=0;m<r;m++){var x=this.getRawIndex(m);((I=this._getFast(s,x))>=h&&I<=l||isNaN(I))&&(n[o++]=x)}else for(m=0;m<r;m++){var w=!0;for(x=this.getRawIndex(m),d=0;d<i;d++){var F=e[d];((I=this._getFast(a,x))<t[F][0]||I>t[F][1])&&(w=!1)}w&&(n[o++]=this.getRawIndex(m))}return o<r&&(this._indices=n),this._count=o,this._extent={},this.getRawIndex=this._indices?M:L,this}}},w.mapArray=function(t,e,a,i){"use strict";"function"==typeof t&&(i=a,a=e,e=t,t=[]),a=a||i||this;var r=[];return this.each(t,function(){r.push(e&&e.apply(this,arguments))},a),r},w.map=function(t,e,a,r){"use strict";a=a||r||this;var n=N(this,t=i.map(O(t),this.getDimension,this));n._indices=this._indices,n.getRawIndex=n._indices?M:L;for(var o=n._storage,s=[],h=this._chunkSize,l=t.length,u=this.count(),c=[],f=n._rawExtent,d=0;d<u;d++){for(var C=0;C<l;C++)c[C]=this.get(t[C],d);c[l]=d;var p=e&&e.apply(a,c);if(null!=p){"object"!=typeof p&&(s[0]=p,p=s);for(var m=this.getRawIndex(d),D=Math.floor(m/h),v=m%h,g=0;g<p.length;g++){var S=t[g],T=p[g],I=f[S],y=o[S];y&&(y[D][v]=T),T<I[0]&&(I[0]=T),T>I[1]&&(I[1]=T)}}}return n},w.downSample=function(t,e,a,i){for(var r=N(this,[t]),n=r._storage,o=[],s=Math.floor(1/e),h=n[t],l=this.count(),u=this._chunkSize,c=r._rawExtent[t],f=new(g(this))(l),d=0,C=0;C<l;C+=s){s>l-C&&(s=l-C,o.length=s);for(var p=0;p<s;p++){var m=this.getRawIndex(C+p),D=Math.floor(m/u),v=m%u;o[p]=h[D][v]}var S=a(o),T=this.getRawIndex(Math.min(C+i(o,S)||0,l-1)),I=T%u;h[Math.floor(T/u)][I]=S,S<c[0]&&(c[0]=S),S>c[1]&&(c[1]=S),f[d++]=T}return r._count=d,r._indices=f,r.getRawIndex=M,r},w.getItemModel=function(t){var e=this.hostModel;return new r(this.getRawDataItem(t),e,e&&e.ecModel)},w.diff=function(t){var e=this;return new n(t?t.getIndices():[],this.getIndices(),function(e){return A(t,e)},function(t){return A(e,t)})},w.getVisual=function(t){var e=this._visual;return e&&e[t]},w.setVisual=function(t,e){if(f(t))for(var a in t)t.hasOwnProperty(a)&&this.setVisual(a,t[a]);else this._visual=this._visual||{},this._visual[t]=e},w.setLayout=function(t,e){if(f(t))for(var a in t)t.hasOwnProperty(a)&&this.setLayout(a,t[a]);else this._layout[t]=e},w.getLayout=function(t){return this._layout[t]},w.getItemLayout=function(t){return this._itemLayouts[t]},w.setItemLayout=function(t,e,a){this._itemLayouts[t]=a?i.extend(this._itemLayouts[t]||{},e):e},w.clearItemLayouts=function(){this._itemLayouts.length=0},w.getItemVisual=function(t,e,a){var i=this._itemVisuals[t],r=i&&i[e];return null!=r||a?r:this.getVisual(e)},w.setItemVisual=function(t,e,a){var i=this._itemVisuals[t]||{},r=this.hasItemVisual;if(this._itemVisuals[t]=i,f(e))for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n],r[n]=!0);else i[e]=a,r[e]=!0},w.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}};var _=function(t){t.seriesIndex=this.seriesIndex,t.dataIndex=this.dataIndex,t.dataType=this.dataType};w.setItemGraphicEl=function(t,e){var a=this.hostModel;e&&(e.dataIndex=t,e.dataType=this.dataType,e.seriesIndex=a&&a.seriesIndex,"group"===e.type&&e.traverse(_,e)),this._graphicEls[t]=e},w.getItemGraphicEl=function(t){return this._graphicEls[t]},w.eachItemGraphicEl=function(t,e){i.each(this._graphicEls,function(a,i){a&&t&&t.call(e,a,i)})},w.cloneShallow=function(t){if(!t){var e=i.map(this.dimensions,this.getDimensionInfo,this);t=new x(e,this.hostModel)}if(t._storage=this._storage,y(t,this),this._indices){var a=this._indices.constructor;t._indices=new a(this._indices)}else t._indices=null;return t.getRawIndex=t._indices?M:L,t},w.wrapMethod=function(t,e){var a=this[t];"function"==typeof a&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=a.apply(this,arguments);return e.apply(this,[t].concat(i.slice(arguments)))})},w.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],w.CHANGABLE_METHODS=["filterSelf","selectRange"];var B=x;t.exports=B},YgsL:function(t,e,a){var i=a("QBsz").distance;function r(t,e,a,i,r,n,o){var s=.5*(a-t),h=.5*(i-e);return(2*(e-a)+s+h)*o+(-3*(e-a)-2*s-h)*n+s*r+e}t.exports=function(t,e){for(var a=t.length,n=[],o=0,s=1;s<a;s++)o+=i(t[s-1],t[s]);var h=o/2;for(h=h<a?a:h,s=0;s<h;s++){var l,u,c,f=s/(h-1)*(e?a:a-1),d=Math.floor(f),C=f-d,p=t[d%a];e?(l=t[(d-1+a)%a],u=t[(d+1)%a],c=t[(d+2)%a]):(l=t[0===d?d:d-1],u=t[d>a-2?a-1:d+1],c=t[d>a-3?a-1:d+2]);var m=C*C,D=C*m;n.push([r(l[0],p[0],u[0],c[0],C,m,D),r(l[1],p[1],u[1],c[1],C,m,D)])}return n}},Yl7c:function(t,e,a){a("Tghj").__DEV__;var i=a("bYtY"),r=".",n="___EC__COMPONENT__CONTAINER___";function o(t){var e={main:"",sub:""};return t&&(t=t.split(r),e.main=t[0]||"",e.sub=t[1]||""),e}var s=0;function h(t,e){var a=i.slice(arguments,2);return this.superClass.prototype[e].apply(t,a)}function l(t,e,a){return this.superClass.prototype[e].apply(t,a)}e.parseClassType=o,e.enableClassExtend=function(t,e){t.$constructor=t,t.extend=function(t){var e=this,a=function(){t.$constructor?t.$constructor.apply(this,arguments):e.apply(this,arguments)};return i.extend(a.prototype,t),a.extend=this.extend,a.superCall=h,a.superApply=l,i.inherits(a,this),a.superClass=e,a}},e.enableClassCheck=function(t){var e=["__\0is_clz",s++,Math.random().toFixed(3)].join("_");t.prototype[e]=!0,t.isInstance=function(t){return!(!t||!t[e])}},e.enableClassManagement=function(t,e){e=e||{};var a={};if(t.registerClass=function(t,e){return e&&(function(t){i.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}(e),(e=o(e)).sub?e.sub!==n&&((function(t){var e=a[t.main];return e&&e[n]||((e=a[t.main]={})[n]=!0),e}(e))[e.sub]=t):a[e.main]=t),t},t.getClass=function(t,e,i){var r=a[t];if(r&&r[n]&&(r=e?r[e]:null),i&&!r)throw new Error(e?"Component "+t+"."+(e||"")+" not exists. Load it first.":t+".type should be specified.");return r},t.getClassesByMainType=function(t){t=o(t);var e=[],r=a[t.main];return r&&r[n]?i.each(r,function(t,a){a!==n&&e.push(t)}):e.push(r),e},t.hasClass=function(t){return t=o(t),!!a[t.main]},t.getAllClassMainTypes=function(){var t=[];return i.each(a,function(e,a){t.push(a)}),t},t.hasSubTypes=function(t){t=o(t);var e=a[t.main];return e&&e[n]},t.parseClassType=o,e.registerWhenExtend){var r=t.extend;r&&(t.extend=function(e){var a=r.call(this,e);return t.registerClass(a,e.type)})}return t},e.setReadOnly=function(t,e){}},Ynxi:function(t,e,a){var i=a("bYtY"),r=a("ProS"),n=a("IwbS"),o=a("+TT/").getLayoutRect,s=a("7aKB").windowOpen;r.extendComponentModel({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),r.extendComponentView({type:"title",render:function(t,e,a){if(this.group.removeAll(),t.get("show")){var r=this.group,h=t.getModel("textStyle"),l=t.getModel("subtextStyle"),u=t.get("textAlign"),c=i.retrieve2(t.get("textBaseline"),t.get("textVerticalAlign")),f=new n.Text({style:n.setTextStyle({},h,{text:t.get("text"),textFill:h.getTextColor()},{disableBox:!0}),z2:10}),d=f.getBoundingRect(),C=t.get("subtext"),p=new n.Text({style:n.setTextStyle({},l,{text:C,textFill:l.getTextColor(),y:d.height+t.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),m=t.get("link"),D=t.get("sublink"),v=t.get("triggerEvent",!0);f.silent=!m&&!v,p.silent=!D&&!v,m&&f.on("click",function(){s(m,"_"+t.get("target"))}),D&&p.on("click",function(){s(D,"_"+t.get("subtarget"))}),f.eventData=p.eventData=v?{componentType:"title",componentIndex:t.componentIndex}:null,r.add(f),C&&r.add(p);var g=r.getBoundingRect(),S=t.getBoxLayoutParams();S.width=g.width,S.height=g.height;var T=o(S,{width:a.getWidth(),height:a.getHeight()},t.get("padding"));u||("middle"===(u=t.get("left")||t.get("right"))&&(u="center"),"right"===u?T.x+=T.width:"center"===u&&(T.x+=T.width/2)),c||("center"===(c=t.get("top")||t.get("bottom"))&&(c="middle"),"bottom"===c?T.y+=T.height:"middle"===c&&(T.y+=T.height/2),c=c||"top"),r.attr("position",[T.x,T.y]);var I={textAlign:u,textVerticalAlign:c};f.setStyle(I),p.setStyle(I),g=r.getBoundingRect();var y=T.margin,x=t.getItemStyle(["color","opacity"]);x.fill=t.get("backgroundColor");var w=new n.Rect({shape:{x:g.x-y[3],y:g.y-y[0],width:g.width+y[1]+y[3],height:g.height+y[0]+y[2],r:t.get("borderRadius")},style:x,subPixelOptimize:!0,silent:!0});r.add(w)}}})},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"Yz+Y":function(t,e,a){t.exports={default:a("Lr1a"),__esModule:!0}},Z8zF:function(t,e,a){a("Tghj").__DEV__;var i=a("ProS"),r=a("bYtY"),n=a("IwbS"),o=a("56rv").setLabel,s=a("Qxkt"),h=a("tceW"),l=a("y+Vt"),u=a("4fz+"),c=a("iLNv").throttle,f=a("sK/D").createClipPath,d=a("wr5s"),C=["itemStyle","barBorderWidth"],p=[0,0];r.extend(s.prototype,h);var m=i.extendChartView({type:"bar",render:function(t,e,a){this._updateDrawMode(t);var i=t.get("coordinateSystem");return"cartesian2d"!==i&&"polar"!==i||(this._isLargeDraw?this._renderLarge(t,e,a):this._renderNormal(t,e,a)),this.group},incrementalPrepareRender:function(t,e,a){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,a,i){this._incrementalRenderLarge(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t,e,a){var i,r=this.group,o=t.getData(),s=this._data,h=t.coordinateSystem,l=h.getBaseAxis();"cartesian2d"===h.type?i=l.isHorizontal():"polar"===h.type&&(i="angle"===l.dim);var c=t.isAnimationEnabled()?t:null,f=t.get("clip",!0),d=function(t,e){var a=t.getArea&&t.getArea();if("cartesian2d"===t.type){var i=t.getBaseAxis();if("category"!==i.type||!i.onBand){var r=e.getLayout("bandWidth");i.isHorizontal()?(a.x-=r,a.width+=2*r):(a.y-=r,a.height+=2*r)}}return a}(h,o);r.removeClipPath();var C=t.get("roundCap",!0),p=t.get("showBackground",!0),m=t.getModel("backgroundStyle"),D=m.get("barBorderRadius")||0,v=[],x=this._backgroundEls||[],F=function(t){var e=y[h.type](o,t),a=function(t,e,a){return new("polar"===t.type?n.Sector:n.Rect)({shape:L(e,a,t),silent:!0,z2:0})}(h,i,e);return a.useStyle(m.getBarItemStyle()),"cartesian2d"===h.type&&a.setShape("r",D),v[t]=a,a};o.diff(s).add(function(e){var a=o.getItemModel(e),n=y[h.type](o,e,a);if(p&&F(e),o.hasValue(e)){if(f)if(g[h.type](d,n))return void r.remove(s);var s=S[h.type](e,n,i,c,!1,C);o.setItemGraphicEl(e,s),r.add(s),w(s,o,e,a,n,t,i,"polar"===h.type)}}).update(function(e,a){var l=o.getItemModel(e),u=y[h.type](o,e,l);if(p){var T;0===x.length?T=F(a):((T=x[a]).useStyle(m.getBarItemStyle()),"cartesian2d"===h.type&&T.setShape("r",D),v[e]=T);var I=y[h.type](o,e),E=L(i,I,h);n.updateProps(T,{shape:E},c,e)}var b=s.getItemGraphicEl(a);if(o.hasValue(e)){if(f)if(g[h.type](d,u))return void r.remove(b);b?n.updateProps(b,{shape:u},c,e):b=S[h.type](e,u,i,c,!0,C),o.setItemGraphicEl(e,b),r.add(b),w(b,o,e,l,u,t,i,"polar"===h.type)}else r.remove(b)}).remove(function(t){var e=s.getItemGraphicEl(t);"cartesian2d"===h.type?e&&T(t,c,e):e&&I(t,c,e)}).execute();var E=this._backgroundGroup||(this._backgroundGroup=new u);E.removeAll();for(var b=0;b<v.length;++b)E.add(v[b]);r.add(E),this._backgroundEls=v,this._data=o},_renderLarge:function(t,e,a){this._clear(),E(t,this.group);var i=t.get("clip",!0)?f(t.coordinateSystem,!1,t):null;i?this.group.setClipPath(i):this.group.removeClipPath()},_incrementalRenderLarge:function(t,e){this._removeBackground(),E(e,this.group,!0)},dispose:r.noop,remove:function(t){this._clear(t)},_clear:function(t){var e=this.group,a=this._data;t&&t.get("animation")&&a&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],a.eachItemGraphicEl(function(e){"sector"===e.type?I(e.dataIndex,t,e):T(e.dataIndex,t,e)})):e.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}}),D=Math.max,v=Math.min,g={cartesian2d:function(t,e){var a=e.width<0?-1:1,i=e.height<0?-1:1;a<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height);var r=D(e.x,t.x),n=v(e.x+e.width,t.x+t.width),o=D(e.y,t.y),s=v(e.y+e.height,t.y+t.height);e.x=r,e.y=o,e.width=n-r,e.height=s-o;var h=e.width<0||e.height<0;return a<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height),h},polar:function(t,e){var a=e.r0<=e.r?1:-1;if(a<0){var i=e.r;e.r=e.r0,e.r0=i}i=v(e.r,t.r);var r=D(e.r0,t.r0);e.r=i,e.r0=r;var n=i-r<0;if(a<0){i=e.r;e.r=e.r0,e.r0=i}return n}},S={cartesian2d:function(t,e,a,i,o){var s=new n.Rect({shape:r.extend({},e),z2:1});if(s.name="item",i){var h=s.shape,l=a?"height":"width",u={};h[l]=0,u[l]=e[l],n[o?"updateProps":"initProps"](s,{shape:u},i,t)}return s},polar:function(t,e,a,i,o,s){var h=e.startAngle<e.endAngle,l=new(!a&&s?d:n.Sector)({shape:r.defaults({clockwise:h},e),z2:1});if(l.name="item",i){var u=l.shape,c=a?"r":"endAngle",f={};u[c]=a?0:e.startAngle,f[c]=e[c],n[o?"updateProps":"initProps"](l,{shape:f},i,t)}return l}};function T(t,e,a){a.style.text=null,n.updateProps(a,{shape:{width:0}},e,t,function(){a.parent&&a.parent.remove(a)})}function I(t,e,a){a.style.text=null,n.updateProps(a,{shape:{r:a.shape.r0}},e,t,function(){a.parent&&a.parent.remove(a)})}var y={cartesian2d:function(t,e,a){var i=t.getItemLayout(e),r=a?function(t,e){var a=t.get(C)||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),r=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(a,i,r)}(a,i):0,n=i.width>0?1:-1,o=i.height>0?1:-1;return{x:i.x+n*r/2,y:i.y+o*r/2,width:i.width-n*r,height:i.height-o*r}},polar:function(t,e,a){var i=t.getItemLayout(e);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle}}};function x(t){return null!=t.startAngle&&null!=t.endAngle&&t.startAngle===t.endAngle}function w(t,e,a,i,s,h,l,u){var c=e.getItemVisual(a,"color"),f=e.getItemVisual(a,"opacity"),d=e.getVisual("borderColor"),C=i.getModel("itemStyle"),p=i.getModel("emphasis.itemStyle").getBarItemStyle();u||t.setShape("r",C.get("barBorderRadius")||0),t.useStyle(r.defaults({stroke:x(s)?"none":d,fill:x(s)?"none":c,opacity:f},C.getBarItemStyle()));var m=i.getShallow("cursor");m&&t.attr("cursor",m);var D=l?s.height>0?"bottom":"top":s.width>0?"left":"right";u||o(t.style,p,i,c,h,a,D),x(s)&&(p.fill=p.stroke="none"),n.setHoverStyle(t,p)}var F=l.extend({type:"largeBar",shape:{points:[]},buildPath:function(t,e){for(var a=e.points,i=this.__startPoint,r=this.__baseDimIdx,n=0;n<a.length;n+=2)i[r]=a[n+r],t.moveTo(i[0],i[1]),t.lineTo(a[n],a[n+1])}});function E(t,e,a){var i=t.getData(),r=[],n=i.getLayout("valueAxisHorizontal")?1:0;r[1-n]=i.getLayout("valueAxisStart");var o=i.getLayout("largeDataIndices"),s=i.getLayout("barWidth"),h=t.getModel("backgroundStyle");if(t.get("showBackground",!0)){var l=i.getLayout("largeBackgroundPoints"),u=[];u[1-n]=i.getLayout("backgroundStart");var c=new F({shape:{points:l},incremental:!!a,__startPoint:u,__baseDimIdx:n,__largeDataIndices:o,__barWidth:s,silent:!0,z2:0});!function(t,e,a){var i=e.get("borderColor")||e.get("color"),r=e.getItemStyle(["color","borderColor"]);t.useStyle(r),t.style.fill=null,t.style.stroke=i,t.style.lineWidth=a.getLayout("barWidth")}(c,h,i),e.add(c)}var f=new F({shape:{points:i.getLayout("largePoints")},incremental:!!a,__startPoint:r,__baseDimIdx:n,__largeDataIndices:o,__barWidth:s});e.add(f),function(t,e,a){var i=a.getVisual("borderColor")||a.getVisual("color"),r=e.getModel("itemStyle").getItemStyle(["color","borderColor"]);t.useStyle(r),t.style.fill=null,t.style.stroke=i,t.style.lineWidth=a.getLayout("barWidth")}(f,t,i),f.seriesIndex=t.seriesIndex,t.get("silent")||(f.on("mousedown",b),f.on("mousemove",b))}var b=c(function(t){var e=function(t,e,a){var i=t.__baseDimIdx,r=1-i,n=t.shape.points,o=t.__largeDataIndices,s=Math.abs(t.__barWidth/2),h=t.__startPoint[r];p[0]=e,p[1]=a;for(var l=p[i],u=p[1-i],c=l-s,f=l+s,d=0,C=n.length/2;d<C;d++){var m=2*d,D=n[m+i],v=n[m+r];if(D>=c&&D<=f&&(h<=v?u>=h&&u<=v:u>=v&&u<=h))return o[d]}return-1}(this,t.offsetX,t.offsetY);this.dataIndex=e>=0?e:null},30,!1);function L(t,e,a){var i,r="polar"===a.type;return i=r?a.getArea():a.grid.getRect(),r?{cx:i.cx,cy:i.cy,r0:t?i.r0:e.r0,r:t?i.r:e.r,startAngle:t?e.startAngle:0,endAngle:t?e.endAngle:2*Math.PI}:{x:t?e.x:i.x,y:t?i.y:e.y,width:t?e.width:i.width,height:t?i.height:e.height}}t.exports=m},ZDin:function(t,e,a){var i=a("A9a0"),r=a("l0Kd").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},ZESv:function(t,e){var a=function(t){return t.replace(/^\s+|\s+$/g,"")},i=function(t){return"[object Array]"===Object.prototype.toString.call(t)};t.exports=function(t){if(!t)return{};for(var e={},r=a(t).split("\n"),n=0;n<r.length;n++){var o=r[n],s=o.indexOf(":"),h=a(o.slice(0,s)).toLowerCase(),l=a(o.slice(s+1));void 0===e[h]?e[h]=l:i(e[h])?e[h].push(l):e[h]=[e[h],l]}return e}},ZWGZ:function(t,e,a){"use strict";var i=a("rdj4"),r=a("JAUQ");t.exports=a("M+fh")("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(r(this,"Map"),0===t?0:t,e)}},i,!0)},"ZY/g":function(t,e,a){a("aFj7");for(var i=a("7whZ"),r=a("BRsN"),n=a("ig3W"),o=a("zBWt")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),h=0;h<s.length;h++){var l=s[h],u=i[l],c=u&&u.prototype;c&&!c[o]&&r(c,o,l),n[l]=n.Array}},Ze12:function(t,e,a){var i=a("ItGF"),r=a("hOwI").buildTransformer,n="___zrEVENTSAVED",o=[];function s(t,e,a,o,s){if(e.getBoundingClientRect&&i.domSupported&&!h(e)){var l=e[n]||(e[n]={}),u=function(t,e,a){for(var i=a?"invTrans":"trans",n=e[i],o=e.srcCoords,s=!0,h=[],l=[],u=0;u<4;u++){var c=t[u].getBoundingClientRect(),f=2*u,d=c.left,C=c.top;h.push(d,C),s=s&&o&&d===o[f]&&C===o[f+1],l.push(t[u].offsetLeft,t[u].offsetTop)}return s&&n?n:(e.srcCoords=h,e[i]=a?r(l,h):r(h,l))}(function(t,e){var a=e.markers;if(a)return a;a=e.markers=[];for(var i=["left","right"],r=["top","bottom"],n=0;n<4;n++){var o=document.createElement("div"),s=o.style,h=n%2,l=(n>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[h]+":0",r[l]+":0",i[1-h]+":auto",r[1-l]+":auto",""].join("!important;"),t.appendChild(o),a.push(o)}return a}(e,l),l,s);if(u)return u(t,a,o),!0}return!1}function h(t){return"CANVAS"===t.nodeName.toUpperCase()}e.transformLocalCoord=function(t,e,a,i,r){return s(o,e,i,r,!0)&&s(t,a,o[0],o[1])},e.transformCoordWithViewport=s,e.isCanvasEl=h},Znkb:function(t,e,a){a("Tghj").__DEV__;var i=a("ProS"),r=a("zTMp"),n=i.extendComponentView({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(t,e,a,i){this.axisPointerClass&&r.fixValue(t),n.superApply(this,"render",arguments),o(this,t,e,a,i,!0)},updateAxisPointer:function(t,e,a,i,r){o(this,t,e,a,i,!1)},remove:function(t,e){var a=this._axisPointer;a&&a.remove(e),n.superApply(this,"remove",arguments)},dispose:function(t,e){s(this,e),n.superApply(this,"dispose",arguments)}});function o(t,e,a,i,o,h){var l=n.getAxisPointerClass(t.axisPointerClass);if(l){var u=r.getAxisPointerModel(e);u?(t._axisPointer||(t._axisPointer=new l)).render(e,u,i,h):s(t,i)}}function s(t,e,a){var i=t._axisPointer;i&&i.dispose(e,a),t._axisPointer=null}var h=[];n.registerAxisPointerClass=function(t,e){h[t]=e},n.getAxisPointerClass=function(t){return t&&h[t]};var l=n;t.exports=l},aFj7:function(t,e,a){"use strict";var i=a("L5pH"),r=a("6jRP"),n=a("ig3W"),o=a("bKEA");t.exports=a("OTpG")(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,a=this._i++;return!t||a>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?a:"values"==e?t[a]:[a,t[a]])},"values"),n.Arguments=n.Array,i("keys"),i("values"),i("entries")},aKvl:function(t,e,a){var i=a("Sj9i").quadraticProjectPoint;e.containStroke=function(t,e,a,r,n,o,s,h,l){if(0===s)return!1;var u=s;return!(l>e+u&&l>r+u&&l>o+u||l<e-u&&l<r-u&&l<o-u||h>t+u&&h>a+u&&h>n+u||h<t-u&&h<a-u&&h<n-u)&&i(t,e,a,r,n,o,h,l,null)<=u/2}},aM90:function(t,e,a){t.exports={default:a("5aK+"),__esModule:!0}},aT0f:function(t,e,a){"use strict";var i=a("7whZ"),r=a("nA4W"),n=a("C61u"),o=a("USwo"),s=a("ugGH"),h=a("40oJ").KEY,l=a("S4vA"),u=a("s2er"),c=a("kvAF"),f=a("ixoo"),d=a("zBWt"),C=a("/NTb"),p=a("4Zg2"),m=a("CuL1"),D=a("Trx6"),v=a("d+lc"),g=a("ekG2"),S=a("CYMq"),T=a("bKEA"),I=a("M5dz"),y=a("ENu8"),x=a("b08l"),w=a("GDZC"),F=a("TSC6"),E=a("/tXR"),b=a("GhSp"),L=a("mHY4"),M=F.f,A=b.f,O=w.f,N=i.Symbol,P=i.JSON,R=P&&P.stringify,_=d("_hidden"),B=d("toPrimitive"),k={}.propertyIsEnumerable,G=u("symbol-registry"),V=u("symbols"),H=u("op-symbols"),Y=Object.prototype,X="function"==typeof N&&!!E.f,W=i.QObject,U=!W||!W.prototype||!W.prototype.findChild,K=n&&l(function(){return 7!=x(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,e,a){var i=M(Y,e);i&&delete Y[e],A(t,e,a),i&&t!==Y&&A(Y,e,i)}:A,z=function(t){var e=V[t]=x(N.prototype);return e._k=t,e},J=X&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},j=function(t,e,a){return t===Y&&j(H,e,a),v(t),e=I(e,!0),v(a),r(V,e)?(a.enumerable?(r(t,_)&&t[_][e]&&(t[_][e]=!1),a=x(a,{enumerable:y(0,!1)})):(r(t,_)||A(t,_,y(1,{})),t[_][e]=!0),K(t,e,a)):A(t,e,a)},q=function(t,e){v(t);for(var a,i=m(e=T(e)),r=0,n=i.length;n>r;)j(t,a=i[r++],e[a]);return t},Z=function(t){var e=k.call(this,t=I(t,!0));return!(this===Y&&r(V,t)&&!r(H,t))&&(!(e||!r(this,t)||!r(V,t)||r(this,_)&&this[_][t])||e)},Q=function(t,e){if(t=T(t),e=I(e,!0),t!==Y||!r(V,e)||r(H,e)){var a=M(t,e);return!a||!r(V,e)||r(t,_)&&t[_][e]||(a.enumerable=!0),a}},$=function(t){for(var e,a=O(T(t)),i=[],n=0;a.length>n;)r(V,e=a[n++])||e==_||e==h||i.push(e);return i},tt=function(t){for(var e,a=t===Y,i=O(a?H:T(t)),n=[],o=0;i.length>o;)!r(V,e=i[o++])||a&&!r(Y,e)||n.push(V[e]);return n};X||(s((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(a){this===Y&&e.call(H,a),r(this,_)&&r(this[_],t)&&(this[_][t]=!1),K(this,t,y(1,a))};return n&&U&&K(Y,t,{configurable:!0,set:e}),z(t)}).prototype,"toString",function(){return this._k}),F.f=Q,b.f=j,a("ZDin").f=w.f=$,a("GRew").f=Z,E.f=tt,n&&!a("5ETA")&&s(Y,"propertyIsEnumerable",Z,!0),C.f=function(t){return z(d(t))}),o(o.G+o.W+o.F*!X,{Symbol:N});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),at=0;et.length>at;)d(et[at++]);for(var it=L(d.store),rt=0;it.length>rt;)p(it[rt++]);o(o.S+o.F*!X,"Symbol",{for:function(t){return r(G,t+="")?G[t]:G[t]=N(t)},keyFor:function(t){if(!J(t))throw TypeError(t+" is not a symbol!");for(var e in G)if(G[e]===t)return e},useSetter:function(){U=!0},useSimple:function(){U=!1}}),o(o.S+o.F*!X,"Object",{create:function(t,e){return void 0===e?x(t):q(x(t),e)},defineProperty:j,defineProperties:q,getOwnPropertyDescriptor:Q,getOwnPropertyNames:$,getOwnPropertySymbols:tt});var nt=l(function(){E.f(1)});o(o.S+o.F*nt,"Object",{getOwnPropertySymbols:function(t){return E.f(S(t))}}),P&&o(o.S+o.F*(!X||l(function(){var t=N();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))})),"JSON",{stringify:function(t){for(var e,a,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(a=e=i[1],(g(e)||void 0!==t)&&!J(t))return D(e)||(e=function(t,e){if("function"==typeof a&&(e=a.call(this,t,e)),!J(e))return e}),i[1]=e,R.apply(P,i)}}),N.prototype[B]||a("BRsN")(N.prototype,B,N.prototype.valueOf),c(N,"Symbol"),c(Math,"Math",!0),c(i.JSON,"JSON",!0)},aX58:function(t,e,a){var i=a("3gBT"),r=a("ItGF"),n=a("bYtY"),o=a("0s+r"),s=a("r6Bn"),h=a("7SHv"),l=a("MKOG"),u=a("zarK"),c=!r.canvasSupported,f={canvas:h},d={};var C=function(t,e,a){a=a||{},this.dom=e,this.id=t;var i=this,h=new s,d=a.renderer;if(c){if(!f.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");d="vml"}else d&&f[d]||(d="canvas");var C=new f[d](e,h,a,t);this.storage=h,this.painter=C;var p=r.node||r.worker?null:new u(C.getViewportRoot(),C.root);this.handler=new o(h,C,p,C.root),this.animation=new l({stage:{update:n.bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var m=h.delFromStorage,D=h.addToStorage;h.delFromStorage=function(t){m.call(h,t),t&&t.removeSelfFromZr(i)},h.addToStorage=function(t){D.call(h,t),t.addSelfToZr(i)}};C.prototype={constructor:C,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this._needsRefresh=!0},setBackgroundColor:function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var t;this._needsRefresh&&(t=!0,this.refreshImmediately()),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately()),t&&this.trigger("rendered")},addHover:function(t,e){if(this.painter.addHover){var a=this.painter.addHover(t,e);return this.refreshHover(),a}},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,a){this.handler.on(t,e,a)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function(t){delete d[t]}(this.id)}},e.version="4.3.2",e.init=function(t,e){var a=new C(i(),t,e);return d[a.id]=a,a},e.dispose=function(t){if(t)t.dispose();else{for(var e in d)d.hasOwnProperty(e)&&d[e].dispose();d={}}return this},e.getInstance=function(t){return d[t]},e.registerPainter=function(t,e){f[t]=e}},aX7z:function(t,e,a){a("Tghj").__DEV__;var i=a("bYtY"),r=a("GMDS"),n=a("ieMj"),o=a("4NgU"),s=a("OELB"),h=a("nVfU"),l=h.prepareLayoutBarSeries,u=h.makeColumnLayout,c=h.retrieveColumnLayout,f=a("mFDi");function d(t,e){var a,r,n,o=t.type,h=e.getMin(),f=e.getMax(),d=t.getExtent();"ordinal"===o?a=e.getCategories().length:(r=e.get("boundaryGap"),i.isArray(r)||(r=[r||0,r||0]),"boolean"==typeof r[0]&&(r=[0,0]),r[0]=s.parsePercent(r[0],1),r[1]=s.parsePercent(r[1],1),n=d[1]-d[0]||Math.abs(d[0])),"dataMin"===h?h=d[0]:"function"==typeof h&&(h=h({min:d[0],max:d[1]})),"dataMax"===f?f=d[1]:"function"==typeof f&&(f=f({min:d[0],max:d[1]}));var C=null!=h,p=null!=f;null==h&&(h="ordinal"===o?a?0:NaN:d[0]-r[0]*n),null==f&&(f="ordinal"===o?a?a-1:NaN:d[1]+r[1]*n),(null==h||!isFinite(h))&&(h=NaN),(null==f||!isFinite(f))&&(f=NaN),t.setBlank(i.eqNaN(h)||i.eqNaN(f)||"ordinal"===o&&!t.getOrdinalMeta().categories.length),e.getNeedCrossZero()&&(h>0&&f>0&&!C&&(h=0),h<0&&f<0&&!p&&(f=0));var m=e.ecModel;if(m&&"time"===o){var D,v=l("bar",m);if(i.each(v,function(t){D|=t.getBaseAxis()===e.axis}),D){var g=u(v),S=function(t,e,a,r){var n=a.axis.getExtent(),o=n[1]-n[0],s=c(r,a.axis);if(void 0===s)return{min:t,max:e};var h=1/0;i.each(s,function(t){h=Math.min(t.offset,h)});var l=-1/0;i.each(s,function(t){l=Math.max(t.offset+t.width,l)}),h=Math.abs(h),l=Math.abs(l);var u=h+l,f=e-t,d=f/(1-(h+l)/o)-f;return{min:t-=d*(h/u),max:e+=d*(l/u)}}(h,f,e,g);h=S.min,f=S.max}}return{extent:[h,f],fixMin:C,fixMax:p}}function C(t){var e=t.getLabelModel().get("formatter"),a="category"===t.type?t.scale.getExtent()[0]:null;return"string"==typeof e?e=function(e){return function(a){return a=t.scale.getLabel(a),e.replace("{value}",null!=a?a:"")}}(e):"function"==typeof e?function(i,r){return null!=a&&(r=i-a),e(p(t,i),r)}:function(e){return t.scale.getLabel(e)}}function p(t,e){return"category"===t.type?t.scale.getLabel(e):e}function m(t,e){var a=e*Math.PI/180,i=t.plain(),r=i.width,n=i.height,o=r*Math.abs(Math.cos(a))+Math.abs(n*Math.sin(a)),s=r*Math.abs(Math.sin(a))+Math.abs(n*Math.cos(a));return new f(i.x,i.y,o,s)}function D(t){var e=t.get("interval");return null==e?"auto":e}a("IWp7"),a("jCoz"),e.getScaleExtent=d,e.niceScaleExtent=function(t,e){var a=d(t,e),i=a.extent,r=e.get("splitNumber");"log"===t.type&&(t.base=e.get("logBase"));var n=t.type;t.setExtent(i[0],i[1]),t.niceExtent({splitNumber:r,fixMin:a.fixMin,fixMax:a.fixMax,minInterval:"interval"===n||"time"===n?e.get("minInterval"):null,maxInterval:"interval"===n||"time"===n?e.get("maxInterval"):null});var o=e.get("interval");null!=o&&t.setInterval&&t.setInterval(o)},e.createScaleByModel=function(t,e){if(e=e||t.get("type"))switch(e){case"category":return new r(t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),[1/0,-1/0]);case"value":return new n;default:return(o.getClass(e)||n).create(t)}},e.ifAxisCrossZero=function(t){var e=t.scale.getExtent(),a=e[0],i=e[1];return!(a>0&&i>0||a<0&&i<0)},e.makeLabelFormatter=C,e.getAxisRawValue=p,e.estimateLabelUnionRect=function(t){var e=t.model,a=t.scale;if(e.get("axisLabel.show")&&!a.isBlank()){var i,r,n="category"===t.type,o=a.getExtent();r=n?a.count():(i=a.getTicks()).length;var s,h=t.getLabelModel(),l=C(t),u=1;r>40&&(u=Math.ceil(r/40));for(var c=0;c<r;c+=u){var f=l(i?i[c]:o[0]+c),d=m(h.getTextRect(f),h.get("rotate")||0);s?s.union(d):s=d}return s}},e.getOptionCategoryInterval=D,e.shouldShowAllLabels=function(t){return"category"===t.type&&0===D(t.getLabelModel())}},"af/B":function(t,e,a){var i=a("bYtY"),r=i.each,n=i.map,o=i.isFunction,s=i.createHashMap,h=i.noop,l=a("9H2F").createTask,u=a("iRjW").getUID,c=a("fmMI"),f=a("hD7B"),d=a("4NO4").normalizeToArray;function C(t,e,a,i){this.ecInstance=t,this.api=e,this.unfinished;a=this._dataProcessorHandlers=a.slice(),i=this._visualHandlers=i.slice();this._allHandlers=a.concat(i),this._stageTaskMap=s()}var p=C.prototype;function m(t,e,a,i,n){var o;function s(t,e){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(e.__pipeline.id))}n=n||{},r(e,function(e,r){if(!n.visualType||n.visualType===e.visualType){var h=t._stageTaskMap.get(e.uid),l=h.seriesTaskMap,u=h.overallTask;if(u){var c,f=u.agentStubMap;f.each(function(t){s(n,t)&&(t.dirty(),c=!0)}),c&&u.dirty(),D(u,i);var d=t.getPerformArgs(u,n.block);f.each(function(t){t.perform(d)}),o|=u.perform(d)}else l&&l.each(function(r,h){s(n,r)&&r.dirty();var l=t.getPerformArgs(r,n.block);l.skip=!e.performRawSeries&&a.isSeriesFiltered(r.context.model),D(r,i),o|=r.perform(l)})}}),t.unfinished|=o}p.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(t){var e=t.overallTask;e&&e.dirty()})},p.getPerformArgs=function(t,e){if(t.__pipeline){var a=this._pipelineMap.get(t.__pipeline.id),i=a.context,r=!e&&a.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>a.blockIndex?a.step:null,n=i&&i.modDataCount;return{step:r,modBy:null!=n?Math.ceil(n/r):null,modDataCount:n}}},p.getPipeline=function(t){return this._pipelineMap.get(t)},p.updateStreamModes=function(t,e){var a=this._pipelineMap.get(t.uid),i=t.getData().count(),r=a.progressiveEnabled&&e.incrementalPrepareRender&&i>=a.threshold,n=t.get("large")&&i>=t.get("largeThreshold"),o="mod"===t.get("progressiveChunkMode")?i:null;t.pipelineContext=a.context={progressiveRender:r,modDataCount:o,large:n}},p.restorePipelines=function(t){var e=this,a=e._pipelineMap=s();t.eachSeries(function(t){var i=t.getProgressive(),r=t.uid;a.set(r,{id:r,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:i&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0}),E(e,t,t.dataTask)})},p.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.ecInstance.getModel(),a=this.api;r(this._allHandlers,function(i){var n=t.get(i.uid)||t.set(i.uid,[]);i.reset&&function(t,e,a,i,r){var n=a.seriesTaskMap||(a.seriesTaskMap=s()),o=e.seriesType,h=e.getTargetSeries;e.createOnAllSeries?i.eachRawSeries(u):o?i.eachRawSeriesByType(o,u):h&&h(i,r).each(u);function u(a){var o=a.uid,s=n.get(o)||n.set(o,l({plan:I,reset:y,count:F}));s.context={model:a,ecModel:i,api:r,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:t},E(t,a,s)}var c=t._pipelineMap;n.each(function(t,e){c.get(e)||(t.dispose(),n.removeKey(e))})}(this,i,n,e,a),i.overallReset&&function(t,e,a,i,n){var o=a.overallTask=a.overallTask||l({reset:v});o.context={ecModel:i,api:n,overallReset:e.overallReset,scheduler:t};var h=o.agentStubMap=o.agentStubMap||s(),u=e.seriesType,c=e.getTargetSeries,f=!0,d=e.modifyOutputEnd;u?i.eachRawSeriesByType(u,C):c?c(i,n).each(C):(f=!1,r(i.getSeries(),C));function C(e){var a=e.uid,i=h.get(a);i||(i=h.set(a,l({reset:g,onDirty:T})),o.dirty()),i.context={model:e,overallProgress:f,modifyOutputEnd:d},i.agent=o,i.__block=f,E(t,e,i)}var p=t._pipelineMap;h.each(function(t,e){p.get(e)||(t.dispose(),o.dirty(),h.removeKey(e))})}(this,i,n,e,a)},this)},p.prepareView=function(t,e,a,i){var r=t.renderTask,n=r.context;n.model=e,n.ecModel=a,n.api=i,r.__block=!t.incrementalPrepareRender,E(this,e,r)},p.performDataProcessorTasks=function(t,e){m(this,this._dataProcessorHandlers,t,e,{block:!0})},p.performVisualTasks=function(t,e,a){m(this,this._visualHandlers,t,e,a)},p.performSeriesTasks=function(t){var e;t.eachSeries(function(t){e|=t.dataTask.perform()}),this.unfinished|=e},p.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})};var D=p.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)};function v(t){t.overallReset(t.ecModel,t.api,t.payload)}function g(t,e){return t.overallProgress&&S}function S(){this.agent.dirty(),this.getDownstream().dirty()}function T(){this.agent&&this.agent.dirty()}function I(t){return t.plan&&t.plan(t.model,t.ecModel,t.api,t.payload)}function y(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=d(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?n(e,function(t,e){return w(e)}):x}var x=w(0);function w(t){return function(e,a){var i=a.data,r=a.resetDefines[t];if(r&&r.dataEach)for(var n=e.start;n<e.end;n++)r.dataEach(i,n);else r&&r.progress&&r.progress(e,i)}}function F(t){return t.data.count()}function E(t,e,a){var i=e.uid,r=t._pipelineMap.get(i);!r.head&&(r.head=a),r.tail&&r.tail.pipe(a),r.tail=a,a.__idxInPipeline=r.count++,a.__pipeline=r}C.wrapStageHandler=function(t,e){return o(t)&&(t={overallReset:t,seriesType:function(t){b=null;try{t(L,M)}catch(t){}return b}(t)}),t.uid=u("stageHandler"),e&&(t.visualType=e),t};var b,L={},M={};function A(t,e){for(var a in e.prototype)t[a]=h}A(L,c),A(M,f),L.eachSeriesByType=L.eachRawSeriesByType=function(t){b=t},L.eachComponent=function(t){"series"===t.mainType&&t.subType&&(b=t.subType)};var O=C;t.exports=O},aqg2:function(t,e,a){var i=a("TYje"),r=a("zBWt")("toStringTag"),n="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,a,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(a=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?a:n?i(e):"Object"==(o=i(e))&&"function"==typeof e.callee?"Arguments":o}},b08l:function(t,e,a){var i=a("d+lc"),r=a("heda"),n=a("l0Kd"),o=a("WpRT")("IE_PROTO"),s=function(){},h=function(){var t,e=a("BfU5")("iframe"),i=n.length;for(e.style.display="none",a("kUGv").appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),h=t.F;i--;)delete h.prototype[n[i]];return h()};t.exports=Object.create||function(t,e){var a;return null!==t?(s.prototype=i(t),a=new s,s.prototype=null,a[o]=t):a=h(),void 0===e?a:r(a,e)}},bDny:function(t,e,a){
/*!
 * vue-friendly-iframe v0.20.0 (https://github.com/officert/vue-friendly-iframe)
 * (c) 2021 Tim Officer
 * Released under the MIT License.
 */
!function(e,a){t.exports=a()}("undefined"!=typeof self&&self,function(){return function(t){var e={};function a(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(a(1));"undefined"!=typeof window&&window.Vue&&window.Vue.use({install:function(t){t.component("vue-friendly-iframe",i.default)}}),e.default={install:function(t){t.component("vue-friendly-iframe",i.default)},VueFriendlyIframe:i.default},t.exports=e.default},function(t,e,a){var i=a(2)(a(3),a(9),null,null);t.exports=i.exports},function(t,e){t.exports=function(t,e,a,i){var r,n=t=t||{},o=typeof t.default;"object"!==o&&"function"!==o||(r=t,n=t.default);var s="function"==typeof n?n.options:n;if(e&&(s.render=e.render,s.staticRenderFns=e.staticRenderFns),a&&(s._scopeId=a),i){var h=Object.create(s.computed||null);Object.keys(i).forEach(function(t){var e=i[t];h[t]=function(){return e}}),s.computed=h}return{esModule:r,exports:n,options:s}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(a(4)),r=n(a(8));function n(t){return t&&t.__esModule?t:{default:t}}function o(){return(0,i.default)()}e.default={name:"friendly-iframe",props:{src:{type:String,required:!0},crossorigin:{type:String,required:!1,default:"anonymous"},target:{type:String,required:!1,default:"_parent"},className:{type:String,required:!1},allow:{type:String,required:!1},name:{type:String,required:!1},title:{type:String,required:!1},sandbox:{type:String,required:!1}},data:function(){return{iframeEl:null,iframeLoadedMessage:"IFRAME_LOADED_"+o(),iframeOnReadyStateChangeMessage:"IFRAME_ON_READ_STATE_CHANGE_"+o()}},computed:{},watch:{src:function(){this.reinitIframe(this)}},methods:{removeIframe:function(){for(;this.$el.firstChild;)this.$el.removeChild(this.$el.firstChild)},setIframeUrl:function(){if(null!==this.iframeEl.contentWindow){var t=this.iframeEl.contentWindow.document;t.open().write("\n          <body onload=\"window.location.replace('"+this.src+"'); parent.postMessage('"+this.iframeLoadedMessage+"', '*')\"></body>\n          <script>\n            window.document.onreadystatechange = function () {\n              if (window.document.readyState === 'complete') {\n                parent.postMessage('"+this.iframeOnReadyStateChangeMessage+"', '*')\n              }\n            };\n          <\/script>\n          "),t.close()}else setTimeout(this.setIframeUrl)},reinitIframe:r.default.debounce(function(t){t.removeIframe(),t.initIframe()},200),initIframe:function(){this.iframeEl=document.createElement("iframe"),this.iframeEl.setAttribute("style","visibility: hidden; position: absolute; top: -99999px; border: none;"),this.src&&this.iframeEl.setAttribute("iframe-src",this.src),this.className&&this.iframeEl.setAttribute("class",this.className),this.class&&this.iframeEl.setAttribute("class",this.class),this.crossorigin&&this.iframeEl.setAttribute("crossorigin",this.crossorigin),this.target&&this.iframeEl.setAttribute("target",this.target),this.allow&&this.iframeEl.setAttribute("allow",this.allow),this.name&&this.iframeEl.setAttribute("name",this.name),this.title&&this.iframeEl.setAttribute("title",this.title),this.sandbox&&this.iframeEl.setAttribute("sandbox",this.sandbox),this.$el.appendChild(this.iframeEl),this.setIframeUrl()},listenForEvents:function(){var t=this,e=window.addEventListener?"addEventListener":"attachEvent";(0,window[e])("attachEvent"===e?"onmessage":"message",function(e){e.data===t.iframeLoadedMessage&&(t.$emit("iframe-load"),t.iframeEl.setAttribute("style","visibility: visible; border: none;")),e.data===t.iframeOnReadyStateChangeMessage&&t.$emit("load")},!1)}},mounted:function(){this.listenForEvents(),this.initIframe()}},t.exports=e.default},function(t,e,a){var i=a(5),r=a(7),n=i(),o=[1|n[0],n[1],n[2],n[3],n[4],n[5]],s=16383&(n[6]<<8|n[7]),h=0,l=0;t.exports=function(t,e,a){var i=e&&a||0,n=e||[],u=void 0!==(t=t||{}).clockseq?t.clockseq:s,c=void 0!==t.msecs?t.msecs:(new Date).getTime(),f=void 0!==t.nsecs?t.nsecs:l+1,d=c-h+(f-l)/1e4;if(d<0&&void 0===t.clockseq&&(u=u+1&16383),(d<0||c>h)&&void 0===t.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=c,l=f,s=u;var C=(1e4*(268435455&(c+=122192928e5))+f)%4294967296;n[i++]=C>>>24&255,n[i++]=C>>>16&255,n[i++]=C>>>8&255,n[i++]=255&C;var p=c/4294967296*1e4&268435455;n[i++]=p>>>8&255,n[i++]=255&p,n[i++]=p>>>24&15|16,n[i++]=p>>>16&255,n[i++]=u>>>8|128,n[i++]=255&u;for(var m=t.node||o,D=0;D<6;++D)n[i+D]=m[D];return e||r(n)}},function(t,e,a){(function(e){var a,i=e.crypto||e.msCrypto;if(i&&i.getRandomValues){var r=new Uint8Array(16);a=function(){return i.getRandomValues(r),r}}if(!a){var n=new Array(16);a=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}t.exports=a}).call(e,a(6))},function(t,e){var a;a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(a=window)}t.exports=a},function(t,e){for(var a=[],i=0;i<256;++i)a[i]=(i+256).toString(16).substr(1);t.exports=function(t,e){var i=e||0,r=a;return r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={debounce:function(t,e,a){var i=void 0;return function(){var r=this,n=arguments,o=a&&!i;clearTimeout(i),i=setTimeout(function(){i=null,a||t.apply(r,n)},e),o&&t.apply(r,n)}}},t.exports=e.default},function(t,e){t.exports={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vue-friendly-iframe"})},staticRenderFns:[]}}])})},bKEA:function(t,e,a){var i=a("n7vu"),r=a("yQFZ");t.exports=function(t){return i(r(t))}},bLfw:function(t,e,a){var i=a("bYtY"),r=a("Qxkt"),n=a("iRjW"),o=a("Yl7c"),s=o.enableClassManagement,h=o.parseClassType,l=a("4NO4").makeInner,u=a("+TT/"),c=a("3hzK"),f=l(),d=r.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(t,e,a,i){r.call(this,t,e,a,i),this.uid=n.getUID("ec_cpt_model")},init:function(t,e,a,i){this.mergeDefaultAndTheme(t,a)},mergeDefaultAndTheme:function(t,e){var a=this.layoutMode,r=a?u.getLayoutParams(t):{},n=e.getTheme();i.merge(t,n.get(this.mainType)),i.merge(t,this.getDefaultOption()),a&&u.mergeLayoutParam(t,r,a)},mergeOption:function(t,e){i.merge(this.option,t,!0);var a=this.layoutMode;a&&u.mergeLayoutParam(this.option,t,a)},optionUpdated:function(t,e){},getDefaultOption:function(){var t=f(this);if(!t.defaultOption){for(var e=[],a=this.constructor;a;){var r=a.prototype.defaultOption;r&&e.push(r),a=a.superClass}for(var n={},o=e.length-1;o>=0;o--)n=i.merge(n,e[o],!0);t.defaultOption=n}return t.defaultOption},getReferringComponents:function(t){return this.ecModel.queryComponents({mainType:t,index:this.get(t+"Index",!0),id:this.get(t+"Id",!0)})}});s(d,{registerWhenExtend:!0}),n.enableSubTypeDefaulter(d),n.enableTopologicalTravel(d,function(t){var e=[];i.each(d.getClassesByMainType(t),function(t){e=e.concat(t.prototype.dependencies||[])}),e=i.map(e,function(t){return h(t).main}),"dataset"!==t&&i.indexOf(e,"dataset")<=0&&e.unshift("dataset");return e}),i.mixin(d,c);var C=d;t.exports=C},bS86:function(t,e,a){var i=a("ig3W"),r=a("zBWt")("iterator"),n=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||n[r]===t)}},bYtY:function(t,e){var a={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},i={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},r=Object.prototype.toString,n=Array.prototype,o=n.forEach,s=n.filter,h=n.slice,l=n.map,u=n.reduce,c={};function f(t){if(null==t||"object"!=typeof t)return t;var e=t,n=r.call(t);if("[object Array]"===n){if(!x(t)){e=[];for(var o=0,s=t.length;o<s;o++)e[o]=f(t[o])}}else if(i[n]){if(!x(t)){var h=t.constructor;if(t.constructor.from)e=h.from(t);else{e=new h(t.length);for(o=0,s=t.length;o<s;o++)e[o]=f(t[o])}}}else if(!a[n]&&!x(t)&&!I(t))for(var l in e={},t)t.hasOwnProperty(l)&&(e[l]=f(t[l]));return e}function d(t,e,a){if(!S(e)||!S(t))return a?f(e):t;for(var i in e)if(e.hasOwnProperty(i)){var r=t[i],n=e[i];!S(n)||!S(r)||g(n)||g(r)||I(n)||I(r)||T(n)||T(r)||x(n)||x(r)?!a&&i in t||(t[i]=f(e[i])):d(r,n,a)}return t}function C(t,e,a){for(var i in e)e.hasOwnProperty(i)&&(a?null!=e[i]:null==t[i])&&(t[i]=e[i]);return t}var p,m=function(){return c.createCanvas()};function D(t,e,a){if(t&&e)if(t.forEach&&t.forEach===o)t.forEach(e,a);else if(t.length===+t.length)for(var i=0,r=t.length;i<r;i++)e.call(a,t[i],i,t);else for(var n in t)t.hasOwnProperty(n)&&e.call(a,t[n],n,t)}function v(t,e){var a=h.call(arguments,2);return function(){return t.apply(e,a.concat(h.call(arguments)))}}function g(t){return"[object Array]"===r.call(t)}function S(t){var e=typeof t;return"function"===e||!!t&&"object"===e}function T(t){return!!a[r.call(t)]}function I(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}c.createCanvas=function(){return document.createElement("canvas")};var y="__ec_primitive__";function x(t){return t[y]}function w(t){var e=g(t);this.data={};var a=this;function i(t,i){e?a.set(t,i):a.set(i,t)}t instanceof w?t.each(i):t&&D(t,i)}w.prototype={constructor:w,get:function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},set:function(t,e){return this.data[t]=e},each:function(t,e){for(var a in void 0!==e&&(t=v(t,e)),this.data)this.data.hasOwnProperty(a)&&t(this.data[a],a)},removeKey:function(t){delete this.data[t]}},e.$override=function(t,e){"createCanvas"===t&&(p=null),c[t]=e},e.clone=f,e.merge=d,e.mergeAll=function(t,e){for(var a=t[0],i=1,r=t.length;i<r;i++)a=d(a,t[i],e);return a},e.extend=function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t},e.defaults=C,e.createCanvas=m,e.getContext=function(){return p||(p=m().getContext("2d")),p},e.indexOf=function(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var a=0,i=t.length;a<i;a++)if(t[a]===e)return a}return-1},e.inherits=function(t,e){var a=t.prototype;function i(){}for(var r in i.prototype=e.prototype,t.prototype=new i,a)a.hasOwnProperty(r)&&(t.prototype[r]=a[r]);t.prototype.constructor=t,t.superClass=e},e.mixin=function(t,e,a){C(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,a)},e.isArrayLike=function(t){if(t)return"string"!=typeof t&&"number"==typeof t.length},e.each=D,e.map=function(t,e,a){if(t&&e){if(t.map&&t.map===l)return t.map(e,a);for(var i=[],r=0,n=t.length;r<n;r++)i.push(e.call(a,t[r],r,t));return i}},e.reduce=function(t,e,a,i){if(t&&e){if(t.reduce&&t.reduce===u)return t.reduce(e,a,i);for(var r=0,n=t.length;r<n;r++)a=e.call(i,a,t[r],r,t);return a}},e.filter=function(t,e,a){if(t&&e){if(t.filter&&t.filter===s)return t.filter(e,a);for(var i=[],r=0,n=t.length;r<n;r++)e.call(a,t[r],r,t)&&i.push(t[r]);return i}},e.find=function(t,e,a){if(t&&e)for(var i=0,r=t.length;i<r;i++)if(e.call(a,t[i],i,t))return t[i]},e.bind=v,e.curry=function(t){var e=h.call(arguments,1);return function(){return t.apply(this,e.concat(h.call(arguments)))}},e.isArray=g,e.isFunction=function(t){return"function"==typeof t},e.isString=function(t){return"[object String]"===r.call(t)},e.isObject=S,e.isBuiltInObject=T,e.isTypedArray=function(t){return!!i[r.call(t)]},e.isDom=I,e.eqNaN=function(t){return t!=t},e.retrieve=function(t){for(var e=0,a=arguments.length;e<a;e++)if(null!=arguments[e])return arguments[e]},e.retrieve2=function(t,e){return null!=t?t:e},e.retrieve3=function(t,e,a){return null!=t?t:null!=e?e:a},e.slice=function(){return Function.call.apply(h,arguments)},e.normalizeCssArray=function(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t},e.assert=function(t,e){if(!t)throw new Error(e)},e.trim=function(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},e.setAsPrimitive=function(t){t[y]=!0},e.isPrimitive=x,e.createHashMap=function(t){return new w(t)},e.concatArray=function(t,e){for(var a=new t.constructor(t.length+e.length),i=0;i<t.length;i++)a[i]=t[i];var r=t.length;for(i=0;i<e.length;i++)a[i+r]=e[i];return a},e.noop=function(){}},bdgK:function(t,e,a){"use strict";a.r(e),function(t){var a=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var a=-1;return t.some(function(t,i){return t[0]===e&&(a=i,!0)}),a}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var a=t(this.__entries__,e),i=this.__entries__[a];return i&&i[1]},e.prototype.set=function(e,a){var i=t(this.__entries__,e);~i?this.__entries__[i][1]=a:this.__entries__.push([e,a])},e.prototype.delete=function(e){var a=this.__entries__,i=t(a,e);~i&&a.splice(i,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var a=0,i=this.__entries__;a<i.length;a++){var r=i[a];t.call(e,r[1],r[0])}},e}()}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,r=void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),n="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},o=2;var s=20,h=["top","right","bottom","left","width","height","size","weight"],l="undefined"!=typeof MutationObserver,u=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var a=!1,i=!1,r=0;function s(){a&&(a=!1,t()),i&&l()}function h(){n(s)}function l(){var t=Date.now();if(a){if(t-r<o)return;i=!0}else a=!0,i=!1,setTimeout(h,e);r=t}return l}(this.refresh.bind(this),s)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,a=e.indexOf(t);~a&&e.splice(a,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},t.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,a=void 0===e?"":e;h.some(function(t){return!!~a.indexOf(t)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),c=function(t,e){for(var a=0,i=Object.keys(e);a<i.length;a++){var r=i[a];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},f=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||r},d=g(0,0,0,0);function C(t){return parseFloat(t)||0}function p(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];return e.reduce(function(e,a){return e+C(t["border-"+a+"-width"])},0)}function m(t){var e=t.clientWidth,a=t.clientHeight;if(!e&&!a)return d;var i=f(t).getComputedStyle(t),r=function(t){for(var e={},a=0,i=["top","right","bottom","left"];a<i.length;a++){var r=i[a],n=t["padding-"+r];e[r]=C(n)}return e}(i),n=r.left+r.right,o=r.top+r.bottom,s=C(i.width),h=C(i.height);if("border-box"===i.boxSizing&&(Math.round(s+n)!==e&&(s-=p(i,"left","right")+n),Math.round(h+o)!==a&&(h-=p(i,"top","bottom")+o)),!function(t){return t===f(t).document.documentElement}(t)){var l=Math.round(s+n)-e,u=Math.round(h+o)-a;1!==Math.abs(l)&&(s-=l),1!==Math.abs(u)&&(h-=u)}return g(r.left,r.top,s,h)}var D="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof f(t).SVGGraphicsElement}:function(t){return t instanceof f(t).SVGElement&&"function"==typeof t.getBBox};function v(t){return i?D(t)?function(t){var e=t.getBBox();return g(0,0,e.width,e.height)}(t):m(t):d}function g(t,e,a,i){return{x:t,y:e,width:a,height:i}}var S=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=g(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=v(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),T=function(){return function(t,e){var a=function(t){var e=t.x,a=t.y,i=t.width,r=t.height,n="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(n.prototype);return c(o,{x:e,y:a,width:i,height:r,top:a,right:e+i,bottom:r+a,left:e}),o}(e);c(this,{target:t,contentRect:a})}}(),I=function(){function t(t,e,i){if(this.activeObservations_=[],this.observations_=new a,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof f(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new S(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof f(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new T(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),y="undefined"!=typeof WeakMap?new WeakMap:new a,x=function(){return function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var a=u.getInstance(),i=new I(e,a,this);y.set(this,i)}}();["observe","unobserve","disconnect"].forEach(function(t){x.prototype[t]=function(){var e;return(e=y.get(this))[t].apply(e,arguments)}});var w=void 0!==r.ResizeObserver?r.ResizeObserver:x;e.default=w}.call(this,a("yLpj"))},beoY:function(t,e){var a={"":!0,up:!0};function i(t){return"number"==typeof t&&t>=0&&t<=100}t.exports=function(){var t=100,e=3,r=0,n=100,o=0,s=100,h="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!i(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return e},set:function(t){if("number"!=typeof t)throw new TypeError("Lines must be set to a number.");e=t}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(t){if(!i(t))throw new Error("RegionAnchorX must be between 0 and 100.");n=t}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(t){if(!i(t))throw new Error("RegionAnchorY must be between 0 and 100.");r=t}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(t){if(!i(t))throw new Error("ViewportAnchorY must be between 0 and 100.");s=t}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(t){if(!i(t))throw new Error("ViewportAnchorX must be between 0 and 100.");o=t}},scroll:{enumerable:!0,get:function(){return h},set:function(t){var e=function(t){return"string"==typeof t&&!!a[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");h=e}}})}},cSMa:function(t,e,a){var i=function(){return this}()||Function("return this")(),r=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,n=r&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,t.exports=a("u4eC"),r)i.regeneratorRuntime=n;else try{delete i.regeneratorRuntime}catch(t){i.regeneratorRuntime=void 0}},ca2m:function(t,e,a){var i=a("bYtY"),r={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},n={};n.categoryAxis=i.merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},r),n.valueAxis=i.merge({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},r),n.timeAxis=i.defaults({scale:!0,min:"dataMin",max:"dataMax"},n.valueAxis),n.logAxis=i.defaults({scale:!0,logBase:10},n.valueAxis);var o=n;t.exports=o},czaS:function(t,e,a){var i=a("USwo"),r=a("VSTI"),n=a("S4vA");t.exports=function(t,e){var a=(r.Object||{})[t]||Object[t],o={};o[t]=e(a),i(i.S+i.F*n(function(){a(1)}),"Object",o)}},"d+lc":function(t,e,a){var i=a("ekG2");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},dMvE:function(t,e){var a={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,a=.1;return 0===t?0:1===t?1:(!a||a<1?(a=1,e=.1):e=.4*Math.asin(1/a)/(2*Math.PI),-a*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,a=.1;return 0===t?0:1===t?1:(!a||a<1?(a=1,e=.1):e=.4*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,a=.1;return 0===t?0:1===t?1:(!a||a<1?(a=1,e=.1):e=.4*Math.asin(1/a)/(2*Math.PI),(t*=2)<1?a*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:a*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-a.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*a.bounceIn(2*t):.5*a.bounceOut(2*t-1)+.5}},i=a;t.exports=i},dqUG:function(t,e,a){var i=a("Gev7"),r=a("bYtY"),n=a("6GrX"),o=a("pzxd"),s=a("gut8").ContextCachedBy,h=function(t){i.call(this,t)};h.prototype={constructor:h,type:"text",brush:function(t,e){var a=this.style;this.__dirty&&o.normalizeTextStyle(a,!0),a.fill=a.stroke=a.shadowBlur=a.shadowColor=a.shadowOffsetX=a.shadowOffsetY=null;var i=a.text;null!=i&&(i+=""),o.needDrawText(i,a)?(this.setTransform(t),o.renderText(this,t,i,a,null,e),this.restoreTransform(t)):t.__attrCachedBy=s.NONE},getBoundingRect:function(){var t=this.style;if(this.__dirty&&o.normalizeTextStyle(t,!0),!this._rect){var e=t.text;null!=e?e+="":e="";var a=n.getBoundingRect(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich);if(a.x+=t.x||0,a.y+=t.y||0,o.getStroke(t.textStroke,t.textStrokeWidth)){var i=t.textStrokeWidth;a.x-=i/2,a.y-=i/2,a.width+=i,a.height+=i}this._rect=a}return this._rect}},r.inherits(h,i);var l=h;t.exports=l},"du/1":function(t,e,a){var i=a("USwo");i(i.S,"Object",{create:a("b08l")})},e56k:function(t,e,a){a("ZY/g"),a("C5kU"),t.exports=a("iqsF")},eRkO:function(t,e,a){var i=a("+TT/"),r=i.getLayoutRect,n=i.box,o=i.positionElement,s=a("7aKB"),h=a("IwbS");e.layout=function(t,e,a){var i=e.getBoxLayoutParams(),s=e.get("padding"),h={width:a.getWidth(),height:a.getHeight()},l=r(i,h,s);n(e.get("orient"),t,e.get("itemGap"),l.width,l.height),o(t,i,h,s)},e.makeBackground=function(t,e){var a=s.normalizeCssArray(e.get("padding")),i=e.getItemStyle(["color","opacity"]);return i.fill=e.get("backgroundColor"),t=new h.Rect({shape:{x:t.x-a[3],y:t.y-a[0],width:t.width+a[1]+a[3],height:t.height+a[0]+a[2],r:e.get("borderRadius")},style:i,silent:!0,z2:-1})}},ekG2:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},endd:function(t,e,a){"use strict";function i(t){this.message=t}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,t.exports=i},eqyj:function(t,e,a){"use strict";var i=a("xTJ+");t.exports=i.isStandardBrowserEnv()?{write:function(t,e,a,r,n,o){var s=[];s.push(t+"="+encodeURIComponent(e)),i.isNumber(a)&&s.push("expires="+new Date(a).toGMTString()),i.isString(r)&&s.push("path="+r),i.isString(n)&&s.push("domain="+n),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},ez49:function(t,e,a){"use strict";var i,r=a("o97j");r.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""))
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */,t.exports=function(t,e){if(!r.canUseDOM||e&&!("addEventListener"in document))return!1;var a="on"+t,n=a in document;if(!n){var o=document.createElement("div");o.setAttribute(a,"return;"),n="function"==typeof o[a]}return!n&&i&&"wheel"===t&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}},f5Yq:function(t,e,a){var i=a("bYtY").isFunction;t.exports=function(t,e,a){return{seriesType:t,performRawSeries:!0,reset:function(t,r,n){var o=t.getData(),s=t.get("symbol"),h=t.get("symbolSize"),l=t.get("symbolKeepAspect"),u=t.get("symbolRotate"),c=i(s),f=i(h),d=i(u),C=c||f||d,p=!c&&s?s:e,m=f?null:h;if(o.setVisual({legendSymbol:a||p,symbol:p,symbolSize:m,symbolKeepAspect:l,symbolRotate:u}),!r.isSeriesFiltered(t))return{dataEach:o.hasItemOption||C?function(e,a){if(C){var i=t.getRawValue(a),r=t.getDataParams(a);c&&e.setItemVisual(a,"symbol",s(i,r)),f&&e.setItemVisual(a,"symbolSize",h(i,r)),d&&e.setItemVisual(a,"symbolRotate",u(i,r))}if(e.hasItemOption){var n=e.getItemModel(a),o=n.getShallow("symbol",!0),l=n.getShallow("symbolSize",!0),p=n.getShallow("symbolRotate",!0),m=n.getShallow("symbolKeepAspect",!0);null!=o&&e.setItemVisual(a,"symbol",o),null!=l&&e.setItemVisual(a,"symbolSize",l),null!=p&&e.setItemVisual(a,"symbolRotate",p),null!=m&&e.setItemVisual(a,"symbolKeepAspect",m)}}:null}}}}},fUKC:function(t,e,a){a("ZY/g"),a("C5kU"),t.exports=a("sbOA")},fW2E:function(t,e){var a={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1};t.exports=function(t,e,i){return a.hasOwnProperty(e)?i*t.dpr:i}},fmMI:function(t,e,a){a("Tghj").__DEV__;var i=a("bYtY"),r=i.each,n=i.filter,o=i.map,s=i.isArray,h=i.indexOf,l=i.isObject,u=i.isString,c=i.createHashMap,f=i.assert,d=i.clone,C=i.merge,p=i.extend,m=i.mixin,D=a("4NO4"),v=a("Qxkt"),g=a("bLfw"),S=a("iXHM"),T=a("5Hur"),I=a("D5nY").resetSourceDefaulter,y="\0_ec_inner",x=v.extend({init:function(t,e,a,i){a=a||{},this.option=null,this._theme=new v(a),this._optionManager=i},setOption:function(t,e){f(!(y in t),"please use chart.getOption()"),this._optionManager.setOption(t,e),this.resetOption(null)},resetOption:function(t){var e=!1,a=this._optionManager;if(!t||"recreate"===t){var i=a.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this.mergeOption(i)):function(t){t=t,this.option={},this.option[y]=1,this._componentsMap=c({series:[]}),this._seriesIndices,this._seriesIndicesMap,function(t,e){var a=t.color&&!t.colorLayer;r(e,function(e,i){"colorLayer"===i&&a||g.hasClass(i)||("object"==typeof e?t[i]=t[i]?C(t[i],e,!1):d(e):null==t[i]&&(t[i]=e))})}(t,this._theme.option),C(t,S,!1),this.mergeOption(t)}.call(this,i),e=!0}if("timeline"!==t&&"media"!==t||this.restoreData(),!t||"recreate"===t||"timeline"===t){var n=a.getTimelineOption(this);n&&(this.mergeOption(n),e=!0)}if(!t||"recreate"===t||"media"===t){var o=a.getMediaOption(this,this._api);o.length&&r(o,function(t){this.mergeOption(t,e=!0)},this)}return e},mergeOption:function(t){var e=this.option,a=this._componentsMap,i=[];I(this),r(t,function(t,a){null!=t&&(g.hasClass(a)?a&&i.push(a):e[a]=null==e[a]?d(t):C(e[a],t,!0))}),g.topologicalTravel(i,g.getAllClassMainTypes(),function(i,n){var o=D.normalizeToArray(t[i]),h=D.mappingToExists(a.get(i),o);D.makeIdAndName(h),r(h,function(t,e){var a=t.option;l(a)&&(t.keyInfo.mainType=i,t.keyInfo.subType=function(t,e,a){return e.type?e.type:a?a.subType:g.determineSubType(t,e)}(i,a,t.exist))});var u=function(t,e){s(e)||(e=e?[e]:[]);var a={};return r(e,function(e){a[e]=(t.get(e)||[]).slice()}),a}(a,n);e[i]=[],a.set(i,[]),r(h,function(t,r){var n=t.exist,o=t.option;if(f(l(o)||n,"Empty component definition"),o){var s=g.getClass(i,t.keyInfo.subType,!0);if(n&&n.constructor===s)n.name=t.keyInfo.name,n.mergeOption(o,this),n.optionUpdated(o,!1);else{var h=p({dependentModels:u,componentIndex:r},t.keyInfo);n=new s(o,this,this,h),p(n,h),n.init(o,this,this,h),n.optionUpdated(null,!0)}}else n.mergeOption({},this),n.optionUpdated({},!1);a.get(i)[r]=n,e[i][r]=n.option},this),"series"===i&&w(this,a.get("series"))},this),this._seriesIndicesMap=c(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var t=d(this.option);return r(t,function(e,a){if(g.hasClass(a)){for(var i=(e=D.normalizeToArray(e)).length-1;i>=0;i--)D.isIdInner(e[i])&&e.splice(i,1);t[a]=e}}),delete t[y],t},getTheme:function(){return this._theme},getComponent:function(t,e){var a=this._componentsMap.get(t);if(a)return a[e||0]},queryComponents:function(t){var e=t.mainType;if(!e)return[];var a,i=t.index,r=t.id,l=t.name,u=this._componentsMap.get(e);if(!u||!u.length)return[];if(null!=i)s(i)||(i=[i]),a=n(o(i,function(t){return u[t]}),function(t){return!!t});else if(null!=r){var c=s(r);a=n(u,function(t){return c&&h(r,t.id)>=0||!c&&t.id===r})}else if(null!=l){var f=s(l);a=n(u,function(t){return f&&h(l,t.name)>=0||!f&&t.name===l})}else a=u.slice();return F(a,t)},findComponents:function(t){var e=t.query,a=t.mainType,i=function(t){var e=a+"Index",i=a+"Id",r=a+"Name";return!t||null==t[e]&&null==t[i]&&null==t[r]?null:{mainType:a,index:t[e],id:t[i],name:t[r]}}(e);return function(e){return t.filter?n(e,t.filter):e}(F(i?this.queryComponents(i):this._componentsMap.get(a),t))},eachComponent:function(t,e,a){var i=this._componentsMap;if("function"==typeof t)a=e,e=t,i.each(function(t,i){r(t,function(t,r){e.call(a,i,t,r)})});else if(u(t))r(i.get(t),e,a);else if(l(t)){var n=this.findComponents(t);r(n,e,a)}},getSeriesByName:function(t){var e=this._componentsMap.get("series");return n(e,function(e){return e.name===t})},getSeriesByIndex:function(t){return this._componentsMap.get("series")[t]},getSeriesByType:function(t){var e=this._componentsMap.get("series");return n(e,function(e){return e.subType===t})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(t,e){r(this._seriesIndices,function(a){var i=this._componentsMap.get("series")[a];t.call(e,i,a)},this)},eachRawSeries:function(t,e){r(this._componentsMap.get("series"),t,e)},eachSeriesByType:function(t,e,a){r(this._seriesIndices,function(i){var r=this._componentsMap.get("series")[i];r.subType===t&&e.call(a,r,i)},this)},eachRawSeriesByType:function(t,e,a){return r(this.getSeriesByType(t),e,a)},isSeriesFiltered:function(t){return null==this._seriesIndicesMap.get(t.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(t,e){w(this,n(this._componentsMap.get("series"),t,e))},restoreData:function(t){var e=this._componentsMap;w(this,e.get("series"));var a=[];e.each(function(t,e){a.push(e)}),g.topologicalTravel(a,g.getAllClassMainTypes(),function(a,i){r(e.get(a),function(e){("series"!==a||!function(t,e){if(e){var a=e.seiresIndex,i=e.seriesId,r=e.seriesName;return null!=a&&t.componentIndex!==a||null!=i&&t.id!==i||null!=r&&t.name!==r}}(e,t))&&e.restoreData()})})}});function w(t,e){t._seriesIndicesMap=c(t._seriesIndices=o(e,function(t){return t.componentIndex})||[])}function F(t,e){return e.hasOwnProperty("subType")?n(t,function(t){return t.subType===e.subType}):t}m(x,T);var E=x;t.exports=E},g2LC:function(t,e){t.exports=function(t){if(!t)return!1;var e=a.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var a=Object.prototype.toString},g7np:function(t,e,a){"use strict";var i=a("2SVd"),r=a("5oMp");t.exports=function(t,e){return t&&!i(e)?r(t,e):e}},"gDS+":function(t,e,a){t.exports={default:a("t/pG"),__esModule:!0}},gPAo:function(t,e){function a(t){return t}function i(t,e,i,r,n){this._old=t,this._new=e,this._oldKeyGetter=i||a,this._newKeyGetter=r||a,this.context=n}function r(t,e,a,i,r){for(var n=0;n<t.length;n++){var o="_ec_"+r[i](t[n],n),s=e[o];null==s?(a.push(o),e[o]=n):(s.length||(e[o]=s=[s]),s.push(n))}}i.prototype={constructor:i,add:function(t){return this._add=t,this},update:function(t){return this._update=t,this},remove:function(t){return this._remove=t,this},execute:function(){var t=this._old,e=this._new,a={},i=[],n=[];for(r(t,{},i,"_oldKeyGetter",this),r(e,a,n,"_newKeyGetter",this),o=0;o<t.length;o++){if(null!=(h=a[s=i[o]]))(u=h.length)?(1===u&&(a[s]=null),h=h.shift()):a[s]=null,this._update&&this._update(h,o);else this._remove&&this._remove(o)}for(var o=0;o<n.length;o++){var s=n[o];if(a.hasOwnProperty(s)){var h;if(null==(h=a[s]))continue;if(h.length)for(var l=0,u=h.length;l<u;l++)this._add&&this._add(h[l]);else this._add&&this._add(h)}}}};var n=i;t.exports=n},gRli:function(t,e,a){a("aT0f"),a("3+Ww"),a("MBy0"),a("TnF5"),t.exports=a("VSTI").Symbol},gjeX:function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;
/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
!function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__("PDX0"),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t){return function(e){return new Md5(!0).update(e)[t]()}},createMethod=function(){var t=createOutputMethod("hex");NODE_JS&&(t=nodeWrap(t)),t.create=function(){return new Md5},t.update=function(e){return t.create().update(e)};for(var e=0;e<OUTPUT_TYPES.length;++e){var a=OUTPUT_TYPES[e];t[a]=createOutputMethod(a)}return t},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(t){if("string"==typeof t)return crypto.createHash("md5").update(t,"utf8").digest("hex");if(null===t||void 0===t)throw ERROR;return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer?crypto.createHash("md5").update(new Buffer(t)).digest("hex"):method(t)};return nodeMethod};function Md5(t){if(t)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var e=new ArrayBuffer(68);this.buffer8=new Uint8Array(e),this.blocks=new Uint32Array(e)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(t){if(!this.finalized){var e,a=typeof t;if("string"!==a){if("object"!==a)throw ERROR;if(null===t)throw ERROR;if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||ARRAY_BUFFER&&ArrayBuffer.isView(t)))throw ERROR;e=!0}for(var i,r,n=0,o=t.length,s=this.blocks,h=this.buffer8;n<o;){if(this.hashed&&(this.hashed=!1,s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),e)if(ARRAY_BUFFER)for(r=this.start;n<o&&r<64;++n)h[r++]=t[n];else for(r=this.start;n<o&&r<64;++n)s[r>>2]|=t[n]<<SHIFT[3&r++];else if(ARRAY_BUFFER)for(r=this.start;n<o&&r<64;++n)(i=t.charCodeAt(n))<128?h[r++]=i:i<2048?(h[r++]=192|i>>6,h[r++]=128|63&i):i<55296||i>=57344?(h[r++]=224|i>>12,h[r++]=128|i>>6&63,h[r++]=128|63&i):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++n)),h[r++]=240|i>>18,h[r++]=128|i>>12&63,h[r++]=128|i>>6&63,h[r++]=128|63&i);else for(r=this.start;n<o&&r<64;++n)(i=t.charCodeAt(n))<128?s[r>>2]|=i<<SHIFT[3&r++]:i<2048?(s[r>>2]|=(192|i>>6)<<SHIFT[3&r++],s[r>>2]|=(128|63&i)<<SHIFT[3&r++]):i<55296||i>=57344?(s[r>>2]|=(224|i>>12)<<SHIFT[3&r++],s[r>>2]|=(128|i>>6&63)<<SHIFT[3&r++],s[r>>2]|=(128|63&i)<<SHIFT[3&r++]):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++n)),s[r>>2]|=(240|i>>18)<<SHIFT[3&r++],s[r>>2]|=(128|i>>12&63)<<SHIFT[3&r++],s[r>>2]|=(128|i>>6&63)<<SHIFT[3&r++],s[r>>2]|=(128|63&i)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[e>>2]|=EXTRA[3&e],e>=56&&(this.hashed||this.hash(),t[0]=t[16],t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.bytes<<3,t[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var t,e,a,i,r,n,o=this.blocks;this.first?e=((e=((t=((t=o[0]-680876937)<<7|t>>>25)-271733879<<0)^(a=((a=(-271733879^(i=((i=(-1732584194^2004318071&t)+o[1]-117830708)<<12|i>>>20)+t<<0)&(-271733879^t))+o[2]-1126478375)<<17|a>>>15)+i<<0)&(i^t))+o[3]-1316259209)<<22|e>>>10)+a<<0:(t=this.h0,e=this.h1,a=this.h2,e=((e+=((t=((t+=((i=this.h3)^e&(a^i))+o[0]-680876936)<<7|t>>>25)+e<<0)^(a=((a+=(e^(i=((i+=(a^t&(e^a))+o[1]-389564586)<<12|i>>>20)+t<<0)&(t^e))+o[2]+606105819)<<17|a>>>15)+i<<0)&(i^t))+o[3]-1044525330)<<22|e>>>10)+a<<0),e=((e+=((t=((t+=(i^e&(a^i))+o[4]-176418897)<<7|t>>>25)+e<<0)^(a=((a+=(e^(i=((i+=(a^t&(e^a))+o[5]+1200080426)<<12|i>>>20)+t<<0)&(t^e))+o[6]-1473231341)<<17|a>>>15)+i<<0)&(i^t))+o[7]-45705983)<<22|e>>>10)+a<<0,e=((e+=((t=((t+=(i^e&(a^i))+o[8]+1770035416)<<7|t>>>25)+e<<0)^(a=((a+=(e^(i=((i+=(a^t&(e^a))+o[9]-1958414417)<<12|i>>>20)+t<<0)&(t^e))+o[10]-42063)<<17|a>>>15)+i<<0)&(i^t))+o[11]-1990404162)<<22|e>>>10)+a<<0,e=((e+=((t=((t+=(i^e&(a^i))+o[12]+1804603682)<<7|t>>>25)+e<<0)^(a=((a+=(e^(i=((i+=(a^t&(e^a))+o[13]-40341101)<<12|i>>>20)+t<<0)&(t^e))+o[14]-1502002290)<<17|a>>>15)+i<<0)&(i^t))+o[15]+1236535329)<<22|e>>>10)+a<<0,e=((e+=((i=((i+=(e^a&((t=((t+=(a^i&(e^a))+o[1]-165796510)<<5|t>>>27)+e<<0)^e))+o[6]-1069501632)<<9|i>>>23)+t<<0)^t&((a=((a+=(t^e&(i^t))+o[11]+643717713)<<14|a>>>18)+i<<0)^i))+o[0]-373897302)<<20|e>>>12)+a<<0,e=((e+=((i=((i+=(e^a&((t=((t+=(a^i&(e^a))+o[5]-701558691)<<5|t>>>27)+e<<0)^e))+o[10]+38016083)<<9|i>>>23)+t<<0)^t&((a=((a+=(t^e&(i^t))+o[15]-660478335)<<14|a>>>18)+i<<0)^i))+o[4]-405537848)<<20|e>>>12)+a<<0,e=((e+=((i=((i+=(e^a&((t=((t+=(a^i&(e^a))+o[9]+568446438)<<5|t>>>27)+e<<0)^e))+o[14]-1019803690)<<9|i>>>23)+t<<0)^t&((a=((a+=(t^e&(i^t))+o[3]-187363961)<<14|a>>>18)+i<<0)^i))+o[8]+1163531501)<<20|e>>>12)+a<<0,e=((e+=((i=((i+=(e^a&((t=((t+=(a^i&(e^a))+o[13]-1444681467)<<5|t>>>27)+e<<0)^e))+o[2]-51403784)<<9|i>>>23)+t<<0)^t&((a=((a+=(t^e&(i^t))+o[7]+1735328473)<<14|a>>>18)+i<<0)^i))+o[12]-1926607734)<<20|e>>>12)+a<<0,e=((e+=((n=(i=((i+=((r=e^a)^(t=((t+=(r^i)+o[5]-378558)<<4|t>>>28)+e<<0))+o[8]-2022574463)<<11|i>>>21)+t<<0)^t)^(a=((a+=(n^e)+o[11]+1839030562)<<16|a>>>16)+i<<0))+o[14]-35309556)<<23|e>>>9)+a<<0,e=((e+=((n=(i=((i+=((r=e^a)^(t=((t+=(r^i)+o[1]-1530992060)<<4|t>>>28)+e<<0))+o[4]+1272893353)<<11|i>>>21)+t<<0)^t)^(a=((a+=(n^e)+o[7]-155497632)<<16|a>>>16)+i<<0))+o[10]-1094730640)<<23|e>>>9)+a<<0,e=((e+=((n=(i=((i+=((r=e^a)^(t=((t+=(r^i)+o[13]+681279174)<<4|t>>>28)+e<<0))+o[0]-358537222)<<11|i>>>21)+t<<0)^t)^(a=((a+=(n^e)+o[3]-722521979)<<16|a>>>16)+i<<0))+o[6]+76029189)<<23|e>>>9)+a<<0,e=((e+=((n=(i=((i+=((r=e^a)^(t=((t+=(r^i)+o[9]-640364487)<<4|t>>>28)+e<<0))+o[12]-421815835)<<11|i>>>21)+t<<0)^t)^(a=((a+=(n^e)+o[15]+530742520)<<16|a>>>16)+i<<0))+o[2]-995338651)<<23|e>>>9)+a<<0,e=((e+=((i=((i+=(e^((t=((t+=(a^(e|~i))+o[0]-198630844)<<6|t>>>26)+e<<0)|~a))+o[7]+1126891415)<<10|i>>>22)+t<<0)^((a=((a+=(t^(i|~e))+o[14]-1416354905)<<15|a>>>17)+i<<0)|~t))+o[5]-57434055)<<21|e>>>11)+a<<0,e=((e+=((i=((i+=(e^((t=((t+=(a^(e|~i))+o[12]+1700485571)<<6|t>>>26)+e<<0)|~a))+o[3]-1894986606)<<10|i>>>22)+t<<0)^((a=((a+=(t^(i|~e))+o[10]-1051523)<<15|a>>>17)+i<<0)|~t))+o[1]-2054922799)<<21|e>>>11)+a<<0,e=((e+=((i=((i+=(e^((t=((t+=(a^(e|~i))+o[8]+1873313359)<<6|t>>>26)+e<<0)|~a))+o[15]-30611744)<<10|i>>>22)+t<<0)^((a=((a+=(t^(i|~e))+o[6]-1560198380)<<15|a>>>17)+i<<0)|~t))+o[13]+1309151649)<<21|e>>>11)+a<<0,e=((e+=((i=((i+=(e^((t=((t+=(a^(e|~i))+o[4]-145523070)<<6|t>>>26)+e<<0)|~a))+o[11]-1120210379)<<10|i>>>22)+t<<0)^((a=((a+=(t^(i|~e))+o[2]+718787259)<<15|a>>>17)+i<<0)|~t))+o[9]-343485551)<<21|e>>>11)+a<<0,this.first?(this.h0=t+1732584193<<0,this.h1=e-271733879<<0,this.h2=a-1732584194<<0,this.h3=i+271733878<<0,this.first=!1):(this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+a<<0,this.h3=this.h3+i<<0)},Md5.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,a=this.h2,i=this.h3;return HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,a=this.h2,i=this.h3;return[255&t,t>>8&255,t>>16&255,t>>24&255,255&e,e>>8&255,e>>16&255,e>>24&255,255&a,a>>8&255,a>>16&255,a>>24&255,255&i,i>>8&255,i>>16&255,i>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(16),e=new Uint32Array(t);return e[0]=this.h0,e[1]=this.h1,e[2]=this.h2,e[3]=this.h3,t},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var t,e,a,i="",r=this.array(),n=0;n<15;)t=r[n++],e=r[n++],a=r[n++],i+=BASE64_ENCODE_CHAR[t>>>2]+BASE64_ENCODE_CHAR[63&(t<<4|e>>>4)]+BASE64_ENCODE_CHAR[63&(e<<2|a>>>6)]+BASE64_ENCODE_CHAR[63&a];return t=r[n],i+=BASE64_ENCODE_CHAR[t>>>2]+BASE64_ENCODE_CHAR[t<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()}).call(this,__webpack_require__("8oxB"),__webpack_require__("yLpj"))},gut8:function(t,e){e.ContextCachedBy={NONE:0,STYLE_BIND:1,PLAIN_TEXT:2},e.WILL_BE_RESTORED=9},gvm7:function(t,e,a){var i=a("bYtY"),r=a("dqUG"),n=a("IwbS");function o(t,e,a,i){t[0]=a,t[1]=i,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}function s(t){var e=this._zr=t.getZr();this._styleCoord=[0,0,0,0],o(this._styleCoord,e,t.getWidth()/2,t.getHeight()/2),this._show=!1,this._hideTimeout}s.prototype={constructor:s,_enterable:!0,update:function(t){t.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[2],e=this._styleCoord[3],a=t*this._zr.getWidth(),i=e*this._zr.getHeight();this.moveTo(a,i)},show:function(t){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(t,e,a){this.el&&this._zr.remove(this.el);for(var i={},o=t,s=o.indexOf("{marker");s>=0;){var h=o.indexOf("|}"),l=o.substr(s+"{marker".length,h-s-"{marker".length);l.indexOf("sub")>-1?i["marker"+l]={textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:e[l],textOffset:[3,0]}:i["marker"+l]={textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:e[l]},s=(o=o.substr(h+1)).indexOf("{marker")}var u=a.getModel("textStyle"),c=u.get("fontSize"),f=a.get("textLineHeight");null==f&&(f=Math.round(3*c/2)),this.el=new r({style:n.setTextStyle({},u,{rich:i,text:t,textBackgroundColor:a.get("backgroundColor"),textBorderRadius:a.get("borderRadius"),textFill:a.get("textStyle.color"),textPadding:a.get("padding"),textLineHeight:f}),z:a.get("z")}),this._zr.add(this.el);var d=this;this.el.on("mouseover",function(){d._enterable&&(clearTimeout(d._hideTimeout),d._show=!0),d._inContent=!0}),this.el.on("mouseout",function(){d._enterable&&d._show&&d.hideLater(d._hideDelay),d._inContent=!1})},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el.getBoundingRect();return[t.width,t.height]},moveTo:function(t,e){if(this.el){var a=this._styleCoord;o(a,this._zr,t,e),this.el.attr("position",[a[0],a[1]])}},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(i.bind(this.hide,this),t)):this.hide())},isShow:function(){return this._show},dispose:function(){clearTimeout(this._hideTimeout),this.el&&this._zr.remove(this.el)},getOuterSize:function(){var t=this.getSize();return{width:t[0],height:t[1]}}};var h=s;t.exports=h},h2Jp:function(t,e,a){a("3+Ww"),t.exports=a("/NTb").f("toStringTag")},h3Hq:function(t,e,a){var i=a("zBWt")("iterator"),r=!1;try{var n=[7][i]();n.return=function(){r=!0},Array.from(n,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var a=!1;try{var n=[7],o=n[i]();o.next=function(){return{done:a=!0}},n[i]=function(){return o},t(n)}catch(t){}return a}},h7HQ:function(t,e,a){var i=a("y+Vt"),r=a("T6xi"),n=i.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){r.buildPath(t,e,!0)}});t.exports=n},h8O9:function(t,e,a){var i=a("bYtY").map,r=a("zM3Q"),n=a("7hqr").isDimensionStacked;t.exports=function(t){return{seriesType:t,plan:r(),reset:function(t){var e=t.getData(),a=t.coordinateSystem,r=t.pipelineContext.large;if(a){var o=i(a.dimensions,function(t){return e.mapDimension(t)}).slice(0,2),s=o.length,h=e.getCalculationInfo("stackResultDimension");return n(e,o[0])&&(o[0]=h),n(e,o[1])&&(o[1]=h),s&&{progress:function(t,e){for(var i=t.end-t.start,n=r&&new Float32Array(i*s),h=t.start,l=0,u=[],c=[];h<t.end;h++){var f;if(1===s){var d=e.get(o[0],h);f=!isNaN(d)&&a.dataToPoint(d,null,c)}else{d=u[0]=e.get(o[0],h);var C=u[1]=e.get(o[1],h);f=!isNaN(d)&&!isNaN(C)&&a.dataToPoint(u,null,c)}r?(n[l++]=f?f[0]:NaN,n[l++]=f?f[1]:NaN):e.setItemLayout(h,f&&f.slice()||[NaN,NaN])}r&&e.setLayout("symbolPoints",n)}}}}}}},hD7B:function(t,e,a){var i=a("bYtY"),r=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];var n=function(t){i.each(r,function(e){this[e]=i.bind(t[e],t)},this)};t.exports=n},hM6l:function(t,e,a){var i=a("bYtY"),r=i.each,n=i.map,o=a("OELB"),s=o.linearMap,h=o.getPixelPrecision,l=o.round,u=a("4HMb"),c=u.createAxisTicks,f=u.createAxisLabels,d=u.calculateCategoryInterval,C=[0,1],p=function(t,e,a){this.dim=t,this.scale=e,this._extent=a||[0,0],this.inverse=!1,this.onBand=!1};function m(t,e){var a=(t[1]-t[0])/e/2;t[0]+=a,t[1]-=a}p.prototype={constructor:p,contain:function(t){var e=this._extent,a=Math.min(e[0],e[1]),i=Math.max(e[0],e[1]);return t>=a&&t<=i},containData:function(t){return this.scale.contain(t)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(t){return h(t||this.scale.getExtent(),this._extent)},setExtent:function(t,e){var a=this._extent;a[0]=t,a[1]=e},dataToCoord:function(t,e){var a=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&"ordinal"===i.type&&m(a=a.slice(),i.count()),s(t,C,a,e)},coordToData:function(t,e){var a=this._extent,i=this.scale;this.onBand&&"ordinal"===i.type&&m(a=a.slice(),i.count());var r=s(t,a,C,e);return this.scale.scale(r)},pointToData:function(t,e){},getTicksCoords:function(t){var e=(t=t||{}).tickModel||this.getTickModel(),a=c(this,e).ticks,i=n(a,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this);return function(t,e,a,i){var n=e.length;if(!t.onBand||a||!n)return;var o,s,h=t.getExtent();if(1===n)e[0].coord=h[0],o=e[1]={coord:h[0]};else{var u=e[n-1].tickValue-e[0].tickValue,c=(e[n-1].coord-e[0].coord)/u;r(e,function(t){t.coord-=c/2});var f=t.scale.getExtent();s=1+f[1]-e[n-1].tickValue,o={coord:e[n-1].coord+c*s},e.push(o)}var d=h[0]>h[1];C(e[0].coord,h[0])&&(i?e[0].coord=h[0]:e.shift());i&&C(h[0],e[0].coord)&&e.unshift({coord:h[0]});C(h[1],o.coord)&&(i?o.coord=h[1]:e.pop());i&&C(o.coord,h[1])&&e.push({coord:h[1]});function C(t,e){return t=l(t),e=l(e),d?t>e:t<e}}(this,i,e.get("alignWithLabel"),t.clamp),i},getMinorTicksCoords:function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick").get("splitNumber");t>0&&t<100||(t=5);var e=this.scale.getMinorTicks(t);return n(e,function(t){return n(t,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this)},this)},getViewLabels:function(){return f(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var t=this._extent,e=this.scale.getExtent(),a=e[1]-e[0]+(this.onBand?1:0);0===a&&(a=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/a},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return d(this)}};var D=p;t.exports=D},hNWo:function(t,e,a){var i=a("ProS"),r=a("bYtY"),n=a("Qxkt"),o=a("4NO4").isNameSpecified,s=a("Kagy").legend.selector,h={all:{type:"all",title:r.clone(s.all)},inverse:{type:"inverse",title:r.clone(s.inverse)}},l=i.extendComponentModel({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(t,e,a){this.mergeDefaultAndTheme(t,a),t.selected=t.selected||{},this._updateSelector(t)},mergeOption:function(t){l.superCall(this,"mergeOption",t),this._updateSelector(t)},_updateSelector:function(t){var e=t.selector;!0===e&&(e=t.selector=["all","inverse"]),r.isArray(e)&&r.each(e,function(t,a){r.isString(t)&&(t={type:t}),e[a]=r.merge(t,h[t.type])})},optionUpdated:function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,a=0;a<t.length;a++){var i=t[a].get("name");if(this.isSelected(i)){this.select(i),e=!0;break}}!e&&this.select(t[0].get("name"))}},_updateData:function(t){var e=[],a=[];t.eachRawSeries(function(i){var r,n=i.name;if(a.push(n),i.legendVisualProvider){var s=i.legendVisualProvider.getAllNames();t.isSeriesFiltered(i)||(a=a.concat(s)),s.length?e=e.concat(s):r=!0}else r=!0;r&&o(i)&&e.push(i.name)}),this._availableNames=a;var i=this.get("data")||e,s=r.map(i,function(t){return"string"!=typeof t&&"number"!=typeof t||(t={name:t}),new n(t,this,this.ecModel)},this);this._data=s},getData:function(){return this._data},select:function(t){var e=this.option.selected;if("single"===this.get("selectedMode")){var a=this._data;r.each(a,function(t){e[t.get("name")]=!1})}e[t]=!0},unSelect:function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},toggleSelected:function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},allSelect:function(){var t=this._data,e=this.option.selected;r.each(t,function(t){e[t.get("name",!0)]=!0})},inverseSelect:function(){var t=this._data,e=this.option.selected;r.each(t,function(t){var a=t.get("name",!0);e.hasOwnProperty(a)||(e[a]=!0),e[a]=!e[a]})},isSelected:function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&r.indexOf(this._availableNames,t)>=0},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}}),u=l;t.exports=u},hOwI:function(t,e){var a=Math.log(2);function i(t,e,r,n,o,s){var h=n+"-"+o,l=t.length;if(s.hasOwnProperty(h))return s[h];if(1===e){var u=Math.round(Math.log((1<<l)-1&~o)/a);return t[r][u]}for(var c=n|1<<r,f=r+1;n&1<<f;)f++;for(var d=0,C=0,p=0;C<l;C++){var m=1<<C;m&o||(d+=(p%2?-1:1)*t[r][C]*i(t,e-1,f,c,o|m,s),p++)}return s[h]=d,d}e.buildTransformer=function(t,e){var a=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],r={},n=i(a,8,0,0,0,r);if(0!==n){for(var o=[],s=0;s<8;s++)for(var h=0;h<8;h++)null==o[h]&&(o[h]=0),o[h]+=((s+h)%2?-1:1)*i(a,7,0===s?1:0,1<<s,1<<h,r)/n*e[s];return function(t,e,a){var i=e*o[6]+a*o[7]+1;t[0]=(e*o[0]+a*o[1]+o[2])/i,t[1]=(e*o[3]+a*o[4]+o[5])/i}}}},hX1E:function(t,e){var a=2*Math.PI;e.normalizeRadian=function(t){return(t%=a)<0&&(t+=a),t}},heda:function(t,e,a){var i=a("GhSp"),r=a("d+lc"),n=a("mHY4");t.exports=a("C61u")?Object.defineProperties:function(t,e){r(t);for(var a,o=n(e),s=o.length,h=0;s>h;)i.f(t,a=o[h++],e[a]);return t}},hi0g:function(t,e,a){var i=a("bYtY"),r=i.createHashMap,n=i.each,o=i.isString,s=i.defaults,h=i.extend,l=i.isObject,u=i.clone,c=a("4NO4").normalizeToArray,f=a("D5nY"),d=f.guessOrdinal,C=f.BE_ORDINAL,p=a("7G+c"),m=a("L0Ub").OTHER_DIMENSIONS,D=a("Vi4m");function v(t,e,a){if(a||null!=e.get(t)){for(var i=0;null!=e.get(t+i);)i++;t+=i}return e.set(t,!0),t}var g=function(t,e,a){p.isInstance(e)||(e=p.seriesDataToSource(e)),a=a||{},t=(t||[]).slice();for(var i=(a.dimsDef||[]).slice(),f=r(),g=r(),S=[],T=function(t,e,a,i){var r=Math.max(t.dimensionsDetectCount||1,e.length,a.length,i||0);return n(e,function(t){var e=t.dimsDef;e&&(r=Math.max(r,e.length))}),r}(e,t,i,a.dimCount),I=0;I<T;I++){var y=i[I]=h({},l(i[I])?i[I]:{name:i[I]}),x=y.name,w=S[I]=new D;null!=x&&null==f.get(x)&&(w.name=w.displayName=x,f.set(x,I)),null!=y.type&&(w.type=y.type),null!=y.displayName&&(w.displayName=y.displayName)}var F=a.encodeDef;!F&&a.encodeDefaulter&&(F=a.encodeDefaulter(e,T)),(F=r(F)).each(function(t,e){if(1===(t=c(t).slice()).length&&!o(t[0])&&t[0]<0)F.set(e,!1);else{var a=F.set(e,[]);n(t,function(t,i){o(t)&&(t=f.get(t)),null!=t&&t<T&&(a[i]=t,b(S[t],e,i))})}});var E=0;function b(t,e,a){null!=m.get(e)?t.otherDims[e]=a:(t.coordDim=e,t.coordDimIndex=a,g.set(e,!0))}n(t,function(t,e){var a,i,r;if(o(t))a=t,t={};else{a=t.name;var h=t.ordinalMeta;t.ordinalMeta=null,(t=u(t)).ordinalMeta=h,i=t.dimsDef,r=t.otherDims,t.name=t.coordDim=t.coordDimIndex=t.dimsDef=t.otherDims=null}if(!1!==(f=F.get(a))){var f;if(!(f=c(f)).length)for(var d=0;d<(i&&i.length||1);d++){for(;E<S.length&&null!=S[E].coordDim;)E++;E<S.length&&f.push(E++)}n(f,function(e,n){var o=S[e];if(b(s(o,t),a,n),null==o.name&&i){var h=i[n];!l(h)&&(h={name:h}),o.name=o.displayName=h.name,o.defaultTooltip=h.defaultTooltip}r&&s(o.otherDims,r)})}});var L=a.generateCoord,M=a.generateCoordCount,A=null!=M;M=L?M||1:0;for(var O=L||"value",N=0;N<T;N++)null==(w=S[N]=S[N]||new D).coordDim&&(w.coordDim=v(O,g,A),w.coordDimIndex=0,(!L||M<=0)&&(w.isExtraCoord=!0),M--),null==w.name&&(w.name=v(w.coordDim,f)),null!=w.type||d(e,N,w.name)!==C.Must&&(!w.isExtraCoord||null==w.otherDims.itemName&&null==w.otherDims.seriesName)||(w.type="ordinal");return S};t.exports=g},hyiK:function(t,e){t.exports=function(t,e,a,i,r,n){if(n>e&&n>i||n<e&&n<i)return 0;if(i===e)return 0;var o=i<e?1:-1,s=(n-e)/(i-e);1!==s&&0!==s||(o=i<e?.5:-.5);var h=s*(a-t)+t;return h===r?1/0:h>r?o:0}},i38C:function(t,e,a){a("Tghj").__DEV__;var i=a("bYtY"),r=i.createHashMap,n=(i.retrieve,i.each);var o={cartesian2d:function(t,e,a,i){var r=t.getReferringComponents("xAxis")[0],n=t.getReferringComponents("yAxis")[0];e.coordSysDims=["x","y"],a.set("x",r),a.set("y",n),s(r)&&(i.set("x",r),e.firstCategoryDimIndex=0),s(n)&&(i.set("y",n),e.firstCategoryDimIndex,e.firstCategoryDimIndex=1)},singleAxis:function(t,e,a,i){var r=t.getReferringComponents("singleAxis")[0];e.coordSysDims=["single"],a.set("single",r),s(r)&&(i.set("single",r),e.firstCategoryDimIndex=0)},polar:function(t,e,a,i){var r=t.getReferringComponents("polar")[0],n=r.findAxisModel("radiusAxis"),o=r.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],a.set("radius",n),a.set("angle",o),s(n)&&(i.set("radius",n),e.firstCategoryDimIndex=0),s(o)&&(i.set("angle",o),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,a,i){e.coordSysDims=["lng","lat"]},parallel:function(t,e,a,i){var r=t.ecModel,o=r.getComponent("parallel",t.get("parallelIndex")),h=e.coordSysDims=o.dimensions.slice();n(o.parallelAxisIndex,function(t,n){var o=r.getComponent("parallelAxis",t),l=h[n];a.set(l,o),s(o)&&null==e.firstCategoryDimIndex&&(i.set(l,o),e.firstCategoryDimIndex=n)})}};function s(t){return"category"===t.get("type")}e.getCoordSysInfoBySeries=function(t){var e=t.get("coordinateSystem"),a=new function(t){this.coordSysName=t,this.coordSysDims=[],this.axisMap=r(),this.categoryAxisMap=r(),this.firstCategoryDimIndex=null}(e),i=o[e];if(i)return i(t,a,a.axisMap,a.categoryAxisMap),a}},iCc5:function(t,e,a){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},iLNv:function(t,e){var a="\0__throttleOriginMethod",i="\0__throttleRate",r="\0__throttleType";function n(t,e,a){var i,r,n,o,s,h=0,l=0,u=null;function c(){l=(new Date).getTime(),u=null,t.apply(n,o||[])}e=e||0;var f=function(){i=(new Date).getTime(),n=this,o=arguments;var t=s||e,f=s||a;s=null,r=i-(f?h:l)-t,clearTimeout(u),f?u=setTimeout(c,t):r>=0?c():u=setTimeout(c,-r),h=i};return f.clear=function(){u&&(clearTimeout(u),u=null)},f.debounceNextCall=function(t){s=t},f}e.throttle=n,e.createOrUpdate=function(t,e,o,s){var h=t[e];if(h){var l=h[a]||h,u=h[r];if(h[i]!==o||u!==s){if(null==o||!s)return t[e]=l;(h=t[e]=n(l,o,"debounce"===s))[a]=l,h[r]=s,h[i]=o}return h}},e.clear=function(t,e){var i=t[e];i&&i[a]&&(t[e]=i[a])}},iRjW:function(t,e,a){var i=a("bYtY"),r=a("Yl7c").parseClassType,n=0;e.getUID=function(t){return[t||"",n++,Math.random().toFixed(5)].join("_")},e.enableSubTypeDefaulter=function(t){var e={};return t.registerSubTypeDefaulter=function(t,a){t=r(t),e[t.main]=a},t.determineSubType=function(a,i){var n=i.type;if(!n){var o=r(a).main;t.hasSubTypes(a)&&e[o]&&(n=e[o](i))}return n},t},e.enableTopologicalTravel=function(t,e){function a(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}t.topologicalTravel=function(t,r,n,o){if(t.length){var s=function(t){var r={},n=[];return i.each(t,function(o){var s=a(r,o),h=function(t,e){var a=[];return i.each(t,function(t){i.indexOf(e,t)>=0&&a.push(t)}),a}(s.originalDeps=e(o),t);s.entryCount=h.length,0===s.entryCount&&n.push(o),i.each(h,function(t){i.indexOf(s.predecessor,t)<0&&s.predecessor.push(t);var e=a(r,t);i.indexOf(e.successor,t)<0&&e.successor.push(o)})}),{graph:r,noEntryList:n}}(r),h=s.graph,l=s.noEntryList,u={};for(i.each(t,function(t){u[t]=!0});l.length;){var c=l.pop(),f=h[c],d=!!u[c];d&&(n.call(o,c,f.originalDeps.slice()),delete u[c]),i.each(f.successor,d?p:C)}i.each(u,function(){throw new Error("Circle dependency may exists")})}function C(t){h[t].entryCount--,0===h[t].entryCount&&l.push(t)}function p(t){u[t]=!0,C(t)}}}},iXHM:function(t,e){var a="";"undefined"!=typeof navigator&&(a=navigator.platform||"");var i={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:a.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};t.exports=i},iXp4:function(t,e,a){var i=a("ItGF"),r=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];t.exports=function(t){return i.browser.ie&&i.browser.version>=11?function(){var e,a=this.__clipPaths,i=this.style;if(a)for(var n=0;n<a.length;n++){var o=a[n],s=o&&o.shape,h=o&&o.type;if(s&&("sector"===h&&s.startAngle===s.endAngle||"rect"===h&&(!s.width||!s.height))){for(var l=0;l<r.length;l++)r[l][2]=i[r[l][0]],i[r[l][0]]=r[l][1];e=!0;break}}if(t.apply(this,arguments),e)for(l=0;l<r.length;l++)i[r[l][0]]=r[l][2]}:t}},"iZ5/":function(t,e,a){var i=a("BRsN");t.exports=function(t,e,a){for(var r in e)a&&t[r]?t[r]=e[r]:i(t,r,e[r]);return t}},ieMj:function(t,e,a){var i=a("OELB"),r=a("7aKB"),n=a("4NgU"),o=a("lE7J"),s=i.round,h=n.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(t,e){var a=this._extent;isNaN(t)||(a[0]=parseFloat(t)),isNaN(e)||(a[1]=parseFloat(e))},unionExtent:function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),h.prototype.setExtent.call(this,e[0],e[1])},getInterval:function(){return this._interval},setInterval:function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=o.getIntervalPrecision(t)},getTicks:function(t){var e=this._interval,a=this._extent,i=this._niceExtent,r=this._intervalPrecision,n=[];if(!e)return n;a[0]<i[0]&&(t?n.push(s(i[0]-e,r)):n.push(a[0]));for(var o=i[0];o<=i[1]&&(n.push(o),(o=s(o+e,r))!==n[n.length-1]);)if(n.length>1e4)return[];var h=n.length?n[n.length-1]:i[1];return a[1]>h&&(t?n.push(s(h+e,r)):n.push(a[1])),n},getMinorTicks:function(t){for(var e=this.getTicks(!0),a=[],r=this.getExtent(),n=1;n<e.length;n++){for(var o=e[n],s=e[n-1],h=0,l=[],u=(o-s)/t;h<t-1;){var c=i.round(s+(h+1)*u);c>r[0]&&c<r[1]&&l.push(c),h++}a.push(l)}return a},getLabel:function(t,e){if(null==t)return"";var a=e&&e.precision;return null==a?a=i.getPrecisionSafe(t)||0:"auto"===a&&(a=this._intervalPrecision),t=s(t,a,!0),r.addCommas(t)},niceTicks:function(t,e,a){t=t||5;var i=this._extent,r=i[1]-i[0];if(isFinite(r)){r<0&&(r=-r,i.reverse());var n=o.intervalScaleNiceTicks(i,t,e,a);this._intervalPrecision=n.intervalPrecision,this._interval=n.interval,this._niceExtent=n.niceTickExtent}},niceExtent:function(t){var e=this._extent;if(e[0]===e[1])if(0!==e[0]){var a=e[0];t.fixMax?e[0]-=a/2:(e[1]+=a/2,e[0]-=a/2)}else e[1]=1;var i=e[1]-e[0];isFinite(i)||(e[0]=0,e[1]=1),this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var r=this._interval;t.fixMin||(e[0]=s(Math.floor(e[0]/r)*r)),t.fixMax||(e[1]=s(Math.ceil(e[1]/r)*r))}});h.create=function(){return new h};var l=h;t.exports=l},ig3W:function(t,e){t.exports={}},io0T:function(t,e,a){t.exports={default:a("DTdt"),__esModule:!0}},iocF:function(t,e,a){var i=a("USwo");i(i.P+i.R,"Set",{toJSON:a("KtlF")("Set")})},iqsF:function(t,e,a){var i=a("aqg2"),r=a("zBWt")("iterator"),n=a("ig3W");t.exports=a("VSTI").isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||n.hasOwnProperty(i(e))}},ixoo:function(t,e){var a=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++a+i).toString(36))}},jBAH:function(t,e){t.exports=function(t,e){var a,i=null;try{a=JSON.parse(t,e)}catch(t){i=t}return[i,a]}},jCoz:function(t,e,a){var i=a("bYtY"),r=a("4NgU"),n=a("OELB"),o=a("ieMj"),s=r.prototype,h=o.prototype,l=n.getPrecisionSafe,u=n.round,c=Math.floor,f=Math.ceil,d=Math.pow,C=Math.log,p=r.extend({type:"log",base:10,$constructor:function(){r.apply(this,arguments),this._originalScale=new o},getTicks:function(t){var e=this._originalScale,a=this._extent,r=e.getExtent();return i.map(h.getTicks.call(this,t),function(t){var i=n.round(d(this.base,t));return i=t===a[0]&&e.__fixMin?m(i,r[0]):i,i=t===a[1]&&e.__fixMax?m(i,r[1]):i},this)},getMinorTicks:h.getMinorTicks,getLabel:h.getLabel,scale:function(t){return t=s.scale.call(this,t),d(this.base,t)},setExtent:function(t,e){var a=this.base;t=C(t)/C(a),e=C(e)/C(a),h.setExtent.call(this,t,e)},getExtent:function(){var t=this.base,e=s.getExtent.call(this);e[0]=d(t,e[0]),e[1]=d(t,e[1]);var a=this._originalScale,i=a.getExtent();return a.__fixMin&&(e[0]=m(e[0],i[0])),a.__fixMax&&(e[1]=m(e[1],i[1])),e},unionExtent:function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=C(t[0])/C(e),t[1]=C(t[1])/C(e),s.unionExtent.call(this,t)},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},niceTicks:function(t){t=t||10;var e=this._extent,a=e[1]-e[0];if(!(a===1/0||a<=0)){var i=n.quantity(a);for(t/a*i<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var r=[n.round(f(e[0]/i)*i),n.round(c(e[1]/i)*i)];this._interval=i,this._niceExtent=r}},niceExtent:function(t){h.niceExtent.call(this,t);var e=this._originalScale;e.__fixMin=t.fixMin,e.__fixMax=t.fixMax}});function m(t,e){return u(t,l(e))}i.each(["contain","normalize"],function(t){p.prototype[t]=function(e){return e=C(e)/C(this.base),s[t].call(this,e)}}),p.create=function(){return new p};var D=p;t.exports=D},jE9Z:function(t,e,a){"use strict";function i(t,e){0}function r(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}a.r(e);var n={name:"router-view",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,e){var a=e.props,i=e.children,r=e.parent,n=e.data;n.routerView=!0;for(var o=r.$createElement,s=a.name,h=r.$route,l=r._routerViewCache||(r._routerViewCache={}),u=0,c=!1;r&&r._routerRoot!==r;)r.$vnode&&r.$vnode.data.routerView&&u++,r._inactive&&(c=!0),r=r.$parent;if(n.routerViewDepth=u,c)return o(l[s],n,i);var f=h.matched[u];if(!f)return l[s]=null,o();var d=l[s]=f.components[s];n.registerRouteInstance=function(t,e){var a=f.instances[s];(e&&a!==t||!e&&a===t)&&(f.instances[s]=e)},(n.hook||(n.hook={})).prepatch=function(t,e){f.instances[s]=e.componentInstance};var C=n.props=function(t,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(t);case"boolean":return e?t.params:void 0;default:0}}(h,f.props&&f.props[s]);if(C){C=n.props=function(t,e){for(var a in e)t[a]=e[a];return t}({},C);var p=n.attrs=n.attrs||{};for(var m in C)d.props&&m in d.props||(p[m]=C[m],delete C[m])}return o(d,n,i)}};var o=/[!'()*]/g,s=function(t){return"%"+t.charCodeAt(0).toString(16)},h=/%2C/g,l=function(t){return encodeURIComponent(t).replace(o,s).replace(h,",")},u=decodeURIComponent;function c(t){var e={};return(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var a=t.replace(/\+/g," ").split("="),i=u(a.shift()),r=a.length>0?u(a.join("=")):null;void 0===e[i]?e[i]=r:Array.isArray(e[i])?e[i].push(r):e[i]=[e[i],r]}),e):e}function f(t){var e=t?Object.keys(t).map(function(e){var a=t[e];if(void 0===a)return"";if(null===a)return l(e);if(Array.isArray(a)){var i=[];return a.forEach(function(t){void 0!==t&&(null===t?i.push(l(e)):i.push(l(e)+"="+l(t)))}),i.join("&")}return l(e)+"="+l(a)}).filter(function(t){return t.length>0}).join("&"):null;return e?"?"+e:""}var d=/\/?$/;function C(t,e,a,i){var r=i&&i.options.stringifyQuery,n=e.query||{};try{n=p(n)}catch(t){}var o={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:n,params:e.params||{},fullPath:D(e,r),matched:t?function(t){var e=[];for(;t;)e.unshift(t),t=t.parent;return e}(t):[]};return a&&(o.redirectedFrom=D(a,r)),Object.freeze(o)}function p(t){if(Array.isArray(t))return t.map(p);if(t&&"object"==typeof t){var e={};for(var a in t)e[a]=p(t[a]);return e}return t}var m=C(null,{path:"/"});function D(t,e){var a=t.path,i=t.query;void 0===i&&(i={});var r=t.hash;return void 0===r&&(r=""),(a||"/")+(e||f)(i)+r}function v(t,e){return e===m?t===e:!!e&&(t.path&&e.path?t.path.replace(d,"")===e.path.replace(d,"")&&t.hash===e.hash&&g(t.query,e.query):!(!t.name||!e.name)&&(t.name===e.name&&t.hash===e.hash&&g(t.query,e.query)&&g(t.params,e.params)))}function g(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var a=Object.keys(t),i=Object.keys(e);return a.length===i.length&&a.every(function(a){var i=t[a],r=e[a];return"object"==typeof i&&"object"==typeof r?g(i,r):String(i)===String(r)})}var S,T=[String,Object],I=[String,Array],y={name:"router-link",props:{to:{type:T,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:I,default:"click"}},render:function(t){var e=this,a=this.$router,i=this.$route,r=a.resolve(this.to,i,this.append),n=r.location,o=r.route,s=r.href,h={},l=a.options.linkActiveClass,u=a.options.linkExactActiveClass,c=null==l?"router-link-active":l,f=null==u?"router-link-exact-active":u,p=null==this.activeClass?c:this.activeClass,m=null==this.exactActiveClass?f:this.exactActiveClass,D=n.path?C(null,n,null,a):o;h[m]=v(i,D),h[p]=this.exact?h[m]:function(t,e){return 0===t.path.replace(d,"/").indexOf(e.path.replace(d,"/"))&&(!e.hash||t.hash===e.hash)&&function(t,e){for(var a in e)if(!(a in t))return!1;return!0}(t.query,e.query)}(i,D);var g=function(t){x(t)&&(e.replace?a.replace(n):a.push(n))},T={click:x};Array.isArray(this.event)?this.event.forEach(function(t){T[t]=g}):T[this.event]=g;var I={class:h};if("a"===this.tag)I.on=T,I.attrs={href:s};else{var y=function t(e){if(e)for(var a,i=0;i<e.length;i++){if("a"===(a=e[i]).tag)return a;if(a.children&&(a=t(a.children)))return a}}(this.$slots.default);if(y){y.isStatic=!1;var w=S.util.extend;(y.data=w({},y.data)).on=T,(y.data.attrs=w({},y.data.attrs)).href=s}else I.on=T}return t(this.tag,I,this.$slots.default)}};function x(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||void 0!==t.button&&0!==t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function w(t){if(!w.installed||S!==t){w.installed=!0,S=t;var e=function(t){return void 0!==t},a=function(t,a){var i=t.$options._parentVnode;e(i)&&e(i=i.data)&&e(i=i.registerRouteInstance)&&i(t,a)};t.mixin({beforeCreate:function(){e(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,a(this,this)},destroyed:function(){a(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("router-view",n),t.component("router-link",y);var i=t.config.optionMergeStrategies;i.beforeRouteEnter=i.beforeRouteLeave=i.beforeRouteUpdate=i.created}}var F="undefined"!=typeof window;function E(t,e,a){var i=t.charAt(0);if("/"===i)return t;if("?"===i||"#"===i)return e+t;var r=e.split("/");a&&r[r.length-1]||r.pop();for(var n=t.replace(/^\//,"").split("/"),o=0;o<n.length;o++){var s=n[o];".."===s?r.pop():"."!==s&&r.push(s)}return""!==r[0]&&r.unshift(""),r.join("/")}function b(t){return t.replace(/\/\//g,"/")}var L=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},M=U,A=_,O=function(t,e){return G(_(t,e))},N=G,P=W,R=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function _(t,e){for(var a,i=[],r=0,n=0,o="",s=e&&e.delimiter||"/";null!=(a=R.exec(t));){var h=a[0],l=a[1],u=a.index;if(o+=t.slice(n,u),n=u+h.length,l)o+=l[1];else{var c=t[n],f=a[2],d=a[3],C=a[4],p=a[5],m=a[6],D=a[7];o&&(i.push(o),o="");var v=null!=f&&null!=c&&c!==f,g="+"===m||"*"===m,S="?"===m||"*"===m,T=a[2]||s,I=C||p;i.push({name:d||r++,prefix:f||"",delimiter:T,optional:S,repeat:g,partial:v,asterisk:!!D,pattern:I?H(I):D?".*":"[^"+V(T)+"]+?"})}}return n<t.length&&(o+=t.substr(n)),o&&i.push(o),i}function B(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function k(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function G(t){for(var e=new Array(t.length),a=0;a<t.length;a++)"object"==typeof t[a]&&(e[a]=new RegExp("^(?:"+t[a].pattern+")$"));return function(a,i){for(var r="",n=a||{},o=(i||{}).pretty?B:encodeURIComponent,s=0;s<t.length;s++){var h=t[s];if("string"!=typeof h){var l,u=n[h.name];if(null==u){if(h.optional){h.partial&&(r+=h.prefix);continue}throw new TypeError('Expected "'+h.name+'" to be defined')}if(L(u)){if(!h.repeat)throw new TypeError('Expected "'+h.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(h.optional)continue;throw new TypeError('Expected "'+h.name+'" to not be empty')}for(var c=0;c<u.length;c++){if(l=o(u[c]),!e[s].test(l))throw new TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'", but received `'+JSON.stringify(l)+"`");r+=(0===c?h.prefix:h.delimiter)+l}}else{if(l=h.asterisk?k(u):o(u),!e[s].test(l))throw new TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but received "'+l+'"');r+=h.prefix+l}}else r+=h}return r}}function V(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function H(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function Y(t,e){return t.keys=e,t}function X(t){return t.sensitive?"":"i"}function W(t,e,a){L(e)||(a=e||a,e=[]);for(var i=(a=a||{}).strict,r=!1!==a.end,n="",o=0;o<t.length;o++){var s=t[o];if("string"==typeof s)n+=V(s);else{var h=V(s.prefix),l="(?:"+s.pattern+")";e.push(s),s.repeat&&(l+="(?:"+h+l+")*"),n+=l=s.optional?s.partial?h+"("+l+")?":"(?:"+h+"("+l+"))?":h+"("+l+")"}}var u=V(a.delimiter||"/"),c=n.slice(-u.length)===u;return i||(n=(c?n.slice(0,-u.length):n)+"(?:"+u+"(?=$))?"),n+=r?"$":i&&c?"":"(?="+u+"|$)",Y(new RegExp("^"+n,X(a)),e)}function U(t,e,a){return L(e)||(a=e||a,e=[]),a=a||{},t instanceof RegExp?function(t,e){var a=t.source.match(/\((?!\?)/g);if(a)for(var i=0;i<a.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Y(t,e)}(t,e):L(t)?function(t,e,a){for(var i=[],r=0;r<t.length;r++)i.push(U(t[r],e,a).source);return Y(new RegExp("(?:"+i.join("|")+")",X(a)),e)}(t,e,a):function(t,e,a){return W(_(t,a),e,a)}(t,e,a)}M.parse=A,M.compile=O,M.tokensToFunction=N,M.tokensToRegExp=P;var K=Object.create(null);function z(t,e,a){try{return(K[t]||(K[t]=M.compile(t)))(e||{},{pretty:!0})}catch(t){return""}}function J(t,e,a,i){var r=e||[],n=a||Object.create(null),o=i||Object.create(null);t.forEach(function(t){!function t(e,a,i,r,n,o){var s=r.path;var h=r.name;0;var l=r.pathToRegexpOptions||{};var u=function(t,e,a){a||(t=t.replace(/\/$/,""));if("/"===t[0])return t;if(null==e)return t;return b(e.path+"/"+t)}(s,n,l.strict);"boolean"==typeof r.caseSensitive&&(l.sensitive=r.caseSensitive);var c={path:u,regex:function(t,e){var a=M(t,[],e);0;return a}(u,l),components:r.components||{default:r.component},instances:{},name:h,parent:n,matchAs:o,redirect:r.redirect,beforeEnter:r.beforeEnter,meta:r.meta||{},props:null==r.props?{}:r.components?r.props:{default:r.props}};r.children&&r.children.forEach(function(r){var n=o?b(o+"/"+r.path):void 0;t(e,a,i,r,c,n)});if(void 0!==r.alias){var f=Array.isArray(r.alias)?r.alias:[r.alias];f.forEach(function(o){var s={path:o,children:r.children};t(e,a,i,s,n,c.path||"/")})}a[c.path]||(e.push(c.path),a[c.path]=c);h&&(i[h]||(i[h]=c))}(r,n,o,t)});for(var s=0,h=r.length;s<h;s++)"*"===r[s]&&(r.push(r.splice(s,1)[0]),h--,s--);return{pathList:r,pathMap:n,nameMap:o}}function j(t,e,a,i){var r="string"==typeof t?{path:t}:t;if(r.name||r._normalized)return r;if(!r.path&&r.params&&e){(r=q({},r))._normalized=!0;var n=q(q({},e.params),r.params);if(e.name)r.name=e.name,r.params=n;else if(e.matched.length){var o=e.matched[e.matched.length-1].path;r.path=z(o,n,e.path)}else 0;return r}var s=function(t){var e="",a="",i=t.indexOf("#");i>=0&&(e=t.slice(i),t=t.slice(0,i));var r=t.indexOf("?");return r>=0&&(a=t.slice(r+1),t=t.slice(0,r)),{path:t,query:a,hash:e}}(r.path||""),h=e&&e.path||"/",l=s.path?E(s.path,h,a||r.append):h,u=function(t,e,a){void 0===e&&(e={});var i,r=a||c;try{i=r(t||"")}catch(t){i={}}for(var n in e)i[n]=e[n];return i}(s.query,r.query,i&&i.options.parseQuery),f=r.hash||s.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:l,query:u,hash:f}}function q(t,e){for(var a in e)t[a]=e[a];return t}function Z(t,e){var a=J(t),i=a.pathList,r=a.pathMap,n=a.nameMap;function o(t,a,o){var s=j(t,a,!1,e),l=s.name;if(l){var u=n[l];if(!u)return h(null,s);var c=u.regex.keys.filter(function(t){return!t.optional}).map(function(t){return t.name});if("object"!=typeof s.params&&(s.params={}),a&&"object"==typeof a.params)for(var f in a.params)!(f in s.params)&&c.indexOf(f)>-1&&(s.params[f]=a.params[f]);if(u)return s.path=z(u.path,s.params),h(u,s,o)}else if(s.path){s.params={};for(var d=0;d<i.length;d++){var C=i[d],p=r[C];if(Q(p.regex,s.path,s.params))return h(p,s,o)}}return h(null,s)}function s(t,a){var i=t.redirect,r="function"==typeof i?i(C(t,a,null,e)):i;if("string"==typeof r&&(r={path:r}),!r||"object"!=typeof r)return h(null,a);var s=r,l=s.name,u=s.path,c=a.query,f=a.hash,d=a.params;if(c=s.hasOwnProperty("query")?s.query:c,f=s.hasOwnProperty("hash")?s.hash:f,d=s.hasOwnProperty("params")?s.params:d,l){n[l];return o({_normalized:!0,name:l,query:c,hash:f,params:d},void 0,a)}if(u){var p=function(t,e){return E(t,e.parent?e.parent.path:"/",!0)}(u,t);return o({_normalized:!0,path:z(p,d),query:c,hash:f},void 0,a)}return h(null,a)}function h(t,a,i){return t&&t.redirect?s(t,i||a):t&&t.matchAs?function(t,e,a){var i=o({_normalized:!0,path:z(a,e.params)});if(i){var r=i.matched,n=r[r.length-1];return e.params=i.params,h(n,e)}return h(null,e)}(0,a,t.matchAs):C(t,a,i,e)}return{match:o,addRoutes:function(t){J(t,i,r,n)}}}function Q(t,e,a){var i=e.match(t);if(!i)return!1;if(!a)return!0;for(var r=1,n=i.length;r<n;++r){var o=t.keys[r-1],s="string"==typeof i[r]?decodeURIComponent(i[r]):i[r];o&&(a[o.name]=s)}return!0}var $=Object.create(null);function tt(){window.history.replaceState({key:ct()},""),window.addEventListener("popstate",function(t){at(),t.state&&t.state.key&&function(t){lt=t}(t.state.key)})}function et(t,e,a,i){if(t.app){var r=t.options.scrollBehavior;r&&t.app.$nextTick(function(){var t=function(){var t=ct();if(t)return $[t]}(),n=r(e,a,i?t:null);n&&("function"==typeof n.then?n.then(function(e){ot(e,t)}).catch(function(t){0}):ot(n,t))})}}function at(){var t=ct();t&&($[t]={x:window.pageXOffset,y:window.pageYOffset})}function it(t){return nt(t.x)||nt(t.y)}function rt(t){return{x:nt(t.x)?t.x:window.pageXOffset,y:nt(t.y)?t.y:window.pageYOffset}}function nt(t){return"number"==typeof t}function ot(t,e){var a="object"==typeof t;if(a&&"string"==typeof t.selector){var i=document.querySelector(t.selector);if(i){var r=t.offset&&"object"==typeof t.offset?t.offset:{};e=function(t,e){var a=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{x:i.left-a.left-e.x,y:i.top-a.top-e.y}}(i,r=function(t){return{x:nt(t.x)?t.x:0,y:nt(t.y)?t.y:0}}(r))}else it(t)&&(e=rt(t))}else a&&it(t)&&(e=rt(t));e&&window.scrollTo(e.x,e.y)}var st=F&&function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),ht=F&&window.performance&&window.performance.now?window.performance:Date,lt=ut();function ut(){return ht.now().toFixed(3)}function ct(){return lt}function ft(t,e){at();var a=window.history;try{e?a.replaceState({key:lt},"",t):(lt=ut(),a.pushState({key:lt},"",t))}catch(a){window.location[e?"replace":"assign"](t)}}function dt(t){ft(t,!0)}function Ct(t,e,a){var i=function(r){r>=t.length?a():t[r]?e(t[r],function(){i(r+1)}):i(r+1)};i(0)}function pt(t){return function(e,a,i){var n=!1,o=0,s=null;mt(t,function(t,e,a,h){if("function"==typeof t&&void 0===t.cid){n=!0,o++;var l,u=gt(function(e){(function(t){return t.__esModule||vt&&"Module"===t[Symbol.toStringTag]})(e)&&(e=e.default),t.resolved="function"==typeof e?e:S.extend(e),a.components[h]=e,--o<=0&&i()}),c=gt(function(t){var e="Failed to resolve async component "+h+": "+t;s||(s=r(t)?t:new Error(e),i(s))});try{l=t(u,c)}catch(t){c(t)}if(l)if("function"==typeof l.then)l.then(u,c);else{var f=l.component;f&&"function"==typeof f.then&&f.then(u,c)}}}),n||i()}}function mt(t,e){return Dt(t.map(function(t){return Object.keys(t.components).map(function(a){return e(t.components[a],t.instances[a],t,a)})}))}function Dt(t){return Array.prototype.concat.apply([],t)}var vt="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function gt(t){var e=!1;return function(){for(var a=[],i=arguments.length;i--;)a[i]=arguments[i];if(!e)return e=!0,t.apply(this,a)}}var St=function(t,e){this.router=t,this.base=function(t){if(!t)if(F){var e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else t="/";"/"!==t.charAt(0)&&(t="/"+t);return t.replace(/\/$/,"")}(e),this.current=m,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};function Tt(t,e,a,i){var r=mt(t,function(t,i,r,n){var o=function(t,e){"function"!=typeof t&&(t=S.extend(t));return t.options[e]}(t,e);if(o)return Array.isArray(o)?o.map(function(t){return a(t,i,r,n)}):a(o,i,r,n)});return Dt(i?r.reverse():r)}function It(t,e){if(e)return function(){return t.apply(e,arguments)}}St.prototype.listen=function(t){this.cb=t},St.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},St.prototype.onError=function(t){this.errorCbs.push(t)},St.prototype.transitionTo=function(t,e,a){var i=this,r=this.router.match(t,this.current);this.confirmTransition(r,function(){i.updateRoute(r),e&&e(r),i.ensureURL(),i.ready||(i.ready=!0,i.readyCbs.forEach(function(t){t(r)}))},function(t){a&&a(t),t&&!i.ready&&(i.ready=!0,i.readyErrorCbs.forEach(function(e){e(t)}))})},St.prototype.confirmTransition=function(t,e,a){var n=this,o=this.current,s=function(t){r(t)&&(n.errorCbs.length?n.errorCbs.forEach(function(e){e(t)}):(i(),console.error(t))),a&&a(t)};if(v(t,o)&&t.matched.length===o.matched.length)return this.ensureURL(),s();var h=function(t,e){var a,i=Math.max(t.length,e.length);for(a=0;a<i&&t[a]===e[a];a++);return{updated:e.slice(0,a),activated:e.slice(a),deactivated:t.slice(a)}}(this.current.matched,t.matched),l=h.updated,u=h.deactivated,c=h.activated,f=[].concat(function(t){return Tt(t,"beforeRouteLeave",It,!0)}(u),this.router.beforeHooks,function(t){return Tt(t,"beforeRouteUpdate",It)}(l),c.map(function(t){return t.beforeEnter}),pt(c));this.pending=t;var d=function(e,a){if(n.pending!==t)return s();try{e(t,o,function(t){!1===t||r(t)?(n.ensureURL(!0),s(t)):"string"==typeof t||"object"==typeof t&&("string"==typeof t.path||"string"==typeof t.name)?(s(),"object"==typeof t&&t.replace?n.replace(t):n.push(t)):a(t)})}catch(t){s(t)}};Ct(f,d,function(){var a=[];Ct(function(t,e,a){return Tt(t,"beforeRouteEnter",function(t,i,r,n){return function(t,e,a,i,r){return function(n,o,s){return t(n,o,function(t){s(t),"function"==typeof t&&i.push(function(){!function t(e,a,i,r){a[i]?e(a[i]):r()&&setTimeout(function(){t(e,a,i,r)},16)}(t,e.instances,a,r)})})}}(t,r,n,e,a)})}(c,a,function(){return n.current===t}).concat(n.router.resolveHooks),d,function(){if(n.pending!==t)return s();n.pending=null,e(t),n.router.app&&n.router.app.$nextTick(function(){a.forEach(function(t){t()})})})})},St.prototype.updateRoute=function(t){var e=this.current;this.current=t,this.cb&&this.cb(t),this.router.afterHooks.forEach(function(a){a&&a(t,e)})};var yt=function(t){function e(e,a){var i=this;t.call(this,e,a);var r=e.options.scrollBehavior;r&&tt();var n=xt(this.base);window.addEventListener("popstate",function(t){var a=i.current,o=xt(i.base);i.current===m&&o===n||i.transitionTo(o,function(t){r&&et(e,t,a,!0)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,a){var i=this,r=this.current;this.transitionTo(t,function(t){ft(b(i.base+t.fullPath)),et(i.router,t,r,!1),e&&e(t)},a)},e.prototype.replace=function(t,e,a){var i=this,r=this.current;this.transitionTo(t,function(t){dt(b(i.base+t.fullPath)),et(i.router,t,r,!1),e&&e(t)},a)},e.prototype.ensureURL=function(t){if(xt(this.base)!==this.current.fullPath){var e=b(this.base+this.current.fullPath);t?ft(e):dt(e)}},e.prototype.getCurrentLocation=function(){return xt(this.base)},e}(St);function xt(t){var e=window.location.pathname;return t&&0===e.indexOf(t)&&(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}var wt=function(t){function e(e,a,i){t.call(this,e,a),i&&function(t){var e=xt(t);if(!/^\/#/.test(e))return window.location.replace(b(t+"/#"+e)),!0}(this.base)||Ft()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this,e=this.router.options.scrollBehavior,a=st&&e;a&&tt(),window.addEventListener(st?"popstate":"hashchange",function(){var e=t.current;Ft()&&t.transitionTo(Et(),function(i){a&&et(t.router,i,e,!0),st||Mt(i.fullPath)})})},e.prototype.push=function(t,e,a){var i=this,r=this.current;this.transitionTo(t,function(t){Lt(t.fullPath),et(i.router,t,r,!1),e&&e(t)},a)},e.prototype.replace=function(t,e,a){var i=this,r=this.current;this.transitionTo(t,function(t){Mt(t.fullPath),et(i.router,t,r,!1),e&&e(t)},a)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;Et()!==e&&(t?Lt(e):Mt(e))},e.prototype.getCurrentLocation=function(){return Et()},e}(St);function Ft(){var t=Et();return"/"===t.charAt(0)||(Mt("/"+t),!1)}function Et(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.slice(e+1)}function bt(t){var e=window.location.href,a=e.indexOf("#");return(a>=0?e.slice(0,a):e)+"#"+t}function Lt(t){st?ft(bt(t)):window.location.hash=t}function Mt(t){st?dt(bt(t)):window.location.replace(bt(t))}var At=function(t){function e(e,a){t.call(this,e,a),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,a){var i=this;this.transitionTo(t,function(t){i.stack=i.stack.slice(0,i.index+1).concat(t),i.index++,e&&e(t)},a)},e.prototype.replace=function(t,e,a){var i=this;this.transitionTo(t,function(t){i.stack=i.stack.slice(0,i.index).concat(t),e&&e(t)},a)},e.prototype.go=function(t){var e=this,a=this.index+t;if(!(a<0||a>=this.stack.length)){var i=this.stack[a];this.confirmTransition(i,function(){e.index=a,e.updateRoute(i)})}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(St),Ot=function(t){void 0===t&&(t={}),this.app=null,this.apps=[],this.options=t,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Z(t.routes||[],this);var e=t.mode||"hash";switch(this.fallback="history"===e&&!st&&!1!==t.fallback,this.fallback&&(e="hash"),F||(e="abstract"),this.mode=e,e){case"history":this.history=new yt(this,t.base);break;case"hash":this.history=new wt(this,t.base,this.fallback);break;case"abstract":this.history=new At(this,t.base);break;default:0}},Nt={currentRoute:{configurable:!0}};function Pt(t,e){return t.push(e),function(){var a=t.indexOf(e);a>-1&&t.splice(a,1)}}Ot.prototype.match=function(t,e,a){return this.matcher.match(t,e,a)},Nt.currentRoute.get=function(){return this.history&&this.history.current},Ot.prototype.init=function(t){var e=this;if(this.apps.push(t),!this.app){this.app=t;var a=this.history;if(a instanceof yt)a.transitionTo(a.getCurrentLocation());else if(a instanceof wt){var i=function(){a.setupListeners()};a.transitionTo(a.getCurrentLocation(),i,i)}a.listen(function(t){e.apps.forEach(function(e){e._route=t})})}},Ot.prototype.beforeEach=function(t){return Pt(this.beforeHooks,t)},Ot.prototype.beforeResolve=function(t){return Pt(this.resolveHooks,t)},Ot.prototype.afterEach=function(t){return Pt(this.afterHooks,t)},Ot.prototype.onReady=function(t,e){this.history.onReady(t,e)},Ot.prototype.onError=function(t){this.history.onError(t)},Ot.prototype.push=function(t,e,a){this.history.push(t,e,a)},Ot.prototype.replace=function(t,e,a){this.history.replace(t,e,a)},Ot.prototype.go=function(t){this.history.go(t)},Ot.prototype.back=function(){this.go(-1)},Ot.prototype.forward=function(){this.go(1)},Ot.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map(function(t){return Object.keys(t.components).map(function(e){return t.components[e]})})):[]},Ot.prototype.resolve=function(t,e,a){var i=j(t,e||this.history.current,a,this),r=this.match(i,e),n=r.redirectedFrom||r.fullPath;return{location:i,route:r,href:function(t,e,a){var i="hash"===a?"#"+e:e;return t?b(t+"/"+i):i}(this.history.base,n,this.mode),normalizedTo:i,resolved:r}},Ot.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==m&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Ot.prototype,Nt),Ot.install=w,Ot.version="3.0.1",F&&window.Vue&&window.Vue.use(Ot),e.default=Ot},jTL6:function(t,e,a){var i=a("y+Vt").extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var a=e.cx,i=e.cy,r=Math.max(e.r,0),n=e.startAngle,o=e.endAngle,s=e.clockwise,h=Math.cos(n),l=Math.sin(n);t.moveTo(h*r+a,l*r+i),t.arc(a,i,r,n,o,!s)}});t.exports=i},jWXv:function(t,e,a){t.exports={default:a("r6fa"),__esModule:!0}},"jfS+":function(t,e,a){"use strict";var i=a("endd");function r(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var a=this;t(function(t){a.reason||(a.reason=new i(t),e(a.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t;return{token:new r(function(e){t=e}),cancel:t}},t.exports=r},jkPA:function(t,e,a){var i=a("bYtY"),r=i.createHashMap,n=i.isObject,o=i.map;function s(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this._map}s.createByAxisModel=function(t){var e=t.option,a=e.data,i=a&&o(a,u);return new s({categories:i,needCollect:!i,deduplication:!1!==e.dedplication})};var h=s.prototype;function l(t){return t._map||(t._map=r(t.categories))}function u(t){return n(t)&&null!=t.value?t.value:t+""}h.getOrdinal=function(t){return l(this).get(t)},h.parseAndCollect=function(t){var e,a=this._needCollect;if("string"!=typeof t&&!a)return t;if(a&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var i=l(this);return null==(e=i.get(t))&&(a?(e=this.categories.length,this.categories[e]=t,i.set(t,e)):e=NaN),e};var c=s;t.exports=c},jlxs:function(t,e,a){var i=a("7whZ").navigator;t.exports=i&&i.userAgent||""},jrfk:function(t,e){var a,i,r,n,o,s,h,l,u,c,f,d,C,p,m,D=!1;function v(){if(!D){D=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),v=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(d=/\b(iPhone|iP[ao]d)/.exec(t),C=/\b(iP[ao]d)/.exec(t),c=/Android/i.exec(t),p=/FBAN\/\w+;/i.exec(t),m=/Mobile/i.exec(t),f=!!/Win64/.exec(t),e){(a=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN)&&document&&document.documentMode&&(a=document.documentMode);var g=/(?:Trident\/(\d+.\d+))/.exec(t);s=g?parseFloat(g[1])+4:a,i=e[2]?parseFloat(e[2]):NaN,r=e[3]?parseFloat(e[3]):NaN,(n=e[4]?parseFloat(e[4]):NaN)?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),o=e&&e[1]?parseFloat(e[1]):NaN):o=NaN}else a=i=r=o=n=NaN;if(v){if(v[1]){var S=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);h=!S||parseFloat(S[1].replace("_","."))}else h=!1;l=!!v[2],u=!!v[3]}else h=l=u=!1}}var g={ie:function(){return v()||a},ieCompatibilityMode:function(){return v()||s>a},ie64:function(){return g.ie()&&f},firefox:function(){return v()||i},opera:function(){return v()||r},webkit:function(){return v()||n},safari:function(){return g.webkit()},chrome:function(){return v()||o},windows:function(){return v()||l},osx:function(){return v()||h},linux:function(){return v()||u},iphone:function(){return v()||d},mobile:function(){return v()||d||C||c||m},nativeApp:function(){return v()||p},android:function(){return v()||c},ipad:function(){return v()||C}};t.exports=g},jssz:function(t,e,a){var i=a("7whZ"),r=a("vOBO").set,n=i.MutationObserver||i.WebKitMutationObserver,o=i.process,s=i.Promise,h="process"==a("TYje")(o);t.exports=function(){var t,e,a,l=function(){var i,r;for(h&&(i=o.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?a():e=void 0,i}}e=void 0,i&&i.enter()};if(h)a=function(){o.nextTick(l)};else if(!n||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var u=s.resolve(void 0);a=function(){u.then(l)}}else a=function(){r.call(i,l)};else{var c=!0,f=document.createTextNode("");new n(l).observe(f,{characterData:!0}),a=function(){f.data=c=!c}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,a()),e=r}}},jtI2:function(t,e,a){a("SMc4");var i=a("bLfw").extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});t.exports=i},"k/8l":function(t,e,a){t.exports={default:a("e56k"),__esModule:!0}},"k7+O":function(t,e){
/*!
* screenfull
* v3.3.2 - 2017-10-27
* (c) Sindre Sorhus; MIT License
*/
!function(){"use strict";var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},a=void 0!==t&&t.exports,i="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,r=function(){for(var t,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,r=a.length,n={};i<r;i++)if((t=a[i])&&t[1]in e){for(i=0;i<t.length;i++)n[a[0][i]]=t[i];return n}return!1}(),n={change:r.fullscreenchange,error:r.fullscreenerror},o={request:function(t){var a=r.requestFullscreen;t=t||e.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?t[a]():t[a](i&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){e[r.exitFullscreen]()},toggle:function(t){this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,a){var i=n[t];i&&e.addEventListener(i,a,!1)},off:function(t,a){var i=n[t];i&&e.removeEventListener(i,a,!1)},raw:r};r?(Object.defineProperties(o,{isFullscreen:{get:function(){return Boolean(e[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[r.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(e[r.fullscreenEnabled])}}}),a?t.exports=o:window.screenfull=o):a?t.exports=!1:window.screenfull=!1}()},k9D9:function(t,e){e.SOURCE_FORMAT_ORIGINAL="original",e.SOURCE_FORMAT_ARRAY_ROWS="arrayRows",e.SOURCE_FORMAT_OBJECT_ROWS="objectRows",e.SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",e.SOURCE_FORMAT_UNKNOWN="unknown",e.SOURCE_FORMAT_TYPED_ARRAY="typedArray",e.SERIES_LAYOUT_BY_COLUMN="column",e.SERIES_LAYOUT_BY_ROW="row"},kDyi:function(t,e){t.exports=function(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(t){for(var a=0;a<e.length;a++)if(!e[a].isSelected(t.name))return!1;return!0})}},kUGv:function(t,e,a){var i=a("7whZ").document;t.exports=i&&i.documentElement},kvAF:function(t,e,a){var i=a("GhSp").f,r=a("nA4W"),n=a("zBWt")("toStringTag");t.exports=function(t,e,a){t&&!r(t=a?t:t.prototype,n)&&i(t,n,{configurable:!0,value:e})}},kvrn:function(t,e){var a=/^(attrs|props|on|nativeOn|class|style|hook)$/;function i(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}t.exports=function(t){return t.reduce(function(t,e){var r,n,o,s,h;for(o in e)if(r=t[o],n=e[o],r&&a.test(o))if("class"===o&&("string"==typeof r&&(h=r,t[o]=r={},r[h]=!0),"string"==typeof n&&(h=n,e[o]=n={},n[h]=!0)),"on"===o||"nativeOn"===o||"hook"===o)for(s in n)r[s]=i(r[s],n[s]);else if(Array.isArray(r))t[o]=r.concat(n);else if(Array.isArray(n))t[o]=[r].concat(n);else for(s in n)r[s]=n[s];else t[o]=e[o];return t},{})}},"l+6R":function(t,e,a){a("1i29")("Map")},l0Kd:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},lE7J:function(t,e,a){var i=a("OELB"),r=i.round;function n(t){return i.getPrecisionSafe(t)+2}function o(t,e,a){t[e]=Math.max(Math.min(t[e],a[1]),a[0])}function s(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),o(t,0,e),o(t,1,e),t[0]>t[1]&&(t[0]=t[1])}e.intervalScaleNiceTicks=function(t,e,a,o){var h={},l=t[1]-t[0],u=h.interval=i.nice(l/e,!0);null!=a&&u<a&&(u=h.interval=a),null!=o&&u>o&&(u=h.interval=o);var c=h.intervalPrecision=n(u);return s(h.niceTickExtent=[r(Math.ceil(t[0]/u)*u,c),r(Math.floor(t[1]/u)*u,c)],t),h},e.getIntervalPrecision=n,e.fixExtent=s},lLGD:function(t,e,a){var i=a("ProS"),r=a("bYtY"),n=a("nVfU"),o=n.layout,s=n.largeLayout;a("Wqna"),a("F7hV"),a("Z8zF"),a("Ae16"),i.registerLayout(i.PRIORITY.VISUAL.LAYOUT,r.curry(o,"bar")),i.registerLayout(i.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,s),i.registerVisual({seriesType:"bar",reset:function(t){t.getData().setVisual("legendSymbol","roundRect")}})},lhnW:function(t,e,a){var i=a("WX/U"),r=a("DhVD");t.exports={throttle:i,debounce:r}},loD1:function(t,e){e.containStroke=function(t,e,a,i,r,n,o){if(0===r)return!1;var s=r,h=0;if(o>e+s&&o>i+s||o<e-s&&o<i-s||n>t+s&&n>a+s||n<t-s&&n<a-s)return!1;if(t===a)return Math.abs(n-t)<=s/2;var l=(h=(e-i)/(t-a))*n-o+(t*i-a*e)/(t-a);return l*l/(h*h+1)<=s/2*s/2}},m1cH:function(t,e,a){"use strict";e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(a("rfXi"));e.default=function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return(0,i.default)(t)}},m9t5:function(t,e,a){var i=a("KCsZ")([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),r={getAreaStyle:function(t,e){return i(this,t,e)}};t.exports=r},mFDi:function(t,e,a){var i=a("QBsz"),r=a("Fofx"),n=i.applyTransform,o=Math.min,s=Math.max;function h(t,e,a,i){a<0&&(t+=a,a=-a),i<0&&(e+=i,i=-i),this.x=t,this.y=e,this.width=a,this.height=i}h.prototype={constructor:h,union:function(t){var e=o(t.x,this.x),a=o(t.y,this.y);this.width=s(t.x+t.width,this.x+this.width)-e,this.height=s(t.y+t.height,this.y+this.height)-a,this.x=e,this.y=a},applyTransform:function(){var t=[],e=[],a=[],i=[];return function(r){if(r){t[0]=a[0]=this.x,t[1]=i[1]=this.y,e[0]=i[0]=this.x+this.width,e[1]=a[1]=this.y+this.height,n(t,t,r),n(e,e,r),n(a,a,r),n(i,i,r),this.x=o(t[0],e[0],a[0],i[0]),this.y=o(t[1],e[1],a[1],i[1]);var h=s(t[0],e[0],a[0],i[0]),l=s(t[1],e[1],a[1],i[1]);this.width=h-this.x,this.height=l-this.y}}}(),calculateTransform:function(t){var e=this,a=t.width/e.width,i=t.height/e.height,n=r.create();return r.translate(n,n,[-e.x,-e.y]),r.scale(n,n,[a,i]),r.translate(n,n,[t.x,t.y]),n},intersect:function(t){if(!t)return!1;t instanceof h||(t=h.create(t));var e=this,a=e.x,i=e.x+e.width,r=e.y,n=e.y+e.height,o=t.x,s=t.x+t.width,l=t.y,u=t.y+t.height;return!(i<o||s<a||n<l||u<r)},contain:function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},clone:function(){return new h(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},h.create=function(t){return new h(t.x,t.y,t.width,t.height)};var l=h;t.exports=l},mHY4:function(t,e,a){var i=a("A9a0"),r=a("l0Kd");t.exports=Object.keys||function(t){return i(t,r)}},mLcG:function(t,e){var a="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)};t.exports=a},mRg0:function(t,e,a){"use strict";e.__esModule=!0;var i=o(a("s3Ml")),r=o(a("AyUB")),n=o(a("EJiy"));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,n.default)(e)));t.prototype=(0,r.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.default?(0,i.default)(t,e):t.__proto__=e)}},mYwL:function(t,e,a){var i=a("bYtY"),r=a("IwbS"),n=a("6GrX"),o=Math.PI;t.exports=function(t,e){e=e||{},i.defaults(e,{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var a=new r.Group,s=new r.Rect({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});a.add(s);var h=e.fontSize+" sans-serif",l=new r.Rect({style:{fill:"none",text:e.text,font:h,textPosition:"right",textDistance:10,textFill:e.textColor},zlevel:e.zlevel,z:10001});if(a.add(l),e.showSpinner){var u=new r.Arc({shape:{startAngle:-o/2,endAngle:-o/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001});u.animateShape(!0).when(1e3,{endAngle:3*o/2}).start("circularInOut"),u.animateShape(!0).when(1e3,{startAngle:3*o/2}).delay(300).start("circularInOut"),a.add(u)}return a.resize=function(){var a=n.getWidth(e.text,h),i=e.showSpinner?e.spinnerRadius:0,r=(t.getWidth()-2*i-(e.showSpinner&&a?10:0)-a)/2-(e.showSpinner?0:a/2),o=t.getHeight()/2;e.showSpinner&&u.setShape({cx:r,cy:o}),l.setShape({x:r-i,y:o-i,width:2*i,height:2*i}),s.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},a.resize(),a}},myGB:function(t,e,a){a("C5kU"),a("CE4/"),t.exports=a("VSTI").Array.from},n1HI:function(t,e,a){var i=a("hX1E").normalizeRadian,r=2*Math.PI;e.containStroke=function(t,e,a,n,o,s,h,l,u){if(0===h)return!1;var c=h;l-=t,u-=e;var f=Math.sqrt(l*l+u*u);if(f-c>a||f+c<a)return!1;if(Math.abs(n-o)%r<1e-4)return!0;if(s){var d=n;n=i(o),o=i(d)}else n=i(n),o=i(o);n>o&&(o+=r);var C=Math.atan2(u,l);return C<0&&(C+=r),C>=n&&C<=o||C+r>=n&&C+r<=o}},n4Lv:function(t,e,a){var i=a("7hqr").isDimensionStacked,r=a("bYtY").map;e.prepareDataCoordInfo=function(t,e,a){var n,o=t.getBaseAxis(),s=t.getOtherAxis(o),h=function(t,e){var a=0,i=t.scale.getExtent();return"start"===e?a=i[0]:"end"===e?a=i[1]:i[0]>0?a=i[0]:i[1]<0&&(a=i[1]),a}(s,a),l=o.dim,u=s.dim,c=e.mapDimension(u),f=e.mapDimension(l),d="x"===u||"radius"===u?1:0,C=r(t.dimensions,function(t){return e.mapDimension(t)}),p=e.getCalculationInfo("stackResultDimension");return(n|=i(e,C[0]))&&(C[0]=p),(n|=i(e,C[1]))&&(C[1]=p),{dataDimsForPoint:C,valueStart:h,valueAxisDim:u,baseAxisDim:l,stacked:!!n,valueDim:c,baseDim:f,baseDataOffset:d,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}},e.getStackedOnPoint=function(t,e,a,i){var r=NaN;t.stacked&&(r=a.get(a.getCalculationInfo("stackedOverDimension"),i)),isNaN(r)&&(r=t.valueStart);var n=t.baseDataOffset,o=[];return o[n]=a.get(t.baseDim,i),o[1-n]=r,e.dataToPoint(o)}},n7vu:function(t,e,a){var i=a("TYje");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},nA4W:function(t,e){var a={}.hasOwnProperty;t.exports=function(t,e){return a.call(t,e)}},nAx8:function(t,e,a){var i=a("FgkJ");t.exports=function(t,e,a){if(i(t),void 0===e)return t;switch(a){case 1:return function(a){return t.call(e,a)};case 2:return function(a,i){return t.call(e,a,i)};case 3:return function(a,i,r){return t.call(e,a,i,r)}}return function(){return t.apply(e,arguments)}}},nCxF:function(t,e,a){var i=a("QBsz"),r=i.min,n=i.max,o=i.scale,s=i.distance,h=i.add,l=i.clone,u=i.sub;t.exports=function(t,e,a,i){var c,f,d,C,p=[],m=[],D=[],v=[];if(i){d=[1/0,1/0],C=[-1/0,-1/0];for(var g=0,S=t.length;g<S;g++)r(d,d,t[g]),n(C,C,t[g]);r(d,d,i[0]),n(C,C,i[1])}for(g=0,S=t.length;g<S;g++){var T=t[g];if(a)c=t[g?g-1:S-1],f=t[(g+1)%S];else{if(0===g||g===S-1){p.push(l(t[g]));continue}c=t[g-1],f=t[g+1]}u(m,f,c),o(m,m,e);var I=s(T,c),y=s(T,f),x=I+y;0!==x&&(I/=x,y/=x),o(D,m,-I),o(v,m,y);var w=h([],T,D),F=h([],T,v);i&&(n(w,w,d),r(w,w,C),n(F,F,d),r(F,F,C)),p.push(w),p.push(F)}return a&&p.push(p.shift()),p}},nPnh:function(t,e){var a=Math.round;function i(t,e,i){if(!e)return t;var r=a(2*t);return(r+a(e))%2==0?r/2:(r+(i?1:-1))/2}e.subPixelOptimizeLine=function(t,e,r){if(e){var n=e.x1,o=e.x2,s=e.y1,h=e.y2;t.x1=n,t.x2=o,t.y1=s,t.y2=h;var l=r&&r.lineWidth;l&&(a(2*n)===a(2*o)&&(t.x1=t.x2=i(n,l,!0)),a(2*s)===a(2*h)&&(t.y1=t.y2=i(s,l,!0)))}},e.subPixelOptimizeRect=function(t,e,a){if(e){var r=e.x,n=e.y,o=e.width,s=e.height;t.x=r,t.y=n,t.width=o,t.height=s;var h=a&&a.lineWidth;h&&(t.x=i(r,h,!0),t.y=i(n,h,!0),t.width=Math.max(i(r+o,h,!1)-t.x,0===o?0:1),t.height=Math.max(i(n+s,h,!1)-t.y,0===s?0:1))}},e.subPixelOptimize=i},nRFE:function(t,e,a){var i=a("/F7N"),r=Math.max,n=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):n(t,e)}},nVfU:function(t,e,a){var i=a("bYtY"),r=a("OELB").parsePercent,n=a("7hqr").isDimensionStacked,o=a("zM3Q"),s="__ec_stack_",h="undefined"!=typeof Float32Array?Float32Array:Array;function l(t){return t.get("stack")||s+t.seriesIndex}function u(t){return t.dim+t.index}function c(t,e){var a=[];return e.eachSeriesByType(t,function(t){m(t)&&!D(t)&&a.push(t)}),a}function f(t){var e=function(t){var e={};i.each(t,function(t){var a=t.coordinateSystem.getBaseAxis();if("time"===a.type||"value"===a.type)for(var i=t.getData(),r=a.dim+"_"+a.index,n=i.mapDimension(a.dim),o=0,s=i.count();o<s;++o){var h=i.get(n,o);e[r]?e[r].push(h):e[r]=[h]}});var a=[];for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(n){n.sort(function(t,e){return t-e});for(var o=null,s=1;s<n.length;++s){var h=n[s]-n[s-1];h>0&&(o=null===o?h:Math.min(o,h))}a[r]=o}}return a}(t),a=[];return i.each(t,function(t){var i,n=t.coordinateSystem.getBaseAxis(),o=n.getExtent();if("category"===n.type)i=n.getBandWidth();else if("value"===n.type||"time"===n.type){var s=n.dim+"_"+n.index,h=e[s],c=Math.abs(o[1]-o[0]),f=n.scale.getExtent(),d=Math.abs(f[1]-f[0]);i=h?c/d*h:c}else{var C=t.getData();i=Math.abs(o[1]-o[0])/C.count()}var p=r(t.get("barWidth"),i),m=r(t.get("barMaxWidth"),i),D=r(t.get("barMinWidth")||1,i),v=t.get("barGap"),g=t.get("barCategoryGap");a.push({bandWidth:i,barWidth:p,barMaxWidth:m,barMinWidth:D,barGap:v,barCategoryGap:g,axisKey:u(n),stackId:l(t)})}),d(a)}function d(t){var e={};i.each(t,function(t,a){var i=t.axisKey,r=t.bandWidth,n=e[i]||{bandWidth:r,remainedWidth:r,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},o=n.stacks;e[i]=n;var s=t.stackId;o[s]||n.autoWidthCount++,o[s]=o[s]||{width:0,maxWidth:0};var h=t.barWidth;h&&!o[s].width&&(o[s].width=h,h=Math.min(n.remainedWidth,h),n.remainedWidth-=h);var l=t.barMaxWidth;l&&(o[s].maxWidth=l);var u=t.barMinWidth;u&&(o[s].minWidth=u);var c=t.barGap;null!=c&&(n.gap=c);var f=t.barCategoryGap;null!=f&&(n.categoryGap=f)});var a={};return i.each(e,function(t,e){a[e]={};var n=t.stacks,o=t.bandWidth,s=r(t.categoryGap,o),h=r(t.gap,1),l=t.remainedWidth,u=t.autoWidthCount,c=(l-s)/(u+(u-1)*h);c=Math.max(c,0),i.each(n,function(t){var e=t.maxWidth,a=t.minWidth;if(t.width){i=t.width;e&&(i=Math.min(i,e)),a&&(i=Math.max(i,a)),t.width=i,l-=i+h*i,u--}else{var i=c;e&&e<i&&(i=Math.min(e,l)),a&&a>i&&(i=a),i!==c&&(t.width=i,l-=i+h*i,u--)}}),c=(l-s)/(u+(u-1)*h),c=Math.max(c,0);var f,d=0;i.each(n,function(t,e){t.width||(t.width=c),f=t,d+=t.width*(1+h)}),f&&(d-=f.width*h);var C=-d/2;i.each(n,function(t,i){a[e][i]=a[e][i]||{bandWidth:o,offset:C,width:t.width},C+=t.width*(1+h)})}),a}function C(t,e,a){if(t&&e){var i=t[u(e)];return null!=i&&null!=a&&(i=i[l(a)]),i}}var p={seriesType:"bar",plan:o(),reset:function(t){if(m(t)&&D(t)){var e=t.getData(),a=t.coordinateSystem,i=a.grid.getRect(),r=a.getBaseAxis(),n=a.getOtherAxis(r),o=e.mapDimension(n.dim),s=e.mapDimension(r.dim),l=n.isHorizontal(),u=l?0:1,c=C(f([t]),r,t).width;return c>.5||(c=.5),{progress:function(t,e){var f,d=t.count,C=new h(2*d),p=new h(2*d),m=new h(d),D=[],g=[],S=0,T=0;for(;null!=(f=t.next());)g[u]=e.get(o,f),g[1-u]=e.get(s,f),D=a.dataToPoint(g,null,D),p[S]=l?i.x+i.width:D[0],C[S++]=D[0],p[S]=l?D[1]:i.y+i.height,C[S++]=D[1],m[T++]=f;e.setLayout({largePoints:C,largeDataIndices:m,largeBackgroundPoints:p,barWidth:c,valueAxisStart:v(r,n,!1),backgroundStart:l?i.x:i.y,valueAxisHorizontal:l})}}}}};function m(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function D(t){return t.pipelineContext&&t.pipelineContext.large}function v(t,e,a){return e.toGlobalCoord(e.dataToCoord("log"===e.type?1:0))}e.getLayoutOnAxis=function(t){var e=[],a=t.axis;if("category"===a.type){for(var r=a.getBandWidth(),n=0;n<t.count;n++)e.push(i.defaults({bandWidth:r,axisKey:"axis0",stackId:s+n},t));var o=d(e),h=[];for(n=0;n<t.count;n++){var l=o.axis0[s+n];l.offsetCenter=l.offset+l.width/2,h.push(l)}return h}},e.prepareLayoutBarSeries=c,e.makeColumnLayout=f,e.retrieveColumnLayout=C,e.layout=function(t,e){var a=c(t,e),r=f(a),o={},s={};i.each(a,function(t){var e=t.getData(),a=t.coordinateSystem,i=a.getBaseAxis(),h=l(t),c=r[u(i)][h],f=c.offset,d=c.width,C=a.getOtherAxis(i),p=t.get("barMinHeight")||0;o[h]=o[h]||[],s[h]=s[h]||[],e.setLayout({bandWidth:c.bandWidth,offset:f,size:d});for(var m=e.mapDimension(C.dim),D=e.mapDimension(i.dim),g=n(e,m),S=C.isHorizontal(),T=v(0,C),I=0,y=e.count();I<y;I++){var x,w,F,E,b,L=e.get(m,I),M=e.get(D,I),A=L>=0?"p":"n",O=T;g&&(o[h][M]||(o[h][M]={p:T,n:T}),O=o[h][M][A]),S?(x=O,w=(b=a.dataToPoint([L,M]))[1]+f,F=b[0]-T,E=d,Math.abs(F)<p&&(F=(F<0?-1:1)*p),isNaN(F)||g&&(o[h][M][A]+=F)):(x=(b=a.dataToPoint([M,L]))[0]+f,w=O,F=d,E=b[1]-T,Math.abs(E)<p&&(E=(E<=0?-1:1)*p),isNaN(E)||g&&(o[h][M][A]+=E)),e.setItemLayout(I,{x:x,y:w,width:F,height:E})}},this)},e.largeLayout=p},nhJU:function(t,e,a){a("PJ8w")("Map")},ni6a:function(t,e,a){var i=a("pzxd"),r=a("mFDi"),n=a("gut8").WILL_BE_RESTORED,o=new r,s=function(){};s.prototype={constructor:s,drawRectText:function(t,e){var a=this.style;e=a.textRect||e,this.__dirty&&i.normalizeTextStyle(a,!0);var r=a.text;if(null!=r&&(r+=""),i.needDrawText(r,a)){t.save();var s=this.transform;a.transformText?this.setTransform(t):s&&(o.copy(e),o.applyTransform(s),e=o),i.renderText(this,t,r,a,e,n),t.restore()}}};var h=s;t.exports=h},nkfE:function(t,e,a){var i=a("bYtY"),r=a("ca2m"),n=a("bLfw"),o=a("+TT/"),s=o.getLayoutParams,h=o.mergeLayoutParam,l=a("jkPA"),u=["value","category","time","log"];t.exports=function(t,e,a,o){i.each(u,function(n){e.extend({type:t+"Axis."+n,mergeDefaultAndTheme:function(e,r){var o=this.layoutMode,l=o?s(e):{},u=r.getTheme();i.merge(e,u.get(n+"Axis")),i.merge(e,this.getDefaultOption()),e.type=a(t,e),o&&h(e,l,o)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=l.createByAxisModel(this))},getCategories:function(t){var e=this.option;if("category"===e.type)return t?e.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:i.mergeAll([{},r[n+"Axis"],o],!0)})}),n.registerSubTypeDefaulter(t+"Axis",i.curry(a,t))}},o97j:function(t,e,a){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i};t.exports=r},oV5b:function(t,e,a){"use strict";a.r(e);var i=a("QbLZ"),r=a.n(i),n=a("EJiy"),o=a.n(n),s=/%[sdj%]/g,h=function(){};function l(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];var i=1,r=e[0],n=e.length;if("function"==typeof r)return r.apply(null,e.slice(1));if("string"==typeof r){for(var o=String(r).replace(s,function(t){if("%%"===t)return"%";if(i>=n)return t;switch(t){case"%s":return String(e[i++]);case"%d":return Number(e[i++]);case"%j":try{return JSON.stringify(e[i++])}catch(t){return"[Circular]"}break;default:return t}}),h=e[i];i<n;h=e[++i])o+=" "+h;return o}return r}function u(t,e){return void 0===t||null===t||(!("array"!==e||!Array.isArray(t)||t.length)||!(!function(t){return"string"===t||"url"===t||"hex"===t||"email"===t||"pattern"===t}(e)||"string"!=typeof t||t))}function c(t,e,a){var i=0,r=t.length;!function n(o){if(o&&o.length)a(o);else{var s=i;i+=1,s<r?e(t[s],n):a([])}}([])}function f(t,e,a,i){if(e.first)return c(function(t){var e=[];return Object.keys(t).forEach(function(a){e.push.apply(e,t[a])}),e}(t),a,i);var r=e.firstFields||[];!0===r&&(r=Object.keys(t));var n=Object.keys(t),o=n.length,s=0,h=[],l=function(t){h.push.apply(h,t),++s===o&&i(h)};n.forEach(function(e){var i=t[e];-1!==r.indexOf(e)?c(i,a,l):function(t,e,a){var i=[],r=0,n=t.length;function o(t){i.push.apply(i,t),++r===n&&a(i)}t.forEach(function(t){e(t,o)})}(i,a,l)})}function d(t){return function(e){return e&&e.message?(e.field=e.field||t.fullField,e):{message:e,field:e.field||t.fullField}}}function C(t,e){if(e)for(var a in e)if(e.hasOwnProperty(a)){var i=e[a];"object"===(void 0===i?"undefined":o()(i))&&"object"===o()(t[a])?t[a]=r()({},t[a],i):t[a]=i}return t}var p=function(t,e,a,i,r,n){!t.required||a.hasOwnProperty(t.field)&&!u(e,n||t.type)||i.push(l(r.messages.required,t.fullField))};var m=function(t,e,a,i,r){(/^\s+$/.test(e)||""===e)&&i.push(l(r.messages.whitespace,t.fullField))},D={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},v={integer:function(t){return v.number(t)&&parseInt(t,10)===t},float:function(t){return v.number(t)&&!v.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch(t){return!1}},date:function(t){return"function"==typeof t.getTime&&"function"==typeof t.getMonth&&"function"==typeof t.getYear},number:function(t){return!isNaN(t)&&"number"==typeof t},object:function(t){return"object"===(void 0===t?"undefined":o()(t))&&!v.array(t)},method:function(t){return"function"==typeof t},email:function(t){return"string"==typeof t&&!!t.match(D.email)&&t.length<255},url:function(t){return"string"==typeof t&&!!t.match(D.url)},hex:function(t){return"string"==typeof t&&!!t.match(D.hex)}};var g="enum";var S={required:p,whitespace:m,type:function(t,e,a,i,r){if(t.required&&void 0===e)p(t,e,a,i,r);else{var n=t.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(n)>-1?v[n](e)||i.push(l(r.messages.types[n],t.fullField,t.type)):n&&(void 0===e?"undefined":o()(e))!==t.type&&i.push(l(r.messages.types[n],t.fullField,t.type))}},range:function(t,e,a,i,r){var n="number"==typeof t.len,o="number"==typeof t.min,s="number"==typeof t.max,h=e,u=null,c="number"==typeof e,f="string"==typeof e,d=Array.isArray(e);if(c?u="number":f?u="string":d&&(u="array"),!u)return!1;d&&(h=e.length),f&&(h=e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),n?h!==t.len&&i.push(l(r.messages[u].len,t.fullField,t.len)):o&&!s&&h<t.min?i.push(l(r.messages[u].min,t.fullField,t.min)):s&&!o&&h>t.max?i.push(l(r.messages[u].max,t.fullField,t.max)):o&&s&&(h<t.min||h>t.max)&&i.push(l(r.messages[u].range,t.fullField,t.min,t.max))},enum:function(t,e,a,i,r){t[g]=Array.isArray(t[g])?t[g]:[],-1===t[g].indexOf(e)&&i.push(l(r.messages[g],t.fullField,t[g].join(", ")))},pattern:function(t,e,a,i,r){t.pattern&&(t.pattern instanceof RegExp?(t.pattern.lastIndex=0,t.pattern.test(e)||i.push(l(r.messages.pattern.mismatch,t.fullField,e,t.pattern))):"string"==typeof t.pattern&&(new RegExp(t.pattern).test(e)||i.push(l(r.messages.pattern.mismatch,t.fullField,e,t.pattern))))}};var T="enum";var I=function(t,e,a,i,r){var n=t.type,o=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(u(e,n)&&!t.required)return a();S.required(t,e,i,o,r,n),u(e,n)||S.type(t,e,i,o,r)}a(o)},y={string:function(t,e,a,i,r){var n=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(u(e,"string")&&!t.required)return a();S.required(t,e,i,n,r,"string"),u(e,"string")||(S.type(t,e,i,n,r),S.range(t,e,i,n,r),S.pattern(t,e,i,n,r),!0===t.whitespace&&S.whitespace(t,e,i,n,r))}a(n)},method:function(t,e,a,i,r){var n=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(u(e)&&!t.required)return a();S.required(t,e,i,n,r),void 0!==e&&S.type(t,e,i,n,r)}a(n)},number:function(t,e,a,i,r){var n=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(u(e)&&!t.required)return a();S.required(t,e,i,n,r),void 0!==e&&(S.type(t,e,i,n,r),S.range(t,e,i,n,r))}a(n)},boolean:function(t,e,a,i,r){var n=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(u(e)&&!t.required)return a();S.required(t,e,i,n,r),void 0!==e&&S.type(t,e,i,n,r)}a(n)},regexp:function(t,e,a,i,r){var n=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(u(e)&&!t.required)return a();S.required(t,e,i,n,r),u(e)||S.type(t,e,i,n,r)}a(n)},integer:function(t,e,a,i,r){var n=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(u(e)&&!t.required)return a();S.required(t,e,i,n,r),void 0!==e&&(S.type(t,e,i,n,r),S.range(t,e,i,n,r))}a(n)},float:function(t,e,a,i,r){var n=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(u(e)&&!t.required)return a();S.required(t,e,i,n,r),void 0!==e&&(S.type(t,e,i,n,r),S.range(t,e,i,n,r))}a(n)},array:function(t,e,a,i,r){var n=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(u(e,"array")&&!t.required)return a();S.required(t,e,i,n,r,"array"),u(e,"array")||(S.type(t,e,i,n,r),S.range(t,e,i,n,r))}a(n)},object:function(t,e,a,i,r){var n=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(u(e)&&!t.required)return a();S.required(t,e,i,n,r),void 0!==e&&S.type(t,e,i,n,r)}a(n)},enum:function(t,e,a,i,r){var n=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(u(e)&&!t.required)return a();S.required(t,e,i,n,r),e&&S[T](t,e,i,n,r)}a(n)},pattern:function(t,e,a,i,r){var n=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(u(e,"string")&&!t.required)return a();S.required(t,e,i,n,r),u(e,"string")||S.pattern(t,e,i,n,r)}a(n)},date:function(t,e,a,i,r){var n=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(u(e)&&!t.required)return a();if(S.required(t,e,i,n,r),!u(e)){var o=void 0;o="number"==typeof e?new Date(e):e,S.type(t,o,i,n,r),o&&S.range(t,o.getTime(),i,n,r)}}a(n)},url:I,hex:I,email:I,required:function(t,e,a,i,r){var n=[],s=Array.isArray(e)?"array":void 0===e?"undefined":o()(e);S.required(t,e,i,n,r,s),a(n)}};function x(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var w=x();function F(t){this.rules=null,this._messages=w,this.define(t)}F.prototype={messages:function(t){return t&&(this._messages=C(x(),t)),this._messages},define:function(t){if(!t)throw new Error("Cannot configure a schema with no rules");if("object"!==(void 0===t?"undefined":o()(t))||Array.isArray(t))throw new Error("Rules must be an object");this.rules={};var e=void 0,a=void 0;for(e in t)t.hasOwnProperty(e)&&(a=t[e],this.rules[e]=Array.isArray(a)?a:[a])},validate:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2],n=t,s=a,u=i;if("function"==typeof s&&(u=s,s={}),this.rules&&0!==Object.keys(this.rules).length){if(s.messages){var c=this.messages();c===w&&(c=x()),C(c,s.messages),s.messages=c}else s.messages=this.messages();var p=void 0,m=void 0,D={};(s.keys||Object.keys(this.rules)).forEach(function(a){p=e.rules[a],m=n[a],p.forEach(function(i){var o=i;"function"==typeof o.transform&&(n===t&&(n=r()({},n)),m=n[a]=o.transform(m)),(o="function"==typeof o?{validator:o}:r()({},o)).validator=e.getValidationMethod(o),o.field=a,o.fullField=o.fullField||a,o.type=e.getType(o),o.validator&&(D[a]=D[a]||[],D[a].push({rule:o,value:m,source:n,field:a}))})});var v={};f(D,s,function(t,e){var a=t.rule,i=!("object"!==a.type&&"array"!==a.type||"object"!==o()(a.fields)&&"object"!==o()(a.defaultField));function n(t,e){return r()({},e,{fullField:a.fullField+"."+t})}function u(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Array.isArray(o)||(o=[o]),o.length&&h("async-validator:",o),o.length&&a.message&&(o=[].concat(a.message)),o=o.map(d(a)),s.first&&o.length)return v[a.field]=1,e(o);if(i){if(a.required&&!t.value)return o=a.message?[].concat(a.message).map(d(a)):s.error?[s.error(a,l(s.messages.required,a.field))]:[],e(o);var u={};if(a.defaultField)for(var c in t.value)t.value.hasOwnProperty(c)&&(u[c]=a.defaultField);for(var f in u=r()({},u,t.rule.fields))if(u.hasOwnProperty(f)){var C=Array.isArray(u[f])?u[f]:[u[f]];u[f]=C.map(n.bind(null,f))}var p=new F(u);p.messages(s.messages),t.rule.options&&(t.rule.options.messages=s.messages,t.rule.options.error=s.error),p.validate(t.value,t.rule.options||s,function(t){e(t&&t.length?o.concat(t):t)})}else e(o)}i=i&&(a.required||!a.required&&t.value),a.field=t.field;var c=a.validator(a,t.value,u,t.source,s);c&&c.then&&c.then(function(){return u()},function(t){return u(t)})},function(t){!function(t){var e=void 0,a=void 0,i=[],r={};function n(t){Array.isArray(t)?i=i.concat.apply(i,t):i.push(t)}for(e=0;e<t.length;e++)n(t[e]);if(i.length)for(e=0;e<i.length;e++)r[a=i[e].field]=r[a]||[],r[a].push(i[e]);else i=null,r=null;u(i,r)}(t)})}else u&&u()},getType:function(t){if(void 0===t.type&&t.pattern instanceof RegExp&&(t.type="pattern"),"function"!=typeof t.validator&&t.type&&!y.hasOwnProperty(t.type))throw new Error(l("Unknown rule type %s",t.type));return t.type||"string"},getValidationMethod:function(t){if("function"==typeof t.validator)return t.validator;var e=Object.keys(t),a=e.indexOf("message");return-1!==a&&e.splice(a,1),1===e.length&&"required"===e[0]?y.required:y[this.getType(t)]||!1}},F.register=function(t,e){if("function"!=typeof e)throw new Error("Cannot register a validator by type, validator is not a function");y[t]=e},F.messages=w;e.default=F},oVpE:function(t,e,a){var i=a("bYtY"),r=a("IwbS"),n=a("mFDi"),o=a("6GrX").calculateTextPosition,s=r.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var a=e.cx,i=e.cy,r=e.width/2,n=e.height/2;t.moveTo(a,i-n),t.lineTo(a+r,i+n),t.lineTo(a-r,i+n),t.closePath()}}),h=r.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var a=e.cx,i=e.cy,r=e.width/2,n=e.height/2;t.moveTo(a,i-n),t.lineTo(a+r,i),t.lineTo(a,i+n),t.lineTo(a-r,i),t.closePath()}}),l=r.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var a=e.x,i=e.y,r=e.width/5*3,n=Math.max(r,e.height),o=r/2,s=o*o/(n-o),h=i-n+o+s,l=Math.asin(s/o),u=Math.cos(l)*o,c=Math.sin(l),f=Math.cos(l),d=.6*o,C=.7*o;t.moveTo(a-u,h+s),t.arc(a,h,o,Math.PI-l,2*Math.PI+l),t.bezierCurveTo(a+u-c*d,h+s+f*d,a,i-C,a,i),t.bezierCurveTo(a,i-C,a-u+c*d,h+s+f*d,a-u,h+s),t.closePath()}}),u=r.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var a=e.height,i=e.width,r=e.x,n=e.y,o=i/3*2;t.moveTo(r,n),t.lineTo(r+o,n+a),t.lineTo(r,n+a/4*3),t.lineTo(r-o,n+a),t.lineTo(r,n),t.closePath()}}),c={line:r.Line,rect:r.Rect,roundRect:r.Rect,square:r.Rect,circle:r.Circle,diamond:h,pin:l,arrow:u,triangle:s},f={line:function(t,e,a,i,r){r.x1=t,r.y1=e+i/2,r.x2=t+a,r.y2=e+i/2},rect:function(t,e,a,i,r){r.x=t,r.y=e,r.width=a,r.height=i},roundRect:function(t,e,a,i,r){r.x=t,r.y=e,r.width=a,r.height=i,r.r=Math.min(a,i)/4},square:function(t,e,a,i,r){var n=Math.min(a,i);r.x=t,r.y=e,r.width=n,r.height=n},circle:function(t,e,a,i,r){r.cx=t+a/2,r.cy=e+i/2,r.r=Math.min(a,i)/2},diamond:function(t,e,a,i,r){r.cx=t+a/2,r.cy=e+i/2,r.width=a,r.height=i},pin:function(t,e,a,i,r){r.x=t+a/2,r.y=e+i/2,r.width=a,r.height=i},arrow:function(t,e,a,i,r){r.x=t+a/2,r.y=e+i/2,r.width=a,r.height=i},triangle:function(t,e,a,i,r){r.cx=t+a/2,r.cy=e+i/2,r.width=a,r.height=i}},d={};i.each(c,function(t,e){d[e]=new t});var C=r.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,a){var i=o(t,e,a),r=this.shape;return r&&"pin"===r.symbolType&&"inside"===e.textPosition&&(i.y=a.y+.4*a.height),i},buildPath:function(t,e,a){var i=e.symbolType;if("none"!==i){var r=d[i];r||(r=d[i="rect"]),f[i](e.x,e.y,e.width,e.height,r.shape),r.buildPath(t,r.shape,a)}}});function p(t,e){if("image"!==this.type){var a=this.style,i=this.shape;i&&"line"===i.symbolType?a.stroke=t:this.__isEmptyBrush?(a.stroke=t,a.fill=e||"#fff"):(a.fill&&(a.fill=t),a.stroke&&(a.stroke=t)),this.dirty(!1)}}e.createSymbol=function(t,e,a,i,o,s,h){var l,u=0===t.indexOf("empty");return u&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),(l=0===t.indexOf("image://")?r.makeImage(t.slice(8),new n(e,a,i,o),h?"center":"cover"):0===t.indexOf("path://")?r.makePath(t.slice(7),{},new n(e,a,i,o),h?"center":"cover"):new C({shape:{symbolType:t,x:e,y:a,width:i,height:o}})).__isEmptyBrush=u,l.setColor=p,l.setColor(s),l}},p46w:function(t,e,a){var i,r;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(n){if(void 0===(r="function"==typeof(i=n)?i.call(e,a,e,t):i)||(t.exports=r),!0,t.exports=n(),!!0){var o=window.Cookies,s=window.Cookies=n();s.noConflict=function(){return window.Cookies=o,s}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var a=arguments[t];for(var i in a)e[i]=a[i]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function a(i){function r(){}function n(e,a,n){if("undefined"!=typeof document){"number"==typeof(n=t({path:"/"},r.defaults,n)).expires&&(n.expires=new Date(1*new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var o=JSON.stringify(a);/^[\{\[]/.test(o)&&(a=o)}catch(t){}a=i.write?i.write(a,e):encodeURIComponent(String(a)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var h in n)n[h]&&(s+="; "+h,!0!==n[h]&&(s+="="+n[h].split(";")[0]));return document.cookie=e+"="+a+s}}function o(t,a){if("undefined"!=typeof document){for(var r={},n=document.cookie?document.cookie.split("; "):[],o=0;o<n.length;o++){var s=n[o].split("="),h=s.slice(1).join("=");a||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var l=e(s[0]);if(h=(i.read||i)(h,l)||e(h),a)try{h=JSON.parse(h)}catch(t){}if(r[l]=h,t===l)break}catch(t){}}return t?r[t]:r}}return r.set=n,r.get=function(t){return o(t,!1)},r.getJSON=function(t){return o(t,!0)},r.remove=function(e,a){n(e,"",t(a,{expires:-1}))},r.defaults={},r.withConverter=a,r}(function(){})})},pdi6:function(t,e,a){},pzx0:function(t,e,a){t.exports={default:a("uI94"),__esModule:!0}},pzxd:function(t,e,a){var i=a("bYtY"),r=i.retrieve2,n=i.retrieve3,o=i.each,s=i.normalizeCssArray,h=i.isString,l=i.isObject,u=a("6GrX"),c=a("VpOo"),f=a("Xnb7"),d=a("fW2E"),C=a("gut8"),p=C.ContextCachedBy,m=C.WILL_BE_RESTORED,D=u.DEFAULT_FONT,v={left:1,right:1,center:1},g={top:1,bottom:1,middle:1},S=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],T={},I={};function y(t){if(t){t.font=u.makeFont(t);var e=t.textAlign;"middle"===e&&(e="center"),t.textAlign=null==e||v[e]?e:"left";var a=t.textVerticalAlign||t.textBaseline;"center"===a&&(a="middle"),t.textVerticalAlign=null==a||g[a]?a:"top",t.textPadding&&(t.textPadding=s(t.textPadding))}}function x(t,e,a,i,r){if(a&&e.textRotation){var n=e.textOrigin;"center"===n?(i=a.width/2+a.x,r=a.height/2+a.y):n&&(i=n[0]+a.x,r=n[1]+a.y),t.translate(i,r),t.rotate(-e.textRotation),t.translate(-i,-r)}}function w(t,e,a,i,o,s,h,l){var u=i.rich[a.styleName]||{};u.text=a.text;var c=a.textVerticalAlign,f=s+o/2;"top"===c?f=s+a.height/2:"bottom"===c&&(f=s+o-a.height/2),!a.isLineHolder&&F(u)&&E(t,e,u,"right"===l?h-a.width:"center"===l?h-a.width/2:h,f-a.height/2,a.width,a.height);var d=a.textPadding;d&&(h=P(h,l,d),f-=a.height/2-d[2]-a.textHeight/2),M(e,"shadowBlur",n(u.textShadowBlur,i.textShadowBlur,0)),M(e,"shadowColor",u.textShadowColor||i.textShadowColor||"transparent"),M(e,"shadowOffsetX",n(u.textShadowOffsetX,i.textShadowOffsetX,0)),M(e,"shadowOffsetY",n(u.textShadowOffsetY,i.textShadowOffsetY,0)),M(e,"textAlign",l),M(e,"textBaseline","middle"),M(e,"font",a.font||D);var C=A(u.textStroke||i.textStroke,m),p=O(u.textFill||i.textFill),m=r(u.textStrokeWidth,i.textStrokeWidth);C&&(M(e,"lineWidth",m),M(e,"strokeStyle",C),e.strokeText(a.text,h,f)),p&&(M(e,"fillStyle",p),e.fillText(a.text,h,f))}function F(t){return!!(t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor)}function E(t,e,a,i,r,n,o){var s=a.textBackgroundColor,u=a.textBorderWidth,d=a.textBorderColor,C=h(s);if(M(e,"shadowBlur",a.textBoxShadowBlur||0),M(e,"shadowColor",a.textBoxShadowColor||"transparent"),M(e,"shadowOffsetX",a.textBoxShadowOffsetX||0),M(e,"shadowOffsetY",a.textBoxShadowOffsetY||0),C||u&&d){e.beginPath();var p=a.textBorderRadius;p?c.buildPath(e,{x:i,y:r,width:n,height:o,r:p}):e.rect(i,r,n,o),e.closePath()}if(C)if(M(e,"fillStyle",s),null!=a.fillOpacity){var m=e.globalAlpha;e.globalAlpha=a.fillOpacity*a.opacity,e.fill(),e.globalAlpha=m}else e.fill();else if(l(s)){var D=s.image;(D=f.createOrUpdateImage(D,null,t,b,s))&&f.isImageReady(D)&&e.drawImage(D,i,r,n,o)}if(u&&d)if(M(e,"lineWidth",u),M(e,"strokeStyle",d),null!=a.strokeOpacity){m=e.globalAlpha;e.globalAlpha=a.strokeOpacity*a.opacity,e.stroke(),e.globalAlpha=m}else e.stroke()}function b(t,e){e.image=t}function L(t,e,a,i){var r=a.x||0,n=a.y||0,o=a.textAlign,s=a.textVerticalAlign;if(i){var h=a.textPosition;if(h instanceof Array)r=i.x+N(h[0],i.width),n=i.y+N(h[1],i.height);else{var l=e&&e.calculateTextPosition?e.calculateTextPosition(T,a,i):u.calculateTextPosition(T,a,i);r=l.x,n=l.y,o=o||l.textAlign,s=s||l.textVerticalAlign}var c=a.textOffset;c&&(r+=c[0],n+=c[1])}return(t=t||{}).baseX=r,t.baseY=n,t.textAlign=o,t.textVerticalAlign=s,t}function M(t,e,a){return t[e]=d(t,e,a),t[e]}function A(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function O(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function N(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function P(t,e,a){return"right"===e?t-a[1]:"center"===e?t+a[3]/2-a[1]/2:t+a[3]}e.normalizeTextStyle=function(t){return y(t),o(t.rich,y),t},e.renderText=function(t,e,a,i,r,n){i.rich?function(t,e,a,i,r,n){n!==m&&(e.__attrCachedBy=p.NONE);var o=t.__textCotentBlock;o&&!t.__dirtyText||(o=t.__textCotentBlock=u.parseRichText(a,i)),function(t,e,a,i,r){var n=a.width,o=a.outerWidth,s=a.outerHeight,h=i.textPadding,l=L(I,t,i,r),c=l.baseX,f=l.baseY,d=l.textAlign,C=l.textVerticalAlign;x(e,i,r,c,f);var p=u.adjustTextX(c,o,d),m=u.adjustTextY(f,s,C),D=p,v=m;h&&(D+=h[3],v+=h[0]);var g=D+n;F(i)&&E(t,e,i,p,m,o,s);for(var S=0;S<a.lines.length;S++){for(var T,y=a.lines[S],b=y.tokens,M=b.length,A=y.lineHeight,O=y.width,N=0,P=D,R=g,_=M-1;N<M&&(!(T=b[N]).textAlign||"left"===T.textAlign);)w(t,e,T,i,A,v,P,"left"),O-=T.width,P+=T.width,N++;for(;_>=0&&"right"===(T=b[_]).textAlign;)w(t,e,T,i,A,v,R,"right"),O-=T.width,R-=T.width,_--;for(P+=(n-(P-D)-(g-R)-O)/2;N<=_;)T=b[N],w(t,e,T,i,A,v,P+T.width/2,"center"),P+=T.width,N++;v+=A}}(t,e,o,i,r)}(t,e,a,i,r,n):function(t,e,a,i,r,n){"use strict";var o,s=F(i),h=!1,l=e.__attrCachedBy===p.PLAIN_TEXT;n!==m?(n&&(o=n.style,h=!s&&l&&o),e.__attrCachedBy=s?p.NONE:p.PLAIN_TEXT):l&&(e.__attrCachedBy=p.NONE);var c=i.font||D;h&&c===(o.font||D)||(e.font=c);var f=t.__computedFont;t.__styleFont!==c&&(t.__styleFont=c,f=t.__computedFont=e.font);var C=i.textPadding,v=i.textLineHeight,g=t.__textCotentBlock;g&&!t.__dirtyText||(g=t.__textCotentBlock=u.parsePlainText(a,f,C,v,i.truncate));var T=g.outerHeight,y=g.lines,w=g.lineHeight,b=L(I,t,i,r),M=b.baseX,N=b.baseY,R=b.textAlign||"left",_=b.textVerticalAlign;x(e,i,r,M,N);var B=u.adjustTextY(N,T,_),k=M,G=B;if(s||C){var V=u.getWidth(a,f),H=V;C&&(H+=C[1]+C[3]);var Y=u.adjustTextX(M,H,R);s&&E(t,e,i,Y,B,H,T),C&&(k=P(M,R,C),G+=C[0])}e.textAlign=R,e.textBaseline="middle",e.globalAlpha=i.opacity||1;for(var X=0;X<S.length;X++){var W=S[X],U=W[0],K=W[1],z=i[U];h&&z===o[U]||(e[K]=d(e,K,z||W[2]))}G+=w/2;var J=i.textStrokeWidth,j=h?o.textStrokeWidth:null,q=!h||J!==j,Z=!h||q||i.textStroke!==o.textStroke,Q=A(i.textStroke,J),$=O(i.textFill);if(Q&&(q&&(e.lineWidth=J),Z&&(e.strokeStyle=Q)),$&&(h&&i.textFill===o.textFill||(e.fillStyle=$)),1===y.length)Q&&e.strokeText(y[0],k,G),$&&e.fillText(y[0],k,G);else for(var X=0;X<y.length;X++)Q&&e.strokeText(y[X],k,G),$&&e.fillText(y[X],k,G),G+=w}(t,e,a,i,r,n)},e.getBoxPosition=L,e.getStroke=A,e.getFill=O,e.parsePercent=N,e.needDrawText=function(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}},qSUR:function(t,e,a){"use strict";
/*!
 * vue-i18n v7.8.1 
 * (c) 2018 kazuya kawaguchi
 * Released under the MIT License.
 */
function i(t,e){"undefined"!=typeof console&&(console.warn("[vue-i18n] "+t),e&&console.warn(e.stack))}function r(t){return null!==t&&"object"==typeof t}a.r(e);var n=Object.prototype.toString,o="[object Object]";function s(t){return n.call(t)===o}function h(t){return null===t||void 0===t}function l(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var a=null,i=null;return 1===t.length?r(t[0])||Array.isArray(t[0])?i=t[0]:"string"==typeof t[0]&&(a=t[0]):2===t.length&&("string"==typeof t[0]&&(a=t[0]),(r(t[1])||Array.isArray(t[1]))&&(i=t[1])),{locale:a,params:i}}function u(t,e){if(!t&&"string"!=typeof t)return null;var a=t.split("|");return a[e=function(t,e){return t=Math.abs(t),2===e?function(t){return t?t>1?1:0:1}(t):t?Math.min(t,2):0}(e,a.length)]?a[e].trim():t}function c(t){return JSON.parse(JSON.stringify(t))}var f=Object.prototype.hasOwnProperty;function d(t,e){return f.call(t,e)}function C(t){for(var e=arguments,a=Object(t),i=1;i<arguments.length;i++){var n=e[i];if(void 0!==n&&null!==n){var o=void 0;for(o in n)d(n,o)&&(r(n[o])?a[o]=C(a[o],n[o]):a[o]=n[o])}}return a}var p="undefined"!=typeof Intl&&void 0!==Intl.DateTimeFormat,m="undefined"!=typeof Intl&&void 0!==Intl.NumberFormat;var D,v={beforeCreate:function(){var t=this.$options;if(t.i18n=t.i18n||(t.__i18n?{}:null),t.i18n)if(t.i18n instanceof K){if(t.__i18n)try{var e={};t.__i18n.forEach(function(t){e=C(e,JSON.parse(t))}),Object.keys(e).forEach(function(a){t.i18n.mergeLocaleMessage(a,e[a])})}catch(t){0}this._i18n=t.i18n,this._i18nWatcher=this._i18n.watchI18nData(),this._i18n.subscribeDataChanging(this),this._subscribing=!0}else if(s(t.i18n)){if(this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof K&&(t.i18n.root=this.$root.$i18n,t.i18n.formatter=this.$root.$i18n.formatter,t.i18n.fallbackLocale=this.$root.$i18n.fallbackLocale,t.i18n.silentTranslationWarn=this.$root.$i18n.silentTranslationWarn),t.__i18n)try{var a={};t.__i18n.forEach(function(t){a=C(a,JSON.parse(t))}),t.i18n.messages=a}catch(t){0}this._i18n=new K(t.i18n),this._i18nWatcher=this._i18n.watchI18nData(),this._i18n.subscribeDataChanging(this),this._subscribing=!0,(void 0===t.i18n.sync||t.i18n.sync)&&(this._localeWatcher=this.$i18n.watchLocale())}else 0;else this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof K?(this._i18n=this.$root.$i18n,this._i18n.subscribeDataChanging(this),this._subscribing=!0):t.parent&&t.parent.$i18n&&t.parent.$i18n instanceof K&&(this._i18n=t.parent.$i18n,this._i18n.subscribeDataChanging(this),this._subscribing=!0)},beforeDestroy:function(){this._i18n&&(this._subscribing&&(this._i18n.unsubscribeDataChanging(this),delete this._subscribing),this._i18nWatcher&&(this._i18nWatcher(),delete this._i18nWatcher),this._localeWatcher&&(this._localeWatcher(),delete this._localeWatcher),this._i18n=null)}},g={name:"i18n",functional:!0,props:{tag:{type:String,default:"span"},path:{type:String,required:!0},locale:{type:String},places:{type:[Array,Object]}},render:function(t,e){var a=e.props,r=e.data,n=e.children,o=e.parent.$i18n;if(n=(n||[]).filter(function(t){return t.tag||(t.text=t.text.trim())}),!o)return n;var s=a.path,h=a.locale,l={},u=a.places||{},c=Array.isArray(u)?u.length>0:Object.keys(u).length>0,f=n.every(function(t){if(t.data&&t.data.attrs){var e=t.data.attrs.place;return void 0!==e&&""!==e}});return c&&n.length>0&&!f&&i("If places prop is set, all child elements must have place prop set."),Array.isArray(u)?u.forEach(function(t,e){l[e]=t}):Object.keys(u).forEach(function(t){l[t]=u[t]}),n.forEach(function(t,e){var a=f?""+t.data.attrs.place:""+e;l[a]=t}),t(a.tag,r,o.i(s,h,l))}};function S(t,e,a){y(t,a)&&x(t,e,a)}function T(t,e,a,i){y(t,a)&&(function(t,e){var a=e.context;return t._locale===a.$i18n.locale}(t,a)&&function t(e,a){if(e===a)return!0;var i=r(e),n=r(a);if(!i||!n)return!i&&!n&&String(e)===String(a);try{var o=Array.isArray(e),s=Array.isArray(a);if(o&&s)return e.length===a.length&&e.every(function(e,i){return t(e,a[i])});if(o||s)return!1;var h=Object.keys(e),l=Object.keys(a);return h.length===l.length&&h.every(function(i){return t(e[i],a[i])})}catch(t){return!1}}(e.value,e.oldValue)||x(t,e,a))}function I(t,e,a,i){y(t,a)&&(t.textContent="",t._vt=void 0,delete t._vt,t._locale=void 0,delete t._locale)}function y(t,e){var a=e.context;return a?!!a.$i18n||(i("not exist VueI18n instance in Vue instance"),!1):(i("not exist Vue instance in VNode context"),!1)}function x(t,e,a){var r,n,o=function(t){var e,a,i,r;"string"==typeof t?e=t:s(t)&&(e=t.path,a=t.locale,i=t.args,r=t.choice);return{path:e,locale:a,args:i,choice:r}}(e.value),h=o.path,l=o.locale,u=o.args,c=o.choice;if(h||l||u)if(h){var f=a.context;t._vt=t.textContent=c?(r=f.$i18n).tc.apply(r,[h,c].concat(w(l,u))):(n=f.$i18n).t.apply(n,[h].concat(w(l,u))),t._locale=f.$i18n.locale}else i("required `path` in v-t directive");else i("not support value type")}function w(t,e){var a=[];return t&&a.push(t),e&&(Array.isArray(e)||s(e))&&a.push(e),a}function F(t){(D=t).version&&Number(D.version.split(".")[0]);F.installed=!0,Object.defineProperty(D.prototype,"$i18n",{get:function(){return this._i18n}}),function(t){Object.defineProperty(t.prototype,"$t",{get:function(){var t=this;return function(e){for(var a=[],i=arguments.length-1;i-- >0;)a[i]=arguments[i+1];var r=t.$i18n;return r._t.apply(r,[e,r.locale,r._getMessages(),t].concat(a))}}}),Object.defineProperty(t.prototype,"$tc",{get:function(){var t=this;return function(e,a){for(var i=[],r=arguments.length-2;r-- >0;)i[r]=arguments[r+2];var n=t.$i18n;return n._tc.apply(n,[e,n.locale,n._getMessages(),t,a].concat(i))}}}),Object.defineProperty(t.prototype,"$te",{get:function(){var t=this;return function(e,a){var i=t.$i18n;return i._te(e,i.locale,i._getMessages(),a)}}}),Object.defineProperty(t.prototype,"$d",{get:function(){var t=this;return function(e){for(var a,i=[],r=arguments.length-1;r-- >0;)i[r]=arguments[r+1];return(a=t.$i18n).d.apply(a,[e].concat(i))}}}),Object.defineProperty(t.prototype,"$n",{get:function(){var t=this;return function(e){for(var a,i=[],r=arguments.length-1;r-- >0;)i[r]=arguments[r+1];return(a=t.$i18n).n.apply(a,[e].concat(i))}}})}(D),D.mixin(v),D.directive("t",{bind:S,update:T,unbind:I}),D.component(g.name,g);var e=D.config.optionMergeStrategies;e.i18n=e.methods}var E=function(){this._caches=Object.create(null)};E.prototype.interpolate=function(t,e){if(!e)return[t];var a=this._caches[t];return a||(a=function(t){var e=[],a=0,i="";for(;a<t.length;){var r=t[a++];if("{"===r){i&&e.push({type:"text",value:i}),i="";var n="";for(r=t[a++];"}"!==r;)n+=r,r=t[a++];var o=b.test(n)?"list":L.test(n)?"named":"unknown";e.push({value:n,type:o})}else"%"===r?"{"!==t[a]&&(i+=r):i+=r}return i&&e.push({type:"text",value:i}),e}(t),this._caches[t]=a),function(t,e){var a=[],i=0,n=Array.isArray(e)?"list":r(e)?"named":"unknown";if("unknown"===n)return a;for(;i<t.length;){var o=t[i];switch(o.type){case"text":a.push(o.value);break;case"list":a.push(e[parseInt(o.value,10)]);break;case"named":"named"===n&&a.push(e[o.value]);break;case"unknown":0}i++}return a}(a,e)};var b=/^(\d)+/,L=/^(\w)+/;var M=0,A=1,O=2,N=3,P=0,R=4,_=5,B=6,k=7,G=8,V=[];V[P]={ws:[P],ident:[3,M],"[":[R],eof:[k]},V[1]={ws:[1],".":[2],"[":[R],eof:[k]},V[2]={ws:[2],ident:[3,M],0:[3,M],number:[3,M]},V[3]={ident:[3,M],0:[3,M],number:[3,M],ws:[1,A],".":[2,A],"[":[R,A],eof:[k,A]},V[R]={"'":[_,M],'"':[B,M],"[":[R,O],"]":[1,N],eof:G,else:[R,M]},V[_]={"'":[R,M],eof:G,else:[_,M]},V[B]={'"':[R,M],eof:G,else:[B,M]};var H=/^\s?(true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function Y(t){if(void 0===t||null===t)return"eof";var e=t.charCodeAt(0);switch(e){case 91:case 93:case 46:case 34:case 39:case 48:return t;case 95:case 36:case 45:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return e>=97&&e<=122||e>=65&&e<=90?"ident":e>=49&&e<=57?"number":"else"}function X(t){var e=t.trim();return("0"!==t.charAt(0)||!isNaN(t))&&(function(t){return H.test(t)}(e)?function(t){var e=t.charCodeAt(0);return e!==t.charCodeAt(t.length-1)||34!==e&&39!==e?t:t.slice(1,-1)}(e):"*"+e)}var W=function(){this._cache=Object.create(null)};W.prototype.parsePath=function(t){var e=this._cache[t];return e||(e=function(t){var e,a,i,r,n,o,s,h=[],l=-1,u=P,c=0,f=[];function d(){var e=t[l+1];if(u===_&&"'"===e||u===B&&'"'===e)return l++,i="\\"+e,f[M](),!0}for(f[A]=function(){void 0!==a&&(h.push(a),a=void 0)},f[M]=function(){void 0===a?a=i:a+=i},f[O]=function(){f[M](),c++},f[N]=function(){if(c>0)c--,u=R,f[M]();else{if(c=0,!1===(a=X(a)))return!1;f[A]()}};null!==u;)if("\\"!==(e=t[++l])||!d()){if(r=Y(e),(n=(s=V[u])[r]||s.else||G)===G)return;if(u=n[0],(o=f[n[1]])&&(i=void 0===(i=n[2])?e:i,!1===o()))return;if(u===k)return h}}(t))&&(this._cache[t]=e),e||[]},W.prototype.getPathValue=function(t,e){if(!r(t))return null;var a=this.parsePath(e);if(function(t){return!!Array.isArray(t)&&0===t.length}(a))return null;for(var i=a.length,n=t,o=0;o<i;){var s=n[a[o]];if(void 0===s){n=null;break}n=s,o++}return n};var U=["style","currency","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","localeMatcher","formatMatcher"],K=function(t){var e=this;void 0===t&&(t={}),!D&&"undefined"!=typeof window&&window.Vue&&F(window.Vue);var a=t.locale||"en-US",i=t.fallbackLocale||"en-US",r=t.messages||{},n=t.dateTimeFormats||{},o=t.numberFormats||{};this._vm=null,this._formatter=t.formatter||new E,this._missing=t.missing||null,this._root=t.root||null,this._sync=void 0===t.sync||!!t.sync,this._fallbackRoot=void 0===t.fallbackRoot||!!t.fallbackRoot,this._silentTranslationWarn=void 0!==t.silentTranslationWarn&&!!t.silentTranslationWarn,this._dateTimeFormatters={},this._numberFormatters={},this._path=new W,this._dataListeners=[],this._exist=function(t,a){return!(!t||!a)&&!h(e._path.getPathValue(t,a))},this._initVM({locale:a,fallbackLocale:i,messages:r,dateTimeFormats:n,numberFormats:o})},z={vm:{configurable:!0},messages:{configurable:!0},dateTimeFormats:{configurable:!0},numberFormats:{configurable:!0},locale:{configurable:!0},fallbackLocale:{configurable:!0},missing:{configurable:!0},formatter:{configurable:!0},silentTranslationWarn:{configurable:!0}};K.prototype._initVM=function(t){var e=D.config.silent;D.config.silent=!0,this._vm=new D({data:t}),D.config.silent=e},K.prototype.subscribeDataChanging=function(t){this._dataListeners.push(t)},K.prototype.unsubscribeDataChanging=function(t){!function(t,e){if(t.length){var a=t.indexOf(e);if(a>-1)t.splice(a,1)}}(this._dataListeners,t)},K.prototype.watchI18nData=function(){var t=this;return this._vm.$watch("$data",function(){for(var e=t._dataListeners.length;e--;)D.nextTick(function(){t._dataListeners[e]&&t._dataListeners[e].$forceUpdate()})},{deep:!0})},K.prototype.watchLocale=function(){if(!this._sync||!this._root)return null;var t=this._vm;return this._root.vm.$watch("locale",function(e){t.$set(t,"locale",e),t.$forceUpdate()},{immediate:!0})},z.vm.get=function(){return this._vm},z.messages.get=function(){return c(this._getMessages())},z.dateTimeFormats.get=function(){return c(this._getDateTimeFormats())},z.numberFormats.get=function(){return c(this._getNumberFormats())},z.locale.get=function(){return this._vm.locale},z.locale.set=function(t){this._vm.$set(this._vm,"locale",t)},z.fallbackLocale.get=function(){return this._vm.fallbackLocale},z.fallbackLocale.set=function(t){this._vm.$set(this._vm,"fallbackLocale",t)},z.missing.get=function(){return this._missing},z.missing.set=function(t){this._missing=t},z.formatter.get=function(){return this._formatter},z.formatter.set=function(t){this._formatter=t},z.silentTranslationWarn.get=function(){return this._silentTranslationWarn},z.silentTranslationWarn.set=function(t){this._silentTranslationWarn=t},K.prototype._getMessages=function(){return this._vm.messages},K.prototype._getDateTimeFormats=function(){return this._vm.dateTimeFormats},K.prototype._getNumberFormats=function(){return this._vm.numberFormats},K.prototype._warnDefault=function(t,e,a,i,r){if(!h(a))return a;if(this._missing){var n=this._missing.apply(null,[t,e,i,r]);if("string"==typeof n)return n}else 0;return e},K.prototype._isFallbackRoot=function(t){return!t&&!h(this._root)&&this._fallbackRoot},K.prototype._interpolate=function(t,e,a,i,r,n){if(!e)return null;var o,l=this._path.getPathValue(e,a);if(Array.isArray(l)||s(l))return l;if(h(l)){if(!s(e))return null;if("string"!=typeof(o=e[a]))return null}else{if("string"!=typeof l)return null;o=l}return o.indexOf("@:")>=0&&(o=this._link(t,e,o,i,r,n)),this._render(o,r,n)},K.prototype._link=function(t,e,a,i,r,n){var o=a,s=o.match(/(@:[\w\-_|.]+)/g);for(var h in s)if(s.hasOwnProperty(h)){var l=s[h],u=l.substr(2),c=this._interpolate(t,e,u,i,"raw"===r?"string":r,"raw"===r?void 0:n);if(this._isFallbackRoot(c)){if(!this._root)throw Error("unexpected error");var f=this._root;c=f._translate(f._getMessages(),f.locale,f.fallbackLocale,u,i,r,n)}o=(c=this._warnDefault(t,u,c,i,Array.isArray(n)?n:[n]))?o.replace(l,c):o}return o},K.prototype._render=function(t,e,a){var i=this._formatter.interpolate(t,a);return"string"===e?i.join(""):i},K.prototype._translate=function(t,e,a,i,r,n,o){var s=this._interpolate(e,t[e],i,r,n,o);return h(s)&&h(s=this._interpolate(a,t[a],i,r,n,o))?null:s},K.prototype._t=function(t,e,a,i){for(var r,n=[],o=arguments.length-4;o-- >0;)n[o]=arguments[o+4];if(!t)return"";var s=l.apply(void 0,n),h=s.locale||e,u=this._translate(a,h,this.fallbackLocale,t,i,"string",s.params);if(this._isFallbackRoot(u)){if(!this._root)throw Error("unexpected error");return(r=this._root).t.apply(r,[t].concat(n))}return this._warnDefault(h,t,u,i,n)},K.prototype.t=function(t){for(var e,a=[],i=arguments.length-1;i-- >0;)a[i]=arguments[i+1];return(e=this)._t.apply(e,[t,this.locale,this._getMessages(),null].concat(a))},K.prototype._i=function(t,e,a,i,r){var n=this._translate(a,e,this.fallbackLocale,t,i,"raw",r);if(this._isFallbackRoot(n)){if(!this._root)throw Error("unexpected error");return this._root.i(t,e,r)}return this._warnDefault(e,t,n,i,[r])},K.prototype.i=function(t,e,a){return t?("string"!=typeof e&&(e=this.locale),this._i(t,e,this._getMessages(),null,a)):""},K.prototype._tc=function(t,e,a,i,r){for(var n,o=[],s=arguments.length-5;s-- >0;)o[s]=arguments[s+5];return t?(void 0===r&&(r=1),u((n=this)._t.apply(n,[t,e,a,i].concat(o)),r)):""},K.prototype.tc=function(t,e){for(var a,i=[],r=arguments.length-2;r-- >0;)i[r]=arguments[r+2];return(a=this)._tc.apply(a,[t,this.locale,this._getMessages(),null,e].concat(i))},K.prototype._te=function(t,e,a){for(var i=[],r=arguments.length-3;r-- >0;)i[r]=arguments[r+3];var n=l.apply(void 0,i).locale||e;return this._exist(a[n],t)},K.prototype.te=function(t,e){return this._te(t,this.locale,this._getMessages(),e)},K.prototype.getLocaleMessage=function(t){return c(this._vm.messages[t]||{})},K.prototype.setLocaleMessage=function(t,e){this._vm.$set(this._vm.messages,t,e)},K.prototype.mergeLocaleMessage=function(t,e){this._vm.$set(this._vm.messages,t,D.util.extend(this._vm.messages[t]||{},e))},K.prototype.getDateTimeFormat=function(t){return c(this._vm.dateTimeFormats[t]||{})},K.prototype.setDateTimeFormat=function(t,e){this._vm.$set(this._vm.dateTimeFormats,t,e)},K.prototype.mergeDateTimeFormat=function(t,e){this._vm.$set(this._vm.dateTimeFormats,t,D.util.extend(this._vm.dateTimeFormats[t]||{},e))},K.prototype._localizeDateTime=function(t,e,a,i,r){var n=e,o=i[n];if((h(o)||h(o[r]))&&(o=i[n=a]),h(o)||h(o[r]))return null;var s=o[r],l=n+"__"+r,u=this._dateTimeFormatters[l];return u||(u=this._dateTimeFormatters[l]=new Intl.DateTimeFormat(n,s)),u.format(t)},K.prototype._d=function(t,e,a){if(!a)return new Intl.DateTimeFormat(e).format(t);var i=this._localizeDateTime(t,e,this.fallbackLocale,this._getDateTimeFormats(),a);if(this._isFallbackRoot(i)){if(!this._root)throw Error("unexpected error");return this._root.d(t,a,e)}return i||""},K.prototype.d=function(t){for(var e=[],a=arguments.length-1;a-- >0;)e[a]=arguments[a+1];var i=this.locale,n=null;return 1===e.length?"string"==typeof e[0]?n=e[0]:r(e[0])&&(e[0].locale&&(i=e[0].locale),e[0].key&&(n=e[0].key)):2===e.length&&("string"==typeof e[0]&&(n=e[0]),"string"==typeof e[1]&&(i=e[1])),this._d(t,i,n)},K.prototype.getNumberFormat=function(t){return c(this._vm.numberFormats[t]||{})},K.prototype.setNumberFormat=function(t,e){this._vm.$set(this._vm.numberFormats,t,e)},K.prototype.mergeNumberFormat=function(t,e){this._vm.$set(this._vm.numberFormats,t,D.util.extend(this._vm.numberFormats[t]||{},e))},K.prototype._localizeNumber=function(t,e,a,i,r,n){var o=e,s=i[o];if((h(s)||h(s[r]))&&(s=i[o=a]),h(s)||h(s[r]))return null;var l,u=s[r];if(n)l=new Intl.NumberFormat(o,Object.assign({},u,n));else{var c=o+"__"+r;(l=this._numberFormatters[c])||(l=this._numberFormatters[c]=new Intl.NumberFormat(o,u))}return l.format(t)},K.prototype._n=function(t,e,a,i){if(!a)return(i?new Intl.NumberFormat(e,i):new Intl.NumberFormat(e)).format(t);var r=this._localizeNumber(t,e,this.fallbackLocale,this._getNumberFormats(),a,i);if(this._isFallbackRoot(r)){if(!this._root)throw Error("unexpected error");return this._root.n(t,Object.assign({},{key:a,locale:e},i))}return r||""},K.prototype.n=function(t){for(var e=[],a=arguments.length-1;a-- >0;)e[a]=arguments[a+1];var i=this.locale,n=null,o=null;return 1===e.length?"string"==typeof e[0]?n=e[0]:r(e[0])&&(e[0].locale&&(i=e[0].locale),e[0].key&&(n=e[0].key),o=Object.keys(e[0]).reduce(function(t,a){var i;return U.includes(a)?Object.assign({},t,((i={})[a]=e[0][a],i)):t},null)):2===e.length&&("string"==typeof e[0]&&(n=e[0]),"string"==typeof e[1]&&(i=e[1])),this._n(t,i,n,o)},Object.defineProperties(K.prototype,z),K.availabilities={dateTimeFormat:p,numberFormat:m},K.install=F,K.version="7.8.1",e.default=K},qTm5:function(t,e,a){"undefined"!=typeof self&&self,t.exports=function(t){function e(i){if(a[i])return a[i].exports;var r=a[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};return e.m=t,e.c=a,e.d=function(t,a,i){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),a(4)();var i=a(5),r=a(6);e.default={name:"vue-seamless-scroll",data:function(){return{xPos:0,yPos:0,delay:0,copyHtml:"",height:0,width:0,realBoxWidth:0}},props:{data:{type:Array,default:function(){return[]}},classOption:{type:Object,default:function(){return{}}}},computed:{leftSwitchState:function(){return this.xPos<0},rightSwitchState:function(){return Math.abs(this.xPos)<this.realBoxWidth-this.width},leftSwitchClass:function(){return this.leftSwitchState?"":this.options.switchDisabledClass},rightSwitchClass:function(){return this.rightSwitchState?"":this.options.switchDisabledClass},leftSwitch:function(){return{position:"absolute",margin:this.height/2+"px 0 0 -"+this.options.switchOffset+"px",transform:"translate(-100%,-50%)"}},rightSwitch:function(){return{position:"absolute",margin:this.height/2+"px 0 0 "+(this.width+this.options.switchOffset)+"px",transform:"translateY(-50%)"}},float:function(){return this.isHorizontal?{float:"left",overflow:"hidden"}:{overflow:"hidden"}},pos:function(){return{transform:"translate("+this.xPos+"px,"+this.yPos+"px)",transition:"all "+this.ease+" "+this.delay+"ms",overflow:"hidden"}},defaultOption:function(){return{step:1,limitMoveNum:5,hoverStop:!0,direction:1,openTouch:!0,singleHeight:0,singleWidth:0,waitTime:1e3,switchOffset:30,autoPlay:!0,navigation:!1,switchSingleStep:134,switchDelay:400,switchDisabledClass:"disabled",isSingleRemUnit:!1}},options:function(){return r({},this.defaultOption,this.classOption)},navigation:function(){return this.options.navigation},autoPlay:function(){return!this.navigation&&this.options.autoPlay},scrollSwitch:function(){return this.data.length>=this.options.limitMoveNum},hoverStopSwitch:function(){return this.options.hoverStop&&this.autoPlay&&this.scrollSwitch},canTouchScroll:function(){return this.options.openTouch},isHorizontal:function(){return this.options.direction>1},baseFontSize:function(){return this.options.isSingleRemUnit?parseInt(window.getComputedStyle(document.documentElement,null).fontSize):1},realSingleStopWidth:function(){return this.options.singleWidth*this.baseFontSize},realSingleStopHeight:function(){return this.options.singleHeight*this.baseFontSize},step:function(){var t=this.options.step;return this.isHorizontal?this.realSingleStopWidth:this.realSingleStopHeight,t}},methods:{reset:function(){this._cancle(),this._initMove()},leftSwitchClick:function(){if(this.leftSwitchState)return Math.abs(this.xPos)<this.options.switchSingleStep?void(this.xPos=0):void(this.xPos+=this.options.switchSingleStep)},rightSwitchClick:function(){if(this.rightSwitchState)return this.realBoxWidth-this.width+this.xPos<this.options.switchSingleStep?void(this.xPos=this.width-this.realBoxWidth):void(this.xPos-=this.options.switchSingleStep)},_cancle:function(){cancelAnimationFrame(this.reqFrame||"")},touchStart:function(t){var e=this;if(this.canTouchScroll){var a=void 0,i=t.targetTouches[0],r=this.options,n=r.waitTime,o=r.singleHeight,s=r.singleWidth;this.startPos={x:i.pageX,y:i.pageY},this.startPosY=this.yPos,this.startPosX=this.xPos,o&&s?(a&&clearTimeout(a),a=setTimeout(function(){e._cancle()},n+20)):this._cancle()}},touchMove:function(t){if(!(!this.canTouchScroll||t.targetTouches.length>1||t.scale&&1!==t.scale)){var e=t.targetTouches[0],a=this.options.direction;this.endPos={x:e.pageX-this.startPos.x,y:e.pageY-this.startPos.y},event.preventDefault();var i=Math.abs(this.endPos.x)<Math.abs(this.endPos.y)?1:0;1===i&&a<2?this.yPos=this.startPosY+this.endPos.y:0===i&&a>1&&(this.xPos=this.startPosX+this.endPos.x)}},touchEnd:function(){var t=this;if(this.canTouchScroll){var e=void 0,a=this.options.direction;if(this.delay=50,1===a)this.yPos>0&&(this.yPos=0);else if(0===a){var i=this.realBoxHeight/2*-1;this.yPos<i&&(this.yPos=i)}else if(2===a)this.xPos>0&&(this.xPos=0);else if(3===a){var r=-1*this.realBoxWidth;this.xPos<r&&(this.xPos=r)}e&&clearTimeout(e),e=setTimeout(function(){t.delay=0,t._move()},this.delay)}},enter:function(){this.hoverStopSwitch&&this._stopMove()},leave:function(){this.hoverStopSwitch&&this._startMove()},_move:function(){this.isHover||(this._cancle(),this.reqFrame=requestAnimationFrame(function(){var t=this,e=this.realBoxHeight/2,a=this.realBoxWidth/2,i=this.options,r=i.direction,n=i.waitTime,o=this.step;1===r?(Math.abs(this.yPos)>=e&&(this.$emit("ScrollEnd"),this.yPos=0),this.yPos-=o):0===r?(this.yPos>=0&&(this.$emit("ScrollEnd"),this.yPos=-1*e),this.yPos+=o):2===r?(Math.abs(this.xPos)>=a&&(this.$emit("ScrollEnd"),this.xPos=0),this.xPos-=o):3===r&&(this.xPos>=0&&(this.$emit("ScrollEnd"),this.xPos=-1*a),this.xPos+=o),this.singleWaitTime&&clearTimeout(this.singleWaitTime),this.realSingleStopHeight?Math.abs(this.yPos)%this.realSingleStopHeight<o?this.singleWaitTime=setTimeout(function(){t._move()},n):this._move():this.realSingleStopWidth&&Math.abs(this.xPos)%this.realSingleStopWidth<o?this.singleWaitTime=setTimeout(function(){t._move()},n):this._move()}.bind(this)))},_initMove:function(){var t=this;this.$nextTick(function(){var e=t.options.switchDelay,a=t.autoPlay,i=t.isHorizontal;if(t._dataWarm(t.data),t.copyHtml="",i){t.height=t.$refs.wrap.offsetHeight,t.width=t.$refs.wrap.offsetWidth;var r=t.$refs.slotList.offsetWidth;a&&(r=2*r+1),t.$refs.realBox.style.width=r+"px",t.realBoxWidth=r}if(!a)return t.ease="linear",void(t.delay=e);t.ease="ease-in",t.delay=0,t.scrollSwitch?(t.copyHtml=t.$refs.slotList.innerHTML,setTimeout(function(){t.realBoxHeight=t.$refs.realBox.offsetHeight,t._move()},0)):(t._cancle(),t.yPos=t.xPos=0)})},_dataWarm:function(t){t.length},_startMove:function(){this.isHover=!1,this._move()},_stopMove:function(){this.isHover=!0,this.singleWaitTime&&clearTimeout(this.singleWaitTime),this._cancle()}},mounted:function(){this._initMove()},watch:{data:function(t,e){this._dataWarm(t),i(t,e)||this.reset()},autoPlay:function(t){t?this.reset():this._stopMove()}},beforeCreate:function(){this.reqFrame=null,this.singleWaitTime=null,this.isHover=!1,this.ease="ease-in"},beforeDestroy:function(){this._cancle(),clearTimeout(this.singleWaitTime)}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),r=function(t){return t&&t.__esModule?t:{default:t}}(i);r.default.install=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.component(e.componentName||r.default.name,r.default)},"undefined"!=typeof window&&window.Vue&&Vue.component(r.default.name,r.default),e.default=r.default},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(0),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);var o=a(7),s=a(3),h=s(r.a,o.a,!1,null,null,null);e.default=h.exports},function(t,e){t.exports=function(t,e,a,i,r,n){var o,s=t=t||{},h=typeof t.default;"object"!==h&&"function"!==h||(o=t,s=t.default);var l,u="function"==typeof s?s.options:s;if(e&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0),a&&(u.functional=!0),r&&(u._scopeId=r),n?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},u._ssrRegister=l):i&&(l=i),l){var c=u.functional,f=c?u.render:u.beforeCreate;c?(u._injectStyles=l,u.render=function(t,e){return l.call(e),f(t,e)}):u.beforeCreate=f?[].concat(f,l):[l]}return{esModule:o,exports:s,options:u}}},function(t,e){t.exports=function(){window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t)},window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}},function(t,e){t.exports=function(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(var a=0;a<t.length;++a)if(t[a]!==e[a])return!1;return!0}},function(t,e){var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function t(){Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var e=void 0,i=void 0,r=void 0,n=void 0,o=void 0,s=void 0,h=1,l=arguments[0]||{},u=!1,c=arguments.length;if("boolean"==typeof l&&(u=l,l=arguments[1]||{},h++),"object"!==(void 0===l?"undefined":a(l))&&"function"!=typeof l&&(l={}),h===c)return l;for(;h<c;h++)if(null!=(i=arguments[h]))for(e in i)r=l[e],n=i[e],o=Array.isArray(n),u&&n&&("object"===(void 0===n?"undefined":a(n))||o)?(o?(o=!1,s=r&&Array.isArray(r)?r:[]):s=r&&"object"===(void 0===r?"undefined":a(r))?r:{},l[e]=t(u,s,n)):void 0!==n&&(l[e]=n);return l}},function(t,e,a){"use strict";var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"wrap"},[t.navigation?a("div",{class:t.leftSwitchClass,style:t.leftSwitch,on:{click:t.leftSwitchClick}},[t._t("left-switch")],2):t._e(),t._v(" "),t.navigation?a("div",{class:t.rightSwitchClass,style:t.rightSwitch,on:{click:t.rightSwitchClick}},[t._t("right-switch")],2):t._e(),t._v(" "),a("div",{ref:"realBox",style:t.pos,on:{mouseenter:t.enter,mouseleave:t.leave,touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}},[a("div",{ref:"slotList",style:t.float},[t._t("default")],2),t._v(" "),a("div",{style:t.float,domProps:{innerHTML:t._s(t.copyHtml)}})])])},staticRenderFns:[]};e.a=i}]).default},qWt2:function(t,e,a){var i=a("ProS").extendComponentModel({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});t.exports=i},r6Bn:function(t,e,a){var i=a("bYtY"),r=a("ItGF"),n=a("4fz+"),o=a("BPZU");function s(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var h=function(){this._roots=[],this._displayList=[],this._displayListLen=0};h.prototype={constructor:h,traverse:function(t,e){for(var a=0;a<this._roots.length;a++)this._roots[a].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,a=this._displayList,i=0,n=e.length;i<n;i++)this._updateAndAddDisplayable(e[i],null,t);a.length=this._displayListLen,r.canvasSupported&&o(a,s)},_updateAndAddDisplayable:function(t,e,a){if(!t.ignore||a){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var i=t.clipPath;if(i){e=e?e.slice():[];for(var r=i,n=t;r;)r.parent=n,r.updateTransform(),e.push(r),n=r,r=r.clipPath}if(t.isGroup){for(var o=t._children,s=0;s<o.length;s++){var h=o[s];t.__dirty&&(h.__dirty=!0),this._updateAndAddDisplayable(h,e,a)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof n&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var a=this._roots[e];a instanceof n&&a.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array){e=0;for(var r=t.length;e<r;e++)this.delRoot(t[e])}else{var o=i.indexOf(this._roots,t);o>=0&&(this.delFromStorage(t),this._roots.splice(o,1),t instanceof n&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t&&(t.__storage=this,t.dirty(!1)),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:s};var l=h;t.exports=l},r6fa:function(t,e,a){a("3+Ww"),a("C5kU"),a("ZY/g"),a("PfQu"),a("iocF"),a("Huux"),a("Li4W"),t.exports=a("VSTI").Set},rA99:function(t,e,a){var i=a("y+Vt"),r=a("QBsz"),n=a("Sj9i"),o=n.quadraticSubdivide,s=n.cubicSubdivide,h=n.quadraticAt,l=n.cubicAt,u=n.quadraticDerivativeAt,c=n.cubicDerivativeAt,f=[];function d(t,e,a){var i=t.cpx2,r=t.cpy2;return null===i||null===r?[(a?c:l)(t.x1,t.cpx1,t.cpx2,t.x2,e),(a?c:l)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(a?u:h)(t.x1,t.cpx1,t.x2,e),(a?u:h)(t.y1,t.cpy1,t.y2,e)]}var C=i.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var a=e.x1,i=e.y1,r=e.x2,n=e.y2,h=e.cpx1,l=e.cpy1,u=e.cpx2,c=e.cpy2,d=e.percent;0!==d&&(t.moveTo(a,i),null==u||null==c?(d<1&&(o(a,h,r,d,f),h=f[1],r=f[2],o(i,l,n,d,f),l=f[1],n=f[2]),t.quadraticCurveTo(h,l,r,n)):(d<1&&(s(a,h,u,r,d,f),h=f[1],u=f[2],r=f[3],s(i,l,c,n,d,f),l=f[1],c=f[2],n=f[3]),t.bezierCurveTo(h,l,u,c,r,n)))},pointAt:function(t){return d(this.shape,t,!1)},tangentAt:function(t){var e=d(this.shape,t,!0);return r.normalize(e,e)}});t.exports=C},rC42:function(t,e,a){
/**
 * @license
 * Video.js 6.13.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */
function i(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var r=i(a("+3vN")),n=i(a("BoVL")),o=i(a("G43f")),s=i(a("jBAH")),h=i(a("7sdD")),l=i(a("RV59")),u="6.13.0",c=r.navigator&&r.navigator.userAgent||"",f=/AppleWebKit\/([\d.]+)/i.exec(c),d=f?parseFloat(f.pop()):null,C=/iPad/i.test(c),p=/iPhone/i.test(c)&&!C,m=/iPod/i.test(c),D=p||C||m,v=function(){var t=c.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),g=/Android/i.test(c),S=function(){var t=c.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),a=t[2]&&parseFloat(t[2]);return e&&a?parseFloat(t[1]+"."+t[2]):e||null}(),T=g&&/webkit/i.test(c)&&S<2.3,I=g&&S<5&&d<537,y=/Firefox/i.test(c),x=/Edge/i.test(c),w=!x&&(/Chrome/i.test(c)||/CriOS/i.test(c)),F=function(){var t=c.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),E=/MSIE\s8\.0/.test(c),b=function(){var t=/MSIE\s(\d+)\.\d/.exec(c),e=t&&parseFloat(t[1]);return!e&&/Trident\/7.0/i.test(c)&&/rv:11.0/.test(c)&&(e=11),e}(),L=/Safari/i.test(c)&&!w&&!g&&!x,M=(L||D)&&!w,A=$()&&("ontouchstart"in r||r.navigator.maxTouchPoints||r.DocumentTouch&&r.document instanceof r.DocumentTouch),O=$()&&"backgroundSize"in r.document.createElement("video").style,N=(Object.freeze||Object)({IS_IPAD:C,IS_IPHONE:p,IS_IPOD:m,IS_IOS:D,IOS_VERSION:v,IS_ANDROID:g,ANDROID_VERSION:S,IS_OLD_ANDROID:T,IS_NATIVE_ANDROID:I,IS_FIREFOX:y,IS_EDGE:x,IS_CHROME:w,CHROME_VERSION:F,IS_IE8:E,IE_VERSION:b,IS_SAFARI:L,IS_ANY_SAFARI:M,TOUCH_ENABLED:A,BACKGROUND_SIZE_SUPPORTED:O}),P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},_=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},B=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},k=function(t,e){return t.raw=e,t},G=Object.prototype.toString,V=function(t){return X(t)?Object.keys(t):[]};function H(t,e){V(t).forEach(function(a){return e(t[a],a)})}function Y(t){for(var e=arguments.length,a=Array(e>1?e-1:0),i=1;i<e;i++)a[i-1]=arguments[i];return Object.assign?Object.assign.apply(Object,[t].concat(a)):(a.forEach(function(e){e&&H(e,function(e,a){t[a]=e})}),t)}function X(t){return!!t&&"object"===(void 0===t?"undefined":P(t))}function W(t){return X(t)&&"[object Object]"===G.call(t)&&t.constructor===Object}var U=[],K=function(t,e){return function(a,i,n,o){var s=e.levels[i],h=new RegExp("^("+s+")$");if("log"!==a&&n.unshift(a.toUpperCase()+":"),n.unshift(t+":"),U&&U.push([].concat(n)),r.console){var l=r.console[a];l||"debug"!==a||(l=r.console.info||r.console.log),l&&s&&h.test(a)&&(o&&(n=n.map(function(t){if(X(t)||Array.isArray(t))try{return JSON.stringify(t)}catch(e){return String(t)}return String(t)}).join(" ")),l.apply?l[Array.isArray(n)?"apply":"call"](r.console,n):l(n))}}};var z=function t(e){var a="info",i=void 0,r=function t(){for(var e=t.stringify||b&&b<11,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];i("log",a,n,e)};return i=K(e,r),r.createLogger=function(a){return t(e+": "+a)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:a},r.level=function(t){if("string"==typeof t){if(!r.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');a=t}return a},(r.history=function(){return U?[].concat(U):[]}).filter=function(t){return(U||[]).filter(function(e){return new RegExp(".*"+t+".*").test(e[0])})},r.history.clear=function(){U&&(U.length=0)},r.history.disable=function(){null!==U&&(U.length=0,U=null)},r.history.enable=function(){null===U&&(U=[])},r.error=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return i("error",a,e)},r.warn=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return i("warn",a,e)},r.debug=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return i("debug",a,e)},r}("VIDEOJS"),J=z.createLogger;function j(t,e){if(!t||!e)return"";if("function"==typeof r.getComputedStyle){var a=r.getComputedStyle(t);return a?a[e]:""}return t.currentStyle[e]||""}var q=k(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);function Z(t){return"string"==typeof t&&/\S/.test(t)}function Q(t){if(/\s/.test(t))throw new Error("class has illegal whitespace characters")}function $(){return n===r.document&&void 0!==n.createElement}function tt(t){return X(t)&&1===t.nodeType}function et(){try{return r.parent!==r.self}catch(t){return!0}}function at(t){return function(e,a){if(!Z(e))return n[t](null);Z(a)&&(a=n.querySelector(a));var i=tt(a)?a:n;return i[t]&&i[t](e)}}function it(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3],r=n.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(t){var a=e[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(z.warn(o(q,t,a)),r.setAttribute(t,a)):"textContent"===t?rt(r,a):r[t]=a}),Object.getOwnPropertyNames(a).forEach(function(t){r.setAttribute(t,a[t])}),i&&yt(r,i),r}function rt(t,e){return void 0===t.textContent?t.innerText=e:t.textContent=e,t}function nt(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function ot(t,e){return Q(e),t.classList?t.classList.contains(e):function(t){return new RegExp("(^|\\s)"+t+"($|\\s)")}(e).test(t.className)}function st(t,e){return t.classList?t.classList.add(e):ot(t,e)||(t.className=(t.className+" "+e).trim()),t}function ht(t,e){return t.classList?t.classList.remove(e):(Q(e),t.className=t.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),t}function lt(t,e,a){var i=ot(t,e);if("function"==typeof a&&(a=a(t,e)),"boolean"!=typeof a&&(a=!i),a!==i)return a?st(t,e):ht(t,e),t}function ut(t,e){Object.getOwnPropertyNames(e).forEach(function(a){var i=e[a];null===i||void 0===i||!1===i?t.removeAttribute(a):t.setAttribute(a,!0===i?"":i)})}function ct(t){var e={},a=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&t.attributes.length>0)for(var i=t.attributes,r=i.length-1;r>=0;r--){var n=i[r].name,o=i[r].value;"boolean"!=typeof t[n]&&-1===a.indexOf(","+n+",")||(o=null!==o),e[n]=o}return e}function ft(t,e){return t.getAttribute(e)}function dt(t,e,a){t.setAttribute(e,a)}function Ct(t,e){t.removeAttribute(e)}function pt(){n.body.focus(),n.onselectstart=function(){return!1}}function mt(){n.onselectstart=function(){return!0}}function Dt(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),a={};return["bottom","height","left","right","top","width"].forEach(function(t){void 0!==e[t]&&(a[t]=e[t])}),a.height||(a.height=parseFloat(j(t,"height"))),a.width||(a.width=parseFloat(j(t,"width"))),a}}function vt(t){var e=void 0;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};var a=n.documentElement,i=n.body,o=a.clientLeft||i.clientLeft||0,s=r.pageXOffset||i.scrollLeft,h=e.left+s-o,l=a.clientTop||i.clientTop||0,u=r.pageYOffset||i.scrollTop,c=e.top+u-l;return{left:Math.round(h),top:Math.round(c)}}function gt(t,e){var a={},i=vt(t),r=t.offsetWidth,n=t.offsetHeight,o=i.top,s=i.left,h=e.pageY,l=e.pageX;return e.changedTouches&&(l=e.changedTouches[0].pageX,h=e.changedTouches[0].pageY),a.y=Math.max(0,Math.min(1,(o-h+n)/n)),a.x=Math.max(0,Math.min(1,(l-s)/r)),a}function St(t){return X(t)&&3===t.nodeType}function Tt(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function It(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map(function(t){return"function"==typeof t&&(t=t()),tt(t)||St(t)?t:"string"==typeof t&&/\S/.test(t)?n.createTextNode(t):void 0}).filter(function(t){return t})}function yt(t,e){return It(e).forEach(function(e){return t.appendChild(e)}),t}function xt(t,e){return yt(Tt(t),e)}function wt(t){return void 0===t.button&&void 0===t.buttons||(0===t.button&&void 0===t.buttons||(9===b||0===t.button&&1===t.buttons))}var Ft=at("querySelector"),Et=at("querySelectorAll"),bt=(Object.freeze||Object)({isReal:$,isEl:tt,isInFrame:et,createEl:it,textContent:rt,prependTo:nt,hasClass:ot,addClass:st,removeClass:ht,toggleClass:lt,setAttributes:ut,getAttributes:ct,getAttribute:ft,setAttribute:dt,removeAttribute:Ct,blockTextSelection:pt,unblockTextSelection:mt,getBoundingClientRect:Dt,findPosition:vt,getPointerPosition:gt,isTextNode:St,emptyEl:Tt,normalizeContent:It,appendContent:yt,insertContent:xt,isSingleLeftClick:wt,$:Ft,$$:Et}),Lt=1;function Mt(){return Lt++}var At={},Ot="vdata"+(new Date).getTime();function Nt(t){var e=t[Ot];return e||(e=t[Ot]=Mt()),At[e]||(At[e]={}),At[e]}function Pt(t){var e=t[Ot];return!!e&&!!Object.getOwnPropertyNames(At[e]).length}function Rt(t){var e=t[Ot];if(e){delete At[e];try{delete t[Ot]}catch(e){t.removeAttribute?t.removeAttribute(Ot):t[Ot]=null}}}function _t(t,e){var a=Nt(t);0===a.handlers[e].length&&(delete a.handlers[e],t.removeEventListener?t.removeEventListener(e,a.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,a.dispatcher)),Object.getOwnPropertyNames(a.handlers).length<=0&&(delete a.handlers,delete a.dispatcher,delete a.disabled),0===Object.getOwnPropertyNames(a).length&&Rt(t)}function Bt(t,e,a,i){a.forEach(function(a){t(e,a,i)})}function kt(t){function e(){return!0}function a(){return!1}if(!t||!t.isPropagationStopped){var i=t||r.event;for(var o in t={},i)"layerX"!==o&&"layerY"!==o&&"keyLocation"!==o&&"webkitMovementX"!==o&&"webkitMovementY"!==o&&("returnValue"===o&&i.preventDefault||(t[o]=i[o]));if(t.target||(t.target=t.srcElement||n),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){i.preventDefault&&i.preventDefault(),t.returnValue=!1,i.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),t.cancelBubble=!0,i.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=a,t.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=a,null!==t.clientX&&void 0!==t.clientX){var s=n.documentElement,h=n.body;t.pageX=t.clientX+(s&&s.scrollLeft||h&&h.scrollLeft||0)-(s&&s.clientLeft||h&&h.clientLeft||0),t.pageY=t.clientY+(s&&s.scrollTop||h&&h.scrollTop||0)-(s&&s.clientTop||h&&h.clientTop||0)}t.which=t.charCode||t.keyCode,null!==t.button&&void 0!==t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t}var Gt=!1;!function(){try{var t=Object.defineProperty({},"passive",{get:function(){Gt=!0}});r.addEventListener("test",null,t),r.removeEventListener("test",null,t)}catch(t){}}();var Vt=["touchstart","touchmove"];function Ht(t,e,a){if(Array.isArray(e))return Bt(Ht,t,e,a);var i=Nt(t);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),a.guid||(a.guid=Mt()),i.handlers[e].push(a),i.dispatcher||(i.disabled=!1,i.dispatcher=function(e,a){if(!i.disabled){e=kt(e);var r=i.handlers[e.type];if(r)for(var n=r.slice(0),o=0,s=n.length;o<s&&!e.isImmediatePropagationStopped();o++)try{n[o].call(t,e,a)}catch(t){z.error(t)}}}),1===i.handlers[e].length)if(t.addEventListener){var r=!1;Gt&&Vt.indexOf(e)>-1&&(r={passive:!0}),t.addEventListener(e,i.dispatcher,r)}else t.attachEvent&&t.attachEvent("on"+e,i.dispatcher)}function Yt(t,e,a){if(Pt(t)){var i=Nt(t);if(i.handlers){if(Array.isArray(e))return Bt(Yt,t,e,a);var r=function(t,e){i.handlers[e]=[],_t(t,e)};if(void 0!==e){var n=i.handlers[e];if(n)if(a){if(a.guid)for(var o=0;o<n.length;o++)n[o].guid===a.guid&&n.splice(o--,1);_t(t,e)}else r(t,e)}else for(var s in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},s)&&r(t,s)}}}function Xt(t,e,a){var i=Pt(t)?Nt(t):{},r=t.parentNode||t.ownerDocument;if("string"==typeof e?e={type:e,target:t}:e.target||(e.target=t),e=kt(e),i.dispatcher&&i.dispatcher.call(t,e,a),r&&!e.isPropagationStopped()&&!0===e.bubbles)Xt.call(null,r,e,a);else if(!r&&!e.defaultPrevented){var n=Nt(e.target);e.target[e.type]&&(n.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),n.disabled=!1)}return!e.defaultPrevented}function Wt(t,e,a){if(Array.isArray(e))return Bt(Wt,t,e,a);var i=function i(){Yt(t,e,i),a.apply(this,arguments)};i.guid=a.guid=a.guid||Mt(),Ht(t,e,i)}var Ut=(Object.freeze||Object)({fixEvent:kt,on:Ht,off:Yt,trigger:Xt,one:Wt}),Kt=!1,zt=void 0,Jt=function(){if($()&&!1!==zt.options.autoSetup){var t=n.getElementsByTagName("video"),e=n.getElementsByTagName("audio"),a=n.getElementsByTagName("video-js"),i=[];if(t&&t.length>0)for(var r=0,o=t.length;r<o;r++)i.push(t[r]);if(e&&e.length>0)for(var s=0,h=e.length;s<h;s++)i.push(e[s]);if(a&&a.length>0)for(var l=0,u=a.length;l<u;l++)i.push(a[l]);if(i&&i.length>0)for(var c=0,f=i.length;c<f;c++){var d=i[c];if(!d||!d.getAttribute){jt(1);break}void 0===d.player&&null!==d.getAttribute("data-setup")&&zt(d)}else Kt||jt(1)}};function jt(t,e){e&&(zt=e),r.setTimeout(Jt,t)}$()&&"complete"===n.readyState?Kt=!0:Wt(r,"load",function(){Kt=!0});var qt=function(t){var e=n.createElement("style");return e.className=t,e},Zt=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e},Qt=function(t,e,a){e.guid||(e.guid=Mt());var i=function(){return e.apply(t,arguments)};return i.guid=a?a+"_"+e.guid:e.guid,i},$t=function(t,e){var a=Date.now();return function(){var i=Date.now();i-a>=e&&(t.apply(void 0,arguments),a=i)}},te=function(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,n=void 0,o=function(){var r=this,o=arguments,s=function(){n=null,s=null,a||t.apply(r,o)};!n&&a&&t.apply(r,o),i.clearTimeout(n),n=i.setTimeout(s,e)};return o.cancel=function(){i.clearTimeout(n),n=null},o},ee=function(){};ee.prototype.allowedEvents_={},ee.prototype.on=function(t,e){var a=this.addEventListener;this.addEventListener=function(){},Ht(this,t,e),this.addEventListener=a},ee.prototype.addEventListener=ee.prototype.on,ee.prototype.off=function(t,e){Yt(this,t,e)},ee.prototype.removeEventListener=ee.prototype.off,ee.prototype.one=function(t,e){var a=this.addEventListener;this.addEventListener=function(){},Wt(this,t,e),this.addEventListener=a},ee.prototype.trigger=function(t){var e=t.type||t;"string"==typeof t&&(t={type:e}),t=kt(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),Xt(this,t)},ee.prototype.dispatchEvent=ee.prototype.trigger;var ae=function(t){return t instanceof ee||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})},ie=function(t){return"string"==typeof t&&/\S/.test(t)||Array.isArray(t)&&!!t.length},re=function(t){if(!t.nodeName&&!ae(t))throw new Error("Invalid target; must be a DOM node or evented object.")},ne=function(t){if(!ie(t))throw new Error("Invalid event type; must be a non-empty string or array.")},oe=function(t){if("function"!=typeof t)throw new Error("Invalid listener; must be a function.")},se=function(t,e){var a=e.length<3||e[0]===t||e[0]===t.eventBusEl_,i=void 0,r=void 0,n=void 0;return a?(i=t.eventBusEl_,e.length>=3&&e.shift(),r=e[0],n=e[1]):(i=e[0],r=e[1],n=e[2]),re(i),ne(r),oe(n),{isTargetingSelf:a,target:i,type:r,listener:n=Qt(t,n)}},he=function(t,e,a,i){re(t),t.nodeName?Ut[e](t,a,i):t[e](a,i)},le={on:function(){for(var t=this,e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];var r=se(this,a),n=r.isTargetingSelf,o=r.target,s=r.type,h=r.listener;if(he(o,"on",s,h),!n){var l=function(){return t.off(o,s,h)};l.guid=h.guid;var u=function(){return t.off("dispose",l)};u.guid=h.guid,he(this,"on","dispose",l),he(o,"on","dispose",u)}},one:function(){for(var t=this,e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];var r=se(this,a),n=r.isTargetingSelf,o=r.target,s=r.type,h=r.listener;if(n)he(o,"one",s,h);else{var l=function e(){for(var a=arguments.length,i=Array(a),r=0;r<a;r++)i[r]=arguments[r];t.off(o,s,e),h.apply(null,i)};l.guid=h.guid,he(o,"one",s,l)}},off:function(t,e,a){if(!t||ie(t))Yt(this.eventBusEl_,t,e);else{var i=t,r=e;re(i),ne(r),oe(a),a=Qt(this,a),this.off("dispose",a),i.nodeName?(Yt(i,r,a),Yt(i,"dispose",a)):ae(i)&&(i.off(r,a),i.off("dispose",a))}},trigger:function(t,e){return Xt(this.eventBusEl_,t,e)}};function ue(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).eventBusKey;if(e){if(!t[e].nodeName)throw new Error('The eventBusKey "'+e+'" does not refer to an element.');t.eventBusEl_=t[e]}else t.eventBusEl_=it("span",{className:"vjs-event-bus"});return Y(t,le),t.on("dispose",function(){t.off(),r.setTimeout(function(){t.eventBusEl_=null},0)}),t}var ce={state:{},setState:function(t){var e=this;"function"==typeof t&&(t=t());var a=void 0;return H(t,function(t,i){e.state[i]!==t&&((a=a||{})[i]={from:e.state[i],to:t}),e.state[i]=t}),a&&ae(this)&&this.trigger({changes:a,type:"statechanged"}),a}};function fe(t,e){return Y(t,ce),t.state=Y({},t.state,e),"function"==typeof t.handleStateChanged&&ae(t)&&t.on("statechanged",t.handleStateChanged),t}function de(t){return"string"!=typeof t?t:t.charAt(0).toUpperCase()+t.slice(1)}function Ce(){for(var t={},e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];return a.forEach(function(e){e&&H(e,function(e,a){W(e)?(W(t[a])||(t[a]={}),t[a]=Ce(t[a],e)):t[a]=e})}),t}var pe=function(){function t(e,a,i){if(R(this,t),!e&&this.play?this.player_=e=this:this.player_=e,this.options_=Ce({},this.options_),a=this.options_=Ce(this.options_,a),this.id_=a.id||a.el&&a.el.id,!this.id_){var r=e&&e.id&&e.id()||"no_player";this.id_=r+"_component_"+Mt()}this.name_=a.name||null,a.el?this.el_=a.el:!1!==a.createEl&&(this.el_=this.createEl()),!1!==a.evented&&ue(this,{eventBusKey:this.el_?"el_":null}),fe(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},!1!==a.initChildren&&this.initChildren(),this.ready(i),!1!==a.reportTouchActivity&&this.enableTouchActivity()}return t.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Rt(this.el_),this.el_=null),this.player_=null},t.prototype.player=function(){return this.player_},t.prototype.options=function(t){return z.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),t?(this.options_=Ce(this.options_,t),this.options_):this.options_},t.prototype.el=function(){return this.el_},t.prototype.createEl=function(t,e,a){return it(t,e,a)},t.prototype.localize=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),n=r&&r[i],o=i&&i.split("-")[0],s=r&&r[o],h=a;return n&&n[t]?h=n[t]:s&&s[t]&&(h=s[t]),e&&(h=h.replace(/\{(\d+)\}/g,function(t,a){var i=e[a-1],r=i;return void 0===i&&(r=t),r})),h},t.prototype.contentEl=function(){return this.contentEl_||this.el_},t.prototype.id=function(){return this.id_},t.prototype.name=function(){return this.name_},t.prototype.children=function(){return this.children_},t.prototype.getChildById=function(t){return this.childIndex_[t]},t.prototype.getChild=function(t){if(t)return t=de(t),this.childNameIndex_[t]},t.prototype.addChild=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.children_.length,r=void 0,n=void 0;if("string"==typeof e){n=de(e);var o=a.componentClass||n;a.name=n;var s=t.getComponent(o);if(!s)throw new Error("Component "+o+" does not exist");if("function"!=typeof s)return null;r=new s(this.player_||this,a)}else r=e;if(this.children_.splice(i,0,r),"function"==typeof r.id&&(this.childIndex_[r.id()]=r),(n=n||r.name&&de(r.name()))&&(this.childNameIndex_[n]=r),"function"==typeof r.el&&r.el()){var h=this.contentEl().children[i]||null;this.contentEl().insertBefore(r.el(),h)}return r},t.prototype.removeChild=function(t){if("string"==typeof t&&(t=this.getChild(t)),t&&this.children_){for(var e=!1,a=this.children_.length-1;a>=0;a--)if(this.children_[a]===t){e=!0,this.children_.splice(a,1);break}if(e){this.childIndex_[t.id()]=null,this.childNameIndex_[t.name()]=null;var i=t.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},t.prototype.initChildren=function(){var e=this,a=this.options_.children;if(a){var i=this.options_,r=void 0,n=t.getComponent("Tech");(r=Array.isArray(a)?a:Object.keys(a)).concat(Object.keys(this.options_).filter(function(t){return!r.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(t){var i=void 0,r=void 0;return"string"==typeof t?r=a[i=t]||e.options_[i]||{}:(i=t.name,r=t),{name:i,opts:r}}).filter(function(e){var a=t.getComponent(e.opts.componentClass||de(e.name));return a&&!n.isTech(a)}).forEach(function(t){var a=t.name,r=t.opts;if(void 0!==i[a]&&(r=i[a]),!1!==r){!0===r&&(r={}),r.playerOptions=e.options_.playerOptions;var n=e.addChild(a,r);n&&(e[a]=n)}})}},t.prototype.buildCSSClass=function(){return""},t.prototype.ready=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return this.isReady_?void(e?t.call(this):this.setTimeout(t,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t))},t.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},t.prototype.$=function(t,e){return Ft(t,e||this.contentEl())},t.prototype.$$=function(t,e){return Et(t,e||this.contentEl())},t.prototype.hasClass=function(t){return ot(this.el_,t)},t.prototype.addClass=function(t){st(this.el_,t)},t.prototype.removeClass=function(t){ht(this.el_,t)},t.prototype.toggleClass=function(t,e){lt(this.el_,t,e)},t.prototype.show=function(){this.removeClass("vjs-hidden")},t.prototype.hide=function(){this.addClass("vjs-hidden")},t.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")},t.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.prototype.getAttribute=function(t){return ft(this.el_,t)},t.prototype.setAttribute=function(t,e){dt(this.el_,t,e)},t.prototype.removeAttribute=function(t){Ct(this.el_,t)},t.prototype.width=function(t,e){return this.dimension("width",t,e)},t.prototype.height=function(t,e){return this.dimension("height",t,e)},t.prototype.dimensions=function(t,e){this.width(t,!0),this.height(e)},t.prototype.dimension=function(t,e,a){if(void 0!==e)return null!==e&&e==e||(e=0),-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[t]=e:this.el_.style[t]="auto"===e?"":e+"px",void(a||this.trigger("componentresize"));if(!this.el_)return 0;var i=this.el_.style[t],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+de(t)],10)},t.prototype.currentDimension=function(t){var e=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");if("function"==typeof r.getComputedStyle){var a=r.getComputedStyle(this.el_);e=a.getPropertyValue(t)||a[t]}if(0===(e=parseFloat(e))){var i="offset"+de(t);e=this.el_[i]}return e},t.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.prototype.currentWidth=function(){return this.currentDimension("width")},t.prototype.currentHeight=function(){return this.currentDimension("height")},t.prototype.focus=function(){this.el_.focus()},t.prototype.blur=function(){this.el_.blur()},t.prototype.emitTapEvents=function(){var t=0,e=null,a=void 0;this.on("touchstart",function(i){1===i.touches.length&&(e={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY},t=(new Date).getTime(),a=!0)}),this.on("touchmove",function(t){if(t.touches.length>1)a=!1;else if(e){var i=t.touches[0].pageX-e.pageX,r=t.touches[0].pageY-e.pageY;Math.sqrt(i*i+r*r)>10&&(a=!1)}});var i=function(){a=!1};this.on("touchleave",i),this.on("touchcancel",i),this.on("touchend",function(i){(e=null,!0===a)&&((new Date).getTime()-t<200&&(i.preventDefault(),this.trigger("tap")))})},t.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t=Qt(this.player(),this.player().reportUserActivity),e=void 0;this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)});var a=function(a){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",a),this.on("touchcancel",a)}},t.prototype.setTimeout=function(t,e){var a,i,n=this;return t=Qt(this,t),a=r.setTimeout(function(){n.off("dispose",i),t()},e),(i=function(){return n.clearTimeout(a)}).guid="vjs-timeout-"+a,this.on("dispose",i),a},t.prototype.clearTimeout=function(t){r.clearTimeout(t);var e=function(){};return e.guid="vjs-timeout-"+t,this.off("dispose",e),t},t.prototype.setInterval=function(t,e){var a=this;t=Qt(this,t);var i=r.setInterval(t,e),n=function(){return a.clearInterval(i)};return n.guid="vjs-interval-"+i,this.on("dispose",n),i},t.prototype.clearInterval=function(t){r.clearInterval(t);var e=function(){};return e.guid="vjs-interval-"+t,this.off("dispose",e),t},t.prototype.requestAnimationFrame=function(t){var e,a,i=this;return this.supportsRaf_?(t=Qt(this,t),e=r.requestAnimationFrame(function(){i.off("dispose",a),t()}),(a=function(){return i.cancelAnimationFrame(e)}).guid="vjs-raf-"+e,this.on("dispose",a),e):this.setTimeout(t,1e3/60)},t.prototype.cancelAnimationFrame=function(t){if(this.supportsRaf_){r.cancelAnimationFrame(t);var e=function(){};return e.guid="vjs-raf-"+t,this.off("dispose",e),t}return this.clearTimeout(t)},t.registerComponent=function(e,a){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var i=t.getComponent("Tech"),r=i&&i.isTech(a),n=t===a||t.prototype.isPrototypeOf(a.prototype);if(r||!n){var o=void 0;throw o=r?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+e+'"; '+o+".")}e=de(e),t.components_||(t.components_={});var s=t.getComponent("Player");if("Player"===e&&s&&s.players){var h=s.players,l=Object.keys(h);if(h&&l.length>0&&l.map(function(t){return h[t]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[e]=a,a},t.getComponent=function(e){if(e)return e=de(e),t.components_&&t.components_[e]?t.components_[e]:void 0},t}();function me(t,e,a,i){return function(t,e,a){if("number"!=typeof e||e<0||e>a)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+a+").")}(t,i,a.length-1),a[i][e]}function De(t){return void 0===t||0===t.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:me.bind(null,"start",0,t),end:me.bind(null,"end",1,t)}}function ve(t,e){return Array.isArray(t)?De(t):void 0===t||void 0===e?De():De([[t,e]])}function ge(t,e){var a=0,i=void 0,r=void 0;if(!e)return 0;t&&t.length||(t=ve(0,0));for(var n=0;n<t.length;n++)i=t.start(n),(r=t.end(n))>e&&(r=e),a+=r-i;return a/e}pe.prototype.supportsRaf_="function"==typeof r.requestAnimationFrame&&"function"==typeof r.cancelAnimationFrame,pe.registerComponent("Component",pe);for(var Se={},Te=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Ie=Te[0],ye=void 0,xe=0;xe<Te.length;xe++)if(Te[xe][1]in n){ye=Te[xe];break}if(ye)for(var we=0;we<ye.length;we++)Se[Ie[we]]=ye[we];function Fe(t){if(t instanceof Fe)return t;"number"==typeof t?this.code=t:"string"==typeof t?this.message=t:X(t)&&("number"==typeof t.code&&(this.code=t.code),Y(this,t)),this.message||(this.message=Fe.defaultMessages[this.code]||"")}Fe.prototype.code=0,Fe.prototype.message="",Fe.prototype.status=null,Fe.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Fe.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Ee=0;Ee<Fe.errorTypes.length;Ee++)Fe[Fe.errorTypes[Ee]]=Ee,Fe.prototype[Fe.errorTypes[Ee]]=Ee;function be(t){return void 0!==t&&null!==t&&"function"==typeof t.then}function Le(t){be(t)&&t.then(null,function(t){})}var Me=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,a,i){return t[a]&&(e[a]=t[a]),e},{cues:t.cues&&Array.prototype.map.call(t.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},Ae=function(t){var e=t.$$("track"),a=Array.prototype.map.call(e,function(t){return t.track});return Array.prototype.map.call(e,function(t){var e=Me(t.track);return t.src&&(e.src=t.src),e}).concat(Array.prototype.filter.call(t.textTracks(),function(t){return-1===a.indexOf(t)}).map(Me))},Oe=function(t,e){return t.forEach(function(t){var a=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(function(t){return a.addCue(t)})}),e.textTracks()},Ne="vjs-modal-dialog",Pe=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.opened_=r.hasBeenOpened_=r.hasBeenFilled_=!1,r.closeable(!r.options_.uncloseable),r.content(r.options_.content),r.contentEl_=it("div",{className:Ne+"-content"},{role:"document"}),r.descEl_=it("p",{className:Ne+"-description vjs-control-text",id:r.el().getAttribute("aria-describedby")}),rt(r.descEl_,r.description()),r.el_.appendChild(r.descEl_),r.el_.appendChild(r.contentEl_),r}return _(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},e.prototype.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,t.prototype.dispose.call(this)},e.prototype.buildCSSClass=function(){return Ne+" vjs-hidden "+t.prototype.buildCSSClass.call(this)},e.prototype.handleKeyPress=function(t){27===t.which&&this.closeable()&&this.close()},e.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")},e.prototype.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},e.prototype.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",Qt(this,this.handleKeyPress)),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},e.prototype.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},e.prototype.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",Qt(this,this.handleKeyPress)),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},e.prototype.closeable=function(t){if("boolean"==typeof t){var e=this.closeable_=!!t,a=this.getChild("closeButton");if(e&&!a){var i=this.contentEl_;this.contentEl_=this.el_,a=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(a,"close",this.close)}!e&&a&&(this.off(a,"close",this.close),this.removeChild(a),a.dispose())}return this.closeable_},e.prototype.fill=function(){this.fillWith(this.content())},e.prototype.fillWith=function(t){var e=this.contentEl(),a=e.parentNode,i=e.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,a.removeChild(e),this.empty(),xt(e,t),this.trigger("modalfill"),i?a.insertBefore(e,i):a.appendChild(e);var r=this.getChild("closeButton");r&&a.appendChild(r.el_)},e.prototype.empty=function(){this.trigger("beforemodalempty"),Tt(this.contentEl()),this.trigger("modalempty")},e.prototype.content=function(t){return void 0!==t&&(this.content_=t),this.content_},e.prototype.conditionalFocus_=function(){var t=n.activeElement,e=this.player_.el_;this.previouslyActiveEl_=null,(e.contains(t)||e===t)&&(this.previouslyActiveEl_=t,this.focus(),this.on(n,"keydown",this.handleKeyDown))},e.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(n,"keydown",this.handleKeyDown)},e.prototype.handleKeyDown=function(t){if(9===t.which){for(var e=this.focusableEls_(),a=this.el_.querySelector(":focus"),i=void 0,r=0;r<e.length;r++)if(a===e[r]){i=r;break}n.activeElement===this.el_&&(i=0),t.shiftKey&&0===i?(e[e.length-1].focus(),t.preventDefault()):t.shiftKey||i!==e.length-1||(e[0].focus(),t.preventDefault())}},e.prototype.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(t){return(t instanceof r.HTMLAnchorElement||t instanceof r.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof r.HTMLInputElement||t instanceof r.HTMLSelectElement||t instanceof r.HTMLTextAreaElement||t instanceof r.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof r.HTMLIFrameElement||t instanceof r.HTMLObjectElement||t instanceof r.HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")})},e}(pe);Pe.prototype.options_={pauseOnOpen:!0,temporary:!0},pe.registerComponent("ModalDialog",Pe);var Re=function(t){function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;R(this,e);var r=B(this,t.call(this));if(!i&&(i=r,E))for(var o in i=n.createElement("custom"),e.prototype)"constructor"!==o&&(i[o]=e.prototype[o]);i.tracks_=[],Object.defineProperty(i,"length",{get:function(){return this.tracks_.length}});for(var s=0;s<a.length;s++)i.addTrack(a[s]);return B(r,i)}return _(e,t),e.prototype.addTrack=function(t){var e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.tracks_[e]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack"}))},e.prototype.removeTrack=function(t){for(var e=void 0,a=0,i=this.length;a<i;a++)if(this[a]===t){(e=this[a]).off&&e.off(),this.tracks_.splice(a,1);break}e&&this.trigger({track:e,type:"removetrack"})},e.prototype.getTrackById=function(t){for(var e=null,a=0,i=this.length;a<i;a++){var r=this[a];if(r.id===t){e=r;break}}return e},e}(ee);for(var _e in Re.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Re.prototype.allowedEvents_)Re.prototype["on"+_e]=null;var Be=function(t,e){for(var a=0;a<t.length;a++)Object.keys(t[a]).length&&e.id!==t[a].id&&(t[a].enabled=!1)},ke=function(t){function e(){var a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];R(this,e);for(var r=void 0,o=i.length-1;o>=0;o--)if(i[o].enabled){Be(i,i[o]);break}if(E){for(var s in r=n.createElement("custom"),Re.prototype)"constructor"!==s&&(r[s]=Re.prototype[s]);for(var h in e.prototype)"constructor"!==h&&(r[h]=e.prototype[h])}return(r=a=B(this,t.call(this,i,r))).changing_=!1,B(a,r)}return _(e,t),e.prototype.addTrack=function(e){var a=this;e.enabled&&Be(this,e),t.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("enabledchange",function(){a.changing_||(a.changing_=!0,Be(a,e),a.changing_=!1,a.trigger("change"))})},e}(Re),Ge=function(t,e){for(var a=0;a<t.length;a++)Object.keys(t[a]).length&&e.id!==t[a].id&&(t[a].selected=!1)},Ve=function(t){function e(){var a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];R(this,e);for(var r=void 0,o=i.length-1;o>=0;o--)if(i[o].selected){Ge(i,i[o]);break}if(E){for(var s in r=n.createElement("custom"),Re.prototype)"constructor"!==s&&(r[s]=Re.prototype[s]);for(var h in e.prototype)"constructor"!==h&&(r[h]=e.prototype[h])}return(r=a=B(this,t.call(this,i,r))).changing_=!1,Object.defineProperty(r,"selectedIndex",{get:function(){for(var t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set:function(){}}),B(a,r)}return _(e,t),e.prototype.addTrack=function(e){var a=this;e.selected&&Ge(this,e),t.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("selectedchange",function(){a.changing_||(a.changing_=!0,Ge(a,e),a.changing_=!1,a.trigger("change"))})},e}(Re),He=function(t){function e(){var a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];R(this,e);var r=void 0;if(E){for(var o in r=n.createElement("custom"),Re.prototype)"constructor"!==o&&(r[o]=Re.prototype[o]);for(var s in e.prototype)"constructor"!==s&&(r[s]=e.prototype[s])}return a=B(this,t.call(this,i,r)),B(a,r=a)}return _(e,t),e.prototype.addTrack=function(e){t.prototype.addTrack.call(this,e),e.addEventListener("modechange",Qt(this,function(){this.trigger("change")}));-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",Qt(this,function(){this.trigger("selectedlanguagechange")}))},e}(Re),Ye=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];R(this,t);var a=this;if(E)for(var i in a=n.createElement("custom"),t.prototype)"constructor"!==i&&(a[i]=t.prototype[i]);a.trackElements_=[],Object.defineProperty(a,"length",{get:function(){return this.trackElements_.length}});for(var r=0,o=e.length;r<o;r++)a.addTrackElement_(e[r]);if(E)return a}return t.prototype.addTrackElement_=function(t){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),-1===this.trackElements_.indexOf(t)&&this.trackElements_.push(t)},t.prototype.getTrackElementByTrack_=function(t){for(var e=void 0,a=0,i=this.trackElements_.length;a<i;a++)if(t===this.trackElements_[a].track){e=this.trackElements_[a];break}return e},t.prototype.removeTrackElement_=function(t){for(var e=0,a=this.trackElements_.length;e<a;e++)if(t===this.trackElements_[e]){this.trackElements_.splice(e,1);break}},t}(),Xe=function(){function t(e){R(this,t);var a=this;if(E)for(var i in a=n.createElement("custom"),t.prototype)"constructor"!==i&&(a[i]=t.prototype[i]);if(t.prototype.setCues_.call(a,e),Object.defineProperty(a,"length",{get:function(){return this.length_}}),E)return a}return t.prototype.setCues_=function(t){var e=this.length||0,a=0,i=t.length;this.cues_=t,this.length_=t.length;var r=function(t){""+t in this||Object.defineProperty(this,""+t,{get:function(){return this.cues_[t]}})};if(e<i)for(a=e;a<i;a++)r.call(this,a)},t.prototype.getCueById=function(t){for(var e=null,a=0,i=this.length;a<i;a++){var r=this[a];if(r.id===t){e=r;break}}return e},t}(),We={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Ue={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Ke={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},ze={disabled:"disabled",hidden:"hidden",showing:"showing"},Je=function(t){function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R(this,e);var i=B(this,t.call(this)),r=i;if(E)for(var o in r=n.createElement("custom"),e.prototype)"constructor"!==o&&(r[o]=e.prototype[o]);var s={id:a.id||"vjs_track_"+Mt(),kind:a.kind||"",label:a.label||"",language:a.language||""},h=function(t){Object.defineProperty(r,t,{get:function(){return s[t]},set:function(){}})};for(var l in s)h(l);return B(i,r)}return _(e,t),e}(ee),je=function(t){var e=["protocol","hostname","port","pathname","search","hash","host"],a=n.createElement("a");a.href=t;var i=""===a.host&&"file:"!==a.protocol,o=void 0;i&&((o=n.createElement("div")).innerHTML='<a href="'+t+'"></a>',a=o.firstChild,o.setAttribute("style","display:none; position:absolute;"),n.body.appendChild(o));for(var s={},h=0;h<e.length;h++)s[e[h]]=a[e[h]];return"http:"===s.protocol&&(s.host=s.host.replace(/:80$/,"")),"https:"===s.protocol&&(s.host=s.host.replace(/:443$/,"")),s.protocol||(s.protocol=r.location.protocol),i&&n.body.removeChild(o),s},qe=function(t){if(!t.match(/^https?:\/\//)){var e=n.createElement("div");e.innerHTML='<a href="'+t+'">x</a>',t=e.firstChild.href}return t},Ze=function(t){if("string"==typeof t){var e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(t);if(e)return e.pop().toLowerCase()}return""},Qe=function(t){var e=r.location,a=je(t);return(":"===a.protocol?e.protocol:a.protocol)+a.host!==e.protocol+e.host},$e=(Object.freeze||Object)({parseUrl:je,getAbsoluteURL:qe,getFileExtension:Ze,isCrossOrigin:Qe}),ta=function(t,e){var a=new r.WebVTT.Parser(r,r.vttjs,r.WebVTT.StringDecoder()),i=[];a.oncue=function(t){e.addCue(t)},a.onparsingerror=function(t){i.push(t)},a.onflush=function(){e.trigger({type:"loadeddata",target:e})},a.parse(t),i.length>0&&(r.console&&r.console.groupCollapsed&&r.console.groupCollapsed("Text Track parsing errors for "+e.src),i.forEach(function(t){return z.error(t)}),r.console&&r.console.groupEnd&&r.console.groupEnd()),a.flush()},ea=function(t,e){var a={uri:t},i=Qe(t);i&&(a.cors=i),h(a,Qt(this,function(t,a,i){if(t)return z.error(t,a);if(e.loaded_=!0,"function"!=typeof r.WebVTT){if(e.tech_){var n=function(){return ta(i,e)};e.tech_.on("vttjsloaded",n),e.tech_.on("vttjserror",function(){z.error("vttjs failed to load, stopping trying to process "+e.src),e.tech_.off("vttjsloaded",n)})}}else ta(i,e)}))},aa=function(t){function e(){var a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(R(this,e),!i.tech)throw new Error("A tech was not provided.");var r=Ce(i,{kind:Ke[i.kind]||"subtitles",language:i.language||i.srclang||""}),n=ze[r.mode]||"disabled",o=r.default;"metadata"!==r.kind&&"chapters"!==r.kind||(n="hidden");var s=a=B(this,t.call(this,r));if(s.tech_=r.tech,E)for(var h in e.prototype)"constructor"!==h&&(s[h]=e.prototype[h]);s.cues_=[],s.activeCues_=[];var l=new Xe(s.cues_),u=new Xe(s.activeCues_),c=!1,f=Qt(s,function(){this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1)});return"disabled"!==n&&s.tech_.ready(function(){s.tech_.on("timeupdate",f)},!0),Object.defineProperty(s,"default",{get:function(){return o},set:function(){}}),Object.defineProperty(s,"mode",{get:function(){return n},set:function(t){var e=this;ze[t]&&("disabled"!==(n=t)?this.tech_.ready(function(){e.tech_.on("timeupdate",f)},!0):this.tech_.off("timeupdate",f),this.trigger("modechange"))}}),Object.defineProperty(s,"cues",{get:function(){return this.loaded_?l:null},set:function(){}}),Object.defineProperty(s,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return u;for(var t=this.tech_.currentTime(),e=[],a=0,i=this.cues.length;a<i;a++){var r=this.cues[a];r.startTime<=t&&r.endTime>=t?e.push(r):r.startTime===r.endTime&&r.startTime<=t&&r.startTime+.5>=t&&e.push(r)}if(c=!1,e.length!==this.activeCues_.length)c=!0;else for(var n=0;n<e.length;n++)-1===this.activeCues_.indexOf(e[n])&&(c=!0);return this.activeCues_=e,u.setCues_(this.activeCues_),u},set:function(){}}),r.src?(s.src=r.src,ea(r.src,s)):s.loaded_=!0,B(a,s)}return _(e,t),e.prototype.addCue=function(t){var e=t;if(r.vttjs&&!(t instanceof r.vttjs.VTTCue)){for(var a in e=new r.vttjs.VTTCue(t.startTime,t.endTime,t.text),t)a in e||(e[a]=t[a]);e.id=t.id,e.originalCue_=t}for(var i=this.tech_.textTracks(),n=0;n<i.length;n++)i[n]!==this&&i[n].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},e.prototype.removeCue=function(t){for(var e=this.cues_.length;e--;){var a=this.cues_[e];if(a===t||a.originalCue_&&a.originalCue_===t){this.cues_.splice(e,1),this.cues.setCues_(this.cues_);break}}},e}(Je);aa.prototype.allowedEvents_={cuechange:"cuechange"};var ia=function(t){function e(){var a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R(this,e);var r=Ce(i,{kind:Ue[i.kind]||""}),n=a=B(this,t.call(this,r)),o=!1;if(E)for(var s in e.prototype)"constructor"!==s&&(n[s]=e.prototype[s]);return Object.defineProperty(n,"enabled",{get:function(){return o},set:function(t){"boolean"==typeof t&&t!==o&&(o=t,this.trigger("enabledchange"))}}),r.enabled&&(n.enabled=r.enabled),n.loaded_=!0,B(a,n)}return _(e,t),e}(Je),ra=function(t){function e(){var a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R(this,e);var r=Ce(i,{kind:We[i.kind]||""}),n=a=B(this,t.call(this,r)),o=!1;if(E)for(var s in e.prototype)"constructor"!==s&&(n[s]=e.prototype[s]);return Object.defineProperty(n,"selected",{get:function(){return o},set:function(t){"boolean"==typeof t&&t!==o&&(o=t,this.trigger("selectedchange"))}}),r.selected&&(n.selected=r.selected),B(a,n)}return _(e,t),e}(Je),na=0,oa=2,sa=function(t){function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R(this,e);var i=B(this,t.call(this)),r=void 0,o=i;if(E)for(var s in o=n.createElement("custom"),e.prototype)"constructor"!==s&&(o[s]=e.prototype[s]);var h=new aa(a);return o.kind=h.kind,o.src=h.src,o.srclang=h.language,o.label=h.label,o.default=h.default,Object.defineProperty(o,"readyState",{get:function(){return r}}),Object.defineProperty(o,"track",{get:function(){return h}}),r=na,h.addEventListener("loadeddata",function(){r=oa,o.trigger({type:"load",target:o})}),E?B(i,o):i}return _(e,t),e}(ee);sa.prototype.allowedEvents_={load:"load"},sa.NONE=na,sa.LOADING=1,sa.LOADED=oa,sa.ERROR=3;var ha={audio:{ListClass:ke,TrackClass:ia,capitalName:"Audio"},video:{ListClass:Ve,TrackClass:ra,capitalName:"Video"},text:{ListClass:He,TrackClass:aa,capitalName:"Text"}};Object.keys(ha).forEach(function(t){ha[t].getterName=t+"Tracks",ha[t].privateName=t+"Tracks_"});var la={remoteText:{ListClass:He,TrackClass:aa,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Ye,TrackClass:sa,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ua=Ce(ha,la);la.names=Object.keys(la),ha.names=Object.keys(ha),ua.names=[].concat(la.names).concat(ha.names);var ca=function(t){function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};R(this,e),a.reportTouchActivity=!1;var r=B(this,t.call(this,null,a,i));return r.hasStarted_=!1,r.on("playing",function(){this.hasStarted_=!0}),r.on("loadstart",function(){this.hasStarted_=!1}),ua.names.forEach(function(t){var e=ua[t];a&&a[e.getterName]&&(r[e.privateName]=a[e.getterName])}),r.featuresProgressEvents||r.manualProgressOn(),r.featuresTimeupdateEvents||r.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(t){!1===a["native"+t+"Tracks"]&&(r["featuresNative"+t+"Tracks"]=!1)}),!1===a.nativeCaptions||!1===a.nativeTextTracks?r.featuresNativeTextTracks=!1:!0!==a.nativeCaptions&&!0!==a.nativeTextTracks||(r.featuresNativeTextTracks=!0),r.featuresNativeTextTracks||r.emulateTextTracks(),r.autoRemoteTextTracks_=new ua.text.ListClass,r.initTrackListeners(),a.nativeControlsForTouch||r.emitTapEvents(),r.constructor&&(r.name_=r.constructor.name||"Unknown Tech"),r}return _(e,t),e.prototype.triggerSourceset=function(t){var e=this;this.isReady_||this.one("ready",function(){return e.setTimeout(function(){return e.triggerSourceset(t)},1)}),this.trigger({src:t,type:"sourceset"})},e.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},e.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},e.prototype.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Qt(this,function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,1===t&&this.stopTrackingProgress()}),500)},e.prototype.onDurationChange=function(t){this.duration_=this.duration()},e.prototype.buffered=function(){return ve(0,0)},e.prototype.bufferedPercent=function(){return ge(this.buffered(),this.duration_)},e.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},e.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},e.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},e.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},e.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.prototype.dispose=function(){this.clearTracks(ha.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},e.prototype.clearTracks=function(t){var e=this;(t=[].concat(t)).forEach(function(t){for(var a=e[t+"Tracks"]()||[],i=a.length;i--;){var r=a[i];"text"===t&&e.removeRemoteTextTrack(r),a.removeTrack(r)}})},e.prototype.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],e=t.length;e--;){var a=t[e];this.removeRemoteTextTrack(a)}},e.prototype.reset=function(){},e.prototype.error=function(t){return void 0!==t&&(this.error_=new Fe(t),this.trigger("error")),this.error_},e.prototype.played=function(){return this.hasStarted_?ve(0,0):ve()},e.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.prototype.initTrackListeners=function(){var t=this;ha.names.forEach(function(e){var a=ha[e],i=function(){t.trigger(e+"trackchange")},r=t[a.getterName]();r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),t.on("dispose",function(){r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)})})},e.prototype.addWebVttScript_=function(){var t=this;if(!r.WebVTT)if(n.body.contains(this.el())){if(!this.options_["vtt.js"]&&W(l)&&Object.keys(l).length>0)return void this.trigger("vttjsloaded");var e=n.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){e.onload=null,e.onerror=null}),r.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)},e.prototype.emulateTextTracks=function(){var t=this,e=this.textTracks(),a=this.remoteTextTracks(),i=function(t){return e.addTrack(t.track)},r=function(t){return e.removeTrack(t.track)};a.on("addtrack",i),a.on("removetrack",r),this.addWebVttScript_();var n=function(){return t.trigger("texttrackchange")},o=function(){n();for(var t=0;t<e.length;t++){var a=e[t];a.removeEventListener("cuechange",n),"showing"===a.mode&&a.addEventListener("cuechange",n)}};o(),e.addEventListener("change",o),e.addEventListener("addtrack",o),e.addEventListener("removetrack",o),this.on("dispose",function(){a.off("addtrack",i),a.off("removetrack",r),e.removeEventListener("change",o),e.removeEventListener("addtrack",o),e.removeEventListener("removetrack",o);for(var t=0;t<e.length;t++){e[t].removeEventListener("cuechange",n)}})},e.prototype.addTextTrack=function(t,e,a){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(t,e,a,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},n=t.textTracks();r.kind=e,a&&(r.label=a),i&&(r.language=i),r.tech=t;var o=new ua.text.TrackClass(r);return n.addTrack(o),o}(this,t,e,a)},e.prototype.createRemoteTextTrack=function(t){var e=Ce(t,{tech:this});return new la.remoteTextEl.TrackClass(e)},e.prototype.addRemoteTextTrack=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1],i=this.createRemoteTextTrack(e);return!0!==a&&!1!==a&&(z.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),a=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==a&&this.ready(function(){return t.autoRemoteTextTracks_.addTrack(i.track)}),i},e.prototype.removeRemoteTextTrack=function(t){var e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},e.prototype.getVideoPlaybackQuality=function(){return{}},e.prototype.setPoster=function(){},e.prototype.playsinline=function(){},e.prototype.setPlaysinline=function(){},e.prototype.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(t,a){return e.canPlayType(t.type)},e.isTech=function(t){return t.prototype instanceof e||t instanceof e||t===e},e.registerTech=function(t,a){if(e.techs_||(e.techs_={}),!e.isTech(a))throw new Error("Tech "+t+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=de(t),e.techs_[t]=a,"Tech"!==t&&e.defaultTechOrder_.push(t),a},e.getTech=function(t){if(t)return t=de(t),e.techs_&&e.techs_[t]?e.techs_[t]:r&&r.videojs&&r.videojs[t]?(z.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),r.videojs[t]):void 0},e}(pe);ua.names.forEach(function(t){var e=ua[t];ca.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),ca.prototype.featuresVolumeControl=!0,ca.prototype.featuresMuteControl=!0,ca.prototype.featuresFullscreenResize=!1,ca.prototype.featuresPlaybackRate=!1,ca.prototype.featuresProgressEvents=!1,ca.prototype.featuresSourceset=!1,ca.prototype.featuresTimeupdateEvents=!1,ca.prototype.featuresNativeTextTracks=!1,ca.withSourceHandlers=function(t){t.registerSourceHandler=function(e,a){var i=t.sourceHandlers;i||(i=t.sourceHandlers=[]),void 0===a&&(a=i.length),i.splice(a,0,e)},t.canPlayType=function(e){for(var a=t.sourceHandlers||[],i=void 0,r=0;r<a.length;r++)if(i=a[r].canPlayType(e))return i;return""},t.selectSourceHandler=function(e,a){for(var i=t.sourceHandlers||[],r=0;r<i.length;r++)if(i[r].canHandleSource(e,a))return i[r];return null},t.canPlaySource=function(e,a){var i=t.selectSourceHandler(e,a);return i?i.canHandleSource(e,a):""};["seekable","seeking","duration"].forEach(function(t){var e=this[t];"function"==typeof e&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(e){var a=t.selectSourceHandler(e,this.options_);a||(t.nativeSourceHandler?a=t.nativeSourceHandler:z.error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),a!==t.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=a.handleSource(e,this,this.options_),this.on("dispose",this.disposeSourceHandler)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},pe.registerComponent("Tech",ca),ca.registerTech("Tech",ca),ca.defaultTechOrder_=[];var fa={},da={},Ca={};function pa(t,e,a){t.setTimeout(function(){return function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var i=arguments[2];var r=arguments[3];var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];var s=a[0],h=a.slice(1);if("string"==typeof s)t(e,fa[s],i,r,n,o);else if(s){var l=function(t,e){var a=da[t.id()],i=null;if(void 0===a||null===a)return i=e(t),da[t.id()]=[[e,i]],i;for(var r=0;r<a.length;r++){var n=a[r],o=n[0],s=n[1];o===e&&(i=s)}null===i&&(i=e(t),a.push([e,i]));return i}(r,s);if(!l.setSource)return n.push(l),t(e,h,i,r,n,o);l.setSource(Y({},e),function(a,s){if(a)return t(e,h,i,r,n,o);n.push(l),t(s,e.type===s.type?h:fa[s.type],i,r,n,o)})}else h.length?t(e,h,i,r,n,o):o?i(e,n):t(e,fa["*"],i,r,n,!0)}(e,fa[e.type],a,t)},1)}function ma(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r="call"+de(a),n=t.reduce(Sa(r),i),o=n===Ca,s=o?null:e[a](n);return function(t,e,a,i){for(var r=t.length-1;r>=0;r--){var n=t[r];n[e]&&n[e](i,a)}}(t,a,s,o),s}var Da={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},va={setCurrentTime:1},ga={play:1,pause:1};function Sa(t){return function(e,a){return e===Ca?Ca:a[t]?a[t](e):e}}var Ta={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},Ia=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=Ze(t);return Ta[e.toLowerCase()]||""};function ya(t){var e=Ia(t.src);return!t.type&&e&&(t.type=e),t}var xa=function(t){function e(a,i,r){R(this,e);var n=Ce({createEl:!1},i),o=B(this,t.call(this,a,n,r));if(i.playerOptions.sources&&0!==i.playerOptions.sources.length)a.src(i.playerOptions.sources);else for(var s=0,h=i.playerOptions.techOrder;s<h.length;s++){var l=de(h[s]),u=ca.getTech(l);if(l||(u=pe.getComponent(l)),u&&u.isSupported()){a.loadTech_(l);break}}return o}return _(e,t),e}(pe);pe.registerComponent("MediaLoader",xa);var wa=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.emitTapEvents(),r.enable(),r}return _(e,t),e.prototype.createEl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a=Y({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},a),"button"===e&&z.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),i=Y({role:"button"},i),this.tabIndex_=a.tabIndex;var r=t.prototype.createEl.call(this,e,a,i);return this.createControlTextEl(r),r},e.prototype.dispose=function(){this.controlTextEl_=null,t.prototype.dispose.call(this)},e.prototype.createControlTextEl=function(t){return this.controlTextEl_=it("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},e.prototype.controlText=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===t)return this.controlText_||"Need Text";var a=this.localize(t);this.controlText_=t,rt(this.controlTextEl_,a),this.nonIconControl||e.setAttribute("title",a)},e.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},e.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},e.prototype.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},e.prototype.handleClick=function(t){},e.prototype.handleFocus=function(t){Ht(n,"keydown",Qt(this,this.handleKeyPress))},e.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.trigger("click")):t.prototype.handleKeyPress&&t.prototype.handleKeyPress.call(this,e)},e.prototype.handleBlur=function(t){Yt(n,"keydown",Qt(this,this.handleKeyPress))},e}(pe);pe.registerComponent("ClickableComponent",wa);var Fa=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.update(),a.on("posterchange",Qt(r,r.update)),r}return _(e,t),e.prototype.dispose=function(){this.player().off("posterchange",this.update),t.prototype.dispose.call(this)},e.prototype.createEl=function(){var t=it("div",{className:"vjs-poster",tabIndex:-1});return O||(this.fallbackImg_=it("img"),t.appendChild(this.fallbackImg_)),t},e.prototype.update=function(t){var e=this.player().poster();this.setSrc(e),e?this.show():this.hide()},e.prototype.setSrc=function(t){if(this.fallbackImg_)this.fallbackImg_.src=t;else{var e="";t&&(e='url("'+t+'")'),this.el_.style.backgroundImage=e}},e.prototype.handleClick=function(t){this.player_.controls()&&(this.player_.paused()?Le(this.player_.play()):this.player_.pause())},e}(wa);pe.registerComponent("PosterImage",Fa);var Ea={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function ba(t,e){var a=void 0;if(4===t.length)a=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else{if(7!==t.length)throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");a=t.slice(1)}return"rgba("+parseInt(a.slice(0,2),16)+","+parseInt(a.slice(2,4),16)+","+parseInt(a.slice(4,6),16)+","+e+")"}function La(t,e,a){try{t.style[e]=a}catch(t){return}}var Ma=function(t){function e(a,i,n){R(this,e);var o=B(this,t.call(this,a,i,n)),s=Qt(o,o.updateDisplay);return a.on("loadstart",Qt(o,o.toggleDisplay)),a.on("texttrackchange",s),a.on("loadstart",Qt(o,o.preselectTrack)),a.ready(Qt(o,function(){if(a.tech_&&a.tech_.featuresNativeTextTracks)this.hide();else{a.on("fullscreenchange",s),a.on("playerresize",s),r.addEventListener&&r.addEventListener("orientationchange",s),a.on("dispose",function(){return r.removeEventListener("orientationchange",s)});for(var t=this.options_.playerOptions.tracks||[],e=0;e<t.length;e++)this.player_.addRemoteTextTrack(t[e],!0);this.preselectTrack()}})),o}return _(e,t),e.prototype.preselectTrack=function(){for(var t={captions:1,subtitles:1},e=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,i=void 0,r=void 0,n=void 0,o=0;o<e.length;o++){var s=e[o];a&&a.enabled&&a.language===s.language?s.kind===a.kind?n=s:n||(n=s):a&&!a.enabled?(n=null,i=null,r=null):s.default&&("descriptions"!==s.kind||i?s.kind in t&&!r&&(r=s):i=s)}n?n.mode="showing":r?r.mode="showing":i&&(i.mode="showing")},e.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},e.prototype.clearDisplay=function(){"function"==typeof r.WebVTT&&r.WebVTT.processCues(r,[],this.el_)},e.prototype.updateDisplay=function(){var t=this.player_.textTracks();this.clearDisplay();for(var e=null,a=null,i=t.length;i--;){var r=t[i];"showing"===r.mode&&("descriptions"===r.kind?e=r:a=r)}a?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(a)):e&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(e))},e.prototype.updateForTrack=function(t){if("function"==typeof r.WebVTT&&t.activeCues){for(var e=[],a=0;a<t.activeCues.length;a++)e.push(t.activeCues[a]);if(r.WebVTT.processCues(r,e,this.el_),this.player_.textTrackSettings)for(var i=this.player_.textTrackSettings.getValues(),n=e.length;n--;){var o=e[n];if(o){var s=o.displayState;if(i.color&&(s.firstChild.style.color=i.color),i.textOpacity&&La(s.firstChild,"color",ba(i.color||"#fff",i.textOpacity)),i.backgroundColor&&(s.firstChild.style.backgroundColor=i.backgroundColor),i.backgroundOpacity&&La(s.firstChild,"backgroundColor",ba(i.backgroundColor||"#000",i.backgroundOpacity)),i.windowColor&&(i.windowOpacity?La(s,"backgroundColor",ba(i.windowColor,i.windowOpacity)):s.style.backgroundColor=i.windowColor),i.edgeStyle&&("dropshadow"===i.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===i.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===i.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===i.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),i.fontPercent&&1!==i.fontPercent){var h=r.parseFloat(s.style.fontSize);s.style.fontSize=h*i.fontPercent+"px",s.style.height="auto",s.style.top="auto",s.style.bottom="2px"}i.fontFamily&&"default"!==i.fontFamily&&("small-caps"===i.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=Ea[i.fontFamily])}}}},e}(pe);pe.registerComponent("TextTrackDisplay",Ma);var Aa=function(t){function e(){return R(this,e),B(this,t.apply(this,arguments))}return _(e,t),e.prototype.createEl=function(){var e=this.player_.isAudio(),a=this.localize(e?"Audio Player":"Video Player"),i=it("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[a])}),r=t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(i),r},e}(pe);pe.registerComponent("LoadingSpinner",Aa);var Oa=function(t){function e(){return R(this,e),B(this,t.apply(this,arguments))}return _(e,t),e.prototype.createEl=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=Y({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},e),a=Y({type:"button"},a);var i=pe.prototype.createEl.call(this,"button",e,a);return this.createControlTextEl(i),i},e.prototype.addChild=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.constructor.name;return z.warn("Adding an actionable (user controllable) child to a Button ("+a+") is not supported; use a ClickableComponent instead."),pe.prototype.addChild.call(this,t,e)},e.prototype.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},e.prototype.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},e.prototype.handleKeyPress=function(e){32!==e.which&&13!==e.which&&t.prototype.handleKeyPress.call(this,e)},e}(wa);pe.registerComponent("Button",Oa);var Na=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.mouseused_=!1,r.on("mousedown",r.handleMouseDown),r}return _(e,t),e.prototype.buildCSSClass=function(){return"vjs-big-play-button"},e.prototype.handleClick=function(t){var e=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY)Le(e);else{var a=this.player_.getChild("controlBar"),i=a&&a.getChild("playToggle");if(i){var r=function(){return i.focus()};be(e)?e.then(r,function(){}):this.setTimeout(r,1)}else this.player_.focus()}},e.prototype.handleKeyPress=function(e){this.mouseused_=!1,t.prototype.handleKeyPress.call(this,e)},e.prototype.handleMouseDown=function(t){this.mouseused_=!0},e}(Oa);Na.prototype.controlText_="Play Video",pe.registerComponent("BigPlayButton",Na);var Pa=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.controlText(i&&i.controlText||r.localize("Close")),r}return _(e,t),e.prototype.buildCSSClass=function(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},e}(Oa);pe.registerComponent("CloseButton",Pa);var Ra=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.on(a,"play",r.handlePlay),r.on(a,"pause",r.handlePause),r.on(a,"ended",r.handleEnded),r}return _(e,t),e.prototype.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},e.prototype.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},e.prototype.handlePlay=function(t){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},e.prototype.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},e.prototype.handleEnded=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},e}(Oa);Ra.prototype.controlText_="Play",pe.registerComponent("PlayToggle",Ra);var _a=function(t,e){t=t<0?0:t;var a=Math.floor(t%60),i=Math.floor(t/60%60),r=Math.floor(t/3600),n=Math.floor(e/60%60),o=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(r=i=a="-"),(r=r>0||o>0?r+":":"")+(i=((r||n>=10)&&i<10?"0"+i:i)+":")+(a=a<10?"0"+a:a)},Ba=_a;var ka=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return Ba(t,e)},Ga=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.throttledUpdateContent=$t(Qt(r,r.updateContent),25),r.on(a,"timeupdate",r.throttledUpdateContent),r}return _(e,t),e.prototype.createEl=function(e){var a=this.buildCSSClass(),i=t.prototype.createEl.call(this,"div",{className:a+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=it("span",{className:a+"-display"},{"aria-live":"off"}),this.updateTextNode_(),i.appendChild(this.contentEl_),i},e.prototype.dispose=function(){this.contentEl_=null,this.textNode_=null,t.prototype.dispose.call(this)},e.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=n.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},e.prototype.formatTime_=function(t){return ka(t)},e.prototype.updateFormattedTime_=function(t){var e=this.formatTime_(t);e!==this.formattedTime_&&(this.formattedTime_=e,this.requestAnimationFrame(this.updateTextNode_))},e.prototype.updateContent=function(t){},e}(pe);Ga.prototype.labelText_="Time",Ga.prototype.controlText_="Time",pe.registerComponent("TimeDisplay",Ga);var Va=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.on(a,"ended",r.handleEnded),r}return _(e,t),e.prototype.buildCSSClass=function(){return"vjs-current-time"},e.prototype.updateContent=function(t){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(e)},e.prototype.handleEnded=function(t){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},e}(Ga);Va.prototype.labelText_="Current Time",Va.prototype.controlText_="Current Time",pe.registerComponent("CurrentTimeDisplay",Va);var Ha=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.on(a,"durationchange",r.updateContent),r.on(a,"loadedmetadata",r.throttledUpdateContent),r}return _(e,t),e.prototype.buildCSSClass=function(){return"vjs-duration"},e.prototype.updateContent=function(t){var e=this.player_.duration();e&&this.duration_!==e&&(this.duration_=e,this.updateFormattedTime_(e))},e}(Ga);Ha.prototype.labelText_="Duration",Ha.prototype.controlText_="Duration",pe.registerComponent("DurationDisplay",Ha);var Ya=function(t){function e(){return R(this,e),B(this,t.apply(this,arguments))}return _(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},e}(pe);pe.registerComponent("TimeDivider",Ya);var Xa=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.on(a,"durationchange",r.throttledUpdateContent),r.on(a,"ended",r.handleEnded),r}return _(e,t),e.prototype.buildCSSClass=function(){return"vjs-remaining-time"},e.prototype.formatTime_=function(e){return"-"+t.prototype.formatTime_.call(this,e)},e.prototype.updateContent=function(t){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},e.prototype.handleEnded=function(t){this.player_.duration()&&this.updateFormattedTime_(0)},e}(Ga);Xa.prototype.labelText_="Remaining Time",Xa.prototype.controlText_="Remaining Time",pe.registerComponent("RemainingTimeDisplay",Xa);var Wa=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.updateShowing(),r.on(r.player(),"durationchange",r.updateShowing),r}return _(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=it("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},e.prototype.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},e.prototype.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},e}(pe);pe.registerComponent("LiveDisplay",Wa);var Ua=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.bar=r.getChild(r.options_.barName),r.vertical(!!r.options_.vertical),r.enable(),r}return _(e,t),e.prototype.enabled=function(){return this.enabled_},e.prototype.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},e.prototype.disable=function(){if(this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},e.prototype.createEl=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a.className=a.className+" vjs-slider",a=Y({tabIndex:0},a),i=Y({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),t.prototype.createEl.call(this,e,a,i)},e.prototype.handleMouseDown=function(t){var e=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"!==t.type||w||t.preventDefault(),pt(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchmove",this.handleMouseMove),this.on(e,"touchend",this.handleMouseUp),this.handleMouseMove(t)},e.prototype.handleMouseMove=function(t){},e.prototype.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;mt(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.update()},e.prototype.update=function(){if(this.el_){var t=this.getPercent(),e=this.bar;if(e){("number"!=typeof t||t!=t||t<0||t===1/0)&&(t=0);var a=(100*t).toFixed(2)+"%",i=e.el().style;return this.vertical()?i.height=a:i.width=a,t}}},e.prototype.calculateDistance=function(t){var e=gt(this.el_,t);return this.vertical()?e.y:e.x},e.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},e.prototype.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepBack()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepForward())},e.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},e.prototype.handleClick=function(t){t.stopImmediatePropagation(),t.preventDefault()},e.prototype.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(pe);pe.registerComponent("Slider",Ua);var Ka=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.partEls_=[],r.on(a,"progress",r.update),r}return _(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},e.prototype.dispose=function(){this.partEls_=null,t.prototype.dispose.call(this)},e.prototype.update=function(t){var e=this.player_.buffered(),a=this.player_.duration(),i=this.player_.bufferedEnd(),r=this.partEls_,n=function(t,e){var a=t/e||0;return 100*(a>=1?1:a)+"%"};this.el_.style.width=n(i,a);for(var o=0;o<e.length;o++){var s=e.start(o),h=e.end(o),l=r[o];l||(l=this.el_.appendChild(it()),r[o]=l),l.style.left=n(s,i),l.style.width=n(h-s,i)}for(var u=r.length;u>e.length;u--)this.el_.removeChild(r[u-1]);r.length=e.length},e}(pe);pe.registerComponent("LoadProgressBar",Ka);var za=function(t){function e(){return R(this,e),B(this,t.apply(this,arguments))}return _(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},e.prototype.update=function(t,e,a){var i=Dt(this.el_),r=Dt(this.player_.el()),n=t.width*e;if(r&&i){var o=t.left-r.left+n,s=t.width-n+(r.right-t.right),h=i.width/2;o<h?h+=h-o:s<h&&(h=s),h<0?h=0:h>i.width&&(h=i.width),this.el_.style.right="-"+h+"px",rt(this.el_,a)}},e}(pe);pe.registerComponent("TimeTooltip",za);var Ja=function(t){function e(){return R(this,e),B(this,t.apply(this,arguments))}return _(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},e.prototype.update=function(t,e){var a=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var i=a.player_.scrubbing()?a.player_.getCache().currentTime:a.player_.currentTime(),r=ka(i,a.player_.duration()),n=a.getChild("timeTooltip");n&&n.update(t,e,r)})},e}(pe);Ja.prototype.options_={children:[]},b&&!(b>8)||D||g||Ja.prototype.options_.children.push("timeTooltip"),pe.registerComponent("PlayProgressBar",Ja);var ja=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.update=$t(Qt(r,r.update),25),r}return _(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},e.prototype.update=function(t,e){var a=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var i=a.player_.duration(),r=ka(e*i,i);a.el_.style.left=t.width*e+"px",a.getChild("timeTooltip").update(t,e,r)})},e}(pe);ja.prototype.options_={children:["timeTooltip"]},pe.registerComponent("MouseTimeDisplay",ja);var qa=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.setEventHandlers_(),r}return _(e,t),e.prototype.setEventHandlers_=function(){var t=this;this.update=$t(Qt(this,this.update),30),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.updateInterval=null,this.on(this.player_,["playing"],function(){t.clearInterval(t.updateInterval),t.updateInterval=t.setInterval(function(){t.requestAnimationFrame(function(){t.update()})},30)}),this.on(this.player_,["ended","pause","waiting"],function(){t.clearInterval(t.updateInterval)}),this.on(this.player_,["timeupdate","ended"],this.update)},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},e.prototype.update_=function(t,e){var a=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*e).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[ka(t,a),ka(a,a)],"{1} of {2}")),this.bar.update(Dt(this.el_),e)},e.prototype.update=function(e){var a=t.prototype.update.call(this);return this.update_(this.getCurrentTime_(),a),a},e.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},e.prototype.handleEnded=function(t){this.update_(this.player_.duration(),1)},e.prototype.getPercent=function(){var t=this.getCurrentTime_()/this.player_.duration();return t>=1?1:t},e.prototype.handleMouseDown=function(e){wt(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),t.prototype.handleMouseDown.call(this,e))},e.prototype.handleMouseMove=function(t){if(wt(t)){var e=this.calculateDistance(t)*this.player_.duration();e===this.player_.duration()&&(e-=.1),this.player_.currentTime(e)}},e.prototype.enable=function(){t.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},e.prototype.disable=function(){t.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},e.prototype.handleMouseUp=function(e){t.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&Le(this.player_.play())},e.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},e.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},e.prototype.handleAction=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},e.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.handleAction(e)):t.prototype.handleKeyPress&&t.prototype.handleKeyPress.call(this,e)},e}(Ua);qa.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},b&&!(b>8)||D||g||qa.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),qa.prototype.playerEvent="timeupdate",pe.registerComponent("SeekBar",qa);var Za=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.handleMouseMove=$t(Qt(r,r.handleMouseMove),25),r.throttledHandleMouseSeek=$t(Qt(r,r.handleMouseSeek),25),r.enable(),r}return _(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},e.prototype.handleMouseMove=function(t){var e=this.getChild("seekBar");if(e){var a=e.getChild("mouseTimeDisplay"),i=e.el(),r=Dt(i),n=gt(i,t).x;n>1?n=1:n<0&&(n=0),a&&a.update(r,n)}},e.prototype.handleMouseSeek=function(t){var e=this.getChild("seekBar");e&&e.handleMouseMove(t)},e.prototype.enabled=function(){return this.enabled_},e.prototype.disable=function(){this.children().forEach(function(t){return t.disable&&t.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},e.prototype.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},e.prototype.handleMouseDown=function(t){var e=this.el_.ownerDocument,a=this.getChild("seekBar");a&&a.handleMouseDown(t),this.on(e,"mousemove",this.throttledHandleMouseSeek),this.on(e,"touchmove",this.throttledHandleMouseSeek),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},e.prototype.handleMouseUp=function(t){var e=this.el_.ownerDocument,a=this.getChild("seekBar");a&&a.handleMouseUp(t),this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},e}(pe);Za.prototype.options_={children:["seekBar"]},pe.registerComponent("ProgressControl",Za);var Qa=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.on(a,"fullscreenchange",r.handleFullscreenChange),!1===n[Se.fullscreenEnabled]&&r.disable(),r}return _(e,t),e.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},e.prototype.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Oa);Qa.prototype.controlText_="Fullscreen",pe.registerComponent("FullscreenToggle",Qa);var $a=function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})},ti=function(t){function e(){return R(this,e),B(this,t.apply(this,arguments))}return _(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},e}(pe);pe.registerComponent("VolumeLevel",ti);var ei=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.on("slideractive",r.updateLastVolume_),r.on(a,"volumechange",r.updateARIAAttributes),a.ready(function(){return r.updateARIAAttributes()}),r}return _(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},e.prototype.handleMouseDown=function(e){wt(e)&&t.prototype.handleMouseDown.call(this,e)},e.prototype.handleMouseMove=function(t){wt(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},e.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},e.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},e.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},e.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},e.prototype.updateARIAAttributes=function(t){var e=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")},e.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},e.prototype.updateLastVolume_=function(){var t=this,e=this.player_.volume();this.one("sliderinactive",function(){0===t.player_.volume()&&t.player_.lastVolume_(e)})},e}(Ua);ei.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},ei.prototype.playerEvent="volumechange",pe.registerComponent("VolumeBar",ei);var ai=function(t){function e(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};R(this,e),i.vertical=i.vertical||!1,(void 0===i.volumeBar||W(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical);var r=B(this,t.call(this,a,i));return $a(r,a),r.throttledHandleMouseMove=$t(Qt(r,r.handleMouseMove),25),r.on("mousedown",r.handleMouseDown),r.on("touchstart",r.handleMouseDown),r.on(r.volumeBar,["focus","slideractive"],function(){r.volumeBar.addClass("vjs-slider-active"),r.addClass("vjs-slider-active"),r.trigger("slideractive")}),r.on(r.volumeBar,["blur","sliderinactive"],function(){r.volumeBar.removeClass("vjs-slider-active"),r.removeClass("vjs-slider-active"),r.trigger("sliderinactive")}),r}return _(e,t),e.prototype.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},e.prototype.handleMouseDown=function(t){var e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseMove),this.on(e,"touchmove",this.throttledHandleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},e.prototype.handleMouseUp=function(t){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseMove),this.off(e,"touchmove",this.throttledHandleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},e.prototype.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},e}(pe);ai.prototype.options_={children:["volumeBar"]},pe.registerComponent("VolumeControl",ai);var ii=function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})},ri=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return ii(r,a),r.on(a,["loadstart","volumechange"],r.update),r}return _(e,t),e.prototype.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(t){var e=this.player_.volume(),a=this.player_.lastVolume_();if(0===e){var i=a<.1?.1:a;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},e.prototype.update=function(t){this.updateIcon_(),this.updateControlText_()},e.prototype.updateIcon_=function(){var t=this.player_.volume(),e=3;D&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?e=0:t<.33?e=1:t<.67&&(e=2);for(var a=0;a<4;a++)ht(this.el_,"vjs-vol-"+a);st(this.el_,"vjs-vol-"+e)},e.prototype.updateControlText_=function(){var t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},e}(Oa);ri.prototype.controlText_="Mute",pe.registerComponent("MuteToggle",ri);var ni=function(t){function e(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};R(this,e),void 0!==i.inline?i.inline=i.inline:i.inline=!0,(void 0===i.volumeControl||W(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline);var r=B(this,t.call(this,a,i));return r.on(a,["loadstart"],r.volumePanelState_),r.on(r.volumeControl,["slideractive"],r.sliderActive_),r.on(r.volumeControl,["sliderinactive"],r.sliderInactive_),r}return _(e,t),e.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},e.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},e.prototype.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},e.prototype.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},e}(pe);ni.prototype.options_={children:["muteToggle","volumeControl"]},pe.registerComponent("VolumePanel",ni);var oi=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return i&&(r.menuButton_=i.menuButton),r.focusedChild_=-1,r.on("keydown",r.handleKeyPress),r}return _(e,t),e.prototype.addItem=function(t){this.addChild(t),t.on("click",Qt(this,function(e){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==t.name()&&this.menuButton_.focus())}))},e.prototype.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=it(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var a=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return a.appendChild(this.contentEl_),Ht(a,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),a},e.prototype.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},e.prototype.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepForward()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepBack())},e.prototype.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},e.prototype.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},e.prototype.focus=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.children().slice();e.length&&e[0].className&&/vjs-menu-title/.test(e[0].className)&&e.shift(),e.length>0&&(t<0?t=0:t>=e.length&&(t=e.length-1),this.focusedChild_=t,e[t].el_.focus())},e}(pe);pe.registerComponent("Menu",oi);var si=function(t){function e(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};R(this,e);var r=B(this,t.call(this,a,i));r.menuButton_=new Oa(a,i),r.menuButton_.controlText(r.controlText_),r.menuButton_.el_.setAttribute("aria-haspopup","true");var n=Oa.prototype.buildCSSClass();return r.menuButton_.el_.className=r.buildCSSClass()+" "+n,r.menuButton_.removeClass("vjs-control"),r.addChild(r.menuButton_),r.update(),r.enabled_=!0,r.on(r.menuButton_,"tap",r.handleClick),r.on(r.menuButton_,"click",r.handleClick),r.on(r.menuButton_,"focus",r.handleFocus),r.on(r.menuButton_,"blur",r.handleBlur),r.on("keydown",r.handleSubmenuKeyPress),r}return _(e,t),e.prototype.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},e.prototype.createMenu=function(){var t=new oi(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var e=it("li",{className:"vjs-menu-title",innerHTML:de(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,t.children_.unshift(e),nt(e,t.contentEl())}if(this.items=this.createItems(),this.items)for(var a=0;a<this.items.length;a++)t.addItem(this.items[a]);return t},e.prototype.createItems=function(){},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},e.prototype.buildWrapperCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+Oa.prototype.buildCSSClass()+" "+t.prototype.buildCSSClass.call(this)},e.prototype.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+t.prototype.buildCSSClass.call(this)},e.prototype.controlText=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(t,e)},e.prototype.handleClick=function(t){this.one(this.menu.contentEl(),"mouseleave",Qt(this,function(t){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},e.prototype.focus=function(){this.menuButton_.focus()},e.prototype.blur=function(){this.menuButton_.blur()},e.prototype.handleFocus=function(){Ht(n,"keydown",Qt(this,this.handleKeyPress))},e.prototype.handleBlur=function(){Yt(n,"keydown",Qt(this,this.handleKeyPress))},e.prototype.handleKeyPress=function(t){27===t.which||9===t.which?(this.buttonPressed_&&this.unpressButton(),9!==t.which&&(t.preventDefault(),this.menuButton_.el_.focus())):38!==t.which&&40!==t.which||this.buttonPressed_||(this.pressButton(),t.preventDefault())},e.prototype.handleSubmenuKeyPress=function(t){27!==t.which&&9!==t.which||(this.buttonPressed_&&this.unpressButton(),9!==t.which&&(t.preventDefault(),this.menuButton_.el_.focus()))},e.prototype.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),D&&et())return;this.menu.focus()}},e.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},e.prototype.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},e.prototype.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(pe);pe.registerComponent("MenuButton",si);var hi=function(t){function e(a,i){R(this,e);var r=i.tracks,n=B(this,t.call(this,a,i));if(n.items.length<=1&&n.hide(),!r)return B(n);var o=Qt(n,n.update);return r.addEventListener("removetrack",o),r.addEventListener("addtrack",o),n.player_.on("ready",o),n.player_.on("dispose",function(){r.removeEventListener("removetrack",o),r.removeEventListener("addtrack",o)}),n}return _(e,t),e}(si);pe.registerComponent("TrackButton",hi);var li=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.selectable=i.selectable,r.isSelected_=i.selected||!1,r.multiSelectable=i.multiSelectable,r.selected(r.isSelected_),r.selectable?r.multiSelectable?r.el_.setAttribute("role","menuitemcheckbox"):r.el_.setAttribute("role","menuitemradio"):r.el_.setAttribute("role","menuitem"),r}return _(e,t),e.prototype.createEl=function(e,a,i){return this.nonIconControl=!0,t.prototype.createEl.call(this,"li",Y({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},a),i)},e.prototype.handleClick=function(t){this.selected(!0)},e.prototype.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(wa);pe.registerComponent("MenuItem",li);var ui=function(t){function e(a,i){R(this,e);var o=i.track,s=a.textTracks();i.label=o.label||o.language||"Unknown",i.selected="showing"===o.mode;var h=B(this,t.call(this,a,i));h.track=o;var l=function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];h.handleTracksChange.apply(h,e)},u=function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];h.handleSelectedLanguageChange.apply(h,e)};if(a.on(["loadstart","texttrackchange"],l),s.addEventListener("change",l),s.addEventListener("selectedlanguagechange",u),h.on("dispose",function(){a.off(["loadstart","texttrackchange"],l),s.removeEventListener("change",l),s.removeEventListener("selectedlanguagechange",u)}),void 0===s.onchange){var c=void 0;h.on(["tap","click"],function(){if("object"!==P(r.Event))try{c=new r.Event("change")}catch(t){}c||(c=n.createEvent("Event")).initEvent("change",!0,!0),s.dispatchEvent(c)})}return h.handleTracksChange(),h}return _(e,t),e.prototype.handleClick=function(e){var a=this.track.kind,i=this.track.kinds,r=this.player_.textTracks();if(i||(i=[a]),t.prototype.handleClick.call(this,e),r)for(var n=0;n<r.length;n++){var o=r[n];o===this.track&&i.indexOf(o.kind)>-1?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled")}},e.prototype.handleTracksChange=function(t){var e="showing"===this.track.mode;e!==this.isSelected_&&this.selected(e)},e.prototype.handleSelectedLanguageChange=function(t){if("showing"===this.track.mode){var e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},e.prototype.dispose=function(){this.track=null,t.prototype.dispose.call(this)},e}(li);pe.registerComponent("TextTrackMenuItem",ui);var ci=function(t){function e(a,i){return R(this,e),i.track={player:a,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,B(this,t.call(this,a,i))}return _(e,t),e.prototype.handleTracksChange=function(t){for(var e=this.player().textTracks(),a=!0,i=0,r=e.length;i<r;i++){var n=e[i];if(this.options_.kinds.indexOf(n.kind)>-1&&"showing"===n.mode){a=!1;break}}a!==this.isSelected_&&this.selected(a)},e.prototype.handleSelectedLanguageChange=function(t){for(var e=this.player().textTracks(),a=!0,i=0,r=e.length;i<r;i++){var n=e[i];if(["captions","descriptions","subtitles"].indexOf(n.kind)>-1&&"showing"===n.mode){a=!1;break}}a&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(ui);pe.registerComponent("OffTextTrackMenuItem",ci);var fi=function(t){function e(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return R(this,e),i.tracks=a.textTracks(),B(this,t.call(this,a,i))}return _(e,t),e.prototype.createItems=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ui,a=void 0;this.label_&&(a=this.label_+" off"),t.push(new ci(this.player_,{kinds:this.kinds_,kind:this.kind_,label:a})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var n=i[r];if(this.kinds_.indexOf(n.kind)>-1){var o=new e(this.player_,{track:n,selectable:!0,multiSelectable:!1});o.addClass("vjs-"+n.kind+"-menu-item"),t.push(o)}}return t},e}(hi);pe.registerComponent("TextTrackButton",fi);var di=function(t){function e(a,i){R(this,e);var r=i.track,n=i.cue,o=a.currentTime();i.selectable=!0,i.multiSelectable=!1,i.label=n.text,i.selected=n.startTime<=o&&o<n.endTime;var s=B(this,t.call(this,a,i));return s.track=r,s.cue=n,r.addEventListener("cuechange",Qt(s,s.update)),s}return _(e,t),e.prototype.handleClick=function(e){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},e.prototype.update=function(t){var e=this.cue,a=this.player_.currentTime();this.selected(e.startTime<=a&&a<e.endTime)},e}(li);pe.registerComponent("ChaptersTrackMenuItem",di);var Ci=function(t){function e(a,i,r){return R(this,e),B(this,t.call(this,a,i,r))}return _(e,t),e.prototype.buildCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildWrapperCSSClass.call(this)},e.prototype.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),t.prototype.update.call(this)},e.prototype.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.addEventListener("load",this.updateHandler_)}}},e.prototype.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],e=t.length-1;e>=0;e--){var a=t[e];if(a.kind===this.kind_)return a}},e.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(de(this.kind_))},e.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),t.prototype.createMenu.call(this)},e.prototype.createItems=function(){var t=[];if(!this.track_)return t;var e=this.track_.cues;if(!e)return t;for(var a=0,i=e.length;a<i;a++){var r=e[a],n=new di(this.player_,{track:this.track_,cue:r});t.push(n)}return t},e}(fi);Ci.prototype.kind_="chapters",Ci.prototype.controlText_="Chapters",pe.registerComponent("ChaptersButton",Ci);var pi=function(t){function e(a,i,r){R(this,e);var n=B(this,t.call(this,a,i,r)),o=a.textTracks(),s=Qt(n,n.handleTracksChange);return o.addEventListener("change",s),n.on("dispose",function(){o.removeEventListener("change",s)}),n}return _(e,t),e.prototype.handleTracksChange=function(t){for(var e=this.player().textTracks(),a=!1,i=0,r=e.length;i<r;i++){var n=e[i];if(n.kind!==this.kind_&&"showing"===n.mode){a=!0;break}}a?this.disable():this.enable()},e.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(fi);pi.prototype.kind_="descriptions",pi.prototype.controlText_="Descriptions",pe.registerComponent("DescriptionsButton",pi);var mi=function(t){function e(a,i,r){return R(this,e),B(this,t.call(this,a,i,r))}return _(e,t),e.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(fi);mi.prototype.kind_="subtitles",mi.prototype.controlText_="Subtitles",pe.registerComponent("SubtitlesButton",mi);var Di=function(t){function e(a,i){R(this,e),i.track={player:a,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem";var r=B(this,t.call(this,a,i));return r.addClass("vjs-texttrack-settings"),r.controlText(", opens "+i.kind+" settings dialog"),r}return _(e,t),e.prototype.handleClick=function(t){this.player().getChild("textTrackSettings").open()},e}(ui);pe.registerComponent("CaptionSettingsMenuItem",Di);var vi=function(t){function e(a,i,r){return R(this,e),B(this,t.call(this,a,i,r))}return _(e,t),e.prototype.buildCSSClass=function(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+t.prototype.buildWrapperCSSClass.call(this)},e.prototype.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Di(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,e)},e}(fi);vi.prototype.kind_="captions",vi.prototype.controlText_="Captions",pe.registerComponent("CaptionsButton",vi);var gi=function(t){function e(){return R(this,e),B(this,t.apply(this,arguments))}return _(e,t),e.prototype.createEl=function(e,a,i){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),r+="</span>",t.prototype.createEl.call(this,e,Y({innerHTML:r},a),i)},e}(ui);pe.registerComponent("SubsCapsMenuItem",gi);var Si=function(t){function e(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};R(this,e);var r=B(this,t.call(this,a,i));return r.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(r.player_.language_)>-1&&(r.label_="captions"),r.menuButton_.controlText(de(r.label_)),r}return _(e,t),e.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildWrapperCSSClass.call(this)},e.prototype.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Di(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=t.prototype.createItems.call(this,e,gi)},e}(fi);Si.prototype.kinds_=["captions","subtitles"],Si.prototype.controlText_="Subtitles",pe.registerComponent("SubsCapsButton",Si);var Ti=function(t){function e(a,i){R(this,e);var r=i.track,n=a.audioTracks();i.label=r.label||r.language||"Unknown",i.selected=r.enabled;var o=B(this,t.call(this,a,i));o.track=r,o.addClass("vjs-"+r.kind+"-menu-item");var s=function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];o.handleTracksChange.apply(o,e)};return n.addEventListener("change",s),o.on("dispose",function(){n.removeEventListener("change",s)}),o}return _(e,t),e.prototype.createEl=function(e,a,i){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),r+="</span>",t.prototype.createEl.call(this,e,Y({innerHTML:r},a),i)},e.prototype.handleClick=function(e){var a=this.player_.audioTracks();t.prototype.handleClick.call(this,e);for(var i=0;i<a.length;i++){var r=a[i];r.enabled=r===this.track}},e.prototype.handleTracksChange=function(t){this.selected(this.track.enabled)},e}(li);pe.registerComponent("AudioTrackMenuItem",Ti);var Ii=function(t){function e(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return R(this,e),i.tracks=a.audioTracks(),B(this,t.call(this,a,i))}return _(e,t),e.prototype.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+t.prototype.buildWrapperCSSClass.call(this)},e.prototype.createItems=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;for(var e=this.player_.audioTracks(),a=0;a<e.length;a++){var i=e[a];t.push(new Ti(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return t},e}(hi);Ii.prototype.controlText_="Audio Track",pe.registerComponent("AudioTrackButton",Ii);var yi=function(t){function e(a,i){R(this,e);var r=i.rate,n=parseFloat(r,10);i.label=r,i.selected=1===n,i.selectable=!0,i.multiSelectable=!1;var o=B(this,t.call(this,a,i));return o.label=r,o.rate=n,o.on(a,"ratechange",o.update),o}return _(e,t),e.prototype.handleClick=function(e){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},e.prototype.update=function(t){this.selected(this.player().playbackRate()===this.rate)},e}(li);yi.prototype.contentElType="button",pe.registerComponent("PlaybackRateMenuItem",yi);var xi=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.updateVisibility(),r.updateLabel(),r.on(a,"loadstart",r.updateVisibility),r.on(a,"ratechange",r.updateLabel),r}return _(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this);return this.labelEl_=it("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),e.appendChild(this.labelEl_),e},e.prototype.dispose=function(){this.labelEl_=null,t.prototype.dispose.call(this)},e.prototype.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildWrapperCSSClass.call(this)},e.prototype.createMenu=function(){var t=new oi(this.player()),e=this.playbackRates();if(e)for(var a=e.length-1;a>=0;a--)t.addChild(new yi(this.player(),{rate:e[a]+"x"}));return t},e.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},e.prototype.handleClick=function(t){for(var e=this.player().playbackRate(),a=this.playbackRates(),i=a[0],r=0;r<a.length;r++)if(a[r]>e){i=a[r];break}this.player().playbackRate(i)},e.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},e.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},e.prototype.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},e.prototype.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},e}(si);xi.prototype.controlText_="Playback Rate",pe.registerComponent("PlaybackRateMenuButton",xi);var wi=function(t){function e(){return R(this,e),B(this,t.apply(this,arguments))}return _(e,t),e.prototype.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e}(pe);pe.registerComponent("Spacer",wi);var Fi=function(t){function e(){return R(this,e),B(this,t.apply(this,arguments))}return _(e,t),e.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML=" ",e},e}(wi);pe.registerComponent("CustomControlSpacer",Fi);var Ei=function(t){function e(){return R(this,e),B(this,t.apply(this,arguments))}return _(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(pe);Ei.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},pe.registerComponent("ControlBar",Ei);var bi=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i));return r.on(a,"error",r.open),r}return _(e,t),e.prototype.buildCSSClass=function(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},e.prototype.content=function(){var t=this.player().error();return t?this.localize(t.message):""},e}(Pe);bi.prototype.options_=Ce(Pe.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),pe.registerComponent("ErrorDisplay",bi);var Li=["#000","Black"],Mi=["#00F","Blue"],Ai=["#0FF","Cyan"],Oi=["#0F0","Green"],Ni=["#F0F","Magenta"],Pi=["#F00","Red"],Ri=["#FFF","White"],_i=["#FF0","Yellow"],Bi=["1","Opaque"],ki=["0.5","Semi-Transparent"],Gi=["0","Transparent"],Vi={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Li,Ri,Pi,Oi,Mi,_i,Ni,Ai]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Bi,ki,Gi]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Ri,Li,Pi,Oi,Mi,_i,Ni,Ai]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return"1.00"===t?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Bi,ki]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Gi,ki,Bi]}};function Hi(t,e){if(e&&(t=e(t)),t&&"none"!==t)return t}Vi.windowColor.options=Vi.backgroundColor.options;var Yi=function(t){function e(a,i){R(this,e),i.temporary=!1;var r=B(this,t.call(this,a,i));return r.updateDisplay=Qt(r,r.updateDisplay),r.fill(),r.hasBeenOpened_=r.hasBeenFilled_=!0,r.endDialog=it("p",{className:"vjs-control-text",textContent:r.localize("End of dialog window.")}),r.el().appendChild(r.endDialog),r.setDefaults(),void 0===i.persistTextTrackSettings&&(r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings),r.on(r.$(".vjs-done-button"),"click",function(){r.saveSettings(),r.close()}),r.on(r.$(".vjs-default-button"),"click",function(){r.setDefaults(),r.updateDisplay()}),H(Vi,function(t){r.on(r.$(t.selector),"change",r.updateDisplay)}),r.options_.persistTextTrackSettings&&r.restoreSettings(),r}return _(e,t),e.prototype.dispose=function(){this.endDialog=null,t.prototype.dispose.call(this)},e.prototype.createElSelect_=function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",r=Vi[t],n=r.id.replace("%s",this.id_),o=[a,n].join(" ").trim();return["<"+i+' id="'+n+'" class="'+("label"===i?"vjs-label":"")+'">',this.localize(r.label),"</"+i+">",'<select aria-labelledby="'+o+'">'].concat(r.options.map(function(t){var a=n+"-"+t[1].replace(/\W+/g,"");return['<option id="'+a+'" value="'+t[0]+'" ','aria-labelledby="'+o+" "+a+'">',e.localize(t[1]),"</option>"].join("")})).concat("</select>").join("")},e.prototype.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},e.prototype.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},e.prototype.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},e.prototype.createElColors_=function(){return it("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},e.prototype.createElFont_=function(){return it("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},e.prototype.createElControls_=function(){var t=this.localize("restore all settings to the default values");return it("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},e.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},e.prototype.label=function(){return this.localize("Caption Settings Dialog")},e.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},e.prototype.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},e.prototype.getValues=function(){var t=this;return function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return V(t).reduce(function(a,i){return e(a,t[i],i)},a)}(Vi,function(e,a,i){var r=function(t,e){return Hi(t.options[t.options.selectedIndex].value,e)}(t.$(a.selector),a.parser);return void 0!==r&&(e[i]=r),e},{})},e.prototype.setValues=function(t){var e=this;H(Vi,function(a,i){!function(t,e,a){if(e)for(var i=0;i<t.options.length;i++)if(Hi(t.options[i].value,a)===e){t.selectedIndex=i;break}}(e.$(a.selector),t[i],a.parser)})},e.prototype.setDefaults=function(){var t=this;H(Vi,function(e){var a=e.hasOwnProperty("default")?e.default:0;t.$(e.selector).selectedIndex=a})},e.prototype.restoreSettings=function(){var t=void 0;try{t=JSON.parse(r.localStorage.getItem("vjs-text-track-settings"))}catch(t){z.warn(t)}t&&this.setValues(t)},e.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?r.localStorage.setItem("vjs-text-track-settings",JSON.stringify(t)):r.localStorage.removeItem("vjs-text-track-settings")}catch(t){z.warn(t)}}},e.prototype.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},e.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(n,"keydown",this.handleKeyDown);var t=this.player_.controlBar,e=t&&t.subsCapsButton,a=t&&t.captionsButton;e?e.focus():a&&a.focus()},e}(Pe);pe.registerComponent("TextTrackSettings",Yi);var Xi=function(t){function e(a,i){R(this,e);var n=i.ResizeObserver||r.ResizeObserver;null===i.ResizeObserver&&(n=!1);var o=Ce({createEl:!n},i),s=B(this,t.call(this,a,o));return s.ResizeObserver=i.ResizeObserver||r.ResizeObserver,s.loadListener_=null,s.resizeObserver_=null,s.debouncedHandler_=te(function(){s.resizeHandler()},100,!1,s),n?(s.resizeObserver_=new s.ResizeObserver(s.debouncedHandler_),s.resizeObserver_.observe(a.el())):(s.loadListener_=function(){s.el_&&s.el_.contentWindow&&Ht(s.el_.contentWindow,"resize",s.debouncedHandler_)},s.one("load",s.loadListener_)),s}return _(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},e.prototype.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},e.prototype.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&Yt(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null},e}(pe);pe.registerComponent("ResizeManager",Xi);var Wi=function(t){var e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;var a=t.$$("source"),i=[],r="";if(!a.length)return!1;for(var n=0;n<a.length;n++){var o=a[n].src;o&&-1===i.indexOf(o)&&i.push(o)}return!!i.length&&(1===i.length&&(r=i[0]),t.triggerSourceset(r),!0)},Ui={};E||(Ui=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(t){var e=n.createElement(this.nodeName.toLowerCase());e.innerHTML=t;for(var a=n.createDocumentFragment();e.childNodes.length;)a.appendChild(e.childNodes[0]);return this.innerText="",r.Element.prototype.appendChild.call(this,a),this.innerHTML}}));var Ki=function(t,e){for(var a={},i=0;i<t.length&&!((a=Object.getOwnPropertyDescriptor(t[i],e))&&a.set&&a.get);i++);return a.enumerable=!0,a.configurable=!0,a},zi=function(t){var e=t.el();if(!e.resetSourceWatch_){var a={},i=function(t){return Ki([t.el(),r.HTMLMediaElement.prototype,r.Element.prototype,Ui],"innerHTML")}(t),n=function(a){return function(){for(var i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];var o=a.apply(e,r);return Wi(t),o}};["append","appendChild","insertAdjacentHTML"].forEach(function(t){e[t]&&(a[t]=e[t],e[t]=n(a[t]))}),Object.defineProperty(e,"innerHTML",Ce(i,{set:n(i.set)})),e.resetSourceWatch_=function(){e.resetSourceWatch_=null,Object.keys(a).forEach(function(t){e[t]=a[t]}),Object.defineProperty(e,"innerHTML",i)},t.one("sourceset",e.resetSourceWatch_)}},Ji={};E||(Ji=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?qe(r.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return r.Element.prototype.setAttribute.call(this,"src",t),t}}));var ji=function(t){if(t.featuresSourceset){var e=t.el();if(!e.resetSourceset_){var a=function(t){return Ki([t.el(),r.HTMLMediaElement.prototype,Ji],"src")}(t),i=e.setAttribute,n=e.load;Object.defineProperty(e,"src",Ce(a,{set:function(i){var r=a.set.call(e,i);return t.triggerSourceset(e.src),r}})),e.setAttribute=function(a,r){var n=i.call(e,a,r);return/src/i.test(a)&&t.triggerSourceset(e.src),n},e.load=function(){var a=n.call(e);return Wi(t)||(t.triggerSourceset(""),zi(t)),a},e.currentSrc?t.triggerSourceset(e.currentSrc):Wi(t)||zi(t),e.resetSourceset_=function(){e.resetSourceset_=null,e.load=n,e.setAttribute=i,Object.defineProperty(e,"src",a),e.resetSourceWatch_&&e.resetSourceWatch_()}}}},qi=k(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),Zi=function(t){function e(a,i){R(this,e);var r=B(this,t.call(this,a,i)),n=a.source,s=!1;if(n&&(r.el_.currentSrc!==n.src||a.tag&&3===a.tag.initNetworkState_)?r.setSource(n):r.handleLateInit_(r.el_),a.enableSourceset&&r.setupSourcesetHandling_(),r.el_.hasChildNodes()){for(var h=r.el_.childNodes,l=h.length,u=[];l--;){var c=h[l];"track"===c.nodeName.toLowerCase()&&(r.featuresNativeTextTracks?(r.remoteTextTrackEls().addTrackElement_(c),r.remoteTextTracks().addTrack(c.track),r.textTracks().addTrack(c.track),s||r.el_.hasAttribute("crossorigin")||!Qe(c.src)||(s=!0)):u.push(c))}for(var f=0;f<u.length;f++)r.el_.removeChild(u[f])}return r.proxyNativeTracks_(),r.featuresNativeTextTracks&&s&&z.warn(o(qi)),r.restoreMetadataTracksInIOSNativePlayer_(),(A||p||I)&&!0===a.nativeControlsForTouch&&r.setControls(!0),r.proxyWebkitFullscreen_(),r.triggerReady(),r}return _(e,t),e.prototype.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,t.prototype.dispose.call(this)},e.prototype.setupSourcesetHandling_=function(){ji(this)},e.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var t=this.textTracks(),e=void 0,a=function(){e=[];for(var a=0;a<t.length;a++){var i=t[a];"metadata"===i.kind&&e.push({track:i,storedMode:i.mode})}};a(),t.addEventListener("change",a),this.on("dispose",function(){return t.removeEventListener("change",a)});var i=function a(){for(var i=0;i<e.length;i++){var r=e[i];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}t.removeEventListener("change",a)};this.on("webkitbeginfullscreen",function(){t.removeEventListener("change",a),t.removeEventListener("change",i),t.addEventListener("change",i)}),this.on("webkitendfullscreen",function(){t.removeEventListener("change",a),t.addEventListener("change",a),t.removeEventListener("change",i)})},e.prototype.proxyNativeTracks_=function(){var t=this;ha.names.forEach(function(e){var a=ha[e],i=t.el()[a.getterName],r=t[a.getterName]();if(t["featuresNative"+a.capitalName+"Tracks"]&&i&&i.addEventListener){var n={change:function(t){r.trigger({type:"change",target:r,currentTarget:r,srcElement:r})},addtrack:function(t){r.addTrack(t.track)},removetrack:function(t){r.removeTrack(t.track)}},o=function(){for(var t=[],e=0;e<r.length;e++){for(var a=!1,n=0;n<i.length;n++)if(i[n]===r[e]){a=!0;break}a||t.push(r[e])}for(;t.length;)r.removeTrack(t.shift())};Object.keys(n).forEach(function(e){var a=n[e];i.addEventListener(e,a),t.on("dispose",function(t){return i.removeEventListener(e,a)})}),t.on("loadstart",o),t.on("dispose",function(e){return t.off("loadstart",o)})}})},e.prototype.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var a=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(a,t),e.disposeMediaElement(t),t=a}else{t=n.createElement("video");var i=Ce({},this.options_.tag&&ct(this.options_.tag));A&&!0===this.options_.nativeControlsForTouch||delete i.controls,ut(t,Y(i,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}void 0!==this.options_.preload&&dt(t,"preload",this.options_.preload);for(var r=["loop","muted","playsinline","autoplay"],o=0;o<r.length;o++){var s=r[o],h=this.options_[s];void 0!==h&&(h?dt(t,s,s):Ct(t,s),t[s]=h)}return t},e.prototype.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var e=!1,a=function(){e=!0};this.on("loadstart",a);var i=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready(function(){this.off("loadstart",a),this.off("loadedmetadata",i),e||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),t.readyState>=2&&r.push("loadeddata"),t.readyState>=3&&r.push("canplay"),t.readyState>=4&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(t){this.trigger(t)},this)})}},e.prototype.setCurrentTime=function(t){try{this.el_.currentTime=t}catch(t){z(t,"Video is not ready. (Video.js)")}},e.prototype.duration=function(){var t=this;if(this.el_.duration===1/0&&g&&w&&0===this.el_.currentTime){return this.on("timeupdate",function e(){t.el_.currentTime>0&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))}),NaN}return this.el_.duration||NaN},e.prototype.width=function(){return this.el_.offsetWidth},e.prototype.height=function(){return this.el_.offsetHeight},e.prototype.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var e=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},a=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",a),this.on("dispose",function(){t.off("webkitbeginfullscreen",a),t.off("webkitendfullscreen",e)})}},e.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=r.navigator&&r.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},e.prototype.enterFullScreen=function(){var t=this.el_;t.paused&&t.networkState<=t.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){t.pause(),t.webkitEnterFullScreen()},0)):t.webkitEnterFullScreen()},e.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},e.prototype.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},e.prototype.reset=function(){e.resetMediaElement(this.el_)},e.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},e.prototype.setControls=function(t){this.el_.controls=!!t},e.prototype.addTextTrack=function(e,a,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,a,i):t.prototype.addTextTrack.call(this,e,a,i)},e.prototype.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return t.prototype.createRemoteTextTrack.call(this,e);var a=n.createElement("track");return e.kind&&(a.kind=e.kind),e.label&&(a.label=e.label),(e.language||e.srclang)&&(a.srclang=e.language||e.srclang),e.default&&(a.default=e.default),e.id&&(a.id=e.id),e.src&&(a.src=e.src),a},e.prototype.addRemoteTextTrack=function(e,a){var i=t.prototype.addRemoteTextTrack.call(this,e,a);return this.featuresNativeTextTracks&&this.el().appendChild(i),i},e.prototype.removeRemoteTextTrack=function(e){if(t.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var a=this.$$("track"),i=a.length;i--;)e!==a[i]&&e!==a[i].track||this.el().removeChild(a[i])},e.prototype.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),r.performance&&"function"==typeof r.performance.now?t.creationTime=r.performance.now():r.performance&&r.performance.timing&&"number"==typeof r.performance.timing.navigationStart&&(t.creationTime=r.Date.now()-r.performance.timing.navigationStart),t},e}(ca);if($()){Zi.TEST_VID=n.createElement("video");var Qi=n.createElement("track");Qi.kind="captions",Qi.srclang="en",Qi.label="English",Zi.TEST_VID.appendChild(Qi)}Zi.isSupported=function(){try{Zi.TEST_VID.volume=.5}catch(t){return!1}return!(!Zi.TEST_VID||!Zi.TEST_VID.canPlayType)},Zi.canPlayType=function(t){return Zi.TEST_VID.canPlayType(t)},Zi.canPlaySource=function(t,e){return Zi.canPlayType(t.type)},Zi.canControlVolume=function(){try{var t=Zi.TEST_VID.volume;return Zi.TEST_VID.volume=t/2+.1,t!==Zi.TEST_VID.volume}catch(t){return!1}},Zi.canMuteVolume=function(){try{var t=Zi.TEST_VID.muted;return Zi.TEST_VID.muted=!t,Zi.TEST_VID.muted?dt(Zi.TEST_VID,"muted","muted"):Ct(Zi.TEST_VID,"muted"),t!==Zi.TEST_VID.muted}catch(t){return!1}},Zi.canControlPlaybackRate=function(){if(g&&w&&F<58)return!1;try{var t=Zi.TEST_VID.playbackRate;return Zi.TEST_VID.playbackRate=t/2+.1,t!==Zi.TEST_VID.playbackRate}catch(t){return!1}},Zi.canOverrideAttributes=function(){if(E)return!1;try{var t=function(){};Object.defineProperty(n.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(n.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(n.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(n.createElement("audio"),"innerHTML",{get:t,set:t})}catch(t){return!1}return!0},Zi.supportsNativeTextTracks=function(){return M||D&&w},Zi.supportsNativeVideoTracks=function(){return!(!Zi.TEST_VID||!Zi.TEST_VID.videoTracks)},Zi.supportsNativeAudioTracks=function(){return!(!Zi.TEST_VID||!Zi.TEST_VID.audioTracks)},Zi.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Zi.prototype.featuresVolumeControl=Zi.canControlVolume(),Zi.prototype.featuresMuteControl=Zi.canMuteVolume(),Zi.prototype.featuresPlaybackRate=Zi.canControlPlaybackRate(),Zi.prototype.featuresSourceset=Zi.canOverrideAttributes(),Zi.prototype.movingMediaElementInDOM=!D,Zi.prototype.featuresFullscreenResize=!0,Zi.prototype.featuresProgressEvents=!0,Zi.prototype.featuresTimeupdateEvents=!0,Zi.prototype.featuresNativeTextTracks=Zi.supportsNativeTextTracks(),Zi.prototype.featuresNativeVideoTracks=Zi.supportsNativeVideoTracks(),Zi.prototype.featuresNativeAudioTracks=Zi.supportsNativeAudioTracks();var $i=Zi.TEST_VID&&Zi.TEST_VID.constructor.prototype.canPlayType,tr=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,er=/^video\/mp4/i;Zi.patchCanPlayType=function(){S>=4&&!y&&!w?Zi.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&tr.test(t)?"maybe":$i.call(this,t)}:T&&(Zi.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&er.test(t)?"maybe":$i.call(this,t)})},Zi.unpatchCanPlayType=function(){var t=Zi.TEST_VID.constructor.prototype.canPlayType;return Zi.TEST_VID.constructor.prototype.canPlayType=$i,t},Zi.patchCanPlayType(),Zi.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},Zi.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),a=e.length;a--;)t.removeChild(e[a]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Zi.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Zi.prototype["set"+de(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(t){Zi.prototype[t]=function(){return this.el_[t]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(t){Zi.prototype["set"+de(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(t){Zi.prototype[t]=function(){return this.el_[t]()}}),ca.withSourceHandlers(Zi),Zi.nativeSourceHandler={},Zi.nativeSourceHandler.canPlayType=function(t){try{return Zi.TEST_VID.canPlayType(t)}catch(t){return""}},Zi.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Zi.nativeSourceHandler.canPlayType(t.type);if(t.src){var a=Ze(t.src);return Zi.nativeSourceHandler.canPlayType("video/"+a)}return""},Zi.nativeSourceHandler.handleSource=function(t,e,a){e.setSrc(t.src)},Zi.nativeSourceHandler.dispose=function(){},Zi.registerSourceHandler(Zi.nativeSourceHandler),ca.registerTech("Html5",Zi);var ar=k(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),ir=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],rr={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},nr=["tiny","xsmall","small","medium","large","xlarge","huge"],or={};nr.forEach(function(t){var e="x"===t.charAt(0)?"x-"+t.substring(1):t;or[t]="vjs-layout-"+e});var sr={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},hr=function(t){function e(a,i,r){if(R(this,e),a.id=a.id||i.id||"vjs_video_"+Mt(),(i=Y(e.getTagSettings(a),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if("function"==typeof a.closest){var n=a.closest("[lang]");n&&n.getAttribute&&(i.language=n.getAttribute("lang"))}else for(var o=a;o&&1===o.nodeType;){if(ct(o).hasOwnProperty("lang")){i.language=o.getAttribute("lang");break}o=o.parentNode}var s=B(this,t.call(this,null,i,r));if(s.log=J(s.id_),s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=a,s.tagAttributes=a&&ct(a),s.language(s.options_.language),i.languages){var h={};Object.getOwnPropertyNames(i.languages).forEach(function(t){h[t.toLowerCase()]=i.languages[t]}),s.languages_=h}else s.languages_=e.prototype.options_.languages;s.cache_={},s.poster_=i.poster||"",s.controls_=!!i.controls,s.cache_.lastVolume=1,a.controls=!1,a.removeAttribute("controls"),a.hasAttribute("autoplay")?s.options_.autoplay=!0:s.autoplay(s.options_.autoplay),s.scrubbing_=!1,s.el_=s.createEl(),s.cache_.lastPlaybackRate=s.defaultPlaybackRate(),ue(s,{eventBusKey:"el_"});var l=Ce(s.options_);if(i.plugins){var c=i.plugins;Object.keys(c).forEach(function(t){if("function"!=typeof this[t])throw new Error('plugin "'+t+'" does not exist');this[t](c[t])},s)}s.options_.playerOptions=l,s.middleware_=[],s.initChildren(),s.isAudio("audio"===a.nodeName.toLowerCase()),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),D||s.addClass("vjs-workinghover"),e.players[s.id_]=s;var f=u.split(".")[0];return s.addClass("vjs-v"+f),s.userActive(!0),s.reportUserActivity(),s.one("play",s.listenForUserActivity_),s.on("fullscreenchange",s.handleFullscreenChange_),s.on("stageclick",s.handleStageClick_),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s.changingSrc_=!1,s.playWaitingForReady_=!1,s.playOnLoadstart_=null,s}return _(e,t),e.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function(t){da[t.id()]=null}(this),t.prototype.dispose.call(this)},e.prototype.createEl=function(){var e=this.tag,a=void 0,i=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),o="video-js"===this.tag.tagName.toLowerCase();i?a=this.el_=e.parentNode:o||(a=this.el_=t.prototype.createEl.call(this,"div"));var s=ct(e);if(o){for(a=this.el_=e,e=this.tag=n.createElement("video");a.children.length;)e.appendChild(a.firstChild);ot(a,"video-js")||st(a,"video-js"),a.appendChild(e),i=this.playerElIngest_=a,["autoplay","controls","crossOrigin","defaultMuted","defaultPlaybackRate","loop","muted","playbackRate","src","volume"].forEach(function(t){void 0!==a[t]&&(e[t]=a[t])})}if(e.setAttribute("tabindex","-1"),s.tabindex="-1",b&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(t){"class"===t?(a.className+=" "+s[t],o&&(e.className+=" "+s[t])):(a.setAttribute(t,s[t]),o&&e.setAttribute(t,s[t]))}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=a.player=this,this.addClass("vjs-paused"),!0!==r.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=qt("vjs-styles-dimensions");var h=Ft(".vjs-styles-defaults"),l=Ft("head");l.insertBefore(this.styleEl_,h?h.nextSibling:l.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var u=e.getElementsByTagName("a"),c=0;c<u.length;c++){var f=u.item(c);st(f,"vjs-hidden"),f.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!i&&e.parentNode.insertBefore(a,e),nt(e,a),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_=a,a},e.prototype.width=function(t){return this.dimension("width",t)},e.prototype.height=function(t){return this.dimension("height",t)},e.prototype.dimension=function(t,e){var a=t+"_";if(void 0===e)return this[a]||0;if(""===e)return this[a]=void 0,void this.updateStyleEl_();var i=parseFloat(e);isNaN(i)?z.error('Improper value "'+e+'" supplied for for '+t):(this[a]=i,this.updateStyleEl_())},e.prototype.fluid=function(t){if(void 0===t)return!!this.fluid_;this.fluid_=!!t,t?(this.addClass("vjs-fluid"),this.fill(!1)):this.removeClass("vjs-fluid"),this.updateStyleEl_()},e.prototype.fill=function(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},e.prototype.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},e.prototype.updateStyleEl_=function(){if(!0!==r.VIDEOJS_NO_DYNAMIC_STYLE){var t=void 0,e=void 0,a=void 0,i=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),n=i[1]/i[0];t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/n:this.videoWidth()||300,e=void 0!==this.height_?this.height_:t*n,a=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(a),Zt(this.styleEl_,"\n      ."+a+" {\n        width: "+t+"px;\n        height: "+e+"px;\n      }\n\n      ."+a+".vjs-fluid {\n        padding-top: "+100*n+"%;\n      }\n    ")}else{var o="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,h=this.tech_&&this.tech_.el();h&&(o>=0&&(h.width=o),s>=0&&(h.height=s))}},e.prototype.loadTech_=function(t,e){var a=this;this.tech_&&this.unloadTech_();var i=de(t),r=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==i&&this.tag&&(ca.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var n={source:e,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};ua.names.forEach(function(t){var e=ua[t];n[e.getterName]=a[e.privateName]}),Y(n,this.options_[i]),Y(n,this.options_[r]),Y(n,this.options_[t.toLowerCase()]),this.tag&&(n.tag=this.tag),e&&e.src===this.cache_.src&&this.cache_.currentTime>0&&(n.startTime=this.cache_.currentTime);var o=ca.getTech(t);if(!o)throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new o(n),this.tech_.ready(Qt(this,this.handleTechReady_),!0),Oe(this.textTracksJson_||[],this.tech_),ir.forEach(function(t){a.on(a.tech_,t,a["handleTech"+de(t)+"_"])}),Object.keys(rr).forEach(function(t){a.on(a.tech_,t,function(e){0===a.tech_.playbackRate()&&a.tech_.seeking()?a.queuedCallbacks_.push({callback:a["handleTech"+rr[t]+"_"].bind(a),event:e}):a["handleTech"+rr[t]+"_"](e)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||nt(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},e.prototype.unloadTech_=function(){var t=this;ua.names.forEach(function(e){var a=ua[e];t[a.privateName]=t[a.getterName]()}),this.textTracksJson_=Ae(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},e.prototype.tech=function(t){return void 0===t&&z.warn(o(ar)),this.tech_},e.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},e.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},e.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused())try{delete this.tag.poster}catch(t){z("deleting tag.poster throws in some browsers",t)}},e.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},e.prototype.manualAutoplay_=function(t){var e=this;if(this.tech_&&"string"==typeof t){var a=function(){var t=e.muted();e.muted(!0);var a=e.play();if(a&&a.then&&a.catch)return a.catch(function(a){e.muted(t)})},i=void 0;if("any"===t?(i=this.play())&&i.then&&i.catch&&i.catch(function(){return a()}):i="muted"===t?a():this.play(),i&&i.then&&i.catch)return i.then(function(){e.trigger({type:"autoplay-success",autoplay:t})}).catch(function(a){e.trigger({type:"autoplay-failure",autoplay:t})})}},e.prototype.updateSourceCaches_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t,a="";"string"!=typeof e&&(e=t.src,a=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],e&&!a&&(a=function(t,e){if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;var a=t.cache_.sources.filter(function(t){return t.src===e});if(a.length)return a[0].type;for(var i=t.$$("source"),r=0;r<i.length;r++){var n=i[r];if(n.type&&n.src&&n.src===e)return n.type}return Ia(e)}(this,e)),this.cache_.source=Ce({},t,{src:e,type:a});for(var i=this.cache_.sources.filter(function(t){return t.src&&t.src===e}),r=[],n=this.$$("source"),o=[],s=0;s<n.length;s++){var h=ct(n[s]);r.push(h),h.src&&h.src===e&&o.push(h.src)}o.length&&!i.length?this.cache_.sources=r:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=e},e.prototype.handleTechSourceset_=function(t){var e=this;if(!this.changingSrc_){var a=function(t){return e.updateSourceCaches_(t)},i=this.currentSource().src,r=t.src;if(i&&!/^blob:/.test(i)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==i)&&(a=function(){}),a(r),!t.src){this.tech_.one(["sourceset","loadstart"],function t(a){if("sourceset"!==a.type){var i=e.techGet("currentSrc");e.lastSource_.tech=i,e.updateSourceCaches_(i)}e.tech_.off(["sourceset","loadstart"],t)})}}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},e.prototype.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},e.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},e.prototype.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},e.prototype.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return t.removeClass("vjs-waiting")})},e.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},e.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},e.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},e.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},e.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},e.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(z.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},e.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},e.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},e.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},e.prototype.handleTechClick_=function(t){wt(t)&&this.controls_&&(this.paused()?Le(this.play()):this.pause())},e.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},e.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},e.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},e.prototype.handleTechTouchEnd_=function(t){t.preventDefault()},e.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},e.prototype.handleStageClick_=function(){this.reportUserActivity()},e.prototype.handleTechFullscreenChange_=function(t,e){e&&this.isFullscreen(e.isFullscreen),this.trigger("fullscreenchange")},e.prototype.handleTechError_=function(){var t=this.tech_.error();this.error(t)},e.prototype.handleTechTextData_=function(){var t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)},e.prototype.getCache=function(){return this.cache_},e.prototype.techCall_=function(t,e){this.ready(function(){if(t in va)return function(t,e,a,i){return e[a](t.reduce(Sa(a),i))}(this.middleware_,this.tech_,t,e);if(t in ga)return ma(this.middleware_,this.tech_,t,e);try{this.tech_&&this.tech_[t](e)}catch(t){throw z(t),t}},!0)},e.prototype.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in Da)return function(t,e,a){return t.reduceRight(Sa(a),e[a]())}(this.middleware_,this.tech_,t);if(t in ga)return ma(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(e){if(void 0===this.tech_[t])throw z("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e),e;if("TypeError"===e.name)throw z("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1,e;throw z(e),e}}},e.prototype.play=function(){var t=this,e=this.options_.Promise||r.Promise;return e?new e(function(e){t.play_(e)}):this.play_()},e.prototype.play_=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le;if(this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return void e(this.techGet_("play"));this.playOnLoadstart_=function(){t.playOnLoadstart_=null,e(t.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready(function(){t.playWaitingForReady_=!1,e(t.play())})}},e.prototype.pause=function(){this.techCall_("pause")},e.prototype.paused=function(){return!1!==this.techGet_("paused")},e.prototype.played=function(){return this.techGet_("played")||ve(0,0)},e.prototype.scrubbing=function(t){if(void 0===t)return this.scrubbing_;this.scrubbing_=!!t,t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},e.prototype.currentTime=function(t){return void 0!==t?(t<0&&(t=0),void this.techCall_("setCurrentTime",t)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},e.prototype.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},e.prototype.remainingTime=function(){return this.duration()-this.currentTime()},e.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},e.prototype.buffered=function(){var t=this.techGet_("buffered");return t&&t.length||(t=ve(0,0)),t},e.prototype.bufferedPercent=function(){return ge(this.buffered(),this.duration())},e.prototype.bufferedEnd=function(){var t=this.buffered(),e=this.duration(),a=t.end(t.length-1);return a>e&&(a=e),a},e.prototype.volume=function(t){var e=void 0;return void 0!==t?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall_("setVolume",e),void(e>0&&this.lastVolume_(e))):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)},e.prototype.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},e.prototype.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},e.prototype.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},e.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},e.prototype.isFullscreen=function(t){if(void 0===t)return!!this.isFullscreen_;this.isFullscreen_=!!t},e.prototype.requestFullscreen=function(){var t=Se;this.isFullscreen(!0),t.requestFullscreen?(Ht(n,t.fullscreenchange,Qt(this,function e(a){this.isFullscreen(n[t.fullscreenElement]),!1===this.isFullscreen()&&Yt(n,t.fullscreenchange,e),this.trigger("fullscreenchange")})),this.el_[t.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},e.prototype.exitFullscreen=function(){var t=Se;this.isFullscreen(!1),t.requestFullscreen?n[t.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},e.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=n.documentElement.style.overflow,Ht(n,"keydown",Qt(this,this.fullWindowOnEscKey)),n.documentElement.style.overflow="hidden",st(n.body,"vjs-full-window"),this.trigger("enterFullWindow")},e.prototype.fullWindowOnEscKey=function(t){27===t.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},e.prototype.exitFullWindow=function(){this.isFullWindow=!1,Yt(n,"keydown",this.fullWindowOnEscKey),n.documentElement.style.overflow=this.docOrigOverflow,ht(n.body,"vjs-full-window"),this.trigger("exitFullWindow")},e.prototype.canPlayType=function(t){for(var e=void 0,a=0,i=this.options_.techOrder;a<i.length;a++){var r=i[a],n=ca.getTech(r);if(n||(n=pe.getComponent(r)),n){if(n.isSupported()&&(e=n.canPlayType(t)))return e}else z.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},e.prototype.selectSource=function(t){var e=this,a=this.options_.techOrder.map(function(t){return[t,ca.getTech(t)]}).filter(function(t){var e=t[0],a=t[1];return a?a.isSupported():(z.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),i=function(t,e,a){var i=void 0;return t.some(function(t){return e.some(function(e){if(i=a(t,e))return!0})}),i},r=function(t,a){var i=t[0];if(t[1].canPlaySource(a,e.options_[i.toLowerCase()]))return{source:a,tech:i}};return(this.options_.sourceOrder?i(t,a,function(t){return function(e,a){return t(a,e)}}(r)):i(a,t,r))||!1},e.prototype.src=function(t){var e=this;if(void 0===t)return this.cache_.src||"";var a=function t(e){if(Array.isArray(e)){var a=[];e.forEach(function(e){e=t(e),Array.isArray(e)?a=a.concat(e):X(e)&&a.push(e)}),e=a}else e="string"==typeof e&&e.trim()?[ya({src:e})]:X(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[ya(e)]:[];return e}(t);a.length?(this.changingSrc_=!0,this.cache_.sources=a,this.updateSourceCaches_(a[0]),pa(this,a[0],function(t,i){if(e.middleware_=i,e.cache_.sources=a,e.updateSourceCaches_(t),e.src_(t))return a.length>1?e.src(a.slice(1)):(e.changingSrc_=!1,e.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void e.triggerReady());!function(t,e){t.forEach(function(t){return t.setTech&&t.setTech(e)})}(i,e.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},e.prototype.src_=function(t){var e=this,a=this.selectSource([t]);return!a||(function(t,e){return de(t)===de(e)}(a.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(a.tech,a.source),this.tech_.ready(function(){e.changingSrc_=!1}),!1))},e.prototype.load=function(){this.techCall_("load")},e.prototype.reset=function(){this.tech_&&this.tech_.clearTracks("text"),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},e.prototype.currentSources=function(){var t=this.currentSource(),e=[];return 0!==Object.keys(t).length&&e.push(t),this.cache_.sources||e},e.prototype.currentSource=function(){return this.cache_.source||{}},e.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},e.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""},e.prototype.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},e.prototype.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var e=void 0;"string"==typeof t&&/(any|play|muted)/.test(t)?(this.options_.autoplay=t,this.manualAutoplay_(t),e=!1):this.options_.autoplay=!!t,e=e||this.options_.autoplay,this.tech_&&this.techCall_("setAutoplay",e)},e.prototype.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},e.prototype.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},e.prototype.poster=function(t){if(void 0===t)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},e.prototype.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},e.prototype.controls=function(t){if(void 0===t)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},e.prototype.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},e.prototype.error=function(t){return void 0===t?this.error_||null:null===t?(this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new Fe(t),this.addClass("vjs-error"),z.error("(CODE:"+this.error_.code+" "+Fe.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},e.prototype.reportUserActivity=function(t){this.userActivity_=!0},e.prototype.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},e.prototype.listenForUserActivity_=function(){var t=void 0,e=void 0,a=void 0,i=Qt(this,this.reportUserActivity);this.on("mousedown",function(){i(),this.clearInterval(t),t=this.setInterval(i,250)}),this.on("mousemove",function(t){t.screenX===e&&t.screenY===a||(e=t.screenX,a=t.screenY,i())}),this.on("mouseup",function(e){i(),this.clearInterval(t)}),this.on("keydown",i),this.on("keyup",i);var r=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(r);var t=this.options_.inactivityTimeout;t<=0||(r=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},t))}},250)},e.prototype.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},e.prototype.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},e.prototype.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},e.prototype.addTextTrack=function(t,e,a){if(this.tech_)return this.tech_.addTextTrack(t,e,a)},e.prototype.addRemoteTextTrack=function(t,e){if(this.tech_)return this.tech_.addRemoteTextTrack(t,e)},e.prototype.removeRemoteTextTrack=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).track,e=void 0===t?arguments[0]:t;if(this.tech_)return this.tech_.removeRemoteTextTrack(e)},e.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},e.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},e.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},e.prototype.language=function(t){if(void 0===t)return this.language_;this.language_=String(t).toLowerCase()},e.prototype.languages=function(){return Ce(e.prototype.options_.languages,this.languages_)},e.prototype.toJSON=function(){var t=Ce(this.options_),e=t.tracks;t.tracks=[];for(var a=0;a<e.length;a++){var i=e[a];(i=Ce(i)).player=void 0,t.tracks[a]=i}return t},e.prototype.createModal=function(t,e){var a=this;(e=e||{}).content=t||"";var i=new Pe(this,e);return this.addChild(i),i.on("dispose",function(){a.removeChild(i)}),i.open(),i},e.prototype.updateCurrentBreakpoint_=function(){if(this.responsive())for(var t=this.currentBreakpoint(),e=this.currentWidth(),a=0;a<nr.length;a++){var i=nr[a];if(e<=this.breakpoints_[i]){if(t===i)return;t&&this.removeClass(or[t]),this.addClass(or[i]),this.breakpoint_=i;break}}},e.prototype.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},e.prototype.breakpoints=function(t){return void 0===t?Y(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Y({},sr,t),this.updateCurrentBreakpoint_(),Y(this.breakpoints_))},e.prototype.responsive=function(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?(this.responsive_=t,t?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0},e.prototype.currentBreakpoint=function(){return this.breakpoint_},e.prototype.currentBreakpointClass=function(){return or[this.breakpoint_]||""},e.getTagSettings=function(t){var e={sources:[],tracks:[]},a=ct(t),i=a["data-setup"];if(ot(t,"vjs-fill")&&(a.fill=!0),ot(t,"vjs-fluid")&&(a.fluid=!0),null!==i){var r=s(i||"{}"),n=r[0],o=r[1];n&&z.error(n),Y(a,o)}if(Y(e,a),t.hasChildNodes())for(var h=t.childNodes,l=0,u=h.length;l<u;l++){var c=h[l],f=c.nodeName.toLowerCase();"source"===f?e.sources.push(ct(c)):"track"===f&&e.tracks.push(ct(c))}return e},e.prototype.flexNotSupported_=function(){var t=n.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},e}(pe);ua.names.forEach(function(t){var e=ua[t];hr.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),hr.players={};var lr=r.navigator;hr.prototype.options_={techOrder:ca.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:lr&&(lr.languages&&lr.languages[0]||lr.userLanguage||lr.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",breakpoints:{},responsive:!1},E||hr.prototype.options_.children.push("resizeManager"),["ended","seeking","seekable","networkState","readyState"].forEach(function(t){hr.prototype[t]=function(){return this.techGet_(t)}}),ir.forEach(function(t){hr.prototype["handleTech"+de(t)+"_"]=function(){return this.trigger(t)}}),pe.registerComponent("Player",hr);var ur={},cr=function(t){return ur.hasOwnProperty(t)},fr=function(t){return cr(t)?ur[t]:void 0},dr=function(t,e){t.activePlugins_=t.activePlugins_||{},t.activePlugins_[e]=!0},Cr=function(t,e,a){var i=(a?"before":"")+"pluginsetup";t.trigger(i,e),t.trigger(i+":"+e.name,e)},pr=function(t,e){return e.prototype.name=t,function(){Cr(this,{name:t,plugin:e,instance:null},!0);for(var a=arguments.length,i=Array(a),r=0;r<a;r++)i[r]=arguments[r];var n=new(Function.prototype.bind.apply(e,[null].concat([this].concat(i))));return this[t]=function(){return n},Cr(this,n.getEventHash()),n}},mr=function(){function t(e){if(R(this,t),this.constructor===t)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,ue(this),delete this.trigger,fe(this,this.constructor.defaultState),dr(e,this.name),this.dispose=Qt(this,this.dispose),e.on("dispose",this.dispose)}return t.prototype.version=function(){return this.constructor.VERSION},t.prototype.getEventHash=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.name=this.name,t.plugin=this.constructor,t.instance=this,t},t.prototype.trigger=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Xt(this.eventBusEl_,t,this.getEventHash(e))},t.prototype.handleStateChanged=function(t){},t.prototype.dispose=function(){var t=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e.activePlugins_[t]=!1,this.player=this.state=null,e[t]=pr(t,ur[t])},t.isBasic=function(e){var a="string"==typeof e?fr(e):e;return"function"==typeof a&&!t.prototype.isPrototypeOf(a.prototype)},t.registerPlugin=function(e,a){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+(void 0===e?"undefined":P(e))+".");if(cr(e))z.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(hr.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof a)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+(void 0===a?"undefined":P(a))+".");return ur[e]=a,"plugin"!==e&&(t.isBasic(a)?hr.prototype[e]=function(t,e){var a=function(){Cr(this,{name:t,plugin:e,instance:null},!0);var a=e.apply(this,arguments);return dr(this,t),Cr(this,{name:t,plugin:e,instance:a}),a};return Object.keys(e).forEach(function(t){a[t]=e[t]}),a}(e,a):hr.prototype[e]=pr(e,a)),a},t.deregisterPlugin=function(t){if("plugin"===t)throw new Error("Cannot de-register base plugin.");cr(t)&&(delete ur[t],delete hr.prototype[t])},t.getPlugins=function(){var t=void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(ur)).forEach(function(e){var a=fr(e);a&&((t=t||{})[e]=a)}),t},t.getPluginVersion=function(t){var e=fr(t);return e&&e.VERSION||""},t}();mr.getPlugin=fr,mr.BASE_PLUGIN_NAME="plugin",mr.registerPlugin("plugin",mr),hr.prototype.usingPlugin=function(t){return!!this.activePlugins_&&!0===this.activePlugins_[t]},hr.prototype.hasPlugin=function(t){return!!cr(t)};"undefined"==typeof HTMLVideoElement&&$()&&(n.createElement("video"),n.createElement("audio"),n.createElement("track"),n.createElement("video-js"));var Dr=function(t){return 0===t.indexOf("#")?t.slice(1):t};function vr(t,e,a){var i=vr.getPlayer(t);if(i)return e&&z.warn('Player "'+t+'" is already initialised. Options will not be applied.'),a&&i.ready(a),i;var r="string"==typeof t?Ft("#"+Dr(t)):t;if(!tt(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");n.body.contains(r)||z.warn("The element supplied is not included in the DOM"),e=e||{},vr.hooks("beforesetup").forEach(function(t){var a=t(r,Ce(e));X(a)&&!Array.isArray(a)?e=Ce(e,a):z.error("please return an object in beforesetup hooks")});var o=pe.getComponent("Player");return i=new o(r,e,a),vr.hooks("setup").forEach(function(t){return t(i)}),i}if(vr.hooks_={},vr.hooks=function(t,e){return vr.hooks_[t]=vr.hooks_[t]||[],e&&(vr.hooks_[t]=vr.hooks_[t].concat(e)),vr.hooks_[t]},vr.hook=function(t,e){vr.hooks(t,e)},vr.hookOnce=function(t,e){vr.hooks(t,[].concat(e).map(function(e){return function a(){return vr.removeHook(t,a),e.apply(void 0,arguments)}}))},vr.removeHook=function(t,e){var a=vr.hooks(t).indexOf(e);return!(a<=-1)&&(vr.hooks_[t]=vr.hooks_[t].slice(),vr.hooks_[t].splice(a,1),!0)},!0!==r.VIDEOJS_NO_DYNAMIC_STYLE&&$()){var gr=Ft(".vjs-styles-defaults");if(!gr){gr=qt("vjs-styles-defaults");var Sr=Ft("head");Sr&&Sr.insertBefore(gr,Sr.firstChild),Zt(gr,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}jt(1,vr),vr.VERSION=u,vr.options=hr.prototype.options_,vr.getPlayers=function(){return hr.players},vr.getPlayer=function(t){var e=hr.players,a=void 0;if("string"==typeof t){var i=Dr(t),r=e[i];if(r)return r;a=Ft("#"+i)}else a=t;if(tt(a)){var n=a,o=n.player,s=n.playerId;if(o||e[s])return o||e[s]}},vr.getAllPlayers=function(){return Object.keys(hr.players).map(function(t){return hr.players[t]}).filter(Boolean)},vr.players=hr.players,vr.getComponent=pe.getComponent,vr.registerComponent=function(t,e){ca.isTech(e)&&z.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),pe.registerComponent.call(pe,t,e)},vr.getTech=ca.getTech,vr.registerTech=ca.registerTech,vr.use=function(t,e){fa[t]=fa[t]||[],fa[t].push(e)},!E&&Object.defineProperty?(Object.defineProperty(vr,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(vr.middleware,"TERMINATOR",{value:Ca,writeable:!1,enumerable:!0})):vr.middleware={TERMINATOR:Ca},vr.browser=N,vr.TOUCH_ENABLED=A,vr.extend=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=function(){t.apply(this,arguments)},i={};for(var r in"object"===(void 0===e?"undefined":P(e))?(e.constructor!==Object.prototype.constructor&&(a=e.constructor),i=e):"function"==typeof e&&(a=e),function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":P(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.super_=e)}(a,t),i)i.hasOwnProperty(r)&&(a.prototype[r]=i[r]);return a},vr.mergeOptions=Ce,vr.bind=Qt,vr.registerPlugin=mr.registerPlugin,vr.deregisterPlugin=mr.deregisterPlugin,vr.plugin=function(t,e){return z.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),mr.registerPlugin(t,e)},vr.getPlugins=mr.getPlugins,vr.getPlugin=mr.getPlugin,vr.getPluginVersion=mr.getPluginVersion,vr.addLanguage=function(t,e){var a;return t=(""+t).toLowerCase(),vr.options.languages=Ce(vr.options.languages,((a={})[t]=e,a)),vr.options.languages[t]},vr.log=z,vr.createLogger=J,vr.createTimeRange=vr.createTimeRanges=ve,vr.formatTime=ka,vr.setFormatTime=function(t){Ba=t},vr.resetFormatTime=function(){Ba=_a},vr.parseUrl=je,vr.isCrossOrigin=Qe,vr.EventTarget=ee,vr.on=Ht,vr.one=Wt,vr.off=Yt,vr.trigger=Xt,vr.xhr=h,vr.TextTrack=aa,vr.AudioTrack=ia,vr.VideoTrack=ra,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){vr[t]=function(){return z.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),bt[t].apply(null,arguments)}}),vr.computedStyle=j,vr.dom=bt,vr.url=$e,t.exports=vr},rNHk:function(t,e,a){var i=a("nAx8"),r=a("n7vu"),n=a("CYMq"),o=a("0WpP"),s=a("+WSI");t.exports=function(t,e){var a=1==t,h=2==t,l=3==t,u=4==t,c=6==t,f=5==t||c,d=e||s;return function(e,s,C){for(var p,m,D=n(e),v=r(D),g=i(s,C,3),S=o(v.length),T=0,I=a?d(e,S):h?d(e,0):void 0;S>T;T++)if((f||T in v)&&(m=g(p=v[T],T,D),t))if(a)I[T]=m;else if(m)switch(t){case 3:return!0;case 5:return p;case 6:return T;case 2:I.push(p)}else if(u)return!1;return c?-1:l||u?u:I}}},rdj4:function(t,e,a){"use strict";var i=a("GhSp").f,r=a("b08l"),n=a("iZ5/"),o=a("nAx8"),s=a("ukM9"),h=a("wlNh"),l=a("OTpG"),u=a("6jRP"),c=a("va3J"),f=a("C61u"),d=a("40oJ").fastKey,C=a("JAUQ"),p=f?"_s":"size",m=function(t,e){var a,i=d(e);if("F"!==i)return t._i[i];for(a=t._f;a;a=a.n)if(a.k==e)return a};t.exports={getConstructor:function(t,e,a,l){var u=t(function(t,i){s(t,u,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[p]=0,void 0!=i&&h(i,a,t[l],t)});return n(u.prototype,{clear:function(){for(var t=C(this,e),a=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete a[i.i];t._f=t._l=void 0,t[p]=0},delete:function(t){var a=C(this,e),i=m(a,t);if(i){var r=i.n,n=i.p;delete a._i[i.i],i.r=!0,n&&(n.n=r),r&&(r.p=n),a._f==i&&(a._f=r),a._l==i&&(a._l=n),a[p]--}return!!i},forEach:function(t){C(this,e);for(var a,i=o(t,arguments.length>1?arguments[1]:void 0,3);a=a?a.n:this._f;)for(i(a.v,a.k,this);a&&a.r;)a=a.p},has:function(t){return!!m(C(this,e),t)}}),f&&i(u.prototype,"size",{get:function(){return C(this,e)[p]}}),u},def:function(t,e,a){var i,r,n=m(t,e);return n?n.v=a:(t._l=n={i:r=d(e,!0),k:e,v:a,p:i=t._l,n:void 0,r:!1},t._f||(t._f=n),i&&(i.n=n),t[p]++,"F"!==r&&(t._i[r]=n)),t},getEntry:m,setStrong:function(t,e,a){l(t,e,function(t,a){this._t=C(t,e),this._k=a,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?u(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,u(1))},a?"entries":"values",!a,!0),c(e)}}},rfXi:function(t,e,a){t.exports={default:a("myGB"),__esModule:!0}},rmlV:function(t,e,a){var i=a("y+Vt").extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(t,e){var a=.5522848,i=e.cx,r=e.cy,n=e.rx,o=e.ry,s=n*a,h=o*a;t.moveTo(i-n,r),t.bezierCurveTo(i-n,r-h,i-s,r-o,i,r-o),t.bezierCurveTo(i+s,r-o,i+n,r-h,i+n,r),t.bezierCurveTo(i+n,r+h,i+s,r+o,i,r+o),t.bezierCurveTo(i-s,r+o,i-n,r+h,i-n,r),t.closePath()}});t.exports=i},rySg:function(t,e,a){a("SMc4"),a("8nMs")},s2er:function(t,e,a){var i=a("VSTI"),r=a("7whZ"),n=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:a("5ETA")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},s3Ml:function(t,e,a){t.exports={default:a("QRdY"),__esModule:!0}},"sK/D":function(t,e,a){var i=a("IwbS"),r=a("OELB").round;function n(t,e,a){var r=t.getArea(),n=t.getBaseAxis().isHorizontal(),o=r.x,s=r.y,h=r.width,l=r.height,u=a.get("lineStyle.width")||2;o-=u/2,s-=u/2,h+=u,l+=u,o=Math.floor(o),h=Math.round(h);var c=new i.Rect({shape:{x:o,y:s,width:h,height:l}});return e&&(c.shape[n?"width":"height"]=0,i.initProps(c,{shape:{width:h,height:l}},a)),c}function o(t,e,a){var n=t.getArea(),o=new i.Sector({shape:{cx:r(t.cx,1),cy:r(t.cy,1),r0:r(n.r0,1),r:r(n.r,1),startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});return e&&(o.shape.endAngle=n.startAngle,i.initProps(o,{shape:{endAngle:n.endAngle}},a)),o}e.createGridClipPath=n,e.createPolarClipPath=o,e.createClipPath=function(t,e,a){return t?"polar"===t.type?o(t,e,a):"cartesian2d"===t.type?n(t,e,a):null:null}},"sS/r":function(t,e,a){var i=a("4fz+"),r=a("iRjW"),n=a("Yl7c"),o=function(){this.group=new i,this.uid=r.getUID("viewComponent")},s=o.prototype={constructor:o,init:function(t,e){},render:function(t,e,a,i){},dispose:function(){},filterForExposedEvent:null};s.updateView=s.updateLayout=s.updateVisual=function(t,e,a,i){},n.enableClassExtend(o),n.enableClassManagement(o,{registerWhenExtend:!0});var h=o;t.exports=h},sbOA:function(t,e,a){var i=a("d+lc"),r=a("I90/");t.exports=a("VSTI").getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},sdST:function(t,e,a){var i=a("hi0g");t.exports=function(t,e){return i((e=e||{}).coordDimensions||[],t,{dimsDef:e.dimensionsDefine||t.dimensionsDefine,encodeDef:e.encodeDefine||t.encodeDefine,dimCount:e.dimensionsCount,encodeDefaulter:e.encodeDefaulter,generateCoord:e.generateCoord,generateCoordCount:e.generateCoordCount})}},sk9p:function(t,e,a){"use strict";e.__esModule=!0;var i=n(a("k/8l")),r=n(a("FyfS"));function n(t){return t&&t.__esModule?t:{default:t}}e.default=function(){return function(t,e){if(Array.isArray(t))return t;if((0,i.default)(Object(t)))return function(t,e){var a=[],i=!0,n=!1,o=void 0;try{for(var s,h=(0,r.default)(t);!(i=(s=h.next()).done)&&(a.push(s.value),!e||a.length!==e);i=!0);}catch(t){n=!0,o=t}finally{try{!i&&h.return&&h.return()}finally{if(n)throw o}}return a}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},"t/pG":function(t,e,a){var i=a("VSTI"),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},tQ2B:function(t,e,a){"use strict";var i=a("xTJ+"),r=a("Rn+g"),n=a("MLWZ"),o=a("g7np"),s=a("w0Vi"),h=a("OTTw"),l=a("LYNF");t.exports=function(t){return new Promise(function(e,u){var c=t.data,f=t.headers;i.isFormData(c)&&delete f["Content-Type"];var d=new XMLHttpRequest;if(t.auth){var C=t.auth.username||"",p=t.auth.password||"";f.Authorization="Basic "+btoa(C+":"+p)}var m=o(t.baseURL,t.url);if(d.open(t.method.toUpperCase(),n(m,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var a="getAllResponseHeaders"in d?s(d.getAllResponseHeaders()):null,i={data:t.responseType&&"text"!==t.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:a,config:t,request:d};r(e,u,i),d=null}},d.onabort=function(){d&&(u(l("Request aborted",t,"ECONNABORTED",d)),d=null)},d.onerror=function(){u(l("Network Error",t,null,d)),d=null},d.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),u(l(e,t,"ECONNABORTED",d)),d=null},i.isStandardBrowserEnv()){var D=a("eqyj"),v=(t.withCredentials||h(m))&&t.xsrfCookieName?D.read(t.xsrfCookieName):void 0;v&&(f[t.xsrfHeaderName]=v)}if("setRequestHeader"in d&&i.forEach(f,function(t,e){void 0===c&&"content-type"===e.toLowerCase()?delete f[e]:d.setRequestHeader(e,t)}),i.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),t.responseType)try{d.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&d.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){d&&(d.abort(),u(t),d=null)}),void 0===c&&(c=null),d.send(c)})}},tceW:function(t,e,a){var i=a("KCsZ")([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),r={getBarItemStyle:function(t){var e=i(this,t);if(this.getBorderLineDash){var a=this.getBorderLineDash();a&&(e.lineDash=a)}return e}};t.exports=r},txkQ:function(t,e,a){var i=a("aX58");e.zrender=i;var r=a("Fofx");e.matrix=r;var n=a("QBsz");e.vector=n;var o=a("bYtY"),s=a("Qe9p");e.color=s;var h=a("IwbS"),l=a("OELB");e.number=l;var u=a("7aKB");e.format=u;var c=a("iLNv");c.throttle;e.throttle=c.throttle;var f=a("FUi9");e.helper=f;var d=a("vafp");e.parseGeoJSON=d;var C=a("YXkt");e.List=C;var p=a("Qxkt");e.Model=p;var m=a("hM6l");e.Axis=m;var D=a("ItGF");e.env=D;var v=d,g={};o.each(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(t){g[t]=o[t]});var S={};o.each(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(t){S[t]=h[t]}),e.parseGeoJson=v,e.util=g,e.graphic=S},u4eC:function(t,e){!function(e){"use strict";var a,i=Object.prototype,r=i.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",h=n.toStringTag||"@@toStringTag",l="object"==typeof t,u=e.regeneratorRuntime;if(u)l&&(t.exports=u);else{(u=e.regeneratorRuntime=l?t.exports:{}).wrap=S;var c="suspendedStart",f="suspendedYield",d="executing",C="completed",p={},m={};m[o]=function(){return this};var D=Object.getPrototypeOf,v=D&&D(D(A([])));v&&v!==i&&r.call(v,o)&&(m=v);var g=x.prototype=I.prototype=Object.create(m);y.prototype=g.constructor=x,x.constructor=y,x[h]=y.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,h in t||(t[h]="GeneratorFunction")),t.prototype=Object.create(g),t},u.awrap=function(t){return{__await:t}},w(F.prototype),F.prototype[s]=function(){return this},u.AsyncIterator=F,u.async=function(t,e,a,i){var r=new F(S(t,e,a,i));return u.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},w(g),g[h]="Generator",g[o]=function(){return this},g.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var a in t)e.push(a);return e.reverse(),function a(){for(;e.length;){var i=e.pop();if(i in t)return a.value=i,a.done=!1,a}return a.done=!0,a}},u.values=A,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,r){return s.type="throw",s.arg=t,e.next=i,r&&(e.method="next",e.arg=a),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var h=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(h&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(h){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=t,o.arg=e,n?(this.method="next",this.next=n.finallyLoc,p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),L(a),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var i=a.completion;if("throw"===i.type){var r=i.arg;L(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:A(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=a),p}}}function S(t,e,a,i){var r=e&&e.prototype instanceof I?e:I,n=Object.create(r.prototype),o=new M(i||[]);return n._invoke=function(t,e,a){var i=c;return function(r,n){if(i===d)throw new Error("Generator is already running");if(i===C){if("throw"===r)throw n;return O()}for(a.method=r,a.arg=n;;){var o=a.delegate;if(o){var s=E(o,a);if(s){if(s===p)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===c)throw i=C,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=d;var h=T(t,e,a);if("normal"===h.type){if(i=a.done?C:f,h.arg===p)continue;return{value:h.arg,done:a.done}}"throw"===h.type&&(i=C,a.method="throw",a.arg=h.arg)}}}(t,a,o),n}function T(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(t){return{type:"throw",arg:t}}}function I(){}function y(){}function x(){}function w(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function F(t){var e;this._invoke=function(a,i){function n(){return new Promise(function(e,n){!function e(a,i,n,o){var s=T(t[a],t,i);if("throw"!==s.type){var h=s.arg,l=h.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,n,o)},function(t){e("throw",t,n,o)}):Promise.resolve(l).then(function(t){h.value=t,n(h)},o)}o(s.arg)}(a,i,e,n)})}return e=e?e.then(n,n):n()}}function E(t,e){var i=t.iterator[e.method];if(i===a){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=a,E(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=T(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var n=r.arg;return n?n.done?(e[t.resultName]=n.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=a),e.delegate=null,p):n:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function A(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=a,e.done=!0,e};return n.next=n}}return{next:O}}function O(){return{value:a,done:!0}}}(function(){return this}()||Function("return this")())},uAnK:function(t,e,a){var i=a("bYtY"),r=a("Kagy"),n=a("KxfA").retrieveRawValue;t.exports=function(t,e){var a=e.getModel("aria");if(a.get("show"))if(a.get("description"))t.setAttribute("aria-label",a.get("description"));else{var o=0;e.eachSeries(function(t,e){++o},this);var s,h=a.get("data.maxCount")||10,l=a.get("series.maxCount")||10,u=Math.min(o,l);if(!(o<1)){var c=function(){var t=e.getModel("title").option;return t&&t.length&&(t=t[0]),t&&t.text}();s=c?d(C("general.withTitle"),{title:c}):C("general.withoutTitle");var f=[];s+=d(C(o>1?"series.multiple.prefix":"series.single.prefix"),{seriesCount:o}),e.eachSeries(function(t,e){if(e<u){var a,i=t.get("name"),s="series."+(o>1?"multiple":"single")+".";a=d(a=C(i?s+"withName":s+"withoutName"),{seriesId:t.seriesIndex,seriesName:t.get("name"),seriesType:function(t){return r.series.typeNames[t]||"自定义图"}(t.subType)});var l=t.getData();window.data=l,l.count()>h?a+=d(C("data.partialData"),{displayCnt:h}):a+=C("data.allData");for(var c=[],p=0;p<l.count();p++)if(p<h){var m=l.getName(p),D=n(l,p);c.push(d(C(m?"data.withName":"data.withoutName"),{name:m,value:D}))}a+=c.join(C("data.separator.middle"))+C("data.separator.end"),f.push(a)}}),s+=f.join(C("series.multiple.separator.middle"))+C("series.multiple.separator.end"),t.setAttribute("aria-label",s)}}function d(t,e){if("string"!=typeof t)return t;var a=t;return i.each(e,function(t,e){a=a.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)}),a}function C(t){var e=a.get(t);if(null==e){for(var i=t.split("."),n=r.aria,o=0;o<i.length;++o)n=n[i[o]];return n}return e}}},uI94:function(t,e,a){a("6dzq"),t.exports=a("VSTI").Math.log10},uccp:function(t,e,a){a("5Qd4"),t.exports=a("VSTI").Object.assign},ugGH:function(t,e,a){t.exports=a("BRsN")},ukM9:function(t,e){t.exports=function(t,e,a,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(a+": incorrect invocation!");return t}},vDqi:function(t,e,a){t.exports=a("zuR4")},vNbC:function(t,e,a){a("du/1");var i=a("VSTI").Object;t.exports=function(t,e){return i.create(t,e)}},vOBO:function(t,e,a){var i,r,n,o=a("nAx8"),s=a("Temt"),h=a("kUGv"),l=a("BfU5"),u=a("7whZ"),c=u.process,f=u.setImmediate,d=u.clearImmediate,C=u.MessageChannel,p=u.Dispatch,m=0,D={},v=function(){var t=+this;if(D.hasOwnProperty(t)){var e=D[t];delete D[t],e()}},g=function(t){v.call(t.data)};f&&d||(f=function(t){for(var e=[],a=1;arguments.length>a;)e.push(arguments[a++]);return D[++m]=function(){s("function"==typeof t?t:Function(t),e)},i(m),m},d=function(t){delete D[t]},"process"==a("TYje")(c)?i=function(t){c.nextTick(o(v,t,1))}:p&&p.now?i=function(t){p.now(o(v,t,1))}:C?(n=(r=new C).port2,r.port1.onmessage=g,i=o(n.postMessage,n,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(t){u.postMessage(t+"","*")},u.addEventListener("message",g,!1)):i="onreadystatechange"in l("script")?function(t){h.appendChild(l("script")).onreadystatechange=function(){h.removeChild(this),v.call(t)}}:function(t){setTimeout(o(v,t,1),0)}),t.exports={set:f,clear:d}},vWvF:function(t,e,a){var i=a("Bq2U"),r=a("SUKs"),n=a("bYtY"),o=n.isString,s=n.isFunction,h=n.isObject,l=n.isArrayLike,u=n.indexOf,c=function(){this.animators=[]};function f(t,e,a,i,r,n,u,c){o(i)?(n=r,r=i,i=0):s(r)?(n=r,r="linear",i=0):s(i)?(n=i,i=0):s(a)?(n=a,a=500):a||(a=500),t.stopAnimation(),function t(e,a,i,r,n,o,s){var u={};var c=0;for(var f in r)r.hasOwnProperty(f)&&(null!=i[f]?h(r[f])&&!l(r[f])?t(e,a?a+"."+f:f,i[f],r[f],n,o,s):(s?(u[f]=i[f],d(e,a,f,r[f])):u[f]=r[f],c++):null==r[f]||s||d(e,a,f,r[f]));c>0&&e.animate(a,!1).when(null==n?500:n,u).delay(o||0)}(t,"",t,e,a,i,c);var f=t.animators.slice(),C=f.length;function p(){--C||n&&n()}C||n&&n();for(var m=0;m<f.length;m++)f[m].done(p).start(r,u)}function d(t,e,a,i){if(e){var r={};r[e]={},r[e][a]=i,t.attr(r)}else t.attr(a,i)}c.prototype={constructor:c,animate:function(t,e){var a,n=!1,o=this,s=this.__zr;if(t){var h=t.split("."),l=o;n="shape"===h[0];for(var c=0,f=h.length;c<f;c++)l&&(l=l[h[c]]);l&&(a=l)}else a=o;if(a){var d=o.animators,C=new i(a,e);return C.during(function(t){o.dirty(n)}).done(function(){d.splice(u(d,C),1)}),d.push(C),s&&s.animation.addAnimator(C),C}r('Property "'+t+'" is not existed in element '+o.id)},stopAnimation:function(t){for(var e=this.animators,a=e.length,i=0;i<a;i++)e[i].stop(t);return e.length=0,this},animateTo:function(t,e,a,i,r,n){f(this,t,e,a,i,r,n)},animateFrom:function(t,e,a,i,r,n){f(this,t,e,a,i,r,n,!0)}};var C=c;t.exports=C},vZI5:function(t,e,a){var i=a("bYtY"),r=a("T4UG"),n=a("5GhG").seriesModelMixin,o=r.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(t,e,a){var i=e.getItemLayout(t);return i&&a.rect(i.brushRect)}});i.mixin(o,n,!0);var s=o;t.exports=s},va3J:function(t,e,a){"use strict";var i=a("7whZ"),r=a("VSTI"),n=a("GhSp"),o=a("C61u"),s=a("zBWt")("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:i[t];o&&e&&!e[s]&&n.f(e,s,{configurable:!0,get:function(){return this}})}},vafp:function(t,e,a){var i=a("bYtY"),r=a("8nly");function n(t,e,a){for(var i=[],r=e[0],n=e[1],o=0;o<t.length;o+=2){var s=t.charCodeAt(o)-64,h=t.charCodeAt(o+1)-64;s=s>>1^-(1&s),h=h>>1^-(1&h),r=s+=r,n=h+=n,i.push([s/a,h/a])}return i}t.exports=function(t,e){return function(t){if(!t.UTF8Encoding)return t;var e=t.UTF8Scale;null==e&&(e=1024);for(var a=t.features,i=0;i<a.length;i++)for(var r=a[i].geometry,o=r.coordinates,s=r.encodeOffsets,h=0;h<o.length;h++){var l=o[h];if("Polygon"===r.type)o[h]=n(l,s[h],e);else if("MultiPolygon"===r.type)for(var u=0;u<l.length;u++){var c=l[u];l[u]=n(c,s[h][u],e)}}t.UTF8Encoding=!1}(t),i.map(i.filter(t.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var a=t.properties,n=t.geometry,o=n.coordinates,s=[];"Polygon"===n.type&&s.push({type:"polygon",exterior:o[0],interiors:o.slice(1)}),"MultiPolygon"===n.type&&i.each(o,function(t){t[0]&&s.push({type:"polygon",exterior:t[0],interiors:t.slice(1)})});var h=new r(a[e||"name"],s,a.cp);return h.properties=a,h})}},w0Vi:function(t,e,a){"use strict";var i=a("xTJ+"),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,a,n,o={};return t?(i.forEach(t.split("\n"),function(t){if(n=t.indexOf(":"),e=i.trim(t.substr(0,n)).toLowerCase(),a=i.trim(t.substr(n+1)),e){if(o[e]&&r.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([a]):o[e]?o[e]+", "+a:a}}),o):o}},wJiJ:function(t,e,a){t.exports=a("1K8p")},wYM1:function(t,e,a){var i=a("USwo");i(i.S+i.F*!a("C61u"),"Object",{defineProperty:a("GhSp").f})},wlNh:function(t,e,a){var i=a("nAx8"),r=a("xMGN"),n=a("bS86"),o=a("d+lc"),s=a("0WpP"),h=a("I90/"),l={},u={};(e=t.exports=function(t,e,a,c,f){var d,C,p,m,D=f?function(){return t}:h(t),v=i(a,c,e?2:1),g=0;if("function"!=typeof D)throw TypeError(t+" is not iterable!");if(n(D)){for(d=s(t.length);d>g;g++)if((m=e?v(o(C=t[g])[0],C[1]):v(t[g]))===l||m===u)return m}else for(p=D.call(t);!(C=p.next()).done;)if((m=r(p,v,C.value,e))===l||m===u)return m}).BREAK=l,e.RETURN=u},wqPz:function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},wr5s:function(t,e,a){var i=(0,a("IwbS").extendShape)({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(t,e){var a=e.cx,i=e.cy,r=Math.max(e.r0||0,0),n=Math.max(e.r,0),o=.5*(n-r),s=r+o,h=e.startAngle,l=e.endAngle,u=e.clockwise,c=Math.cos(h),f=Math.sin(h),d=Math.cos(l),C=Math.sin(l);(u?l-h<2*Math.PI:h-l<2*Math.PI)&&(t.moveTo(c*r+a,f*r+i),t.arc(c*s+a,f*s+i,o,-Math.PI+h,h,!u)),t.arc(a,i,n,h,l,!u),t.moveTo(d*n+a,C*n+i),t.arc(d*s+a,C*s+i,o,l-2*Math.PI,l-Math.PI,!u),0!==r&&(t.arc(a,i,r,l,h,u),t.moveTo(c*r+a,C*r+i)),t.closePath()}});t.exports=i},x3X8:function(t,e,a){var i=a("KxfA").retrieveRawValue;e.getDefaultLabel=function(t,e){var a=t.mapDimension("defaultedLabel",!0),r=a.length;if(1===r)return i(t,e,a[0]);if(r){for(var n=[],o=0;o<a.length;o++){var s=i(t,e,a[o]);n.push(s)}return n.join(" ")}}},x6Kt:function(t,e,a){var i=a("y+Vt"),r=a("VpOo"),n=a("nPnh").subPixelOptimizeRect,o={},s=i.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var a,i,s,h;this.subPixelOptimize?(n(o,e,this.style),a=o.x,i=o.y,s=o.width,h=o.height,o.r=e.r,e=o):(a=e.x,i=e.y,s=e.width,h=e.height),e.r?r.buildPath(t,e):t.rect(a,i,s,h),t.closePath()}});t.exports=s},xAGQ:function(t,e,a){"use strict";var i=a("xTJ+");t.exports=function(t,e,a){return i.forEach(a,function(a){t=a(t,e)}),t}},xMGN:function(t,e,a){var i=a("d+lc");t.exports=function(t,e,a,r){try{return r?e(i(a)[0],a[1]):e(a)}catch(e){var n=t.return;throw void 0!==n&&i(n.call(t)),e}}},"xTJ+":function(t,e,a){"use strict";var i=a("HSsa"),r=Object.prototype.toString;function n(t){return"[object Array]"===r.call(t)}function o(t){return void 0===t}function s(t){return null!==t&&"object"==typeof t}function h(t){return"[object Function]"===r.call(t)}function l(t,e){if(null!==t&&void 0!==t)if("object"!=typeof t&&(t=[t]),n(t))for(var a=0,i=t.length;a<i;a++)e.call(null,t[a],a,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}t.exports={isArray:n,isArrayBuffer:function(t){return"[object ArrayBuffer]"===r.call(t)},isBuffer:function(t){return null!==t&&!o(t)&&null!==t.constructor&&!o(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isUndefined:o,isDate:function(t){return"[object Date]"===r.call(t)},isFile:function(t){return"[object File]"===r.call(t)},isBlob:function(t){return"[object Blob]"===r.call(t)},isFunction:h,isStream:function(t){return s(t)&&h(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function t(){var e={};function a(a,i){"object"==typeof e[i]&&"object"==typeof a?e[i]=t(e[i],a):e[i]=a}for(var i=0,r=arguments.length;i<r;i++)l(arguments[i],a);return e},deepMerge:function t(){var e={};function a(a,i){"object"==typeof e[i]&&"object"==typeof a?e[i]=t(e[i],a):e[i]="object"==typeof a?t({},a):a}for(var i=0,r=arguments.length;i<r;i++)l(arguments[i],a);return e},extend:function(t,e,a){return l(e,function(e,r){t[r]=a&&"function"==typeof e?i(e,a):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},xTNl:function(t,e){var a=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],i={color:a,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],a]};t.exports=i},xXl2:function(t,e,a){"use strict";var i,r,n,o,s=a("5ETA"),h=a("7whZ"),l=a("nAx8"),u=a("aqg2"),c=a("USwo"),f=a("ekG2"),d=a("FgkJ"),C=a("ukM9"),p=a("wlNh"),m=a("2zfi"),D=a("vOBO").set,v=a("jssz")(),g=a("8sL3"),S=a("wqPz"),T=a("jlxs"),I=a("JKKi"),y=h.TypeError,x=h.process,w=x&&x.versions,F=w&&w.v8||"",E=h.Promise,b="process"==u(x),L=function(){},M=r=g.f,A=!!function(){try{var t=E.resolve(1),e=(t.constructor={})[a("zBWt")("species")]=function(t){t(L,L)};return(b||"function"==typeof PromiseRejectionEvent)&&t.then(L)instanceof e&&0!==F.indexOf("6.6")&&-1===T.indexOf("Chrome/66")}catch(t){}}(),O=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},N=function(t,e){if(!t._n){t._n=!0;var a=t._c;v(function(){for(var i=t._v,r=1==t._s,n=0,o=function(e){var a,n,o,s=r?e.ok:e.fail,h=e.resolve,l=e.reject,u=e.domain;try{s?(r||(2==t._h&&_(t),t._h=1),!0===s?a=i:(u&&u.enter(),a=s(i),u&&(u.exit(),o=!0)),a===e.promise?l(y("Promise-chain cycle")):(n=O(a))?n.call(a,h,l):h(a)):l(i)}catch(t){u&&!o&&u.exit(),l(t)}};a.length>n;)o(a[n++]);t._c=[],t._n=!1,e&&!t._h&&P(t)})}},P=function(t){D.call(h,function(){var e,a,i,r=t._v,n=R(t);if(n&&(e=S(function(){b?x.emit("unhandledRejection",r,t):(a=h.onunhandledrejection)?a({promise:t,reason:r}):(i=h.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=b||R(t)?2:1),t._a=void 0,n&&e.e)throw e.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},_=function(t){D.call(h,function(){var e;b?x.emit("rejectionHandled",t):(e=h.onrejectionhandled)&&e({promise:t,reason:t._v})})},B=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),N(e,!0))},k=function(t){var e,a=this;if(!a._d){a._d=!0,a=a._w||a;try{if(a===t)throw y("Promise can't be resolved itself");(e=O(t))?v(function(){var i={_w:a,_d:!1};try{e.call(t,l(k,i,1),l(B,i,1))}catch(t){B.call(i,t)}}):(a._v=t,a._s=1,N(a,!1))}catch(t){B.call({_w:a,_d:!1},t)}}};A||(E=function(t){C(this,E,"Promise","_h"),d(t),i.call(this);try{t(l(k,this,1),l(B,this,1))}catch(t){B.call(this,t)}},(i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=a("iZ5/")(E.prototype,{then:function(t,e){var a=M(m(this,E));return a.ok="function"!=typeof t||t,a.fail="function"==typeof e&&e,a.domain=b?x.domain:void 0,this._c.push(a),this._a&&this._a.push(a),this._s&&N(this,!1),a.promise},catch:function(t){return this.then(void 0,t)}}),n=function(){var t=new i;this.promise=t,this.resolve=l(k,t,1),this.reject=l(B,t,1)},g.f=M=function(t){return t===E||t===o?new n(t):r(t)}),c(c.G+c.W+c.F*!A,{Promise:E}),a("kvAF")(E,"Promise"),a("va3J")("Promise"),o=a("VSTI").Promise,c(c.S+c.F*!A,"Promise",{reject:function(t){var e=M(this);return(0,e.reject)(t),e.promise}}),c(c.S+c.F*(s||!A),"Promise",{resolve:function(t){return I(s&&this===o?E:this,t)}}),c(c.S+c.F*!(A&&a("h3Hq")(function(t){E.all(t).catch(L)})),"Promise",{all:function(t){var e=this,a=M(e),i=a.resolve,r=a.reject,n=S(function(){var a=[],n=0,o=1;p(t,!1,function(t){var s=n++,h=!1;a.push(void 0),o++,e.resolve(t).then(function(t){h||(h=!0,a[s]=t,--o||i(a))},r)}),--o||i(a)});return n.e&&r(n.v),a.promise},race:function(t){var e=this,a=M(e),i=a.reject,r=S(function(){p(t,!1,function(t){e.resolve(t).then(a.resolve,i)})});return r.e&&i(r.v),a.promise}})},xfML:function(t,e,a){var i=a("USwo");i(i.S,"Object",{setPrototypeOf:a("DrT7").set})},"y+Vt":function(t,e,a){var i=a("Gev7"),r=a("bYtY"),n=a("IMiH"),o=a("2DNl"),s=a("3C/r").prototype.getCanvasPattern,h=Math.abs,l=new n(!0);function u(t){i.call(this,t),this.path=null}u.prototype={constructor:u,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(t,e){var a,i=this.style,r=this.path||l,n=i.hasStroke(),o=i.hasFill(),h=i.fill,u=i.stroke,c=o&&!!h.colorStops,f=n&&!!u.colorStops,d=o&&!!h.image,C=n&&!!u.image;(i.bind(t,this,e),this.setTransform(t),this.__dirty)&&(c&&(a=a||this.getBoundingRect(),this._fillGradient=i.getGradient(t,h,a)),f&&(a=a||this.getBoundingRect(),this._strokeGradient=i.getGradient(t,u,a)));c?t.fillStyle=this._fillGradient:d&&(t.fillStyle=s.call(h,t)),f?t.strokeStyle=this._strokeGradient:C&&(t.strokeStyle=s.call(u,t));var p=i.lineDash,m=i.lineDashOffset,D=!!t.setLineDash,v=this.getGlobalScale();if(r.setScale(v[0],v[1],this.segmentIgnoreThreshold),this.__dirtyPath||p&&!D&&n?(r.beginPath(t),p&&!D&&(r.setLineDash(p),r.setLineDashOffset(m)),this.buildPath(r,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),o)if(null!=i.fillOpacity){var g=t.globalAlpha;t.globalAlpha=i.fillOpacity*i.opacity,r.fill(t),t.globalAlpha=g}else r.fill(t);if(p&&D&&(t.setLineDash(p),t.lineDashOffset=m),n)if(null!=i.strokeOpacity){g=t.globalAlpha;t.globalAlpha=i.strokeOpacity*i.opacity,r.stroke(t),t.globalAlpha=g}else r.stroke(t);p&&D&&t.setLineDash([]),null!=i.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))},buildPath:function(t,e,a){},createPathProxy:function(){this.path=new n},getBoundingRect:function(){var t=this._rect,e=this.style,a=!t;if(a){var i=this.path;i||(i=this.path=new n),this.__dirtyPath&&(i.beginPath(),this.buildPath(i,this.shape,!1)),t=i.getBoundingRect()}if(this._rect=t,e.hasStroke()){var r=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||a){r.copy(t);var o=e.lineWidth,s=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(o=Math.max(o,this.strokeContainThreshold||4)),s>1e-10&&(r.width+=o/s,r.height+=o/s,r.x-=o/s/2,r.y-=o/s/2)}return r}return t},contain:function(t,e){var a=this.transformCoordToLocal(t,e),i=this.getBoundingRect(),r=this.style;if(t=a[0],e=a[1],i.contain(t,e)){var n=this.path.data;if(r.hasStroke()){var s=r.lineWidth,h=r.strokeNoScale?this.getLineScale():1;if(h>1e-10&&(r.hasFill()||(s=Math.max(s,this.strokeContainThreshold)),o.containStroke(n,s/h,t,e)))return!0}if(r.hasFill())return o.contain(n,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):i.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var a=this.shape;if(a){if(r.isObject(t))for(var i in t)t.hasOwnProperty(i)&&(a[i]=t[i]);else a[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&h(t[0]-1)>1e-10&&h(t[3]-1)>1e-10?Math.sqrt(h(t[0]*t[3]-t[2]*t[1])):1}},u.extend=function(t){var e=function(e){u.call(this,e),t.style&&this.style.extendFrom(t.style,!1);var a=t.shape;if(a){this.shape=this.shape||{};var i=this.shape;for(var r in a)!i.hasOwnProperty(r)&&a.hasOwnProperty(r)&&(i[r]=a[r])}t.init&&t.init.call(this,e)};for(var a in r.inherits(e,u),t)"style"!==a&&"shape"!==a&&(e.prototype[a]=t[a]);return e},r.inherits(u,i);var c=u;t.exports=c},"y+lR":function(t,e,a){var i=a("bYtY"),r=a("mFDi"),n=a("z35g");function o(t){n.call(this,t)}o.prototype={constructor:o,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(t){var e=this.getAxis("x"),a=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&a.contain(a.toLocalCoord(t[1]))},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},dataToPoint:function(t,e,a){var i=this.getAxis("x"),r=this.getAxis("y");return(a=a||[])[0]=i.toGlobalCoord(i.dataToCoord(t[0])),a[1]=r.toGlobalCoord(r.dataToCoord(t[1])),a},clampData:function(t,e){var a=this.getAxis("x").scale,i=this.getAxis("y").scale,r=a.getExtent(),n=i.getExtent(),o=a.parse(t[0]),s=i.parse(t[1]);return(e=e||[])[0]=Math.min(Math.max(Math.min(r[0],r[1]),o),Math.max(r[0],r[1])),e[1]=Math.min(Math.max(Math.min(n[0],n[1]),s),Math.max(n[0],n[1])),e},pointToData:function(t,e){var a=this.getAxis("x"),i=this.getAxis("y");return(e=e||[])[0]=a.coordToData(a.toLocalCoord(t[0])),e[1]=i.coordToData(i.toLocalCoord(t[1])),e},getOtherAxis:function(t){return this.getAxis("x"===t.dim?"y":"x")},getArea:function(){var t=this.getAxis("x").getGlobalExtent(),e=this.getAxis("y").getGlobalExtent(),a=Math.min(t[0],t[1]),i=Math.min(e[0],e[1]),n=Math.max(t[0],t[1])-a,o=Math.max(e[0],e[1])-i;return new r(a,i,n,o)}},i.inherits(o,n);var s=o;t.exports=s},y23F:function(t,e){function a(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function i(t,e){return{target:t,topTarget:e&&e.topTarget}}a.prototype={constructor:a,_dragStart:function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(i(e,t),"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var a=t.offsetX,r=t.offsetY,n=a-this._x,o=r-this._y;this._x=a,this._y=r,e.drift(n,o,t),this.dispatchToElement(i(e,t),"drag",t.event);var s=this.findHover(a,r,e).target,h=this._dropTarget;this._dropTarget=s,e!==s&&(h&&s!==h&&this.dispatchToElement(i(h,t),"dragleave",t.event),s&&s!==h&&this.dispatchToElement(i(s,t),"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(i(e,t),"dragend",t.event),this._dropTarget&&this.dispatchToElement(i(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null}};var r=a;t.exports=r},"y4/Y":function(t,e,a){var i=a("ProS"),r=a("bYtY"),n=a("zTMp"),o=a("62sa");a("SKx+"),a("1LEl"),a("Sp2Z"),i.registerPreprocessor(function(t){if(t){(!t.axisPointer||0===t.axisPointer.length)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!r.isArray(e)&&(t.axisPointer.link=[e])}}),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=n.collect(t,e)}),i.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},o)},yK9s:function(t,e,a){"use strict";var i=a("xTJ+");t.exports=function(t,e){i.forEach(t,function(a,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=a,delete t[i])})}},yLpj:function(t,e){var a;a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(a=window)}t.exports=a},yQFZ:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},ypgQ:function(t,e,a){var i=a("bYtY"),r=a("4NO4"),n=a("bLfw"),o=i.each,s=i.clone,h=i.map,l=i.merge,u=/^(min|max)?(.+)$/;function c(t){this._api=t,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}function f(t,e,a){var r={width:e,height:a,aspectratio:e/a},n=!0;return i.each(t,function(t,e){var a=e.match(u);if(a&&a[1]&&a[2]){var i=a[1],o=a[2].toLowerCase();(function(t,e,a){return"min"===a?t>=e:"max"===a?t<=e:t===e})(r[o],t,i)||(n=!1)}}),n}c.prototype={constructor:c,setOption:function(t,e){t&&i.each(r.normalizeToArray(t.series),function(t){t&&t.data&&i.isTypedArray(t.data)&&i.setAsPrimitive(t.data)}),t=s(t);var a=this._optionBackup,u=function(t,e,a){var r,n,s=[],h=[],l=t.timeline;t.baseOption&&(n=t.baseOption);(l||t.options)&&(n=n||{},s=(t.options||[]).slice());if(t.media){n=n||{};var u=t.media;o(u,function(t){t&&t.option&&(t.query?h.push(t):r||(r=t))})}n||(n=t);n.timeline||(n.timeline=l);return o([n].concat(s).concat(i.map(h,function(t){return t.option})),function(t){o(e,function(e){e(t,a)})}),{baseOption:n,timelineOptions:s,mediaDefault:r,mediaList:h}}.call(this,t,e,!a);this._newBaseOption=u.baseOption,a?(!function(t,e){o(e=e||{},function(e,a){if(null!=e){var i=t[a];if(n.hasClass(a)){e=r.normalizeToArray(e),i=r.normalizeToArray(i);var o=r.mappingToExists(i,e);t[a]=h(o,function(t){return t.option&&t.exist?l(t.exist,t.option,!0):t.exist||t.option})}else t[a]=l(i,e,!0)}})}(a.baseOption,u.baseOption),u.timelineOptions.length&&(a.timelineOptions=u.timelineOptions),u.mediaList.length&&(a.mediaList=u.mediaList),u.mediaDefault&&(a.mediaDefault=u.mediaDefault)):this._optionBackup=u},mountOption:function(t){var e=this._optionBackup;return this._timelineOptions=h(e.timelineOptions,s),this._mediaList=h(e.mediaList,s),this._mediaDefault=s(e.mediaDefault),this._currentMediaIndices=[],s(t?e.baseOption:this._newBaseOption)},getTimelineOption:function(t){var e,a=this._timelineOptions;if(a.length){var i=t.getComponent("timeline");i&&(e=s(a[i.getCurrentIndex()],!0))}return e},getMediaOption:function(t){var e=this._api.getWidth(),a=this._api.getHeight(),i=this._mediaList,r=this._mediaDefault,n=[],o=[];if(!i.length&&!r)return o;for(var l=0,u=i.length;l<u;l++)f(i[l].query,e,a)&&n.push(l);return!n.length&&r&&(n=[-1]),n.length&&!function(t,e){return t.join(",")===e.join(",")}(n,this._currentMediaIndices)&&(o=h(n,function(t){return s(-1===t?r.option:i[t].option)})),this._currentMediaIndices=n,o}};var d=c;t.exports=d},yxFR:function(t,e,a){var i=a("y+Vt"),r=a("nPnh").subPixelOptimizeLine,n={},o=i.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var a,i,o,s;this.subPixelOptimize?(r(n,e,this.style),a=n.x1,i=n.y1,o=n.x2,s=n.y2):(a=e.x1,i=e.y1,o=e.x2,s=e.y2);var h=e.percent;0!==h&&(t.moveTo(a,i),h<1&&(o=a*(1-h)+o*h,s=i*(1-h)+s*h),t.lineTo(o,s))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}});t.exports=o},z35g:function(t,e,a){var i=a("bYtY");function r(t){return this._axes[t]}var n=function(t){this._axes={},this._dimList=[],this.name=t||""};n.prototype={constructor:n,type:"cartesian",getAxis:function(t){return this._axes[t]},getAxes:function(){return i.map(this._dimList,r,this)},getAxesByScale:function(t){return t=t.toLowerCase(),i.filter(this.getAxes(),function(e){return e.scale.type===t})},addAxis:function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},dataToCoord:function(t){return this._dataCoordConvert(t,"dataToCoord")},coordToData:function(t){return this._dataCoordConvert(t,"coordToData")},_dataCoordConvert:function(t,e){for(var a=this._dimList,i=t instanceof Array?[]:{},r=0;r<a.length;r++){var n=a[r],o=this._axes[n];i[n]=o[e](t[n])}return i}};var o=n;t.exports=o},zBWt:function(t,e,a){var i=a("s2er")("wks"),r=a("ixoo"),n=a("7whZ").Symbol,o="function"==typeof n;(t.exports=function(t){return i[t]||(i[t]=o&&n[t]||(o?n:r)("Symbol."+t))}).store=i},zM3Q:function(t,e,a){var i=a("4NO4").makeInner;t.exports=function(){var t=i();return function(e){var a=t(e),i=e.pipelineContext,r=a.large,n=a.progressiveRender,o=a.large=i&&i.large,s=a.progressiveRender=i&&i.progressiveRender;return!!(r^o||n^s)&&"reset"}}},zRKj:function(t,e,a){a("Ae16"),a("Sp2Z"),a("y4/Y")},zTMp:function(t,e,a){var i=a("bYtY"),r=a("Qxkt"),n=i.each,o=i.curry;function s(t,e){return"all"===t||i.isArray(t)&&i.indexOf(t,e)>=0||t===e}function h(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[u(t)]}function l(t){return!!t.get("handle.show")}function u(t){return t.type+"||"+t.id}e.collect=function(t,e){var a={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(t,e,a){var h=e.getComponent("tooltip"),c=e.getComponent("axisPointer"),f=c.get("link",!0)||[],d=[];n(a.getCoordinateSystems(),function(a){if(a.axisPointerEnabled){var C=u(a.model),p=t.coordSysAxesInfo[C]={};t.coordSysMap[C]=a;var m=a.model,D=m.getModel("tooltip",h);if(n(a.getAxes(),o(T,!1,null)),a.getTooltipAxes&&h&&D.get("show")){var v="axis"===D.get("trigger"),g="cross"===D.get("axisPointer.type"),S=a.getTooltipAxes(D.get("axisPointer.axis"));(v||g)&&n(S.baseAxes,o(T,!g||"cross",v)),g&&n(S.otherAxes,o(T,"cross",!1))}}function T(o,h,C){var m=C.model.getModel("axisPointer",c),v=m.get("show");if(v&&("auto"!==v||o||l(m))){null==h&&(h=m.get("triggerTooltip"));var g=(m=o?function(t,e,a,o,s,h){var l=e.getModel("axisPointer"),u={};n(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(t){u[t]=i.clone(l.get(t))}),u.snap="category"!==t.type&&!!h,"cross"===l.get("type")&&(u.type="line");var c=u.label||(u.label={});if(null==c.show&&(c.show=!1),"cross"===s){var f=l.get("label.show");if(c.show=null==f||f,!h){var d=u.lineStyle=l.get("crossStyle");d&&i.defaults(c,d.textStyle)}}return t.model.getModel("axisPointer",new r(u,a,o))}(C,D,c,e,o,h):m).get("snap"),S=u(C.model),T=h||g||"category"===C.type,I=t.axesInfo[S]={key:S,axis:C,coordSys:a,axisPointerModel:m,triggerTooltip:h,involveSeries:T,snap:g,useHandle:l(m),seriesModels:[]};p[S]=I,t.seriesInvolved|=T;var y=function(t,e){for(var a=e.model,i=e.dim,r=0;r<t.length;r++){var n=t[r]||{};if(s(n[i+"AxisId"],a.id)||s(n[i+"AxisIndex"],a.componentIndex)||s(n[i+"AxisName"],a.name))return r}}(f,C);if(null!=y){var x=d[y]||(d[y]={axesInfo:{}});x.axesInfo[S]=I,x.mapper=f[y].mapper,I.linkGroup=x}}}})}(a,t,e),a.seriesInvolved&&function(t,e){e.eachSeries(function(e){var a=e.coordinateSystem,i=e.get("tooltip.trigger",!0),r=e.get("tooltip.show",!0);a&&"none"!==i&&!1!==i&&"item"!==i&&!1!==r&&!1!==e.get("axisPointer.show",!0)&&n(t.coordSysAxesInfo[u(a.model)],function(t){var i=t.axis;a.getAxis(i.dim)===i&&(t.seriesModels.push(e),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=e.getData().count())})},this)}(a,t),a},e.fixValue=function(t){var e=h(t);if(e){var a=e.axisPointerModel,i=e.axis.scale,r=a.option,n=a.get("status"),o=a.get("value");null!=o&&(o=i.parse(o));var s=l(a);null==n&&(r.status=s?"show":"hide");var u=i.getExtent().slice();u[0]>u[1]&&u.reverse(),(null==o||o>u[1])&&(o=u[1]),o<u[0]&&(o=u[0]),r.value=o,s&&(r.status=e.axis.scale.isBlank()?"hide":"show")}},e.getAxisInfo=h,e.getAxisPointerModel=function(t){var e=h(t);return e&&e.axisPointerModel},e.makeKey=u},zarK:function(t,e,a){var i=a("YH21"),r=i.addEventListener,n=i.removeEventListener,o=i.normalizeEvent,s=i.getNativeEvent,h=a("bYtY"),l=a("H6uX"),u=a("ItGF"),c=u.domSupported,f=function(){var t=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e={pointerdown:1,pointerup:1,pointermove:1,pointerout:1};return{mouse:t,touch:["touchstart","touchend","touchmove"],pointer:h.map(t,function(t){var a=t.replace("mouse","pointer");return e.hasOwnProperty(a)?a:t})}}(),d={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]};function C(t){return"mousewheel"===t&&u.browser.firefox?"DOMMouseScroll":t}function p(t){var e=t.pointerType;return"pen"===e||"touch"===e}function m(t){t&&(t.zrByTouch=!0)}function D(t,e){for(var a=e,i=!1;a&&9!==a.nodeType&&!(i=a.domBelongToZr||a!==e&&a===t.painterRoot);)a=a.parentNode;return i}function v(t,e){this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}var g=v.prototype;g.stopPropagation=g.stopImmediatePropagation=g.preventDefault=h.noop;var S={mousedown:function(t){t=o(this.dom,t),this._mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=o(this.dom,t);var e=this._mayPointerCapture;!e||t.zrX===e[0]&&t.zrY===e[1]||F(this,!0),this.trigger("mousemove",t)},mouseup:function(t){t=o(this.dom,t),F(this,!1),this.trigger("mouseup",t)},mouseout:function(t){t=o(this.dom,t),this._pointerCapturing&&(t.zrEventControl="no_globalout");var e=t.toElement||t.relatedTarget;t.zrIsToLocalDOM=D(this,e),this.trigger("mouseout",t)},touchstart:function(t){m(t=o(this.dom,t)),this._lastTouchMoment=new Date,this.handler.processGesture(t,"start"),S.mousemove.call(this,t),S.mousedown.call(this,t)},touchmove:function(t){m(t=o(this.dom,t)),this.handler.processGesture(t,"change"),S.mousemove.call(this,t)},touchend:function(t){m(t=o(this.dom,t)),this.handler.processGesture(t,"end"),S.mouseup.call(this,t),+new Date-this._lastTouchMoment<300&&S.click.call(this,t)},pointerdown:function(t){S.mousedown.call(this,t)},pointermove:function(t){p(t)||S.mousemove.call(this,t)},pointerup:function(t){S.mouseup.call(this,t)},pointerout:function(t){p(t)||S.mouseout.call(this,t)}};h.each(["click","mousewheel","dblclick","contextmenu"],function(t){S[t]=function(e){e=o(this.dom,e),this.trigger(t,e)}});var T={pointermove:function(t){p(t)||T.mousemove.call(this,t)},pointerup:function(t){T.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this._pointerCapturing;F(this,!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function I(t,e){var a=e.domHandlers;u.pointerEventsSupported?h.each(f.pointer,function(i){x(e,i,function(e){a[i].call(t,e)})}):(u.touchEventsSupported&&h.each(f.touch,function(i){x(e,i,function(r){a[i].call(t,r),function(t){t.touching=!0,null!=t.touchTimer&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}(e)})}),h.each(f.mouse,function(i){x(e,i,function(r){r=s(r),e.touching||a[i].call(t,r)})}))}function y(t,e){function a(a){x(e,a,function(i){i=s(i),D(t,i.target)||(i=function(t,e){return o(t.dom,new v(t,e),!0)}(t,i),e.domHandlers[a].call(t,i))},{capture:!0})}u.pointerEventsSupported?h.each(d.pointer,a):u.touchEventsSupported||h.each(d.mouse,a)}function x(t,e,a,i){t.mounted[e]=a,t.listenerOpts[e]=i,r(t.domTarget,C(e),a,i)}function w(t){var e=t.mounted;for(var a in e)e.hasOwnProperty(a)&&n(t.domTarget,C(a),e[a],t.listenerOpts[a]);t.mounted={}}function F(t,e){if(t._mayPointerCapture=null,c&&t._pointerCapturing^e){t._pointerCapturing=e;var a=t._globalHandlerScope;e?y(t,a):w(a)}}function E(t,e){this.domTarget=t,this.domHandlers=e,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function b(t,e){l.call(this),this.dom=t,this.painterRoot=e,this._localHandlerScope=new E(t,S),c&&(this._globalHandlerScope=new E(document,T)),this._pointerCapturing=!1,this._mayPointerCapture=null,I(this,this._localHandlerScope)}var L=b.prototype;L.dispose=function(){w(this._localHandlerScope),c&&w(this._globalHandlerScope)},L.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},h.mixin(b,l);var M=b;t.exports=M},znrX:function(t,e,a){var i=a("nA4W"),r=a("CYMq"),n=a("WpRT")("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,n)?t[n]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},zuR4:function(t,e,a){"use strict";var i=a("xTJ+"),r=a("HSsa"),n=a("CgaS"),o=a("SntB");function s(t){var e=new n(t),a=r(n.prototype.request,e);return i.extend(a,n.prototype,e),i.extend(a,e),a}var h=s(a("JEQr"));h.Axios=n,h.create=function(t){return s(o(h.defaults,t))},h.Cancel=a("endd"),h.CancelToken=a("jfS+"),h.isCancel=a("Lmem"),h.all=function(t){return Promise.all(t)},h.spread=a("DfZB"),t.exports=h,t.exports.default=h}}]);